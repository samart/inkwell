<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inkwell</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&family=Source+Serif+4:ital,opsz,wght@0,8..60,400;0,8..60,500;0,8..60,600;1,8..60,400;1,8..60,500&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <!-- Milkdown -->
    <script type="importmap">
    {
        "imports": {
            "@milkdown/core": "https://esm.sh/@milkdown/core@7.8.0",
            "@milkdown/ctx": "https://esm.sh/@milkdown/ctx@7.8.0",
            "@milkdown/prose": "https://esm.sh/@milkdown/prose@7.8.0",
            "@milkdown/preset-commonmark": "https://esm.sh/@milkdown/preset-commonmark@7.8.0",
            "@milkdown/preset-gfm": "https://esm.sh/@milkdown/preset-gfm@7.8.0",
            "@milkdown/plugin-history": "https://esm.sh/@milkdown/plugin-history@7.8.0",
            "@milkdown/plugin-clipboard": "https://esm.sh/@milkdown/plugin-clipboard@7.8.0",
            "@milkdown/plugin-listener": "https://esm.sh/@milkdown/plugin-listener@7.8.0",
            "@milkdown/plugin-upload": "https://esm.sh/@milkdown/plugin-upload@7.8.0",
            "@milkdown/plugin-slash": "https://esm.sh/@milkdown/plugin-slash@7.8.0",
            "@milkdown/plugin-block": "https://esm.sh/@milkdown/plugin-block@7.8.0",
            "@milkdown/plugin-indent": "https://esm.sh/@milkdown/plugin-indent@7.8.0",
            "@milkdown/plugin-trailing": "https://esm.sh/@milkdown/plugin-trailing@7.8.0",
            "@milkdown/utils": "https://esm.sh/@milkdown/utils@7.8.0",
            "@milkdown/theme-nord": "https://esm.sh/@milkdown/theme-nord@7.8.0"
        }
    }
    </script>

    <!-- Styles -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/editor.css">
    <link rel="stylesheet" href="/css/filetree.css">
    <link rel="stylesheet" href="/css/themes/light.css" id="theme-light">
    <link rel="stylesheet" href="/css/themes/dark.css" id="theme-dark" disabled>
</head>
<body>
    <div id="app">
        <!-- Sidebar -->
        <aside id="sidebar">
            <div class="sidebar-header">
                <h1 class="logo">Inkwell</h1>
                <button id="theme-toggle" class="icon-btn" title="Toggle theme">
                    <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"/>
                        <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                    </svg>
                    <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    </svg>
                </button>
            </div>

            <div class="search-container">
                <input type="text" id="search-input" placeholder="Search files..." />
            </div>

            <div id="file-tree" class="file-tree">
                <!-- File tree will be rendered here -->
            </div>

            <div class="sidebar-footer">
                <button id="new-file-btn" class="btn-new">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 5v14M5 12h14"/>
                    </svg>
                    New File
                </button>
            </div>
        </aside>

        <!-- Main content -->
        <main id="main-content">
            <!-- Tab bar -->
            <div id="tab-bar">
                <div id="tabs-container">
                    <!-- Tabs will be rendered here -->
                </div>
            </div>

            <!-- Editor container -->
            <div id="editor-container">
                <div id="editor-wrapper">
                    <div id="editor">
                        <!-- Milkdown editor will be mounted here -->
                    </div>
                </div>

                <!-- Empty state -->
                <div id="empty-state">
                    <div class="empty-content">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                            <line x1="16" y1="13" x2="8" y2="13"/>
                            <line x1="16" y1="17" x2="8" y2="17"/>
                            <polyline points="10 9 9 9 8 9"/>
                        </svg>
                        <h2>Welcome to Inkwell</h2>
                        <p>Select a file from the sidebar or create a new one to start writing.</p>
                    </div>
                </div>
            </div>

            <!-- Status bar -->
            <div id="status-bar">
                <span id="status-text">Ready</span>
                <span id="word-count"></span>
            </div>
        </main>
    </div>

    <!-- New file modal -->
    <div id="new-file-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <h3>Create New File</h3>
            <input type="text" id="new-file-name" placeholder="filename.md" />
            <div class="modal-actions">
                <button id="cancel-new-file" class="btn-secondary">Cancel</button>
                <button id="confirm-new-file" class="btn-primary">Create</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="/js/app.js"></script>
</body>
</html>
