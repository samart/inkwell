<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inkwell</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Source+Serif+4:ital,opsz,wght@0,8..60,400;0,8..60,500;0,8..60,600;0,8..60,700;1,8..60,400;1,8..60,500;1,8..60,600;1,8..60,700&family=Sora:wght@400;500;600;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div id="app">
        <!-- Sidebar -->
        <aside id="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <img src="/logo-dark.png" alt="Inkwell" class="app-logo logo-dark" />
                    <img src="/logo-light.png" alt="Inkwell" class="app-logo logo-light" />
                    <h1 class="logo-text">Inkwell</h1>
                </div>
                <button id="theme-toggle" class="icon-btn" title="Toggle theme">
                    <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5" />
                        <path
                            d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
                    </svg>
                    <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
                    </svg>
                </button>
            </div>

            <div class="search-container">
                <input type="text" id="search-input" placeholder="Search files..." />
            </div>

            <div id="file-tree" class="file-tree"></div>

            <div class="sidebar-footer">
                <div id="git-status" class="git-status-container"></div>
                <button id="open-folder-btn" class="btn-folder" title="Open folder">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z" />
                    </svg>
                    Open Folder
                </button>
                <button id="new-file-btn" class="btn-new">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 5v14M5 12h14" />
                    </svg>
                    New File
                </button>
            </div>
        </aside>

        <!-- Main content -->
        <main id="main-content">
            <div id="tab-bar">
                <div id="tabs-container"></div>
                <div id="view-controls">
                    <button id="toggle-markdown" class="view-btn" title="Toggle markdown panel">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                            <polyline points="14 2 14 8 20 8" />
                            <line x1="16" y1="13" x2="8" y2="13" />
                            <line x1="16" y1="17" x2="8" y2="17" />
                        </svg>
                    </button>
                    <button id="copy-markdown" class="view-btn" title="Copy markdown">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                        </svg>
                    </button>
                </div>
            </div>

            <div id="editor-container">
                <!-- Floating width control -->
                <div id="width-control" class="width-control">
                    <button class="width-btn" data-width="narrow" title="Narrow">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="7" y="3" width="10" height="18" rx="1" />
                        </svg>
                    </button>
                    <button class="width-btn active" data-width="normal" title="Normal">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="5" y="3" width="14" height="18" rx="1" />
                        </svg>
                    </button>
                    <button class="width-btn" data-width="wide" title="Wide">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="1" />
                        </svg>
                    </button>
                    <button class="width-btn" data-width="full" title="Full">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="1" y="3" width="22" height="18" rx="1" />
                            <path d="M4 12h2M18 12h2" />
                        </svg>
                    </button>
                </div>

                <div id="editor-wrapper">
                    <div id="editor" data-width="normal"></div>
                </div>

                <div id="empty-state">
                    <div class="empty-content">
                        <img src="/logo-dark.png" alt="Inkwell" class="empty-logo logo-dark" />
                        <img src="/logo-light.png" alt="Inkwell" class="empty-logo logo-light" />
                        <h2>Welcome to Inkwell</h2>
                        <p>Select a file from the sidebar or create a new one to start writing.</p>
                    </div>
                </div>
            </div>

            <div id="status-bar">
                <span id="status-text">Ready</span>
                <span id="word-count"></span>
            </div>
        </main>

        <!-- Markdown slide-out panel -->
        <aside id="markdown-panel" class="hidden">
            <div class="panel-header">
                <h3>Markdown</h3>
                <button id="close-markdown-panel" class="icon-btn" title="Close panel">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <div class="panel-content">
                <pre id="markdown-content"></pre>
            </div>
        </aside>

        <!-- Git panel (right sidebar) -->
        <aside id="git-panel-container" class="git-panel"></aside>
    </div>

    <!-- New file modal -->
    <div id="new-file-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <h3>Create New File</h3>
            <input type="text" id="new-file-name" placeholder="filename.md" />
            <div class="modal-actions">
                <button id="cancel-new-file" class="btn-secondary">Cancel</button>
                <button id="confirm-new-file" class="btn-primary">Create</button>
            </div>
        </div>
    </div>

    <!-- Directory chooser modal -->
    <div id="directory-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content directory-chooser">
            <h3>Open Folder</h3>
            <div class="directory-path">
                <input type="text" id="directory-path-input" placeholder="Enter path or browse..." />
            </div>
            <div id="directory-list" class="directory-list"></div>
            <div class="modal-actions">
                <button id="cancel-directory" class="btn-secondary">Cancel</button>
                <button id="confirm-directory" class="btn-primary">Open</button>
            </div>
        </div>
    </div>

    <!-- Startup location modal -->
    <div id="startup-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content startup-chooser">
            <div class="startup-logo">
                <img src="/logo-dark.png" alt="Inkwell" class="logo-dark" />
                <img src="/logo-light.png" alt="Inkwell" class="logo-light" />
            </div>
            <h3>Welcome to Inkwell</h3>
            <p class="startup-subtitle">Choose a folder to start editing</p>
            <div id="startup-recents" class="startup-recents"></div>
            <div class="startup-actions">
                <button id="startup-browse" class="btn-secondary">Browse for Folder...</button>
                <button id="startup-continue" class="btn-primary">Continue with Current</button>
            </div>
        </div>
    </div>

    <!-- Theme selector popup -->
    <div id="theme-selector" class="theme-selector hidden">
        <div class="theme-selector-header">
            <span>Choose Theme</span>
            <button id="close-theme-selector" class="icon-btn-small">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18" />
                    <line x1="6" y1="6" x2="18" y2="18" />
                </svg>
            </button>
        </div>
        <div class="theme-grid">
            <button class="theme-card" data-theme="light">
                <div class="theme-preview theme-preview-light">
                    <div class="preview-sidebar"></div>
                    <div class="preview-content">
                        <div class="preview-line"></div>
                        <div class="preview-line short"></div>
                    </div>
                </div>
                <span class="theme-name">Light</span>
            </button>
            <button class="theme-card" data-theme="light-sepia">
                <div class="theme-preview theme-preview-sepia">
                    <div class="preview-sidebar"></div>
                    <div class="preview-content">
                        <div class="preview-line"></div>
                        <div class="preview-line short"></div>
                    </div>
                </div>
                <span class="theme-name">Sepia</span>
            </button>
            <button class="theme-card" data-theme="light-ocean">
                <div class="theme-preview theme-preview-ocean">
                    <div class="preview-sidebar"></div>
                    <div class="preview-content">
                        <div class="preview-line"></div>
                        <div class="preview-line short"></div>
                    </div>
                </div>
                <span class="theme-name">Ocean</span>
            </button>
            <button class="theme-card" data-theme="dark">
                <div class="theme-preview theme-preview-dark">
                    <div class="preview-sidebar"></div>
                    <div class="preview-content">
                        <div class="preview-line"></div>
                        <div class="preview-line short"></div>
                    </div>
                </div>
                <span class="theme-name">Dark</span>
            </button>
            <button class="theme-card" data-theme="dark-nord">
                <div class="theme-preview theme-preview-nord">
                    <div class="preview-sidebar"></div>
                    <div class="preview-content">
                        <div class="preview-line"></div>
                        <div class="preview-line short"></div>
                    </div>
                </div>
                <span class="theme-name">Nord</span>
            </button>
            <button class="theme-card" data-theme="dark-monokai">
                <div class="theme-preview theme-preview-monokai">
                    <div class="preview-sidebar"></div>
                    <div class="preview-content">
                        <div class="preview-line"></div>
                        <div class="preview-line short"></div>
                    </div>
                </div>
                <span class="theme-name">Monokai</span>
            </button>
        </div>
    </div>

    <script type="module" src="/src/main.ts"></script>
</body>

</html>