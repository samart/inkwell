const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CH1mf4nG.js","assets/index-BAleEKl9.js","assets/main-C0XvQYJ0.css","assets/index-DQfvJRAp.js","assets/index-C07MktmR.js","assets/index-Czk-u_Z0.js","assets/index-Dug-2lPl.js","assets/index-DIA8mN-I.js","assets/index-CEdcaki7.js","assets/index-0TvBlzq5.js","assets/index-DbwXqz6b.js","assets/index-CZaHQo-x.js","assets/index-EPjGucXc.js","assets/index-9EhX_XNt.js","assets/index-BcpicjVO.js","assets/index-C-n7okg2.js","assets/index-1mecFLdy.js","assets/index-BqBNAq6H.js","assets/index-DWXckmfL.js","assets/index-CtOQhT_D.js","assets/index-RI3ow2DN.js","assets/dockerfile-BKs6k2Af.js","assets/simple-mode-GW_nhZxv.js","assets/factor-kuTfRLto.js","assets/nsis-LdVXkNf5.js","assets/pug-DukmZTjD.js","assets/javascript-qCveANmP.js","assets/index-IJiJAXIA.js","assets/index-CnDAYi1_.js","assets/dagre-6UL2VRFP-xoj5m8pJ.js","assets/graph-zchoKpPv.js","assets/_baseUniq-B6ai_kDc.js","assets/layout-C2zU1fxp.js","assets/_basePickBy-DbrKTpfQ.js","assets/clone-Bxed25vo.js","assets/cose-bilkent-S5V4N54A-BlYGH6Ua.js","assets/cytoscape.esm-CyJtwmzi.js","assets/c4Diagram-YG6GDRKO-DhRm752C.js","assets/chunk-TZMSLE5B-k27eBo_u.js","assets/flowDiagram-NV44I4VS-CCGKKyJ4.js","assets/chunk-FMBD7UC4-B9PNLHLH.js","assets/chunk-55IACEB6-CbviICZD.js","assets/chunk-QN33PNHL-CvsDp-xW.js","assets/channel-sJr1sOTW.js","assets/erDiagram-Q2GNP2WA-DNb-NC3s.js","assets/gitGraphDiagram-NY62KEGX-BA0vGsGC.js","assets/chunk-4BX2VUAB-Ceod-MNb.js","assets/chunk-QZHKN3VN-DXpNuhH2.js","assets/treemap-KMMF4GRG-BqjP05ZF.js","assets/ganttDiagram-JELNMOA3-DJ9s-RGg.js","assets/linear-DglGO_EX.js","assets/init-Gi6I4Gst.js","assets/defaultLocale-C4B-KCzX.js","assets/infoDiagram-WHAUD3N6-B_mLOX_z.js","assets/pieDiagram-ADFJNKIX-Bmzuhxwb.js","assets/arc-BQ46aFcE.js","assets/ordinal-Cboi1Yqb.js","assets/quadrantDiagram-AYHSOK5B-q-UKUj8w.js","assets/xychartDiagram-PRI3JC2R-b7vSs4aW.js","assets/requirementDiagram-UZGBJVZJ-oOeduwhT.js","assets/sequenceDiagram-WL72ISMW-B_-co07h.js","assets/classDiagram-2ON5EDUG-CFsY5O2j.js","assets/chunk-B4BG7PRW-Bl0dgWUd.js","assets/classDiagram-v2-WZHVMYZB-CFsY5O2j.js","assets/stateDiagram-FKZM4ZOC-DKiImlSk.js","assets/chunk-DI55MBZ5-CwpMIi3T.js","assets/stateDiagram-v2-4FDKWEC3-CCgGuC_l.js","assets/journeyDiagram-XKPGCS4Q-B8zXjuzs.js","assets/timeline-definition-IT6M3QCI-BQI99iyp.js","assets/mindmap-definition-VGOIOE7T-QRqLP6gO.js","assets/kanban-definition-3W4ZIXB7-CMiRr_zt.js","assets/sankeyDiagram-TZEHDZUN-Bs2_qQED.js","assets/diagram-S2PKOQOG-CuIAxAiW.js","assets/diagram-QEK2KX5R-9AwnJ8OD.js","assets/blockDiagram-VD42YOAC-Q0OVLKMP.js","assets/architectureDiagram-VXUJARFQ-DDas4UQQ.js","assets/diagram-PSM6KHXK-AodemfoS.js"])))=>i.map(i=>d[i]);
var hX=Object.defineProperty;var WT=t=>{throw TypeError(t)};var uX=(t,e,r)=>e in t?hX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Se=(t,e,r)=>uX(t,typeof e!="symbol"?e+"":e,r),dw=(t,e,r)=>e.has(t)||WT("Cannot "+r);var V=(t,e,r)=>(dw(t,e,"read from private field"),r?r.call(t):e.get(t)),we=(t,e,r)=>e.has(t)?WT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ne=(t,e,r,n)=>(dw(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),J1=(t,e,r)=>(dw(t,e,"access private method"),r);/* empty css             */(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const jT="/api";class fX{async request(e,r={}){const n=`${jT}${e}`,i=await fetch(n,{headers:{"Content-Type":"application/json",...r.headers},...r}),s=await i.json();if(!i.ok||!s.success)throw new Error(s.error||"Request failed");return s.data}async getTree(){return this.request("/tree")}async getFile(e){return this.request(`/files?path=${encodeURIComponent(e)}`)}async createFile(e,r=""){return this.request("/files",{method:"POST",body:JSON.stringify({path:e,content:r})})}async updateFile(e,r){return this.request(`/files?path=${encodeURIComponent(e)}`,{method:"PUT",body:JSON.stringify({path:e,content:r})})}async deleteFile(e){await this.request(`/files?path=${encodeURIComponent(e)}`,{method:"DELETE"})}async uploadImage(e){const r=new FormData;r.append("image",e);const n=await fetch(`${jT}/images`,{method:"POST",body:r}),i=await n.json();if(!n.ok||!i.success)throw new Error(i.error||"Upload failed");return i.data}async getConfig(){return this.request("/config")}async listDirectories(e){const r=e?`?path=${encodeURIComponent(e)}`:"";return this.request(`/directories${r}`)}async changeDirectory(e){return this.request("/directories",{method:"POST",body:JSON.stringify({path:e})})}async getFileMetadata(e){return this.request(`/files/metadata?path=${encodeURIComponent(e)}`)}async getRecents(){return this.request("/recents")}async getGitStatus(){return this.request("/git/status")}async initGitRepo(){return this.request("/git/init",{method:"POST"})}async stageFiles(e,r=!1){return this.request("/git/stage",{method:"POST",body:JSON.stringify({files:e,all:r})})}async unstageFiles(e,r=!1){return this.request("/git/unstage",{method:"POST",body:JSON.stringify({files:e,all:r})})}async commit(e,r){return this.request("/git/commit",{method:"POST",body:JSON.stringify({message:e,files:r})})}async discardChanges(e,r=!1){return this.request("/git/discard",{method:"POST",body:JSON.stringify({files:e,all:r})})}}const ir=new fX;class dX{constructor(){Se(this,"ws",null);Se(this,"listeners",new Map);Se(this,"reconnectAttempts",0);Se(this,"maxReconnectAttempts",5);Se(this,"reconnectDelay",1e3);Se(this,"connected",!1)}connect(){const r=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`;this.ws=new WebSocket(r),this.ws.onopen=()=>{console.log("WebSocket connected"),this.connected=!0,this.reconnectAttempts=0,this.emit("connected",null)},this.ws.onclose=()=>{console.log("WebSocket disconnected"),this.connected=!1,this.emit("disconnected",null),this.scheduleReconnect()},this.ws.onerror=n=>{console.error("WebSocket error:",n),this.emit("error",n)},this.ws.onmessage=n=>{try{const i=JSON.parse(n.data);this.handleMessage(i)}catch(i){console.error("Failed to parse WebSocket message:",i)}}}scheduleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.log("Max reconnect attempts reached");return}this.reconnectAttempts++;const e=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log(`Reconnecting in ${e}ms (attempt ${this.reconnectAttempts})`),setTimeout(()=>{this.connected||this.connect()},e)}handleMessage(e){var r;switch(e.type){case"fileEvent":this.emit("fileEvent",{path:e.path,eventType:(r=e.data)==null?void 0:r.eventType});break;case"saved":this.emit("saved",{path:e.path});break;case"error":this.emit("error",{message:e.content});break;default:console.log("Unknown message type:",e.type)}}send(e,r={}){var n;if(!this.connected||((n=this.ws)==null?void 0:n.readyState)!==WebSocket.OPEN){console.warn("WebSocket not connected");return}this.ws.send(JSON.stringify({type:e,...r}))}subscribe(e){this.send("subscribe",{path:e})}unsubscribe(e){this.send("unsubscribe",{path:e})}save(e,r){this.send("save",{path:e,content:r})}on(e,r){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(r)}off(e,r){const n=this.listeners.get(e);if(!n)return;const i=n.indexOf(r);i>-1&&n.splice(i,1)}emit(e,r){const n=this.listeners.get(e);if(n)for(const i of n)i(r)}disconnect(){this.ws&&(this.ws.close(),this.ws=null)}}const Z1=new dX;class pX{constructor(e,r={}){Se(this,"container");Se(this,"options");Se(this,"tree",null);Se(this,"expandedDirs",new Set);Se(this,"activeFile",null);Se(this,"searchQuery","");Se(this,"tooltip",null);Se(this,"tooltipTimeout",null);Se(this,"metadataCache",new Map);Se(this,"outline",[]);Se(this,"outlineExpanded",!0);Se(this,"collapsedSiblings",!0);Se(this,"expandedSiblingGroups",new Set);this.container=e,this.options=r;try{const n=localStorage.getItem("inkwell-expanded-dirs");n&&(this.expandedDirs=new Set(JSON.parse(n)))}catch{}}async load(){this.showLoading();try{this.tree=await ir.getTree(),this.render()}catch(e){this.showError(e.message)}}async refresh(){try{this.tree=await ir.getTree(),this.render()}catch(e){console.error("Failed to refresh tree:",e)}}setSearchQuery(e){this.searchQuery=e.toLowerCase(),this.render()}setActiveFile(e){e!==this.activeFile&&this.expandedSiblingGroups.clear(),this.activeFile=e,this.render()}render(){if(!this.tree){this.showEmpty();return}const e=this.filterTree(this.tree);if(!e||e.children&&e.children.length===0){this.searchQuery?this.showEmpty("No files match your search"):this.showEmpty("No markdown files found");return}this.container.innerHTML="",this.renderNodeWithCollapse(e,0,null)}getParentPath(e){const r=e.split("/");return r.pop(),r.join("/")||""}renderNodeWithCollapse(e,r,n){if(r===0&&e.isDir){this.renderChildrenWithCollapse(e.children||[],r,e.path);return}this.renderSingleNode(e,r),!e.isDir&&this.activeFile===e.path&&this.outline.length>0&&this.renderOutline(r),e.isDir&&this.expandedDirs.has(e.path)&&e.children&&this.renderChildrenWithCollapse(e.children,r+1,e.path)}renderChildrenWithCollapse(e,r,n){if(!this.activeFile||!this.collapsedSiblings||this.searchQuery){e.forEach(f=>this.renderNodeWithCollapse(f,r,n));return}const i=this.getParentPath(this.activeFile);if(!(i===n||n===""&&!i.includes("/"))){e.forEach(f=>this.renderNodeWithCollapse(f,r,n));return}const o=n||"root",a=this.expandedSiblingGroups.has(o),l=e.findIndex(f=>f.path===this.activeFile);if(l===-1){e.forEach(f=>this.renderNodeWithCollapse(f,r,n));return}const c=e.slice(0,l),h=e[l],u=e.slice(l+1);c.length>0&&!a?this.renderCollapsedPill(c,r,o,"before"):c.forEach(f=>this.renderNodeWithCollapse(f,r,n)),this.renderNodeWithCollapse(h,r,n),u.length>0&&!a?this.renderCollapsedPill(u,r,o,"after"):u.forEach(f=>this.renderNodeWithCollapse(f,r,n))}renderCollapsedPill(e,r,n,i){const s=document.createElement("div");s.className="sibling-collapse-pill",s.dataset.depth=String(r),s.dataset.position=i;const o=e.length,a=o===1?"file":"files";s.innerHTML=`
      <span class="collapse-pill-dots">
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
      </span>
      <span class="collapse-pill-text">${o} more ${a}</span>
    `,s.addEventListener("click",l=>{l.stopPropagation(),this.expandedSiblingGroups.add(n),this.render()}),this.container.appendChild(s)}renderSingleNode(e,r){const n=document.createElement("div");n.className="tree-item",n.dataset.path=e.path,n.dataset.depth=String(r),e.isDir?(n.classList.add("directory"),this.expandedDirs.has(e.path)&&n.classList.add("expanded")):this.activeFile===e.path&&n.classList.add("active");let i="";e.isDir?(i+=`<svg class="tree-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="9 18 15 12 9 6"/>
      </svg>`,i+=`<svg class="tree-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
      </svg>`):i+=`<svg class="tree-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
        <polyline points="14 2 14 8 20 8"/>
      </svg>`,i+=`<span class="tree-name">${this.escapeHtml(e.name)}</span>`,n.innerHTML=i,n.addEventListener("click",s=>{var o,a;s.stopPropagation(),e.isDir?this.toggleDir(e.path):(a=(o=this.options).onFileSelect)==null||a.call(o,e.path)}),n.addEventListener("dblclick",s=>{var o,a;s.stopPropagation(),e.isDir||(a=(o=this.options).onFileOpen)==null||a.call(o,e.path)}),n.addEventListener("contextmenu",s=>{s.preventDefault(),this.showContextMenu(s,e)}),n.addEventListener("mouseenter",s=>{this.showTooltip(s,e)}),n.addEventListener("mouseleave",()=>{this.hideTooltip()}),this.container.appendChild(n)}filterTree(e){var n;if(!this.searchQuery)return e;if(!e.isDir)return e.name.toLowerCase().includes(this.searchQuery)?e:null;const r=(n=e.children)==null?void 0:n.map(i=>this.filterTree(i)).filter(i=>i!==null);return!r||r.length===0?null:{...e,children:r}}renderNode(e,r){var s;if(r===0&&e.isDir){(s=e.children)==null||s.forEach(o=>this.renderNode(o,r));return}const n=document.createElement("div");n.className="tree-item",n.dataset.path=e.path,n.dataset.depth=String(r),e.isDir?(n.classList.add("directory"),this.expandedDirs.has(e.path)&&n.classList.add("expanded")):this.activeFile===e.path&&n.classList.add("active");let i="";e.isDir?(i+=`<svg class="tree-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="9 18 15 12 9 6"/>
      </svg>`,i+=`<svg class="tree-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
      </svg>`):i+=`<svg class="tree-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
        <polyline points="14 2 14 8 20 8"/>
      </svg>`,i+=`<span class="tree-name">${this.escapeHtml(e.name)}</span>`,n.innerHTML=i,n.addEventListener("click",o=>{var a,l;o.stopPropagation(),e.isDir?this.toggleDir(e.path):(l=(a=this.options).onFileSelect)==null||l.call(a,e.path)}),n.addEventListener("dblclick",o=>{var a,l;o.stopPropagation(),e.isDir||(l=(a=this.options).onFileOpen)==null||l.call(a,e.path)}),n.addEventListener("contextmenu",o=>{o.preventDefault(),this.showContextMenu(o,e)}),n.addEventListener("mouseenter",o=>{this.showTooltip(o,e)}),n.addEventListener("mouseleave",()=>{this.hideTooltip()}),this.container.appendChild(n),!e.isDir&&this.activeFile===e.path&&this.outline.length>0&&this.renderOutline(r),e.isDir&&this.expandedDirs.has(e.path)&&e.children&&e.children.forEach(o=>this.renderNode(o,r+1))}renderOutline(e){const r=document.createElement("div");r.className="outline-container",this.outlineExpanded&&r.classList.add("expanded");const n=document.createElement("div");n.className="outline-header",n.innerHTML=`
      <svg class="outline-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="9 18 15 12 9 6"/>
      </svg>
      <span class="outline-title">Outline</span>
    `,n.addEventListener("click",s=>{s.stopPropagation(),this.outlineExpanded=!this.outlineExpanded,r.classList.toggle("expanded",this.outlineExpanded)}),r.appendChild(n);const i=document.createElement("div");i.className="outline-items";for(const s of this.outline){const o=document.createElement("div");o.className="outline-item",o.dataset.level=String(s.level),o.dataset.line=String(s.line),o.innerHTML=`
        <span class="outline-text">${this.escapeHtml(s.text)}</span>
      `,o.addEventListener("click",a=>{var l,c;a.stopPropagation(),this.activeFile&&((c=(l=this.options).onHeadingClick)==null||c.call(l,this.activeFile,s.line))}),i.appendChild(o)}r.appendChild(i),this.container.appendChild(r)}updateOutline(e){this.outline=e,this.render()}clearOutline(){this.outline=[],this.render()}toggleDir(e){this.expandedDirs.has(e)?this.expandedDirs.delete(e):this.expandedDirs.add(e);try{localStorage.setItem("inkwell-expanded-dirs",JSON.stringify([...this.expandedDirs]))}catch{}this.render()}showContextMenu(e,r){const n=document.querySelector(".tree-context-menu");n&&n.remove();const i=document.createElement("div");i.className="tree-context-menu",i.style.left=`${e.clientX}px`,i.style.top=`${e.clientY}px`;let s="";r.isDir||(s+=`<div class="tree-context-menu-item" data-action="open">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
        </svg>
        Open
      </div>`),s+=`<div class="tree-context-menu-item" data-action="rename">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/>
      </svg>
      Rename
    </div>`,s+='<div class="tree-context-menu-divider"></div>',s+=`<div class="tree-context-menu-item danger" data-action="delete">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="3 6 5 6 21 6"/>
        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
      </svg>
      Delete
    </div>`,i.innerHTML=s,i.addEventListener("click",async a=>{var h,u,f,d,p,m,g;const c=(h=a.target.closest("[data-action]"))==null?void 0:h.getAttribute("data-action");if(c)switch(i.remove(),c){case"open":(f=(u=this.options).onFileOpen)==null||f.call(u,r.path);break;case"rename":(p=(d=this.options).onRename)==null||p.call(d,r.path);break;case"delete":if(confirm(`Delete "${r.name}"?`))try{await ir.deleteFile(r.path),(g=(m=this.options).onFileDeleted)==null||g.call(m,r.path),await this.refresh()}catch(y){alert("Failed to delete: "+y.message)}break}}),document.body.appendChild(i);const o=a=>{i.contains(a.target)||(i.remove(),document.removeEventListener("click",o))};setTimeout(()=>document.addEventListener("click",o),0)}showLoading(){this.container.innerHTML=`
      <div class="tree-loading">
        <div class="tree-loading-spinner"></div>
        Loading...
      </div>
    `}showEmpty(e="No markdown files found"){this.container.innerHTML=`
      <div class="tree-empty">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
        </svg>
        ${this.escapeHtml(e)}
      </div>
    `}showError(e){this.container.innerHTML=`
      <div class="tree-empty">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <line x1="12" y1="8" x2="12" y2="12"/>
          <line x1="12" y1="16" x2="12.01" y2="16"/>
        </svg>
        ${this.escapeHtml(e)}
      </div>
    `}formatFileSize(e){if(e===0)return"0 B";const r=1024,n=["B","KB","MB","GB"],i=Math.floor(Math.log(e)/Math.log(r));return parseFloat((e/Math.pow(r,i)).toFixed(1))+" "+n[i]}createTooltip(){return this.tooltip?this.tooltip:(this.tooltip=document.createElement("div"),this.tooltip.className="file-tooltip",document.body.appendChild(this.tooltip),this.tooltip)}async showTooltip(e,r){this.tooltipTimeout&&clearTimeout(this.tooltipTimeout),this.tooltipTimeout=window.setTimeout(async()=>{const n=this.createTooltip();let i=this.metadataCache.get(r.path);if(!i){n.innerHTML=`
          <div class="tooltip-path">${this.escapeHtml(r.path)}</div>
          <div class="tooltip-loading">Loading...</div>
        `,n.classList.add("visible"),this.positionTooltip(e);try{i=await ir.getFileMetadata(r.path),this.metadataCache.set(r.path,i)}catch{n.innerHTML=`
            <div class="tooltip-path">${this.escapeHtml(r.path)}</div>
            <div class="tooltip-error">Could not load metadata</div>
          `;return}}n.innerHTML=`
        <div class="tooltip-path">${this.escapeHtml(r.path)}</div>
        <div class="tooltip-meta">
          <span class="tooltip-size">${r.isDir?"Directory":this.formatFileSize(i.size)}</span>
          <span class="tooltip-modified">Modified: ${i.modifiedTime}</span>
        </div>
      `,n.classList.add("visible"),this.positionTooltip(e)},400)}positionTooltip(e){if(!this.tooltip)return;const r=10;let n=e.clientX+r,i=e.clientY+r;const s=this.tooltip.getBoundingClientRect();n+s.width>window.innerWidth&&(n=e.clientX-s.width-r),i+s.height>window.innerHeight&&(i=e.clientY-s.height-r),this.tooltip.style.left=`${n}px`,this.tooltip.style.top=`${i}px`}hideTooltip(){this.tooltipTimeout&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=null),this.tooltip&&this.tooltip.classList.remove("visible")}escapeHtml(e){const r=document.createElement("div");return r.textContent=e,r.innerHTML}}var AI=typeof global=="object"&&global&&global.Object===Object&&global,mX=typeof self=="object"&&self&&self.Object===Object&&self,lo=AI||mX||Function("return this")(),Eb=lo.Symbol,EI=Object.prototype,gX=EI.hasOwnProperty,yX=EI.toString,v0=Eb?Eb.toStringTag:void 0;function bX(t){var e=gX.call(t,v0),r=t[v0];try{t[v0]=void 0;var n=!0}catch{}var i=yX.call(t);return n&&(e?t[v0]=r:delete t[v0]),i}var xX=Object.prototype,vX=xX.toString;function wX(t){return vX.call(t)}var kX="[object Null]",CX="[object Undefined]",UT=Eb?Eb.toStringTag:void 0;function gu(t){return t==null?t===void 0?CX:kX:UT&&UT in Object(t)?bX(t):wX(t)}function Nd(t){return t!=null&&typeof t=="object"}var SX="[object Symbol]";function TX(t){return typeof t=="symbol"||Nd(t)&&gu(t)==SX}var Lb=Array.isArray,_X=/\s/;function MX(t){for(var e=t.length;e--&&_X.test(t.charAt(e)););return e}var AX=/^\s+/;function EX(t){return t&&t.slice(0,MX(t)+1).replace(AX,"")}function rs(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var GT=NaN,LX=/^[-+]0x[0-9a-f]+$/i,OX=/^0b[01]+$/i,DX=/^0o[0-7]+$/i,IX=parseInt;function KT(t){if(typeof t=="number")return t;if(TX(t))return GT;if(rs(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=rs(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=EX(t);var r=OX.test(t);return r||DX.test(t)?IX(t.slice(2),r?2:8):LX.test(t)?GT:+t}function LI(t){return t}var BX="[object AsyncFunction]",RX="[object Function]",PX="[object GeneratorFunction]",NX="[object Proxy]";function Z6(t){if(!rs(t))return!1;var e=gu(t);return e==RX||e==PX||e==BX||e==NX}var pw=lo["__core-js_shared__"],YT=function(){var t=/[^.]+$/.exec(pw&&pw.keys&&pw.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function FX(t){return!!YT&&YT in t}var $X=Function.prototype,zX=$X.toString;function yu(t){if(t!=null){try{return zX.call(t)}catch{}try{return t+""}catch{}}return""}var HX=/[\\^$.*+?()[\]{}|]/g,qX=/^\[object .+?Constructor\]$/,VX=Function.prototype,WX=Object.prototype,jX=VX.toString,UX=WX.hasOwnProperty,GX=RegExp("^"+jX.call(UX).replace(HX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function KX(t){if(!rs(t)||FX(t))return!1;var e=Z6(t)?GX:qX;return e.test(yu(t))}function YX(t,e){return t==null?void 0:t[e]}function bu(t,e){var r=YX(t,e);return KX(r)?r:void 0}var _k=bu(lo,"WeakMap"),XT=Object.create,XX=function(){function t(){}return function(e){if(!rs(e))return{};if(XT)return XT(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function OI(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function JX(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var ZX=800,QX=16,eJ=Date.now;function tJ(t){var e=0,r=0;return function(){var n=eJ(),i=QX-(n-r);if(r=n,i>0){if(++e>=ZX)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function rJ(t){return function(){return t}}var Ob=function(){try{var t=bu(Object,"defineProperty");return t({},"",{}),t}catch{}}(),nJ=Ob?function(t,e){return Ob(t,"toString",{configurable:!0,enumerable:!1,value:rJ(e),writable:!0})}:LI,iJ=tJ(nJ),sJ=9007199254740991,oJ=/^(?:0|[1-9]\d*)$/;function DI(t,e){var r=typeof t;return e=e??sJ,!!e&&(r=="number"||r!="symbol"&&oJ.test(t))&&t>-1&&t%1==0&&t<e}function Q6(t,e,r){e=="__proto__"&&Ob?Ob(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function pv(t,e){return t===e||t!==t&&e!==e}var aJ=Object.prototype,lJ=aJ.hasOwnProperty;function cJ(t,e,r){var n=t[e];(!(lJ.call(t,e)&&pv(n,r))||r===void 0&&!(e in t))&&Q6(t,e,r)}function hJ(t,e,r,n){var i=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=void 0;l===void 0&&(l=t[a]),i?Q6(r,a,l):cJ(r,a,l)}return r}var JT=Math.max;function uJ(t,e,r){return e=JT(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=JT(n.length-e,0),o=Array(s);++i<s;)o[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(o),OI(t,this,a)}}function II(t,e){return iJ(uJ(t,e,LI),t+"")}var fJ=9007199254740991;function BI(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=fJ}function mv(t){return t!=null&&BI(t.length)&&!Z6(t)}function dJ(t,e,r){if(!rs(r))return!1;var n=typeof e;return(n=="number"?mv(r)&&DI(e,r.length):n=="string"&&e in r)?pv(r[e],t):!1}function RI(t){return II(function(e,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&dJ(r[0],r[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var a=r[n];a&&t(e,a,n,s)}return e})}var pJ=Object.prototype;function gv(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||pJ;return t===r}function mJ(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var gJ="[object Arguments]";function ZT(t){return Nd(t)&&gu(t)==gJ}var PI=Object.prototype,yJ=PI.hasOwnProperty,bJ=PI.propertyIsEnumerable,Db=ZT(function(){return arguments}())?ZT:function(t){return Nd(t)&&yJ.call(t,"callee")&&!bJ.call(t,"callee")};function xJ(){return!1}var NI=typeof exports=="object"&&exports&&!exports.nodeType&&exports,QT=NI&&typeof module=="object"&&module&&!module.nodeType&&module,vJ=QT&&QT.exports===NI,e_=vJ?lo.Buffer:void 0,wJ=e_?e_.isBuffer:void 0,e7=wJ||xJ,kJ="[object Arguments]",CJ="[object Array]",SJ="[object Boolean]",TJ="[object Date]",_J="[object Error]",MJ="[object Function]",AJ="[object Map]",EJ="[object Number]",LJ="[object Object]",OJ="[object RegExp]",DJ="[object Set]",IJ="[object String]",BJ="[object WeakMap]",RJ="[object ArrayBuffer]",PJ="[object DataView]",NJ="[object Float32Array]",FJ="[object Float64Array]",$J="[object Int8Array]",zJ="[object Int16Array]",HJ="[object Int32Array]",qJ="[object Uint8Array]",VJ="[object Uint8ClampedArray]",WJ="[object Uint16Array]",jJ="[object Uint32Array]",mr={};mr[NJ]=mr[FJ]=mr[$J]=mr[zJ]=mr[HJ]=mr[qJ]=mr[VJ]=mr[WJ]=mr[jJ]=!0;mr[kJ]=mr[CJ]=mr[RJ]=mr[SJ]=mr[PJ]=mr[TJ]=mr[_J]=mr[MJ]=mr[AJ]=mr[EJ]=mr[LJ]=mr[OJ]=mr[DJ]=mr[IJ]=mr[BJ]=!1;function UJ(t){return Nd(t)&&BI(t.length)&&!!mr[gu(t)]}function GJ(t){return function(e){return t(e)}}var FI=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Np=FI&&typeof module=="object"&&module&&!module.nodeType&&module,KJ=Np&&Np.exports===FI,mw=KJ&&AI.process,t_=function(){try{var t=Np&&Np.require&&Np.require("util").types;return t||mw&&mw.binding&&mw.binding("util")}catch{}}(),r_=t_&&t_.isTypedArray,t7=r_?GJ(r_):UJ,YJ=Object.prototype,XJ=YJ.hasOwnProperty;function JJ(t,e){var r=Lb(t),n=!r&&Db(t),i=!r&&!n&&e7(t),s=!r&&!n&&!i&&t7(t),o=r||n||i||s,a=o?mJ(t.length,String):[],l=a.length;for(var c in t)(e||XJ.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||DI(c,l)))&&a.push(c);return a}function $I(t,e){return function(r){return t(e(r))}}var ZJ=$I(Object.keys,Object),QJ=Object.prototype,eZ=QJ.hasOwnProperty;function tZ(t){if(!gv(t))return ZJ(t);var e=[];for(var r in Object(t))eZ.call(t,r)&&r!="constructor"&&e.push(r);return e}function rZ(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var nZ=Object.prototype,iZ=nZ.hasOwnProperty;function sZ(t){if(!rs(t))return rZ(t);var e=gv(t),r=[];for(var n in t)n=="constructor"&&(e||!iZ.call(t,n))||r.push(n);return r}function zI(t){return mv(t)?JJ(t,!0):sZ(t)}var Sm=bu(Object,"create");function oZ(){this.__data__=Sm?Sm(null):{},this.size=0}function aZ(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var lZ="__lodash_hash_undefined__",cZ=Object.prototype,hZ=cZ.hasOwnProperty;function uZ(t){var e=this.__data__;if(Sm){var r=e[t];return r===lZ?void 0:r}return hZ.call(e,t)?e[t]:void 0}var fZ=Object.prototype,dZ=fZ.hasOwnProperty;function pZ(t){var e=this.__data__;return Sm?e[t]!==void 0:dZ.call(e,t)}var mZ="__lodash_hash_undefined__";function gZ(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Sm&&e===void 0?mZ:e,this}function Kh(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Kh.prototype.clear=oZ;Kh.prototype.delete=aZ;Kh.prototype.get=uZ;Kh.prototype.has=pZ;Kh.prototype.set=gZ;function yZ(){this.__data__=[],this.size=0}function yv(t,e){for(var r=t.length;r--;)if(pv(t[r][0],e))return r;return-1}var bZ=Array.prototype,xZ=bZ.splice;function vZ(t){var e=this.__data__,r=yv(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():xZ.call(e,r,1),--this.size,!0}function wZ(t){var e=this.__data__,r=yv(e,t);return r<0?void 0:e[r][1]}function kZ(t){return yv(this.__data__,t)>-1}function CZ(t,e){var r=this.__data__,n=yv(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function ul(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ul.prototype.clear=yZ;ul.prototype.delete=vZ;ul.prototype.get=wZ;ul.prototype.has=kZ;ul.prototype.set=CZ;var Tm=bu(lo,"Map");function SZ(){this.size=0,this.__data__={hash:new Kh,map:new(Tm||ul),string:new Kh}}function TZ(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function bv(t,e){var r=t.__data__;return TZ(e)?r[typeof e=="string"?"string":"hash"]:r.map}function _Z(t){var e=bv(this,t).delete(t);return this.size-=e?1:0,e}function MZ(t){return bv(this,t).get(t)}function AZ(t){return bv(this,t).has(t)}function EZ(t,e){var r=bv(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function kc(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}kc.prototype.clear=SZ;kc.prototype.delete=_Z;kc.prototype.get=MZ;kc.prototype.has=AZ;kc.prototype.set=EZ;var LZ="Expected a function";function Qg(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(LZ);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=t.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(Qg.Cache||kc),r}Qg.Cache=kc;var HI=$I(Object.getPrototypeOf,Object),OZ="[object Object]",DZ=Function.prototype,IZ=Object.prototype,qI=DZ.toString,BZ=IZ.hasOwnProperty,RZ=qI.call(Object);function PZ(t){if(!Nd(t)||gu(t)!=OZ)return!1;var e=HI(t);if(e===null)return!0;var r=BZ.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&qI.call(r)==RZ}function NZ(){this.__data__=new ul,this.size=0}function FZ(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function $Z(t){return this.__data__.get(t)}function zZ(t){return this.__data__.has(t)}var HZ=200;function qZ(t,e){var r=this.__data__;if(r instanceof ul){var n=r.__data__;if(!Tm||n.length<HZ-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new kc(n)}return r.set(t,e),this.size=r.size,this}function Fd(t){var e=this.__data__=new ul(t);this.size=e.size}Fd.prototype.clear=NZ;Fd.prototype.delete=FZ;Fd.prototype.get=$Z;Fd.prototype.has=zZ;Fd.prototype.set=qZ;var VI=typeof exports=="object"&&exports&&!exports.nodeType&&exports,n_=VI&&typeof module=="object"&&module&&!module.nodeType&&module,VZ=n_&&n_.exports===VI,i_=VZ?lo.Buffer:void 0,s_=i_?i_.allocUnsafe:void 0;function WZ(t,e){if(e)return t.slice();var r=t.length,n=s_?s_(r):new t.constructor(r);return t.copy(n),n}var Mk=bu(lo,"DataView"),Ak=bu(lo,"Promise"),Ek=bu(lo,"Set"),o_="[object Map]",jZ="[object Object]",a_="[object Promise]",l_="[object Set]",c_="[object WeakMap]",h_="[object DataView]",UZ=yu(Mk),GZ=yu(Tm),KZ=yu(Ak),YZ=yu(Ek),XZ=yu(_k),Yc=gu;(Mk&&Yc(new Mk(new ArrayBuffer(1)))!=h_||Tm&&Yc(new Tm)!=o_||Ak&&Yc(Ak.resolve())!=a_||Ek&&Yc(new Ek)!=l_||_k&&Yc(new _k)!=c_)&&(Yc=function(t){var e=gu(t),r=e==jZ?t.constructor:void 0,n=r?yu(r):"";if(n)switch(n){case UZ:return h_;case GZ:return o_;case KZ:return a_;case YZ:return l_;case XZ:return c_}return e});var u_=lo.Uint8Array;function JZ(t){var e=new t.constructor(t.byteLength);return new u_(e).set(new u_(t)),e}function ZZ(t,e){var r=e?JZ(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function QZ(t){return typeof t.constructor=="function"&&!gv(t)?XX(HI(t)):{}}function eQ(t){return function(e,r,n){for(var i=-1,s=Object(e),o=n(e),a=o.length;a--;){var l=o[++i];if(r(s[l],l,s)===!1)break}return e}}var tQ=eQ(),gw=function(){return lo.Date.now()},rQ="Expected a function",nQ=Math.max,iQ=Math.min;function xv(t,e,r){var n,i,s,o,a,l,c=0,h=!1,u=!1,f=!0;if(typeof t!="function")throw new TypeError(rQ);e=KT(e)||0,rs(r)&&(h=!!r.leading,u="maxWait"in r,s=u?nQ(KT(r.maxWait)||0,e):s,f="trailing"in r?!!r.trailing:f);function d(w){var _=n,I=i;return n=i=void 0,c=w,o=t.apply(I,_),o}function p(w){return c=w,a=setTimeout(y,e),h?d(w):o}function m(w){var _=w-l,I=w-c,N=e-_;return u?iQ(N,s-I):N}function g(w){var _=w-l,I=w-c;return l===void 0||_>=e||_<0||u&&I>=s}function y(){var w=gw();if(g(w))return b(w);a=setTimeout(y,m(w))}function b(w){return a=void 0,f&&n?d(w):(n=i=void 0,o)}function x(){a!==void 0&&clearTimeout(a),c=0,n=l=i=a=void 0}function T(){return a===void 0?o:b(gw())}function S(){var w=gw(),_=g(w);if(n=arguments,i=this,l=w,_){if(a===void 0)return p(l);if(u)return clearTimeout(a),a=setTimeout(y,e),d(l)}return a===void 0&&(a=setTimeout(y,e)),o}return S.cancel=x,S.flush=T,S}function Lk(t,e,r){(r!==void 0&&!pv(t[e],r)||r===void 0&&!(e in t))&&Q6(t,e,r)}function sQ(t){return Nd(t)&&mv(t)}function Ok(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function oQ(t){return hJ(t,zI(t))}function aQ(t,e,r,n,i,s,o){var a=Ok(t,r),l=Ok(e,r),c=o.get(l);if(c){Lk(t,r,c);return}var h=s?s(a,l,r+"",t,e,o):void 0,u=h===void 0;if(u){var f=Lb(l),d=!f&&e7(l),p=!f&&!d&&t7(l);h=l,f||d||p?Lb(a)?h=a:sQ(a)?h=JX(a):d?(u=!1,h=WZ(l,!0)):p?(u=!1,h=ZZ(l,!0)):h=[]:PZ(l)||Db(l)?(h=a,Db(a)?h=oQ(a):(!rs(a)||Z6(a))&&(h=QZ(l))):u=!1}u&&(o.set(l,h),i(h,l,n,s,o),o.delete(l)),Lk(t,r,h)}function vv(t,e,r,n,i){t!==e&&tQ(e,function(s,o){if(i||(i=new Fd),rs(s))aQ(t,e,o,r,vv,n,i);else{var a=n?n(Ok(t,o),s,o+"",t,e,i):void 0;a===void 0&&(a=s),Lk(t,o,a)}},zI)}function WI(t,e,r,n,i,s){return rs(t)&&rs(e)&&(s.set(e,t),vv(t,e,void 0,WI,s),s.delete(e)),t}var lQ=RI(function(t,e,r,n){vv(t,e,r,n)}),cQ=II(function(t){return t.push(void 0,WI),OI(lQ,void 0,t)}),hQ="[object Map]",uQ="[object Set]",fQ=Object.prototype,dQ=fQ.hasOwnProperty;function f_(t){if(t==null)return!0;if(mv(t)&&(Lb(t)||typeof t=="string"||typeof t.splice=="function"||e7(t)||t7(t)||Db(t)))return!t.length;var e=Yc(t);if(e==hQ||e==uQ)return!t.size;if(gv(t))return!tZ(t).length;for(var r in t)if(dQ.call(t,r))return!1;return!0}var pQ=RI(function(t,e,r){vv(t,e,r)}),mQ="Expected a function";function wv(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(mQ);return rs(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),xv(t,e,{leading:n,maxWait:e,trailing:i})}const gQ="modulepreload",yQ=function(t){return"/"+t},d_={},X=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=yQ(l),l in d_)return;d_[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":gQ,c||(u.as="script"),u.crossOrigin="",u.href=l,a&&u.setAttribute("nonce",a),document.head.appendChild(u),c)return new Promise((f,d)=>{u.addEventListener("load",f),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},bQ=1024;let xQ=0,ys=class{constructor(e,r){this.from=e,this.to=r}};class Ot{constructor(e={}){this.id=xQ++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ns.match(e)),r=>{let n=e(r);return n===void 0?null:[this,n]}}}Ot.closedBy=new Ot({deserialize:t=>t.split(" ")});Ot.openedBy=new Ot({deserialize:t=>t.split(" ")});Ot.group=new Ot({deserialize:t=>t.split(" ")});Ot.isolate=new Ot({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Ot.contextHash=new Ot({perNode:!0});Ot.lookAhead=new Ot({perNode:!0});Ot.mounted=new Ot({perNode:!0});class _m{constructor(e,r,n){this.tree=e,this.overlay=r,this.parser=n}static get(e){return e&&e.props&&e.props[Ot.mounted.id]}}const vQ=Object.create(null);let ns=class jI{constructor(e,r,n,i=0){this.name=e,this.props=r,this.id=n,this.flags=i}static define(e){let r=e.props&&e.props.length?Object.create(null):vQ,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new jI(e.name||"",r,e.id,n);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");r[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let r=this.prop(Ot.group);return r?r.indexOf(e)>-1:!1}return this.id==e}static match(e){let r=Object.create(null);for(let n in e)for(let i of n.split(" "))r[i]=e[n];return n=>{for(let i=n.prop(Ot.group),s=-1;s<(i?i.length:0);s++){let o=r[s<0?n.name:i[s]];if(o)return o}}}};ns.none=new ns("",Object.create(null),0,8);class r7{constructor(e){this.types=e;for(let r=0;r<e.length;r++)if(e[r].id!=r)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let r=[];for(let n of this.types){let i=null;for(let s of e){let o=s(n);if(o){i||(i=Object.assign({},n.props));let a=o[1],l=o[0];l.combine&&l.id in i&&(a=l.combine(i[l.id],a)),i[l.id]=a}}r.push(i?new ns(n.name,i,n.id,n.flags):n)}return new r7(r)}}const Q1=new WeakMap,p_=new WeakMap;var Lr;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Lr||(Lr={}));class dr{constructor(e,r,n,i,s){if(this.type=e,this.children=r,this.positions=n,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=_m.get(this);if(e&&!e.overlay)return e.tree.toString();let r="";for(let n of this.children){let i=n.toString();i&&(r&&(r+=","),r+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(r.length?"("+r+")":""):r}cursor(e=0){return new Ib(this.topNode,e)}cursorAt(e,r=0,n=0){let i=Q1.get(this)||this.topNode,s=new Ib(i);return s.moveTo(e,r),Q1.set(this,s._tree),s}get topNode(){return new Pn(this,0,0,null)}resolve(e,r=0){let n=Mm(Q1.get(this)||this.topNode,e,r,!1);return Q1.set(this,n),n}resolveInner(e,r=0){let n=Mm(p_.get(this)||this.topNode,e,r,!0);return p_.set(this,n),n}resolveStack(e,r=0){return CQ(this,e,r)}iterate(e){let{enter:r,leave:n,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&Lr.IncludeAnonymous)>0;for(let l=this.cursor(o|Lr.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||r(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&n&&(a||!l.type.isAnonymous)&&n(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let r in this.props)e.push([+r,this.props[r]]);return e}balance(e={}){return this.children.length<=8?this:s7(ns.none,this.children,this.positions,0,this.children.length,0,this.length,(r,n,i)=>new dr(this.type,r,n,i,this.propValues),e.makeTree||((r,n,i)=>new dr(ns.none,r,n,i)))}static build(e){return SQ(e)}}dr.empty=new dr(ns.none,[],[],0);class n7{constructor(e,r){this.buffer=e,this.index=r}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new n7(this.buffer,this.index)}}class ic{constructor(e,r,n){this.buffer=e,this.length=r,this.set=n}get type(){return ns.none}toString(){let e=[];for(let r=0;r<this.buffer.length;)e.push(this.childString(r)),r=this.buffer[r+3];return e.join(",")}childString(e){let r=this.buffer[e],n=this.buffer[e+3],i=this.set.types[r],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,n==e)return s;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,r,n,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=r&&!(UI(s,i,o[l+1],o[l+2])&&(a=l,n>0));l=o[l+3]);return a}slice(e,r,n){let i=this.buffer,s=new Uint16Array(r-e),o=0;for(let a=e,l=0;a<r;){s[l++]=i[a++],s[l++]=i[a++]-n;let c=s[l++]=i[a++]-n;s[l++]=i[a++]-e,o=Math.max(o,c)}return new ic(s,o,this.set)}}function UI(t,e,r,n){switch(t){case-2:return r<e;case-1:return n>=e&&r<e;case 0:return r<e&&n>e;case 1:return r<=e&&n>e;case 2:return n>e;case 4:return!0}}function Mm(t,e,r,n){for(var i;t.from==t.to||(r<1?t.from>=e:t.from>e)||(r>-1?t.to<=e:t.to<e);){let o=!n&&t instanceof Pn&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=n?0:Lr.IgnoreOverlays;if(n)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Pn&&o.index<0&&((i=a.enter(e,r,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,r,s);if(!o)return t;t=o}}class GI{cursor(e=0){return new Ib(this,e)}getChild(e,r=null,n=null){let i=m_(this,e,r,n);return i.length?i[0]:null}getChildren(e,r=null,n=null){return m_(this,e,r,n)}resolve(e,r=0){return Mm(this,e,r,!1)}resolveInner(e,r=0){return Mm(this,e,r,!0)}matchContext(e){return Dk(this.parent,e)}enterUnfinishedNodesBefore(e){let r=this.childBefore(e),n=this;for(;r;){let i=r.lastChild;if(!i||i.to!=r.to)break;i.type.isError&&i.from==i.to?(n=r,r=i.prevSibling):r=i}return n}get node(){return this}get next(){return this.parent}}class Pn extends GI{constructor(e,r,n,i){super(),this._tree=e,this.from=r,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,r,n,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=r>0?a.length:-1;e!=c;e+=r){let h=a[e],u=l[e]+o.from;if(UI(i,n,u,u+h.length)){if(h instanceof ic){if(s&Lr.ExcludeBuffers)continue;let f=h.findChild(0,h.buffer.length,r,n-u,i);if(f>-1)return new Fo(new wQ(o,h,e,u),null,f)}else if(s&Lr.IncludeAnonymous||!h.type.isAnonymous||i7(h)){let f;if(!(s&Lr.IgnoreMounts)&&(f=_m.get(h))&&!f.overlay)return new Pn(f.tree,u,e,o);let d=new Pn(h,u,e,o);return s&Lr.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(r<0?h.children.length-1:0,r,n,i)}}}if(s&Lr.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+r:e=r<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,r,n=0){let i;if(!(n&Lr.IgnoreOverlays)&&(i=_m.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((r>0?o<=s:o<s)&&(r<0?a>=s:a>s))return new Pn(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,r,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function m_(t,e,r,n){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(r!=null){for(let o=!1;!o;)if(o=i.type.is(r),!i.nextSibling())return s}for(;;){if(n!=null&&i.type.is(n))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return n==null?s:[]}}function Dk(t,e,r=e.length-1){for(let n=t;r>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[r]&&e[r]!=n.name)return!1;r--}}return!0}class wQ{constructor(e,r,n,i){this.parent=e,this.buffer=r,this.index=n,this.start=i}}class Fo extends GI{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,r,n){super(),this.context=e,this._parent=r,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,r,n){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,r-this.context.start,n);return s<0?null:new Fo(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,r,n=0){if(n&Lr.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],r>0?1:-1,e-this.context.start,r);return s<0?null:new Fo(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,r=e.buffer[this.index+3];return r<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Fo(this.context,this._parent,r):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,r=this._parent?this._parent.index+4:0;return this.index==r?this.externalSibling(-1):new Fo(this.context,this._parent,e.findChild(r,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],r=[],{buffer:n}=this.context,i=this.index+4,s=n.buffer[this.index+3];if(s>i){let o=n.buffer[this.index+1];e.push(n.slice(i,s,o)),r.push(0)}return new dr(this.type,e,r,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function KI(t){if(!t.length)return null;let e=0,r=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>r.from||o.to<r.to)&&(r=o,e=s)}let n=r instanceof Pn&&r.index<0?null:r.parent,i=t.slice();return n?i[e]=n:i.splice(e,1),new kQ(i,r)}class kQ{constructor(e,r){this.heads=e,this.node=r}get next(){return KI(this.heads)}}function CQ(t,e,r){let n=t.resolveInner(e,r),i=null;for(let s=n instanceof Pn?n:n.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[n])).push(o.resolve(e,r)),s=o}else{let o=_m.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Pn(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[n])).push(Mm(a,e,r,!1))}}return i?KI(i):n}class Ib{get name(){return this.type.name}constructor(e,r=0){if(this.mode=r,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Pn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,r){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=r||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return e?e instanceof Pn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,r,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,r,n,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,r-this.buffer.start,n);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,r,n=this.mode){return this.buffer?n&Lr.ExcludeBuffers?!1:this.enterChild(1,e,r):this.yield(this._tree.enter(e,r,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Lr.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Lr.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:r}=this.buffer,n=this.stack.length-1;if(e<0){let i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(r.findChild(i,this.index,-1,0,4))}else{let i=r.buffer[this.index+3];if(i<(n<0?r.buffer.length:r.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let r,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:r,parent:n}=i)}else({index:r,_parent:n}=this._tree);for(;n;{index:r,_parent:n}=n)if(r>-1)for(let s=r+e,o=e<0?-1:n._tree.children.length;s!=o;s+=e){let a=n._tree.children[s];if(this.mode&Lr.IncludeAnonymous||a instanceof ic||!a.type.isAnonymous||i7(a))return!1}return!0}move(e,r){if(r&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,r=0){for(;(this.from==this.to||(r<1?this.from>=e:this.from>e)||(r>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,r););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,r=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;r=o,n=s+1;break e}i=this.stack[--s]}for(let i=n;i<this.stack.length;i++)r=new Fo(this.buffer,r,this.stack[i]);return this.bufferNode=new Fo(this.buffer,r,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,r){for(let n=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&r&&r(this),i=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return Dk(this.node.parent,e);let{buffer:r}=this.buffer,{types:n}=r.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Dk(this._tree,e,i);let o=n[r.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function i7(t){return t.children.some(e=>e instanceof ic||!e.type.isAnonymous||i7(e))}function SQ(t){var e;let{buffer:r,nodeSet:n,maxBufferLength:i=bQ,reused:s=[],minRepeatType:o=n.types.length}=t,a=Array.isArray(r)?new n7(r,r.length):r,l=n.types,c=0,h=0;function u(S,w,_,I,N,L){let{id:D,start:P,end:K,size:z}=a,$=h,H=c;if(z<0)if(a.next(),z==-1){let de=s[D];_.push(de),I.push(P-S);return}else if(z==-3){c=D;return}else if(z==-4){h=D;return}else throw new RangeError(`Unrecognized record size: ${z}`);let U=l[D],q,re,E=P-S;if(K-P<=i&&(re=g(a.pos-w,N))){let de=new Uint16Array(re.size-re.skip),Te=a.pos-re.size,O=de.length;for(;a.pos>Te;)O=y(re.start,de,O);q=new ic(de,K-re.start,n),E=re.start-S}else{let de=a.pos-z;a.next();let Te=[],O=[],et=D>=o?D:-1,He=0,Le=K;for(;a.pos>de;)et>=0&&a.id==et&&a.size>=0?(a.end<=Le-i&&(p(Te,O,P,He,a.end,Le,et,$,H),He=Te.length,Le=a.end),a.next()):L>2500?f(P,de,Te,O):u(P,de,Te,O,et,L+1);if(et>=0&&He>0&&He<Te.length&&p(Te,O,P,He,P,Le,et,$,H),Te.reverse(),O.reverse(),et>-1&&He>0){let Xe=d(U,H);q=s7(U,Te,O,0,Te.length,0,K-P,Xe,Xe)}else q=m(U,Te,O,K-P,$-K,H)}_.push(q),I.push(E)}function f(S,w,_,I){let N=[],L=0,D=-1;for(;a.pos>w;){let{id:P,start:K,end:z,size:$}=a;if($>4)a.next();else{if(D>-1&&K<D)break;D<0&&(D=z-i),N.push(P,K,z),L++,a.next()}}if(L){let P=new Uint16Array(L*4),K=N[N.length-2];for(let z=N.length-3,$=0;z>=0;z-=3)P[$++]=N[z],P[$++]=N[z+1]-K,P[$++]=N[z+2]-K,P[$++]=$;_.push(new ic(P,N[2]-K,n)),I.push(K-S)}}function d(S,w){return(_,I,N)=>{let L=0,D=_.length-1,P,K;if(D>=0&&(P=_[D])instanceof dr){if(!D&&P.type==S&&P.length==N)return P;(K=P.prop(Ot.lookAhead))&&(L=I[D]+P.length+K)}return m(S,_,I,N,L,w)}}function p(S,w,_,I,N,L,D,P,K){let z=[],$=[];for(;S.length>I;)z.push(S.pop()),$.push(w.pop()+_-N);S.push(m(n.types[D],z,$,L-N,P-L,K)),w.push(N-_)}function m(S,w,_,I,N,L,D){if(L){let P=[Ot.contextHash,L];D=D?[P].concat(D):[P]}if(N>25){let P=[Ot.lookAhead,N];D=D?[P].concat(D):[P]}return new dr(S,w,_,I,D)}function g(S,w){let _=a.fork(),I=0,N=0,L=0,D=_.end-i,P={size:0,start:0,skip:0};e:for(let K=_.pos-S;_.pos>K;){let z=_.size;if(_.id==w&&z>=0){P.size=I,P.start=N,P.skip=L,L+=4,I+=4,_.next();continue}let $=_.pos-z;if(z<0||$<K||_.start<D)break;let H=_.id>=o?4:0,U=_.start;for(_.next();_.pos>$;){if(_.size<0)if(_.size==-3)H+=4;else break e;else _.id>=o&&(H+=4);_.next()}N=U,I+=z,L+=H}return(w<0||I==S)&&(P.size=I,P.start=N,P.skip=L),P.size>4?P:void 0}function y(S,w,_){let{id:I,start:N,end:L,size:D}=a;if(a.next(),D>=0&&I<o){let P=_;if(D>4){let K=a.pos-(D-4);for(;a.pos>K;)_=y(S,w,_)}w[--_]=P,w[--_]=L-S,w[--_]=N-S,w[--_]=I}else D==-3?c=I:D==-4&&(h=I);return _}let b=[],x=[];for(;a.pos>0;)u(t.start||0,t.bufferStart||0,b,x,-1,0);let T=(e=t.length)!==null&&e!==void 0?e:b.length?x[0]+b[0].length:0;return new dr(l[t.topID],b.reverse(),x.reverse(),T)}const g_=new WeakMap;function h2(t,e){if(!t.isAnonymous||e instanceof ic||e.type!=t)return 1;let r=g_.get(e);if(r==null){r=1;for(let n of e.children){if(n.type!=t||!(n instanceof dr)){r=1;break}r+=h2(t,n)}g_.set(e,r)}return r}function s7(t,e,r,n,i,s,o,a,l){let c=0;for(let p=n;p<i;p++)c+=h2(t,e[p]);let h=Math.ceil(c*1.5/8),u=[],f=[];function d(p,m,g,y,b){for(let x=g;x<y;){let T=x,S=m[x],w=h2(t,p[x]);for(x++;x<y;x++){let _=h2(t,p[x]);if(w+_>=h)break;w+=_}if(x==T+1){if(w>h){let _=p[T];d(_.children,_.positions,0,_.children.length,m[T]+b);continue}u.push(p[T])}else{let _=m[x-1]+p[x-1].length-S;u.push(s7(t,p,m,T,x,S,_,null,l))}f.push(S+b-s)}}return d(e,r,n,i,0),(a||l)(u,f,o)}class LEe{constructor(){this.map=new WeakMap}setBuffer(e,r,n){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(r,n)}getBuffer(e,r){let n=this.map.get(e);return n&&n.get(r)}set(e,r){e instanceof Fo?this.setBuffer(e.context.buffer,e.index,r):e instanceof Pn&&this.map.set(e.tree,r)}get(e){return e instanceof Fo?this.getBuffer(e.context.buffer,e.index):e instanceof Pn?this.map.get(e.tree):void 0}cursorSet(e,r){e.buffer?this.setBuffer(e.buffer.buffer,e.index,r):this.map.set(e.tree,r)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Wa{constructor(e,r,n,i,s=!1,o=!1){this.from=e,this.to=r,this.tree=n,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,r=[],n=!1){let i=[new Wa(0,e.length,e,0,!1,n)];for(let s of r)s.to>e.length&&i.push(s);return i}static applyChanges(e,r,n=128){if(!r.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let h=a<r.length?r[a]:null,u=h?h.fromA:1e9;if(u-l>=n)for(;o&&o.from<u;){let f=o;if(l>=f.from||u<=f.to||c){let d=Math.max(f.from,l)-c,p=Math.min(f.to,u)-c;f=d>=p?null:new Wa(d,p,f.tree,f.offset+c,a>0,!!h)}if(f&&i.push(f),o.to>u)break;o=s<e.length?e[s++]:null}if(!h)break;l=h.toA,c=h.toA-h.toB}return i}}let YI=class{startParse(e,r,n){return typeof e=="string"&&(e=new TQ(e)),n=n?n.length?n.map(i=>new ys(i.from,i.to)):[new ys(0,0)]:[new ys(0,e.length)],this.createParse(e,r||[],n)}parse(e,r,n){let i=this.startParse(e,r,n);for(;;){let s=i.advance();if(s)return s}}};class TQ{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,r){return this.string.slice(e,r)}}function DEe(t){return(e,r,n,i)=>new MQ(e,t,r,n,i)}class y_{constructor(e,r,n,i,s){this.parser=e,this.parse=r,this.overlay=n,this.target=i,this.from=s}}function b_(t){if(!t.length||t.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(t))}class _Q{constructor(e,r,n,i,s,o,a){this.parser=e,this.predicate=r,this.mounts=n,this.index=i,this.start=s,this.target=o,this.prev=a,this.depth=0,this.ranges=[]}}const Ik=new Ot({perNode:!0});class MQ{constructor(e,r,n,i,s){this.nest=r,this.input=n,this.fragments=i,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let n=this.baseParse.advance();if(!n)return null;if(this.baseParse=null,this.baseTree=n,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let n=this.baseTree;return this.stoppedAt!=null&&(n=new dr(n.type,n.children,n.positions,n.length,n.propValues.concat([[Ik,this.stoppedAt]]))),n}let e=this.inner[this.innerDone],r=e.parse.advance();if(r){this.innerDone++;let n=Object.assign(Object.create(null),e.target.props);n[Ot.mounted.id]=new _m(r,e.overlay,e.parser),e.target.props=n}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let r=this.innerDone;r<this.inner.length;r++)this.inner[r].from<e&&(e=Math.min(e,this.inner[r].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let r=this.innerDone;r<this.inner.length;r++)this.inner[r].parse.stopAt(e)}startInner(){let e=new LQ(this.fragments),r=null,n=null,i=new Ib(new Pn(this.baseTree,this.ranges[0].from,0,null),Lr.IncludeAnonymous|Lr.IgnoreMounts);e:for(let s,o;;){let a=!0,l;if(this.stoppedAt!=null&&i.from>=this.stoppedAt)a=!1;else if(e.hasNode(i)){if(r){let c=r.mounts.find(h=>h.frag.from<=i.from&&h.frag.to>=i.to&&h.mount.overlay);if(c)for(let h of c.mount.overlay){let u=h.from+c.pos,f=h.to+c.pos;u>=i.from&&f<=i.to&&!r.ranges.some(d=>d.from<f&&d.to>u)&&r.ranges.push({from:u,to:f})}}a=!1}else if(n&&(o=AQ(n.ranges,i.from,i.to)))a=o!=2;else if(!i.type.isAnonymous&&(s=this.nest(i,this.input))&&(i.from<i.to||!s.overlay)){i.tree||(EQ(i),r&&r.depth++,n&&n.depth++);let c=e.findMounts(i.from,s.parser);if(typeof s.overlay=="function")r=new _Q(s.parser,s.overlay,c,this.inner.length,i.from,i.tree,r);else{let h=w_(this.ranges,s.overlay||(i.from<i.to?[new ys(i.from,i.to)]:[]));h.length&&b_(h),(h.length||!s.overlay)&&this.inner.push(new y_(s.parser,h.length?s.parser.startParse(this.input,k_(c,h),h):s.parser.startParse(""),s.overlay?s.overlay.map(u=>new ys(u.from-i.from,u.to-i.from)):null,i.tree,h.length?h[0].from:i.from)),s.overlay?h.length&&(n={ranges:h,depth:0,prev:n}):a=!1}}else if(r&&(l=r.predicate(i))&&(l===!0&&(l=new ys(i.from,i.to)),l.from<l.to)){let c=r.ranges.length-1;c>=0&&r.ranges[c].to==l.from?r.ranges[c]={from:r.ranges[c].from,to:l.to}:r.ranges.push(l)}if(a&&i.firstChild())r&&r.depth++,n&&n.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(r&&!--r.depth){let c=w_(this.ranges,r.ranges);c.length&&(b_(c),this.inner.splice(r.index,0,new y_(r.parser,r.parser.startParse(this.input,k_(r.mounts,c),c),r.ranges.map(h=>new ys(h.from-r.start,h.to-r.start)),r.target,c[0].from))),r=r.prev}n&&!--n.depth&&(n=n.prev)}}}}function AQ(t,e,r){for(let n of t){if(n.from>=r)break;if(n.to>e)return n.from<=e&&n.to>=r?2:1}return 0}function x_(t,e,r,n,i,s){if(e<r){let o=t.buffer[e+1];n.push(t.slice(e,r,o)),i.push(o-s)}}function EQ(t){let{node:e}=t,r=[],n=e.context.buffer;do r.push(t.index),t.parent();while(!t.tree);let i=t.tree,s=i.children.indexOf(n),o=i.children[s],a=o.buffer,l=[s];function c(h,u,f,d,p,m){let g=r[m],y=[],b=[];x_(o,h,g,y,b,d);let x=a[g+1],T=a[g+2];l.push(y.length);let S=m?c(g+4,a[g+3],o.set.types[a[g]],x,T-x,m-1):e.toTree();return y.push(S),b.push(x-d),x_(o,a[g+3],u,y,b,d),new dr(f,y,b,p)}i.children[s]=c(0,a.length,ns.none,0,o.length,r.length-1);for(let h of l){let u=t.tree.children[h],f=t.tree.positions[h];t.yield(new Pn(u,f+t.from,h,t._tree))}}class v_{constructor(e,r){this.offset=r,this.done=!1,this.cursor=e.cursor(Lr.IncludeAnonymous|Lr.IgnoreMounts)}moveTo(e){let{cursor:r}=this,n=e-this.offset;for(;!this.done&&r.from<n;)r.to>=e&&r.enter(n,1,Lr.IgnoreOverlays|Lr.ExcludeBuffers)||r.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let r=this.cursor.tree;;){if(r==e.tree)return!0;if(r.children.length&&r.positions[0]==0&&r.children[0]instanceof dr)r=r.children[0];else break}return!1}}class LQ{constructor(e){var r;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let n=this.curFrag=e[0];this.curTo=(r=n.tree.prop(Ik))!==null&&r!==void 0?r:n.to,this.inner=new v_(n.tree,-n.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let r=this.curFrag=this.fragments[this.fragI];this.curTo=(e=r.tree.prop(Ik))!==null&&e!==void 0?e:r.to,this.inner=new v_(r.tree,-r.offset)}}findMounts(e,r){var n;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(n=s.tree)===null||n===void 0?void 0:n.prop(Ot.mounted);if(o&&o.parser==r)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=s.to)break;l.tree==this.curFrag.tree&&i.push({frag:l,pos:s.from-l.offset,mount:o})}}}return i}}function w_(t,e){let r=null,n=e;for(let i=1,s=0;i<t.length;i++){let o=t[i-1].to,a=t[i].from;for(;s<n.length;s++){let l=n[s];if(l.from>=a)break;l.to<=o||(r||(n=r=e.slice()),l.from<o?(r[s]=new ys(l.from,o),l.to>a&&r.splice(s+1,0,new ys(a,l.to))):l.to>a?r[s--]=new ys(a,l.to):r.splice(s--,1))}}return n}function OQ(t,e,r,n){let i=0,s=0,o=!1,a=!1,l=-1e9,c=[];for(;;){let h=i==t.length?1e9:o?t[i].to:t[i].from,u=s==e.length?1e9:a?e[s].to:e[s].from;if(o!=a){let f=Math.max(l,r),d=Math.min(h,u,n);f<d&&c.push(new ys(f,d))}if(l=Math.min(h,u),l==1e9)break;h==l&&(o?(o=!1,i++):o=!0),u==l&&(a?(a=!1,s++):a=!0)}return c}function k_(t,e){let r=[];for(let{pos:n,mount:i,frag:s}of t){let o=n+(i.overlay?i.overlay[0].from:0),a=o+i.tree.length,l=Math.max(s.from,o),c=Math.min(s.to,a);if(i.overlay){let h=i.overlay.map(f=>new ys(f.from+n,f.to+n)),u=OQ(e,h,l,c);for(let f=0,d=l;;f++){let p=f==u.length,m=p?c:u[f].from;if(m>d&&r.push(new Wa(d,m,i.tree,-o,s.from>=d||s.openStart,s.to<=m||s.openEnd)),p)break;d=u[f].to}}else r.push(new Wa(l,c,i.tree,-o,s.from>=o||s.openStart,s.to<=a||s.openEnd))}return r}let Bk=[],XI=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,r=0;e<t.length;e++)(e%2?XI:Bk).push(r=r+t[e])})();function DQ(t){if(t<768)return!1;for(let e=0,r=Bk.length;;){let n=e+r>>1;if(t<Bk[n])r=n;else if(t>=XI[n])e=n+1;else return!0;if(e==r)return!1}}function C_(t){return t>=127462&&t<=127487}const S_=8205;function IQ(t,e,r=!0,n=!0){return(r?JI:BQ)(t,e,n)}function JI(t,e,r){if(e==t.length)return e;e&&ZI(t.charCodeAt(e))&&QI(t.charCodeAt(e-1))&&e--;let n=yw(t,e);for(e+=T_(n);e<t.length;){let i=yw(t,e);if(n==S_||i==S_||r&&DQ(i))e+=T_(i),n=i;else if(C_(i)){let s=0,o=e-2;for(;o>=0&&C_(yw(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function BQ(t,e,r){for(;e>0;){let n=JI(t,e-2,r);if(n<e)return n;e--}return 0}function yw(t,e){let r=t.charCodeAt(e);if(!QI(r)||e+1==t.length)return r;let n=t.charCodeAt(e+1);return ZI(n)?(r-55296<<10)+(n-56320)+65536:r}function ZI(t){return t>=56320&&t<57344}function QI(t){return t>=55296&&t<56320}function T_(t){return t<65536?1:2}let qt=class eB{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,r,n){[e,r]=ld(this,e,r);let i=[];return this.decompose(0,e,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(r,this.length,i,1),u2.from(i,this.length-(r-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,r=this.length){[e,r]=ld(this,e,r);let n=[];return this.decompose(e,r,n,0),u2.from(n,r-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let r=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new Fp(this),s=new Fp(e);for(let o=r,a=r;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=n)return!0}}iter(e=1){return new Fp(this,e)}iterRange(e,r=this.length){return new tB(this,e,r)}iterLines(e,r){let n;if(e==null)n=this.iter();else{r==null&&(r=this.lines+1);let i=this.line(e).from;n=this.iterRange(i,Math.max(i,r==this.lines+1?this.length:r<=1?0:this.line(r-1).to))}return new rB(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?eB.empty:e.length<=32?new Pr(e):u2.from(Pr.split(e,[]))}};class Pr extends qt{constructor(e,r=RQ(e)){super(),this.text=e,this.length=r}get lines(){return this.text.length}get children(){return null}lineInner(e,r,n,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((r?n:a)>=e)return new PQ(i,a,n,o);i=a+1,n++}}decompose(e,r,n,i){let s=e<=0&&r>=this.length?this:new Pr(__(this.text,e,r),Math.min(r,this.length)-Math.max(0,e));if(i&1){let o=n.pop(),a=f2(s.text,o.text.slice(),0,s.length);if(a.length<=32)n.push(new Pr(a,o.length+s.length));else{let l=a.length>>1;n.push(new Pr(a.slice(0,l)),new Pr(a.slice(l)))}}else n.push(s)}replace(e,r,n){if(!(n instanceof Pr))return super.replace(e,r,n);[e,r]=ld(this,e,r);let i=f2(this.text,f2(n.text,__(this.text,0,e)),r),s=this.length+n.length-(r-e);return i.length<=32?new Pr(i,s):u2.from(Pr.split(i,[]),s)}sliceString(e,r=this.length,n=`
`){[e,r]=ld(this,e,r);let i="";for(let s=0,o=0;s<=r&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=n),e<l&&r>s&&(i+=a.slice(Math.max(0,e-s),r-s)),s=l+1}return i}flatten(e){for(let r of this.text)e.push(r)}scanIdentical(){return 0}static split(e,r){let n=[],i=-1;for(let s of e)n.push(s),i+=s.length+1,n.length==32&&(r.push(new Pr(n,i)),n=[],i=-1);return i>-1&&r.push(new Pr(n,i)),r}}let u2=class zu extends qt{constructor(e,r){super(),this.children=e,this.length=r,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,r,n,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=n+o.lines-1;if((r?l:a)>=e)return o.lineInner(e,r,n,i);i=a+1,n=l+1}}decompose(e,r,n,i){for(let s=0,o=0;o<=r&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&r>=o){let c=i&((o<=e?1:0)|(l>=r?2:0));o>=e&&l<=r&&!c?n.push(a):a.decompose(e-o,r-o,n,c)}o=l+1}}replace(e,r,n){if([e,r]=ld(this,e,r),n.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&r<=a){let l=o.replace(e-s,r-s,n),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let h=this.children.slice();return h[i]=l,new zu(h,this.length-(r-e)+n.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,r,n)}sliceString(e,r=this.length,n=`
`){[e,r]=ld(this,e,r);let i="";for(let s=0,o=0;s<this.children.length&&o<=r;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=n),e<l&&r>o&&(i+=a.sliceString(e-o,r-o,n)),o=l+1}return i}flatten(e){for(let r of this.children)r.flatten(e)}scanIdentical(e,r){if(!(e instanceof zu))return 0;let n=0,[i,s,o,a]=r>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=r,s+=r){if(i==o||s==a)return n;let l=this.children[i],c=e.children[s];if(l!=c)return n+l.scanIdentical(c,r);n+=l.length+1}}static from(e,r=e.reduce((n,i)=>n+i.length+1,-1)){let n=0;for(let d of e)n+=d.lines;if(n<32){let d=[];for(let p of e)p.flatten(d);return new Pr(d,r)}let i=Math.max(32,n>>5),s=i<<1,o=i>>1,a=[],l=0,c=-1,h=[];function u(d){let p;if(d.lines>s&&d instanceof zu)for(let m of d.children)u(m);else d.lines>o&&(l>o||!l)?(f(),a.push(d)):d instanceof Pr&&l&&(p=h[h.length-1])instanceof Pr&&d.lines+p.lines<=32?(l+=d.lines,c+=d.length+1,h[h.length-1]=new Pr(p.text.concat(d.text),p.length+1+d.length)):(l+d.lines>i&&f(),l+=d.lines,c+=d.length+1,h.push(d))}function f(){l!=0&&(a.push(h.length==1?h[0]:zu.from(h,c)),c=-1,l=h.length=0)}for(let d of e)u(d);return f(),a.length==1?a[0]:new zu(a,r)}};qt.empty=new Pr([""],0);function RQ(t){let e=-1;for(let r of t)e+=r.length+1;return e}function f2(t,e,r=0,n=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=n;s++){let a=t[s],l=i+a.length;l>=r&&(l>n&&(a=a.slice(0,n-i)),i<r&&(a=a.slice(r-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function __(t,e,r){return f2(t,[""],e,r)}class Fp{constructor(e,r=1){this.dir=r,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[r>0?1:(e instanceof Pr?e.text.length:e.children.length)<<1]}nextInner(e,r){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],s=this.offsets[n],o=s>>1,a=i instanceof Pr?i.text.length:i.children.length;if(o==(r>0?a:0)){if(n==0)return this.done=!0,this.value="",this;r>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(r>0?0:1)){if(this.offsets[n]+=r,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Pr){let l=i.text[o+(r<0?-1:0)];if(this.offsets[n]+=r,l.length>Math.max(0,e))return this.value=e==0?l:r>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(r<0?-1:0)];e>l.length?(e-=l.length,this.offsets[n]+=r):(r<0&&this.offsets[n]--,this.nodes.push(l),this.offsets.push(r>0?1:(l instanceof Pr?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class tB{constructor(e,r,n){this.value="",this.done=!1,this.cursor=new Fp(e,r>n?-1:1),this.pos=r>n?e.length:0,this.from=Math.min(r,n),this.to=Math.max(r,n)}nextInner(e,r){if(r<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,r<0?this.pos-this.to:this.from-this.pos);let n=r<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*r,this.value=i.length<=n?i:r<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class rB{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:r,lineBreak:n,value:i}=this.inner.next(e);return r&&this.afterBreak?(this.value="",this.afterBreak=!1):r?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(qt.prototype[Symbol.iterator]=function(){return this.iter()},Fp.prototype[Symbol.iterator]=tB.prototype[Symbol.iterator]=rB.prototype[Symbol.iterator]=function(){return this});class PQ{constructor(e,r,n,i){this.from=e,this.to=r,this.number=n,this.text=i}get length(){return this.to-this.from}}function ld(t,e,r){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,r))]}function wn(t,e,r=!0,n=!0){return IQ(t,e,r,n)}function NQ(t){return t>=56320&&t<57344}function FQ(t){return t>=55296&&t<56320}function Ci(t,e){let r=t.charCodeAt(e);if(!FQ(r)||e+1==t.length)return r;let n=t.charCodeAt(e+1);return NQ(n)?(r-55296<<10)+(n-56320)+65536:r}function o7(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Ro(t){return t<65536?1:2}const Rk=/\r\n?|\n/;var vn=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(vn||(vn={}));class Wo{constructor(e){this.sections=e}get length(){let e=0;for(let r=0;r<this.sections.length;r+=2)e+=this.sections[r];return e}get newLength(){let e=0;for(let r=0;r<this.sections.length;r+=2){let n=this.sections[r+1];e+=n<0?this.sections[r]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let r=0,n=0,i=0;r<this.sections.length;){let s=this.sections[r++],o=this.sections[r++];o<0?(e(n,i,s),i+=s):i+=o,n+=s}}iterChangedRanges(e,r=!1){Pk(this,e,r)}get invertedDesc(){let e=[];for(let r=0;r<this.sections.length;){let n=this.sections[r++],i=this.sections[r++];i<0?e.push(n,i):e.push(i,n)}return new Wo(e)}composeDesc(e){return this.empty?e:e.empty?this:nB(this,e)}mapDesc(e,r=!1){return e.empty?this:Nk(this,e,r)}mapPos(e,r=-1,n=vn.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=i+a;if(l<0){if(c>e)return s+(e-i);s+=a}else{if(n!=vn.Simple&&c>=e&&(n==vn.TrackDel&&i<e&&c>e||n==vn.TrackBefore&&i<e||n==vn.TrackAfter&&c>e))return null;if(c>e||c==e&&r<0&&!a)return e==i||r<0?s:s+l;s+=l}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,r=e){for(let n=0,i=0;n<this.sections.length&&i<=r;){let s=this.sections[n++],o=this.sections[n++],a=i+s;if(o>=0&&i<=r&&a>=e)return i<e&&a>r?"cover":!0;i=a}return!1}toString(){let e="";for(let r=0;r<this.sections.length;){let n=this.sections[r++],i=this.sections[r++];e+=(e?" ":"")+n+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(r=>typeof r!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Wo(e)}static create(e){return new Wo(e)}}class Jr extends Wo{constructor(e,r){super(e),this.inserted=r}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Pk(this,(r,n,i,s,o)=>e=e.replace(i,i+(n-r),o),!1),e}mapDesc(e,r=!1){return Nk(this,e,r,!0)}invert(e){let r=this.sections.slice(),n=[];for(let i=0,s=0;i<r.length;i+=2){let o=r[i],a=r[i+1];if(a>=0){r[i]=a,r[i+1]=o;let l=i>>1;for(;n.length<l;)n.push(qt.empty);n.push(o?e.slice(s,s+o):qt.empty)}s+=o}return new Jr(r,n)}compose(e){return this.empty?e:e.empty?this:nB(this,e,!0)}map(e,r=!1){return e.empty?this:Nk(this,e,r,!0)}iterChanges(e,r=!1){Pk(this,e,r)}get desc(){return Wo.create(this.sections)}filter(e){let r=[],n=[],i=[],s=new Am(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let h=Math.min(s.len,l-a);On(i,h,-1);let u=s.ins==-1?-1:s.off==0?s.ins:0;On(r,h,u),u>0&&jl(n,r,s.text),s.forward(h),a+=h}let c=e[o++];for(;a<c;){if(s.done)break e;let h=Math.min(s.len,c-a);On(r,h,-1),On(i,h,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(h),a+=h}}return{changes:new Jr(r,n),filtered:Wo.create(i)}}toJSON(){let e=[];for(let r=0;r<this.sections.length;r+=2){let n=this.sections[r],i=this.sections[r+1];i<0?e.push(n):i==0?e.push([n]):e.push([n].concat(this.inserted[r>>1].toJSON()))}return e}static of(e,r,n){let i=[],s=[],o=0,a=null;function l(h=!1){if(!h&&!i.length)return;o<r&&On(i,r-o,-1);let u=new Jr(i,s);a=a?a.compose(u.map(a)):u,i=[],s=[],o=0}function c(h){if(Array.isArray(h))for(let u of h)c(u);else if(h instanceof Jr){if(h.length!=r)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${r})`);l(),a=a?a.compose(h.map(a)):h}else{let{from:u,to:f=u,insert:d}=h;if(u>f||u<0||f>r)throw new RangeError(`Invalid change range ${u} to ${f} (in doc of length ${r})`);let p=d?typeof d=="string"?qt.of(d.split(n||Rk)):d:qt.empty,m=p.length;if(u==f&&m==0)return;u<o&&l(),u>o&&On(i,u-o,-1),On(i,f-u,m),jl(s,i,p),o=f}}return c(e),l(!a),a}static empty(e){return new Jr(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let r=[],n=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")r.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)r.push(s[0],0);else{for(;n.length<i;)n.push(qt.empty);n[i]=qt.of(s.slice(1)),r.push(s[0],n[i].length)}}}return new Jr(r,n)}static createSet(e,r){return new Jr(e,r)}}function On(t,e,r,n=!1){if(e==0&&r<=0)return;let i=t.length-2;i>=0&&r<=0&&r==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=r:n?(t[i]+=e,t[i+1]+=r):t.push(e,r)}function jl(t,e,r){if(r.length==0)return;let n=e.length-2>>1;if(n<t.length)t[t.length-1]=t[t.length-1].append(r);else{for(;t.length<n;)t.push(qt.empty);t.push(r)}}function Pk(t,e,r){let n=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)i+=a,s+=a;else{let c=i,h=s,u=qt.empty;for(;c+=a,h+=l,l&&n&&(u=u.append(n[o-2>>1])),!(r||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(i,c,s,h,u),i=c,s=h}}}function Nk(t,e,r,n=!1){let i=[],s=n?[]:null,o=new Am(t),a=new Am(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);On(i,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!r))){let c=a.len;for(On(i,a.ins,-1);c;){let h=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=h&&(On(i,0,o.ins),s&&jl(s,i,o.text),l=o.i),o.forward(h),c-=h}a.next()}else if(o.ins>=0){let c=0,h=o.len;for(;h;)if(a.ins==-1){let u=Math.min(h,a.len);c+=u,h-=u,a.forward(u)}else if(a.ins==0&&a.len<h)h-=a.len,a.next();else break;On(i,c,l<o.i?o.ins:0),s&&l<o.i&&jl(s,i,o.text),l=o.i,o.forward(o.len-h)}else{if(o.done&&a.done)return s?Jr.createSet(i,s):Wo.create(i);throw new Error("Mismatched change set lengths")}}}function nB(t,e,r=!1){let n=[],i=r?[]:null,s=new Am(t),o=new Am(e);for(let a=!1;;){if(s.done&&o.done)return i?Jr.createSet(n,i):Wo.create(n);if(s.ins==0)On(n,s.len,0,a),s.next();else if(o.len==0&&!o.done)On(n,0,o.ins,a),i&&jl(i,n,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=n.length;if(s.ins==-1){let h=o.ins==-1?-1:o.off?0:o.ins;On(n,l,h,a),i&&h&&jl(i,n,o.text)}else o.ins==-1?(On(n,s.off?0:s.len,l,a),i&&jl(i,n,s.textBit(l))):(On(n,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&jl(i,n,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||n.length>c),s.forward2(l),o.forward(l)}}}}class Am{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,r=this.i-2>>1;return r>=e.length?qt.empty:e[r]}textBit(e){let{inserted:r}=this.set,n=this.i-2>>1;return n>=r.length&&!e?qt.empty:r[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}let ey=class Fk{constructor(e,r,n){this.from=e,this.to=r,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,r=-1){let n,i;return this.empty?n=i=e.mapPos(this.from,r):(n=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new Fk(n,i,this.flags)}extend(e,r=e){if(e<=this.anchor&&r>=this.anchor)return oe.range(e,r);let n=Math.abs(e-this.anchor)>Math.abs(r-this.anchor)?e:r;return oe.range(this.anchor,n)}eq(e,r=!1){return this.anchor==e.anchor&&this.head==e.head&&(!r||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return oe.range(e.anchor,e.head)}static create(e,r,n){return new Fk(e,r,n)}};class oe{constructor(e,r){this.ranges=e,this.mainIndex=r}map(e,r=-1){return e.empty?this:oe.create(this.ranges.map(n=>n.map(e,r)),this.mainIndex)}eq(e,r=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],r))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new oe([this.main],0)}addRange(e,r=!0){return oe.create([e].concat(this.ranges),r?0:this.mainIndex+1)}replaceRange(e,r=this.mainIndex){let n=this.ranges.slice();return n[r]=e,oe.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new oe(e.ranges.map(r=>ey.fromJSON(r)),e.main)}static single(e,r=e){return new oe([oe.range(e,r)],0)}static create(e,r=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=n:s.from<n)return oe.normalized(e.slice(),r);n=s.to}return new oe(e,r)}static cursor(e,r=0,n,i){return ey.create(e,e,(r==0?0:r<0?8:16)|(n==null?7:Math.min(6,n))|(i??16777215)<<6)}static range(e,r,n,i){let s=(n??16777215)<<6|(i==null?7:Math.min(6,i));return r<e?ey.create(r,e,48|s):ey.create(e,r,(r>e?8:0)|s)}static normalized(e,r=0){let n=e[r];e.sort((i,s)=>i.from-s.from),r=e.indexOf(n);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=r&&r--,e.splice(--i,2,s.anchor>s.head?oe.range(l,a):oe.range(a,l))}}return new oe(e,r)}}function iB(t,e){for(let r of t.ranges)if(r.to>e)throw new RangeError("Selection points outside of document")}let a7=0;class Ne{constructor(e,r,n,i,s){this.combine=e,this.compareInput=r,this.compare=n,this.isStatic=i,this.id=a7++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ne(e.combine||(r=>r),e.compareInput||((r,n)=>r===n),e.compare||(e.combine?(r,n)=>r===n:l7),!!e.static,e.enables)}of(e){return new d2([],this,0,e)}compute(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new d2(e,this,1,r)}computeN(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new d2(e,this,2,r)}from(e,r){return r||(r=n=>n),this.compute([e],n=>r(n.field(e)))}}function l7(t,e){return t==e||t.length==e.length&&t.every((r,n)=>r===e[n])}class d2{constructor(e,r,n,i){this.dependencies=e,this.facet=r,this.type=n,this.value=i,this.id=a7++}dynamicSlot(e){var r;let n=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,h=[];for(let u of this.dependencies)u=="doc"?l=!0:u=="selection"?c=!0:((r=e[u.id])!==null&&r!==void 0?r:1)&1||h.push(e[u.id]);return{create(u){return u.values[o]=n(u),1},update(u,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||$k(u,h)){let d=n(u);if(a?!M_(d,u.values[o],i):!i(d,u.values[o]))return u.values[o]=d,1}return 0},reconfigure:(u,f)=>{let d,p=f.config.address[s];if(p!=null){let m=Bb(f,p);if(this.dependencies.every(g=>g instanceof Ne?f.facet(g)===u.facet(g):g instanceof hn?f.field(g,!1)==u.field(g,!1):!0)||(a?M_(d=n(u),m,i):i(d=n(u),m)))return u.values[o]=m,0}else d=n(u);return u.values[o]=d,1}}}}function M_(t,e,r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1;return!0}function $k(t,e){let r=!1;for(let n of e)$p(t,n)&1&&(r=!0);return r}function $Q(t,e,r){let n=r.map(l=>t[l.id]),i=r.map(l=>l.type),s=n.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let h=0;h<n.length;h++){let u=Bb(l,n[h]);if(i[h]==2)for(let f of u)c.push(f);else c.push(u)}return e.combine(c)}return{create(l){for(let c of n)$p(l,c);return l.values[o]=a(l),1},update(l,c){if(!$k(l,s))return 0;let h=a(l);return e.compare(h,l.values[o])?0:(l.values[o]=h,1)},reconfigure(l,c){let h=$k(l,n),u=c.config.facets[e.id],f=c.facet(e);if(u&&!h&&l7(r,u))return l.values[o]=f,0;let d=a(l);return e.compare(d,f)?(l.values[o]=f,0):(l.values[o]=d,1)}}}const ty=Ne.define({static:!0});class hn{constructor(e,r,n,i,s){this.id=e,this.createF=r,this.updateF=n,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let r=new hn(a7++,e.create,e.update,e.compare||((n,i)=>n===i),e);return e.provide&&(r.provides=e.provide(r)),r}create(e){let r=e.facet(ty).find(n=>n.field==this);return((r==null?void 0:r.create)||this.createF)(e)}slot(e){let r=e[this.id]>>1;return{create:n=>(n.values[r]=this.create(n),1),update:(n,i)=>{let s=n.values[r],o=this.updateF(s,i);return this.compareF(s,o)?0:(n.values[r]=o,1)},reconfigure:(n,i)=>{let s=n.facet(ty),o=i.facet(ty),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(n.values[r]=a.create(n),1):i.config.address[this.id]!=null?(n.values[r]=i.field(this),0):(n.values[r]=this.create(n),1)}}}init(e){return[this,ty.of({field:this,create:e})]}get extension(){return this}}const sh={lowest:4,low:3,default:2,high:1,highest:0};function w0(t){return e=>new sB(e,t)}const Cc={highest:w0(sh.highest),high:w0(sh.high),default:w0(sh.default),low:w0(sh.low),lowest:w0(sh.lowest)};class sB{constructor(e,r){this.inner=e,this.prec=r}}class cd{of(e){return new zk(this,e)}reconfigure(e){return cd.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class zk{constructor(e,r){this.compartment=e,this.inner=r}}let A_=class oB{constructor(e,r,n,i,s,o){for(this.base=e,this.compartments=r,this.dynamicSlots=n,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let r=this.address[e.id];return r==null?e.default:this.staticValues[r>>1]}static resolve(e,r,n){let i=[],s=Object.create(null),o=new Map;for(let f of zQ(e,r,o))f instanceof hn?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of i)a[f.id]=c.length<<1,c.push(d=>f.slot(d));let h=n==null?void 0:n.config.facets;for(let f in s){let d=s[f],p=d[0].facet,m=h&&h[f]||[];if(d.every(g=>g.type==0))if(a[p.id]=l.length<<1|1,l7(m,d))l.push(n.facet(p));else{let g=p.combine(d.map(y=>y.value));l.push(n&&p.compare(g,n.facet(p))?n.facet(p):g)}else{for(let g of d)g.type==0?(a[g.id]=l.length<<1|1,l.push(g.value)):(a[g.id]=c.length<<1,c.push(y=>g.dynamicSlot(y)));a[p.id]=c.length<<1,c.push(g=>$Q(g,p,d))}}let u=c.map(f=>f(a));return new oB(e,o,u,a,l,s)}};function zQ(t,e,r){let n=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let c=n[l].indexOf(o);c>-1&&n[l].splice(c,1),o instanceof zk&&r.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof zk){if(r.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;r.set(o.compartment,c),s(c,a)}else if(o instanceof sB)s(o.inner,o.prec);else if(o instanceof hn)n[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof d2)n[a].push(o),o.facet.extensions&&s(o.facet.extensions,sh.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,sh.default),n.reduce((o,a)=>o.concat(a))}function $p(t,e){if(e&1)return 2;let r=e>>1,n=t.status[r];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;t.status[r]=4;let i=t.computeSlot(t,t.config.dynamicSlots[r]);return t.status[r]=2|i}function Bb(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const aB=Ne.define(),Hk=Ne.define({combine:t=>t.some(e=>e),static:!0}),lB=Ne.define({combine:t=>t.length?t[0]:void 0,static:!0}),cB=Ne.define(),hB=Ne.define(),uB=Ne.define(),fB=Ne.define({combine:t=>t.length?t[0]:!1});class fl{constructor(e,r){this.type=e,this.value=r}static define(){return new HQ}}class HQ{of(e){return new fl(this,e)}}class qQ{constructor(e){this.map=e}of(e){return new kt(this,e)}}class kt{constructor(e,r){this.type=e,this.value=r}map(e){let r=this.type.map(this.value,e);return r===void 0?void 0:r==this.value?this:new kt(this.type,r)}is(e){return this.type==e}static define(e={}){return new qQ(e.map||(r=>r))}static mapEffects(e,r){if(!e.length)return e;let n=[];for(let i of e){let s=i.map(r);s&&n.push(s)}return n}}kt.reconfigure=kt.define();kt.appendConfig=kt.define();let si=class V0{constructor(e,r,n,i,s,o){this.startState=e,this.changes=r,this.selection=n,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,n&&iB(n,r.newLength),s.some(a=>a.type==V0.time)||(this.annotations=s.concat(V0.time.of(Date.now())))}static create(e,r,n,i,s,o){return new V0(e,r,n,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let r of this.annotations)if(r.type==e)return r.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let r=this.annotation(V0.userEvent);return!!(r&&(r==e||r.length>e.length&&r.slice(0,e.length)==e&&r[e.length]=="."))}};si.time=fl.define();si.userEvent=fl.define();si.addToHistory=fl.define();si.remote=fl.define();function VQ(t,e){let r=[];for(let n=0,i=0;;){let s,o;if(n<t.length&&(i==e.length||e[i]>=t[n]))s=t[n++],o=t[n++];else if(i<e.length)s=e[i++],o=e[i++];else return r;!r.length||r[r.length-1]<s?r.push(s,o):r[r.length-1]<o&&(r[r.length-1]=o)}}function dB(t,e,r){var n;let i,s,o;return r?(i=e.changes,s=Jr.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(n=t.selection)===null||n===void 0?void 0:n.map(i),effects:kt.mapEffects(t.effects,i).concat(kt.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function qk(t,e,r){let n=e.selection,i=lf(e.annotations);return e.userEvent&&(i=i.concat(si.userEvent.of(e.userEvent))),{changes:e.changes instanceof Jr?e.changes:Jr.of(e.changes||[],r,t.facet(lB)),selection:n&&(n instanceof oe?n:oe.single(n.anchor,n.head)),effects:lf(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function pB(t,e,r){let n=qk(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(r=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(r=!1);let o=!!e[s].sequential;n=dB(n,qk(t,e[s],o?n.changes.newLength:t.doc.length),o)}let i=si.create(t,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return jQ(r?WQ(i):i)}function WQ(t){let e=t.startState,r=!0;for(let i of e.facet(cB)){let s=i(t);if(s===!1){r=!1;break}Array.isArray(s)&&(r=r===!0?s:VQ(r,s))}if(r!==!0){let i,s;if(r===!1)s=t.changes.invertedDesc,i=Jr.empty(e.doc.length);else{let o=t.changes.filter(r);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=si.create(e,i,t.selection&&t.selection.map(s),kt.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let n=e.facet(hB);for(let i=n.length-1;i>=0;i--){let s=n[i](t);s instanceof si?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof si?t=s[0]:t=pB(e,lf(s),!1)}return t}function jQ(t){let e=t.startState,r=e.facet(uB),n=t;for(let i=r.length-1;i>=0;i--){let s=r[i](t);s&&Object.keys(s).length&&(n=dB(n,qk(e,s,t.changes.newLength),!0))}return n==t?t:si.create(e,t.changes,t.selection,n.effects,n.annotations,n.scrollIntoView)}const UQ=[];function lf(t){return t==null?UQ:Array.isArray(t)?t:[t]}var Cr=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Cr||(Cr={}));const GQ=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Vk;try{Vk=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function KQ(t){if(Vk)return Vk.test(t);for(let e=0;e<t.length;e++){let r=t[e];if(/\w/.test(r)||r>""&&(r.toUpperCase()!=r.toLowerCase()||GQ.test(r)))return!0}return!1}function YQ(t){return e=>{if(!/\S/.test(e))return Cr.Space;if(KQ(e))return Cr.Word;for(let r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return Cr.Word;return Cr.Other}}let Sr=class Rs{constructor(e,r,n,i,s,o){this.config=e,this.doc=r,this.selection=n,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)$p(this,a<<1);this.computeSlot=null}field(e,r=!0){let n=this.config.address[e.id];if(n==null){if(r)throw new RangeError("Field is not present in this state");return}return $p(this,n),Bb(this,n)}update(...e){return pB(this,e,!0)}applyTransaction(e){let r=this.config,{base:n,compartments:i}=r;for(let a of e.effects)a.is(cd.reconfigure)?(r&&(i=new Map,r.compartments.forEach((l,c)=>i.set(c,l)),r=null),i.set(a.value.compartment,a.value.extension)):a.is(kt.reconfigure)?(r=null,n=a.value):a.is(kt.appendConfig)&&(r=null,n=lf(n).concat(a.value));let s;r?s=e.startState.values.slice():(r=A_.resolve(n,i,this),s=new Rs(r,this.doc,this.selection,r.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(Hk)?e.newSelection:e.newSelection.asSingle();new Rs(r,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:e},range:oe.cursor(r.from+e.length)}))}changeByRange(e){let r=this.selection,n=e(r.ranges[0]),i=this.changes(n.changes),s=[n.range],o=lf(n.effects);for(let a=1;a<r.ranges.length;a++){let l=e(r.ranges[a]),c=this.changes(l.changes),h=c.map(i);for(let f=0;f<a;f++)s[f]=s[f].map(h);let u=i.mapDesc(c,!0);s.push(l.range.map(u)),i=i.compose(h),o=kt.mapEffects(o,h).concat(kt.mapEffects(lf(l.effects),u))}return{changes:i,selection:oe.create(s,r.mainIndex),effects:o}}changes(e=[]){return e instanceof Jr?e:Jr.of(e,this.doc.length,this.facet(Rs.lineSeparator))}toText(e){return qt.of(e.split(this.facet(Rs.lineSeparator)||Rk))}sliceDoc(e=0,r=this.doc.length){return this.doc.sliceString(e,r,this.lineBreak)}facet(e){let r=this.config.address[e.id];return r==null?e.default:($p(this,r),Bb(this,r))}toJSON(e){let r={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let i=e[n];i instanceof hn&&this.config.address[i.id]!=null&&(r[n]=i.spec.toJSON(this.field(e[n]),this))}return r}static fromJSON(e,r={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n){for(let s in n)if(Object.prototype.hasOwnProperty.call(e,s)){let o=n[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Rs.create({doc:e.doc,selection:oe.fromJSON(e.selection),extensions:r.extensions?i.concat([r.extensions]):i})}static create(e={}){let r=A_.resolve(e.extensions||[],new Map),n=e.doc instanceof qt?e.doc:qt.of((e.doc||"").split(r.staticFacet(Rs.lineSeparator)||Rk)),i=e.selection?e.selection instanceof oe?e.selection:oe.single(e.selection.anchor,e.selection.head):oe.single(0);return iB(i,n.length),r.staticFacet(Hk)||(i=i.asSingle()),new Rs(r,n,i,r.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Rs.tabSize)}get lineBreak(){return this.facet(Rs.lineSeparator)||`
`}get readOnly(){return this.facet(fB)}phrase(e,...r){for(let n of this.facet(Rs.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return r.length&&(e=e.replace(/\$(\$|\d*)/g,(n,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>r.length?n:r[s-1]})),e}languageDataAt(e,r,n=-1){let i=[];for(let s of this.facet(aB))for(let o of s(this,r,n))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return YQ(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:r,from:n,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-n,a=e-n;for(;o>0;){let l=wn(r,o,!1);if(s(r.slice(l,o))!=Cr.Word)break;o=l}for(;a<i;){let l=wn(r,a);if(s(r.slice(a,l))!=Cr.Word)break;a=l}return o==a?null:oe.range(o+n,a+n)}};Sr.allowMultipleSelections=Hk;Sr.tabSize=Ne.define({combine:t=>t.length?t[0]:4});Sr.lineSeparator=lB;Sr.readOnly=fB;Sr.phrases=Ne.define({compare(t,e){let r=Object.keys(t),n=Object.keys(e);return r.length==n.length&&r.every(i=>t[i]==e[i])}});Sr.languageData=aB;Sr.changeFilter=cB;Sr.transactionFilter=hB;Sr.transactionExtender=uB;cd.reconfigure=kt.define();function ra(t,e,r={}){let n={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=n[s];if(a===void 0)n[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(r,s))n[s]=r[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)n[i]===void 0&&(n[i]=e[i]);return n}class Yh{eq(e){return this==e}range(e,r=e){return Em.create(e,r,this)}}Yh.prototype.startSide=Yh.prototype.endSide=0;Yh.prototype.point=!1;Yh.prototype.mapMode=vn.TrackDel;class Em{constructor(e,r,n){this.from=e,this.to=r,this.value=n}static create(e,r,n){return new Em(e,r,n)}}function Wk(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class c7{constructor(e,r,n,i){this.from=e,this.to=r,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,r,n,i=0){let s=n?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(n?this.value[l].endSide:this.value[l].startSide)-r;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,r,n,i){for(let s=this.findIndex(r,-1e9,!0),o=this.findIndex(n,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,r){let n=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],h=this.from[l]+e,u=this.to[l]+e,f,d;if(h==u){let p=r.mapPos(h,c.startSide,c.mapMode);if(p==null||(f=d=p,c.startSide!=c.endSide&&(d=r.mapPos(h,c.endSide),d<f)))continue}else if(f=r.mapPos(h,c.startSide),d=r.mapPos(u,c.endSide),f>d||f==d&&c.startSide>0&&c.endSide<=0)continue;(d-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,d-f)),n.push(c),i.push(f-o),s.push(d-o))}return{mapped:n.length?new c7(i,s,n,a):null,pos:o}}}class $t{constructor(e,r,n,i){this.chunkPos=e,this.chunk=r,this.nextLayer=n,this.maxPoint=i}static create(e,r,n,i){return new $t(e,r,n,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let r of this.chunk)e+=r.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:r=[],sort:n=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(r.length==0&&!o)return this;if(n&&(r=r.slice().sort(Wk)),this.isEmpty)return r.length?$t.of(r):this;let a=new mB(this,null,-1).goto(0),l=0,c=[],h=new Za;for(;a.value||l<r.length;)if(l<r.length&&(a.from-r[l].from||a.startSide-r[l].value.startSide)>=0){let u=r[l++];h.addInner(u.from,u.to,u.value)||c.push(u)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==r.length||this.chunkEnd(a.chunkIndex)<r[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&h.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(h.addInner(a.from,a.to,a.value)||c.push(Em.create(a.from,a.to,a.value))),a.next());return h.finishInner(this.nextLayer.isEmpty&&!c.length?$t.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let r=[],n=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)i=Math.max(i,l.maxPoint),r.push(l),n.push(e.mapPos(a));else if(c===!0){let{mapped:h,pos:u}=l.map(a,e);h&&(i=Math.max(i,h.maxPoint),r.push(h),n.push(u))}}let s=this.nextLayer.map(e);return r.length==0?s:new $t(n,r,s||$t.empty,i)}between(e,r,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(r>=s&&e<=s+o.length&&o.between(s,e-s,r-s,n)===!1)return}this.nextLayer.between(e,r,n)}}iter(e=0){return Lm.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,r=0){return Lm.from(e).goto(r)}static compare(e,r,n,i,s=-1){let o=e.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),a=r.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),l=E_(o,a,n),c=new k0(o,l,s),h=new k0(a,l,s);n.iterGaps((u,f,d)=>L_(c,u,h,f,d,i)),n.empty&&n.length==0&&L_(c,0,h,0,0,i)}static eq(e,r,n=0,i){i==null&&(i=999999999);let s=e.filter(h=>!h.isEmpty&&r.indexOf(h)<0),o=r.filter(h=>!h.isEmpty&&e.indexOf(h)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=E_(s,o),l=new k0(s,a,0).goto(n),c=new k0(o,a,0).goto(n);for(;;){if(l.to!=c.to||!jk(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(e,r,n,i,s=-1){let o=new k0(e,null,s).goto(r),a=r,l=o.openStart;for(;;){let c=Math.min(o.to,n);if(o.point){let h=o.activeForPoint(o.to),u=o.pointFrom<r?h.length+1:o.point.startSide<0?h.length:Math.min(h.length,l);i.point(a,c,o.point,h,u,o.pointRank),l=Math.min(o.openEnd(c),h.length)}else c>a&&(i.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>n)return l+(o.point&&o.to>n?1:0);a=o.to,o.next()}}static of(e,r=!1){let n=new Za;for(let i of e instanceof Em?[e]:r?XQ(e):e)n.add(i.from,i.to,i.value);return n.finish()}static join(e){if(!e.length)return $t.empty;let r=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let i=e[n];i!=$t.empty;i=i.nextLayer)r=new $t(i.chunkPos,i.chunk,r,Math.max(i.maxPoint,r.maxPoint));return r}}$t.empty=new $t([],[],null,-1);function XQ(t){if(t.length>1)for(let e=t[0],r=1;r<t.length;r++){let n=t[r];if(Wk(e,n)>0)return t.slice().sort(Wk);e=n}return t}$t.empty.nextLayer=$t.empty;class Za{finishChunk(e){this.chunks.push(new c7(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,r,n){this.addInner(e,r,n)||(this.nextLayer||(this.nextLayer=new Za)).add(e,r,n)}addInner(e,r,n){let i=e-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(r-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=r,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,r-e)),!0)}addChunk(e,r){if((e-this.lastTo||r.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,r.maxPoint),this.chunks.push(r),this.chunkPos.push(e);let n=r.value.length-1;return this.last=r.value[n],this.lastFrom=r.from[n]+e,this.lastTo=r.to[n]+e,!0}finish(){return this.finishInner($t.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let r=$t.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,r}}function E_(t,e,r){let n=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&n.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=n.get(s.chunk[o]);a!=null&&(r?r.mapPos(a):a)==s.chunkPos[o]&&!(r!=null&&r.touchesRange(a,a+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class mB{constructor(e,r,n,i=0){this.layer=e,this.skip=r,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,r=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,r,!1),this}gotoInner(e,r,n){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],r,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,r){(this.to-e||this.endSide-r)<0&&this.gotoInner(e,r,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],r=this.layer.chunk[this.chunkIndex],n=e+r.from[this.rangeIndex];if(this.from=n,this.to=e+r.to[this.rangeIndex],this.value=r.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Lm{constructor(e){this.heap=e}static from(e,r=null,n=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&i.push(new mB(o,r,n,s));return i.length==1?i[0]:new Lm(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,r=-1e9){for(let n of this.heap)n.goto(e,r);for(let n=this.heap.length>>1;n>=0;n--)bw(this.heap,n);return this.next(),this}forward(e,r){for(let n of this.heap)n.forward(e,r);for(let n=this.heap.length>>1;n>=0;n--)bw(this.heap,n);(this.to-e||this.value.endSide-r)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),bw(this.heap,0)}}}function bw(t,e){for(let r=t[e];;){let n=(e<<1)+1;if(n>=t.length)break;let i=t[n];if(n+1<t.length&&i.compare(t[n+1])>=0&&(i=t[n+1],n++),r.compare(i)<0)break;t[n]=r,t[e]=i,e=n}}class k0{constructor(e,r,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Lm.from(e,r,n)}goto(e,r=-1e9){return this.cursor.goto(e,r),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=r,this.openStart=-1,this.next(),this}forward(e,r){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-r)<0;)this.removeActive(this.minActive);this.cursor.forward(e,r)}removeActive(e){ry(this.active,e),ry(this.activeTo,e),ry(this.activeRank,e),this.minActive=O_(this.active,this.activeTo)}addActive(e){let r=0,{value:n,to:i,rank:s}=this.cursor;for(;r<this.activeRank.length&&(s-this.activeRank[r]||i-this.activeTo[r])>0;)r++;ny(this.active,r,n),ny(this.activeTo,r,i),ny(this.activeRank,r,s),e&&ny(e,r,this.cursor.from),this.minActive=O_(this.active,this.activeTo)}next(){let e=this.to,r=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&ry(n,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(n),this.cursor.next();else if(r&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let i=n.length-1;i>=0&&n[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let r=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&r.push(this.active[n]);return r.reverse()}openEnd(e){let r=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)r++;return r}}function L_(t,e,r,n,i,s){t.goto(e),r.goto(n);let o=n+i,a=n,l=n-e;for(;;){let c=t.to+l-r.to,h=c||t.endSide-r.endSide,u=h<0?t.to+l:r.to,f=Math.min(u,o);if(t.point||r.point?t.point&&r.point&&(t.point==r.point||t.point.eq(r.point))&&jk(t.activeForPoint(t.to),r.activeForPoint(r.to))||s.comparePoint(a,f,t.point,r.point):f>a&&!jk(t.active,r.active)&&s.compareRange(a,f,t.active,r.active),u>o)break;(c||t.openEnd!=r.openEnd)&&s.boundChange&&s.boundChange(u),a=u,h<=0&&t.next(),h>=0&&r.next()}}function jk(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!=e[r]&&!t[r].eq(e[r]))return!1;return!0}function ry(t,e){for(let r=e,n=t.length-1;r<n;r++)t[r]=t[r+1];t.pop()}function ny(t,e,r){for(let n=t.length-1;n>=e;n--)t[n+1]=t[n];t[e]=r}function O_(t,e){let r=-1,n=1e9;for(let i=0;i<e.length;i++)(e[i]-n||t[i].endSide-t[r].endSide)<0&&(r=i,n=e[i]);return r}function $d(t,e,r=t.length){let n=0;for(let i=0;i<r&&i<t.length;)t.charCodeAt(i)==9?(n+=e-n%e,i++):(n++,i=wn(t,i));return n}function Uk(t,e,r,n){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?r-s%r:1,i=wn(t,i)}return n===!0?-1:t.length}const Gk="",D_=typeof Symbol>"u"?"__"+Gk:Symbol.for(Gk),Kk=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),I_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class sc{constructor(e,r){this.rules=[];let{finish:n}=r||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let h=[],u=/^@(\w+)\b/.exec(o[0]),f=u&&u[1]=="keyframes";if(u&&a==null)return l.push(o[0]+";");for(let d in a){let p=a[d];if(/&/.test(d))s(d.split(/,\s*/).map(m=>o.map(g=>m.replace(/&/,g))).reduce((m,g)=>m.concat(g)),p,l);else if(p&&typeof p=="object"){if(!u)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),p,h,f)}else p!=null&&h.push(d.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(h.length||f)&&l.push((n&&!u&&!c?o.map(n):o).join(", ")+" {"+h.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=I_[D_]||1;return I_[D_]=e+1,Gk+e.toString(36)}static mount(e,r,n){let i=e[Kk],s=n&&n.nonce;i?s&&i.setNonce(s):i=new JQ(e,s),i.mount(Array.isArray(r)?r:[r],e)}}let B_=new Map;class JQ{constructor(e,r){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=B_.get(n);if(s)return e[Kk]=s;this.sheet=new i.CSSStyleSheet,B_.set(n,this)}else this.styleTag=n.createElement("style"),r&&this.styleTag.setAttribute("nonce",r);this.modules=[],e[Kk]=this}mount(e,r){let n=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),n)for(let c=0;c<a.rules.length;c++)n.insertRule(a.rules[c],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(n)r.adoptedStyleSheets.indexOf(this.sheet)<0&&(r.adoptedStyleSheets=[this.sheet,...r.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=r.head||r;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Qa={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Om={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ZQ=typeof navigator<"u"&&/Mac/.test(navigator.platform),QQ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var yn=0;yn<10;yn++)Qa[48+yn]=Qa[96+yn]=String(yn);for(var yn=1;yn<=24;yn++)Qa[yn+111]="F"+yn;for(var yn=65;yn<=90;yn++)Qa[yn]=String.fromCharCode(yn+32),Om[yn]=String.fromCharCode(yn);for(var xw in Qa)Om.hasOwnProperty(xw)||(Om[xw]=Qa[xw]);function gB(t){var e=ZQ&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||QQ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?Om:Qa)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}function nr(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,r=arguments[1];if(r&&typeof r=="object"&&r.nodeType==null&&!Array.isArray(r)){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var i=r[n];typeof i=="string"?t.setAttribute(n,i):i!=null&&(t[n]=i)}e++}for(;e<arguments.length;e++)yB(t,arguments[e]);return t}function yB(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var r=0;r<e.length;r++)yB(t,e[r]);else throw new RangeError("Unsupported child node: "+e)}let Jn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Yk=typeof document<"u"?document:{documentElement:{style:{}}};const Xk=/Edge\/(\d+)/.exec(Jn.userAgent),bB=/MSIE \d/.test(Jn.userAgent),Jk=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Jn.userAgent),kv=!!(bB||Jk||Xk),R_=!kv&&/gecko\/(\d+)/i.test(Jn.userAgent),vw=!kv&&/Chrome\/(\d+)/.exec(Jn.userAgent),eee="webkitFontSmoothing"in Yk.documentElement.style,Zk=!kv&&/Apple Computer/.test(Jn.vendor),P_=Zk&&(/Mobile\/\w+/.test(Jn.userAgent)||Jn.maxTouchPoints>2);var Ie={mac:P_||/Mac/.test(Jn.platform),windows:/Win/.test(Jn.platform),linux:/Linux|X11/.test(Jn.platform),ie:kv,ie_version:bB?Yk.documentMode||6:Jk?+Jk[1]:Xk?+Xk[1]:0,gecko:R_,gecko_version:R_?+(/Firefox\/(\d+)/.exec(Jn.userAgent)||[0,0])[1]:0,chrome:!!vw,chrome_version:vw?+vw[1]:0,ios:P_,android:/Android\b/.test(Jn.userAgent),webkit_version:eee?+(/\bAppleWebKit\/(\d+)/.exec(Jn.userAgent)||[0,0])[1]:0,safari:Zk,safari_version:Zk?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Jn.userAgent)||[0,0])[1]:0,tabSize:Yk.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Dm(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Qk(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function p2(t,e){if(!e.anchorNode)return!1;try{return Qk(t,e.anchorNode)}catch{return!1}}function Im(t){return t.nodeType==3?Jh(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function zp(t,e,r,n){return r?N_(t,e,r,n,-1)||N_(t,e,r,n,1):!1}function Xh(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Rb(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function N_(t,e,r,n,i){for(;;){if(t==r&&e==n)return!0;if(e==(i<0?0:Yo(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Xh(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?Yo(t):0}else return!1}}function Yo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Cv(t,e){let r=e?t.left:t.right;return{left:r,right:r,top:t.top,bottom:t.bottom}}function tee(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function xB(t,e){let r=e.width/t.offsetWidth,n=e.height/t.offsetHeight;return(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.width-t.offsetWidth)<1)&&(r=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-t.offsetHeight)<1)&&(n=1),{scaleX:r,scaleY:n}}function ree(t,e,r,n,i,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let h=t,u=!1;h&&!u;)if(h.nodeType==1){let f,d=h==l.body,p=1,m=1;if(d)f=tee(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(u=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let b=h.getBoundingClientRect();({scaleX:p,scaleY:m}=xB(h,b)),f={left:b.left,right:b.left+h.clientWidth*p,top:b.top,bottom:b.top+h.clientHeight*m}}let g=0,y=0;if(i=="nearest")e.top<f.top?(y=e.top-(f.top+o),r>0&&e.bottom>f.bottom+y&&(y=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(y=e.bottom-f.bottom+o,r<0&&e.top-y<f.top&&(y=e.top-(f.top+o)));else{let b=e.bottom-e.top,x=f.bottom-f.top;y=(i=="center"&&b<=x?e.top+b/2-x/2:i=="start"||i=="center"&&r<0?e.top-o:e.bottom-x+o)-f.top}if(n=="nearest"?e.left<f.left?(g=e.left-(f.left+s),r>0&&e.right>f.right+g&&(g=e.right-f.right+s)):e.right>f.right&&(g=e.right-f.right+s,r<0&&e.left<f.left+g&&(g=e.left-(f.left+s))):g=(n=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:n=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,g||y)if(d)c.scrollBy(g,y);else{let b=0,x=0;if(y){let T=h.scrollTop;h.scrollTop+=y/m,x=(h.scrollTop-T)*m}if(g){let T=h.scrollLeft;h.scrollLeft+=g/p,b=(h.scrollLeft-T)*p}e={left:e.left-b,top:e.top-x,right:e.right-b,bottom:e.bottom-x},b&&Math.abs(b-g)<1&&(n="nearest"),x&&Math.abs(x-y)<1&&(i="nearest")}if(d)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),h=h.assignedSlot||h.parentNode}else if(h.nodeType==11)h=h.host;else break}function nee(t){let e=t.ownerDocument,r,n;for(let i=t.parentNode;i&&!(i==e.body||r&&n);)if(i.nodeType==1)!n&&i.scrollHeight>i.clientHeight&&(n=i),!r&&i.scrollWidth>i.clientWidth&&(r=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:r,y:n}}class iee{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:r,focusNode:n}=e;this.set(r,Math.min(e.anchorOffset,r?Yo(r):0),n,Math.min(e.focusOffset,n?Yo(n):0))}set(e,r,n,i){this.anchorNode=e,this.anchorOffset=r,this.focusNode=n,this.focusOffset=i}}let Xc=null;Ie.safari&&Ie.safari_version>=26&&(Xc=!1);function vB(t){if(t.setActive)return t.setActive();if(Xc)return t.focus(Xc);let e=[];for(let r=t;r&&(e.push(r,r.scrollTop,r.scrollLeft),r!=r.ownerDocument);r=r.parentNode);if(t.focus(Xc==null?{get preventScroll(){return Xc={preventScroll:!0},!0}}:void 0),!Xc){Xc=!1;for(let r=0;r<e.length;){let n=e[r++],i=e[r++],s=e[r++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=s&&(n.scrollLeft=s)}}}let F_;function Jh(t,e,r=e){let n=F_||(F_=document.createRange());return n.setEnd(t,r),n.setStart(t,e),n}function cf(t,e,r,n){let i={key:e,code:e,keyCode:r,which:r,cancelable:!0};n&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=n);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function see(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function wB(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function oee(t,e){let r=e.focusNode,n=e.focusOffset;if(!r||e.anchorNode!=r||e.anchorOffset!=n)return!1;for(n=Math.min(n,Yo(r));;)if(n){if(r.nodeType!=1)return!1;let i=r.childNodes[n-1];i.contentEditable=="false"?n--:(r=i,n=Yo(r))}else{if(r==t)return!0;n=Xh(r),r=r.parentNode}}function kB(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function CB(t,e){for(let r=t,n=e;;){if(r.nodeType==3&&n>0)return{node:r,offset:n};if(r.nodeType==1&&n>0){if(r.contentEditable=="false")return null;r=r.childNodes[n-1],n=Yo(r)}else if(r.parentNode&&!Rb(r))n=Xh(r),r=r.parentNode;else return null}}function SB(t,e){for(let r=t,n=e;;){if(r.nodeType==3&&n<r.nodeValue.length)return{node:r,offset:n};if(r.nodeType==1&&n<r.childNodes.length){if(r.contentEditable=="false")return null;r=r.childNodes[n],n=0}else if(r.parentNode&&!Rb(r))n=Xh(r)+1,r=r.parentNode;else return null}}class Bn{constructor(e,r,n=!0){this.node=e,this.offset=r,this.precise=n}static before(e,r){return new Bn(e.parentNode,Xh(e),r)}static after(e,r){return new Bn(e.parentNode,Xh(e)+1,r)}}const h7=[];class tr{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let r=this.posAtStart;for(let n of this.children){if(n==e)return r;r+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,r){if(this.flags&2){let n=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:n.firstChild)){let a=tr.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,r),o.flags&=-8}if(s=i?i.nextSibling:n.firstChild,r&&!r.written&&r.node==n&&s!=o.dom&&(r.written=!0),o.dom.parentNode==n)for(;s&&s!=o.dom;)s=$_(s);else n.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:n.firstChild,s&&r&&r.node==n&&(r.written=!0);s;)s=$_(s)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,r),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,r){let n;if(e==this.dom)n=this.dom.childNodes[r];else{let i=Yo(e)==0?0:r==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!tr.get(n);)n=n.nextSibling;if(!n)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==n)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,r,n=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,c=n,h=n;l<this.children.length;l++){let u=this.children[l],f=c+u.length;if(c<e&&f>r)return u.domBoundsAround(e,r,c);if(f>=e&&i==-1&&(i=l,s=c),c>r&&u.dom.parentNode==this.dom){o=l,a=h;break}h=f,c=f+u.breakAfter}return{from:s,to:a<0?n+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let r=this.parent;r;r=r.parent){if(e&&(r.flags|=2),r.flags&1)return;r.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let r=e.parent;if(!r)return e;e=r}}replaceChildren(e,r,n=h7){this.markDirty();for(let i=e;i<r;i++){let s=this.children[i];s.parent==this&&n.indexOf(s)<0&&s.destroy()}n.length<250?this.children.splice(e,r-e,...n):this.children=[].concat(this.children.slice(0,e),n,this.children.slice(r));for(let i=0;i<n.length;i++)n[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new TB(this.children,e,this.children.length)}childPos(e,r=1){return this.childCursor().findPos(e,r)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,r,n,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}tr.prototype.breakAfter=0;function $_(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class TB{constructor(e,r,n){this.children=e,this.pos=r,this.i=n,this.off=0}findPos(e,r=1){for(;;){if(e>this.pos||e==this.pos&&(r>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function _B(t,e,r,n,i,s,o,a,l){let{children:c}=t,h=c.length?c[e]:null,u=s.length?s[s.length-1]:null,f=u?u.breakAfter:o;if(!(e==n&&h&&!o&&!f&&s.length<2&&h.merge(r,i,s.length?u:null,r==0,a,l))){if(n<c.length){let d=c[n];d&&(i<d.length||d.breakAfter&&(u!=null&&u.breakAfter))?(e==n&&(d=d.split(i),i=0),!f&&u&&d.merge(0,i,u,!0,0,l)?s[s.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,l),s.push(d))):d!=null&&d.breakAfter&&(u?u.breakAfter=1:o=1),n++}for(h&&(h.breakAfter=o,r>0&&(!o&&s.length&&h.merge(r,h.length,s[0],!1,a,0)?h.breakAfter=s.shift().breakAfter:(r<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(r,h.length,null,!1,a,0),e++));e<n&&s.length;)if(c[n-1].become(s[s.length-1]))n--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&n<c.length&&!c[e-1].breakAfter&&c[n].merge(0,0,c[e-1],!1,a,l)&&e--,(e<n||s.length)&&t.replaceChildren(e,n,s)}}function MB(t,e,r,n,i,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(r,1),{i:c,off:h}=o.findPos(e,-1),u=e-r;for(let f of n)u+=f.length;t.length+=u,_B(t,c,h,a,l,n,0,i,s)}const aee=256;class ro extends tr{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,r){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(r&&r.node==this.dom&&(r.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,r,n){return this.flags&8||n&&(!(n instanceof ro)||this.length-(r-e)+n.length>aee||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(r),this.markDirty(),!0)}split(e){let r=new ro(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),r.flags|=this.flags&8,r}localPosFromDOM(e,r){return e==this.dom?r:r?this.text.length:0}domAtPos(e){return new Bn(this.dom,e)}domBoundsAround(e,r,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,r){return lee(this.dom,e,r)}}class el extends tr{constructor(e,r=[],n=0){super(),this.mark=e,this.children=r,this.length=n;for(let i of r)i.setParent(this)}setAttrs(e){if(wB(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let r in this.mark.attrs)e.setAttribute(r,this.mark.attrs[r]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,r){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,r)}merge(e,r,n,i,s,o){return n&&(!(n instanceof el&&n.mark.eq(this.mark))||e&&s<=0||r<this.length&&o<=0)?!1:(MB(this,e,r,n?n.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let r=[],n=0,i=-1,s=0;for(let a of this.children){let l=n+a.length;l>e&&r.push(n<e?a.split(e-n):a),i<0&&n>=e&&(i=s),n=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new el(this.mark,r,o)}domAtPos(e){return AB(this,e)}coordsAt(e,r){return LB(this,e,r)}}function lee(t,e,r){let n=t.nodeValue.length;e>n&&(e=n);let i=e,s=e,o=0;e==0&&r<0||e==n&&r>=0?Ie.chrome||Ie.gecko||(e?(i--,o=1):s<n&&(s++,o=-1)):r<0?i--:s<n&&s++;let a=Jh(t,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:r>=0)?0:a.length-1];return Ie.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?Cv(l,o<0):l||null}class $a extends tr{static create(e,r,n){return new $a(e,r,n)}constructor(e,r,n){super(),this.widget=e,this.length=r,this.side=n,this.prevWidget=null}split(e){let r=$a.create(this.widget,this.length-e,this.side);return this.length-=e,r}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,r,n,i,s,o){return n&&(!(n instanceof $a)||!this.widget.compare(n.widget)||e>0&&s<=0||r<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-r),!0)}become(e){return e instanceof $a&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return qt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:r}=e,n=r&&r.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):qt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Bn.before(this.dom):Bn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,r){let n=this.widget.coordsAt(this.dom,e,r);if(n)return n;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return Cv(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class hd extends tr{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof hd&&e.side==this.side}split(){return new hd(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Bn.before(this.dom):Bn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return qt.empty}get isHidden(){return!0}}ro.prototype.children=$a.prototype.children=hd.prototype.children=h7;function AB(t,e){let r=t.dom,{children:n}=t,i=0;for(let s=0;i<n.length;i++){let o=n[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==r)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=n[s-1];if(o.dom.parentNode==r)return o.domAtPos(o.length)}for(let s=i;s<n.length;s++){let o=n[s];if(o.dom.parentNode==r)return o.domAtPos(0)}return new Bn(r,0)}function EB(t,e,r){let n,{children:i}=t;r>0&&e instanceof el&&i.length&&(n=i[i.length-1])instanceof el&&n.mark.eq(e.mark)?EB(n,e.children[0],r-1):(i.push(e),e.setParent(t)),t.length+=e.length}function LB(t,e,r){let n=null,i=-1,s=null,o=-1;function a(c,h){for(let u=0,f=0;u<c.children.length&&f<=h;u++){let d=c.children[u],p=f+d.length;p>=h&&(d.children.length?a(d,h-f):(!s||s.isHidden&&(r>0||hee(s,d)))&&(p>h||f==p&&d.getSide()>0)?(s=d,o=h-f):(f<h||f==p&&d.getSide()<0&&!d.isHidden)&&(n=d,i=h-f)),f=p}}a(t,e);let l=(r<0?n:s)||n||s;return l?l.coordsAt(Math.max(0,l==n?i:o),r):cee(t)}function cee(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let r=Im(e);return r[r.length-1]||null}function hee(t,e){let r=t.coordsAt(0,1),n=e.coordsAt(0,1);return r&&n&&n.top<r.bottom}function e3(t,e){for(let r in t)r=="class"&&e.class?e.class+=" "+t.class:r=="style"&&e.style?e.style+=";"+t.style:e[r]=t[r];return e}const z_=Object.create(null);function Pb(t,e,r){if(t==e)return!0;t||(t=z_),e||(e=z_);let n=Object.keys(t),i=Object.keys(e);if(n.length-(r&&n.indexOf(r)>-1?1:0)!=i.length-(r&&i.indexOf(r)>-1?1:0))return!1;for(let s of n)if(s!=r&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function t3(t,e,r){let n=!1;if(e)for(let i in e)r&&i in r||(n=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(r)for(let i in r)e&&e[i]==r[i]||(n=!0,i=="style"?t.style.cssText=r[i]:t.setAttribute(i,r[i]));return n}function uee(t){let e=Object.create(null);for(let r=0;r<t.attributes.length;r++){let n=t.attributes[r];e[n.name]=n.value}return e}let dl=class{eq(e){return!1}updateDOM(e,r){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,r,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}};var oi=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(oi||(oi={}));let lt=class extends Yh{constructor(e,r,n,i){super(),this.startSide=e,this.endSide=r,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(e){return new e1(e)}static widget(e){let r=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return r+=n&&!e.inlineOrder?r>0?3e8:-4e8:r>0?1e8:-1e8,new oc(e,r,r,n,e.widget||null,!1)}static replace(e){let r=!!e.block,n,i;if(e.isBlockGap)n=-5e8,i=4e8;else{let{start:s,end:o}=OB(e,r);n=(s?r?-3e8:-1:5e8)-1,i=(o?r?2e8:1:-6e8)+1}return new oc(e,n,i,r,e.widget||null,!0)}static line(e){return new t1(e)}static set(e,r=!1){return $t.of(e,r)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};lt.none=$t.empty;class e1 extends lt{constructor(e){let{start:r,end:n}=OB(e);super(r?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var r,n;return this==e||e instanceof e1&&this.tagName==e.tagName&&(this.class||((r=this.attrs)===null||r===void 0?void 0:r.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&Pb(this.attrs,e.attrs,"class")}range(e,r=e){if(e>=r)throw new RangeError("Mark decorations may not be empty");return super.range(e,r)}}e1.prototype.point=!1;class t1 extends lt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof t1&&this.spec.class==e.spec.class&&Pb(this.spec.attributes,e.spec.attributes)}range(e,r=e){if(r!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,r)}}t1.prototype.mapMode=vn.TrackBefore;t1.prototype.point=!0;class oc extends lt{constructor(e,r,n,i,s,o){super(r,n,s,e),this.block=i,this.isReplace=o,this.mapMode=i?r<=0?vn.TrackBefore:vn.TrackAfter:vn.TrackDel}get type(){return this.startSide!=this.endSide?oi.WidgetRange:this.startSide<=0?oi.WidgetBefore:oi.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof oc&&fee(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,r=e){if(this.isReplace&&(e>r||e==r&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&r!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,r)}}oc.prototype.point=!0;function OB(t,e=!1){let{inclusiveStart:r,inclusiveEnd:n}=t;return r==null&&(r=t.inclusive),n==null&&(n=t.inclusive),{start:r??e,end:n??e}}function fee(t,e){return t==e||!!(t&&e&&t.compare(e))}function m2(t,e,r,n=0){let i=r.length-1;i>=0&&r[i]+n>=t?r[i]=Math.max(r[i],e):r.push(t,e)}class qr extends tr{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,r,n,i,s,o){if(n){if(!(n instanceof qr))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),MB(this,e,r,n?n.children.slice():[],s,o),!0}split(e){let r=new qr;if(r.breakAfter=this.breakAfter,this.length==0)return r;let{i:n,off:i}=this.childPos(e);i&&(r.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let s=n;s<this.children.length;s++)r.append(this.children[s],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,r}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Pb(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,r){EB(this,e,r)}addLineDeco(e){let r=e.spec.attributes,n=e.spec.class;r&&(this.attrs=e3(r,this.attrs||{})),n&&(this.attrs=e3({class:n},this.attrs||{}))}domAtPos(e){return AB(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,r){var n;this.dom?this.flags&4&&(wB(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(t3(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,r);let i=this.dom.lastChild;for(;i&&tr.get(i)instanceof el;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((n=tr.get(i))===null||n===void 0?void 0:n.isEditable)==!1&&(!Ie.ios||!this.children.some(s=>s instanceof ro))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,r;for(let n of this.children){if(!(n instanceof ro)||/[^ -~]/.test(n.text))return null;let i=Im(n.dom);if(i.length!=1)return null;e+=i[0].width,r=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:r}:null}coordsAt(e,r){let n=LB(this,e,r);if(!this.children.length&&n&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=n.bottom-n.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:n.top+o,bottom:n.bottom-o,left:n.left,right:n.left}}}return n}become(e){return e instanceof qr&&this.children.length==0&&e.children.length==0&&Pb(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,r){for(let n=0,i=0;n<e.children.length;n++){let s=e.children[n],o=i+s.length;if(o>=r){if(s instanceof qr)return s;if(o>r)break}i=o+s.breakAfter}return null}}class ja extends tr{constructor(e,r,n){super(),this.widget=e,this.length=r,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,r,n,i,s,o){return n&&(!(n instanceof ja)||!this.widget.compare(n.widget)||e>0&&s<=0||r<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-r),!0)}domAtPos(e){return e==0?Bn.before(this.dom):Bn.after(this.dom,e==this.length)}split(e){let r=this.length-e;this.length=e;let n=new ja(this.widget,r,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return h7}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):qt.empty}domBoundsAround(){return null}become(e){return e instanceof ja&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,r){let n=this.widget.coordsAt(this.dom,e,r);return n||(this.widget instanceof r3?null:Cv(this.dom.getBoundingClientRect(),this.length?e==0:r<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:r,endSide:n}=this.deco;return r==n?!1:e<0?r<0:n>0}}class r3 extends dl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Hp{constructor(e,r,n,i){this.doc=e,this.pos=r,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=r}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof ja&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new qr),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(iy(new hd(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof ja)&&this.getLine()}buildText(e,r,n){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:a,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),s=Math.min(i,512);this.flushBuffer(r.slice(r.length-n)),this.getLine().append(iy(new ro(this.text.slice(this.textOff,this.textOff+s)),r),n),this.atCursorPos=!0,this.textOff+=s,e-=s,n=i<=s?0:r.length}}span(e,r,n,i){this.buildText(r-e,n,i),this.pos=r,this.openStart<0&&(this.openStart=i)}point(e,r,n,i,s,o){if(this.disallowBlockEffectsFor[o]&&n instanceof oc){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(r>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=r-e;if(n instanceof oc)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ja(n.widget||ud.block,a,n));else{let l=$a.create(n.widget||ud.inline,a,a?0:n.startSide),c=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<r||n.startSide>0),h=!l.isEditable&&(e<r||s>i.length||n.startSide<=0),u=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(u.append(iy(new hd(1),i),s),s=i.length+Math.max(0,s-i.length)),u.append(iy(l,i),s),this.atCursorPos=h,this.pendingBuffer=h?e<r||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=r),this.openStart<0&&(this.openStart=s)}static build(e,r,n,i,s){let o=new Hp(e,r,n,s);return o.openEnd=$t.spans(i,r,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function iy(t,e){for(let r of e)t=new el(r,[t],t.length);return t}class ud extends dl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}ud.inline=new ud("span");ud.block=new ud("div");var br=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(br||(br={}));const Zh=br.LTR,u7=br.RTL;function DB(t){let e=[];for(let r=0;r<t.length;r++)e.push(1<<+t[r]);return e}const dee=DB("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),pee=DB("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),n3=Object.create(null),xo=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),r=t.charCodeAt(1);n3[e]=r,n3[r]=-e}function IB(t){return t<=247?dee[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?pee[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const mee=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ul{get dir(){return this.level%2?u7:Zh}constructor(e,r,n){this.from=e,this.to=r,this.level=n}side(e,r){return this.dir==r==e?this.to:this.from}forward(e,r){return e==(this.dir==r)}static find(e,r,n,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=r&&a.to>=r){if(a.level==n)return o;(s<0||(i!=0?i<0?a.from<r:a.to>r:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function BB(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++){let n=t[r],i=e[r];if(n.from!=i.from||n.to!=i.to||n.direction!=i.direction||!BB(n.inner,i.inner))return!1}return!0}const sr=[];function gee(t,e,r,n,i){for(let s=0;s<=n.length;s++){let o=s?n[s-1].to:e,a=s<n.length?n[s].from:r,l=s?256:i;for(let c=o,h=l,u=l;c<a;c++){let f=IB(t.charCodeAt(c));f==512?f=h:f==8&&u==4&&(f=16),sr[c]=f==4?2:f,f&7&&(u=f),h=f}for(let c=o,h=l,u=l;c<a;c++){let f=sr[c];if(f==128)c<a-1&&h==sr[c+1]&&h&24?f=sr[c]=h:sr[c]=256;else if(f==64){let d=c+1;for(;d<a&&sr[d]==64;)d++;let p=c&&h==8||d<r&&sr[d]==8?u==1?1:8:256;for(let m=c;m<d;m++)sr[m]=p;c=d-1}else f==8&&u==1&&(sr[c]=1);h=f,f&7&&(u=f)}}}function yee(t,e,r,n,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=n.length;o++){let c=o?n[o-1].to:e,h=o<n.length?n[o].from:r;for(let u=c,f,d,p;u<h;u++)if(d=n3[f=t.charCodeAt(u)])if(d<0){for(let m=a-3;m>=0;m-=3)if(xo[m+1]==-d){let g=xo[m+2],y=g&2?i:g&4?g&1?s:i:0;y&&(sr[u]=sr[xo[m]]=y),a=m;break}}else{if(xo.length==189)break;xo[a++]=u,xo[a++]=f,xo[a++]=l}else if((p=sr[u])==2||p==1){let m=p==i;l=m?0:1;for(let g=a-3;g>=0;g-=3){let y=xo[g+2];if(y&2)break;if(m)xo[g+2]|=2;else{if(y&4)break;xo[g+2]|=4}}}}}function bee(t,e,r,n){for(let i=0,s=n;i<=r.length;i++){let o=i?r[i-1].to:t,a=i<r.length?r[i].from:e;for(let l=o;l<a;){let c=sr[l];if(c==256){let h=l+1;for(;;)if(h==a){if(i==r.length)break;h=r[i++].to,a=i<r.length?r[i].from:e}else if(sr[h]==256)h++;else break;let u=s==1,f=(h<e?sr[h]:n)==1,d=u==f?u?1:2:n;for(let p=h,m=i,g=m?r[m-1].to:t;p>l;)p==g&&(p=r[--m].from,g=m?r[m-1].to:t),sr[--p]=d;l=h}else s=c,l++}}}function i3(t,e,r,n,i,s,o){let a=n%2?2:1;if(n%2==i%2)for(let l=e,c=0;l<r;){let h=!0,u=!1;if(c==s.length||l<s[c].from){let m=sr[l];m!=a&&(h=!1,u=m==16)}let f=!h&&a==1?[]:null,d=h?n:n+1,p=l;e:for(;;)if(c<s.length&&p==s[c].from){if(u)break e;let m=s[c];if(!h)for(let g=m.to,y=c+1;;){if(g==r)break e;if(y<s.length&&s[y].from==g)g=s[y++].to;else{if(sr[g]==a)break e;break}}if(c++,f)f.push(m);else{m.from>l&&o.push(new Ul(l,m.from,d));let g=m.direction==Zh!=!(d%2);s3(t,g?n+1:n,i,m.inner,m.from,m.to,o),l=m.to}p=m.to}else{if(p==r||(h?sr[p]!=a:sr[p]==a))break;p++}f?i3(t,l,p,n+1,i,f,o):l<p&&o.push(new Ul(l,p,d)),l=p}else for(let l=r,c=s.length;l>e;){let h=!0,u=!1;if(!c||l>s[c-1].to){let m=sr[l-1];m!=a&&(h=!1,u=m==16)}let f=!h&&a==1?[]:null,d=h?n:n+1,p=l;e:for(;;)if(c&&p==s[c-1].to){if(u)break e;let m=s[--c];if(!h)for(let g=m.from,y=c;;){if(g==e)break e;if(y&&s[y-1].to==g)g=s[--y].from;else{if(sr[g-1]==a)break e;break}}if(f)f.push(m);else{m.to<l&&o.push(new Ul(m.to,l,d));let g=m.direction==Zh!=!(d%2);s3(t,g?n+1:n,i,m.inner,m.from,m.to,o),l=m.from}p=m.from}else{if(p==e||(h?sr[p-1]!=a:sr[p-1]==a))break;p--}f?i3(t,p,l,n+1,i,f,o):p<l&&o.push(new Ul(p,l,d)),l=p}}function s3(t,e,r,n,i,s,o){let a=e%2?2:1;gee(t,i,s,n,a),yee(t,i,s,n,a),bee(i,s,n,a),i3(t,i,s,e,r,n,o)}function xee(t,e,r){if(!t)return[new Ul(0,0,e==u7?1:0)];if(e==Zh&&!r.length&&!mee.test(t))return RB(t.length);if(r.length)for(;t.length>sr.length;)sr[sr.length]=256;let n=[],i=e==Zh?0:1;return s3(t,i,i,r,0,t.length,n),n}function RB(t){return[new Ul(0,t,0)]}let PB="";function vee(t,e,r,n,i){var s;let o=n.head-t.from,a=Ul.find(e,o,(s=n.bidiLevel)!==null&&s!==void 0?s:-1,n.assoc),l=e[a],c=l.side(i,r);if(o==c){let f=a+=i?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!i,r),c=l.side(i,r)}let h=wn(t.text,o,l.forward(i,r));(h<l.from||h>l.to)&&(h=c),PB=t.text.slice(Math.min(o,h),Math.max(o,h));let u=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return u&&h==c&&u.level+(i?0:1)<l.level?oe.cursor(u.side(!i,r)+t.from,u.forward(i,r)?1:-1,u.level):oe.cursor(h+t.from,l.forward(i,r)?-1:1,l.level)}function wee(t,e,r){for(let n=e;n<r;n++){let i=IB(t.charCodeAt(n));if(i==1)return Zh;if(i==2||i==4)return u7}return Zh}const NB=Ne.define(),FB=Ne.define(),$B=Ne.define(),zB=Ne.define(),o3=Ne.define(),HB=Ne.define(),qB=Ne.define(),f7=Ne.define(),d7=Ne.define(),VB=Ne.define({combine:t=>t.some(e=>e)}),WB=Ne.define({combine:t=>t.some(e=>e)}),jB=Ne.define();class hf{constructor(e,r="nearest",n="nearest",i=5,s=5,o=!1){this.range=e,this.y=r,this.x=n,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new hf(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new hf(oe.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const sy=kt.define({map:(t,e)=>t.map(e)}),UB=kt.define();function Mi(t,e,r){let n=t.facet(zB);n.length?n[0](e):window.onerror&&window.onerror(String(e),r,void 0,void 0,e)||(r?console.error(r+":",e):console.error(e))}const Na=Ne.define({combine:t=>t.length?t[0]:!0});let kee=0;const nf=Ne.define({combine(t){return t.filter((e,r)=>{for(let n=0;n<r;n++)if(t[n].plugin==e.plugin)return!1;return!0})}});class Ur{constructor(e,r,n,i,s){this.id=e,this.create=r,this.domEventHandlers=n,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(nf.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(nf.of({plugin:this,arg:e}))}static define(e,r){const{eventHandlers:n,eventObservers:i,provide:s,decorations:o}=r||{};return new Ur(kee++,e,n,i,a=>{let l=[];return o&&l.push(Bm.of(c=>{let h=c.plugin(a);return h?o(h):lt.none})),s&&l.push(s(a)),l})}static fromClass(e,r){return Ur.define((n,i)=>new e(n,i),r)}}class ww{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let r=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(r)}catch(n){if(Mi(r.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(r){Mi(e.state,r,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var r;if(!((r=this.value)===null||r===void 0)&&r.destroy)try{this.value.destroy()}catch(n){Mi(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const GB=Ne.define(),p7=Ne.define(),Bm=Ne.define(),KB=Ne.define(),r1=Ne.define(),YB=Ne.define();function H_(t,e){let r=t.state.facet(YB);if(!r.length)return r;let n=r.map(s=>s instanceof Function?s(t):s),i=[];return $t.spans(n,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,h=o-e.from,u=i;for(let f=a.length-1;f>=0;f--,l--){let d=a[f].spec.bidiIsolate,p;if(d==null&&(d=wee(e.text,c,h)),l>0&&u.length&&(p=u[u.length-1]).to==c&&p.direction==d)p.to=h,u=p.inner;else{let m={from:c,to:h,direction:d,inner:[]};u.push(m),u=m.inner}}}}),i}const XB=Ne.define();function m7(t){let e=0,r=0,n=0,i=0;for(let s of t.state.facet(XB)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(r=Math.max(r,o.right)),o.top!=null&&(n=Math.max(n,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:r,top:n,bottom:i}}const W0=Ne.define();class ks{constructor(e,r,n,i){this.fromA=e,this.toA=r,this.fromB=n,this.toB=i}join(e){return new ks(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let r=e.length,n=this;for(;r>0;r--){let i=e[r-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(r-1,1)}}return e.splice(r,0,n),e}static extendWithRanges(e,r){if(r.length==0)return e;let n=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],c=o-a,h=l?l.fromB:1e9;for(;s<r.length&&r[s]<h;){let u=r[s],f=r[s+1],d=Math.max(a,u),p=Math.min(h,f);if(d<=p&&new ks(d+c,p+c,d,p).addToSet(n),f>h)break;s+=2}if(!l)return n;new ks(l.fromA,l.toA,l.fromB,l.toB).addToSet(n),o=l.toA,a=l.toB}}}class Nb{constructor(e,r,n){this.view=e,this.state=r,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Jr.empty(this.startState.doc.length);for(let s of n)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new ks(s,o,a,l))),this.changedRanges=i}static create(e,r,n){return new Nb(e,r,n)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class q_ extends tr{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=lt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new qr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ks(0,0,0,e.state.doc.length)],0,null)}update(e){var r;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:c,toA:h})=>h<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((r=this.domChanged)===null||r===void 0)&&r.newSel?i=this.domChanged.newSel.head:!Eee(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?See(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:h}=this.hasComposition;n=new ks(c,h,e.changes.mapPos(c,-1),e.changes.mapPos(h,1)).addToSet(n.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Ie.ie||Ie.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=Mee(o,a,e.changes);return n=ks.extendWithRanges(n,l),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,r,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,r,n);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ie.chrome||Ie.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof ja&&o.widget instanceof r3&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,r,n){let i=n?n.range.addToSet(e.slice()):e,s=this.childCursor(r);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:h,toB:u}=a,f,d,p,m;if(n&&n.range.fromB<u&&n.range.toB>h){let T=Hp.build(this.view.state.doc,h,n.range.fromB,this.decorations,this.dynamicDecorationMap),S=Hp.build(this.view.state.doc,n.range.toB,u,this.decorations,this.dynamicDecorationMap);d=T.breakAtStart,p=T.openStart,m=S.openEnd;let w=this.compositionView(n);S.breakAtStart?w.breakAfter=1:S.content.length&&w.merge(w.length,w.length,S.content[0],!1,S.openStart,0)&&(w.breakAfter=S.content[0].breakAfter,S.content.shift()),T.content.length&&w.merge(0,0,T.content[T.content.length-1],!0,0,T.openEnd)&&T.content.pop(),f=T.content.concat(w).concat(S.content)}else({content:f,breakAtStart:d,openStart:p,openEnd:m}=Hp.build(this.view.state.doc,h,u,this.decorations,this.dynamicDecorationMap));let{i:g,off:y}=s.findPos(c,1),{i:b,off:x}=s.findPos(l,-1);_B(this,b,x,g,y,f,d,p,m)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let r of e.transactions)for(let n of r.effects)n.is(UB)&&(this.editContextFormatting=n.value)}compositionView(e){let r=new ro(e.text.nodeValue);r.flags|=8;for(let{deco:i}of e.marks)r=new el(i,[r],r.length);let n=new qr;return n.append(r,0),n}fixCompositionDOM(e){let r=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=tr.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},n=this.childPos(e.range.fromB,1),i=this.children[n.i];r(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)n=i.childPos(n.off,1),i=i.children[n.i],r(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,r=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,s=!i&&!(this.view.state.facet(Na)||this.dom.tabIndex>-1)&&p2(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||r||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Ie.gecko&&a.empty&&!this.hasComposition&&Cee(l)){let u=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(u,l.node.childNodes[l.offset]||null)),l=c=new Bn(u,0),o=!0}let h=this.view.observer.selectionRange;(o||!h.focusNode||(!zp(l.node,l.offset,h.anchorNode,h.anchorOffset)||!zp(c.node,c.offset,h.focusNode,h.focusOffset))&&!this.suppressWidgetCursorChange(h,a))&&(this.view.observer.ignore(()=>{Ie.android&&Ie.chrome&&this.dom.contains(h.focusNode)&&Aee(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let u=Dm(this.view.root);if(u)if(a.empty){if(Ie.gecko){let f=Tee(l.node,l.offset);if(f&&f!=3){let d=(f==1?CB:SB)(l.node,l.offset);d&&(l=new Bn(d.node,d.offset))}}u.collapse(l.node,l.offset),a.bidiLevel!=null&&u.caretBidiLevel!==void 0&&(u.caretBidiLevel=a.bidiLevel)}else if(u.extend){u.collapse(l.node,l.offset);try{u.extend(c.node,c.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),f.setEnd(c.node,c.offset),f.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new Bn(h.anchorNode,h.anchorOffset),this.impreciseHead=c.precise?null:new Bn(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(e,r){return this.hasComposition&&r.empty&&zp(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==r.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,r=e.state.selection.main,n=Dm(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!n||!r.empty||!r.assoc||!n.modify)return;let o=qr.find(this,r.head);if(!o)return;let a=o.posAtStart;if(r.head==a||r.head==a+o.length)return;let l=this.coordsAt(r.head,-1),c=this.coordsAt(r.head,1);if(!l||!c||l.bottom>c.top)return;let h=this.domAtPos(r.head+r.assoc);n.collapse(h.node,h.offset),n.modify("move",r.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=r.from&&n.collapse(i,s)}moveToLine(e){let r=this.dom,n;if(e.node!=r)return e;for(let i=e.offset;!n&&i<r.childNodes.length;i++){let s=tr.get(r.childNodes[i]);s instanceof qr&&(n=s.domAtPos(0))}for(let i=e.offset-1;!n&&i>=0;i--){let s=tr.get(r.childNodes[i]);s instanceof qr&&(n=s.domAtPos(s.length))}return n?new Bn(n.node,n.offset,!0):e}nearest(e){for(let r=e;r;){let n=tr.get(r);if(n&&n.rootView==this)return n;r=r.parentNode}return null}posFromDOM(e,r){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,r)+n.posAtStart}domAtPos(e){let{i:r,off:n}=this.childCursor().findPos(e,-1);for(;r<this.children.length-1;){let i=this.children[r];if(n<i.length||i instanceof qr)break;r++,n=0}return this.children[r].domAtPos(n)}coordsAt(e,r){let n=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!n||a instanceof qr&&!(n instanceof qr&&r>=0)))n=a,i=c;else if(n&&c==e&&l==e&&a instanceof ja&&Math.abs(r)<2){if(a.deco.startSide<0)break;o&&(n=null)}s=c}return n?n.coordsAt(e-i,r):null}coordsForChar(e){let{i:r,off:n}=this.childPos(e,1),i=this.children[r];if(!(i instanceof qr))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(n,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}n=l}if(!(i instanceof ro))return null;let s=wn(i.text,n);if(s==n)return null;let o=Jh(i.dom,n,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let r=[],{from:n,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==br.LTR;for(let c=0,h=0;h<this.children.length;h++){let u=this.children[h],f=c+u.length;if(f>i)break;if(c>=n){let d=u.dom.getBoundingClientRect();if(r.push(d.height),o){let p=u.dom.lastChild,m=p?Im(p):[];if(m.length){let g=m[m.length-1],y=l?g.right-d.left:d.right-g.left;y>a&&(a=y,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+u.breakAfter}return r}textDirectionAt(e){let{i:r}=this.childPos(e,1);return getComputedStyle(this.children[r].dom).direction=="rtl"?br.RTL:br.LTR}measureTextSize(){for(let s of this.children)if(s instanceof qr){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),r,n,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Im(e.firstChild)[0];r=e.getBoundingClientRect().height,n=s?s.width/27:7,i=s?s.height:r,e.remove()}),{lineHeight:r,charWidth:n,textHeight:i}}childCursor(e=this.length){let r=this.children.length;return r&&(e-=this.children[--r].length),new TB(this.children,e,r)}computeBlockGapDeco(){let e=[],r=this.view.viewState;for(let n=0,i=0;;i++){let s=i==r.viewports.length?null:r.viewports[i],o=s?s.from-1:this.length;if(o>n){let a=(r.lineBlockAt(o).bottom-r.lineBlockAt(n).top)/this.view.scaleY;e.push(lt.replace({widget:new r3(a),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!s)break;n=s.to+1}return lt.set(e)}updateDeco(){let e=1,r=this.view.state.facet(Bm).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),n=!1,i=this.view.state.facet(KB).map((s,o)=>{let a=typeof s=="function";return a&&(n=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=n,r.push($t.join(i))),this.decorations=[this.editContextFormatting,...r,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(jB))try{if(c(this.view,e.range,e))return!0}catch(h){Mi(this.view.state,h,"scroll handler")}let{range:r}=e,n=this.coordsAt(r.head,r.empty?r.assoc:r.head>r.anchor?-1:1),i;if(!n)return;!r.empty&&(i=this.coordsAt(r.anchor,r.anchor>r.head?-1:1))&&(n={left:Math.min(n.left,i.left),top:Math.min(n.top,i.top),right:Math.max(n.right,i.right),bottom:Math.max(n.bottom,i.bottom)});let s=m7(this.view),o={left:n.left-s.left,top:n.top-s.top,right:n.right+s.right,bottom:n.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;ree(this.view.scrollDOM,o,r.head<r.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==br.LTR)}lineHasWidget(e){let{i:r}=this.childCursor().findPos(e);if(r==this.children.length)return!1;let n=i=>i instanceof $a||i.children.some(n);return n(this.children[r])}}function Cee(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function JB(t,e){let r=t.observer.selectionRange;if(!r.focusNode)return null;let n=CB(r.focusNode,r.focusOffset),i=SB(r.focusNode,r.focusOffset),s=n||i;if(i&&n&&i.node!=n.node){let a=tr.get(i.node);if(!a||a instanceof ro&&a.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let l=tr.get(n.node);!l||l instanceof ro&&l.text!=n.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=n,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function See(t,e,r){let n=JB(t,r);if(!n)return null;let{node:i,from:s,to:o}=n,a=i.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(n.from,n.to)!=a)return null;let l=e.invertedDesc,c=new ks(l.mapPos(s),l.mapPos(o),s,o),h=[];for(let u=i.parentNode;;u=u.parentNode){let f=tr.get(u);if(f instanceof el)h.push({node:u,deco:f.mark});else{if(f instanceof qr||u.nodeName=="DIV"&&u.parentNode==t.contentDOM)return{range:c,text:i,marks:h,line:u};if(u!=t.contentDOM)h.push({node:u,deco:new e1({inclusive:!0,attributes:uee(u),tagName:u.tagName.toLowerCase()})});else return null}}}function Tee(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let _ee=class{constructor(){this.changes=[]}compareRange(e,r){m2(e,r,this.changes)}comparePoint(e,r){m2(e,r,this.changes)}boundChange(e){m2(e,e,this.changes)}};function Mee(t,e,r){let n=new _ee;return $t.compare(t,e,r,n),n.changes}function Aee(t,e){for(let r=t;r&&r!=e;r=r.assignedSlot||r.parentNode)if(r.nodeType==1&&r.contentEditable=="false")return!0;return!1}function Eee(t,e){let r=!1;return e&&t.iterChangedRanges((n,i)=>{n<e.to&&i>e.from&&(r=!0)}),r}function Lee(t,e,r=1){let n=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return oe.cursor(e);s==0?r=1:s==i.length&&(r=-1);let o=s,a=s;r<0?o=wn(i.text,s,!1):a=wn(i.text,s);let l=n(i.text.slice(o,a));for(;o>0;){let c=wn(i.text,o,!1);if(n(i.text.slice(c,o))!=l)break;o=c}for(;a<i.length;){let c=wn(i.text,a);if(n(i.text.slice(a,c))!=l)break;a=c}return oe.range(o+i.from,a+i.from)}function Oee(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Dee(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function kw(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function V_(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function W_(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function a3(t,e,r){let n,i,s,o,a=!1,l,c,h,u;for(let p=t.firstChild;p;p=p.nextSibling){let m=Im(p);for(let g=0;g<m.length;g++){let y=m[g];i&&kw(i,y)&&(y=V_(W_(y,i.bottom),i.top));let b=Oee(e,y),x=Dee(r,y);if(b==0&&x==0)return p.nodeType==3?j_(p,e,r):a3(p,e,r);(!n||o>x||o==x&&s>b)&&(n=p,i=y,s=b,o=x,a=b?e<y.left?g>0:g<m.length-1:!0),b==0?r>y.bottom&&(!h||h.bottom<y.bottom)?(l=p,h=y):r<y.top&&(!u||u.top>y.top)&&(c=p,u=y):h&&kw(h,y)?h=W_(h,y.bottom):u&&kw(u,y)&&(u=V_(u,y.top))}}if(h&&h.bottom>=r?(n=l,i=h):u&&u.top<=r&&(n=c,i=u),!n)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(n.nodeType==3)return j_(n,f,r);if(a&&n.contentEditable!="false")return a3(n,f,r);let d=Array.prototype.indexOf.call(t.childNodes,n)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:d}}function j_(t,e,r){let n=t.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<n;a++){let l=Jh(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let h=l[c];if(h.top==h.bottom)continue;o||(o=e-h.left);let u=(h.top>r?h.top-r:r-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&u<s){let f=e>=(h.left+h.right)/2,d=f;if(Ie.chrome||Ie.gecko){let p=Jh(t,a).getBoundingClientRect();Math.abs(p.left-h.right)<.1&&(d=!f)}if(u<=0)return{node:t,offset:a+(d?1:0)};i=a+(d?1:0),s=u}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function ZB(t,e,r,n=-1){var i,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:h,y:u}=e,f=u-a;if(f<0)return 0;if(f>c)return t.state.doc.length;for(let T=t.viewState.heightOracle.textHeight/2,S=!1;l=t.elementAtHeight(f),l.type!=oi.Text;)for(;f=n>0?l.bottom+T:l.top-T,!(f>=0&&f<=c);){if(S)return r?null:0;S=!0,n=-n}u=a+f;let d=l.from;if(d<t.viewport.from)return t.viewport.from==0?0:r?null:U_(t,o,l,h,u);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:r?null:U_(t,o,l,h,u);let p=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:p,g=m.elementFromPoint(h,u);g&&!t.contentDOM.contains(g)&&(g=null),g||(h=Math.max(o.left+1,Math.min(o.right-1,h)),g=m.elementFromPoint(h,u),g&&!t.contentDOM.contains(g)&&(g=null));let y,b=-1;if(g&&((i=t.docView.nearest(g))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let T=p.caretPositionFromPoint(h,u);T&&({offsetNode:y,offset:b}=T)}else if(p.caretRangeFromPoint){let T=p.caretRangeFromPoint(h,u);T&&({startContainer:y,startOffset:b}=T)}y&&(!t.contentDOM.contains(y)||Ie.safari&&Iee(y,b,h)||Ie.chrome&&Bee(y,b,h))&&(y=void 0),y&&(b=Math.min(Yo(y),b))}if(!y||!t.docView.dom.contains(y)){let T=qr.find(t.docView,d);if(!T)return f>l.top+l.height/2?l.to:l.from;({node:y,offset:b}=a3(T.dom,h,u))}let x=t.docView.nearest(y);if(!x)return null;if(x.isWidget&&((s=x.dom)===null||s===void 0?void 0:s.nodeType)==1){let T=x.dom.getBoundingClientRect();return e.y<T.top||e.y<=T.bottom&&e.x<=(T.left+T.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(y,b)+x.posAtStart}function U_(t,e,r,n,i){let s=Math.round((n-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&r.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((i-r.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(r.from,r.to);return r.from+Uk(o,s,t.state.tabSize)}function QB(t,e,r){let n,i=t;if(t.nodeType!=3||e!=(n=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=i.parentNode;if(!o||o.nodeName=="DIV")break;i=o}}return Jh(t,n-1,n).getBoundingClientRect().right>r}function Iee(t,e,r){return QB(t,e,r)}function Bee(t,e,r){if(e!=0)return QB(t,e,r);for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let n=t.nodeType==1?t.getBoundingClientRect():Jh(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return r-n.left>5}function l3(t,e,r){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){let i;for(let s of n.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==oi.Text&&(i.type!=s.type||(r<0?s.from<e:s.to>e)))&&(i=s)}}return i||n}return n}function Ree(t,e,r,n){let i=l3(t,e.head,e.assoc||-1),s=!n||i.type!=oi.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(i.from),l=t.posAtCoords({x:r==(a==br.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return oe.cursor(l,r?-1:1)}return oe.cursor(r?i.to:i.from,r?-1:1)}function G_(t,e,r,n){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,l=null;;){let c=vee(i,s,o,a,r),h=PB;if(!c){if(i.number==(r?t.state.doc.lines:1))return a;h=`
`,i=t.state.doc.line(i.number+(r?1:-1)),s=t.bidiSpans(i),c=t.visualLineSide(i,!r)}if(l){if(!l(h))return a}else{if(!n)return c;l=n(h)}a=c}}function Pee(t,e,r){let n=t.state.charCategorizer(e),i=n(r);return s=>{let o=n(s);return i==Cr.Space&&(i=o),i==o}}function Nee(t,e,r,n){let i=e.head,s=r?1:-1;if(i==(r?t.state.doc.length:0))return oe.cursor(i,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(i,e.assoc||-1),h=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let d=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-d.from))),a=(s<0?d.top:d.bottom)+h}let u=l.left+o,f=n??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let p=a+(f+d)*s,m=ZB(t,{x:u,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?m<i:m>i)){let g=t.docView.coordsForChar(m),y=!g||p<g.top?-1:1;return oe.cursor(m,y,void 0,o)}}}function qp(t,e,r){for(;;){let n=0;for(let i of t)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=n||r||(e-s<o-e?-1:1);e=l<0?s:o,n=l}});if(!n)return e}}function eR(t,e){let r=null;for(let n=0;n<e.ranges.length;n++){let i=e.ranges[n],s=null;if(i.empty){let o=qp(t,i.from,0);o!=i.from&&(s=oe.cursor(o,-1))}else{let o=qp(t,i.from,-1),a=qp(t,i.to,1);(o!=i.from||a!=i.to)&&(s=oe.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(r||(r=e.ranges.slice()),r[n]=s)}return r?oe.create(r,e.mainIndex):e}function Cw(t,e,r){let n=qp(t.state.facet(r1).map(i=>i(t)),r.from,e.head>r.from?-1:1);return n==r.from?r:oe.cursor(n,n<r.from?1:-1)}const j0="";class Fee{constructor(e,r){this.points=e,this.text="",this.lineSeparator=r.facet(Sr.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=j0}readRange(e,r){if(!e)return this;let n=e.parentNode;for(let i=e;;){this.findPointBefore(n,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==r)break;let a=tr.get(i),l=tr.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:Rb(i))||Rb(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&!zee(o,r)&&this.lineBreak(),i=o}return this.findPointBefore(n,r),this}readTextNode(e){let r=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,r.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=r.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(a=i.exec(r))&&(s=a.index,o=a[0].length),this.append(r.slice(n,s<0?r.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);n=s+o}}readNode(e){if(e.cmIgnore)return;let r=tr.get(e),n=r&&r.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let i=n.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,r){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==r&&(n.pos=this.text.length)}findPointInside(e,r){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+($ee(e,n.node,n.offset)?r:0))}}function $ee(t,e,r){for(;;){if(!e||r<Yo(e))return!1;if(e==t)return!0;r=Xh(e)+1,e=e.parentNode}}function zee(t,e){let r;for(;!(t==e||!t);t=t.nextSibling){let n=tr.get(t);if(!(n!=null&&n.isWidget||t.cmIgnore))return!1;n&&(r||(r=[])).push(n)}if(r)for(let n of r){let i=n.overrideDOMText;if(i!=null&&i.length)return!1}return!0}class K_{constructor(e,r){this.node=e,this.offset=r,this.pos=-1}}class Hee{constructor(e,r,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=r>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&r>-1)this.newSel=null;else if(r>-1&&(this.bounds=e.docView.domBoundsAround(r,n,0))){let a=s||o?[]:Vee(e),l=new Fee(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=Wee(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!Qk(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!Qk(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),h=e.viewport;if((Ie.ios||Ie.chrome)&&e.state.selection.main.empty&&l!=c&&(h.from>0||h.to<e.state.doc.length)){let u=Math.min(l,c),f=Math.max(l,c),d=h.from-u,p=h.to-f;(d==0||d==1||u==0)&&(p==0||p==-1||f==e.state.doc.length)&&(l=0,c=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(oe.range(c,l)):this.newSel=oe.single(c,l)}}}function tR(t,e){let r,{newSel:n}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,c=null;(s===8||Ie.android&&e.text.length<a-o)&&(l=i.to,c="end");let h=rR(t.state.doc.sliceString(o,a,j0),e.text,l-o,c);h&&(Ie.chrome&&s==13&&h.toB==h.from+2&&e.text.slice(h.from,h.toB)==j0+j0&&h.toB--,r={from:o+h.from,to:o+h.toA,insert:qt.of(e.text.slice(h.from,h.toB).split(j0))})}else n&&(!t.hasFocus&&t.state.facet(Na)||n.main.eq(i))&&(n=null);if(!r&&!n)return!1;if(!r&&e.typeOver&&!i.empty&&n&&n.main.empty?r={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(Ie.mac||Ie.android)&&r&&r.from==r.to&&r.from==i.head-1&&/^\. ?$/.test(r.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(n&&r.insert.length==2&&(n=oe.single(n.main.anchor-1,n.main.head-1)),r={from:r.from,to:r.to,insert:qt.of([r.insert.toString().replace("."," ")])}):r&&r.from>=i.from&&r.to<=i.to&&(r.from!=i.from||r.to!=i.to)&&i.to-i.from-(r.to-r.from)<=4?r={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,r.from).append(r.insert).append(t.state.doc.slice(r.to,i.to))}:t.state.doc.lineAt(i.from).to<i.to&&t.docView.lineHasWidget(i.to)&&t.inputState.insertingTextAt>Date.now()-50?r={from:i.from,to:i.to,insert:t.state.toText(t.inputState.insertingText)}:Ie.chrome&&r&&r.from==r.to&&r.from==i.head&&r.insert.toString()==`
 `&&t.lineWrapping&&(n&&(n=oe.single(n.main.anchor-1,n.main.head-1)),r={from:i.from,to:i.to,insert:qt.of([" "])}),r)return g7(t,r,n,s);if(n&&!n.main.eq(i)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin,a=="select.pointer"&&(n=eR(t.state.facet(r1).map(l=>l(t)),n))),t.dispatch({selection:n,scrollIntoView:o,userEvent:a}),!0}else return!1}function g7(t,e,r,n=-1){if(Ie.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(Ie.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&cf(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||n==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&cf(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&cf(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=qee(t,e,r));return t.state.facet(HB).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function qee(t,e,r){let n,i=t.state,s=i.selection.main,o=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let l=e.from<s.from?-1:1,c=l<0?s.from:s.to,h=qp(i.facet(r1).map(u=>u(t)),c,l);e.from==h&&(o=h)}if(o>-1)n={changes:e,selection:oe.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!r||r.main.empty&&r.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let l=s.from<e.from?i.sliceDoc(s.from,e.from):"",c=s.to>e.to?i.sliceDoc(e.to,s.to):"";n=i.replaceSelection(t.state.toText(l+e.insert.sliceString(0,void 0,t.state.lineBreak)+c))}else{let l=i.changes(e),c=r&&r.main.to<=l.newLength?r.main:void 0;if(i.selection.ranges.length>1&&(t.inputState.composing>=0||t.inputState.compositionPendingChange)&&e.to<=s.to+10&&e.to>=s.to-10){let h=t.state.sliceDoc(e.from,e.to),u,f=r&&JB(t,r.main.head);if(f){let p=e.insert.length-(e.to-e.from);u={from:f.from,to:f.to-p}}else u=t.state.doc.lineAt(s.head);let d=s.to-e.to;n=i.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:l,range:c||p.map(l)};let m=p.to-d,g=m-h.length;if(t.state.sliceDoc(g,m)!=h||m>=u.from&&g<=u.to)return{range:p};let y=i.changes({from:g,to:m,insert:e.insert}),b=p.to-s.to;return{changes:y,range:c?oe.range(Math.max(0,c.anchor+b),Math.max(0,c.head+b)):p.map(y)}})}else n={changes:l,selection:c&&i.selection.replaceRange(c)}}let a="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,a+=".compose",t.inputState.compositionFirstChange&&(a+=".start",t.inputState.compositionFirstChange=!1)),i.update(n,{userEvent:a,scrollIntoView:!0})}function rR(t,e,r,n){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(n=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.length<e.length){let l=r<=s&&r>=o?s-r:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function Vee(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}=t.observer.selectionRange;return r&&(e.push(new K_(r,n)),(i!=r||s!=n)&&e.push(new K_(i,s))),e}function Wee(t,e){if(t.length==0)return null;let r=t[0].pos,n=t.length==2?t[1].pos:r;return r>-1&&n>-1?oe.single(r+e,n+e):null}let jee=class{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ie.safari&&e.contentDOM.addEventListener("input",()=>null),Ie.gecko&&ate(e.contentDOM.ownerDocument)}handleEvent(e){!Qee(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,r){let n=this.handlers[e];if(n){for(let i of n.observers)i(this.view,r);for(let i of n.handlers){if(r.defaultPrevented)break;if(i(this.view,r)){r.preventDefault();break}}}}ensureHandlers(e){let r=Uee(e),n=this.handlers,i=this.view.contentDOM;for(let s in r)if(s!="scroll"){let o=!r[s].handlers.length,a=n[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in n)s!="scroll"&&!r[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=r}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&iR.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ie.android&&Ie.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let r;return Ie.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((r=nR.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||Gee.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=r||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let r=this.pendingIOSKey;return!r||r.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,cf(this.view.contentDOM,r.key,r.keyCode,r instanceof KeyboardEvent?r:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:Ie.safari&&!Ie.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function Y_(t,e){return(r,n)=>{try{return e.call(t,n,r)}catch(i){Mi(r.state,i)}}}function Uee(t){let e=Object.create(null);function r(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of t){let i=n.spec,s=i&&i.plugin.domEventHandlers,o=i&&i.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&r(a).handlers.push(Y_(n.value,l))}if(o)for(let a in o){let l=o[a];l&&r(a).observers.push(Y_(n.value,l))}}for(let n in no)r(n).handlers.push(no[n]);for(let n in Ts)r(n).observers.push(Ts[n]);return e}const nR=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Gee="dthko",iR=[16,17,18,20,91,92,224,225],oy=6;function ay(t){return Math.max(0,t)*.7+8}function Kee(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class Yee{constructor(e,r,n,i){this.view=e,this.startEvent=r,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=r,this.scrollParents=nee(e.contentDOM),this.atoms=e.state.facet(r1).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=r.shiftKey,this.multiple=e.state.facet(Sr.allowMultipleSelections)&&Xee(e,r),this.dragging=Zee(e,r)&&aR(r)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Kee(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let r=0,n=0,i=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=m7(this.view);e.clientX-l.left<=i+oy?r=-ay(i-e.clientX):e.clientX+l.right>=o-oy&&(r=ay(e.clientX-o)),e.clientY-l.top<=s+oy?n=-ay(s-e.clientY):e.clientY+l.bottom>=a-oy&&(n=ay(e.clientY-a)),this.setScrollSpeed(r,n)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,r){this.scrollSpeed={x:e,y:r},e||r?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:r}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),r&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=r,r=0),(e||r)&&this.view.win.scrollBy(e,r),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:r}=this,n=eR(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(r.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(r=>r.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Xee(t,e){let r=t.state.facet(NB);return r.length?r[0](e):Ie.mac?e.metaKey:e.ctrlKey}function Jee(t,e){let r=t.state.facet(FB);return r.length?r[0](e):Ie.mac?!e.altKey:!e.ctrlKey}function Zee(t,e){let{main:r}=t.state.selection;if(r.empty)return!1;let n=Dm(t.root);if(!n||n.rangeCount==0)return!0;let i=n.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Qee(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target,n;r!=t.contentDOM;r=r.parentNode)if(!r||r.nodeType==11||(n=tr.get(r))&&n.ignoreEvent(e))return!1;return!0}const no=Object.create(null),Ts=Object.create(null),sR=Ie.ie&&Ie.ie_version<15||Ie.ios&&Ie.webkit_version<604;function ete(t){let e=t.dom.parentNode;if(!e)return;let r=e.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{t.focus(),r.remove(),oR(t,r.value)},50)}function Sv(t,e,r){for(let n of t.facet(e))r=n(r,t);return r}function oR(t,e){e=Sv(t.state,f7,e);let{state:r}=t,n,i=1,s=r.toText(e),o=s.lines==r.selection.ranges.length;if(c3!=null&&r.selection.ranges.every(l=>l.empty)&&c3==s.toString()){let l=-1;n=r.changeByRange(c=>{let h=r.doc.lineAt(c.from);if(h.from==l)return{range:c};l=h.from;let u=r.toText((o?s.line(i++).text:e)+r.lineBreak);return{changes:{from:h.from,insert:u},range:oe.cursor(c.from+u.length)}})}else o?n=r.changeByRange(l=>{let c=s.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:oe.cursor(l.from+c.length)}}):n=r.replaceSelection(s);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}Ts.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};no.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Ts.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Ts.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};no.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let r=null;for(let n of t.state.facet($B))if(r=n(t,e),r)break;if(!r&&e.button==0&&(r=nte(t,e)),r){let n=!t.hasFocus;t.inputState.startMouseSelection(new Yee(t,e,r,n)),n&&t.observer.ignore(()=>{vB(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function X_(t,e,r,n){if(n==1)return oe.cursor(e,r);if(n==2)return Lee(t.state,e,r);{let i=qr.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,oe.range(o,a)}}let J_=(t,e,r)=>e>=r.top&&e<=r.bottom&&t>=r.left&&t<=r.right;function tte(t,e,r,n){let i=qr.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&J_(r,n,o))return-1;let a=i.coordsAt(s,1);return a&&J_(r,n,a)?1:o&&o.bottom>=n?-1:1}function Z_(t,e){let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:r,bias:tte(t,r,e.clientX,e.clientY)}}const rte=Ie.ie&&Ie.ie_version<=11;let Q_=null,eM=0,tM=0;function aR(t){if(!rte)return t.detail;let e=Q_,r=tM;return Q_=t,tM=Date.now(),eM=!e||r>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(eM+1)%3:1}function nte(t,e){let r=Z_(t,e),n=aR(e),i=t.state.selection;return{update(s){s.docChanged&&(r.pos=s.changes.mapPos(r.pos),i=i.map(s.changes))},get(s,o,a){let l=Z_(t,s),c,h=X_(t,l.pos,l.bias,n);if(r.pos!=l.pos&&!o){let u=X_(t,r.pos,r.bias,n),f=Math.min(u.from,h.from),d=Math.max(u.to,h.to);h=f<h.from?oe.range(f,d):oe.range(d,f)}return o?i.replaceRange(i.main.extend(h.from,h.to)):a&&n==1&&i.ranges.length>1&&(c=ite(i,l.pos))?c:a?i.addRange(h):oe.create([h])}}}function ite(t,e){for(let r=0;r<t.ranges.length;r++){let{from:n,to:i}=t.ranges[r];if(n<=e&&i>=e)return oe.create(t.ranges.slice(0,r).concat(t.ranges.slice(r+1)),t.mainIndex==r?0:t.mainIndex-(t.mainIndex>r?1:0))}return null}no.dragstart=(t,e)=>{let{selection:{main:r}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=r.to||o<=r.from)&&(r=oe.range(s,o))}}let{inputState:n}=t;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=r,e.dataTransfer&&(e.dataTransfer.setData("Text",Sv(t.state,d7,t.state.sliceDoc(r.from,r.to))),e.dataTransfer.effectAllowed="copyMove"),!1};no.dragend=t=>(t.inputState.draggedContent=null,!1);function rM(t,e,r,n){if(r=Sv(t.state,f7,r),!r)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=n&&s&&Jee(t,e)?{from:s.from,to:s.to}:null,a={from:i,insert:r},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}no.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let r=e.dataTransfer.files;if(r&&r.length){let n=Array(r.length),i=0,s=()=>{++i==r.length&&rM(t,e,n.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<r.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(n[o]=a.result),s()},a.readAsText(r[o])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return rM(t,e,n,!0),!0}return!1};no.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let r=sR?null:e.clipboardData;return r?(oR(t,r.getData("text/plain")||r.getData("text/uri-list")),!0):(ete(t),!1)};function ste(t,e){let r=t.dom.parentNode;if(!r)return;let n=r.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),t.focus()},50)}function ote(t){let e=[],r=[],n=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),r.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),r.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}n=!0}return{text:Sv(t,d7,e.join(t.lineBreak)),ranges:r,linewise:n}}let c3=null;no.copy=no.cut=(t,e)=>{let{text:r,ranges:n,linewise:i}=ote(t.state);if(!r&&!i)return!1;c3=i?r:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let s=sR?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",r),!0):(ste(t,r),!1)};const lR=fl.define();function cR(t,e){let r=[];for(let n of t.facet(qB)){let i=n(t,e);i&&r.push(i)}return r.length?t.update({effects:r,annotations:lR.of(!0)}):null}function hR(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let r=cR(t.state,e);r?t.dispatch(r):t.update([])}},10)}Ts.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),hR(t)};Ts.blur=t=>{t.observer.clearSelectionRange(),hR(t)};Ts.compositionstart=Ts.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Ts.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Ie.chrome&&Ie.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Ts.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};no.beforeinput=(t,e)=>{var r,n;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(t.inputState.insertingText=e.data,t.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(r=e.dataTransfer)===null||r===void 0?void 0:r.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return g7(t,{from:l,to:c,insert:t.state.toText(s)},null),!0}}let i;if(Ie.chrome&&Ie.android&&(i=nR.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Ie.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Ie.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Ts.compositionend(t,e),20),!1};const nM=new Set;function ate(t){nM.has(t)||(nM.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const iM=["pre-wrap","normal","pre-line","break-spaces"];let fd=!1;function sM(){fd=!1}class lte{constructor(e){this.lineWrapping=e,this.doc=qt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,r){let n=this.doc.lineAt(r).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((r-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return iM.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let r=!1;for(let n=0;n<e.length;n++){let i=e[n];i<0?n++:this.heightSamples[Math.floor(i*10)]||(r=!0,this.heightSamples[Math.floor(i*10)]=!0)}return r}refresh(e,r,n,i,s,o){let a=iM.indexOf(e)>-1,l=Math.round(r)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=r,this.charWidth=n,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let h=o[c];h<0?c++:this.heightSamples[Math.floor(h*10)]=!0}}return l}}class cte{constructor(e,r){this.from=e,this.heights=r,this.index=0}get more(){return this.index<this.heights.length}}class Po{constructor(e,r,n,i,s){this.from=e,this.length=r,this.top=n,this.height=i,this._content=s}get type(){return typeof this._content=="number"?oi.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof oc?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let r=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Po(this.from,this.length+e.length,this.top,this.height+e.height,r)}}var yr=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(yr||(yr={}));const g2=.001;class ai{constructor(e,r,n=2){this.length=e,this.height=r,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>g2&&(fd=!0),this.height=e)}replace(e,r,n){return ai.of(n)}decomposeLeft(e,r){r.push(this)}decomposeRight(e,r){r.push(this)}applyChanges(e,r,n,i){let s=this,o=n.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:h,toB:u}=i[a],f=s.lineAt(l,yr.ByPosNoHeight,n.setDoc(r),0,0),d=f.to>=c?f:s.lineAt(c,yr.ByPosNoHeight,n,0,0);for(u+=d.to-c,c=d.to;a>0&&f.from<=i[a-1].toA;)l=i[a-1].fromA,h=i[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,yr.ByPosNoHeight,n,0,0));h+=f.from-l,l=f.from;let p=y7.build(n.setDoc(o),e,h,u);s=Fb(s,s.replace(l,c,p))}return s.updateHeight(n,0)}static empty(){return new Gi(0,0)}static of(e){if(e.length==1)return e[0];let r=0,n=e.length,i=0,s=0;for(;;)if(r==n)if(i>s*2){let a=e[r-1];a.break?e.splice(--r,1,a.left,null,a.right):e.splice(--r,1,a.left,a.right),n+=1+a.break,i-=a.size}else if(s>i*2){let a=e[n];a.break?e.splice(n,1,a.left,null,a.right):e.splice(n,1,a.left,a.right),n+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[r++];a&&(i+=a.size)}else{let a=e[--n];a&&(s+=a.size)}let o=0;return e[r-1]==null?(o=1,r--):e[r]==null&&(o=1,n++),new hte(ai.of(e.slice(0,r)),o,ai.of(e.slice(n)))}}function Fb(t,e){return t==e?t:(t.constructor!=e.constructor&&(fd=!0),e)}ai.prototype.size=1;class uR extends ai{constructor(e,r,n){super(e,r),this.deco=n}blockAt(e,r,n,i){return new Po(i,this.length,n,this.height,this.deco||0)}lineAt(e,r,n,i,s){return this.blockAt(0,n,i,s)}forEachLine(e,r,n,i,s,o){e<=s+this.length&&r>=s&&o(this.blockAt(0,n,i,s))}updateHeight(e,r=0,n=!1,i){return i&&i.from<=r&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Gi extends uR{constructor(e,r){super(e,r,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,r,n,i){return new Po(i,this.length,n,this.height,this.breaks)}replace(e,r,n){let i=n[0];return n.length==1&&(i instanceof Gi||i instanceof gn&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof gn?i=new Gi(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):ai.of(n)}updateHeight(e,r=0,n=!1,i){return i&&i.from<=r&&i.more?this.setHeight(i.heights[i.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class gn extends ai{constructor(e){super(e,0)}heightMetrics(e,r){let n=e.doc.lineAt(r).number,i=e.doc.lineAt(r+this.length).number,s=i-n+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:n,lastLine:i,perLine:o,perChar:a}}blockAt(e,r,n,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(r,i);if(r.lineWrapping){let c=i+(e<r.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),h=r.doc.lineAt(c),u=a+h.length*l,f=Math.max(n,e-u/2);return new Po(h.from,h.length,f,u,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-n)/a))),{from:h,length:u}=r.doc.line(s+c);return new Po(h,u,n+a*c,a,0)}}lineAt(e,r,n,i,s){if(r==yr.ByHeight)return this.blockAt(e,n,i,s);if(r==yr.ByPosNoHeight){let{from:d,to:p}=n.doc.lineAt(e);return new Po(d,p-d,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(n,s),c=n.doc.lineAt(e),h=a+c.length*l,u=c.number-o,f=i+a*u+l*(c.from-s-u);return new Po(c.from,c.length,Math.max(i,Math.min(f,i+this.height-h)),h,0)}forEachLine(e,r,n,i,s,o){e=Math.max(e,s),r=Math.min(r,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(n,s);for(let h=e,u=i;h<=r;){let f=n.doc.lineAt(h);if(h==e){let p=f.number-a;u+=l*p+c*(e-s-p)}let d=l+c*f.length;o(new Po(f.from,f.length,u,d,0)),u+=d,h=f.to+1}}replace(e,r,n){let i=this.length-r;if(i>0){let s=n[n.length-1];s instanceof gn?n[n.length-1]=new gn(s.length+i):n.push(null,new gn(i-1))}if(e>0){let s=n[0];s instanceof gn?n[0]=new gn(e+s.length):n.unshift(new gn(e-1),null)}return ai.of(n)}decomposeLeft(e,r){r.push(new gn(e-1),null)}decomposeRight(e,r){r.push(null,new gn(this.length-e-1))}updateHeight(e,r=0,n=!1,i){let s=r+this.length;if(i&&i.from<=r+this.length&&i.more){let o=[],a=Math.max(r,i.from),l=-1;for(i.from>r&&o.push(new gn(i.from-r-1).updateHeight(e,r));a<=s&&i.more;){let h=e.doc.lineAt(a).length;o.length&&o.push(null);let u=i.heights[i.index++];l==-1?l=u:Math.abs(u-l)>=g2&&(l=-2);let f=new Gi(h,u);f.outdated=!1,o.push(f),a+=h+1}a<=s&&o.push(null,new gn(s-a).updateHeight(e,a));let c=ai.of(o);return(l<0||Math.abs(c.height-this.height)>=g2||Math.abs(l-this.heightMetrics(e,r).perLine)>=g2)&&(fd=!0),Fb(this,c)}else(n||this.outdated)&&(this.setHeight(e.heightForGap(r,r+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class hte extends ai{constructor(e,r,n){super(e.length+r+n.length,e.height+n.height,r|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,r,n,i){let s=n+this.left.height;return e<s?this.left.blockAt(e,r,n,i):this.right.blockAt(e,r,s,i+this.left.length+this.break)}lineAt(e,r,n,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=r==yr.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,r,n,i,s):this.right.lineAt(e,r,n,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let h=r==yr.ByPosNoHeight?yr.ByPosNoHeight:yr.ByPos;return l?c.join(this.right.lineAt(a,h,n,o,a)):this.left.lineAt(a,h,n,i,s).join(c)}forEachLine(e,r,n,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,r,n,i,s,o),r>=l&&this.right.forEachLine(e,r,n,a,l,o);else{let c=this.lineAt(l,yr.ByPos,n,i,s);e<c.from&&this.left.forEachLine(e,c.from-1,n,i,s,o),c.to>=e&&c.from<=r&&o(c),r>c.to&&this.right.forEachLine(c.to+1,r,n,a,l,o)}}replace(e,r,n){let i=this.left.length+this.break;if(r<i)return this.balanced(this.left.replace(e,r,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,r-i,n));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of n)s.push(a);if(e>0&&oM(s,o-1),r<this.length){let a=s.length;this.decomposeRight(r,s),oM(s,a)}return ai.of(s)}decomposeLeft(e,r){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,r);r.push(this.left),this.break&&(n++,e>=n&&r.push(null)),e>n&&this.right.decomposeLeft(e-n,r)}decomposeRight(e,r){let n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,r);e<n&&this.left.decomposeRight(e,r),this.break&&e<i&&r.push(null),r.push(this.right)}balanced(e,r){return e.size>2*r.size||r.size>2*e.size?ai.of(this.break?[e,null,r]:[e,r]):(this.left=Fb(this.left,e),this.right=Fb(this.right,r),this.setHeight(e.height+r.height),this.outdated=e.outdated||r.outdated,this.size=e.size+r.size,this.length=e.length+this.break+r.length,this)}updateHeight(e,r=0,n=!1,i){let{left:s,right:o}=this,a=r+s.length+this.break,l=null;return i&&i.from<=r+s.length&&i.more?l=s=s.updateHeight(e,r,n,i):s.updateHeight(e,r,n),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,n,i):o.updateHeight(e,a,n),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function oM(t,e){let r,n;t[e]==null&&(r=t[e-1])instanceof gn&&(n=t[e+1])instanceof gn&&t.splice(e-1,3,new gn(r.length+1+n.length))}const ute=5;class y7{constructor(e,r){this.pos=e,this.oracle=r,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,r){if(this.lineStart>-1){let n=Math.min(r,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Gi?i.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new Gi(n-this.pos,-1)),this.writtenTo=n,r>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=r}point(e,r,n){if(e<r||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,s=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=r-e;n.block?this.addBlock(new uR(o,i,n)):(o||s||i>=ute)&&this.addLineDeco(i,s,o)}else r>e&&this.span(e,r);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:r}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=r,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Gi(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,r){let n=new gn(r-e);return this.oracle.doc.lineAt(e).to==r&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Gi)return e;let r=new Gi(0,-1);return this.nodes.push(r),r}addBlock(e){this.enterLine();let r=e.deco;r&&r.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,r&&r.endSide>0&&(this.covering=e)}addLineDeco(e,r,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=r,this.writtenTo=this.pos=this.pos+n}finish(e){let r=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(r instanceof Gi)&&!this.isCovered?this.nodes.push(new Gi(0,-1)):(this.writtenTo<this.pos||r==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let i of this.nodes)i instanceof Gi&&i.updateHeight(this.oracle,n),n+=i?i.length:1;return this.nodes}static build(e,r,n,i){let s=new y7(n,e);return $t.spans(r,n,i,s,0),s.finish(n)}}function fte(t,e,r){let n=new dte;return $t.compare(t,e,r,n,0),n.changes}class dte{constructor(){this.changes=[]}compareRange(){}comparePoint(e,r,n,i){(e<r||n&&n.heightRelevant||i&&i.heightRelevant)&&m2(e,r,this.changes,5)}}function pte(t,e){let r=t.getBoundingClientRect(),n=t.ownerDocument,i=n.defaultView||window,s=Math.max(0,r.left),o=Math.min(i.innerWidth,r.right),a=Math.max(0,r.top),l=Math.min(i.innerHeight,r.bottom);for(let c=t.parentNode;c&&c!=n.body;)if(c.nodeType==1){let h=c,u=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&u.overflow!="visible"){let f=h.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=Math.min(c==t.parentNode?i.innerHeight:l,f.bottom)}c=u.position=="absolute"||u.position=="fixed"?h.offsetParent:h.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-r.left,right:Math.max(s,o)-r.left,top:a-(r.top+e),bottom:Math.max(a,l)-(r.top+e)}}function mte(t){let e=t.getBoundingClientRect(),r=t.ownerDocument.defaultView||window;return e.left<r.innerWidth&&e.right>0&&e.top<r.innerHeight&&e.bottom>0}function gte(t,e){let r=t.getBoundingClientRect();return{left:0,right:r.right-r.left,top:e,bottom:r.bottom-(r.top+e)}}class Sw{constructor(e,r,n,i){this.from=e,this.to=r,this.size=n,this.displaySize=i}static same(e,r){if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],s=r[n];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,r){return lt.replace({widget:new yte(this.displaySize*(r?e.scaleY:e.scaleX),r)}).range(this.from,this.to)}}class yte extends dl{constructor(e,r){super(),this.size=e,this.vertical=r}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class aM{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=lM,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=br.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let r=e.facet(p7).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new lte(r),this.stateDeco=e.facet(Bm).filter(n=>typeof n!="function"),this.heightMap=ai.empty().applyChanges(this.stateDeco,qt.empty,this.heightOracle.setDoc(e.doc),[new ks(0,0,0,e.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=lt.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:r}=this.state.selection;for(let n=0;n<=1;n++){let i=n?r.head:r.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new ly(s,o))}}return this.viewports=e.sort((n,i)=>n.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?lM:new b7(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(U0(e,this.scaler))})}update(e,r=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Bm).filter(h=>typeof h!="function");let i=e.changedRanges,s=ks.extendWithRanges(i,fte(n,this.stateDeco,e?e.changes:Jr.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);sM(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||fd)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(r&&(r.range.head<l.from||r.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,r));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),r&&(this.scrollTarget=r),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(WB)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let r=e.contentDOM,n=window.getComputedStyle(r),i=this.heightOracle,s=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?br.RTL:br.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=r.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,h=0;if(a.width&&a.height){let{scaleX:T,scaleY:S}=xB(r,a);(T>.005&&Math.abs(this.scaleX-T)>.005||S>.005&&Math.abs(this.scaleY-S)>.005)&&(this.scaleX=T,this.scaleY=S,c|=16,o=l=!0)}let u=(parseInt(n.paddingTop)||0)*this.scaleY,f=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=u||this.paddingBottom!=f)&&(this.paddingTop=u,this.paddingBottom=f,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=kB(e.scrollDOM);let p=(this.printing?gte:pte)(r,this.paddingTop),m=p.top-this.pixelViewport.top,g=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(l=!0)),!this.inView&&!this.scrollTarget&&!mte(e.dom))return 0;let b=a.width;if((this.contentDOMWidth!=b||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let T=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(T)&&(o=!0),o||i.lineWrapping&&Math.abs(b-this.contentDOMWidth)>i.charWidth){let{lineHeight:S,charWidth:w,textHeight:_}=e.docView.measureTextSize();o=S>0&&i.refresh(s,S,w,_,Math.max(5,b/w),T),o&&(e.docView.minWidth=0,c|=16)}m>0&&g>0?h=Math.max(m,g):m<0&&g<0&&(h=Math.min(m,g)),sM();for(let S of this.viewports){let w=S.from==this.viewport.from?T:e.docView.measureVisibleLineHeights(S);this.heightMap=(o?ai.empty().applyChanges(this.stateDeco,qt.empty,this.heightOracle,[new ks(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new cte(S.from,w))}fd&&(c|=2)}let x=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(h,this.scrollTarget),c|=this.updateForViewport()),(c&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,r){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new ly(i.lineAt(o-n*1e3,yr.ByHeight,s,0,0).from,i.lineAt(a+(1-n)*1e3,yr.ByHeight,s,0,0).to);if(r){let{head:c}=r.range;if(c<l.from||c>l.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=i.lineAt(c,yr.ByPos,s,0,0),f;r.y=="center"?f=(u.top+u.bottom)/2-h/2:r.y=="start"||r.y=="nearest"&&c<l.from?f=u.top:f=u.bottom-h,l=new ly(i.lineAt(f-1e3/2,yr.ByHeight,s,0,0).from,i.lineAt(f+h+1e3/2,yr.ByHeight,s,0,0).to)}}return l}mapViewport(e,r){let n=r.mapPos(e.from,-1),i=r.mapPos(e.to,1);return new ly(this.heightMap.lineAt(n,yr.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,yr.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:r},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,yr.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(r,yr.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-n,250)))&&(r==this.state.doc.length||s>=a+Math.max(10,Math.min(n,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,r){if(!e.length||r.empty)return e;let n=[];for(let i of e)r.touchesRange(i.from,i.to)||n.push(new Sw(r.mapPos(i.from),r.mapPos(i.to),i.size,i.displaySize));return n}ensureLineGaps(e,r){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=br.LTR&&!n)return[];let a=[],l=(h,u,f,d)=>{if(u-h<s)return;let p=this.state.selection.main,m=[p.from];p.empty||m.push(p.to);for(let y of m)if(y>h&&y<u){l(h,y-10,f,d),l(y+10,u,f,d);return}let g=xte(e,y=>y.from>=f.from&&y.to<=f.to&&Math.abs(y.from-h)<s&&Math.abs(y.to-u)<s&&!m.some(b=>y.from<b&&y.to>b));if(!g){if(u<f.to&&r&&n&&r.visibleRanges.some(x=>x.from<=u&&x.to>=u)){let x=r.moveToLineBoundary(oe.cursor(u),!1,!0).head;x>h&&(u=x)}let y=this.gapSize(f,h,u,d),b=n||y<2e6?y:2e6;g=new Sw(h,u,y,b)}a.push(g)},c=h=>{if(h.length<o||h.type!=oi.Text)return;let u=bte(h.from,h.to,this.stateDeco);if(u.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(n){let m=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,y;if(f!=null){let b=hy(u,f),x=((this.visibleBottom-this.visibleTop)/2+m)/h.height;g=b-x,y=b+x}else g=(this.visibleTop-h.top-m)/h.height,y=(this.visibleBottom-h.top+m)/h.height;d=cy(u,g),p=cy(u,y)}else{let m=u.total*this.heightOracle.charWidth,g=i*this.heightOracle.charWidth,y=0;if(m>2e6)for(let w of e)w.from>=h.from&&w.from<h.to&&w.size!=w.displaySize&&w.from*this.heightOracle.charWidth+y<this.pixelViewport.left&&(y=w.size-w.displaySize);let b=this.pixelViewport.left+y,x=this.pixelViewport.right+y,T,S;if(f!=null){let w=hy(u,f),_=((x-b)/2+g)/m;T=w-_,S=w+_}else T=(b-g)/m,S=(x+g)/m;d=cy(u,T),p=cy(u,S)}d>h.from&&l(h.from,d,h,u),p<h.to&&l(p,h.to,h,u)};for(let h of this.viewportLines)Array.isArray(h.type)?h.type.forEach(c):c(h);return a}gapSize(e,r,n,i){let s=hy(i,n)-hy(i,r);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Sw.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=lt.set(e.map(r=>r.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let r=this.stateDeco;this.lineGaps.length&&(r=r.concat(this.lineGapDeco));let n=[];$t.spans(r,this.viewport.from,this.viewport.to,{span(s,o){n.push({from:s,to:o})},point(){}},20);let i=0;if(n.length!=this.visibleRanges.length)i=12;else for(let s=0;s<n.length&&!(i&8);s++){let o=this.visibleRanges[s],a=n[s];(o.from!=a.from||o.to!=a.to)&&(i|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(i|=8))}return this.visibleRanges=n,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(r=>r.from<=e&&r.to>=e)||U0(this.heightMap.lineAt(e,yr.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(r=>r.top<=e&&r.bottom>=e)||U0(this.heightMap.lineAt(this.scaler.fromDOM(e),yr.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let r=this.lineBlockAtHeight(e+8);return r.from>=this.viewport.from||this.viewportLines[0].top-e>200?r:this.viewportLines[0]}elementAtHeight(e){return U0(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ly{constructor(e,r){this.from=e,this.to=r}}function bte(t,e,r){let n=[],i=t,s=0;return $t.spans(r,t,e,{span(){},point(o,a){o>i&&(n.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(n.push({from:i,to:e}),s+=e-i),{total:s,ranges:n}}function cy({total:t,ranges:e},r){if(r<=0)return e[0].from;if(r>=1)return e[e.length-1].to;let n=Math.floor(t*r);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(n<=a)return s+n;n-=a}}function hy(t,e){let r=0;for(let{from:n,to:i}of t.ranges){if(e<=i){r+=e-n;break}r+=i-n}return r/t.total}function xte(t,e){for(let r of t)if(e(r))return r}const lM={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class b7{constructor(e,r,n){let i=0,s=0,o=0;this.viewports=n.map(({from:a,to:l})=>{let c=r.lineAt(a,yr.ByPos,e,0,0).top,h=r.lineAt(l,yr.ByPos,e,0,0).bottom;return i+=h-c,{from:a,to:l,top:c,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(r.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let r=0,n=0,i=0;;r++){let s=r<this.viewports.length?this.viewports[r]:null;if(!s||e<s.top)return i+(e-n)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);n=s.bottom,i=s.domBottom}}fromDOM(e){for(let r=0,n=0,i=0;;r++){let s=r<this.viewports.length?this.viewports[r]:null;if(!s||e<s.domTop)return n+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);n=s.bottom,i=s.domBottom}}eq(e){return e instanceof b7?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((r,n)=>r.from==e.viewports[n].from&&r.to==e.viewports[n].to):!1}}function U0(t,e){if(e.scale==1)return t;let r=e.toDOM(t.top),n=e.toDOM(t.bottom);return new Po(t.from,t.length,r,n-r,Array.isArray(t._content)?t._content.map(i=>U0(i,e)):t._content)}const uy=Ne.define({combine:t=>t.join(" ")}),h3=Ne.define({combine:t=>t.indexOf(!0)>-1}),u3=sc.newName(),fR=sc.newName(),dR=sc.newName(),pR={"&light":"."+fR,"&dark":"."+dR};function f3(t,e,r){return new sc(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,i=>{if(i=="&")return t;if(!r||!r[i])throw new RangeError(`Unsupported selector: ${i}`);return r[i]}):t+" "+n}})}const vte=f3("."+u3,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},pR),wte={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Tw=Ie.ie&&Ie.ie_version<=11;let kte=class{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new iee,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(r=>{for(let n of r)this.queue.push(n);(Ie.ie&&Ie.ie_version<=11||Ie.ios&&e.composing)&&r.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Ie.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Ie.chrome&&Ie.chrome_version<126)&&(this.editContext=new Ste(e),e.state.facet(Na)&&(e.contentDOM.editContext=this.editContext.editContext)),Tw&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var r;((r=this.view.docView)===null||r===void 0?void 0:r.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(r=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),r.length>0&&r[r.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(r=>{r.length>0&&r[r.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((r,n)=>r!=e[n]))){this.gapIntersection.disconnect();for(let r of e)this.gapIntersection.observe(r);this.gaps=e}}onSelectionChange(e){let r=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(Na)?n.root.activeElement!=this.dom:!p2(this.dom,i))return;let s=i.anchorNode&&n.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){r||(this.selectionChanged=!1);return}(Ie.ie&&Ie.ie_version<=11||Ie.android&&Ie.chrome)&&!n.state.selection.main.empty&&i.focusNode&&zp(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,r=Dm(e.root);if(!r)return!1;let n=Ie.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Cte(this.view,r)||r;if(!n||this.selectionRange.eq(n))return!1;let i=p2(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&oee(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,r){this.selectionRange.set(e.node,e.offset,r.node,r.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,r=null;for(let n=this.dom;n;)if(n.nodeType==1)!r&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:r||(r=this.scrollTargets.slice(0,e)),r&&r.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!r&&(r=this.scrollTargets.slice(0,e)),r){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=r)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,wte),Tw&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Tw&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,r){var n;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&cf(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:r,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let r=-1,n=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),r==-1?{from:r,to:n}=o:(r=Math.min(o.from,r),n=Math.max(o.to,n)))}return{from:r,to:n,typeOver:i}}readChange(){let{from:e,to:r,typeOver:n}=this.processRecords(),i=this.selectionChanged&&p2(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new Hee(this.view,e,r,n);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let r=this.readChange();if(!r)return this.view.requestMeasure(),!1;let n=this.view.state,i=tR(this.view,r);return this.view.state==n&&(r.domChanged||r.newSel&&!r.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let r=this.view.docView.nearest(e.target);if(!r||r.ignoreMutation(e))return null;if(r.markDirty(e.type=="attributes"),e.type=="attributes"&&(r.flags|=4),e.type=="childList"){let n=cM(r,e.previousSibling||e.target.previousSibling,-1),i=cM(r,e.nextSibling||e.target.nextSibling,1);return{from:n?r.posAfter(n):r.posAtStart,to:i?r.posBefore(i):r.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Na)!=e.state.facet(Na)&&(e.view.contentDOM.editContext=e.state.facet(Na)?this.editContext.editContext:null))}destroy(){var e,r,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(r=this.gapIntersection)===null||r===void 0||r.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};function cM(t,e,r){for(;e;){let n=tr.get(e);if(n&&n.parent==t)return n;let i=e.parentNode;e=i!=t.dom?i:r>0?e.nextSibling:e.previousSibling}return null}function hM(t,e){let r=e.startContainer,n=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return zp(o.node,o.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function Cte(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return hM(t,i)}let r=null;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),r?hM(t,r):null}class Ste{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let r=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=n=>{let i=e.state.selection.main,{anchor:s,head:o}=i,a=this.toEditorPos(n.updateRangeStart),l=this.toEditorPos(n.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:n.updateRangeStart,editorBase:a,drifted:!1});let c=l-a>n.text.length;a==this.from&&s<this.from?a=s:l==this.to&&s>this.to&&(l=s);let h=rR(e.state.sliceDoc(a,l),n.text,(c?i.from:i.to)-a,c?"end":null);if(!h){let f=oe.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd));f.main.eq(i)||e.dispatch({selection:f,userEvent:"select"});return}let u={from:h.from+a,to:h.toA+a,insert:qt.of(n.text.slice(h.from,h.toB).split(`
`))};if((Ie.mac||Ie.android)&&u.from==o-1&&/^\. ?$/.test(n.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:a,to:l,insert:qt.of([n.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let f=this.to-this.from+(u.to-u.from+u.insert.length);g7(e,u,oe.single(this.toEditorPos(n.selectionStart,f),this.toEditorPos(n.selectionEnd,f)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),u.from<u.to&&!u.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(r.text.slice(Math.max(0,n.updateRangeStart-1),Math.min(r.text.length,n.updateRangeStart+1)))&&this.handlers.compositionend(n)},this.handlers.characterboundsupdate=n=>{let i=[],s=null;for(let o=this.toEditorPos(n.rangeStart),a=this.toEditorPos(n.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,i.push(s)}r.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=n=>{let i=[];for(let s of n.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(a)){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let h=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;i.push(lt.mark({attributes:{style:h}}).range(l,c))}}}e.dispatch({effects:UB.of(lt.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:n}=this.composing;this.composing=null,n&&this.reset(e.state)}};for(let n in this.handlers)r.addEventListener(n,this.handlers[n]);this.measureReq={read:n=>{this.editContext.updateControlBounds(n.contentDOM.getBoundingClientRect());let i=Dm(n.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let r=0,n=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,c)=>{if(n)return;let h=c.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(c)){i=this.pendingContextChange=null,r+=h,this.to+=h;return}else i=null,this.revertPending(e.state);if(s+=r,o+=r,o<=this.from)this.from+=h,this.to+=h;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=h}r+=h}),i&&!n&&this.revertPending(e.state),!n}update(e){let r=this.pendingContextChange,n=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(n.from,n.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||r)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:r}=e.selection.main;this.from=Math.max(0,r-1e4),this.to=Math.min(e.doc.length,r+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let r=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(r.from),this.toContextPos(r.from+r.insert.length),e.doc.sliceString(r.from,r.to))}setSelection(e){let{main:r}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,r.anchor))),i=this.toContextPos(r.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(n,i)}rangeIsValid(e){let{head:r}=e.selection.main;return!(this.from>0&&r-this.from<500||this.to<e.doc.length&&this.to-r<500||this.to-this.from>1e4*3)}toEditorPos(e,r=this.to-this.from){e=Math.min(e,r);let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let r=this.composing;return r&&r.drifted?r.contextBase+(e-r.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}let $e=class d3{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var r;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(i=>i.forEach(s=>n(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||see(e.parent)||document,this.viewState=new aM(e.state||Sr.create(e)),e.scrollTo&&e.scrollTo.is(sy)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(nf).map(i=>new ww(i));for(let i of this.plugins)i.update(this);this.observer=new kte(this),this.inputState=new jee(this),this.inputState.ensureHandlers(this.plugins),this.docView=new q_(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((r=document.fonts)===null||r===void 0)&&r.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let r=e.length==1&&e[0]instanceof si?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(r,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let r=!1,n=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(lR))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=cR(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,h=null;if(c?(this.observer.clearDelayedAndroidKey(),h=this.observer.readChange(),(h&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(h=null)):this.observer.clear(),s.facet(Sr.phrases)!=this.state.facet(Sr.phrases))return this.setState(s);i=Nb.create(this,s,e),i.flags|=a;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(u&&(u=u.map(f.changes)),f.scrollIntoView){let{main:d}=f.state.selection;u=new hf(d.empty?d:oe.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of f.effects)d.is(sy)&&(u=d.value.clip(this.state))}this.viewState.update(i,u),this.bidiCache=$b.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),r=this.docView.update(i),this.state.facet(W0)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(r,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(uy)!=i.state.facet(uy)&&(this.viewState.mustMeasureContent=!0),(r||n||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),r&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(o3))try{f(i)}catch(d){Mi(this.state,d,"update listener")}(l||h)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),h&&!tR(this,h)&&c.force&&cf(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let r=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new aM(e),this.plugins=e.facet(nf).map(n=>new ww(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new q_(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}r&&this.focus(),this.requestMeasure()}updatePlugins(e){let r=e.startState.facet(nf),n=e.state.facet(nf);if(r!=n){let i=[];for(let s of n){let o=r.indexOf(s);if(o<0)i.push(new ww(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);r!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let r=e.value;if(r&&r.docViewUpdate)try{r.docViewUpdate(this)}catch(n){Mi(this.state,n,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let r=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(kB(n))s=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);s=d.from,o=d.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let h=c.map(d=>{try{return d.read(this)}catch(p){return Mi(this.state,p),uM}}),u=Nb.create(this,this.state,[]),f=!1;u.flags|=l,r?r.flags|=l:r=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),f=this.docView.update(u),f&&this.docViewUpdate());for(let d=0;d<c.length;d++)if(h[d]!=uM)try{let p=c[d];p.write&&p.write(h[d],this)}catch(p){Mi(this.state,p)}if(f&&this.docView.updateSelection(!0),!u.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){i=i+p,n.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(r&&!r.empty)for(let a of this.state.facet(o3))a(r)}get themeClasses(){return u3+" "+(this.state.facet(h3)?dR:fR)+" "+this.state.facet(uy)}updateAttrs(){let e=fM(this,GB,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),r={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Na)?"true":"false",class:"cm-content",style:`${Ie.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(r["aria-readonly"]="true"),fM(this,p7,r);let n=this.observer.ignore(()=>{let i=t3(this.contentDOM,this.contentAttrs,r),s=t3(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=r,n}showAnnouncements(e){let r=!0;for(let n of e)for(let i of n.effects)if(i.is(d3.announce)){r&&(this.announceDOM.textContent=""),r=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(W0);let e=this.state.facet(d3.cspNonce);sc.mount(this.root,this.styleModules.concat(vte).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let r=0;r<this.measureRequests.length;r++)if(this.measureRequests[r].key===e.key){this.measureRequests[r]=e;return}}this.measureRequests.push(e)}}plugin(e){let r=this.pluginMap.get(e);return(r===void 0||r&&r.plugin!=e)&&this.pluginMap.set(e,r=this.plugins.find(n=>n.plugin==e)||null),r&&r.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,r,n){return Cw(this,e,G_(this,e,r,n))}moveByGroup(e,r){return Cw(this,e,G_(this,e,r,n=>Pee(this,e.head,n)))}visualLineSide(e,r){let n=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=n[r?n.length-1:0];return oe.cursor(s.side(r,i)+e.from,s.forward(!r,i)?1:-1)}moveToLineBoundary(e,r,n=!0){return Ree(this,e,r,n)}moveVertically(e,r,n){return Cw(this,e,Nee(this,e,r,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,r=0){return this.docView.posFromDOM(e,r)}posAtCoords(e,r=!0){return this.readMeasured(),ZB(this,e,r)}coordsAtPos(e,r=1){this.readMeasured();let n=this.docView.coordsAt(e,r);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Ul.find(s,e-i.from,-1,r)];return Cv(n,o.dir==br.LTR==r>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(VB)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Tte)return RB(e.length);let r=this.textDirectionAt(e.from),n;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==r&&(s.fresh||BB(s.isolates,n=H_(this,e))))return s.order;n||(n=H_(this,e));let i=xee(e.text,r,n);return this.bidiCache.push(new $b(e.from,e.to,r,n,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ie.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{vB(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,r={}){return sy.of(new hf(typeof e=="number"?oe.cursor(e):e,r.y,r.x,r.yMargin,r.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:r}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return sy.of(new hf(oe.cursor(n.from),"start","start",n.top-e,r,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Ur.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Ur.define(()=>({}),{eventObservers:e})}static theme(e,r){let n=sc.newName(),i=[uy.of(n),W0.of(f3(`.${n}`,e))];return r&&r.dark&&i.push(h3.of(!0)),i}static baseTheme(e){return Cc.lowest(W0.of(f3("."+u3,e,pR)))}static findFromDOM(e){var r;let n=e.querySelector(".cm-content"),i=n&&tr.get(n)||tr.get(e);return((r=i==null?void 0:i.rootView)===null||r===void 0?void 0:r.view)||null}};$e.styleModule=W0;$e.inputHandler=HB;$e.clipboardInputFilter=f7;$e.clipboardOutputFilter=d7;$e.scrollHandler=jB;$e.focusChangeEffect=qB;$e.perLineTextDirection=VB;$e.exceptionSink=zB;$e.updateListener=o3;$e.editable=Na;$e.mouseSelectionStyle=$B;$e.dragMovesSelection=FB;$e.clickAddsSelectionRange=NB;$e.decorations=Bm;$e.outerDecorations=KB;$e.atomicRanges=r1;$e.bidiIsolatedRanges=YB;$e.scrollMargins=XB;$e.darkTheme=h3;$e.cspNonce=Ne.define({combine:t=>t.length?t[0]:""});$e.contentAttributes=p7;$e.editorAttributes=GB;$e.lineWrapping=$e.contentAttributes.of({class:"cm-lineWrapping"});$e.announce=kt.define();const Tte=4096,uM={};class $b{constructor(e,r,n,i,s,o){this.from=e,this.to=r,this.dir=n,this.isolates=i,this.fresh=s,this.order=o}static update(e,r){if(r.empty&&!e.some(s=>s.fresh))return e;let n=[],i=e.length?e[e.length-1].dir:br.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!r.touchesRange(o.from,o.to)&&n.push(new $b(r.mapPos(o.from,1),r.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function fM(t,e,r){for(let n=t.state.facet(e),i=n.length-1;i>=0;i--){let s=n[i],o=typeof s=="function"?s(t):s;o&&e3(o,r)}return r}const _te=Ie.mac?"mac":Ie.windows?"win":Ie.linux?"linux":"key";function Mte(t,e){const r=t.split(/-(?!$)/);let n=r[r.length-1];n=="Space"&&(n=" ");let i,s,o,a;for(let l=0;l<r.length-1;++l){const c=r[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(n="Alt-"+n),s&&(n="Ctrl-"+n),a&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function fy(t,e,r){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r!==!1&&e.shiftKey&&(t="Shift-"+t),t}const Ate=Cc.default($e.domEventHandlers({keydown(t,e){return gR(mR(e.state),t,e,"editor")}})),zd=Ne.define({enables:Ate}),dM=new WeakMap;function mR(t){let e=t.facet(zd),r=dM.get(e);return r||dM.set(e,r=Ote(e.reduce((n,i)=>n.concat(i),[]))),r}function Ete(t,e,r){return gR(mR(t.state),e,t,r)}let Fl=null;const Lte=4e3;function Ote(t,e=_te){let r=Object.create(null),n=Object.create(null),i=(o,a)=>{let l=n[o];if(l==null)n[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,h)=>{var u,f;let d=r[o]||(r[o]=Object.create(null)),p=a.split(/ (?!$)/).map(y=>Mte(y,e));for(let y=1;y<p.length;y++){let b=p.slice(0,y).join(" ");i(b,!0),d[b]||(d[b]={preventDefault:!0,stopPropagation:!1,run:[x=>{let T=Fl={view:x,prefix:b,scope:o};return setTimeout(()=>{Fl==T&&(Fl=null)},Lte),!0}]})}let m=p.join(" ");i(m,!1);let g=d[m]||(d[m]={preventDefault:!1,stopPropagation:!1,run:((f=(u=d._any)===null||u===void 0?void 0:u.run)===null||f===void 0?void 0:f.slice())||[]});l&&g.run.push(l),c&&(g.preventDefault=!0),h&&(g.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let h=r[c]||(r[c]=Object.create(null));h._any||(h._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:u}=o;for(let f in h)h[f].run.push(d=>u(d,p3))}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return r}let p3=null;function gR(t,e,r,n){p3=e;let i=gB(e),s=Ci(i,0),o=Ro(s)==i.length&&i!=" ",a="",l=!1,c=!1,h=!1;Fl&&Fl.view==r&&Fl.scope==n&&(a=Fl.prefix+" ",iR.indexOf(e.keyCode)<0&&(c=!0,Fl=null));let u=new Set,f=g=>{if(g){for(let y of g.run)if(!u.has(y)&&(u.add(y),y(r)))return g.stopPropagation&&(h=!0),!0;g.preventDefault&&(g.stopPropagation&&(h=!0),c=!0)}return!1},d=t[n],p,m;return d&&(f(d[a+fy(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ie.windows&&e.ctrlKey&&e.altKey)&&!(Ie.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(p=Qa[e.keyCode])&&p!=i?(f(d[a+fy(p,e,!0)])||e.shiftKey&&(m=Om[e.keyCode])!=i&&m!=p&&f(d[a+fy(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(d[a+fy(i,e,!0)])&&(l=!0),!l&&f(d._any)&&(l=!0)),c&&(l=!0),l&&h&&e.stopPropagation(),p3=null,l}class n1{constructor(e,r,n,i,s){this.className=e,this.left=r,this.top=n,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,r){return r.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,r,n){if(n.empty){let i=e.coordsAtPos(n.head,n.assoc||1);if(!i)return[];let s=yR(e);return[new n1(r,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return Dte(e,r,n)}}function yR(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==br.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function pM(t,e,r,n){let i=t.coordsAtPos(e,r*2);if(!i)return n;let s=t.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?n:{from:Math.max(n.from,Math.min(a,l)),to:Math.min(n.to,Math.max(a,l))}}function Dte(t,e,r){if(r.to<=t.viewport.from||r.from>=t.viewport.to)return[];let n=Math.max(r.from,t.viewport.from),i=Math.min(r.to,t.viewport.to),s=t.textDirection==br.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=yR(t),c=o.querySelector(".cm-line"),h=c&&window.getComputedStyle(c),u=a.left+(h?parseInt(h.paddingLeft)+Math.min(0,parseInt(h.textIndent)):0),f=a.right-(h?parseInt(h.paddingRight):0),d=l3(t,n,1),p=l3(t,i,-1),m=d.type==oi.Text?d:null,g=p.type==oi.Text?p:null;if(m&&(t.lineWrapping||d.widgetLineBreaks)&&(m=pM(t,n,1,m)),g&&(t.lineWrapping||p.widgetLineBreaks)&&(g=pM(t,i,-1,g)),m&&g&&m.from==g.from&&m.to==g.to)return b(x(r.from,r.to,m));{let S=m?x(r.from,null,m):T(d,!1),w=g?x(null,r.to,g):T(p,!0),_=[];return(m||d).to<(g||p).from-(m&&g?1:0)||d.widgetLineBreaks>1&&S.bottom+t.defaultLineHeight/2<w.top?_.push(y(u,S.bottom,f,w.top)):S.bottom<w.top&&t.elementAtHeight((S.bottom+w.top)/2).type==oi.Text&&(S.bottom=w.top=(S.bottom+w.top)/2),b(S).concat(_).concat(b(w))}function y(S,w,_,I){return new n1(e,S-l.left,w-l.top,_-S,I-w)}function b({top:S,bottom:w,horizontal:_}){let I=[];for(let N=0;N<_.length;N+=2)I.push(y(_[N],S,_[N+1],w));return I}function x(S,w,_){let I=1e9,N=-1e9,L=[];function D(z,$,H,U,q){let re=t.coordsAtPos(z,z==_.to?-2:2),E=t.coordsAtPos(H,H==_.from?2:-2);!re||!E||(I=Math.min(re.top,E.top,I),N=Math.max(re.bottom,E.bottom,N),q==br.LTR?L.push(s&&$?u:re.left,s&&U?f:E.right):L.push(!s&&U?u:E.left,!s&&$?f:re.right))}let P=S??_.from,K=w??_.to;for(let z of t.visibleRanges)if(z.to>P&&z.from<K)for(let $=Math.max(z.from,P),H=Math.min(z.to,K);;){let U=t.state.doc.lineAt($);for(let q of t.bidiSpans(U)){let re=q.from+U.from,E=q.to+U.from;if(re>=H)break;E>$&&D(Math.max(re,$),S==null&&re<=P,Math.min(E,H),w==null&&E>=K,q.dir)}if($=U.to+1,$>=H)break}return L.length==0&&D(P,S==null,K,w==null,t.textDirection),{top:I,bottom:N,horizontal:L}}function T(S,w){let _=a.top+(w?S.top:S.bottom);return{top:_,bottom:_,horizontal:[]}}}function Ite(t,e){return t.constructor==e.constructor&&t.eq(e)}class Bte{constructor(e,r){this.view=e,this.layer=r,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),r.above&&this.dom.classList.add("cm-layer-above"),r.class&&this.dom.classList.add(r.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),r.mount&&r.mount(this.dom,e)}update(e){e.startState.facet(y2)!=e.state.facet(y2)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let r=0,n=e.facet(y2);for(;r<n.length&&n[r]!=this.layer;)r++;this.dom.style.zIndex=String((this.layer.above?150:-1)-r)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:r}=this.view;(e!=this.scaleX||r!=this.scaleY)&&(this.scaleX=e,this.scaleY=r,this.dom.style.transform=`scale(${1/e}, ${1/r})`)}draw(e){if(e.length!=this.drawn.length||e.some((r,n)=>!Ite(r,this.drawn[n]))){let r=this.dom.firstChild,n=0;for(let i of e)i.update&&r&&i.constructor&&this.drawn[n].constructor&&i.update(r,this.drawn[n])?(r=r.nextSibling,n++):this.dom.insertBefore(i.draw(),r);for(;r;){let i=r.nextSibling;r.remove(),r=i}this.drawn=e,Ie.safari&&Ie.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const y2=Ne.define();function bR(t){return[Ur.define(e=>new Bte(e,t)),y2.of(t)]}const Rm=Ne.define({combine(t){return ra(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,r)=>Math.min(e,r),drawRangeCursor:(e,r)=>e||r})}});function xR(t={}){return[Rm.of(t),Rte,Pte,Nte,WB.of(!0)]}function vR(t){return t.startState.facet(Rm)!=t.state.facet(Rm)}const Rte=bR({above:!0,markers(t){let{state:e}=t,r=e.facet(Rm),n=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty||r.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:oe.cursor(i.head,i.head>i.anchor?-1:1);for(let l of n1.forRange(t,o,a))n.push(l)}}return n},update(t,e){t.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let r=vR(t);return r&&mM(t.state,e),t.docChanged||t.selectionSet||r},mount(t,e){mM(e.state,t)},class:"cm-cursorLayer"});function mM(t,e){e.style.animationDuration=t.facet(Rm).cursorBlinkRate+"ms"}const Pte=bR({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:n1.forRange(t,"cm-selectionBackground",e)).reduce((e,r)=>e.concat(r))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||vR(t)},class:"cm-selectionLayer"}),Nte=Cc.highest($e.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),wR=kt.define({map(t,e){return t==null?null:e.mapPos(t)}}),G0=hn.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((r,n)=>n.is(wR)?n.value:r,t)}}),Fte=Ur.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let r=t.state.field(G0);r==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(G0)!=r||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(G0),r=e!=null&&t.coordsAtPos(e);if(!r)return null;let n=t.scrollDOM.getBoundingClientRect();return{left:r.left-n.left+t.scrollDOM.scrollLeft*t.scaleX,top:r.top-n.top+t.scrollDOM.scrollTop*t.scaleY,height:r.bottom-r.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:r}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/r+"px",this.cursor.style.height=t.height/r+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(G0)!=t&&this.view.dispatch({effects:wR.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function $te(){return[G0,Fte]}function gM(t,e,r,n,i){e.lastIndex=0;for(let s=t.iterRange(r,n),o=r,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function zte(t,e){let r=t.visibleRanges;if(r.length==1&&r[0].from==t.viewport.from&&r[0].to==t.viewport.to)return r;let n=[];for(let{from:i,to:s}of r)i=Math.max(t.state.doc.lineAt(i).from,i-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),n.length&&n[n.length-1].to>=i?n[n.length-1].to=s:n.push({from:i,to:s});return n}class Hte{constructor(e){const{regexp:r,decoration:n,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!r.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=r,i)this.addMatch=(a,l,c,h)=>i(h,c,c+a[0].length,a,l);else if(typeof n=="function")this.addMatch=(a,l,c,h)=>{let u=n(a,l,c);u&&h(c,c+a[0].length,u)};else if(n)this.addMatch=(a,l,c,h)=>h(c,c+a[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let r=new Za,n=r.add.bind(r);for(let{from:i,to:s}of zte(e,this.maxLength))gM(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,n));return r.finish()}updateDeco(e,r){let n=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(n=Math.min(a,n),i=Math.max(l,i))}),e.viewportMoved||i-n>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,r.map(e.changes),n,i):r}updateRange(e,r,n,i){for(let s of e.visibleRanges){let o=Math.max(s.from,n),a=Math.min(s.to,i);if(a>=o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,h=Math.max(s.from,l.from),u=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){h=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){u=a;break}}let f=[],d,p=(m,g,y)=>f.push(y.range(m,g));if(l==c)for(this.regexp.lastIndex=h-l.from;(d=this.regexp.exec(l.text))&&d.index<u-l.from;)this.addMatch(d,e,d.index+l.from,p);else gM(e.state.doc,this.regexp,h,u,(m,g)=>this.addMatch(g,e,m,p));r=r.update({filterFrom:h,filterTo:u,filter:(m,g)=>m<h||g>u,add:f})}}return r}}const m3=/x/.unicode!=null?"gu":"g",qte=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,m3),Vte={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _w=null;function Wte(){var t;if(_w==null&&typeof document<"u"&&document.body){let e=document.body.style;_w=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return _w||!1}const b2=Ne.define({combine(t){let e=ra(t,{render:null,specialChars:qte,addSpecialChars:null});return(e.replaceTabs=!Wte())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,m3)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,m3)),e}});function jte(t={}){return[b2.of(t),Ute()]}let yM=null;function Ute(){return yM||(yM=Ur.fromClass(class{constructor(t){this.view=t,this.decorations=lt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(b2)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Hte({regexp:t.specialChars,decoration:(e,r,n)=>{let{doc:i}=r.state,s=Ci(e[0],0);if(s==9){let o=i.lineAt(n),a=r.state.tabSize,l=$d(o.text,a,n-o.from);return lt.replace({widget:new Xte((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=lt.replace({widget:new Yte(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(b2);t.startState.facet(b2)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const Gte="";function Kte(t){return t>=32?Gte:t==10?"":String.fromCharCode(9216+t)}class Yte extends dl{constructor(e,r){super(),this.options=e,this.code=r}eq(e){return e.code==this.code}toDOM(e){let r=Kte(this.code),n=e.state.phrase("Control character")+" "+(Vte[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,r);if(i)return i;let s=document.createElement("span");return s.textContent=r,s.title=n,s.setAttribute("aria-label",n),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Xte extends dl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Jte(){return Qte}const Zte=lt.line({class:"cm-activeLine"}),Qte=Ur.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,r=[];for(let n of t.state.selection.ranges){let i=t.lineBlockAt(n.head);i.from>e&&(r.push(Zte.range(i.from)),e=i.from)}return lt.set(r)}},{decorations:t=>t.decorations}),g3=2e3;function ere(t,e,r){let n=Math.min(e.line,r.line),i=Math.max(e.line,r.line),s=[];if(e.off>g3||r.off>g3||e.col<0||r.col<0){let o=Math.min(e.off,r.off),a=Math.max(e.off,r.off);for(let l=n;l<=i;l++){let c=t.doc.line(l);c.length<=a&&s.push(oe.range(c.from+o,c.to+a))}}else{let o=Math.min(e.col,r.col),a=Math.max(e.col,r.col);for(let l=n;l<=i;l++){let c=t.doc.line(l),h=Uk(c.text,o,t.tabSize,!0);if(h<0)s.push(oe.cursor(c.to));else{let u=Uk(c.text,a,t.tabSize);s.push(oe.range(c.from+h,c.from+u))}}}return s}function tre(t,e){let r=t.coordsAtPos(t.viewport.from);return r?Math.round(Math.abs((r.left-e)/t.defaultCharacterWidth)):-1}function bM(t,e){let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),n=t.state.doc.lineAt(r),i=r-n.from,s=i>g3?-1:i==n.length?tre(t,e.clientX):$d(n.text,t.state.tabSize,r-n.from);return{line:n.number,col:s,off:i}}function rre(t,e){let r=bM(t,e),n=t.state.selection;return r?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(r.line).from),o=i.state.doc.lineAt(s);r={line:o.number,col:r.col,off:Math.min(r.off,o.length)},n=n.map(i.changes)}},get(i,s,o){let a=bM(t,i);if(!a)return n;let l=ere(t.state,r,a);return l.length?o?oe.create(l.concat(n.ranges)):oe.create(l):n}}:null}function nre(t){let e=r=>r.altKey&&r.button==0;return $e.mouseSelectionStyle.of((r,n)=>e(n)?rre(r,n):null)}const ire={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},sre={style:"cursor: crosshair"};function ore(t={}){let[e,r]=ire[t.key||"Alt"],n=Ur.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||r(i))},keyup(i){(i.keyCode==e||!r(i))&&this.set(!1)},mousemove(i){this.set(r(i))}}});return[n,$e.contentAttributes.of(i=>{var s;return!((s=i.plugin(n))===null||s===void 0)&&s.isDown?sre:null})]}const dy="-10000px";class kR{constructor(e,r,n,i){this.facet=r,this.createTooltipView=n,this.removeTooltipView=i,this.input=e.state.facet(r),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=n(o,s))}update(e,r){var n;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=r?[]:null;for(let l=0;l<s.length;l++){let c=s[l],h=-1;if(c){for(let u=0;u<this.tooltips.length;u++){let f=this.tooltips[u];f&&f.create==c.create&&(h=u)}if(h<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let u=o[l]=this.tooltipViews[h];a&&(a[l]=r[h]),u.update&&u.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(n=l.destroy)===null||n===void 0||n.call(l));return r&&(a.forEach((l,c)=>r[c]=l),r.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function are(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Mw=Ne.define({combine:t=>{var e,r,n;return{position:Ie.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((r=t.find(i=>i.parent))===null||r===void 0?void 0:r.parent)||null,tooltipSpace:((n=t.find(i=>i.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||are}}}),xM=new WeakMap,x7=Ur.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Mw);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new kR(t,v7,(r,n)=>this.createTooltip(r,n),r=>{this.resizeObserver&&this.resizeObserver.unobserve(r.dom),r.dom.remove()}),this.above=this.manager.tooltips.map(r=>!!r.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(r=>{Date.now()>this.lastTransaction-50&&r.length>0&&r[r.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let r=e||t.geometryChanged,n=t.state.facet(Mw);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;r=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);r=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);r&&this.maybeMeasure()}createTooltip(t,e){let r=t.create(this.view),n=e?e.dom:null;if(r.dom.classList.add("cm-tooltip"),t.arrow&&!r.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",r.dom.appendChild(i)}return r.dom.style.position=this.position,r.dom.style.top=dy,r.dom.style.left="0px",this.container.insertBefore(r.dom,n),r.mount&&r.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(r.dom),r}destroy(){var t,e,r;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(r=this.intersectionObserver)===null||r===void 0||r.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,r=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Ie.safari){let o=s.getBoundingClientRect();r=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}else r=!!s.offsetParent&&s.offsetParent!=this.container.ownerDocument.body}if(r||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let n=this.view.scrollDOM.getBoundingClientRect(),i=m7(this.view);return{visible:{left:n.left+i.left,top:n.top+i.top,right:n.right-i.right,bottom:n.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Mw).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:r}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:r,space:n,scaleX:i,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:h}=c,u=t.pos[a],f=t.size[a];if(!u||l.clip!==!1&&(u.bottom<=Math.max(r.top,n.top)||u.top>=Math.min(r.bottom,n.bottom)||u.right<Math.max(r.left,n.left)-.1||u.left>Math.min(r.right,n.right)+.1)){h.style.top=dy;continue}let d=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=d?7:0,m=f.right-f.left,g=(e=xM.get(c))!==null&&e!==void 0?e:f.bottom-f.top,y=c.offset||cre,b=this.view.textDirection==br.LTR,x=f.width>n.right-n.left?b?n.left:n.right-f.width:b?Math.max(n.left,Math.min(u.left-(d?14:0)+y.x,n.right-m)):Math.min(Math.max(n.left,u.left-m+(d?14:0)-y.x),n.right-m),T=this.above[a];!l.strictSide&&(T?u.top-g-p-y.y<n.top:u.bottom+g+p+y.y>n.bottom)&&T==n.bottom-u.bottom>u.top-n.top&&(T=this.above[a]=!T);let S=(T?u.top-n.top:n.bottom-u.bottom)-p;if(S<g&&c.resize!==!1){if(S<this.view.defaultLineHeight){h.style.top=dy;continue}xM.set(c,g),h.style.height=(g=S)/s+"px"}else h.style.height&&(h.style.height="");let w=T?u.top-g-p-y.y:u.bottom+p+y.y,_=x+m;if(c.overlap!==!0)for(let I of o)I.left<_&&I.right>x&&I.top<w+g&&I.bottom>w&&(w=T?I.top-g-2-p:I.bottom+p+2);if(this.position=="absolute"?(h.style.top=(w-t.parent.top)/s+"px",vM(h,(x-t.parent.left)/i)):(h.style.top=w/s+"px",vM(h,x/i)),d){let I=u.left+(b?y.x:-y.x)-(x+14-7);d.style.left=I/i+"px"}c.overlap!==!0&&o.push({left:x,top:w,right:_,bottom:w+g}),h.classList.toggle("cm-tooltip-above",T),h.classList.toggle("cm-tooltip-below",!T),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=dy}},{eventObservers:{scroll(){this.maybeMeasure()}}});function vM(t,e){let r=parseInt(t.style.left,10);(isNaN(r)||Math.abs(e-r)>1)&&(t.style.left=e+"px")}const lre=$e.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),cre={x:0,y:0},v7=Ne.define({enables:[x7,lre]}),zb=Ne.define({combine:t=>t.reduce((e,r)=>e.concat(r),[])});class Tv{static create(e){return new Tv(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new kR(e,zb,(r,n)=>this.createHostedView(r,n),r=>r.dom.remove())}createHostedView(e,r){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,r?r.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let r of this.manager.tooltipViews)r.mount&&r.mount(e);this.mounted=!0}positioned(e){for(let r of this.manager.tooltipViews)r.positioned&&r.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let r of this.manager.tooltipViews)(e=r.destroy)===null||e===void 0||e.call(r)}passProp(e){let r;for(let n of this.manager.tooltipViews){let i=n[e];if(i!==void 0){if(r===void 0)r=i;else if(r!==i)return}}return r}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const hre=v7.compute([zb],t=>{let e=t.facet(zb);return e.length===0?null:{pos:Math.min(...e.map(r=>r.pos)),end:Math.max(...e.map(r=>{var n;return(n=r.end)!==null&&n!==void 0?n:r.pos})),create:Tv.create,above:e[0].above,arrow:e.some(r=>r.arrow)}});class ure{constructor(e,r,n,i,s){this.view=e,this.source=r,this.field=n,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:r}=this,n=e.docView.nearest(r.target);if(!n)return;let i,s=1;if(n instanceof $a)i=n.posAtStart;else{if(i=e.posAtCoords(r),i==null)return;let a=e.coordsAtPos(i);if(!a||r.y<a.top||r.y>a.bottom||r.x<a.left-e.defaultCharacterWidth||r.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(h=>h.from<=i&&h.to>=i),c=l&&l.dir==br.RTL?-1:1;s=r.x<a.left?-c:c}let o=this.source(e,i,s);if(o!=null&&o.then){let a=this.pending={pos:i};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Mi(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(x7),r=e?e.manager.tooltips.findIndex(n=>n.create==Tv.create):-1;return r>-1?e.manager.tooltipViews[r]:null}mousemove(e){var r,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!fre(s.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,a=(n=(r=i[0])===null||r===void 0?void 0:r.end)!==null&&n!==void 0?n:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!dre(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:r}=this;if(r.length){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let r=n=>{e.removeEventListener("mouseleave",r),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",r)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const py=4;function fre(t,e){let{left:r,right:n,top:i,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();i=Math.min(a.top,i),s=Math.max(a.bottom,s)}return e.clientX>=r-py&&e.clientX<=n+py&&e.clientY>=i-py&&e.clientY<=s+py}function dre(t,e,r,n,i,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>n||o.right<n||o.top>i||Math.min(o.bottom,a)<i)return!1;let l=t.posAtCoords({x:n,y:i},!1);return l>=e&&l<=r}function pre(t,e={}){let r=kt.define(),n=hn.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of i){let l=s.changes.mapPos(a.pos,-1,vn.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}i=o}for(let o of s.effects)o.is(r)&&(i=o.value),o.is(mre)&&(i=[]);return i},provide:i=>zb.from(i)});return{active:n,extension:[n,Ur.define(i=>new ure(i,t,n,r,e.hoverTime||300)),hre]}}function CR(t,e){let r=t.plugin(x7);if(!r)return null;let n=r.manager.tooltips.indexOf(e);return n<0?null:r.manager.tooltipViews[n]}const mre=kt.define(),wM=Ne.define({combine(t){let e,r;for(let n of t)e=e||n.topContainer,r=r||n.bottomContainer;return{topContainer:e,bottomContainer:r}}});function Pm(t,e){let r=t.plugin(SR),n=r?r.specs.indexOf(e):-1;return n>-1?r.panels[n]:null}const SR=Ur.fromClass(class{constructor(t){this.input=t.state.facet(Nm),this.specs=this.input.filter(r=>r),this.panels=this.specs.map(r=>r(t));let e=t.state.facet(wM);this.top=new my(t,!0,e.topContainer),this.bottom=new my(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(r=>r.top)),this.bottom.sync(this.panels.filter(r=>!r.top));for(let r of this.panels)r.dom.classList.add("cm-panel"),r.mount&&r.mount()}update(t){let e=t.state.facet(wM);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new my(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new my(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let r=t.state.facet(Nm);if(r!=this.input){let n=r.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of n){let c=this.specs.indexOf(l),h;c<0?(h=l(t.view),a.push(h)):(h=this.panels[c],h.update&&h.update(t)),i.push(h),(h.top?s:o).push(h)}this.specs=n,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let n of this.panels)n.update&&n.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>$e.scrollMargins.of(e=>{let r=e.plugin(t);return r&&{top:r.top.scrollMargin(),bottom:r.bottom.scrollMargin()}})});class my{constructor(e,r,n){this.view=e,this.top=r,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let r of this.panels)r.destroy&&e.indexOf(r)<0&&r.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let r=this.container||this.view.dom;r.insertBefore(this.dom,this.top?r.firstChild:null)}let e=this.dom.firstChild;for(let r of this.panels)if(r.dom.parentNode==this.dom){for(;e!=r.dom;)e=kM(e);e=e.nextSibling}else this.dom.insertBefore(r.dom,e);for(;e;)e=kM(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function kM(t){let e=t.nextSibling;return t.remove(),e}const Nm=Ne.define({enables:SR});class tl extends Yh{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}tl.prototype.elementClass="";tl.prototype.toDOM=void 0;tl.prototype.mapMode=vn.TrackBefore;tl.prototype.startSide=tl.prototype.endSide=-1;tl.prototype.point=!0;const x2=Ne.define(),gre=Ne.define(),yre={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>$t.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Vp=Ne.define();function bre(t){return[TR(),Vp.of({...yre,...t})]}const CM=Ne.define({combine:t=>t.some(e=>e)});function TR(t){return[xre]}const xre=Ur.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Vp).map(e=>new TM(t,e)),this.fixed=!t.state.facet(CM);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,r=t.view.viewport,n=Math.min(e.to,r.to)-Math.max(e.from,r.from);this.syncGutters(n<(r.to-r.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(CM)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let r=$t.iter(this.view.state.facet(x2),this.view.viewport.from),n=[],i=this.gutters.map(s=>new vre(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==oi.Text&&o){y3(r,n,a.from);for(let l of i)l.line(this.view,a,n);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==oi.Text){y3(r,n,s.from);for(let o of i)o.line(this.view,s,n)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(Vp),r=t.state.facet(Vp),n=t.docChanged||t.heightChanged||t.viewportChanged||!$t.eq(t.startState.facet(x2),t.state.facet(x2),t.view.viewport.from,t.view.viewport.to);if(e==r)for(let i of this.gutters)i.update(t)&&(n=!0);else{n=!0;let i=[];for(let s of r){let o=e.indexOf(s);o<0?i.push(new TM(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return n}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>$e.scrollMargins.of(e=>{let r=e.plugin(t);if(!r||r.gutters.length==0||!r.fixed)return null;let n=r.dom.offsetWidth*e.scaleX,i=r.domAfter?r.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==br.LTR?{left:n,right:i}:{right:n,left:i}})});function SM(t){return Array.isArray(t)?t:[t]}function y3(t,e,r){for(;t.value&&t.from<=r;)t.from==r&&e.push(t.value),t.next()}class vre{constructor(e,r,n){this.gutter=e,this.height=n,this.i=0,this.cursor=$t.iter(e.markers,r.from)}addElement(e,r,n){let{gutter:i}=this,s=(r.top-this.height)/e.scaleY,o=r.height/e.scaleY;if(this.i==i.elements.length){let a=new _R(e,o,s,n);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,n);this.height=r.bottom,this.i++}line(e,r,n){let i=[];y3(this.cursor,i,r.from),n.length&&(i=i.concat(n));let s=this.gutter.config.lineMarker(e,r,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,r,i)}widget(e,r){let n=this.gutter.config.widgetMarker(e,r.widget,r),i=n?[n]:null;for(let s of e.state.facet(gre)){let o=s(e,r.widget,r);o&&(i||(i=[])).push(o)}i&&this.addElement(e,r,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let r=e.elements.pop();e.dom.removeChild(r.dom),r.destroy()}}}class TM{constructor(e,r){this.view=e,this.config=r,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in r.domEventHandlers)this.dom.addEventListener(n,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);r.domEventHandlers[n](e,a,i)&&i.preventDefault()});this.markers=SM(r.markers(e)),r.initialSpacer&&(this.spacer=new _R(e,0,0,[r.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let r=this.markers;if(this.markers=SM(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let n=e.view.viewport;return!$t.eq(this.markers,r,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class _R{constructor(e,r,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,r,n,i)}update(e,r,n,i){this.height!=r&&(this.height=r,this.dom.style.height=r+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),wre(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,r){let n="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<r.length?r[s++]:null,c=!1;if(l){let h=l.elementClass;h&&(n+=" "+h);for(let u=o;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,c=!0;break}}else a=this.markers.length;for(;o<a;){let h=this.markers[o++];if(h.toDOM){h.destroy(i);let u=i.nextSibling;i.remove(),i=u}}if(!l)break;l.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),c&&o++}this.dom.className=n,this.markers=r}destroy(){this.setMarkers(null,[])}}function wre(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].compare(e[r]))return!1;return!0}const kre=Ne.define(),Cre=Ne.define(),sf=Ne.define({combine(t){return ra(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,r){let n=Object.assign({},e);for(let i in r){let s=n[i],o=r[i];n[i]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return n}})}});class Aw extends tl{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Ew(t,e){return t.state.facet(sf).formatNumber(e,t.state)}const Sre=Vp.compute([sf],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(kre)},lineMarker(e,r,n){return n.some(i=>i.toDOM)?null:new Aw(Ew(e,e.state.doc.lineAt(r.from).number))},widgetMarker:(e,r,n)=>{for(let i of e.state.facet(Cre)){let s=i(e,r,n);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(sf)!=e.state.facet(sf),initialSpacer(e){return new Aw(Ew(e,_M(e.state.doc.lines)))},updateSpacer(e,r){let n=Ew(r.view,_M(r.view.state.doc.lines));return n==e.number?e:new Aw(n)},domEventHandlers:t.facet(sf).domEventHandlers,side:"before"}));function Tre(t={}){return[sf.of(t),TR(),Sre]}function _M(t){let e=9;for(;e<t;)e=e*10+9;return e}const _re=new class extends tl{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Mre=x2.compute(["selection"],t=>{let e=[],r=-1;for(let n of t.selection.ranges){let i=t.doc.lineAt(n.head).from;i>r&&(r=i,e.push(_re.range(i)))}return $t.of(e)});function Are(){return Mre}let Ere=0;class ps{constructor(e,r,n,i){this.name=e,this.set=r,this.base=n,this.modified=i,this.id=Ere++}toString(){let{name:e}=this;for(let r of this.modified)r.name&&(e=`${r.name}(${e})`);return e}static define(e,r){let n=typeof e=="string"?e:"?";if(e instanceof ps&&(r=e),r!=null&&r.base)throw new Error("Can not derive from a modified tag");let i=new ps(n,[],null,[]);if(i.set.push(i),r)for(let s of r.set)i.set.push(s);return i}static defineModifier(e){let r=new Hb(e);return n=>n.modified.indexOf(r)>-1?n:Hb.get(n.base||n,n.modified.concat(r).sort((i,s)=>i.id-s.id))}}let Lre=0;class Hb{constructor(e){this.name=e,this.instances=[],this.id=Lre++}static get(e,r){if(!r.length)return e;let n=r[0].instances.find(a=>a.base==e&&Ore(r,a.modified));if(n)return n;let i=[],s=new ps(e.name,i,e,r);for(let a of r)a.instances.push(s);let o=Dre(r);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(Hb.get(a,l));return s}}function Ore(t,e){return t.length==e.length&&t.every((r,n)=>r==e[n])}function Dre(t){let e=[[]];for(let r=0;r<t.length;r++)for(let n=0,i=e.length;n<i;n++)e.push(e[n].concat(t[r]));return e.sort((r,n)=>n.length-r.length)}function Ire(t){let e=Object.create(null);for(let r in t){let n=t[r];Array.isArray(n)||(n=[n]);for(let i of r.split(" "))if(i){let s=[],o=2,a=i;for(let u=0;;){if(a=="..."&&u>0&&u+3==i.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),u+=f[0].length,u==i.length)break;let d=i[u++];if(u==i.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);a=i.slice(u)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+i);let h=new Fm(n,o,l>0?s.slice(0,l):null);e[c]=h.sort(e[c])}}return MR.add(e)}const MR=new Ot({combine(t,e){let r,n,i;for(;t||e;){if(!t||e&&t.depth>=e.depth?(i=e,e=e.next):(i=t,t=t.next),r&&r.mode==i.mode&&!i.context&&!r.context)continue;let s=new Fm(i.tags,i.mode,i.context);r?r.next=s:n=s,r=s}return n}});class Fm{constructor(e,r,n,i){this.tags=e,this.mode=r,this.context=n,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Fm.empty=new Fm([],2,null);function AR(t,e){let r=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))r[s.tag.id]=s.class;else for(let o of s.tag)r[o.id]=s.class;let{scope:n,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let c=r[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:n}}function Bre(t,e){let r=null;for(let n of t){let i=n.style(e);i&&(r=r?r+" "+i:i)}return r}function Rre(t,e,r,n=0,i=t.length){let s=new Pre(n,Array.isArray(e)?e:[e],r);s.highlightRange(t.cursor(),n,i,"",s.highlighters),s.flush(i)}class Pre{constructor(e,r,n){this.at=e,this.highlighters=r,this.span=n,this.class=""}startSpan(e,r){r!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=r)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,r,n,i,s){let{type:o,from:a,to:l}=e;if(a>=n||l<=r)return;o.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(o)));let c=i,h=Nre(e)||Fm.empty,u=Bre(s,h.tags);if(u&&(c&&(c+=" "),c+=u,h.mode==1&&(i+=(i?" ":"")+u)),this.startSpan(Math.max(r,a),c),h.opaque)return;let f=e.tree&&e.tree.prop(Ot.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+a,1),p=this.highlighters.filter(g=>!g.scope||g.scope(f.tree.type)),m=e.firstChild();for(let g=0,y=a;;g++){let b=g<f.overlay.length?f.overlay[g]:null,x=b?b.from+a:l,T=Math.max(r,y),S=Math.min(n,x);if(T<S&&m)for(;e.from<S&&(this.highlightRange(e,T,S,i,s),this.startSpan(Math.min(S,e.to),c),!(e.to>=x||!e.nextSibling())););if(!b||x>n)break;y=b.to+a,y>r&&(this.highlightRange(d.cursor(),Math.max(r,b.from+a),Math.min(n,y),"",p),this.startSpan(Math.min(n,y),c))}m&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=r)){if(e.from>=n)break;this.highlightRange(e,r,n,i,s),this.startSpan(Math.min(n,e.to),c)}while(e.nextSibling());e.parent()}}}function Nre(t){let e=t.type.prop(MR);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const Ae=ps.define,gy=Ae(),Ll=Ae(),MM=Ae(Ll),AM=Ae(Ll),Ol=Ae(),yy=Ae(Ol),Lw=Ae(Ol),So=Ae(),Nc=Ae(So),vo=Ae(),wo=Ae(),b3=Ae(),C0=Ae(b3),by=Ae(),ie={comment:gy,lineComment:Ae(gy),blockComment:Ae(gy),docComment:Ae(gy),name:Ll,variableName:Ae(Ll),typeName:MM,tagName:Ae(MM),propertyName:AM,attributeName:Ae(AM),className:Ae(Ll),labelName:Ae(Ll),namespace:Ae(Ll),macroName:Ae(Ll),literal:Ol,string:yy,docString:Ae(yy),character:Ae(yy),attributeValue:Ae(yy),number:Lw,integer:Ae(Lw),float:Ae(Lw),bool:Ae(Ol),regexp:Ae(Ol),escape:Ae(Ol),color:Ae(Ol),url:Ae(Ol),keyword:vo,self:Ae(vo),null:Ae(vo),atom:Ae(vo),unit:Ae(vo),modifier:Ae(vo),operatorKeyword:Ae(vo),controlKeyword:Ae(vo),definitionKeyword:Ae(vo),moduleKeyword:Ae(vo),operator:wo,derefOperator:Ae(wo),arithmeticOperator:Ae(wo),logicOperator:Ae(wo),bitwiseOperator:Ae(wo),compareOperator:Ae(wo),updateOperator:Ae(wo),definitionOperator:Ae(wo),typeOperator:Ae(wo),controlOperator:Ae(wo),punctuation:b3,separator:Ae(b3),bracket:C0,angleBracket:Ae(C0),squareBracket:Ae(C0),paren:Ae(C0),brace:Ae(C0),content:So,heading:Nc,heading1:Ae(Nc),heading2:Ae(Nc),heading3:Ae(Nc),heading4:Ae(Nc),heading5:Ae(Nc),heading6:Ae(Nc),contentSeparator:Ae(So),list:Ae(So),quote:Ae(So),emphasis:Ae(So),strong:Ae(So),link:Ae(So),monospace:Ae(So),strikethrough:Ae(So),inserted:Ae(),deleted:Ae(),changed:Ae(),invalid:Ae(),meta:by,documentMeta:Ae(by),annotation:Ae(by),processingInstruction:Ae(by),definition:ps.defineModifier("definition"),constant:ps.defineModifier("constant"),function:ps.defineModifier("function"),standard:ps.defineModifier("standard"),local:ps.defineModifier("local"),special:ps.defineModifier("special")};for(let t in ie){let e=ie[t];e instanceof ps&&(e.name=t)}AR([{tag:ie.link,class:"tok-link"},{tag:ie.heading,class:"tok-heading"},{tag:ie.emphasis,class:"tok-emphasis"},{tag:ie.strong,class:"tok-strong"},{tag:ie.keyword,class:"tok-keyword"},{tag:ie.atom,class:"tok-atom"},{tag:ie.bool,class:"tok-bool"},{tag:ie.url,class:"tok-url"},{tag:ie.labelName,class:"tok-labelName"},{tag:ie.inserted,class:"tok-inserted"},{tag:ie.deleted,class:"tok-deleted"},{tag:ie.literal,class:"tok-literal"},{tag:ie.string,class:"tok-string"},{tag:ie.number,class:"tok-number"},{tag:[ie.regexp,ie.escape,ie.special(ie.string)],class:"tok-string2"},{tag:ie.variableName,class:"tok-variableName"},{tag:ie.local(ie.variableName),class:"tok-variableName tok-local"},{tag:ie.definition(ie.variableName),class:"tok-variableName tok-definition"},{tag:ie.special(ie.variableName),class:"tok-variableName2"},{tag:ie.definition(ie.propertyName),class:"tok-propertyName tok-definition"},{tag:ie.typeName,class:"tok-typeName"},{tag:ie.namespace,class:"tok-namespace"},{tag:ie.className,class:"tok-className"},{tag:ie.macroName,class:"tok-macroName"},{tag:ie.propertyName,class:"tok-propertyName"},{tag:ie.operator,class:"tok-operator"},{tag:ie.comment,class:"tok-comment"},{tag:ie.meta,class:"tok-meta"},{tag:ie.invalid,class:"tok-invalid"},{tag:ie.punctuation,class:"tok-punctuation"}]);var Ow;const ch=new Ot;function ER(t){return Ne.define({combine:t?e=>e.concat(t):void 0})}const Fre=new Ot;class bs{constructor(e,r,n=[],i=""){this.data=e,this.name=i,Sr.prototype.hasOwnProperty("tree")||Object.defineProperty(Sr.prototype,"tree",{get(){return kn(this)}}),this.parser=r,this.extension=[ac.of(this),Sr.languageData.of((s,o,a)=>{let l=EM(s,o,a),c=l.type.prop(ch);if(!c)return[];let h=s.facet(c),u=l.type.prop(Fre);if(u){let f=l.resolve(o-l.from,a);for(let d of u)if(d.test(f,s)){let p=s.facet(d.facet);return d.type=="replace"?p:p.concat(h)}}return h})].concat(n)}isActiveAt(e,r,n=-1){return EM(e,r,n).type.prop(ch)==this.data}findRegions(e){let r=e.facet(ac);if((r==null?void 0:r.data)==this.data)return[{from:0,to:e.doc.length}];if(!r||!r.allowsNesting)return[];let n=[],i=(s,o)=>{if(s.prop(ch)==this.data){n.push({from:o,to:o+s.length});return}let a=s.prop(Ot.mounted);if(a){if(a.tree.prop(ch)==this.data){if(a.overlay)for(let l of a.overlay)n.push({from:l.from+o,to:l.to+o});else n.push({from:o,to:o+s.length});return}else if(a.overlay){let l=n.length;if(i(a.tree,a.overlay[0].from+o),n.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof dr&&i(c,s.positions[l]+o)}};return i(kn(e),0),n}get allowsNesting(){return!0}}bs.setState=kt.define();function EM(t,e,r){let n=t.facet(ac),i=kn(t).topNode;if(!n||n.allowsNesting)for(let s=i;s;s=s.enter(e,r,Lr.ExcludeBuffers))s.type.isTop&&(i=s);return i}class x3 extends bs{constructor(e,r,n){super(e,r,[],n),this.parser=r}static define(e){let r=ER(e.languageData);return new x3(r,e.parser.configure({props:[ch.add(n=>n.isTop?r:void 0)]}),e.name)}configure(e,r){return new x3(this.data,this.parser.configure(e),r||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function kn(t){let e=t.field(bs.state,!1);return e?e.tree:dr.empty}class $re{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,r){let n=this.cursorPos-this.string.length;return e<n||r>=this.cursorPos?this.doc.sliceString(e,r):this.string.slice(e-n,r-n)}}let S0=null,v3=class w3{constructor(e,r,n=[],i,s,o,a,l){this.parser=e,this.state=r,this.fragments=n,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,r,n){return new w3(e,r,[],dr.empty,0,n,[],null)}startParse(){return this.parser.startParse(new $re(this.state.doc),this.fragments)}work(e,r){return r!=null&&r>=this.state.doc.length&&(r=void 0),this.tree!=dr.empty&&this.isDone(r??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),r!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>r)&&r<this.state.doc.length&&this.parse.stopAt(r);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Wa.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(r??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,r;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(r=this.parse.advance()););}),this.treeLen=e,this.tree=r,this.fragments=this.withoutTempSkipped(Wa.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let r=S0;S0=this;try{return e()}finally{S0=r}}withoutTempSkipped(e){for(let r;r=this.tempSkipped.pop();)e=LM(e,r.from,r.to);return e}changes(e,r){let{fragments:n,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,h,u,f)=>l.push({fromA:c,toA:h,fromB:u,toB:f})),n=Wa.applyChanges(n,l),i=dr.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let h=e.mapPos(c.from,1),u=e.mapPos(c.to,-1);h<u&&a.push({from:h,to:u})}}}return new w3(this.parser,r,n,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let r=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:i,to:s}=this.skipped[n];i<e.to&&s>e.from&&(this.fragments=LM(this.fragments,i,s),this.skipped.splice(n--,1))}return this.skipped.length>=r?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,r){this.skipped.push({from:e,to:r})}static getSkippingParser(e){return new class extends YI{createParse(r,n,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=S0;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new dr(ns.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let r=this.fragments;return this.treeLen>=e&&r.length&&r[0].from==0&&r[0].to>=e}static get(){return S0}};function LM(t,e,r){return Wa.applyChanges(t,[{fromA:e,toA:r,fromB:e,toB:r}])}class dd{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let r=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),r.viewport.to);return r.work(20,n)||r.takeTree(),new dd(r)}static init(e){let r=Math.min(3e3,e.doc.length),n=v3.create(e.facet(ac).parser,e,{from:0,to:r});return n.work(20,r)||n.takeTree(),new dd(n)}}bs.state=hn.define({create:dd.init,update(t,e){for(let r of e.effects)if(r.is(bs.setState))return r.value;return e.startState.facet(ac)!=e.state.facet(ac)?dd.init(e.state):t.apply(e)}});let LR=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(LR=t=>{let e=-1,r=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(r):cancelIdleCallback(e)});const Dw=typeof navigator<"u"&&(!((Ow=navigator.scheduling)===null||Ow===void 0)&&Ow.isInputPending)?()=>navigator.scheduling.isInputPending():null,zre=Ur.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let r=this.view.state.field(bs.state).context;(r.updateViewport(e.view.viewport)||this.view.viewport.to>r.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(r)}scheduleWork(){if(this.working)return;let{state:e}=this.view,r=e.field(bs.state);(r.tree!=r.context.tree||!r.context.isDone(e.doc.length))&&(this.working=LR(this.work))}work(e){this.working=null;let r=Date.now();if(this.chunkEnd<r&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=r+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,s=n.field(bs.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Dw?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&n.doc.length>i+1e3,l=s.context.work(()=>Dw&&Dw()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-r,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:bs.setState.of(new dd(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(r=>Mi(this.view.state,r)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ac=Ne.define({combine(t){return t.length?t[0]:null},enables:t=>[bs.state,zre,$e.contentAttributes.compute([t],e=>{let r=e.facet(t);return r&&r.name?{"data-language":r.name}:{}})]});class Hre{constructor(e,r=[]){this.language=e,this.support=r,this.extension=[e,r]}}class Q{constructor(e,r,n,i,s,o=void 0){this.name=e,this.alias=r,this.extensions=n,this.filename=i,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:r,support:n}=e;if(!r){if(!n)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");r=()=>Promise.resolve(n)}return new Q(e.name,(e.alias||[]).concat(e.name).map(i=>i.toLowerCase()),e.extensions||[],e.filename,r,n)}static matchFilename(e,r){for(let i of e)if(i.filename&&i.filename.test(r))return i;let n=/\.([^.]+)$/.exec(r);if(n){for(let i of e)if(i.extensions.indexOf(n[1])>-1)return i}return null}static matchLanguageName(e,r,n=!0){r=r.toLowerCase();for(let i of e)if(i.alias.some(s=>s==r))return i;if(n)for(let i of e)for(let s of i.alias){let o=r.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(r[o-1])&&!/\w/.test(r[o+s.length])))return i}return null}}const qre=Ne.define(),_v=Ne.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(r=>r!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Qh(t){let e=t.facet(_v);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function $m(t,e){let r="",n=t.tabSize,i=t.facet(_v)[0];if(i=="	"){for(;e>=n;)r+="	",e-=n;i=" "}for(let s=0;s<e;s++)r+=i;return r}function w7(t,e){t instanceof Sr&&(t=new Mv(t));for(let n of t.state.facet(qre)){let i=n(t,e);if(i!==void 0)return i}let r=kn(t.state);return r.length>=e?Vre(t,r,e):null}class Mv{constructor(e,r={}){this.state=e,this.options=r,this.unit=Qh(e)}lineAt(e,r=1){let n=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=n.from&&i<=n.to?s&&i==e?{text:"",from:e}:(r<0?i<e:i<=e)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n}textAfterPos(e,r=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:i}=this.lineAt(e,r);return n.slice(e-i,Math.min(n.length,e+100-i))}column(e,r=1){let{text:n,from:i}=this.lineAt(e,r),s=this.countColumn(n,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(n,n.search(/\S|$/))),s}countColumn(e,r=e.length){return $d(e,this.state.tabSize,r)}lineIndent(e,r=1){let{text:n,from:i}=this.lineAt(e,r),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const OR=new Ot;function Vre(t,e,r){let n=e.resolveStack(r),i=e.resolveInner(r,-1).resolve(r,0).enterUnfinishedNodesBefore(r);if(i!=n.node){let s=[];for(let o=i;o&&!(o.from<n.node.from||o.to>n.node.to||o.from==n.node.from&&o.type==n.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)n={node:s[o],next:n}}return DR(n,t,r)}function DR(t,e,r){for(let n=t;n;n=n.next){let i=jre(n.node);if(i)return i(k7.create(e,r,n))}return 0}function Wre(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function jre(t){let e=t.type.prop(OR);if(e)return e;let r=t.firstChild,n;if(r&&(n=r.type.prop(Ot.closedBy))){let i=t.lastChild,s=i&&n.indexOf(i.name)>-1;return o=>IR(o,!0,1,void 0,s&&!Wre(o)?i.from:void 0)}return t.parent==null?Ure:null}function Ure(){return 0}class k7 extends Mv{constructor(e,r,n){super(e.state,e.options),this.base=e,this.pos=r,this.context=n}get node(){return this.context.node}static create(e,r,n){return new k7(e,r,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let r=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(r.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(Gre(n,e))break;r=this.state.doc.lineAt(n.from)}return this.lineIndent(r.from)}continue(){return DR(this.context.next,this.base,this.pos)}}function Gre(t,e){for(let r=e;r;r=r.parent)if(t==r)return!0;return!1}function Kre(t){let e=t.node,r=e.childAfter(e.from),n=e.lastChild;if(!r)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(r.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=r.to;;){let l=e.childAfter(a);if(!l||l==n)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(s.text.slice(r.to-s.from))[0].length;return{from:r.from,to:r.to+c}}a=l.to}}function $Ee({closing:t,align:e=!0,units:r=1}){return n=>IR(n,e,r,t)}function IR(t,e,r,n,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=n&&s.slice(o,o+n.length)==n||i==t.pos+o,l=e?Kre(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*r)}const zEe=t=>t.baseIndent;function HEe({except:t,units:e=1}={}){return r=>{let n=t&&t.test(r.textAfter);return r.baseIndent+(n?0:e*r.unit)}}const Yre=200;function Xre(){return Sr.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let r=t.newDoc,{head:n}=t.newSelection.main,i=r.lineAt(n);if(n>i.from+Yre)return t;let s=r.sliceString(i.from,n);if(!e.some(c=>c.test(s)))return t;let{state:o}=t,a=-1,l=[];for(let{head:c}of o.selection.ranges){let h=o.doc.lineAt(c);if(h.from==a)continue;a=h.from;let u=w7(o,h.from);if(u==null)continue;let f=/^\s*/.exec(h.text)[0],d=$m(o,u);f!=d&&l.push({from:h.from,to:h.from+f.length,insert:d})}return l.length?[t,{changes:l,sequential:!0}]:t})}const Jre=Ne.define(),Zre=new Ot;function qEe(t){let e=t.firstChild,r=t.lastChild;return e&&e.to<r.from?{from:e.to,to:r.type.isError?t.to:r.from}:null}function Qre(t,e,r){let n=kn(t);if(n.length<r)return null;let i=n.resolveStack(r,1),s=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=r||a.from>r)continue;if(s&&a.from<e)break;let l=a.type.prop(Zre);if(l&&(a.to<n.length-50||n.length==t.doc.length||!ene(a))){let c=l(a,t);c&&c.from<=r&&c.from>=e&&c.to>r&&(s=c)}}return s}function ene(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function qb(t,e,r){for(let n of t.facet(Jre)){let i=n(t,e,r);if(i)return i}return Qre(t,e,r)}function BR(t,e){let r=e.mapPos(t.from,1),n=e.mapPos(t.to,-1);return r>=n?void 0:{from:r,to:n}}const Av=kt.define({map:BR}),i1=kt.define({map:BR});function RR(t){let e=[];for(let{head:r}of t.state.selection.ranges)e.some(n=>n.from<=r&&n.to>=r)||e.push(t.lineBlockAt(r));return e}const eu=hn.define({create(){return lt.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((r,n)=>t=OM(t,r,n)),t=t.map(e.changes);for(let r of e.effects)if(r.is(Av)&&!tne(t,r.value.from,r.value.to)){let{preparePlaceholder:n}=e.state.facet(FR),i=n?lt.replace({widget:new lne(n(e.state,r.value))}):DM;t=t.update({add:[i.range(r.value.from,r.value.to)]})}else r.is(i1)&&(t=t.update({filter:(n,i)=>r.value.from!=n||r.value.to!=i,filterFrom:r.value.from,filterTo:r.value.to}));return e.selection&&(t=OM(t,e.selection.main.head)),t},provide:t=>$e.decorations.from(t),toJSON(t,e){let r=[];return t.between(0,e.doc.length,(n,i)=>{r.push(n,i)}),r},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let r=0;r<t.length;){let n=t[r++],i=t[r++];if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(DM.range(n,i))}return lt.set(e,!0)}});function OM(t,e,r=e){let n=!1;return t.between(e,r,(i,s)=>{i<r&&s>e&&(n=!0)}),n?t.update({filterFrom:e,filterTo:r,filter:(i,s)=>i>=r||s<=e}):t}function Vb(t,e,r){var n;let i=null;return(n=t.field(eu,!1))===null||n===void 0||n.between(e,r,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function tne(t,e,r){let n=!1;return t.between(e,e,(i,s)=>{i==e&&s==r&&(n=!0)}),n}function PR(t,e){return t.field(eu,!1)?e:e.concat(kt.appendConfig.of($R()))}const rne=t=>{for(let e of RR(t)){let r=qb(t.state,e.from,e.to);if(r)return t.dispatch({effects:PR(t.state,[Av.of(r),NR(t,r)])}),!0}return!1},nne=t=>{if(!t.state.field(eu,!1))return!1;let e=[];for(let r of RR(t)){let n=Vb(t.state,r.from,r.to);n&&e.push(i1.of(n),NR(t,n,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function NR(t,e,r=!0){let n=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return $e.announce.of(`${t.state.phrase(r?"Folded lines":"Unfolded lines")} ${n} ${t.state.phrase("to")} ${i}.`)}const ine=t=>{let{state:e}=t,r=[];for(let n=0;n<e.doc.length;){let i=t.lineBlockAt(n),s=qb(e,i.from,i.to);s&&r.push(Av.of(s)),n=(s?t.lineBlockAt(s.to):i).to+1}return r.length&&t.dispatch({effects:PR(t.state,r)}),!!r.length},sne=t=>{let e=t.state.field(eu,!1);if(!e||!e.size)return!1;let r=[];return e.between(0,t.state.doc.length,(n,i)=>{r.push(i1.of({from:n,to:i}))}),t.dispatch({effects:r}),!0},one=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:rne},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:nne},{key:"Ctrl-Alt-[",run:ine},{key:"Ctrl-Alt-]",run:sne}],ane={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},FR=Ne.define({combine(t){return ra(t,ane)}});function $R(t){return[eu,une]}function zR(t,e){let{state:r}=t,n=r.facet(FR),i=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=Vb(t.state,a.from,a.to);l&&t.dispatch({effects:i1.of(l)}),o.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=n.placeholderText,s.setAttribute("aria-label",r.phrase("folded code")),s.title=r.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const DM=lt.replace({widget:new class extends dl{toDOM(t){return zR(t,null)}}});class lne extends dl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return zR(e,this.value)}}const cne={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Iw extends tl{constructor(e,r){super(),this.config=e,this.open=r}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let r=document.createElement("span");return r.textContent=this.open?this.config.openText:this.config.closedText,r.title=e.state.phrase(this.open?"Fold line":"Unfold line"),r}}function hne(t={}){let e={...cne,...t},r=new Iw(e,!0),n=new Iw(e,!1),i=Ur.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(ac)!=o.state.facet(ac)||o.startState.field(eu,!1)!=o.state.field(eu,!1)||kn(o.startState)!=kn(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new Za;for(let l of o.viewportLineBlocks){let c=Vb(o.state,l.from,l.to)?n:qb(o.state,l.from,l.to)?r:null;c&&a.add(l.from,l.from,c)}return a.finish()}}),{domEventHandlers:s}=e;return[i,bre({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||$t.empty},initialSpacer(){return new Iw(e,!1)},domEventHandlers:{...s,click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let c=Vb(o.state,a.from,a.to);if(c)return o.dispatch({effects:i1.of(c)}),!0;let h=qb(o.state,a.from,a.to);return h?(o.dispatch({effects:Av.of(h)}),!0):!1}}}),$R()]}const une=$e.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class s1{constructor(e,r){this.specs=e;let n;function i(a){let l=sc.newName();return(n||(n=Object.create(null)))["."+l]=a,l}const s=typeof r.all=="string"?r.all:r.all?i(r.all):void 0,o=r.scope;this.scope=o instanceof bs?a=>a.prop(ch)==o.data:o?a=>a==o:void 0,this.style=AR(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=n?new sc(n):null,this.themeType=r.themeType}static define(e,r){return new s1(e,r||{})}}const k3=Ne.define(),HR=Ne.define({combine(t){return t.length?[t[0]]:null}});function Bw(t){let e=t.facet(k3);return e.length?e:t.facet(HR)}function qR(t,e){let r=[dne],n;return t instanceof s1&&(t.module&&r.push($e.styleModule.of(t.module)),n=t.themeType),e!=null&&e.fallback?r.push(HR.of(t)):n?r.push(k3.computeN([$e.darkTheme],i=>i.facet($e.darkTheme)==(n=="dark")?[t]:[])):r.push(k3.of(t)),r}class fne{constructor(e){this.markCache=Object.create(null),this.tree=kn(e.state),this.decorations=this.buildDeco(e,Bw(e.state)),this.decoratedTo=e.viewport.to}update(e){let r=kn(e.state),n=Bw(e.state),i=n!=Bw(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);r.length<s.to&&!i&&r.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(r!=this.tree||e.viewportChanged||i)&&(this.tree=r,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=s.to)}buildDeco(e,r){if(!r||!this.tree.length)return lt.none;let n=new Za;for(let{from:i,to:s}of e.visibleRanges)Rre(this.tree,r,(o,a,l)=>{n.add(o,a,this.markCache[l]||(this.markCache[l]=lt.mark({class:l})))},i,s);return n.finish()}}const dne=Cc.high(Ur.fromClass(fne,{decorations:t=>t.decorations})),pne=s1.define([{tag:ie.meta,color:"#404740"},{tag:ie.link,textDecoration:"underline"},{tag:ie.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ie.emphasis,fontStyle:"italic"},{tag:ie.strong,fontWeight:"bold"},{tag:ie.strikethrough,textDecoration:"line-through"},{tag:ie.keyword,color:"#708"},{tag:[ie.atom,ie.bool,ie.url,ie.contentSeparator,ie.labelName],color:"#219"},{tag:[ie.literal,ie.inserted],color:"#164"},{tag:[ie.string,ie.deleted],color:"#a11"},{tag:[ie.regexp,ie.escape,ie.special(ie.string)],color:"#e40"},{tag:ie.definition(ie.variableName),color:"#00f"},{tag:ie.local(ie.variableName),color:"#30a"},{tag:[ie.typeName,ie.namespace],color:"#085"},{tag:ie.className,color:"#167"},{tag:[ie.special(ie.variableName),ie.macroName],color:"#256"},{tag:ie.definition(ie.propertyName),color:"#00c"},{tag:ie.comment,color:"#940"},{tag:ie.invalid,color:"#f00"}]),mne=$e.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),VR=1e4,WR="()[]{}",jR=Ne.define({combine(t){return ra(t,{afterCursor:!0,brackets:WR,maxScanDistance:VR,renderMatch:bne})}}),gne=lt.mark({class:"cm-matchingBracket"}),yne=lt.mark({class:"cm-nonmatchingBracket"});function bne(t){let e=[],r=t.matched?gne:yne;return e.push(r.range(t.start.from,t.start.to)),t.end&&e.push(r.range(t.end.from,t.end.to)),e}const xne=hn.define({create(){return lt.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let r=[],n=e.state.facet(jR);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=$o(e.state,i.head,-1,n)||i.head>0&&$o(e.state,i.head-1,1,n)||n.afterCursor&&($o(e.state,i.head,1,n)||i.head<e.state.doc.length&&$o(e.state,i.head+1,-1,n));s&&(r=r.concat(n.renderMatch(s,e.state)))}return lt.set(r,!0)},provide:t=>$e.decorations.from(t)}),vne=[xne,mne];function wne(t={}){return[jR.of(t),vne]}const kne=new Ot;function C3(t,e,r){let n=t.prop(e<0?Ot.openedBy:Ot.closedBy);if(n)return n;if(t.name.length==1){let i=r.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[r[i+e]]}return null}function S3(t){let e=t.type.prop(kne);return e?e(t.node):t}function $o(t,e,r,n={}){let i=n.maxScanDistance||VR,s=n.brackets||WR,o=kn(t),a=o.resolveInner(e,r);for(let l=a;l;l=l.parent){let c=C3(l.type,r,s);if(c&&l.from<l.to){let h=S3(l);if(h&&(r>0?e>=h.from&&e<h.to:e>h.from&&e<=h.to))return Cne(t,e,r,l,h,c,s)}}return Sne(t,e,r,o,a.type,i,s)}function Cne(t,e,r,n,i,s,o){let a=n.parent,l={from:i.from,to:i.to},c=0,h=a==null?void 0:a.cursor();if(h&&(r<0?h.childBefore(n.from):h.childAfter(n.to)))do if(r<0?h.to<=n.from:h.from>=n.to){if(c==0&&s.indexOf(h.type.name)>-1&&h.from<h.to){let u=S3(h);return{start:l,end:u?{from:u.from,to:u.to}:void 0,matched:!0}}else if(C3(h.type,r,o))c++;else if(C3(h.type,-r,o)){if(c==0){let u=S3(h);return{start:l,end:u&&u.from<u.to?{from:u.from,to:u.to}:void 0,matched:!1}}c--}}while(r<0?h.prevSibling():h.nextSibling());return{start:l,matched:!1}}function Sne(t,e,r,n,i,s,o){let a=r<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=r>0)return null;let c={from:r<0?e-1:e,to:r>0?e+1:e},h=t.doc.iterRange(e,r>0?t.doc.length:0),u=0;for(let f=0;!h.next().done&&f<=s;){let d=h.value;r<0&&(f+=d.length);let p=e+f*r;for(let m=r>0?0:d.length-1,g=r>0?d.length:-1;m!=g;m+=r){let y=o.indexOf(d[m]);if(!(y<0||n.resolveInner(p+m,1).type!=i))if(y%2==0==r>0)u++;else{if(u==1)return{start:c,end:{from:p+m,to:p+m+1},matched:y>>1==l>>1};u--}}r>0&&(f+=d.length)}return h.done?{start:c,matched:!1}:null}function IM(t,e,r,n=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let o=n;o<e;o++)t.charCodeAt(o)==9?s+=r-s%r:s++;return s}class UR{constructor(e,r,n,i){this.string=e,this.tabSize=r,this.indentUnit=n,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let r=this.string.charAt(this.pos),n;if(typeof e=="string"?n=r==e:n=r&&(e instanceof RegExp?e.test(r):e(r)),n)return++this.pos,r}eatWhile(e){let r=this.pos;for(;this.eat(e););return this.pos>r}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let r=this.string.indexOf(e,this.pos);if(r>-1)return this.pos=r,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=IM(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:IM(this.string,null,this.tabSize)}match(e,r,n){if(typeof e=="string"){let i=o=>n?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(r!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&r!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function Tne(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||_ne,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||T7,mergeTokens:t.mergeTokens!==!1}}function _ne(t){if(typeof t!="object")return t;let e={};for(let r in t){let n=t[r];e[r]=n instanceof Array?n.slice():n}return e}const BM=new WeakMap;class C7 extends bs{constructor(e){let r=ER(e.languageData),n=Tne(e),i,s=new class extends YI{createParse(o,a,l){return new Ane(i,o,a,l)}};super(r,s,[],e.name),this.topNode=One(r,this),i=this,this.streamParser=n,this.stateAfter=new Ot({perNode:!0}),this.tokenTable=e.tokenTable?new XR(n.tokenTable):Lne}static define(e){return new C7(e)}getIndent(e){let r,{overrideIndentation:n}=e.options;n&&(r=BM.get(e.state),r!=null&&r<e.pos-1e4&&(r=void 0));let i=S7(this,e.node.tree,e.node.from,e.node.from,r??e.pos),s,o;if(i?(o=i.state,s=i.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),c=Math.min(e.pos,l.to);if(l.length){let h=n?n(l.from):-1,u=new UR(l.text,e.state.tabSize,e.unit,h<0?void 0:h);for(;u.pos<c-l.from;)KR(this.streamParser.token,u,o)}else this.streamParser.blankLine(o,e.unit);if(c==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return n&&r==null&&BM.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function S7(t,e,r,n,i){let s=r>=n&&r+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:r+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=r+e.positions[o],c=a instanceof dr&&l<i&&S7(t,a,l,n,i);if(c)return c}return null}function GR(t,e,r,n,i){if(i&&r<=0&&n>=e.length)return e;!i&&r==0&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<n&&a instanceof dr){if(!(l=GR(t,a,r-o,n-o,i)))break;return i?new dr(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function Mne(t,e,r,n,i){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=r&&a>r&&S7(t,s.tree,0-s.offset,r,a),c;if(l&&l.pos<=n&&(c=GR(t,s.tree,r+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:c}}return{state:t.streamParser.startState(i?Qh(i):4),tree:dr.empty}}class Ane{constructor(e,r,n,i){this.lang=e,this.input=r,this.fragments=n,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=v3.get(),o=i[0].from,{state:a,tree:l}=Mne(e,n,o,this.to,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(c=>c.from<=s.viewport.from&&c.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Qh(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=v3.get(),r=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),n=Math.min(r,this.chunkStart+512);for(e&&(n=Math.min(n,e.viewport.to));this.parsedPos<n;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=r?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,r),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let r=this.input.chunk(e);if(this.input.lineChunks)r==`
`&&(r="");else{let n=r.indexOf(`
`);n>-1&&(r=r.slice(0,n))}return e+r.length<=this.to?r:r.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,r=this.lineAfter(e),n=e+r.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=n||(r=r.slice(0,s-(n-r.length)),i++,i==this.ranges.length))break;let o=this.ranges[i].from,a=this.lineAfter(o);r+=a,n=o+a.length}return{line:r,end:n}}skipGapsTo(e,r,n){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+r;if(n>0?i>s:i>=s)break;let o=this.ranges[++this.rangeIndex].from;r+=o-i}return r}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,r,n,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(r,i,1),r+=i;let a=this.chunk.length;i=this.skipGapsTo(n,i,-1),n+=i,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==r?this.chunk[o+2]=n:this.chunk.push(e,r,n,s),i}parseLine(e){let{line:r,end:n}=this.nextLine(),i=0,{streamParser:s}=this.lang,o=new UR(r,e?e.state.tabSize:4,e?Qh(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=KR(s.token,o,this.state);if(a&&(i=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,i)),o.start>1e4)break}this.parsedPos=n,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=dr.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Ene,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new dr(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new dr(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function KR(t,e,r){e.start=e.pos;for(let n=0;n<10;n++){let i=t(e,r);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const T7=Object.create(null),zm=[ns.none],Ene=new r7(zm),RM=[],PM=Object.create(null),YR=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])YR[t]=JR(T7,e);class XR{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),YR)}resolve(e){return e?this.table[e]||(this.table[e]=JR(this.extra,e)):0}}const Lne=new XR(T7);function Rw(t,e){RM.indexOf(t)>-1||(RM.push(t),console.warn(e))}function JR(t,e){let r=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let h=t[c]||ie[c];h?typeof h=="function"?l.length?l=l.map(h):Rw(c,`Modifier ${c} used at start of tag`):l.length?Rw(c,`Tag ${c} used as modifier`):l=Array.isArray(h)?h:[h]:Rw(c,`Unknown highlighting tag ${c}`)}for(let c of l)r.push(c)}if(!r.length)return 0;let n=e.replace(/ /g,"_"),i=n+" "+r.map(a=>a.id),s=PM[i];if(s)return s.id;let o=PM[i]=ns.define({id:zm.length,name:n,props:[Ire({[n]:r})]});return zm.push(o),o.id}function One(t,e){let r=ns.define({id:zm.length,name:"Document",props:[ch.add(()=>t),OR.add(()=>n=>e.getIndent(n))],top:!0});return zm.push(r),r}br.RTL,br.LTR;function fe(t){return new Hre(C7.define(t))}function vl(t){return X(()=>import("./index-CH1mf4nG.js"),__vite__mapDeps([0,1,2])).then(e=>e.sql({dialect:e[t]}))}const Dne=[Q.of({name:"C",extensions:["c","h","ino"],load(){return X(()=>import("./index-DQfvJRAp.js"),__vite__mapDeps([3,1,2])).then(t=>t.cpp())}}),Q.of({name:"C++",alias:["cpp"],extensions:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],load(){return X(()=>import("./index-DQfvJRAp.js"),__vite__mapDeps([3,1,2])).then(t=>t.cpp())}}),Q.of({name:"CQL",alias:["cassandra"],extensions:["cql"],load(){return vl("Cassandra")}}),Q.of({name:"CSS",extensions:["css"],load(){return X(()=>import("./index-C07MktmR.js"),__vite__mapDeps([4,1,2])).then(t=>t.css())}}),Q.of({name:"Go",extensions:["go"],load(){return X(()=>import("./index-Czk-u_Z0.js"),__vite__mapDeps([5,1,2])).then(t=>t.go())}}),Q.of({name:"HTML",alias:["xhtml"],extensions:["html","htm","handlebars","hbs"],load(){return X(()=>import("./index-Dug-2lPl.js"),__vite__mapDeps([6,1,4,2,7])).then(t=>t.html())}}),Q.of({name:"Java",extensions:["java"],load(){return X(()=>import("./index-CEdcaki7.js"),__vite__mapDeps([8,1,2])).then(t=>t.java())}}),Q.of({name:"JavaScript",alias:["ecmascript","js","node"],extensions:["js","mjs","cjs"],load(){return X(()=>import("./index-DIA8mN-I.js"),__vite__mapDeps([7,1,2])).then(t=>t.javascript())}}),Q.of({name:"Jinja",extensions:["j2","jinja","jinja2"],load(){return X(()=>import("./index-0TvBlzq5.js"),__vite__mapDeps([9,6,1,4,2,7])).then(t=>t.jinja())}}),Q.of({name:"JSON",alias:["json5"],extensions:["json","map"],load(){return X(()=>import("./index-DbwXqz6b.js"),__vite__mapDeps([10,1,2])).then(t=>t.json())}}),Q.of({name:"JSX",extensions:["jsx"],load(){return X(()=>import("./index-DIA8mN-I.js"),__vite__mapDeps([7,1,2])).then(t=>t.javascript({jsx:!0}))}}),Q.of({name:"LESS",extensions:["less"],load(){return X(()=>import("./index-CZaHQo-x.js"),__vite__mapDeps([11,4,1,2])).then(t=>t.less())}}),Q.of({name:"Liquid",extensions:["liquid"],load(){return X(()=>import("./index-EPjGucXc.js"),__vite__mapDeps([12,6,1,4,2,7])).then(t=>t.liquid())}}),Q.of({name:"MariaDB SQL",load(){return vl("MariaSQL")}}),Q.of({name:"Markdown",extensions:["md","markdown","mkd"],load(){return X(()=>import("./index-9EhX_XNt.js"),__vite__mapDeps([13,6,1,4,2,7])).then(t=>t.markdown())}}),Q.of({name:"MS SQL",load(){return vl("MSSQL")}}),Q.of({name:"MySQL",load(){return vl("MySQL")}}),Q.of({name:"PHP",extensions:["php","php3","php4","php5","php7","phtml"],load(){return X(()=>import("./index-BcpicjVO.js"),__vite__mapDeps([14,1,6,4,2,7])).then(t=>t.php())}}),Q.of({name:"PLSQL",extensions:["pls"],load(){return vl("PLSQL")}}),Q.of({name:"PostgreSQL",load(){return vl("PostgreSQL")}}),Q.of({name:"Python",extensions:["BUILD","bzl","py","pyw"],filename:/^(BUCK|BUILD)$/,load(){return X(()=>import("./index-C-n7okg2.js"),__vite__mapDeps([15,1,2])).then(t=>t.python())}}),Q.of({name:"Rust",extensions:["rs"],load(){return X(()=>import("./index-1mecFLdy.js"),__vite__mapDeps([16,1,2])).then(t=>t.rust())}}),Q.of({name:"Sass",extensions:["sass"],load(){return X(()=>import("./index-BqBNAq6H.js"),__vite__mapDeps([17,1,4,2])).then(t=>t.sass({indented:!0}))}}),Q.of({name:"SCSS",extensions:["scss"],load(){return X(()=>import("./index-BqBNAq6H.js"),__vite__mapDeps([17,1,4,2])).then(t=>t.sass())}}),Q.of({name:"SQL",extensions:["sql"],load(){return vl("StandardSQL")}}),Q.of({name:"SQLite",load(){return vl("SQLite")}}),Q.of({name:"TSX",extensions:["tsx"],load(){return X(()=>import("./index-DIA8mN-I.js"),__vite__mapDeps([7,1,2])).then(t=>t.javascript({jsx:!0,typescript:!0}))}}),Q.of({name:"TypeScript",alias:["ts"],extensions:["ts","mts","cts"],load(){return X(()=>import("./index-DIA8mN-I.js"),__vite__mapDeps([7,1,2])).then(t=>t.javascript({typescript:!0}))}}),Q.of({name:"WebAssembly",extensions:["wat","wast"],load(){return X(()=>import("./index-DWXckmfL.js"),__vite__mapDeps([18,1,2])).then(t=>t.wast())}}),Q.of({name:"XML",alias:["rss","wsdl","xsd"],extensions:["xml","xsl","xsd","svg"],load(){return X(()=>import("./index-CtOQhT_D.js"),__vite__mapDeps([19,1,2])).then(t=>t.xml())}}),Q.of({name:"YAML",alias:["yml"],extensions:["yaml","yml"],load(){return X(()=>import("./index-RI3ow2DN.js"),__vite__mapDeps([20,1,2])).then(t=>t.yaml())}}),Q.of({name:"APL",extensions:["dyalog","apl"],load(){return X(()=>import("./apl-B4CMkyY2.js"),[]).then(t=>fe(t.apl))}}),Q.of({name:"PGP",alias:["asciiarmor"],extensions:["asc","pgp","sig"],load(){return X(()=>import("./asciiarmor-Df11BRmG.js"),[]).then(t=>fe(t.asciiArmor))}}),Q.of({name:"ASN.1",extensions:["asn","asn1"],load(){return X(()=>import("./asn1-EdZsLKOL.js"),[]).then(t=>fe(t.asn1({})))}}),Q.of({name:"Asterisk",filename:/^extensions\.conf$/i,load(){return X(()=>import("./asterisk-B-8jnY81.js"),[]).then(t=>fe(t.asterisk))}}),Q.of({name:"Brainfuck",extensions:["b","bf"],load(){return X(()=>import("./brainfuck-C4LP7Hcl.js"),[]).then(t=>fe(t.brainfuck))}}),Q.of({name:"Cobol",extensions:["cob","cpy"],load(){return X(()=>import("./cobol-CWcv1MsR.js"),[]).then(t=>fe(t.cobol))}}),Q.of({name:"C#",alias:["csharp","cs"],extensions:["cs"],load(){return X(()=>import("./clike-B9uivgTg.js"),[]).then(t=>fe(t.csharp))}}),Q.of({name:"Clojure",extensions:["clj","cljc","cljx"],load(){return X(()=>import("./clojure-BMjYHr_A.js"),[]).then(t=>fe(t.clojure))}}),Q.of({name:"ClojureScript",extensions:["cljs"],load(){return X(()=>import("./clojure-BMjYHr_A.js"),[]).then(t=>fe(t.clojure))}}),Q.of({name:"Closure Stylesheets (GSS)",extensions:["gss"],load(){return X(()=>import("./css-BnMrqG3P.js"),[]).then(t=>fe(t.gss))}}),Q.of({name:"CMake",extensions:["cmake","cmake.in"],filename:/^CMakeLists\.txt$/,load(){return X(()=>import("./cmake-BQqOBYOt.js"),[]).then(t=>fe(t.cmake))}}),Q.of({name:"CoffeeScript",alias:["coffee","coffee-script"],extensions:["coffee"],load(){return X(()=>import("./coffeescript-S37ZYGWr.js"),[]).then(t=>fe(t.coffeeScript))}}),Q.of({name:"Common Lisp",alias:["lisp"],extensions:["cl","lisp","el"],load(){return X(()=>import("./commonlisp-DBKNyK5s.js"),[]).then(t=>fe(t.commonLisp))}}),Q.of({name:"Cypher",extensions:["cyp","cypher"],load(){return X(()=>import("./cypher-C_CwsFkJ.js"),[]).then(t=>fe(t.cypher))}}),Q.of({name:"Cython",extensions:["pyx","pxd","pxi"],load(){return X(()=>import("./python-BuPzkPfP.js"),[]).then(t=>fe(t.cython))}}),Q.of({name:"Crystal",extensions:["cr"],load(){return X(()=>import("./crystal-SjHAIU92.js"),[]).then(t=>fe(t.crystal))}}),Q.of({name:"D",extensions:["d"],load(){return X(()=>import("./d-pRatUO7H.js"),[]).then(t=>fe(t.d))}}),Q.of({name:"Dart",extensions:["dart"],load(){return X(()=>import("./clike-B9uivgTg.js"),[]).then(t=>fe(t.dart))}}),Q.of({name:"diff",extensions:["diff","patch"],load(){return X(()=>import("./diff-DbItnlRl.js"),[]).then(t=>fe(t.diff))}}),Q.of({name:"Dockerfile",filename:/^Dockerfile$/,load(){return X(()=>import("./dockerfile-BKs6k2Af.js"),__vite__mapDeps([21,22])).then(t=>fe(t.dockerFile))}}),Q.of({name:"DTD",extensions:["dtd"],load(){return X(()=>import("./dtd-DF_7sFjM.js"),[]).then(t=>fe(t.dtd))}}),Q.of({name:"Dylan",extensions:["dylan","dyl","intr"],load(){return X(()=>import("./dylan-DwRh75JA.js"),[]).then(t=>fe(t.dylan))}}),Q.of({name:"EBNF",load(){return X(()=>import("./ebnf-CDyGwa7X.js"),[]).then(t=>fe(t.ebnf))}}),Q.of({name:"ECL",extensions:["ecl"],load(){return X(()=>import("./ecl-Cabwm37j.js"),[]).then(t=>fe(t.ecl))}}),Q.of({name:"edn",extensions:["edn"],load(){return X(()=>import("./clojure-BMjYHr_A.js"),[]).then(t=>fe(t.clojure))}}),Q.of({name:"Eiffel",extensions:["e"],load(){return X(()=>import("./eiffel-CnydiIhH.js"),[]).then(t=>fe(t.eiffel))}}),Q.of({name:"Elm",extensions:["elm"],load(){return X(()=>import("./elm-vLlmbW-K.js"),[]).then(t=>fe(t.elm))}}),Q.of({name:"Erlang",extensions:["erl"],load(){return X(()=>import("./erlang-BNw1qcRV.js"),[]).then(t=>fe(t.erlang))}}),Q.of({name:"Esper",load(){return X(()=>import("./sql-D0XecflT.js"),[]).then(t=>fe(t.esper))}}),Q.of({name:"Factor",extensions:["factor"],load(){return X(()=>import("./factor-kuTfRLto.js"),__vite__mapDeps([23,22])).then(t=>fe(t.factor))}}),Q.of({name:"FCL",load(){return X(()=>import("./fcl-Kvtd6kyn.js"),[]).then(t=>fe(t.fcl))}}),Q.of({name:"Forth",extensions:["forth","fth","4th"],load(){return X(()=>import("./forth-Ffai-XNe.js"),[]).then(t=>fe(t.forth))}}),Q.of({name:"Fortran",extensions:["f","for","f77","f90","f95"],load(){return X(()=>import("./fortran-DYz_wnZ1.js"),[]).then(t=>fe(t.fortran))}}),Q.of({name:"F#",alias:["fsharp"],extensions:["fs"],load(){return X(()=>import("./mllike-CXdrOF99.js"),[]).then(t=>fe(t.fSharp))}}),Q.of({name:"Gas",extensions:["s"],load(){return X(()=>import("./gas-Bneqetm1.js"),[]).then(t=>fe(t.gas))}}),Q.of({name:"Gherkin",extensions:["feature"],load(){return X(()=>import("./gherkin-heZmZLOM.js"),[]).then(t=>fe(t.gherkin))}}),Q.of({name:"Groovy",extensions:["groovy","gradle"],filename:/^Jenkinsfile$/,load(){return X(()=>import("./groovy-D9Dt4D0W.js"),[]).then(t=>fe(t.groovy))}}),Q.of({name:"Haskell",extensions:["hs"],load(){return X(()=>import("./haskell-BWDZoCOh.js"),[]).then(t=>fe(t.haskell))}}),Q.of({name:"Haxe",extensions:["hx"],load(){return X(()=>import("./haxe-H-WmDvRZ.js"),[]).then(t=>fe(t.haxe))}}),Q.of({name:"HXML",extensions:["hxml"],load(){return X(()=>import("./haxe-H-WmDvRZ.js"),[]).then(t=>fe(t.hxml))}}),Q.of({name:"HTTP",load(){return X(()=>import("./http-DBlCnlav.js"),[]).then(t=>fe(t.http))}}),Q.of({name:"IDL",extensions:["pro"],load(){return X(()=>import("./idl-BEugSyMb.js"),[]).then(t=>fe(t.idl))}}),Q.of({name:"JSON-LD",alias:["jsonld"],extensions:["jsonld"],load(){return X(()=>import("./javascript-qCveANmP.js"),[]).then(t=>fe(t.jsonld))}}),Q.of({name:"Julia",extensions:["jl"],load(){return X(()=>import("./julia-DuME0IfC.js"),[]).then(t=>fe(t.julia))}}),Q.of({name:"Kotlin",extensions:["kt","kts"],load(){return X(()=>import("./clike-B9uivgTg.js"),[]).then(t=>fe(t.kotlin))}}),Q.of({name:"LiveScript",alias:["ls"],extensions:["ls"],load(){return X(()=>import("./livescript-BwQOo05w.js"),[]).then(t=>fe(t.liveScript))}}),Q.of({name:"Lua",extensions:["lua"],load(){return X(()=>import("./lua-BgMRiT3U.js"),[]).then(t=>fe(t.lua))}}),Q.of({name:"mIRC",extensions:["mrc"],load(){return X(()=>import("./mirc-CjQqDB4T.js"),[]).then(t=>fe(t.mirc))}}),Q.of({name:"Mathematica",extensions:["m","nb","wl","wls"],load(){return X(()=>import("./mathematica-DTrFuWx2.js"),[]).then(t=>fe(t.mathematica))}}),Q.of({name:"Modelica",extensions:["mo"],load(){return X(()=>import("./modelica-Dc1JOy9r.js"),[]).then(t=>fe(t.modelica))}}),Q.of({name:"MUMPS",extensions:["mps"],load(){return X(()=>import("./mumps-BT43cFF4.js"),[]).then(t=>fe(t.mumps))}}),Q.of({name:"Mbox",extensions:["mbox"],load(){return X(()=>import("./mbox-CNhZ1qSd.js"),[]).then(t=>fe(t.mbox))}}),Q.of({name:"Nginx",filename:/nginx.*\.conf$/i,load(){return X(()=>import("./nginx-DdIZxoE0.js"),[]).then(t=>fe(t.nginx))}}),Q.of({name:"NSIS",extensions:["nsh","nsi"],load(){return X(()=>import("./nsis-LdVXkNf5.js"),__vite__mapDeps([24,22])).then(t=>fe(t.nsis))}}),Q.of({name:"NTriples",extensions:["nt","nq"],load(){return X(()=>import("./ntriples-BfvgReVJ.js"),[]).then(t=>fe(t.ntriples))}}),Q.of({name:"Objective-C",alias:["objective-c","objc"],extensions:["m"],load(){return X(()=>import("./clike-B9uivgTg.js"),[]).then(t=>fe(t.objectiveC))}}),Q.of({name:"Objective-C++",alias:["objective-c++","objc++"],extensions:["mm"],load(){return X(()=>import("./clike-B9uivgTg.js"),[]).then(t=>fe(t.objectiveCpp))}}),Q.of({name:"OCaml",extensions:["ml","mli","mll","mly"],load(){return X(()=>import("./mllike-CXdrOF99.js"),[]).then(t=>fe(t.oCaml))}}),Q.of({name:"Octave",extensions:["m"],load(){return X(()=>import("./octave-Ck1zUtKM.js"),[]).then(t=>fe(t.octave))}}),Q.of({name:"Oz",extensions:["oz"],load(){return X(()=>import("./oz-BzwKVEFT.js"),[]).then(t=>fe(t.oz))}}),Q.of({name:"Pascal",extensions:["p","pas"],load(){return X(()=>import("./pascal--L3eBynH.js"),[]).then(t=>fe(t.pascal))}}),Q.of({name:"Perl",extensions:["pl","pm"],load(){return X(()=>import("./perl-CdXCOZ3F.js"),[]).then(t=>fe(t.perl))}}),Q.of({name:"Pig",extensions:["pig"],load(){return X(()=>import("./pig-CevX1Tat.js"),[]).then(t=>fe(t.pig))}}),Q.of({name:"PowerShell",extensions:["ps1","psd1","psm1"],load(){return X(()=>import("./powershell-CFHJl5sT.js"),[]).then(t=>fe(t.powerShell))}}),Q.of({name:"Properties files",alias:["ini","properties"],extensions:["properties","ini","in"],load(){return X(()=>import("./properties-C78fOPTZ.js"),[]).then(t=>fe(t.properties))}}),Q.of({name:"ProtoBuf",extensions:["proto"],load(){return X(()=>import("./protobuf-ChK-085T.js"),[]).then(t=>fe(t.protobuf))}}),Q.of({name:"Pug",alias:["jade"],extensions:["pug","jade"],load(){return X(()=>import("./pug-DukmZTjD.js"),__vite__mapDeps([25,26])).then(t=>fe(t.pug))}}),Q.of({name:"Puppet",extensions:["pp"],load(){return X(()=>import("./puppet-DMA9R1ak.js"),[]).then(t=>fe(t.puppet))}}),Q.of({name:"Q",extensions:["q"],load(){return X(()=>import("./q-pXgVlZs6.js"),[]).then(t=>fe(t.q))}}),Q.of({name:"R",alias:["rscript"],extensions:["r","R"],load(){return X(()=>import("./r-DUYO_cvP.js"),[]).then(t=>fe(t.r))}}),Q.of({name:"RPM Changes",load(){return X(()=>import("./rpm-CTu-6PCP.js"),[]).then(t=>fe(t.rpmChanges))}}),Q.of({name:"RPM Spec",extensions:["spec"],load(){return X(()=>import("./rpm-CTu-6PCP.js"),[]).then(t=>fe(t.rpmSpec))}}),Q.of({name:"Ruby",alias:["jruby","macruby","rake","rb","rbx"],extensions:["rb"],filename:/^(Gemfile|Rakefile)$/,load(){return X(()=>import("./ruby-B2Rjki9n.js"),[]).then(t=>fe(t.ruby))}}),Q.of({name:"SAS",extensions:["sas"],load(){return X(()=>import("./sas-B4kiWyti.js"),[]).then(t=>fe(t.sas))}}),Q.of({name:"Scala",extensions:["scala"],load(){return X(()=>import("./clike-B9uivgTg.js"),[]).then(t=>fe(t.scala))}}),Q.of({name:"Scheme",extensions:["scm","ss"],load(){return X(()=>import("./scheme-C41bIUwD.js"),[]).then(t=>fe(t.scheme))}}),Q.of({name:"Shell",alias:["bash","sh","zsh"],extensions:["sh","ksh","bash"],filename:/^PKGBUILD$/,load(){return X(()=>import("./shell-CjFT_Tl9.js"),[]).then(t=>fe(t.shell))}}),Q.of({name:"Sieve",extensions:["siv","sieve"],load(){return X(()=>import("./sieve-C3Gn_uJK.js"),[]).then(t=>fe(t.sieve))}}),Q.of({name:"Smalltalk",extensions:["st"],load(){return X(()=>import("./smalltalk-CnHTOXQT.js"),[]).then(t=>fe(t.smalltalk))}}),Q.of({name:"Solr",load(){return X(()=>import("./solr-DehyRSwq.js"),[]).then(t=>fe(t.solr))}}),Q.of({name:"SML",extensions:["sml","sig","fun","smackspec"],load(){return X(()=>import("./mllike-CXdrOF99.js"),[]).then(t=>fe(t.sml))}}),Q.of({name:"SPARQL",alias:["sparul"],extensions:["rq","sparql"],load(){return X(()=>import("./sparql-DkYu6x3z.js"),[]).then(t=>fe(t.sparql))}}),Q.of({name:"Spreadsheet",alias:["excel","formula"],load(){return X(()=>import("./spreadsheet-BCZA_wO0.js"),[]).then(t=>fe(t.spreadsheet))}}),Q.of({name:"Squirrel",extensions:["nut"],load(){return X(()=>import("./clike-B9uivgTg.js"),[]).then(t=>fe(t.squirrel))}}),Q.of({name:"Stylus",extensions:["styl"],load(){return X(()=>import("./stylus-B533Al4x.js"),[]).then(t=>fe(t.stylus))}}),Q.of({name:"Swift",extensions:["swift"],load(){return X(()=>import("./swift-BzpIVaGY.js"),[]).then(t=>fe(t.swift))}}),Q.of({name:"sTeX",load(){return X(()=>import("./stex-C3f8Ysf7.js"),[]).then(t=>fe(t.stex))}}),Q.of({name:"LaTeX",alias:["tex"],extensions:["text","ltx","tex"],load(){return X(()=>import("./stex-C3f8Ysf7.js"),[]).then(t=>fe(t.stex))}}),Q.of({name:"SystemVerilog",extensions:["v","sv","svh"],load(){return X(()=>import("./verilog-C6RDOZhf.js"),[]).then(t=>fe(t.verilog))}}),Q.of({name:"Tcl",extensions:["tcl"],load(){return X(()=>import("./tcl-DVfN8rqt.js"),[]).then(t=>fe(t.tcl))}}),Q.of({name:"Textile",extensions:["textile"],load(){return X(()=>import("./textile-CnDTJFAw.js"),[]).then(t=>fe(t.textile))}}),Q.of({name:"TiddlyWiki",load(){return X(()=>import("./tiddlywiki-DO-Gjzrf.js"),[]).then(t=>fe(t.tiddlyWiki))}}),Q.of({name:"Tiki wiki",load(){return X(()=>import("./tiki-DGYXhP31.js"),[]).then(t=>fe(t.tiki))}}),Q.of({name:"TOML",extensions:["toml"],load(){return X(()=>import("./toml-Bm5Em-hy.js"),[]).then(t=>fe(t.toml))}}),Q.of({name:"Troff",extensions:["1","2","3","4","5","6","7","8","9"],load(){return X(()=>import("./troff-wAsdV37c.js"),[]).then(t=>fe(t.troff))}}),Q.of({name:"TTCN",extensions:["ttcn","ttcn3","ttcnpp"],load(){return X(()=>import("./ttcn-CfJYG6tj.js"),[]).then(t=>fe(t.ttcn))}}),Q.of({name:"TTCN_CFG",extensions:["cfg"],load(){return X(()=>import("./ttcn-cfg-B9xdYoR4.js"),[]).then(t=>fe(t.ttcnCfg))}}),Q.of({name:"Turtle",extensions:["ttl"],load(){return X(()=>import("./turtle-B1tBg_DP.js"),[]).then(t=>fe(t.turtle))}}),Q.of({name:"Web IDL",extensions:["webidl"],load(){return X(()=>import("./webidl-ZXfAyPTL.js"),[]).then(t=>fe(t.webIDL))}}),Q.of({name:"VB.NET",extensions:["vb"],load(){return X(()=>import("./vb-CmGdzxic.js"),[]).then(t=>fe(t.vb))}}),Q.of({name:"VBScript",extensions:["vbs"],load(){return X(()=>import("./vbscript-BuJXcnF6.js"),[]).then(t=>fe(t.vbScript))}}),Q.of({name:"Velocity",extensions:["vtl"],load(){return X(()=>import("./velocity-D8B20fx6.js"),[]).then(t=>fe(t.velocity))}}),Q.of({name:"Verilog",extensions:["v"],load(){return X(()=>import("./verilog-C6RDOZhf.js"),[]).then(t=>fe(t.verilog))}}),Q.of({name:"VHDL",extensions:["vhd","vhdl"],load(){return X(()=>import("./vhdl-lSbBsy5d.js"),[]).then(t=>fe(t.vhdl))}}),Q.of({name:"XQuery",extensions:["xy","xquery","xq","xqm","xqy"],load(){return X(()=>import("./xquery-CQfU5ijd.js"),[]).then(t=>fe(t.xQuery))}}),Q.of({name:"Yacas",extensions:["ys"],load(){return X(()=>import("./yacas-BJ4BC0dw.js"),[]).then(t=>fe(t.yacas))}}),Q.of({name:"Z80",extensions:["z80"],load(){return X(()=>import("./z80-Hz9HOZM7.js"),[]).then(t=>fe(t.z80))}}),Q.of({name:"MscGen",extensions:["mscgen","mscin","msc"],load(){return X(()=>import("./mscgen-BA5vi2Kp.js"),[]).then(t=>fe(t.mscgen))}}),Q.of({name:"X",extensions:["xu"],load(){return X(()=>import("./mscgen-BA5vi2Kp.js"),[]).then(t=>fe(t.xu))}}),Q.of({name:"MsGenny",extensions:["msgenny"],load(){return X(()=>import("./mscgen-BA5vi2Kp.js"),[]).then(t=>fe(t.msgenny))}}),Q.of({name:"Vue",extensions:["vue"],load(){return X(()=>import("./index-IJiJAXIA.js"),__vite__mapDeps([27,6,1,4,2,7])).then(t=>t.vue())}}),Q.of({name:"Angular Template",load(){return X(()=>import("./index-CnDAYi1_.js"),__vite__mapDeps([28,6,1,4,2,7])).then(t=>t.angular())}})],Ine="#e5c07b",NM="#e06c75",Bne="#56b6c2",Rne="#ffffff",v2="#abb2bf",T3="#7d8799",Pne="#61afef",Nne="#98c379",FM="#d19a66",Fne="#c678dd",$ne="#21252b",$M="#2c313a",zM="#282c34",Pw="#353a42",zne="#3E4451",HM="#528bff",Hne=$e.theme({"&":{color:v2,backgroundColor:zM},".cm-content":{caretColor:HM},".cm-cursor, .cm-dropCursor":{borderLeftColor:HM},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:zne},".cm-panels":{backgroundColor:$ne,color:v2},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:zM,color:T3,border:"none"},".cm-activeLineGutter":{backgroundColor:$M},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Pw},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Pw,borderBottomColor:Pw},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:$M,color:v2}}},{dark:!0}),qne=s1.define([{tag:ie.keyword,color:Fne},{tag:[ie.name,ie.deleted,ie.character,ie.propertyName,ie.macroName],color:NM},{tag:[ie.function(ie.variableName),ie.labelName],color:Pne},{tag:[ie.color,ie.constant(ie.name),ie.standard(ie.name)],color:FM},{tag:[ie.definition(ie.name),ie.separator],color:v2},{tag:[ie.typeName,ie.className,ie.number,ie.changed,ie.annotation,ie.modifier,ie.self,ie.namespace],color:Ine},{tag:[ie.operator,ie.operatorKeyword,ie.url,ie.escape,ie.regexp,ie.link,ie.special(ie.string)],color:Bne},{tag:[ie.meta,ie.comment],color:T3},{tag:ie.strong,fontWeight:"bold"},{tag:ie.emphasis,fontStyle:"italic"},{tag:ie.strikethrough,textDecoration:"line-through"},{tag:ie.link,color:T3,textDecoration:"underline"},{tag:ie.heading,fontWeight:"bold",color:NM},{tag:[ie.atom,ie.bool,ie.special(ie.variableName)],color:FM},{tag:[ie.processingInstruction,ie.string,ie.inserted],color:Nne},{tag:ie.invalid,color:Rne}]),Vne=[Hne,qR(qne)];function pn(t){this.content=t}pn.prototype={constructor:pn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,r){var n=r&&r!=t?this.remove(r):this,i=n.find(t),s=n.content.slice();return i==-1?s.push(r||t,e):(s[i+1]=e,r&&(s[i]=r)),new pn(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new pn(r)},addToStart:function(t,e){return new pn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new pn(r)},addBefore:function(t,e,r){var n=this.remove(e),i=n.content.slice(),s=n.find(t);return i.splice(s==-1?i.length:s,0,e,r),new pn(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=pn.from(t),t.size?new pn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=pn.from(t),t.size?new pn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=pn.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},toObject:function(){var t={};return this.forEach(function(e,r){t[e]=r}),t},get size(){return this.content.length>>1}};pn.from=function(t){if(t instanceof pn)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new pn(e)};function ZR(t,e,r){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;let i=t.child(n),s=e.child(n);if(i==s){r+=i.nodeSize;continue}if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)r++;return r}if(i.content.size||s.content.size){let o=ZR(i.content,s.content,r+1);if(o!=null)return o}r+=i.nodeSize}}function QR(t,e,r,n){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:r,b:n};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){r-=l,n-=l;continue}if(!o.sameMarkup(a))return{a:r,b:n};if(o.isText&&o.text!=a.text){let c=0,h=Math.min(o.text.length,a.text.length);for(;c<h&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,r--,n--;return{a:r,b:n}}if(o.content.size||a.content.size){let c=QR(o.content,a.content,r-1,n-1);if(c)return c}r-=l,n-=l}}let ke=class Yn{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,r,n,i=0,s){for(let o=0,a=0;a<r;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&n(l,i+a,s||null,o)!==!1&&l.content.size){let h=a+1;l.nodesBetween(Math.max(0,e-h),Math.min(l.content.size,r-h),n,i+h)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,n,i){let s="",o=!0;return this.nodesBetween(e,r,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,r-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&n&&(o?o=!1:s+=n),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,n=e.firstChild,i=this.content.slice(),s=0;for(r.isText&&r.sameMarkup(n)&&(i[i.length-1]=r.withText(r.text+n.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Yn(i,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let n=[],i=0;if(r>e)for(let s=0,o=0;o<r;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>r)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,r-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,r-o-1))),n.push(a),i+=a.nodeSize),o=l}return new Yn(n,i)}cutByIndex(e,r){return e==r?Yn.empty:e==0&&r==this.content.length?this:new Yn(this.content.slice(e,r))}replaceChild(e,r){let n=this.content[e];if(n==r)return this;let i=this.content.slice(),s=this.size+r.nodeSize-n.nodeSize;return i[e]=r,new Yn(i,s)}addToStart(e){return new Yn([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Yn(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,n=0;r<this.content.length;r++){let i=this.content[r];e(i,n,r),n+=i.nodeSize}}findDiffStart(e,r=0){return ZR(this,e,r)}findDiffEnd(e,r=this.size,n=e.size){return QR(this,e,r,n)}findIndex(e){if(e==0)return xy(0,e);if(e==this.size)return xy(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,n=0;;r++){let i=this.child(r),s=n+i.nodeSize;if(s>=e)return s==e?xy(r+1,s):xy(r,n);n=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return Yn.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new Yn(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Yn.empty;let r,n=0;for(let i=0;i<e.length;i++){let s=e[i];n+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(r||(r=e.slice(0,i)),r[r.length-1]=s.withText(r[r.length-1].text+s.text)):r&&r.push(s)}return new Yn(r||e,n)}static from(e){if(!e)return Yn.empty;if(e instanceof Yn)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Yn([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};ke.empty=new ke([],0);const Nw={index:0,offset:0};function xy(t,e){return Nw.index=t,Nw.offset=e,Nw}function Wb(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!Wb(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!Wb(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}class Mt{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,n=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))r||(r=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!n&&s.type.rank>this.type.rank&&(r||(r=e.slice(0,i)),r.push(this),n=!0),r&&r.push(s)}}return r||(r=e.slice()),n||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Wb(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let i=n.create(r.attrs);return n.checkAttrs(i.attrs),i}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(r[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Mt.none;if(e instanceof Mt)return[e];let r=e.slice();return r.sort((n,i)=>n.type.rank-i.type.rank),r}}Mt.none=[];class jb extends Error{}let Be=class Hu{constructor(e,r,n){this.content=e,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let n=tP(this.content,e+this.openStart,r);return n&&new Hu(n,this.openStart,this.openEnd)}removeBetween(e,r){return new Hu(eP(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return Hu.empty;let n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Hu(ke.fromJSON(e,r.content),n,i)}static maxOpen(e,r=!0){let n=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.firstChild)n++;for(let s=e.lastChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.lastChild)i++;return new Hu(e,n,i)}};Be.empty=new Be(ke.empty,0,0);function eP(t,e,r){let{index:n,offset:i}=t.findIndex(e),s=t.maybeChild(n),{index:o,offset:a}=t.findIndex(r);if(i==e||s.isText){if(a!=r&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(n,s.copy(eP(s.content,e-i-1,r-i-1)))}function tP(t,e,r,n){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return n&&!n.canReplace(i,i,r)?null:t.cut(0,e).append(r).append(t.cut(e));let a=tP(o.content,e-s-1,r,o);return a&&t.replaceChild(i,o.copy(a))}function Wne(t,e,r){if(r.openStart>t.depth)throw new jb("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new jb("Inconsistent open depths");return rP(t,e,r,0)}function rP(t,e,r,n){let i=t.index(n),s=t.node(n);if(i==e.index(n)&&n<t.depth-r.openStart){let o=rP(t,e,r,n+1);return s.copy(s.content.replaceChild(i,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==n&&e.depth==n){let o=t.parent,a=o.content;return Rh(o,a.cut(0,t.parentOffset).append(r.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=jne(r,t);return Rh(s,iP(t,o,a,e,n))}else return Rh(s,Ub(t,e,n))}function nP(t,e){if(!e.type.compatibleContent(t.type))throw new jb("Cannot join "+e.type.name+" onto "+t.type.name)}function _3(t,e,r){let n=t.node(r);return nP(n,e.node(r)),n}function Bh(t,e){let r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function Wp(t,e,r,n){let i=(e||t).node(r),s=0,o=e?e.index(r):i.childCount;t&&(s=t.index(r),t.depth>r?s++:t.textOffset&&(Bh(t.nodeAfter,n),s++));for(let a=s;a<o;a++)Bh(i.child(a),n);e&&e.depth==r&&e.textOffset&&Bh(e.nodeBefore,n)}function Rh(t,e){return t.type.checkContent(e),t.copy(e)}function iP(t,e,r,n,i){let s=t.depth>i&&_3(t,e,i+1),o=n.depth>i&&_3(r,n,i+1),a=[];return Wp(null,t,i,a),s&&o&&e.index(i)==r.index(i)?(nP(s,o),Bh(Rh(s,iP(t,e,r,n,i+1)),a)):(s&&Bh(Rh(s,Ub(t,e,i+1)),a),Wp(e,r,i,a),o&&Bh(Rh(o,Ub(r,n,i+1)),a)),Wp(n,null,i,a),new ke(a)}function Ub(t,e,r){let n=[];if(Wp(null,t,r,n),t.depth>r){let i=_3(t,e,r+1);Bh(Rh(i,Ub(t,e,r+1)),n)}return Wp(e,null,r,n),new ke(n)}function jne(t,e){let r=e.depth-t.openStart,i=e.node(r).copy(t.content);for(let s=r-1;s>=0;s--)i=e.node(s).copy(ke.from(i));return{start:i.resolveNoCache(t.openStart+r),end:i.resolveNoCache(i.content.size-t.openEnd-r)}}class Hm{constructor(e,r,n){this.pos=e,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=e.child(r);return n?e.child(r).cut(n):i}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let n=this.path[r*3],i=r==0?0:this.path[r*3-1]+1;for(let s=0;s<e;s++)i+=n.child(s).nodeSize;return i}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return Mt.none;if(this.textOffset)return e.child(r).marks;let n=e.maybeChild(r-1),i=e.maybeChild(r);if(!n){let a=n;n=i,i=a}let s=n.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<n.length;s++)n[s].type.spec.inclusive===!1&&(!i||!n[s].isInSet(i.marks))&&(n=n[s--].removeFromSet(n));return n}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!r||r(this.node(n))))return new sP(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let n=[],i=0,s=r;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(n.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new Hm(r,n,s)}static resolveCached(e,r){let n=qM.get(e);if(n)for(let s=0;s<n.elts.length;s++){let o=n.elts[s];if(o.pos==r)return o}else qM.set(e,n=new Une);let i=n.elts[n.i]=Hm.resolve(e,r);return n.i=(n.i+1)%Gne,i}}class Une{constructor(){this.elts=[],this.i=0}}const Gne=12,qM=new WeakMap;class sP{constructor(e,r,n){this.$from=e,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Kne=Object.create(null);let Ua=class M3{constructor(e,r,n,i=Mt.none){this.type=e,this.attrs=r,this.marks=i,this.content=n||ke.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,n,i=0){this.content.nodesBetween(e,r,n,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,n,i){return this.content.textBetween(e,r,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,n){return this.type==e&&Wb(this.attrs,r||e.defaultAttrs||Kne)&&Mt.sameSet(this.marks,n||Mt.none)}copy(e=null){return e==this.content?this:new M3(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new M3(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,n=!1){if(e==r)return Be.empty;let i=this.resolve(e),s=this.resolve(r),o=n?0:i.sharedDepth(r),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new Be(c,i.depth-o,s.depth-o)}replace(e,r,n){return Wne(this.resolve(e),this.resolve(r),n)}nodeAt(e){for(let r=this;;){let{index:n,offset:i}=r.content.findIndex(e);if(r=r.maybeChild(n),!r)return null;if(i==e||r.isText)return r;e-=i+1}}childAfter(e){let{index:r,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(r),index:r,offset:n};let i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}}resolve(e){return Hm.resolveCached(this,e)}resolveNoCache(e){return Hm.resolve(this,e)}rangeHasMark(e,r,n){let i=!1;return r>e&&this.nodesBetween(e,r,s=>(n.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),oP(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,n=ke.empty,i=0,s=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,i,s),a=o&&o.matchFragment(this.content,r);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(e,r,n,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(n),o=s&&s.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Mt.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!Mt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,n)}let i=ke.fromJSON(e,r.content),s=e.nodeType(r.type).create(r.attrs,i,n);return s.type.checkAttrs(s.attrs),s}};Ua.prototype.text=void 0;let Yne=class A3 extends Ua{constructor(e,r,n,i){if(super(e,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):oP(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new A3(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new A3(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function oP(t,e){for(let r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}class tu{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let n=new Xne(e,r);if(n.next==null)return tu.empty;let i=aP(n);n.next&&n.err("Unexpected trailing text");let s=nie(rie(i));return iie(s,n),s}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,n=e.childCount){let i=this;for(let s=r;i&&s<n;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let n=0;n<e.next.length;n++)if(this.next[r].type==e.next[n].type)return!0;return!1}fillBefore(e,r=!1,n=0){let i=[this];function s(o,a){let l=o.matchFragment(e,n);if(l&&(!r||l.validEnd))return ke.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:h,next:u}=o.next[c];if(!(h.isText||h.hasRequiredAttrs())&&i.indexOf(u)==-1){i.push(u);let f=s(u,a.concat(h));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in r)&&(!i.type||l.validEnd)&&(n.push({match:a.contentMatch,type:a,via:i}),r[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(n){e.push(n);for(let i=0;i<n.next.length;i++)e.indexOf(n.next[i].next)==-1&&r(n.next[i].next)}return r(this),e.map((n,i)=>{let s=i+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)s+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return s}).join(`
`)}}tu.empty=new tu(!0);class Xne{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function aP(t){let e=[];do e.push(Jne(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Jne(t){let e=[];do e.push(Zne(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Zne(t){let e=tie(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Qne(t,e);else break;return e}function VM(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Qne(t,e){let r=VM(t),n=r;return t.eat(",")&&(t.next!="}"?n=VM(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function eie(t,e){let r=t.nodeTypes,n=r[e];if(n)return[n];let i=[];for(let s in r){let o=r[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function tie(t){if(t.eat("(")){let e=aP(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=eie(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function rie(t){let e=[[]];return i(s(t,0),r()),e;function r(){return e.push([])-1}function n(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=r())}else if(o.type=="star"){let l=r();return n(a,l),i(s(o.expr,l),l),[n(l)]}else if(o.type=="plus"){let l=r();return i(s(o.expr,a),l),i(s(o.expr,l),l),[n(l)]}else{if(o.type=="opt")return[n(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let h=r();i(s(o.expr,l),h),l=h}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let h=r();n(l,h),i(s(o.expr,l),h),l=h}return[n(l)]}else{if(o.type=="name")return[n(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function lP(t,e){return e-t}function WM(t,e){let r=[];return n(e),r.sort(lP);function n(i){let s=t[i];if(s.length==1&&!s[0].term)return n(s[0].to);r.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&r.indexOf(l)==-1&&n(l)}}}function nie(t){let e=Object.create(null);return r(WM(t,0));function r(n){let i=[];n.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let h=0;h<i.length;h++)i[h][0]==a&&(c=i[h][1]);WM(t,l).forEach(h=>{c||i.push([a,c=[]]),c.indexOf(h)==-1&&c.push(h)})})});let s=e[n.join(",")]=new tu(n.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(lP);s.next.push({type:i[o][0],next:e[a.join(",")]||r(a)})}return s}}function iie(t,e){for(let r=0,n=[t];r<n.length;r++){let i=n[r],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),n.indexOf(c)==-1&&n.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function cP(t){let e=Object.create(null);for(let r in t){let n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function hP(t,e){let r=Object.create(null);for(let n in t){let i=e&&e[n];if(i===void 0){let s=t[n];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function uP(t,e,r,n){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function fP(t,e){let r=Object.create(null);if(e)for(let n in e)r[n]=new oie(t,n,e[n]);return r}let Gb=class dP{constructor(e,r,n){this.name=e,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=fP(e,n.attrs),this.defaultAttrs=cP(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==tu.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:hP(this.attrs,e)}create(e=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ua(this,this.computeAttrs(e),ke.from(r),Mt.setFrom(n))}createChecked(e=null,r,n){return r=ke.from(r),this.checkContent(r),new Ua(this,this.computeAttrs(e),r,Mt.setFrom(n))}createAndFill(e=null,r,n){if(e=this.computeAttrs(e),r=ke.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let i=this.contentMatch.matchFragment(r),s=i&&i.fillBefore(ke.empty,!0);return s?new Ua(this,e,r.append(s),Mt.setFrom(n)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){uP(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?r&&r.push(e[n]):r||(r=e.slice(0,n));return r?r.length?r:Mt.none:e}static compile(e,r){let n=Object.create(null);e.forEach((s,o)=>n[s]=new dP(s,r,o));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let s in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function sie(t,e,r){let n=r.split("|");return i=>{let s=i===null?"null":typeof i;if(n.indexOf(s)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${s}`)}}class oie{constructor(e,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?sie(e,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class Ev{constructor(e,r,n,i){this.name=e,this.rank=r,this.schema=n,this.spec=i,this.attrs=fP(e,i.attrs),this.excluded=null;let s=cP(this.attrs);this.instance=s?new Mt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Mt(this,hP(this.attrs,e))}static compile(e,r){let n=Object.create(null),i=0;return e.forEach((s,o)=>n[s]=new Ev(s,i++,r,o)),n}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){uP(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class pP{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let i in e)r[i]=e[i];r.nodes=pn.from(e.nodes),r.marks=pn.from(e.marks||{}),this.nodes=Gb.compile(this.spec.nodes,this),this.marks=Ev.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=n[o]||(n[o]=tu.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?jM(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:jM(this,o.split(" "))}this.nodeFromJSON=i=>Ua.fromJSON(this,i),this.markFromJSON=i=>Mt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,n,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Gb){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,n,i)}text(e,r){let n=this.nodes.text;return new Yne(n,n.defaultAttrs,e,Mt.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}}function jM(t,e){let r=[];for(let n=0;n<e.length;n++){let i=e[n],s=t.marks[i],o=s;if(s)r.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&r.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}function aie(t){return t.tag!=null}function lie(t){return t.style!=null}class ru{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(i=>{if(aie(i))this.tags.push(i);else if(lie(i)){let s=/[^=]*/.exec(i.style)[0];n.indexOf(s)<0&&n.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,r={}){let n=new GM(this,r,!1);return n.addAll(e,Mt.none,r.from,r.to),n.finish()}parseSlice(e,r={}){let n=new GM(this,r,!0);return n.addAll(e,Mt.none,r.from,r.to),Be.maxOpen(n.finish())}matchTag(e,r,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(uie(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||r.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,r,n,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=r))){if(o.getAttrs){let l=o.getAttrs(r);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let r=[];function n(i){let s=i.priority==null?50:i.priority,o=0;for(;o<r.length;o++){let a=r[o];if((a.priority==null?50:a.priority)<s)break}r.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{n(o=KM(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{n(o=KM(o)),o.node||o.ignore||o.mark||(o.node=i)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ru(e,ru.schemaRules(e)))}}const mP={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},cie={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},gP={ol:!0,ul:!0},qm=1,E3=2,jp=4;function UM(t,e,r){return e!=null?(e?qm:0)|(e==="full"?E3:0):t&&t.whitespace=="pre"?qm|E3:r&~jp}class vy{constructor(e,r,n,i,s,o){this.type=e,this.attrs=r,this.marks=n,this.solid=i,this.options=o,this.content=[],this.activeMarks=Mt.none,this.match=s||(o&jp?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(ke.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(e.type))?(this.match=n,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&qm)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let s=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let r=ke.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(ke.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!mP.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class GM{constructor(e,r,n){this.parser=e,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let i=r.topNode,s,o=UM(null,r.preserveWhitespace,0)|(n?jp:0);i?s=new vy(i.type,i.attrs,Mt.none,!0,r.topMatch||i.type.contentMatch,o):n?s=new vy(null,null,Mt.none,!0,null,o):s=new vy(e.schema.topNodeType,null,Mt.none,!0,null,o),this.nodes=[s],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let n=e.nodeValue,i=this.top,s=i.options&E3?"full":this.localPreserveWS||(i.options&qm)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(s)if(s==="full")n=n.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=n.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),r,!0),a[l]&&this.insertNode(o.text(a[l]),r,!/\S/.test(a[l]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(n=n.slice(1))}n&&this.insertNode(o.text(n),r,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,r,n){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;gP.hasOwnProperty(o)&&this.parser.normalizeLists&&hie(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,n));e:if(l?l.ignore:cie.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,r);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,h=this.needsBlock;if(mP.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let u=l&&l.skip?r:this.readStyles(e,r);u&&this.addAll(e,u),c&&this.sync(s),this.needsBlock=h}else{let c=this.readStyles(e,r);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let n=e.style;if(n&&n.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=n.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?r=r.filter(c=>!l.clearMark(c)):r=r.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return r}addElementByRule(e,r,n,i){let s,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let l=this.enter(o,r.attrs||null,n,r.preserveWhitespace);l&&(s=!0,n=l)}else{let l=this.parser.schema.marks[r.mark];n=n.concat(l.create(r.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,n,i);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,n,!1));else{let l=e;typeof r.contentElement=="string"?l=e.querySelector(r.contentElement):typeof r.contentElement=="function"?l=r.contentElement(e):r.contentElement&&(l=r.contentElement),this.findAround(e,l,!0),this.addAll(l,n),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,r,n,i){let s=n||0;for(let o=n?e.childNodes[n]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,r);this.findAtPoint(e,s)}findPlace(e,r,n){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,s=l,!c.length))break;if(l.solid){if(n)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)r=this.enterInner(i[o],null,r,!1);return r}insertNode(e,r,n){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(r=this.enterInner(s,null,r))}let i=this.findPlace(e,r,n);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Mt.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):YM(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,r,n,i){let s=this.findPlace(e.create(r),n,!1);return s&&(s=this.enterInner(e,r,n,!0,i)),s}enterInner(e,r,n,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=UM(e,s,o.options);o.options&jp&&o.content.length==0&&(a|=jp);let l=Mt.none;return n=n.filter(c=>(o.type?o.type.allowsMarkType(c.type):YM(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new vy(e,r,l,i,null,a)),this.open++,n}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=qm)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let i=n.length-1;i>=0;i--)e+=n[i].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,n){if(e!=r&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&r.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),s=-(n?n.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=r[a];if(c==""){if(a==r.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let h=l>0||l==0&&i?this.nodes[l].type:n&&l>=s?n.node(l-s).type:null;if(!h||h.name!=c&&!h.isInGroup(c))return!1;l--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let n=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function hie(t){for(let e=t.firstChild,r=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&gP.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):n=="li"?r=e:n&&(r=null)}}function uie(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function KM(t){let e={};for(let r in t)e[r]=t[r];return e}function YM(t,e){let r=e.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:h}=a.edge(l);if(c==e||s.indexOf(h)<0&&o(h))return!0}};if(o(i.contentMatch))return!0}}class xu{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},n){n||(n=Fw(r).createDocumentFragment());let i=n,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],h=this.serializeMark(c,o.isInline,r);h&&(s.push([c,i]),i.appendChild(h.dom),i=h.contentDOM||h.dom)}}i.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(e,r){let{dom:n,contentDOM:i}=w2(Fw(r),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,i)}return n}serializeNode(e,r={}){let n=this.serializeNodeInner(e,r);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,r);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n}serializeMark(e,r,n={}){let i=this.marks[e.type.name];return i&&w2(Fw(n),i(e,r),null,e.attrs)}static renderSpec(e,r,n=null,i){return w2(e,r,n,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new xu(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=XM(e.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(e){return XM(e.marks)}}function XM(t){let e={};for(let r in t){let n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function Fw(t){return t.document||window.document}const JM=new WeakMap;function fie(t){let e=JM.get(t);return e===void 0&&JM.set(t,e=die(t)),e}function die(t){let e=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let i=0;i<n.length;i++)r(n[i]);else for(let i in n)r(n[i])}return r(t),e}function w2(t,e,r,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(s=fie(n))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let a,l=r?t.createElementNS(r,i):t.createElement(i),c=e[1],h=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){h=2;for(let u in c)if(c[u]!=null){let f=u.indexOf(" ");f>0?l.setAttributeNS(u.slice(0,f),u.slice(f+1),c[u]):u=="style"&&l.style?l.style.cssText=c[u]:l.setAttribute(u,c[u])}}for(let u=h;u<e.length;u++){let f=e[u];if(f===0){if(u<e.length-1||u>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:d,contentDOM:p}=w2(t,f,r,n);if(l.appendChild(d),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const yP=65535,bP=Math.pow(2,16);function pie(t,e){return t+e*bP}function ZM(t){return t&yP}function mie(t){return(t-(t&yP))/bP}const xP=1,vP=2,k2=4,wP=8;class L3{constructor(e,r,n){this.pos=e,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&wP)>0}get deletedBefore(){return(this.delInfo&(xP|k2))>0}get deletedAfter(){return(this.delInfo&(vP|k2))>0}get deletedAcross(){return(this.delInfo&k2)>0}}class Ki{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&Ki.empty)return Ki.empty}recover(e){let r=0,n=ZM(e);if(!this.inverted)for(let i=0;i<n;i++)r+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+r+mie(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,n){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],h=this.ranges[a+o],u=l+c;if(e<=u){let f=c?e==l?-1:e==u?1:r:r,d=l+i+(f<0?0:h);if(n)return d;let p=e==(r<0?l:u)?null:pie(a/3,e-l),m=e==l?vP:e==u?xP:k2;return(r<0?e!=l:e!=u)&&(m|=wP),new L3(d,m,p)}i+=h-c}return n?e+i:new L3(e+i,0,null)}touches(e,r){let n=0,i=ZM(r),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>e)break;let c=this.ranges[a+s],h=l+c;if(e<=h&&a==i*3)return!0;n+=this.ranges[a+o]-c}return!1}forEach(e){let r=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+r],h=this.ranges[i+n];e(a,a+c,l,l+h),s+=h-c}}invert(){return new Ki(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Ki.empty:new Ki(e<0?[0,-e,0]:[0,0,e])}}Ki.empty=new Ki([]);class Vm{constructor(e,r,n=0,i=e?e.length:0){this.mirror=r,this.from=n,this.to=i,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new Vm(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,n=this._maps.length;r<e._maps.length;r++){let i=e.getMirror(r);this.appendMap(e._maps[r],i!=null&&i<r?n+i:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,n=this._maps.length+e._maps.length;r>=0;r--){let i=e.getMirror(r);this.appendMap(e._maps[r].invert(),i!=null&&i>r?n-i-1:void 0)}}invert(){let e=new Vm;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,n){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,r);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return n?e:new L3(e,i,null)}}const $w=Object.create(null);let Vn=class{getMap(){return Ki.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=$w[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in $w)throw new RangeError("Duplicate use of step JSON ID "+e);return $w[e]=r,r.prototype.jsonID=e,r}};class Wr{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new Wr(e,null)}static fail(e){return new Wr(null,e)}static fromReplace(e,r,n,i){try{return Wr.ok(e.replace(r,n,i))}catch(s){if(s instanceof jb)return Wr.fail(s.message);throw s}}}function _7(t,e,r){let n=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(_7(s.content,e,s))),s.isInline&&(s=e(s,r,i)),n.push(s)}return ke.fromArray(n)}class za extends Vn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),s=new Be(_7(r.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),r.openStart,r.openEnd);return Wr.fromReplace(e,this.from,this.to,s)}invert(){return new zo(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new za(r.pos,n.pos,this.mark)}merge(e){return e instanceof za&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new za(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new za(r.from,r.to,e.markFromJSON(r.mark))}}Vn.jsonID("addMark",za);class zo extends Vn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=new Be(_7(r.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),r.openStart,r.openEnd);return Wr.fromReplace(e,this.from,this.to,n)}invert(){return new za(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new zo(r.pos,n.pos,this.mark)}merge(e){return e instanceof zo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new zo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new zo(r.from,r.to,e.markFromJSON(r.mark))}}Vn.jsonID("removeMark",zo);class Gl extends Vn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return Wr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return Wr.fromReplace(e,this.pos,this.pos+1,new Be(ke.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let i=0;i<r.marks.length;i++)if(!r.marks[i].isInSet(n))return new Gl(this.pos,r.marks[i]);return new Gl(this.pos,this.mark)}}return new nu(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Gl(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Gl(r.pos,e.markFromJSON(r.mark))}}Vn.jsonID("addNodeMark",Gl);class nu extends Vn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return Wr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return Wr.fromReplace(e,this.pos,this.pos+1,new Be(ke.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new Gl(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new nu(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new nu(r.pos,e.markFromJSON(r.mark))}}Vn.jsonID("removeNodeMark",nu);class sn extends Vn{constructor(e,r,n,i=!1){super(),this.from=e,this.to=r,this.slice=n,this.structure=i}apply(e){return this.structure&&O3(e,this.from,this.to)?Wr.fail("Structure replace would overwrite content"):Wr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Ki([this.from,this.to-this.from,this.slice.size])}invert(e){return new sn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new sn(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof sn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?Be.empty:new Be(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new sn(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?Be.empty:new Be(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new sn(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new sn(r.from,r.to,Be.fromJSON(e,r.slice),!!r.structure)}}Vn.jsonID("replace",sn);class Nn extends Vn{constructor(e,r,n,i,s,o,a=!1){super(),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(O3(e,this.from,this.gapFrom)||O3(e,this.gapTo,this.to)))return Wr.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return Wr.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?Wr.fromReplace(e,this.from,this.to,n):Wr.fail("Content does not fit in gap")}getMap(){return new Ki([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new Nn(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),i=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||i<r.pos||s>n.pos?null:new Nn(r.pos,n.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Nn(r.from,r.to,r.gapFrom,r.gapTo,Be.fromJSON(e,r.slice),r.insert,!!r.structure)}}Vn.jsonID("replaceAround",Nn);function O3(t,e,r){let n=t.resolve(e),i=r-e,s=n.depth;for(;i>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,i--;if(i>0){let o=n.node(s).maybeChild(n.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function gie(t,e,r,n){let i=[],s=[],o,a;t.doc.nodesBetween(e,r,(l,c,h)=>{if(!l.isInline)return;let u=l.marks;if(!n.isInSet(u)&&h.type.allowsMarkType(n.type)){let f=Math.max(c,e),d=Math.min(c+l.nodeSize,r),p=n.addToSet(u);for(let m=0;m<u.length;m++)u[m].isInSet(p)||(o&&o.to==f&&o.mark.eq(u[m])?o.to=d:i.push(o=new zo(f,d,u[m])));a&&a.to==f?a.to=d:s.push(a=new za(f,d,n))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function yie(t,e,r,n){let i=[],s=0;t.doc.nodesBetween(e,r,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(n instanceof Ev){let c=o.marks,h;for(;h=n.isInSet(c);)(l||(l=[])).push(h),c=h.removeFromSet(c)}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,r);for(let h=0;h<l.length;h++){let u=l[h],f;for(let d=0;d<i.length;d++){let p=i[d];p.step==s-1&&u.eq(i[d].style)&&(f=p)}f?(f.to=c,f.step=s):i.push({style:u,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new zo(o.from,o.to,o.style)))}function M7(t,e,r,n=r.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),h=a+c.nodeSize,u=n.matchType(c.type);if(!u)o.push(new sn(a,h,Be.empty));else{n=u;for(let f=0;f<c.marks.length;f++)r.allowsMarkType(c.marks[f].type)||t.step(new zo(a,h,c.marks[f]));if(i&&c.isText&&r.whitespace!="pre"){let f,d=/\r?\n|\r/g,p;for(;f=d.exec(c.text);)p||(p=new Be(ke.from(r.schema.text(" ",r.allowedMarks(c.marks))),0,0)),o.push(new sn(a+f.index,a+f.index+f[0].length,p))}}a=h}if(!n.validEnd){let l=n.fillBefore(ke.empty,!0);t.replace(a,a,new Be(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function bie(t,e,r){return(e==0||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function Lv(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth,i=0,s=0;;--n){let o=t.$from.node(n),a=t.$from.index(n)+i,l=t.$to.indexAfter(n)-s;if(n<t.depth&&o.canReplace(a,l,r))return n;if(n==0||o.type.spec.isolating||!bie(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function xie(t,e,r){let{$from:n,$to:i,depth:s}=e,o=n.before(s+1),a=i.after(s+1),l=o,c=a,h=ke.empty,u=0;for(let p=s,m=!1;p>r;p--)m||n.index(p)>0?(m=!0,h=ke.from(n.node(p).copy(h)),u++):l--;let f=ke.empty,d=0;for(let p=s,m=!1;p>r;p--)m||i.after(p+1)<i.end(p)?(m=!0,f=ke.from(i.node(p).copy(f)),d++):c++;t.step(new Nn(l,c,o,a,new Be(h.append(f),u,d),h.size-u,!0))}function A7(t,e,r=null,n=t){let i=vie(t,e),s=i&&wie(n,e);return s?i.map(QM).concat({type:e,attrs:r}).concat(s.map(QM)):null}function QM(t){return{type:t,attrs:null}}function vie(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.contentMatchAt(n).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return r.canReplaceWith(n,i,o)?s:null}function wie(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.child(n),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=n;l&&c<i;c++)l=l.matchType(r.child(c).type);return!l||!l.validEnd?null:o}function kie(t,e,r){let n=ke.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let a=r[o].type.contentMatch.matchFragment(n);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=ke.from(r[o].type.create(r[o].attrs,n))}let i=e.start,s=e.end;t.step(new Nn(i,s,i,s,new Be(n,0,0),r.length,!0))}function Cie(t,e,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,r,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(n,l)&&Sie(t.doc,t.mapping.slice(s).map(a),n)){let c=null;if(n.schema.linebreakReplacement){let d=n.whitespace=="pre",p=!!n.contentMatch.matchType(n.schema.linebreakReplacement);d&&!p?c=!1:!d&&p&&(c=!0)}c===!1&&CP(t,o,a,s),M7(t,t.mapping.slice(s).map(a,1),n,void 0,c===null);let h=t.mapping.slice(s),u=h.map(a,1),f=h.map(a+o.nodeSize,1);return t.step(new Nn(u,f,u+1,f-1,new Be(ke.from(n.create(l,null,o.marks)),0,0),1,!0)),c===!0&&kP(t,o,a,s),!1}})}function kP(t,e,r,n){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(n).map(r+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function CP(t,e,r,n){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function Sie(t,e,r){let n=t.resolve(e),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function Tie(t,e,r,n,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");r||(r=s.type);let o=r.create(n,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!r.validContent(s.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new Nn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Be(ke.from(o),0,0),1,!0))}function Up(t,e,r=1,n){let i=t.resolve(e),s=i.depth-r,o=n&&n[n.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,h=r-2;c>s;c--,h--){let u=i.node(c),f=i.index(c);if(u.type.spec.isolating)return!1;let d=u.content.cutByIndex(f,u.childCount),p=n&&n[h+1];p&&(d=d.replaceChild(0,p.type.create(p.attrs)));let m=n&&n[h]||u;if(!u.canReplace(f+1,u.childCount)||!m.type.validContent(d))return!1}let a=i.indexAfter(s),l=n&&n[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function _ie(t,e,r=1,n){let i=t.doc.resolve(e),s=ke.empty,o=ke.empty;for(let a=i.depth,l=i.depth-r,c=r-1;a>l;a--,c--){s=ke.from(i.node(a).copy(s));let h=n&&n[c];o=ke.from(h?h.type.create(h.attrs,o):i.node(a).copy(o))}t.step(new sn(e,e,new Be(s.append(o),r,r),!0))}function Ov(t,e){let r=t.resolve(e),n=r.index();return Aie(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function Mie(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==n?t.type.schema.nodes.text:s.type;if(r=r.matchType(o),!r||!t.type.allowsMarks(s.marks))return!1}return r.validEnd}function Aie(t,e){return!!(t&&e&&!t.isLeaf&&Mie(t,e))}function Eie(t,e,r){let n=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-r),o=s.node().type;if(i&&o.inlineContent){let h=o.whitespace=="pre",u=!!o.contentMatch.matchType(i);h&&!u?n=!1:!h&&u&&(n=!0)}let a=t.steps.length;if(n===!1){let h=t.doc.resolve(e+r);CP(t,h.node(),h.before(),a)}o.inlineContent&&M7(t,e+r-1,o,s.node().contentMatchAt(s.index()),n==null);let l=t.mapping.slice(a),c=l.map(e-r);if(t.step(new sn(c,l.map(e+r,-1),Be.empty,!0)),n===!0){let h=t.doc.resolve(c);kP(t,h.node(),h.before(),t.steps.length)}return t}function Lie(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let s=n.index(i);if(n.node(i).canReplaceWith(s,s,r))return n.before(i+1);if(s>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let s=n.indexAfter(i);if(n.node(i).canReplaceWith(s,s,r))return n.after(i+1);if(s<n.node(i).childCount)return null}return null}function Oie(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let i=r.content;for(let s=0;s<r.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(r.openStart==0&&r.size?2:1);s++)for(let o=n.depth;o>=0;o--){let a=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,l=n.index(o)+(a>0?1:0),c=n.node(o),h=!1;if(s==1)h=c.canReplace(l,l,i);else{let u=c.contentMatchAt(l).findWrapping(i.firstChild.type);h=u&&c.canReplaceWith(l,l,u[0])}if(h)return a==0?n.pos:a<0?n.before(o+1):n.after(o+1)}return null}function Dv(t,e,r=e,n=Be.empty){if(e==r&&!n.size)return null;let i=t.resolve(e),s=t.resolve(r);return SP(i,s,n)?new sn(e,r,n):new Die(i,s,n).fit()}function SP(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}class Die{constructor(e,r,n){this.$from=e,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=ke.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=ke.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(e<0?this.$to:n.doc.resolve(e));if(!i)return null;let s=this.placed,o=n.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new Be(s,o,a);return e>-1?new Nn(n.pos,e,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new sn(n.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<e;n++){let s=r.firstChild;if(r.childCount>1&&(i=0),s.type.spec.isolating&&i<=n){e=n;break}r=s.content}for(let r=1;r<=2;r++)for(let n=r==1?e:this.unplaced.openStart;n>=0;n--){let i,s=null;n?(s=zw(this.unplaced.content,n-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],h,u=null;if(r==1&&(o?c.matchType(o.type)||(u=c.fillBefore(ke.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:n,frontierDepth:a,parent:s,inject:u};if(r==2&&o&&(h=c.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:a,parent:s,wrap:h};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=zw(e,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Be(e,r+1,Math.max(n,i.size+r>=e.size-n?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=zw(e,r);if(i.childCount<=1&&r>0){let s=e.size-r<=r+i.size;this.unplaced=new Be(K0(e,r-1,1),r-1,s?r-1:n)}else this.unplaced=new Be(K0(e,r,1),r,n)}placeNodes({sliceDepth:e,frontierDepth:r,parent:n,inject:i,wrap:s}){for(;this.depth>r;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,a=n?n.content:o.content,l=o.openStart-e,c=0,h=[],{match:u,type:f}=this.frontier[r];if(i){for(let m=0;m<i.childCount;m++)h.push(i.child(m));u=u.matchFragment(i)}let d=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),g=u.matchType(m.type);if(!g)break;c++,(c>1||l==0||m.content.size)&&(u=g,h.push(TP(m.mark(f.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?d:-1)))}let p=c==a.childCount;p||(d=-1),this.placed=Y0(this.placed,r,ke.from(h)),this.frontier[r].match=u,p&&d<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<d;m++){let y=g.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),g=y.content}this.unplaced=p?e==0?Be.empty:new Be(K0(o.content,e-1,1),e-1,d<0?o.openEnd:e-1):new Be(K0(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!Hw(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:n,type:i}=this.frontier[r],s=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),o=Hw(e,r,i,n,s);if(o){for(let a=r-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],h=Hw(e,a,c,l,!0);if(!h||h.childCount)continue e}return{depth:r,fit:o,move:s?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=Y0(this.placed,r.depth,r.fit)),e=r.move;for(let n=r.depth+1;n<=e.depth;n++){let i=e.node(n),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(n));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,r=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Y0(this.placed,this.depth,ke.from(e.create(r,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(ke.empty,!0);r.childCount&&(this.placed=Y0(this.placed,this.frontier.length,r))}}function K0(t,e,r){return e==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(K0(t.firstChild.content,e-1,r)))}function Y0(t,e,r){return e==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(Y0(t.lastChild.content,e-1,r)))}function zw(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function TP(t,e,r){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,TP(n.firstChild,e-1,n.childCount==1?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(ke.empty,!0)))),t.copy(n)}function Hw(t,e,r,n,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!r.compatibleContent(s.type))return null;let a=n.fillBefore(s.content,!0,o);return a&&!Iie(r,s.content,o)?a:null}function Iie(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function Bie(t){return t.spec.defining||t.spec.definingForContent}function Rie(t,e,r,n){if(!n.size)return t.deleteRange(e,r);let i=t.doc.resolve(e),s=t.doc.resolve(r);if(SP(i,s,n))return t.step(new sn(e,r,n));let o=MP(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,d=i.pos-1;f>0;f--,d--){let p=i.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==d&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],h=n.openStart;for(let f=n.content,d=0;;d++){let p=f.firstChild;if(c.push(p),d==n.openStart)break;f=p.content}for(let f=h-1;f>=0;f--){let d=c[f],p=Bie(d.type);if(p&&!d.sameMarkup(i.node(Math.abs(a)-1)))h=f;else if(p||!d.type.isTextblock)break}for(let f=n.openStart;f>=0;f--){let d=(f+h+1)%(n.openStart+1),p=c[d];if(p)for(let m=0;m<o.length;m++){let g=o[(m+l)%o.length],y=!0;g<0&&(y=!1,g=-g);let b=i.node(g-1),x=i.index(g-1);if(b.canReplaceWith(x,x,p.type,p.marks))return t.replace(i.before(g),y?s.after(g):r,new Be(_P(n.content,0,n.openStart,d),d,n.openEnd))}}let u=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,r,n),!(t.steps.length>u));f--){let d=o[f];d<0||(e=i.before(d),r=s.after(d))}}function _P(t,e,r,n,i){if(e<r){let s=t.firstChild;t=t.replaceChild(0,s.copy(_P(s.content,e+1,r,n,s)))}if(e>n){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(ke.empty,!0))}return t}function Pie(t,e,r,n){if(!n.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let i=Lie(t.doc,e,n.type);i!=null&&(e=r=i)}t.replaceRange(e,r,new Be(ke.from(n),0,0))}function Nie(t,e,r){let n=t.doc.resolve(e),i=t.doc.resolve(r),s=MP(n,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||n.node(a).type.contentMatch.validEnd)return t.delete(n.start(a),i.end(a));if(a>0&&(l||n.node(a-1).canReplace(n.index(a-1),i.indexAfter(a-1))))return t.delete(n.before(a),i.after(a))}for(let o=1;o<=n.depth&&o<=i.depth;o++)if(e-n.start(o)==n.depth-o&&r>n.end(o)&&i.end(o)-r!=i.depth-o&&n.start(o-1)==i.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),i.index(o-1)))return t.delete(n.before(o),r);t.delete(e,r)}function MP(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let i=n;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&r.push(i)}return r}class uf extends Vn{constructor(e,r,n){super(),this.pos=e,this.attr=r,this.value=n}apply(e){let r=e.nodeAt(this.pos);if(!r)return Wr.fail("No node at attribute step's position");let n=Object.create(null);for(let s in r.attrs)n[s]=r.attrs[s];n[this.attr]=this.value;let i=r.type.create(n,null,r.marks);return Wr.fromReplace(e,this.pos,this.pos+1,new Be(ke.from(i),0,r.isLeaf?0:1))}getMap(){return Ki.empty}invert(e){return new uf(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new uf(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new uf(r.pos,r.attr,r.value)}}Vn.jsonID("attr",uf);class Wm extends Vn{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let i in e.attrs)r[i]=e.attrs[i];r[this.attr]=this.value;let n=e.type.create(r,e.content,e.marks);return Wr.ok(n)}getMap(){return Ki.empty}invert(e){return new Wm(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Wm(r.attr,r.value)}}Vn.jsonID("docAttr",Wm);let pd=class extends Error{};pd=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r};pd.prototype=Object.create(Error.prototype);pd.prototype.constructor=pd;pd.prototype.name="TransformError";let AP=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Vm}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new pd(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,n=Be.empty){let i=Dv(this.doc,e,r,n);return i&&this.step(i),this}replaceWith(e,r,n){return this.replace(e,r,new Be(ke.from(n),0,0))}delete(e,r){return this.replace(e,r,Be.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,n){return Rie(this,e,r,n),this}replaceRangeWith(e,r,n){return Pie(this,e,r,n),this}deleteRange(e,r){return Nie(this,e,r),this}lift(e,r){return xie(this,e,r),this}join(e,r=1){return Eie(this,e,r),this}wrap(e,r){return kie(this,e,r),this}setBlockType(e,r=e,n,i=null){return Cie(this,e,r,n,i),this}setNodeMarkup(e,r,n=null,i){return Tie(this,e,r,n,i),this}setNodeAttribute(e,r,n){return this.step(new uf(e,r,n)),this}setDocAttribute(e,r){return this.step(new Wm(e,r)),this}addNodeMark(e,r){return this.step(new Gl(e,r)),this}removeNodeMark(e,r){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(r instanceof Mt)r.isInSet(n.marks)&&this.step(new nu(e,r));else{let i=n.marks,s,o=[];for(;s=r.isInSet(i);)o.push(new nu(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,r=1,n){return _ie(this,e,r,n),this}addMark(e,r,n){return gie(this,e,r,n),this}removeMark(e,r,n){return yie(this,e,r,n),this}clearIncompatible(e,r,n){return M7(this,e,r,n),this}};const qw=Object.create(null);let wt=class{constructor(e,r,n){this.$anchor=e,this.$head=r,this.ranges=n||[new EP(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=Be.empty){let n=r.content.lastChild,i=null;for(let a=0;a<r.openEnd;a++)i=n,n=n.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],h=e.mapping.slice(s);e.replaceRange(h.map(l.pos),h.map(c.pos),a?Be.empty:r),a==0&&rA(e,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,r){let n=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(n),c=l.map(o.pos),h=l.map(a.pos);s?e.deleteRange(c,h):(e.replaceRangeWith(c,h,r),rA(e,n,r.isInline?-1:1))}}static findFrom(e,r,n=!1){let i=e.parent.inlineContent?new Ge(e):qu(e.node(0),e.parent,e.pos,e.index(),r,n);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=r<0?qu(e.node(0),e.node(s),e.before(s+1),e.index(s),r,n):qu(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,r,n);if(o)return o}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new Oi(e.node(0))}static atStart(e){return qu(e,e,0,0,1)||new Oi(e)}static atEnd(e){return qu(e,e,e.content.size,e.childCount,-1)||new Oi(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=qw[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in qw)throw new RangeError("Duplicate use of selection JSON ID "+e);return qw[e]=r,r.prototype.jsonID=e,r}getBookmark(){return Ge.between(this.$anchor,this.$head).getBookmark()}};wt.prototype.visible=!0;class EP{constructor(e,r){this.$from=e,this.$to=r}}let eA=!1;function tA(t){!eA&&!t.parent.inlineContent&&(eA=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Ge extends wt{constructor(e,r=e){tA(e),tA(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let n=e.resolve(r.map(this.head));if(!n.parent.inlineContent)return wt.near(n);let i=e.resolve(r.map(this.anchor));return new Ge(i.parent.inlineContent?i:n,n)}replace(e,r=Be.empty){if(super.replace(e,r),r==Be.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof Ge&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Iv(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ge(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){let i=e.resolve(r);return new this(i,n==r?i:e.resolve(n))}static between(e,r,n){let i=e.pos-r.pos;if((!n||i)&&(n=i>=0?1:-1),!r.parent.inlineContent){let s=wt.findFrom(r,n,!0)||wt.findFrom(r,-n,!0);if(s)r=s.$head;else return wt.near(r,n)}return e.parent.inlineContent||(i==0?e=r:(e=(wt.findFrom(e,-n,!0)||wt.findFrom(e,n,!0)).$anchor,e.pos<r.pos!=i<0&&(e=r))),new Ge(e,r)}}wt.jsonID("text",Ge);class Iv{constructor(e,r){this.anchor=e,this.head=r}map(e){return new Iv(e.map(this.anchor),e.map(this.head))}resolve(e){return Ge.between(e.resolve(this.anchor),e.resolve(this.head))}}class it extends wt{constructor(e){let r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);super(e,n),this.node=r}map(e,r){let{deleted:n,pos:i}=r.mapResult(this.anchor),s=e.resolve(i);return n?wt.near(s):new it(s)}content(){return new Be(ke.from(this.node),0,0)}eq(e){return e instanceof it&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new E7(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new it(e.resolve(r.anchor))}static create(e,r){return new it(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}it.prototype.visible=!1;wt.jsonID("node",it);class E7{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:n}=e.mapResult(this.anchor);return r?new Iv(n,n):new E7(n)}resolve(e){let r=e.resolve(this.anchor),n=r.nodeAfter;return n&&it.isSelectable(n)?new it(r):wt.near(r)}}class Oi extends wt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=Be.empty){if(r==Be.empty){e.delete(0,e.doc.content.size);let n=wt.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new Oi(e)}map(e){return new Oi(e)}eq(e){return e instanceof Oi}getBookmark(){return Fie}}wt.jsonID("all",Oi);const Fie={map(){return this},resolve(t){return new Oi(t)}};function qu(t,e,r,n,i,s=!1){if(e.inlineContent)return Ge.create(t,r);for(let o=n-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&it.isSelectable(a))return it.create(t,r-(i<0?a.nodeSize:0))}else{let l=qu(t,a,r+i,i<0?a.childCount:0,i,s);if(l)return l}r+=a.nodeSize*i}return null}function rA(t,e,r){let n=t.steps.length-1;if(n<e)return;let i=t.steps[n];if(!(i instanceof sn||i instanceof Nn))return;let s=t.mapping.maps[n],o;s.forEach((a,l,c,h)=>{o==null&&(o=h)}),t.setSelection(wt.near(t.doc.resolve(o),r))}const nA=1,wy=2,iA=4;class $ie extends AP{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|nA)&~wy,this.storedMarks=null,this}get selectionSet(){return(this.updated&nA)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=wy,this}ensureMarks(e){return Mt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&wy)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&~wy,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let n=this.selection;return r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Mt.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,n){let i=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(n==null&&(n=r),!e)return this.deleteRange(r,n);let s=this.storedMarks;if(!s){let o=this.doc.resolve(r);s=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(e,s)),!this.selection.empty&&this.selection.to==r+e.length&&this.setSelection(wt.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=iA,this}get scrolledIntoView(){return(this.updated&iA)>0}}function sA(t,e){return!e||!t?t:t.bind(e)}class X0{constructor(e,r,n){this.name=e,this.init=sA(r.init,n),this.apply=sA(r.apply,n)}}const zie=[new X0("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new X0("selection",{init(t,e){return t.selection||wt.atStart(e.doc)},apply(t){return t.selection}}),new X0("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new X0("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Vw{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=zie.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new X0(n.key,n.spec.state,n))})}}class hh{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],n=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,h=l<r.length&&a.spec.appendTransaction.call(a,l?r.slice(l):r,c,n);if(h&&n.filterTransaction(h,o)){if(h.setMeta("appendedTransaction",e),!i){i=[];for(let u=0;u<this.config.plugins.length;u++)i.push(u<o?{state:n,n:r.length}:{state:this,n:0})}r.push(h),n=n.applyInner(h),s=!0}i&&(i[o]={state:n,n:r.length})}}if(!s)return{state:n,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new hh(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let s=n[i];r[s.name]=s.apply(e,this[s.name],this,r)}return r}get tr(){return new $ie(this)}static create(e){let r=new Vw(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new hh(r);for(let i=0;i<r.fields.length;i++)n[r.fields[i].name]=r.fields[i].init(e,n);return n}reconfigure(e){let r=new Vw(this.schema,e.plugins),n=r.fields,i=new hh(r);for(let s=0;s<n.length;s++){let o=n[s].name;i[o]=this.hasOwnProperty(o)?this[o]:n[s].init(e,i)}return i}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[n],s=i.spec.state;s&&s.toJSON&&(r[n]=s.toJSON.call(i,this[i.key]))}return r}static fromJSON(e,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Vw(e.schema,e.plugins),s=new hh(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Ua.fromJSON(e.schema,r.doc);else if(o.name=="selection")s.selection=wt.fromJSON(s.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(s.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let a in n){let l=n[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(r,a)){s[o.name]=c.fromJSON.call(l,e,r[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function LP(t,e,r){for(let n in t){let i=t[n];i instanceof Function?i=i.bind(e):n=="handleDOMEvents"&&(i=LP(i,e,{})),r[n]=i}return r}class xr{constructor(e){this.spec=e,this.props={},e.props&&LP(e.props,this,this.props),this.key=e.key?e.key.key:OP("plugin")}getState(e){return e[this.key]}}const Ww=Object.create(null);function OP(t){return t in Ww?t+"$"+ ++Ww[t]:(Ww[t]=0,t+"$")}class vr{constructor(e="key"){this.key=OP(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}class Ii{constructor(e,r,n={}){this.match=e,this.match=e,this.handler=typeof r=="string"?Hie(r):r,this.undoable=n.undoable!==!1,this.inCode=n.inCode||!1,this.inCodeMark=n.inCodeMark!==!1}}function Hie(t){return function(e,r,n,i){let s=t;if(r[1]){let o=r[0].lastIndexOf(r[1]);s+=r[0].slice(o+r[1].length),n+=o;let a=n-i;a>0&&(s=r[0].slice(o-a,o)+s,n=i)}return e.tr.insertText(s,n,i)}}const qie=(t,e)=>{let r=t.plugins;for(let n=0;n<r.length;n++){let i=r[n],s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){let o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l--)o.step(a.steps[l].invert(a.docs[l]));if(s.text){let l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to);e(o)}return!0}}return!1};new Ii(/--$/,"",{inCodeMark:!1});new Ii(/\.\.\.$/,"",{inCodeMark:!1});new Ii(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"",{inCodeMark:!1});new Ii(/"$/,"",{inCodeMark:!1});new Ii(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"",{inCodeMark:!1});new Ii(/'$/,"",{inCodeMark:!1});function L7(t,e,r=null,n){return new Ii(t,(i,s,o,a)=>{let l=r instanceof Function?r(s):r,c=i.tr.delete(o,a),h=c.doc.resolve(o),u=h.blockRange(),f=u&&A7(u,e,l);if(!f)return null;c.wrap(u,f);let d=c.doc.resolve(o-1).nodeBefore;return d&&d.type==e&&Ov(c.doc,o-1)&&(!n||n(s,d))&&c.join(o-1),c})}function O7(t,e,r=null){return new Ii(t,(n,i,s,o)=>{let a=n.doc.resolve(s),l=r instanceof Function?r(i):r;return a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),e)?n.tr.delete(s,o).setBlockType(s,s,e,l):null})}var Bi=(t=>(t.docTypeError="docTypeError",t.contextNotFound="contextNotFound",t.timerNotFound="timerNotFound",t.ctxCallOutOfScope="ctxCallOutOfScope",t.createNodeInParserFail="createNodeInParserFail",t.stackOverFlow="stackOverFlow",t.parserMatchError="parserMatchError",t.serializerMatchError="serializerMatchError",t.getAtomFromSchemaFail="getAtomFromSchemaFail",t.expectDomTypeError="expectDomTypeError",t.callCommandBeforeEditorView="callCommandBeforeEditorView",t.missingRootElement="missingRootElement",t.missingNodeInSchema="missingNodeInSchema",t.missingMarkInSchema="missingMarkInSchema",t.ctxNotBind="ctxNotBind",t.missingYjsDoc="missingYjsDoc",t))(Bi||{});class ss extends Error{constructor(e,r){super(r),this.name="MilkdownError",this.code=e}}const Vie=(t,e)=>typeof e=="function"?"[Function]":e,Bv=t=>JSON.stringify(t,Vie);function Wie(t){return new ss(Bi.docTypeError,`Doc type error, unsupported type: ${Bv(t)}`)}function jie(t){return new ss(Bi.contextNotFound,`Context "${t}" not found, do you forget to inject it?`)}function Uie(t){return new ss(Bi.timerNotFound,`Timer "${t}" not found, do you forget to record it?`)}function Rv(){return new ss(Bi.ctxCallOutOfScope,"Should not call a context out of the plugin.")}function Gie(t,e,r){const i=`Cannot create node for ${"name"in t?t.name:t}`,s=h=>{if(h==null)return"null";if(Array.isArray(h))return`[${h.map(s).join(", ")}]`;if(typeof h=="object")return"toJSON"in h&&typeof h.toJSON=="function"?JSON.stringify(h.toJSON()):"spec"in h?JSON.stringify(h.spec):JSON.stringify(h);if(typeof h=="string"||typeof h=="number"||typeof h=="boolean")return JSON.stringify(h);if(typeof h=="function")return`[Function: ${h.name||"anonymous"}]`;try{return String(h)}catch{return"[Unserializable]"}},o=["[Description]",i],a=["[Attributes]",e],l=["[Content]",(r??[]).map(h=>h?typeof h=="object"&&"type"in h?`${h}`:s(h):"null")],c=[o,a,l].reduce((h,[u,f])=>{const d=`${u}: ${s(f)}.`;return h.concat(d)},[]);return new ss(Bi.createNodeInParserFail,c.join(`
`))}function DP(){return new ss(Bi.stackOverFlow,"Stack over flow, cannot pop on an empty stack.")}function Kie(t){return new ss(Bi.parserMatchError,`Cannot match target parser for node: ${Bv(t)}.`)}function Yie(t){return new ss(Bi.serializerMatchError,`Cannot match target serializer for node: ${Bv(t)}.`)}function Xie(t,e){return new ss(Bi.getAtomFromSchemaFail,`Cannot get ${t}: ${e} from schema.`)}function co(t){return new ss(Bi.expectDomTypeError,`Expect to be a dom, but get: ${Bv(t)}.`)}function jw(){return new ss(Bi.callCommandBeforeEditorView,"You're trying to call a command before editor view initialized, make sure to get commandManager from ctx after editor view has been initialized")}function Jie(t){return new ss(Bi.missingNodeInSchema,`Missing node in schema, milkdown cannot find "${t}" in schema.`)}function Zie(t){return new ss(Bi.missingMarkInSchema,`Missing mark in schema, milkdown cannot find "${t}" in schema.`)}const lc=typeof navigator<"u"?navigator:null,oA=typeof document<"u"?document:null,Sc=lc&&lc.userAgent||"",D3=/Edge\/(\d+)/.exec(Sc),IP=/MSIE \d/.exec(Sc),I3=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Sc),Pv=!!(IP||I3||D3),Qie=IP?document.documentMode:I3?+I3[1]:D3?+D3[1]:0,BP=!Pv&&/gecko\/(\d+)/i.test(Sc),ese=BP&&+(/Firefox\/(\d+)/.exec(Sc)||[0,0])[1],B3=!Pv&&/Chrome\/(\d+)/.exec(Sc),tse=!!B3,rse=B3?+B3[1]:0,RP=!Pv&&!!lc&&/Apple Computer/.test(lc.vendor),PP=RP&&(/Mobile\/\w+/.test(Sc)||!!lc&&lc.maxTouchPoints>2),nse=PP||(lc?/Mac/.test(lc.platform):!1),ise=/Android \d/.test(Sc),NP=!!oA&&"webkitFontSmoothing"in oA.documentElement.style,sse=NP?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;var ky=Object.freeze({__proto__:null,android:ise,chrome:tse,chrome_version:rse,gecko:BP,gecko_version:ese,ie:Pv,ie_version:Qie,ios:PP,mac:nse,safari:RP,webkit:NP,webkit_version:sse});function Uw(t,e,r,n,i,s){if(t.composing)return!1;const o=t.state,a=o.doc.resolve(e);if(a.parent.type.spec.code)return!1;const l=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,void 0,"")+n;for(let c of i){const h=c,u=h.match.exec(l),f=u&&u[0]&&h.handler(o,u,e-(u[0].length-n.length),r);if(f)return h.undoable!==!1&&f.setMeta(s,{transform:f,from:e,to:r,text:n}),t.dispatch(f),!0}return!1}const ose=new vr("MILKDOWN_CUSTOM_INPUTRULES");function ase({rules:t}){const e=new xr({key:ose,isInputRules:!0,state:{init(){return null},apply(r,n){const i=r.getMeta(this);return i||(r.selectionSet||r.docChanged?null:n)}},props:{handleTextInput(r,n,i,s){return Uw(r,n,i,s,t,e)},handleDOMEvents:{compositionend:r=>(setTimeout(()=>{const{$cursor:n}=r.state.selection;n&&Uw(r,n.pos,n.pos,"",t,e)}),!1)},handleKeyDown(r,n){if(n.key!=="Enter")return!1;const{$cursor:i}=r.state.selection;return i?Uw(r,i.pos,i.pos,`
`,t,e):!1}}});return e}function o1(t,e,r={}){return new Ii(t,(n,i,s,o)=>{var a,l,c,h;const{tr:u}=n,f=i.length;let d=i[f-1],p=i[0],m=[],g=o;const y={group:d,fullMatch:p,start:s,end:o},b=(a=r.updateCaptured)==null?void 0:a.call(r,y);if(Object.assign(y,b),{group:d,fullMatch:p,start:s,end:o}=y,p===null||(d==null?void 0:d.trim())==="")return null;if(d){const x=p.search(/\S/),T=s+p.indexOf(d),S=T+d.length;m=(l=u.storedMarks)!=null?l:[],S<o&&u.delete(S,o),T>s&&u.delete(s+x,T),g=s+x+d.length;const w=(c=r.getAttr)==null?void 0:c.call(r,i);u.addMark(s,g,e.create(w)),u.setStoredMarks(m),(h=r.beforeDispatch)==null||h.call(r,{match:i,start:s,end:o,tr:u})}return u})}function lse(t,e,r={}){return new Ii(t,(n,i,s,o)=>{var a,l,c;const{tr:h}=n;let u=i[1],f=i[0];const d={group:u,fullMatch:f,start:s,end:o},p=(a=r.updateCaptured)==null?void 0:a.call(r,d);if(Object.assign(d,p),{group:u,fullMatch:f,start:s,end:o}=d,f===null||!u||u.trim()==="")return null;const m=(l=r.getAttr)==null?void 0:l.call(r,i),g=e.createAndFill(m);return g&&(h.replaceRangeWith(e.isBlock?h.doc.resolve(s).before():s,o,g),(c=r.beforeDispatch)==null||c.call(r,{match:[f,u??""],start:s,end:o,tr:h})),h})}var cse=Object.defineProperty,hse=Object.defineProperties,use=Object.getOwnPropertyDescriptors,aA=Object.getOwnPropertySymbols,fse=Object.prototype.hasOwnProperty,dse=Object.prototype.propertyIsEnumerable,lA=(t,e,r)=>e in t?cse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pse=(t,e)=>{for(var r in e||(e={}))fse.call(e,r)&&lA(t,r,e[r]);if(aA)for(var r of aA(e))dse.call(e,r)&&lA(t,r,e[r]);return t},mse=(t,e)=>hse(t,use(e));function cA(t=0,e=0,r=0){return Math.min(Math.max(t,e),r)}function Nv(t,e,r){const i=t.state.doc.content.size,s=cA(e,0,i),o=cA(r,0,i),a=t.coordsAtPos(s),l=t.coordsAtPos(o,-1),c=Math.min(a.top,l.top),h=Math.max(a.bottom,l.bottom),u=Math.min(a.left,l.left),f=Math.max(a.right,l.right),d=f-u,p=h-c,y={top:c,bottom:h,left:u,right:f,width:d,height:p,x:u,y:c};return mse(pse({},y),{toJSON:()=>y})}function FP(t){return Object.assign(Object.create(t),t).setTime(Date.now())}function gse(t,e){return Array.isArray(t)&&t.includes(e.type)||e.type===t}function yse(t){if(t.content.childCount===1){const e=t.content.firstChild;if((e==null?void 0:e.type.name)==="text"&&e.marks.length===0)return e;if((e==null?void 0:e.type.name)==="paragraph"&&e.childCount===1){const r=e.firstChild;if((r==null?void 0:r.type.name)==="text"&&r.marks.length===0)return r}}return!1}function jo(t){return e=>{for(let r=e.depth;r>0;r-=1){const n=e.node(r);if(t(n)){const i=e.before(r),s=e.after(r);return{from:i,to:s,node:n}}}}}function bse(t,e){return jo(r=>r.type===e)(t)}function xse(t,e){const r=e.nodes[t];if(!r)throw Xie("node",t);return r}function $P(t){return e=>{for(let r=e.depth;r>0;r--){const n=e.node(r);if(t(n))return{pos:r>0?e.before(r):0,start:e.start(r),depth:r,node:n}}}}function vse(t){return e=>$P(t)(e.$from)}function wse(t,e){if(!(t instanceof it))return;const{node:r,$from:n}=t;if(gse(e,r))return{node:r,pos:n.pos,start:n.start(n.depth),depth:n.depth}}const zP=(t,e)=>{const{selection:r,doc:n}=t;if(r instanceof it)return{hasNode:r.node.type===e,pos:r.from,target:r.node};const{from:i,to:s}=r;let o=!1,a=-1,l=null;return n.nodesBetween(i,s,(c,h)=>l?!1:c.type===e?(o=!0,a=h,l=c,!1):!0),{hasNode:o,pos:a,target:l}};class HP{constructor(){this.sliceMap=new Map,this.get=e=>{const r=typeof e=="string"?[...this.sliceMap.values()].find(n=>n.type.name===e):this.sliceMap.get(e.id);if(!r){const n=typeof e=="string"?e:e.name;throw jie(n)}return r},this.remove=e=>{const r=typeof e=="string"?[...this.sliceMap.values()].find(n=>n.type.name===e):this.sliceMap.get(e.id);r&&this.sliceMap.delete(r.type.id)},this.has=e=>typeof e=="string"?[...this.sliceMap.values()].some(r=>r.type.name===e):this.sliceMap.has(e.id)}}var Fs,La,_f;class kse{constructor(e,r,n){we(this,Fs);we(this,La);we(this,_f);ne(this,Fs,[]),ne(this,_f,()=>{V(this,Fs).forEach(i=>i(V(this,La)))}),this.set=i=>{ne(this,La,i),V(this,_f).call(this)},this.get=()=>V(this,La),this.update=i=>{ne(this,La,i(V(this,La))),V(this,_f).call(this)},this.type=n,ne(this,La,r),e.set(n.id,this)}on(e){return V(this,Fs).push(e),()=>{ne(this,Fs,V(this,Fs).filter(r=>r!==e))}}once(e){const r=this.on(n=>{e(n),r()});return r}off(e){ne(this,Fs,V(this,Fs).filter(r=>r!==e))}offAll(){ne(this,Fs,[])}}Fs=new WeakMap,La=new WeakMap,_f=new WeakMap;class Cse{constructor(e,r){this.id=Symbol(`Context-${r}`),this.name=r,this._defaultValue=e,this._typeInfo=()=>{throw Rv()}}create(e,r=this._defaultValue){return new kse(e,r,this)}}const Dt=(t,e)=>new Cse(t,e);var Mg,Ag,Eg,wh,Mf,ql,Af,Ef,Lf;class Sse{constructor(e,r,n){we(this,Mg);we(this,Ag);we(this,Eg);we(this,wh);we(this,Mf);we(this,ql);we(this,Af);we(this,Ef);we(this,Lf);ne(this,wh,new Set),ne(this,Mf,new Set),ne(this,ql,new Map),ne(this,Af,new Map),this.read=()=>({metadata:V(this,Mg),injectedSlices:[...V(this,wh)].map(i=>({name:typeof i=="string"?i:i.name,value:V(this,Ef).call(this,i)})),consumedSlices:[...V(this,Mf)].map(i=>({name:typeof i=="string"?i:i.name,value:V(this,Ef).call(this,i)})),recordedTimers:[...V(this,ql)].map(([i,{duration:s}])=>({name:i.name,duration:s,status:V(this,Lf).call(this,i)})),waitTimers:[...V(this,Af)].map(([i,{duration:s}])=>({name:i.name,duration:s,status:V(this,Lf).call(this,i)}))}),this.onRecord=i=>{V(this,ql).set(i,{start:Date.now(),duration:0})},this.onClear=i=>{V(this,ql).delete(i)},this.onDone=i=>{const s=V(this,ql).get(i);s&&(s.duration=Date.now()-s.start)},this.onWait=(i,s)=>{const o=Date.now();s.finally(()=>{V(this,Af).set(i,{duration:Date.now()-o})}).catch(console.error)},this.onInject=i=>{V(this,wh).add(i)},this.onRemove=i=>{V(this,wh).delete(i)},this.onUse=i=>{V(this,Mf).add(i)},ne(this,Ef,i=>V(this,Ag).get(i).get()),ne(this,Lf,i=>V(this,Eg).get(i).status),ne(this,Ag,e),ne(this,Eg,r),ne(this,Mg,n)}}Mg=new WeakMap,Ag=new WeakMap,Eg=new WeakMap,wh=new WeakMap,Mf=new WeakMap,ql=new WeakMap,Af=new WeakMap,Ef=new WeakMap,Lf=new WeakMap;var Oa,Da,Lg,us;const RT=class RT{constructor(e,r,n){we(this,Oa);we(this,Da);we(this,Lg);we(this,us);this.produce=i=>i&&Object.keys(i).length?new RT(V(this,Oa),V(this,Da),{...i}):this,this.inject=(i,s)=>{var a;const o=i.create(V(this,Oa).sliceMap);return s!=null&&o.set(s),(a=V(this,us))==null||a.onInject(i),this},this.remove=i=>{var s;return V(this,Oa).remove(i),(s=V(this,us))==null||s.onRemove(i),this},this.record=i=>{var s;return i.create(V(this,Da).store),(s=V(this,us))==null||s.onRecord(i),this},this.clearTimer=i=>{var s;return V(this,Da).remove(i),(s=V(this,us))==null||s.onClear(i),this},this.isInjected=i=>V(this,Oa).has(i),this.isRecorded=i=>V(this,Da).has(i),this.use=i=>{var s;return(s=V(this,us))==null||s.onUse(i),V(this,Oa).get(i)},this.get=i=>this.use(i).get(),this.set=(i,s)=>this.use(i).set(s),this.update=(i,s)=>this.use(i).update(s),this.timer=i=>V(this,Da).get(i),this.done=i=>{var s;this.timer(i).done(),(s=V(this,us))==null||s.onDone(i)},this.wait=i=>{var o;const s=this.timer(i).start();return(o=V(this,us))==null||o.onWait(i,s),s},this.waitTimers=async i=>{await Promise.all(this.get(i).map(s=>this.wait(s)))},ne(this,Oa,e),ne(this,Da,r),ne(this,Lg,n),n&&ne(this,us,new Sse(e,r,n))}get meta(){return V(this,Lg)}get inspector(){return V(this,us)}};Oa=new WeakMap,Da=new WeakMap,Lg=new WeakMap,us=new WeakMap;let R3=RT;class Tse{constructor(){this.store=new Map,this.get=e=>{const r=this.store.get(e.id);if(!r)throw Uie(e.name);return r},this.remove=e=>{this.store.delete(e.id)},this.has=e=>this.store.has(e.id)}}var Of,Vl,Df,Ia,If,Og,MI;let _se=(MI=class{constructor(e,r){we(this,Of);we(this,Vl);we(this,Df);we(this,Ia);we(this,If);we(this,Og);ne(this,Of,null),ne(this,Vl,null),ne(this,Ia,"pending"),this.start=()=>(V(this,Of)??ne(this,Of,new Promise((n,i)=>{ne(this,Vl,s=>{s instanceof CustomEvent&&s.detail.id===V(this,Df)&&(ne(this,Ia,"resolved"),V(this,If).call(this),s.stopImmediatePropagation(),n())}),V(this,Og).call(this,()=>{V(this,Ia)==="pending"&&ne(this,Ia,"rejected"),V(this,If).call(this),i(new Error(`Timing ${this.type.name} timeout.`))}),ne(this,Ia,"pending"),addEventListener(this.type.name,V(this,Vl))})),V(this,Of)),this.done=()=>{const n=new CustomEvent(this.type.name,{detail:{id:V(this,Df)}});dispatchEvent(n)},ne(this,If,()=>{V(this,Vl)&&removeEventListener(this.type.name,V(this,Vl))}),ne(this,Og,n=>{setTimeout(()=>{n()},this.type.timeout)}),ne(this,Df,Symbol(r.name)),this.type=r,e.set(r.id,this)}get status(){return V(this,Ia)}},Of=new WeakMap,Vl=new WeakMap,Df=new WeakMap,Ia=new WeakMap,If=new WeakMap,Og=new WeakMap,MI);class Mse{constructor(e,r=3e3){this.create=n=>new _se(n,this),this.id=Symbol(`Timer-${e}`),this.name=e,this.timeout=r}}const na=(t,e=3e3)=>new Mse(t,e),Ase={};function D7(t,e){const r=Ase,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,i=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return qP(t,n,i)}function qP(t,e,r){if(Ese(t)){if("value"in t)return t.type==="html"&&!r?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return hA(t.children,e,r)}return Array.isArray(t)?hA(t,e,r):""}function hA(t,e,r){const n=[];let i=-1;for(;++i<t.length;)n[i]=qP(t[i],e,r);return n.join("")}function Ese(t){return!!(t&&typeof t=="object")}const uA=document.createElement("i");function I7(t){const e="&"+t+";";uA.innerHTML=e;const r=uA.textContent;return r.charCodeAt(r.length-1)===59&&t!=="semi"||r===e?!1:r}function Zi(t,e,r,n){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,r=r>0?r:0,n.length<1e4)o=Array.from(n),o.unshift(e,r),t.splice(...o);else for(r&&t.splice(e,r);s<n.length;)o=n.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function ms(t,e){return t.length>0?(Zi(t,t.length,0,e),t):e}const fA={}.hasOwnProperty;function VP(t){const e={};let r=-1;for(;++r<t.length;)Lse(e,t[r]);return e}function Lse(t,e){let r;for(r in e){const i=(fA.call(t,r)?t[r]:void 0)||(t[r]={}),s=e[r];let o;if(s)for(o in s){fA.call(i,o)||(i[o]=[]);const a=s[o];Ose(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Ose(t,e){let r=-1;const n=[];for(;++r<e.length;)(e[r].add==="after"?t:n).push(e[r]);Zi(t,0,0,n)}function WP(t,e){const r=Number.parseInt(t,e);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"":String.fromCodePoint(r)}function Ys(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Qn=Tc(/[A-Za-z]/),Ai=Tc(/[\dA-Za-z]/),Dse=Tc(/[#-'*+\--9=?A-Z^-~]/);function Kb(t){return t!==null&&(t<32||t===127)}const P3=Tc(/\d/),Ise=Tc(/[\dA-Fa-f]/),Bse=Tc(/[!-/:-@[-`{-~]/);function Je(t){return t!==null&&t<-2}function ar(t){return t!==null&&(t<0||t===32)}function Bt(t){return t===-2||t===-1||t===32}const Fv=Tc(new RegExp("\\p{P}|\\p{S}","u")),iu=Tc(/\s/);function Tc(t){return e;function e(r){return r!==null&&r>-1&&t.test(String.fromCharCode(r))}}function Lt(t,e,r,n){const i=n?n-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Bt(l)?(t.enter(r),a(l)):e(l)}function a(l){return Bt(l)&&s++<i?(t.consume(l),a):(t.exit(r),e(l))}}const Rse={tokenize:Pse};function Pse(t){const e=t.attempt(this.parser.constructs.contentInitial,n,i);let r;return e;function n(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Lt(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=l),r=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Je(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const Nse={tokenize:Fse},dA={tokenize:$se};function Fse(t){const e=this,r=[];let n=0,i,s,o;return a;function a(x){if(n<r.length){const T=r[n];return e.containerState=T[1],t.attempt(T[0].continuation,l,c)(x)}return c(x)}function l(x){if(n++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&b();const T=e.events.length;let S=T,w;for(;S--;)if(e.events[S][0]==="exit"&&e.events[S][1].type==="chunkFlow"){w=e.events[S][1].end;break}y(n);let _=T;for(;_<e.events.length;)e.events[_][1].end={...w},_++;return Zi(e.events,S+1,0,e.events.slice(T)),e.events.length=_,c(x)}return a(x)}function c(x){if(n===r.length){if(!i)return f(x);if(i.currentConstruct&&i.currentConstruct.concrete)return p(x);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(dA,h,u)(x)}function h(x){return i&&b(),y(n),f(x)}function u(x){return e.parser.lazy[e.now().line]=n!==r.length,o=e.now().offset,p(x)}function f(x){return e.containerState={},t.attempt(dA,d,p)(x)}function d(x){return n++,r.push([e.currentConstruct,e.containerState]),f(x)}function p(x){if(x===null){i&&b(),y(0),t.consume(x);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),m(x)}function m(x){if(x===null){g(t.exit("chunkFlow"),!0),y(0),t.consume(x);return}return Je(x)?(t.consume(x),g(t.exit("chunkFlow")),n=0,e.interrupt=void 0,a):(t.consume(x),m)}function g(x,T){const S=e.sliceStream(x);if(T&&S.push(null),x.previous=s,s&&(s.next=x),s=x,i.defineSkip(x.start),i.write(S),e.parser.lazy[x.start.line]){let w=i.events.length;for(;w--;)if(i.events[w][1].start.offset<o&&(!i.events[w][1].end||i.events[w][1].end.offset>o))return;const _=e.events.length;let I=_,N,L;for(;I--;)if(e.events[I][0]==="exit"&&e.events[I][1].type==="chunkFlow"){if(N){L=e.events[I][1].end;break}N=!0}for(y(n),w=_;w<e.events.length;)e.events[w][1].end={...L},w++;Zi(e.events,I+1,0,e.events.slice(_)),e.events.length=w}}function y(x){let T=r.length;for(;T-- >x;){const S=r[T];e.containerState=S[1],S[0].exit.call(e,t)}r.length=x}function b(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function $se(t,e,r){return Lt(t,t.attempt(this.parser.constructs.document,e,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function md(t){if(t===null||ar(t)||iu(t))return 1;if(Fv(t))return 2}function $v(t,e,r){const n=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!n.includes(s)&&(e=s(e,r),n.push(s))}return e}const N3={name:"attention",resolveAll:zse,tokenize:Hse};function zse(t,e){let r=-1,n,i,s,o,a,l,c,h;for(;++r<t.length;)if(t[r][0]==="enter"&&t[r][1].type==="attentionSequence"&&t[r][1]._close){for(n=r;n--;)if(t[n][0]==="exit"&&t[n][1].type==="attentionSequence"&&t[n][1]._open&&e.sliceSerialize(t[n][1]).charCodeAt(0)===e.sliceSerialize(t[r][1]).charCodeAt(0)){if((t[n][1]._close||t[r][1]._open)&&(t[r][1].end.offset-t[r][1].start.offset)%3&&!((t[n][1].end.offset-t[n][1].start.offset+t[r][1].end.offset-t[r][1].start.offset)%3))continue;l=t[n][1].end.offset-t[n][1].start.offset>1&&t[r][1].end.offset-t[r][1].start.offset>1?2:1;const u={...t[n][1].end},f={...t[r][1].start};pA(u,-l),pA(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:u,end:{...t[n][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[r][1].start},end:f},s={type:l>1?"strongText":"emphasisText",start:{...t[n][1].end},end:{...t[r][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[n][1].end={...o.start},t[r][1].start={...a.end},c=[],t[n][1].end.offset-t[n][1].start.offset&&(c=ms(c,[["enter",t[n][1],e],["exit",t[n][1],e]])),c=ms(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=ms(c,$v(e.parser.constructs.insideSpan.null,t.slice(n+1,r),e)),c=ms(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[r][1].end.offset-t[r][1].start.offset?(h=2,c=ms(c,[["enter",t[r][1],e],["exit",t[r][1],e]])):h=0,Zi(t,n-1,r-n+3,c),r=n+c.length-h-2;break}}for(r=-1;++r<t.length;)t[r][1].type==="attentionSequence"&&(t[r][1].type="data");return t}function Hse(t,e){const r=this.parser.constructs.attentionMarkers.null,n=this.previous,i=md(n);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const c=t.exit("attentionSequence"),h=md(l),u=!h||h===2&&i||r.includes(l),f=!i||i===2&&h||r.includes(n);return c._open=!!(s===42?u:u&&(i||!f)),c._close=!!(s===42?f:f&&(h||!u)),e(l)}}function pA(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const qse={name:"autolink",tokenize:Vse};function Vse(t,e,r){let n=0;return i;function i(d){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(d){return Qn(d)?(t.consume(d),o):d===64?r(d):c(d)}function o(d){return d===43||d===45||d===46||Ai(d)?(n=1,a(d)):c(d)}function a(d){return d===58?(t.consume(d),n=0,l):(d===43||d===45||d===46||Ai(d))&&n++<32?(t.consume(d),a):(n=0,c(d))}function l(d){return d===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.exit("autolink"),e):d===null||d===32||d===60||Kb(d)?r(d):(t.consume(d),l)}function c(d){return d===64?(t.consume(d),h):Dse(d)?(t.consume(d),c):r(d)}function h(d){return Ai(d)?u(d):r(d)}function u(d){return d===46?(t.consume(d),n=0,h):d===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.exit("autolink"),e):f(d)}function f(d){if((d===45||Ai(d))&&n++<63){const p=d===45?f:u;return t.consume(d),p}return r(d)}}const a1={partial:!0,tokenize:Wse};function Wse(t,e,r){return n;function n(s){return Bt(s)?Lt(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Je(s)?e(s):r(s)}}const jP={continuation:{tokenize:Use},exit:Gse,name:"blockQuote",tokenize:jse};function jse(t,e,r){const n=this;return i;function i(o){if(o===62){const a=n.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return r(o)}function s(o){return Bt(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function Use(t,e,r){const n=this;return i;function i(o){return Bt(o)?Lt(t,s,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(jP,e,r)(o)}}function Gse(t){t.exit("blockQuote")}const UP={name:"characterEscape",tokenize:Kse};function Kse(t,e,r){return n;function n(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return Bse(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):r(s)}}const GP={name:"characterReference",tokenize:Yse};function Yse(t,e,r){const n=this;let i=0,s,o;return a;function a(u){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(u),t.exit("characterReferenceMarker"),l}function l(u){return u===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(u),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=Ai,h(u))}function c(u){return u===88||u===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(u),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=Ise,h):(t.enter("characterReferenceValue"),s=7,o=P3,h(u))}function h(u){if(u===59&&i){const f=t.exit("characterReferenceValue");return o===Ai&&!I7(n.sliceSerialize(f))?r(u):(t.enter("characterReferenceMarker"),t.consume(u),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(u)&&i++<s?(t.consume(u),h):r(u)}}const mA={partial:!0,tokenize:Jse},gA={concrete:!0,name:"codeFenced",tokenize:Xse};function Xse(t,e,r){const n=this,i={partial:!0,tokenize:S};let s=0,o=0,a;return l;function l(w){return c(w)}function c(w){const _=n.events[n.events.length-1];return s=_&&_[1].type==="linePrefix"?_[2].sliceSerialize(_[1],!0).length:0,a=w,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),h(w)}function h(w){return w===a?(o++,t.consume(w),h):o<3?r(w):(t.exit("codeFencedFenceSequence"),Bt(w)?Lt(t,u,"whitespace")(w):u(w))}function u(w){return w===null||Je(w)?(t.exit("codeFencedFence"),n.interrupt?e(w):t.check(mA,m,T)(w)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(w))}function f(w){return w===null||Je(w)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),u(w)):Bt(w)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Lt(t,d,"whitespace")(w)):w===96&&w===a?r(w):(t.consume(w),f)}function d(w){return w===null||Je(w)?u(w):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),p(w))}function p(w){return w===null||Je(w)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),u(w)):w===96&&w===a?r(w):(t.consume(w),p)}function m(w){return t.attempt(i,T,g)(w)}function g(w){return t.enter("lineEnding"),t.consume(w),t.exit("lineEnding"),y}function y(w){return s>0&&Bt(w)?Lt(t,b,"linePrefix",s+1)(w):b(w)}function b(w){return w===null||Je(w)?t.check(mA,m,T)(w):(t.enter("codeFlowValue"),x(w))}function x(w){return w===null||Je(w)?(t.exit("codeFlowValue"),b(w)):(t.consume(w),x)}function T(w){return t.exit("codeFenced"),e(w)}function S(w,_,I){let N=0;return L;function L($){return w.enter("lineEnding"),w.consume($),w.exit("lineEnding"),D}function D($){return w.enter("codeFencedFence"),Bt($)?Lt(w,P,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):P($)}function P($){return $===a?(w.enter("codeFencedFenceSequence"),K($)):I($)}function K($){return $===a?(N++,w.consume($),K):N>=o?(w.exit("codeFencedFenceSequence"),Bt($)?Lt(w,z,"whitespace")($):z($)):I($)}function z($){return $===null||Je($)?(w.exit("codeFencedFence"),_($)):I($)}}}function Jse(t,e,r){const n=this;return i;function i(o){return o===null?r(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return n.parser.lazy[n.now().line]?r(o):e(o)}}const Gw={name:"codeIndented",tokenize:Qse},Zse={partial:!0,tokenize:eoe};function Qse(t,e,r){const n=this;return i;function i(c){return t.enter("codeIndented"),Lt(t,s,"linePrefix",5)(c)}function s(c){const h=n.events[n.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?o(c):r(c)}function o(c){return c===null?l(c):Je(c)?t.attempt(Zse,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||Je(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function eoe(t,e,r){const n=this;return i;function i(o){return n.parser.lazy[n.now().line]?r(o):Je(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):Lt(t,s,"linePrefix",5)(o)}function s(o){const a=n.events[n.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Je(o)?i(o):r(o)}}const toe={name:"codeText",previous:noe,resolve:roe,tokenize:ioe};function roe(t){let e=t.length-4,r=3,n,i;if((t[r][1].type==="lineEnding"||t[r][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(n=r;++n<e;)if(t[n][1].type==="codeTextData"){t[r][1].type="codeTextPadding",t[e][1].type="codeTextPadding",r+=2,e-=2;break}}for(n=r-1,e++;++n<=e;)i===void 0?n!==e&&t[n][1].type!=="lineEnding"&&(i=n):(n===e||t[n][1].type==="lineEnding")&&(t[i][1].type="codeTextData",n!==i+2&&(t[i][1].end=t[n-1][1].end,t.splice(i+2,n-i-2),e-=n-i-2,n=i+2),i=void 0);return t}function noe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function ioe(t,e,r){let n=0,i,s;return o;function o(u){return t.enter("codeText"),t.enter("codeTextSequence"),a(u)}function a(u){return u===96?(t.consume(u),n++,a):(t.exit("codeTextSequence"),l(u))}function l(u){return u===null?r(u):u===32?(t.enter("space"),t.consume(u),t.exit("space"),l):u===96?(s=t.enter("codeTextSequence"),i=0,h(u)):Je(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(u))}function c(u){return u===null||u===32||u===96||Je(u)?(t.exit("codeTextData"),l(u)):(t.consume(u),c)}function h(u){return u===96?(t.consume(u),i++,h):i===n?(t.exit("codeTextSequence"),t.exit("codeText"),e(u)):(s.type="codeTextData",c(u))}}class soe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,r){const n=r??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,r,n){const i=r||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return n&&T0(this.left,n),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),T0(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),T0(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const r=this.left.splice(e,Number.POSITIVE_INFINITY);T0(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);T0(this.left,r.reverse())}}}function T0(t,e){let r=0;if(e.length<1e4)t.push(...e);else for(;r<e.length;)t.push(...e.slice(r,r+1e4)),r+=1e4}function KP(t){const e={};let r=-1,n,i,s,o,a,l,c;const h=new soe(t);for(;++r<h.length;){for(;r in e;)r=e[r];if(n=h.get(r),r&&n[1].type==="chunkFlow"&&h.get(r-1)[1].type==="listItemPrefix"&&(l=n[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(n[0]==="enter")n[1].contentType&&(Object.assign(e,ooe(h,r)),r=e[r],c=!0);else if(n[1]._container){for(s=r,i=void 0;s--;)if(o=h.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(h.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(n[1].end={...h.get(i)[1].start},a=h.slice(i,r),a.unshift(n),h.splice(i,r-i+1,a))}}return Zi(t,0,Number.POSITIVE_INFINITY,h.slice(0)),!c}function ooe(t,e){const r=t.get(e)[1],n=t.get(e)[2];let i=e-1;const s=[];let o=r._tokenizer;o||(o=n.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let h,u,f=-1,d=r,p=0,m=0;const g=[m];for(;d;){for(;t.get(++i)[1]!==d;);s.push(i),d._tokenizer||(h=n.sliceStream(d),d.next||h.push(null),u&&o.defineSkip(d.start),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(h),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),u=d,d=d.next}for(d=r;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(m=f+1,g.push(m),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(o.events=[],d?(d._tokenizer=void 0,d.previous=void 0):g.pop(),f=g.length;f--;){const y=a.slice(g[f],g[f+1]),b=s.pop();l.push([b,b+y.length-1]),t.splice(b,2,y)}for(l.reverse(),f=-1;++f<l.length;)c[p+l[f][0]]=p+l[f][1],p+=l[f][1]-l[f][0]-1;return c}const aoe={resolve:coe,tokenize:hoe},loe={partial:!0,tokenize:uoe};function coe(t){return KP(t),t}function hoe(t,e){let r;return n;function n(a){return t.enter("content"),r=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Je(a)?t.check(loe,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),r.next=t.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,i}}function uoe(t,e,r){const n=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Lt(t,s,"linePrefix")}function s(o){if(o===null||Je(o))return r(o);const a=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(n.parser.constructs.flow,r,e)(o)}}function YP(t,e,r,n,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let h=0;return u;function u(y){return y===60?(t.enter(n),t.enter(i),t.enter(s),t.consume(y),t.exit(s),f):y===null||y===32||y===41||Kb(y)?r(y):(t.enter(n),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),m(y))}function f(y){return y===62?(t.enter(s),t.consume(y),t.exit(s),t.exit(i),t.exit(n),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),d(y))}function d(y){return y===62?(t.exit("chunkString"),t.exit(a),f(y)):y===null||y===60||Je(y)?r(y):(t.consume(y),y===92?p:d)}function p(y){return y===60||y===62||y===92?(t.consume(y),d):d(y)}function m(y){return!h&&(y===null||y===41||ar(y))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(n),e(y)):h<c&&y===40?(t.consume(y),h++,m):y===41?(t.consume(y),h--,m):y===null||y===32||y===40||Kb(y)?r(y):(t.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(t.consume(y),m):m(y)}}function XP(t,e,r,n,i,s){const o=this;let a=0,l;return c;function c(d){return t.enter(n),t.enter(i),t.consume(d),t.exit(i),t.enter(s),h}function h(d){return a>999||d===null||d===91||d===93&&!l||d===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?r(d):d===93?(t.exit(s),t.enter(i),t.consume(d),t.exit(i),t.exit(n),e):Je(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),h):(t.enter("chunkString",{contentType:"string"}),u(d))}function u(d){return d===null||d===91||d===93||Je(d)||a++>999?(t.exit("chunkString"),h(d)):(t.consume(d),l||(l=!Bt(d)),d===92?f:u)}function f(d){return d===91||d===92||d===93?(t.consume(d),a++,u):u(d)}}function JP(t,e,r,n,i,s){let o;return a;function a(f){return f===34||f===39||f===40?(t.enter(n),t.enter(i),t.consume(f),t.exit(i),o=f===40?41:f,l):r(f)}function l(f){return f===o?(t.enter(i),t.consume(f),t.exit(i),t.exit(n),e):(t.enter(s),c(f))}function c(f){return f===o?(t.exit(s),l(o)):f===null?r(f):Je(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),Lt(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===o||f===null||Je(f)?(t.exit("chunkString"),c(f)):(t.consume(f),f===92?u:h)}function u(f){return f===o||f===92?(t.consume(f),h):h(f)}}function Gp(t,e){let r;return n;function n(i){return Je(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),r=!0,n):Bt(i)?Lt(t,n,r?"linePrefix":"lineSuffix")(i):e(i)}}const foe={name:"definition",tokenize:poe},doe={partial:!0,tokenize:moe};function poe(t,e,r){const n=this;let i;return s;function s(d){return t.enter("definition"),o(d)}function o(d){return XP.call(n,t,a,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(d)}function a(d){return i=Ys(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),d===58?(t.enter("definitionMarker"),t.consume(d),t.exit("definitionMarker"),l):r(d)}function l(d){return ar(d)?Gp(t,c)(d):c(d)}function c(d){return YP(t,h,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(d)}function h(d){return t.attempt(doe,u,u)(d)}function u(d){return Bt(d)?Lt(t,f,"whitespace")(d):f(d)}function f(d){return d===null||Je(d)?(t.exit("definition"),n.parser.defined.push(i),e(d)):r(d)}}function moe(t,e,r){return n;function n(a){return ar(a)?Gp(t,i)(a):r(a)}function i(a){return JP(t,s,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Bt(a)?Lt(t,o,"whitespace")(a):o(a)}function o(a){return a===null||Je(a)?e(a):r(a)}}const goe={name:"hardBreakEscape",tokenize:yoe};function yoe(t,e,r){return n;function n(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Je(s)?(t.exit("hardBreakEscape"),e(s)):r(s)}}const boe={name:"headingAtx",resolve:xoe,tokenize:voe};function xoe(t,e){let r=t.length-2,n=3,i,s;return t[n][1].type==="whitespace"&&(n+=2),r-2>n&&t[r][1].type==="whitespace"&&(r-=2),t[r][1].type==="atxHeadingSequence"&&(n===r-1||r-4>n&&t[r-2][1].type==="whitespace")&&(r-=n+1===r?2:4),r>n&&(i={type:"atxHeadingText",start:t[n][1].start,end:t[r][1].end},s={type:"chunkText",start:t[n][1].start,end:t[r][1].end,contentType:"text"},Zi(t,n,r-n+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function voe(t,e,r){let n=0;return i;function i(h){return t.enter("atxHeading"),s(h)}function s(h){return t.enter("atxHeadingSequence"),o(h)}function o(h){return h===35&&n++<6?(t.consume(h),o):h===null||ar(h)?(t.exit("atxHeadingSequence"),a(h)):r(h)}function a(h){return h===35?(t.enter("atxHeadingSequence"),l(h)):h===null||Je(h)?(t.exit("atxHeading"),e(h)):Bt(h)?Lt(t,a,"whitespace")(h):(t.enter("atxHeadingText"),c(h))}function l(h){return h===35?(t.consume(h),l):(t.exit("atxHeadingSequence"),a(h))}function c(h){return h===null||h===35||ar(h)?(t.exit("atxHeadingText"),a(h)):(t.consume(h),c)}}const woe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],yA=["pre","script","style","textarea"],koe={concrete:!0,name:"htmlFlow",resolveTo:Toe,tokenize:_oe},Coe={partial:!0,tokenize:Aoe},Soe={partial:!0,tokenize:Moe};function Toe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function _oe(t,e,r){const n=this;let i,s,o,a,l;return c;function c(O){return h(O)}function h(O){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(O),u}function u(O){return O===33?(t.consume(O),f):O===47?(t.consume(O),s=!0,m):O===63?(t.consume(O),i=3,n.interrupt?e:E):Qn(O)?(t.consume(O),o=String.fromCharCode(O),g):r(O)}function f(O){return O===45?(t.consume(O),i=2,d):O===91?(t.consume(O),i=5,a=0,p):Qn(O)?(t.consume(O),i=4,n.interrupt?e:E):r(O)}function d(O){return O===45?(t.consume(O),n.interrupt?e:E):r(O)}function p(O){const et="CDATA[";return O===et.charCodeAt(a++)?(t.consume(O),a===et.length?n.interrupt?e:P:p):r(O)}function m(O){return Qn(O)?(t.consume(O),o=String.fromCharCode(O),g):r(O)}function g(O){if(O===null||O===47||O===62||ar(O)){const et=O===47,He=o.toLowerCase();return!et&&!s&&yA.includes(He)?(i=1,n.interrupt?e(O):P(O)):woe.includes(o.toLowerCase())?(i=6,et?(t.consume(O),y):n.interrupt?e(O):P(O)):(i=7,n.interrupt&&!n.parser.lazy[n.now().line]?r(O):s?b(O):x(O))}return O===45||Ai(O)?(t.consume(O),o+=String.fromCharCode(O),g):r(O)}function y(O){return O===62?(t.consume(O),n.interrupt?e:P):r(O)}function b(O){return Bt(O)?(t.consume(O),b):L(O)}function x(O){return O===47?(t.consume(O),L):O===58||O===95||Qn(O)?(t.consume(O),T):Bt(O)?(t.consume(O),x):L(O)}function T(O){return O===45||O===46||O===58||O===95||Ai(O)?(t.consume(O),T):S(O)}function S(O){return O===61?(t.consume(O),w):Bt(O)?(t.consume(O),S):x(O)}function w(O){return O===null||O===60||O===61||O===62||O===96?r(O):O===34||O===39?(t.consume(O),l=O,_):Bt(O)?(t.consume(O),w):I(O)}function _(O){return O===l?(t.consume(O),l=null,N):O===null||Je(O)?r(O):(t.consume(O),_)}function I(O){return O===null||O===34||O===39||O===47||O===60||O===61||O===62||O===96||ar(O)?S(O):(t.consume(O),I)}function N(O){return O===47||O===62||Bt(O)?x(O):r(O)}function L(O){return O===62?(t.consume(O),D):r(O)}function D(O){return O===null||Je(O)?P(O):Bt(O)?(t.consume(O),D):r(O)}function P(O){return O===45&&i===2?(t.consume(O),H):O===60&&i===1?(t.consume(O),U):O===62&&i===4?(t.consume(O),de):O===63&&i===3?(t.consume(O),E):O===93&&i===5?(t.consume(O),re):Je(O)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(Coe,Te,K)(O)):O===null||Je(O)?(t.exit("htmlFlowData"),K(O)):(t.consume(O),P)}function K(O){return t.check(Soe,z,Te)(O)}function z(O){return t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),$}function $(O){return O===null||Je(O)?K(O):(t.enter("htmlFlowData"),P(O))}function H(O){return O===45?(t.consume(O),E):P(O)}function U(O){return O===47?(t.consume(O),o="",q):P(O)}function q(O){if(O===62){const et=o.toLowerCase();return yA.includes(et)?(t.consume(O),de):P(O)}return Qn(O)&&o.length<8?(t.consume(O),o+=String.fromCharCode(O),q):P(O)}function re(O){return O===93?(t.consume(O),E):P(O)}function E(O){return O===62?(t.consume(O),de):O===45&&i===2?(t.consume(O),E):P(O)}function de(O){return O===null||Je(O)?(t.exit("htmlFlowData"),Te(O)):(t.consume(O),de)}function Te(O){return t.exit("htmlFlow"),e(O)}}function Moe(t,e,r){const n=this;return i;function i(o){return Je(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):r(o)}function s(o){return n.parser.lazy[n.now().line]?r(o):e(o)}}function Aoe(t,e,r){return n;function n(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(a1,e,r)}}const Eoe={name:"htmlText",tokenize:Loe};function Loe(t,e,r){const n=this;let i,s,o;return a;function a(E){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(E),l}function l(E){return E===33?(t.consume(E),c):E===47?(t.consume(E),S):E===63?(t.consume(E),x):Qn(E)?(t.consume(E),I):r(E)}function c(E){return E===45?(t.consume(E),h):E===91?(t.consume(E),s=0,p):Qn(E)?(t.consume(E),b):r(E)}function h(E){return E===45?(t.consume(E),d):r(E)}function u(E){return E===null?r(E):E===45?(t.consume(E),f):Je(E)?(o=u,U(E)):(t.consume(E),u)}function f(E){return E===45?(t.consume(E),d):u(E)}function d(E){return E===62?H(E):E===45?f(E):u(E)}function p(E){const de="CDATA[";return E===de.charCodeAt(s++)?(t.consume(E),s===de.length?m:p):r(E)}function m(E){return E===null?r(E):E===93?(t.consume(E),g):Je(E)?(o=m,U(E)):(t.consume(E),m)}function g(E){return E===93?(t.consume(E),y):m(E)}function y(E){return E===62?H(E):E===93?(t.consume(E),y):m(E)}function b(E){return E===null||E===62?H(E):Je(E)?(o=b,U(E)):(t.consume(E),b)}function x(E){return E===null?r(E):E===63?(t.consume(E),T):Je(E)?(o=x,U(E)):(t.consume(E),x)}function T(E){return E===62?H(E):x(E)}function S(E){return Qn(E)?(t.consume(E),w):r(E)}function w(E){return E===45||Ai(E)?(t.consume(E),w):_(E)}function _(E){return Je(E)?(o=_,U(E)):Bt(E)?(t.consume(E),_):H(E)}function I(E){return E===45||Ai(E)?(t.consume(E),I):E===47||E===62||ar(E)?N(E):r(E)}function N(E){return E===47?(t.consume(E),H):E===58||E===95||Qn(E)?(t.consume(E),L):Je(E)?(o=N,U(E)):Bt(E)?(t.consume(E),N):H(E)}function L(E){return E===45||E===46||E===58||E===95||Ai(E)?(t.consume(E),L):D(E)}function D(E){return E===61?(t.consume(E),P):Je(E)?(o=D,U(E)):Bt(E)?(t.consume(E),D):N(E)}function P(E){return E===null||E===60||E===61||E===62||E===96?r(E):E===34||E===39?(t.consume(E),i=E,K):Je(E)?(o=P,U(E)):Bt(E)?(t.consume(E),P):(t.consume(E),z)}function K(E){return E===i?(t.consume(E),i=void 0,$):E===null?r(E):Je(E)?(o=K,U(E)):(t.consume(E),K)}function z(E){return E===null||E===34||E===39||E===60||E===61||E===96?r(E):E===47||E===62||ar(E)?N(E):(t.consume(E),z)}function $(E){return E===47||E===62||ar(E)?N(E):r(E)}function H(E){return E===62?(t.consume(E),t.exit("htmlTextData"),t.exit("htmlText"),e):r(E)}function U(E){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),q}function q(E){return Bt(E)?Lt(t,re,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(E):re(E)}function re(E){return t.enter("htmlTextData"),o(E)}}const B7={name:"labelEnd",resolveAll:Boe,resolveTo:Roe,tokenize:Poe},Ooe={tokenize:Noe},Doe={tokenize:Foe},Ioe={tokenize:$oe};function Boe(t){let e=-1;const r=[];for(;++e<t.length;){const n=t[e][1];if(r.push(t[e]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const i=n.type==="labelImage"?4:2;n.type="data",e+=i}}return t.length!==r.length&&Zi(t,0,t.length,r),t}function Roe(t,e){let r=t.length,n=0,i,s,o,a;for(;r--;)if(i=t[r][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[r][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[r][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=r,i.type!=="labelLink")){n=2;break}}else i.type==="labelEnd"&&(o=r);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},h={type:"labelText",start:{...t[s+n+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=ms(a,t.slice(s+1,s+n+3)),a=ms(a,[["enter",h,e]]),a=ms(a,$v(e.parser.constructs.insideSpan.null,t.slice(s+n+4,o-3),e)),a=ms(a,[["exit",h,e],t[o-2],t[o-1],["exit",c,e]]),a=ms(a,t.slice(o+1)),a=ms(a,[["exit",l,e]]),Zi(t,s,t.length,a),t}function Poe(t,e,r){const n=this;let i=n.events.length,s,o;for(;i--;)if((n.events[i][1].type==="labelImage"||n.events[i][1].type==="labelLink")&&!n.events[i][1]._balanced){s=n.events[i][1];break}return a;function a(f){return s?s._inactive?u(f):(o=n.parser.defined.includes(Ys(n.sliceSerialize({start:s.end,end:n.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(f),t.exit("labelMarker"),t.exit("labelEnd"),l):r(f)}function l(f){return f===40?t.attempt(Ooe,h,o?h:u)(f):f===91?t.attempt(Doe,h,o?c:u)(f):o?h(f):u(f)}function c(f){return t.attempt(Ioe,h,u)(f)}function h(f){return e(f)}function u(f){return s._balanced=!0,r(f)}}function Noe(t,e,r){return n;function n(u){return t.enter("resource"),t.enter("resourceMarker"),t.consume(u),t.exit("resourceMarker"),i}function i(u){return ar(u)?Gp(t,s)(u):s(u)}function s(u){return u===41?h(u):YP(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(u)}function o(u){return ar(u)?Gp(t,l)(u):h(u)}function a(u){return r(u)}function l(u){return u===34||u===39||u===40?JP(t,c,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(u):h(u)}function c(u){return ar(u)?Gp(t,h)(u):h(u)}function h(u){return u===41?(t.enter("resourceMarker"),t.consume(u),t.exit("resourceMarker"),t.exit("resource"),e):r(u)}}function Foe(t,e,r){const n=this;return i;function i(a){return XP.call(n,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return n.parser.defined.includes(Ys(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?e(a):r(a)}function o(a){return r(a)}}function $oe(t,e,r){return n;function n(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):r(s)}}const zoe={name:"labelStartImage",resolveAll:B7.resolveAll,tokenize:Hoe};function Hoe(t,e,r){const n=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):r(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(a):e(a)}}const qoe={name:"labelStartLink",resolveAll:B7.resolveAll,tokenize:Voe};function Voe(t,e,r){const n=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(o):e(o)}}const Kw={name:"lineEnding",tokenize:Woe};function Woe(t,e){return r;function r(n){return t.enter("lineEnding"),t.consume(n),t.exit("lineEnding"),Lt(t,e,"linePrefix")}}const C2={name:"thematicBreak",tokenize:joe};function joe(t,e,r){let n=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):n>=3&&(c===null||Je(c))?(t.exit("thematicBreak"),e(c)):r(c)}function l(c){return c===i?(t.consume(c),n++,l):(t.exit("thematicBreakSequence"),Bt(c)?Lt(t,a,"whitespace")(c):a(c))}}const gi={continuation:{tokenize:Yoe},exit:Joe,name:"list",tokenize:Koe},Uoe={partial:!0,tokenize:Zoe},Goe={partial:!0,tokenize:Xoe};function Koe(t,e,r){const n=this,i=n.events[n.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(d){const p=n.containerState.type||(d===42||d===43||d===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!n.containerState.marker||d===n.containerState.marker:P3(d)){if(n.containerState.type||(n.containerState.type=p,t.enter(p,{_container:!0})),p==="listUnordered")return t.enter("listItemPrefix"),d===42||d===45?t.check(C2,r,c)(d):c(d);if(!n.interrupt||d===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(d)}return r(d)}function l(d){return P3(d)&&++o<10?(t.consume(d),l):(!n.interrupt||o<2)&&(n.containerState.marker?d===n.containerState.marker:d===41||d===46)?(t.exit("listItemValue"),c(d)):r(d)}function c(d){return t.enter("listItemMarker"),t.consume(d),t.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||d,t.check(a1,n.interrupt?r:h,t.attempt(Uoe,f,u))}function h(d){return n.containerState.initialBlankLine=!0,s++,f(d)}function u(d){return Bt(d)?(t.enter("listItemPrefixWhitespace"),t.consume(d),t.exit("listItemPrefixWhitespace"),f):r(d)}function f(d){return n.containerState.size=s+n.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(d)}}function Yoe(t,e,r){const n=this;return n.containerState._closeFlow=void 0,t.check(a1,i,s);function i(a){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,Lt(t,e,"listItemIndent",n.containerState.size+1)(a)}function s(a){return n.containerState.furtherBlankLines||!Bt(a)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,o(a)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,t.attempt(Goe,e,o)(a))}function o(a){return n.containerState._closeFlow=!0,n.interrupt=void 0,Lt(t,t.attempt(gi,e,r),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Xoe(t,e,r){const n=this;return Lt(t,i,"listItemIndent",n.containerState.size+1);function i(s){const o=n.events[n.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===n.containerState.size?e(s):r(s)}}function Joe(t){t.exit(this.containerState.type)}function Zoe(t,e,r){const n=this;return Lt(t,i,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=n.events[n.events.length-1];return!Bt(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):r(s)}}const bA={name:"setextUnderline",resolveTo:Qoe,tokenize:eae};function Qoe(t,e){let r=t.length,n,i,s;for(;r--;)if(t[r][0]==="enter"){if(t[r][1].type==="content"){n=r;break}t[r][1].type==="paragraph"&&(i=r)}else t[r][1].type==="content"&&t.splice(r,1),!s&&t[r][1].type==="definition"&&(s=r);const o={type:"setextHeading",start:{...t[n][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[n][1],e]),t[n][1].end={...t[s][1].end}):t[n][1]=o,t.push(["exit",o,e]),t}function eae(t,e,r){const n=this;let i;return s;function s(c){let h=n.events.length,u;for(;h--;)if(n.events[h][1].type!=="lineEnding"&&n.events[h][1].type!=="linePrefix"&&n.events[h][1].type!=="content"){u=n.events[h][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||u)?(t.enter("setextHeadingLine"),i=c,o(c)):r(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),Bt(c)?Lt(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Je(c)?(t.exit("setextHeadingLine"),e(c)):r(c)}}const tae={tokenize:rae};function rae(t){const e=this,r=t.attempt(a1,n,t.attempt(this.parser.constructs.flowInitial,i,Lt(t,t.attempt(this.parser.constructs.flow,i,t.attempt(aoe,i)),"linePrefix")));return r;function n(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,r}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,r}}const nae={resolveAll:QP()},iae=ZP("string"),sae=ZP("text");function ZP(t){return{resolveAll:QP(t==="text"?oae:void 0),tokenize:e};function e(r){const n=this,i=this.parser.constructs[t],s=r.attempt(i,o,a);return o;function o(h){return c(h)?s(h):a(h)}function a(h){if(h===null){r.consume(h);return}return r.enter("data"),r.consume(h),l}function l(h){return c(h)?(r.exit("data"),s(h)):(r.consume(h),l)}function c(h){if(h===null)return!0;const u=i[h];let f=-1;if(u)for(;++f<u.length;){const d=u[f];if(!d.previous||d.previous.call(n,n.previous))return!0}return!1}}}function QP(t){return e;function e(r,n){let i=-1,s;for(;++i<=r.length;)s===void 0?r[i]&&r[i][1].type==="data"&&(s=i,i++):(!r[i]||r[i][1].type!=="data")&&(i!==s+2&&(r[s][1].end=r[i-1][1].end,r.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(r,n):r}}function oae(t,e){let r=0;for(;++r<=t.length;)if((r===t.length||t[r][1].type==="lineEnding")&&t[r-1][1].type==="data"){const n=t[r-1][1],i=e.sliceStream(n);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&r===t.length&&(a=0),a){const c={type:r===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:n.start._bufferIndex+o,_index:n.start._index+s,line:n.end.line,column:n.end.column-a,offset:n.end.offset-a},end:{...n.end}};n.end={...c.start},n.start.offset===n.end.offset?Object.assign(n,c):(t.splice(r,0,["enter",c,e],["exit",c,e]),r+=2)}r++}return t}const aae={42:gi,43:gi,45:gi,48:gi,49:gi,50:gi,51:gi,52:gi,53:gi,54:gi,55:gi,56:gi,57:gi,62:jP},lae={91:foe},cae={[-2]:Gw,[-1]:Gw,32:Gw},hae={35:boe,42:C2,45:[bA,C2],60:koe,61:bA,95:C2,96:gA,126:gA},uae={38:GP,92:UP},fae={[-5]:Kw,[-4]:Kw,[-3]:Kw,33:zoe,38:GP,42:N3,60:[qse,Eoe],91:qoe,92:[goe,UP],93:B7,95:N3,96:toe},dae={null:[N3,nae]},pae={null:[42,95]},mae={null:[]},gae=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:pae,contentInitial:lae,disable:mae,document:aae,flow:hae,flowInitial:cae,insideSpan:dae,string:uae,text:fae},Symbol.toStringTag,{value:"Module"}));function yae(t,e,r){let n={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:_(S),check:_(w),consume:b,enter:x,exit:T,interrupt:_(w,{interrupt:!0})},c={code:null,containerState:{},defineSkip:m,events:[],now:p,parser:t,previous:null,sliceSerialize:f,sliceStream:d,write:u};let h=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function u(D){return o=ms(o,D),g(),o[o.length-1]!==null?[]:(I(e,0),c.events=$v(s,c.events,c),c.events)}function f(D,P){return xae(d(D),P)}function d(D){return bae(o,D)}function p(){const{_bufferIndex:D,_index:P,line:K,column:z,offset:$}=n;return{_bufferIndex:D,_index:P,line:K,column:z,offset:$}}function m(D){i[D.line]=D.column,L()}function g(){let D;for(;n._index<o.length;){const P=o[n._index];if(typeof P=="string")for(D=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===D&&n._bufferIndex<P.length;)y(P.charCodeAt(n._bufferIndex));else y(P)}}function y(D){h=h(D)}function b(D){Je(D)?(n.line++,n.column=1,n.offset+=D===-3?2:1,L()):D!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===o[n._index].length&&(n._bufferIndex=-1,n._index++)),c.previous=D}function x(D,P){const K=P||{};return K.type=D,K.start=p(),c.events.push(["enter",K,c]),a.push(K),K}function T(D){const P=a.pop();return P.end=p(),c.events.push(["exit",P,c]),P}function S(D,P){I(D,P.from)}function w(D,P){P.restore()}function _(D,P){return K;function K(z,$,H){let U,q,re,E;return Array.isArray(z)?Te(z):"tokenize"in z?Te([z]):de(z);function de(Le){return Xe;function Xe(dt){const Ct=dt!==null&&Le[dt],xt=dt!==null&&Le.null,jt=[...Array.isArray(Ct)?Ct:Ct?[Ct]:[],...Array.isArray(xt)?xt:xt?[xt]:[]];return Te(jt)(dt)}}function Te(Le){return U=Le,q=0,Le.length===0?H:O(Le[q])}function O(Le){return Xe;function Xe(dt){return E=N(),re=Le,Le.partial||(c.currentConstruct=Le),Le.name&&c.parser.constructs.disable.null.includes(Le.name)?He():Le.tokenize.call(P?Object.assign(Object.create(c),P):c,l,et,He)(dt)}}function et(Le){return D(re,E),$}function He(Le){return E.restore(),++q<U.length?O(U[q]):H}}}function I(D,P){D.resolveAll&&!s.includes(D)&&s.push(D),D.resolve&&Zi(c.events,P,c.events.length-P,D.resolve(c.events.slice(P),c)),D.resolveTo&&(c.events=D.resolveTo(c.events,c))}function N(){const D=p(),P=c.previous,K=c.currentConstruct,z=c.events.length,$=Array.from(a);return{from:z,restore:H};function H(){n=D,c.previous=P,c.currentConstruct=K,c.events.length=z,a=$,L()}}function L(){n.line in i&&n.column<2&&(n.column=i[n.line],n.offset+=i[n.line]-1)}}function bae(t,e){const r=e.start._index,n=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(r===i)o=[t[r].slice(n,s)];else{if(o=t.slice(r,i),n>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(n):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function xae(t,e){let r=-1;const n=[];let i;for(;++r<t.length;){const s=t[r];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,n.push(o)}return n.join("")}function vae(t){const n={constructs:VP([gae,...(t||{}).extensions||[]]),content:i(Rse),defined:[],document:i(Nse),flow:i(tae),lazy:{},string:i(iae),text:i(sae)};return n;function i(s){return o;function o(a){return yae(n,s,a)}}}function wae(t){for(;!KP(t););return t}const xA=/[\0\t\n\r]/g;function kae(){let t=1,e="",r=!0,n;return i;function i(s,o,a){const l=[];let c,h,u,f,d;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),u=0,e="",r&&(s.charCodeAt(0)===65279&&u++,r=void 0);u<s.length;){if(xA.lastIndex=u,c=xA.exec(s),f=c&&c.index!==void 0?c.index:s.length,d=s.charCodeAt(f),!c){e=s.slice(u);break}if(d===10&&u===f&&n)l.push(-3),n=void 0;else switch(n&&(l.push(-5),n=void 0),u<f&&(l.push(s.slice(u,f)),t+=f-u),d){case 0:{l.push(65533),t++;break}case 9:{for(h=Math.ceil(t/4)*4,l.push(-2);t++<h;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:n=!0,t=1}u=f+1}return a&&(n&&l.push(-5),e&&l.push(e),l.push(null)),l}}const Cae=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function eN(t){return t.replace(Cae,Sae)}function Sae(t,e,r){if(e)return e;if(r.charCodeAt(0)===35){const i=r.charCodeAt(1),s=i===120||i===88;return WP(r.slice(s?2:1),s?16:10)}return I7(r)||t}function Kp(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?vA(t.position):"start"in t||"end"in t?vA(t):"line"in t||"column"in t?F3(t):""}function F3(t){return wA(t&&t.line)+":"+wA(t&&t.column)}function vA(t){return F3(t&&t.start)+"-"+F3(t&&t.end)}function wA(t){return t&&typeof t=="number"?t:1}const tN={}.hasOwnProperty;function Tae(t,e,r){return typeof e!="string"&&(r=e,e=void 0),_ae(r)(wae(vae(r).document().write(kae()(t,e,!0))))}function _ae(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ye),autolinkProtocol:N,autolinkEmail:N,atxHeading:s(ue),blockQuote:s(xt),characterEscape:N,characterReference:N,codeFenced:s(jt),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(jt,o),codeText:s(R,o),codeTextData:N,data:N,codeFlowValue:N,definition:s(W),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(ee),hardBreakEscape:s(le),hardBreakTrailing:s(le),htmlFlow:s(ce,o),htmlFlowData:N,htmlText:s(ce,o),htmlTextData:N,image:s(Ce),label:o,link:s(ye),listItem:s(pe),listItemValue:f,listOrdered:s(be,u),listUnordered:s(be),paragraph:s(Ze),reference:O,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(ue),strong:s(Oe),thematicBreak:s(rt)},exit:{atxHeading:l(),atxHeadingSequence:S,autolink:l(),autolinkEmail:Ct,autolinkProtocol:dt,blockQuote:l(),characterEscapeValue:L,characterReferenceMarkerHexadecimal:He,characterReferenceMarkerNumeric:He,characterReferenceValue:Le,characterReference:Xe,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:d,codeFencedFenceMeta:p,codeFlowValue:L,codeIndented:l(y),codeText:l($),codeTextData:L,data:L,definition:l(),definitionDestinationString:T,definitionLabelString:b,definitionTitleString:x,emphasis:l(),hardBreakEscape:l(P),hardBreakTrailing:l(P),htmlFlow:l(K),htmlFlowData:L,htmlText:l(z),htmlTextData:L,image:l(U),label:re,labelText:q,lineEnding:D,link:l(H),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:et,resourceDestinationString:E,resourceTitleString:de,resource:Te,setextHeading:l(I),setextHeadingLineSequence:_,setextHeadingText:w,strong:l(),thematicBreak:l()}};rN(e,(t||{}).mdastExtensions||[]);const r={};return n;function n(J){let ae={type:"root",children:[]};const Me={stack:[ae],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:h,data:r},nt=[];let gt=-1;for(;++gt<J.length;)if(J[gt][1].type==="listOrdered"||J[gt][1].type==="listUnordered")if(J[gt][0]==="enter")nt.push(gt);else{const Qt=nt.pop();gt=i(J,Qt,gt)}for(gt=-1;++gt<J.length;){const Qt=e[J[gt][0]];tN.call(Qt,J[gt][1].type)&&Qt[J[gt][1].type].call(Object.assign({sliceSerialize:J[gt][2].sliceSerialize},Me),J[gt][1])}if(Me.tokenStack.length>0){const Qt=Me.tokenStack[Me.tokenStack.length-1];(Qt[1]||kA).call(Me,void 0,Qt[0])}for(ae.position={start:wl(J.length>0?J[0][1].start:{line:1,column:1,offset:0}),end:wl(J.length>0?J[J.length-2][1].end:{line:1,column:1,offset:0})},gt=-1;++gt<e.transforms.length;)ae=e.transforms[gt](ae)||ae;return ae}function i(J,ae,Me){let nt=ae-1,gt=-1,Qt=!1,wr,_r,Tn,Ht;for(;++nt<=Me;){const Pt=J[nt];switch(Pt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Pt[0]==="enter"?gt++:gt--,Ht=void 0;break}case"lineEndingBlank":{Pt[0]==="enter"&&(wr&&!Ht&&!gt&&!Tn&&(Tn=nt),Ht=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ht=void 0}if(!gt&&Pt[0]==="enter"&&Pt[1].type==="listItemPrefix"||gt===-1&&Pt[0]==="exit"&&(Pt[1].type==="listUnordered"||Pt[1].type==="listOrdered")){if(wr){let _n=nt;for(_r=void 0;_n--;){const Yr=J[_n];if(Yr[1].type==="lineEnding"||Yr[1].type==="lineEndingBlank"){if(Yr[0]==="exit")continue;_r&&(J[_r][1].type="lineEndingBlank",Qt=!0),Yr[1].type="lineEnding",_r=_n}else if(!(Yr[1].type==="linePrefix"||Yr[1].type==="blockQuotePrefix"||Yr[1].type==="blockQuotePrefixWhitespace"||Yr[1].type==="blockQuoteMarker"||Yr[1].type==="listItemIndent"))break}Tn&&(!_r||Tn<_r)&&(wr._spread=!0),wr.end=Object.assign({},_r?J[_r][1].start:Pt[1].end),J.splice(_r||nt,0,["exit",wr,Pt[2]]),nt++,Me++}if(Pt[1].type==="listItemPrefix"){const _n={type:"listItem",_spread:!1,start:Object.assign({},Pt[1].start),end:void 0};wr=_n,J.splice(nt,0,["enter",_n,Pt[2]]),nt++,Me++,Tn=void 0,Ht=!0}}}return J[ae][1]._spread=Qt,Me}function s(J,ae){return Me;function Me(nt){a.call(this,J(nt),nt),ae&&ae.call(this,nt)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(J,ae,Me){this.stack[this.stack.length-1].children.push(J),this.stack.push(J),this.tokenStack.push([ae,Me||void 0]),J.position={start:wl(ae.start),end:void 0}}function l(J){return ae;function ae(Me){J&&J.call(this,Me),c.call(this,Me)}}function c(J,ae){const Me=this.stack.pop(),nt=this.tokenStack.pop();if(nt)nt[0].type!==J.type&&(ae?ae.call(this,J,nt[0]):(nt[1]||kA).call(this,J,nt[0]));else throw new Error("Cannot close `"+J.type+"` ("+Kp({start:J.start,end:J.end})+"): its not open");Me.position.end=wl(J.end)}function h(){return D7(this.stack.pop())}function u(){this.data.expectingFirstListItemValue=!0}function f(J){if(this.data.expectingFirstListItemValue){const ae=this.stack[this.stack.length-2];ae.start=Number.parseInt(this.sliceSerialize(J),10),this.data.expectingFirstListItemValue=void 0}}function d(){const J=this.resume(),ae=this.stack[this.stack.length-1];ae.lang=J}function p(){const J=this.resume(),ae=this.stack[this.stack.length-1];ae.meta=J}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const J=this.resume(),ae=this.stack[this.stack.length-1];ae.value=J.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const J=this.resume(),ae=this.stack[this.stack.length-1];ae.value=J.replace(/(\r?\n|\r)$/g,"")}function b(J){const ae=this.resume(),Me=this.stack[this.stack.length-1];Me.label=ae,Me.identifier=Ys(this.sliceSerialize(J)).toLowerCase()}function x(){const J=this.resume(),ae=this.stack[this.stack.length-1];ae.title=J}function T(){const J=this.resume(),ae=this.stack[this.stack.length-1];ae.url=J}function S(J){const ae=this.stack[this.stack.length-1];if(!ae.depth){const Me=this.sliceSerialize(J).length;ae.depth=Me}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function _(J){const ae=this.stack[this.stack.length-1];ae.depth=this.sliceSerialize(J).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function N(J){const Me=this.stack[this.stack.length-1].children;let nt=Me[Me.length-1];(!nt||nt.type!=="text")&&(nt=Ye(),nt.position={start:wl(J.start),end:void 0},Me.push(nt)),this.stack.push(nt)}function L(J){const ae=this.stack.pop();ae.value+=this.sliceSerialize(J),ae.position.end=wl(J.end)}function D(J){const ae=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Me=ae.children[ae.children.length-1];Me.position.end=wl(J.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ae.type)&&(N.call(this,J),L.call(this,J))}function P(){this.data.atHardBreak=!0}function K(){const J=this.resume(),ae=this.stack[this.stack.length-1];ae.value=J}function z(){const J=this.resume(),ae=this.stack[this.stack.length-1];ae.value=J}function $(){const J=this.resume(),ae=this.stack[this.stack.length-1];ae.value=J}function H(){const J=this.stack[this.stack.length-1];if(this.data.inReference){const ae=this.data.referenceType||"shortcut";J.type+="Reference",J.referenceType=ae,delete J.url,delete J.title}else delete J.identifier,delete J.label;this.data.referenceType=void 0}function U(){const J=this.stack[this.stack.length-1];if(this.data.inReference){const ae=this.data.referenceType||"shortcut";J.type+="Reference",J.referenceType=ae,delete J.url,delete J.title}else delete J.identifier,delete J.label;this.data.referenceType=void 0}function q(J){const ae=this.sliceSerialize(J),Me=this.stack[this.stack.length-2];Me.label=eN(ae),Me.identifier=Ys(ae).toLowerCase()}function re(){const J=this.stack[this.stack.length-1],ae=this.resume(),Me=this.stack[this.stack.length-1];if(this.data.inReference=!0,Me.type==="link"){const nt=J.children;Me.children=nt}else Me.alt=ae}function E(){const J=this.resume(),ae=this.stack[this.stack.length-1];ae.url=J}function de(){const J=this.resume(),ae=this.stack[this.stack.length-1];ae.title=J}function Te(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function et(J){const ae=this.resume(),Me=this.stack[this.stack.length-1];Me.label=ae,Me.identifier=Ys(this.sliceSerialize(J)).toLowerCase(),this.data.referenceType="full"}function He(J){this.data.characterReferenceType=J.type}function Le(J){const ae=this.sliceSerialize(J),Me=this.data.characterReferenceType;let nt;Me?(nt=WP(ae,Me==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):nt=I7(ae);const gt=this.stack[this.stack.length-1];gt.value+=nt}function Xe(J){const ae=this.stack.pop();ae.position.end=wl(J.end)}function dt(J){L.call(this,J);const ae=this.stack[this.stack.length-1];ae.url=this.sliceSerialize(J)}function Ct(J){L.call(this,J);const ae=this.stack[this.stack.length-1];ae.url="mailto:"+this.sliceSerialize(J)}function xt(){return{type:"blockquote",children:[]}}function jt(){return{type:"code",lang:null,meta:null,value:""}}function R(){return{type:"inlineCode",value:""}}function W(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ee(){return{type:"emphasis",children:[]}}function ue(){return{type:"heading",depth:0,children:[]}}function le(){return{type:"break"}}function ce(){return{type:"html",value:""}}function Ce(){return{type:"image",title:null,url:"",alt:null}}function ye(){return{type:"link",title:null,url:"",children:[]}}function be(J){return{type:"list",ordered:J.type==="listOrdered",start:null,spread:J._spread,children:[]}}function pe(J){return{type:"listItem",spread:J._spread,checked:null,children:[]}}function Ze(){return{type:"paragraph",children:[]}}function Oe(){return{type:"strong",children:[]}}function Ye(){return{type:"text",value:""}}function rt(){return{type:"thematicBreak"}}}function wl(t){return{line:t.line,column:t.column,offset:t.offset}}function rN(t,e){let r=-1;for(;++r<e.length;){const n=e[r];Array.isArray(n)?rN(t,n):Mae(t,n)}}function Mae(t,e){let r;for(r in e)if(tN.call(e,r))switch(r){case"canContainEols":{const n=e[r];n&&t[r].push(...n);break}case"transforms":{const n=e[r];n&&t[r].push(...n);break}case"enter":case"exit":{const n=e[r];n&&Object.assign(t[r],n);break}}}function kA(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Kp({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Kp({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Kp({start:e.start,end:e.end})+") is still open")}function $3(t){const e=this;e.parser=r;function r(n){return Tae(n,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}const CA={}.hasOwnProperty;function Aae(t,e){const r=e||{};function n(i,...s){let o=n.invalid;const a=n.handlers;if(i&&CA.call(i,t)){const l=String(i[t]);o=CA.call(a,l)?a[l]:n.unknown}if(o)return o.call(this,i,...s)}return n.handlers=r.handlers||{},n.invalid=r.invalid,n.unknown=r.unknown,n}const Eae={}.hasOwnProperty;function nN(t,e){let r=-1,n;if(e.extensions)for(;++r<e.extensions.length;)nN(t,e.extensions[r]);for(n in e)if(Eae.call(e,n))switch(n){case"extensions":break;case"unsafe":{SA(t[n],e[n]);break}case"join":{SA(t[n],e[n]);break}case"handlers":{Lae(t[n],e[n]);break}default:t.options[n]=e[n]}return t}function SA(t,e){e&&t.push(...e)}function Lae(t,e){e&&Object.assign(t,e)}function Oae(t,e,r,n){const i=r.enter("blockquote"),s=r.createTracker(n);s.move("> "),s.shift(2);const o=r.indentLines(r.containerFlow(t,s.current()),Dae);return i(),o}function Dae(t,e,r){return">"+(r?"":" ")+t}function iN(t,e){return TA(t,e.inConstruct,!0)&&!TA(t,e.notInConstruct,!1)}function TA(t,e,r){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return r;let n=-1;for(;++n<e.length;)if(t.includes(e[n]))return!0;return!1}function _A(t,e,r,n){let i=-1;for(;++i<r.unsafe.length;)if(r.unsafe[i].character===`
`&&iN(r.stack,r.unsafe[i]))return/[ \t]/.test(n.before)?"":" ";return`\\
`}function sN(t,e){const r=String(t);let n=r.indexOf(e),i=n,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;n!==-1;)n===i?++s>o&&(o=s):s=1,i=n+e.length,n=r.indexOf(e,i);return o}function z3(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Iae(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function Bae(t,e,r,n){const i=Iae(r),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(z3(t,r)){const u=r.enter("codeIndented"),f=r.indentLines(s,Rae);return u(),f}const a=r.createTracker(n),l=i.repeat(Math.max(sN(s,i)+1,3)),c=r.enter("codeFenced");let h=a.move(l);if(t.lang){const u=r.enter(`codeFencedLang${o}`);h+=a.move(r.safe(t.lang,{before:h,after:" ",encode:["`"],...a.current()})),u()}if(t.lang&&t.meta){const u=r.enter(`codeFencedMeta${o}`);h+=a.move(" "),h+=a.move(r.safe(t.meta,{before:h,after:`
`,encode:["`"],...a.current()})),u()}return h+=a.move(`
`),s&&(h+=a.move(s+`
`)),h+=a.move(l),c(),h}function Rae(t,e,r){return(r?"":"    ")+t}function R7(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function Pae(t,e,r,n){const i=R7(r),s=i==='"'?"Quote":"Apostrophe",o=r.enter("definition");let a=r.enter("label");const l=r.createTracker(n);let c=l.move("[");return c+=l.move(r.safe(r.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=r.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(r.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=r.enter("destinationRaw"),c+=l.move(r.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=r.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(r.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),o(),c}function Nae(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function cc(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Yb(t,e,r){const n=md(t),i=md(e);return n===void 0?i===void 0?r==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:n===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}oN.peek=Fae;function oN(t,e,r,n){const i=Nae(r),s=r.enter("emphasis"),o=r.createTracker(n),a=o.move(i);let l=o.move(r.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),h=Yb(n.before.charCodeAt(n.before.length-1),c,i);h.inside&&(l=cc(c)+l.slice(1));const u=l.charCodeAt(l.length-1),f=Yb(n.after.charCodeAt(0),u,i);f.inside&&(l=l.slice(0,-1)+cc(u));const d=o.move(i);return s(),r.attentionEncodeSurroundingInfo={after:f.outside,before:h.outside},a+l+d}function Fae(t,e,r){return r.options.emphasis||"*"}const zv=function(t){if(t==null)return qae;if(typeof t=="function")return Hv(t);if(typeof t=="object")return Array.isArray(t)?$ae(t):zae(t);if(typeof t=="string")return Hae(t);throw new Error("Expected function, string, or object as test")};function $ae(t){const e=[];let r=-1;for(;++r<t.length;)e[r]=zv(t[r]);return Hv(n);function n(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function zae(t){const e=t;return Hv(r);function r(n){const i=n;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function Hae(t){return Hv(e);function e(r){return r&&r.type===t}}function Hv(t){return e;function e(r,n,i){return!!(Vae(r)&&t.call(this,r,typeof n=="number"?n:void 0,i||void 0))}}function qae(){return!0}function Vae(t){return t!==null&&typeof t=="object"&&"type"in t}const aN=[],Wae=!0,H3=!1,q3="skip";function P7(t,e,r,n){let i;typeof e=="function"&&typeof r!="function"?(n=r,r=e):i=e;const s=zv(i),o=n?-1:1;a(t,void 0,[])();function a(l,c,h){const u=l&&typeof l=="object"?l:{};if(typeof u.type=="string"){const d=typeof u.tagName=="string"?u.tagName:typeof u.name=="string"?u.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(d?"<"+d+">":""))+")"})}return f;function f(){let d=aN,p,m,g;if((!e||s(l,c,h[h.length-1]||void 0))&&(d=jae(r(l,h)),d[0]===H3))return d;if("children"in l&&l.children){const y=l;if(y.children&&d[0]!==q3)for(m=(n?y.children.length:-1)+o,g=h.concat(y);m>-1&&m<y.children.length;){const b=y.children[m];if(p=a(b,m,g)(),p[0]===H3)return p;m=typeof p[1]=="number"?p[1]:m+o}}return d}}}function jae(t){return Array.isArray(t)?t:typeof t=="number"?[Wae,t]:t==null?aN:[t]}function _c(t,e,r,n){let i,s,o;typeof e=="function"&&typeof r!="function"?(s=void 0,o=e,i=r):(s=e,o=r,i=n),P7(t,s,a,i);function a(l,c){const h=c[c.length-1],u=h?h.children.indexOf(l):void 0;return o(l,u,h)}}function lN(t,e){let r=!1;return _c(t,function(n){if("value"in n&&/\r?\n|\r/.test(n.value)||n.type==="break")return r=!0,H3}),!!((!t.depth||t.depth<3)&&D7(t)&&(e.options.setext||r))}function Uae(t,e,r,n){const i=Math.max(Math.min(6,t.depth||1),1),s=r.createTracker(n);if(lN(t,r)){const h=r.enter("headingSetext"),u=r.enter("phrasing"),f=r.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return u(),h(),f+`
`+(i===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=r.enter("headingAtx"),l=r.enter("phrasing");s.move(o+" ");let c=r.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=cc(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,r.options.closeAtx&&(c+=" "+o),l(),a(),c}cN.peek=Gae;function cN(t){return t.value||""}function Gae(){return"<"}hN.peek=Kae;function hN(t,e,r,n){const i=R7(r),s=i==='"'?"Quote":"Apostrophe",o=r.enter("image");let a=r.enter("label");const l=r.createTracker(n);let c=l.move("![");return c+=l.move(r.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=r.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(r.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=r.enter("destinationRaw"),c+=l.move(r.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=r.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(r.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),o(),c}function Kae(){return"!"}uN.peek=Yae;function uN(t,e,r,n){const i=t.referenceType,s=r.enter("imageReference");let o=r.enter("label");const a=r.createTracker(n);let l=a.move("![");const c=r.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const h=r.stack;r.stack=[],o=r.enter("reference");const u=r.safe(r.associationId(t),{before:l,after:"]",...a.current()});return o(),r.stack=h,s(),i==="full"||!c||c!==u?l+=a.move(u+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function Yae(){return"!"}fN.peek=Xae;function fN(t,e,r){let n=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(n);)i+="`";for(/[^ \r\n]/.test(n)&&(/^[ \r\n]/.test(n)&&/[ \r\n]$/.test(n)||/^`|`$/.test(n))&&(n=" "+n+" ");++s<r.unsafe.length;){const o=r.unsafe[s],a=r.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(n);){let c=l.index;n.charCodeAt(c)===10&&n.charCodeAt(c-1)===13&&c--,n=n.slice(0,c)+" "+n.slice(l.index+1)}}return i+n+i}function Xae(){return"`"}function dN(t,e){const r=D7(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(r===t.url||"mailto:"+r===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}pN.peek=Jae;function pN(t,e,r,n){const i=R7(r),s=i==='"'?"Quote":"Apostrophe",o=r.createTracker(n);let a,l;if(dN(t,r)){const h=r.stack;r.stack=[],a=r.enter("autolink");let u=o.move("<");return u+=o.move(r.containerPhrasing(t,{before:u,after:">",...o.current()})),u+=o.move(">"),a(),r.stack=h,u}a=r.enter("link"),l=r.enter("label");let c=o.move("[");return c+=o.move(r.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=r.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(r.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=r.enter("destinationRaw"),c+=o.move(r.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=r.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(r.safe(t.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),a(),c}function Jae(t,e,r){return dN(t,r)?"<":"["}mN.peek=Zae;function mN(t,e,r,n){const i=t.referenceType,s=r.enter("linkReference");let o=r.enter("label");const a=r.createTracker(n);let l=a.move("[");const c=r.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const h=r.stack;r.stack=[],o=r.enter("reference");const u=r.safe(r.associationId(t),{before:l,after:"]",...a.current()});return o(),r.stack=h,s(),i==="full"||!c||c!==u?l+=a.move(u+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function Zae(){return"["}function N7(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function Qae(t){const e=N7(t),r=t.options.bulletOther;if(!r)return e==="*"?"-":"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+r+"`) to be different");return r}function ele(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function gN(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function tle(t,e,r,n){const i=r.enter("list"),s=r.bulletCurrent;let o=t.ordered?ele(r):N7(r);const a=t.ordered?o==="."?")":".":Qae(r);let l=e&&r.bulletLastUsed?o===r.bulletLastUsed:!1;if(!t.ordered){const h=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&h&&(!h.children||!h.children[0])&&r.stack[r.stack.length-1]==="list"&&r.stack[r.stack.length-2]==="listItem"&&r.stack[r.stack.length-3]==="list"&&r.stack[r.stack.length-4]==="listItem"&&r.indexStack[r.indexStack.length-1]===0&&r.indexStack[r.indexStack.length-2]===0&&r.indexStack[r.indexStack.length-3]===0&&(l=!0),gN(r)===o&&h){let u=-1;for(;++u<t.children.length;){const f=t.children[u];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),r.bulletCurrent=o;const c=r.containerFlow(t,n);return r.bulletLastUsed=o,r.bulletCurrent=s,i(),c}function rle(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function nle(t,e,r,n){const i=rle(r);let s=r.bulletCurrent||N7(r);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(r.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=r.createTracker(n);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=r.enter("listItem"),c=r.indentLines(r.containerFlow(t,a.current()),h);return l(),c;function h(u,f,d){return f?(d?"":" ".repeat(o))+u:(d?s:s+" ".repeat(o-s.length))+u}}function ile(t,e,r,n){const i=r.enter("paragraph"),s=r.enter("phrasing"),o=r.containerPhrasing(t,n);return s(),i(),o}const sle=zv(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function ole(t,e,r,n){return(t.children.some(function(o){return sle(o)})?r.containerPhrasing:r.containerFlow).call(r,t,n)}function ale(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}yN.peek=lle;function yN(t,e,r,n){const i=ale(r),s=r.enter("strong"),o=r.createTracker(n),a=o.move(i+i);let l=o.move(r.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),h=Yb(n.before.charCodeAt(n.before.length-1),c,i);h.inside&&(l=cc(c)+l.slice(1));const u=l.charCodeAt(l.length-1),f=Yb(n.after.charCodeAt(0),u,i);f.inside&&(l=l.slice(0,-1)+cc(u));const d=o.move(i+i);return s(),r.attentionEncodeSurroundingInfo={after:f.outside,before:h.outside},a+l+d}function lle(t,e,r){return r.options.strong||"*"}function cle(t,e,r,n){return r.safe(t.value,n)}function hle(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function ule(t,e,r){const n=(gN(r)+(r.options.ruleSpaces?" ":"")).repeat(hle(r));return r.options.ruleSpaces?n.slice(0,-1):n}const F7={blockquote:Oae,break:_A,code:Bae,definition:Pae,emphasis:oN,hardBreak:_A,heading:Uae,html:cN,image:hN,imageReference:uN,inlineCode:fN,link:pN,linkReference:mN,list:tle,listItem:nle,paragraph:ile,root:ole,strong:yN,text:cle,thematicBreak:ule},fle=[dle];function dle(t,e,r,n){if(e.type==="code"&&z3(e,n)&&(t.type==="list"||t.type===e.type&&z3(t,n)))return!1;if("spread"in r&&typeof r.spread=="boolean")return t.type==="paragraph"&&(t.type===e.type||e.type==="definition"||e.type==="heading"&&lN(e,n))?void 0:r.spread?1:0}const Fc=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],ple=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:Fc},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:Fc},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:Fc},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:Fc},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:Fc},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:Fc},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:Fc},{atBreak:!0,character:"~"}];function mle(t){return t.label||!t.identifier?t.label||"":eN(t.identifier)}function gle(t){if(!t._compiled){const e=(t.atBreak?"[\\r\\n][\\t ]*":"")+(t.before?"(?:"+t.before+")":"");t._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(t.character)?"\\":"")+t.character+(t.after?"(?:"+t.after+")":""),"g")}return t._compiled}function yle(t,e,r){const n=e.indexStack,i=t.children||[],s=[];let o=-1,a=r.before,l;n.push(-1);let c=e.createTracker(r);for(;++o<i.length;){const h=i[o];let u;if(n[n.length-1]=o,o+1<i.length){let p=e.handle.handlers[i[o+1].type];p&&p.peek&&(p=p.peek),u=p?p(i[o+1],t,e,{before:"",after:"",...c.current()}).charAt(0):""}else u=r.after;s.length>0&&(a==="\r"||a===`
`)&&h.type==="html"&&(s[s.length-1]=s[s.length-1].replace(/(\r?\n|\r)$/," "),a=" ",c=e.createTracker(r),c.move(s.join("")));let f=e.handle(h,t,e,{...c.current(),after:u,before:a});l&&l===f.slice(0,1)&&(f=cc(l.charCodeAt(0))+f.slice(1));const d=e.attentionEncodeSurroundingInfo;e.attentionEncodeSurroundingInfo=void 0,l=void 0,d&&(s.length>0&&d.before&&a===s[s.length-1].slice(-1)&&(s[s.length-1]=s[s.length-1].slice(0,-1)+cc(a.charCodeAt(0))),d.after&&(l=u)),c.move(f),s.push(f),a=f.slice(-1)}return n.pop(),s.join("")}function ble(t,e,r){const n=e.indexStack,i=t.children||[],s=e.createTracker(r),o=[];let a=-1;for(n.push(-1);++a<i.length;){const l=i[a];n[n.length-1]=a,o.push(s.move(e.handle(l,t,e,{before:`
`,after:`
`,...s.current()}))),l.type!=="list"&&(e.bulletLastUsed=void 0),a<i.length-1&&o.push(s.move(xle(l,i[a+1],t,e)))}return n.pop(),o.join("")}function xle(t,e,r,n){let i=n.join.length;for(;i--;){const s=n.join[i](t,e,r,n);if(s===!0||s===1)break;if(typeof s=="number")return`
`.repeat(1+s);if(s===!1)return`

<!---->

`}return`

`}const vle=/\r?\n|\r/g;function wle(t,e){const r=[];let n=0,i=0,s;for(;s=vle.exec(t);)o(t.slice(n,s.index)),r.push(s[0]),n=s.index+s[0].length,i++;return o(t.slice(n)),r.join("");function o(a){r.push(e(a,i,!a))}}function kle(t,e,r){const n=(r.before||"")+(e||"")+(r.after||""),i=[],s=[],o={};let a=-1;for(;++a<t.unsafe.length;){const h=t.unsafe[a];if(!iN(t.stack,h))continue;const u=t.compilePattern(h);let f;for(;f=u.exec(n);){const d="before"in h||!!h.atBreak,p="after"in h,m=f.index+(d?f[1].length:0);i.includes(m)?(o[m].before&&!d&&(o[m].before=!1),o[m].after&&!p&&(o[m].after=!1)):(i.push(m),o[m]={before:d,after:p})}}i.sort(Cle);let l=r.before?r.before.length:0;const c=n.length-(r.after?r.after.length:0);for(a=-1;++a<i.length;){const h=i[a];h<l||h>=c||h+1<c&&i[a+1]===h+1&&o[h].after&&!o[h+1].before&&!o[h+1].after||i[a-1]===h-1&&o[h].before&&!o[h-1].before&&!o[h-1].after||(l!==h&&s.push(MA(n.slice(l,h),"\\")),l=h,/[!-/:-@[-`{-~]/.test(n.charAt(h))&&(!r.encode||!r.encode.includes(n.charAt(h)))?s.push("\\"):(s.push(cc(n.charCodeAt(h))),l++))}return s.push(MA(n.slice(l,c),r.after)),s.join("")}function Cle(t,e){return t-e}function MA(t,e){const r=/\\(?=[!-/:-@[-`{-~])/g,n=[],i=[],s=t+e;let o=-1,a=0,l;for(;l=r.exec(s);)n.push(l.index);for(;++o<n.length;)a!==n[o]&&i.push(t.slice(a,n[o])),i.push("\\"),a=n[o];return i.push(t.slice(a)),i.join("")}function Sle(t){const e=t||{},r=e.now||{};let n=e.lineShift||0,i=r.line||1,s=r.column||1;return{move:l,current:o,shift:a};function o(){return{now:{line:i,column:s},lineShift:n}}function a(c){n+=c}function l(c){const h=c||"",u=h.split(/\r?\n|\r/g),f=u[u.length-1];return i+=u.length-1,s=u.length===1?s+f.length:1+f.length+n,h}}function Tle(t,e){const r=e||{},n={associationId:mle,containerPhrasing:Ele,containerFlow:Lle,createTracker:Sle,compilePattern:gle,enter:s,handlers:{...F7},handle:void 0,indentLines:wle,indexStack:[],join:[...fle],options:{},safe:Ole,stack:[],unsafe:[...ple]};nN(n,r),n.options.tightDefinitions&&n.join.push(Ale),n.handle=Aae("type",{invalid:_le,unknown:Mle,handlers:n.handlers});let i=n.handle(t,void 0,n,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return i&&i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i;function s(o){return n.stack.push(o),a;function a(){n.stack.pop()}}}function _le(t){throw new Error("Cannot handle value `"+t+"`, expected node")}function Mle(t){const e=t;throw new Error("Cannot handle unknown node `"+e.type+"`")}function Ale(t,e){if(t.type==="definition"&&t.type===e.type)return 0}function Ele(t,e){return yle(t,this,e)}function Lle(t,e){return ble(t,this,e)}function Ole(t,e){return kle(this,t,e)}function V3(t){const e=this;e.compiler=r;function r(n){return Tle(n,{...e.data("settings"),...t,extensions:e.data("toMarkdownExtensions")||[]})}}function AA(t){if(t)throw t}var Dle=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var S2=Object.prototype.hasOwnProperty,xN=Object.prototype.toString,EA=Object.defineProperty,LA=Object.getOwnPropertyDescriptor,OA=function(e){return typeof Array.isArray=="function"?Array.isArray(e):xN.call(e)==="[object Array]"},DA=function(e){if(!e||xN.call(e)!=="[object Object]")return!1;var r=S2.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&S2.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!n)return!1;var i;for(i in e);return typeof i>"u"||S2.call(e,i)},IA=function(e,r){EA&&r.name==="__proto__"?EA(e,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):e[r.name]=r.newValue},BA=function(e,r){if(r==="__proto__")if(S2.call(e,r)){if(LA)return LA(e,r).value}else return;return e[r]},Ile=function t(){var e,r,n,i,s,o,a=arguments[0],l=1,c=arguments.length,h=!1;for(typeof a=="boolean"&&(h=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(r in e)n=BA(a,r),i=BA(e,r),a!==i&&(h&&i&&(DA(i)||(s=OA(i)))?(s?(s=!1,o=n&&OA(n)?n:[]):o=n&&DA(n)?n:{},IA(a,{name:r,newValue:t(h,o,i)})):typeof i<"u"&&IA(a,{name:r,newValue:i}));return a};const Yw=bN(Ile);function W3(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Ble(){const t=[],e={run:r,use:n};return e;function r(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const h=t[++s];let u=-1;if(l){o(l);return}for(;++u<i.length;)(c[u]===null||c[u]===void 0)&&(c[u]=i[u]);i=c,h?Rle(h,a)(...c):o(null,...c)}}function n(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function Rle(t,e){let r;return n;function n(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(c){const h=c;if(a&&r)throw h;return i(h)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){r||(r=!0,e(o,...a))}function s(o){i(null,o)}}class Ri extends Error{constructor(e,r,n){super(),typeof r=="string"&&(n=r,r=void 0);let i="",s={},o=!1;if(r&&("line"in r&&"column"in r?s={place:r}:"start"in r&&"end"in r?s={place:r}:"type"in r?s={ancestors:[r],place:r.position}:s={...r}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof n=="string"){const l=n.indexOf(":");l===-1?s.ruleId=n:(s.source=n.slice(0,l),s.ruleId=n.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=Kp(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ri.prototype.file="";Ri.prototype.name="";Ri.prototype.reason="";Ri.prototype.message="";Ri.prototype.stack="";Ri.prototype.column=void 0;Ri.prototype.line=void 0;Ri.prototype.ancestors=void 0;Ri.prototype.cause=void 0;Ri.prototype.fatal=void 0;Ri.prototype.place=void 0;Ri.prototype.ruleId=void 0;Ri.prototype.source=void 0;const Eo={basename:Ple,dirname:Nle,extname:Fle,join:$le,sep:"/"};function Ple(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');l1(t);let r=0,n=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){r=i+1;break}}else n<0&&(s=!0,n=i+1);return n<0?"":t.slice(r,n)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){r=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(n=i):(a=-1,n=o));return r===n?n=o:n<0&&(n=t.length),t.slice(r,n)}function Nle(t){if(l1(t),t.length===0)return".";let e=-1,r=t.length,n;for(;--r;)if(t.codePointAt(r)===47){if(n){e=r;break}}else n||(n=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function Fle(t){l1(t);let e=t.length,r=-1,n=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){n=e+1;break}continue}r<0&&(o=!0,r=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||r<0||s===0||s===1&&i===r-1&&i===n+1?"":t.slice(i,r)}function $le(...t){let e=-1,r;for(;++e<t.length;)l1(t[e]),t[e]&&(r=r===void 0?t[e]:r+"/"+t[e]);return r===void 0?".":zle(r)}function zle(t){l1(t);const e=t.codePointAt(0)===47;let r=Hle(t,!e);return r.length===0&&!e&&(r="."),r.length>0&&t.codePointAt(t.length-1)===47&&(r+="/"),e?"/"+r:r}function Hle(t,e){let r="",n=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(r.length<2||n!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(l=r.lastIndexOf("/"),l!==r.length-1){l<0?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),i=o,s=0;continue}}else if(r.length>0){r="",n=0,i=o,s=0;continue}}e&&(r=r.length>0?r+"/..":"..",n=2)}else r.length>0?r+="/"+t.slice(i+1,o):r=t.slice(i+1,o),n=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return r}function l1(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const qle={cwd:Vle};function Vle(){return"/"}function j3(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Wle(t){if(typeof t=="string")t=new URL(t);else if(!j3(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return jle(t)}function jle(t){if(t.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const e=t.pathname;let r=-1;for(;++r<e.length;)if(e.codePointAt(r)===37&&e.codePointAt(r+1)===50){const n=e.codePointAt(r+2);if(n===70||n===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const Xw=["history","path","basename","stem","extname","dirname"];class Ule{constructor(e){let r;e?j3(e)?r={path:e}:typeof e=="string"||Gle(e)?r={value:e}:r=e:r={},this.cwd="cwd"in r?"":qle.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<Xw.length;){const s=Xw[n];s in r&&r[s]!==void 0&&r[s]!==null&&(this[s]=s==="history"?[...r[s]]:r[s])}let i;for(i in r)Xw.includes(i)||(this[i]=r[i])}get basename(){return typeof this.path=="string"?Eo.basename(this.path):void 0}set basename(e){Zw(e,"basename"),Jw(e,"basename"),this.path=Eo.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Eo.dirname(this.path):void 0}set dirname(e){RA(this.basename,"dirname"),this.path=Eo.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Eo.extname(this.path):void 0}set extname(e){if(Jw(e,"extname"),RA(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Eo.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){j3(e)&&(e=Wle(e)),Zw(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Eo.basename(this.path,this.extname):void 0}set stem(e){Zw(e,"stem"),Jw(e,"stem"),this.path=Eo.join(this.dirname||"",e+(this.extname||""))}fail(e,r,n){const i=this.message(e,r,n);throw i.fatal=!0,i}info(e,r,n){const i=this.message(e,r,n);return i.fatal=void 0,i}message(e,r,n){const i=new Ri(e,r,n);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Jw(t,e){if(t&&t.includes(Eo.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Eo.sep+"`")}function Zw(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function RA(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Gle(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Kle=function(t){const n=this.constructor.prototype,i=n[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,n),s},Yle={}.hasOwnProperty;class $7 extends Kle{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ble()}copy(){const e=new $7;let r=-1;for(;++r<this.attachers.length;){const n=this.attachers[r];e.use(...n)}return e.data(Yw(!0,{},this.namespace)),e}data(e,r){return typeof e=="string"?arguments.length===2?(t5("data",this.frozen),this.namespace[e]=r,this):Yle.call(this.namespace,e)&&this.namespace[e]||void 0:e?(t5("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const i=r.call(e,...n);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const r=Cy(e),n=this.parser||this.Parser;return Qw("parse",n),n(String(r),r)}process(e,r){const n=this;return this.freeze(),Qw("process",this.parser||this.Parser),e5("process",this.compiler||this.Compiler),r?i(void 0,r):new Promise(i);function i(s,o){const a=Cy(e),l=n.parse(a);n.run(l,a,function(h,u,f){if(h||!u||!f)return c(h);const d=u,p=n.stringify(d,f);Jle(p)?f.value=p:f.result=p,c(h,f)});function c(h,u){h||!u?o(h):s?s(u):r(void 0,u)}}}processSync(e){let r=!1,n;return this.freeze(),Qw("processSync",this.parser||this.Parser),e5("processSync",this.compiler||this.Compiler),this.process(e,i),NA("processSync","process",r),n;function i(s,o){r=!0,AA(s),n=o}}run(e,r,n){PA(e),this.freeze();const i=this.transformers;return!n&&typeof r=="function"&&(n=r,r=void 0),n?s(void 0,n):new Promise(s);function s(o,a){const l=Cy(r);i.run(e,l,c);function c(h,u,f){const d=u||e;h?a(h):o?o(d):n(void 0,d,f)}}}runSync(e,r){let n=!1,i;return this.run(e,r,s),NA("runSync","run",n),i;function s(o,a){AA(o),i=a,n=!0}}stringify(e,r){this.freeze();const n=Cy(r),i=this.compiler||this.Compiler;return e5("stringify",i),PA(e),i(e,n)}use(e,...r){const n=this.attachers,i=this.namespace;if(t5("use",this.frozen),e!=null)if(typeof e=="function")l(e,r);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[h,...u]=c;l(h,u)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=Yw(!0,i.settings,c.settings))}function a(c){let h=-1;if(c!=null)if(Array.isArray(c))for(;++h<c.length;){const u=c[h];s(u)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,h){let u=-1,f=-1;for(;++u<n.length;)if(n[u][0]===c){f=u;break}if(f===-1)n.push([c,...h]);else if(h.length>0){let[d,...p]=h;const m=n[f][1];W3(m)&&W3(d)&&(d=Yw(!0,m,d)),n[f]=[c,d,...p]}}}}const U3=new $7().freeze();function Qw(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function e5(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function t5(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function PA(t){if(!W3(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function NA(t,e,r){if(!r)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Cy(t){return Xle(t)?t:new Ule(t)}function Xle(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function Jle(t){return typeof t=="string"||Zle(t)}function Zle(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}var vN=t=>{throw TypeError(t)},wN=(t,e,r)=>e.has(t)||vN("Cannot "+r),Et=(t,e,r)=>(wN(t,e,"read from private field"),r?r.call(t):e.get(t)),Hr=(t,e,r)=>e.has(t)?vN("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),gr=(t,e,r,n)=>(wN(t,e,"write to private field"),e.set(t,r),r),To,J0,T2,_2,M2,Z0,Q0,xa,ep,A2,E2,tp,L2,rp,O2,D2,Vu,Jc,I2,np;class kN{}class CN{constructor(){this.elements=[],this.size=()=>this.elements.length,this.top=()=>this.elements.at(-1),this.push=e=>{var r;(r=this.top())==null||r.push(e)},this.open=e=>{this.elements.push(e)},this.close=()=>{const e=this.elements.pop();if(!e)throw DP();return e}}}class z7 extends kN{constructor(e,r,n){super(),this.type=e,this.content=r,this.attrs=n}push(e,...r){this.content.push(e,...r)}pop(){return this.content.pop()}static create(e,r,n){return new z7(e,r,n)}}const G3=class extends CN{constructor(e){super(),Hr(this,To),Hr(this,J0),Hr(this,T2),Hr(this,_2),Hr(this,M2),Hr(this,Z0),Hr(this,Q0),gr(this,To,Mt.none),gr(this,J0,r=>r.isText),gr(this,T2,(r,n)=>{if(Et(this,J0).call(this,r)&&Et(this,J0).call(this,n)&&Mt.sameSet(r.marks,n.marks))return this.schema.text(r.text+n.text,r.marks)}),gr(this,_2,r=>{const n=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.parseMarkdown.match(r));if(!n)throw Kie(r);return n}),gr(this,M2,r=>{const n=Et(this,_2).call(this,r);n.spec.parseMarkdown.runner(this,r,n)}),this.injectRoot=(r,n,i)=>(this.openNode(n,i),this.next(r.children),this),this.openNode=(r,n)=>(this.open(z7.create(r,[],n)),this),gr(this,Z0,()=>{gr(this,To,Mt.none);const r=this.close();return Et(this,Q0).call(this,r.type,r.attrs,r.content)}),this.closeNode=()=>{try{Et(this,Z0).call(this)}catch(r){console.error(r)}return this},gr(this,Q0,(r,n,i)=>{const s=r.createAndFill(n,i,Et(this,To));if(!s)throw Gie(r,n,i);return this.push(s),s}),this.addNode=(r,n,i)=>{try{Et(this,Q0).call(this,r,n,i)}catch(s){console.error(s)}return this},this.openMark=(r,n)=>{const i=r.create(n);return gr(this,To,i.addToSet(Et(this,To))),this},this.closeMark=r=>(gr(this,To,r.removeFromSet(Et(this,To))),this),this.addText=r=>{try{const n=this.top();if(!n)throw DP();const i=n.pop(),s=this.schema.text(r,Et(this,To));if(!i)return n.push(s),this;const o=Et(this,T2).call(this,i,s);return o?(n.push(o),this):(n.push(i,s),this)}catch(n){return console.error(n),this}},this.build=()=>{let r;do r=Et(this,Z0).call(this);while(this.size());return r},this.next=(r=[])=>([r].flat().forEach(n=>Et(this,M2).call(this,n)),this),this.toDoc=()=>this.build(),this.run=(r,n)=>{const i=r.runSync(r.parse(n),n);return this.next(i),this},this.schema=e}};To=new WeakMap;J0=new WeakMap;T2=new WeakMap;_2=new WeakMap;M2=new WeakMap;Z0=new WeakMap;Q0=new WeakMap;G3.create=(t,e)=>{const r=new G3(t);return n=>(r.run(e,n),r.toDoc())};let Qle=G3;const K3=class extends kN{constructor(e,r,n,i={}){super(),this.type=e,this.children=r,this.value=n,this.props=i,this.push=(s,...o)=>{this.children||(this.children=[]),this.children.push(s,...o)},this.pop=()=>{var s;return(s=this.children)==null?void 0:s.pop()}}};K3.create=(t,e,r,n={})=>new K3(t,e,r,n);let FA=K3;const ece=t=>Object.prototype.hasOwnProperty.call(t,"size"),Y3=class extends CN{constructor(e){super(),Hr(this,xa),Hr(this,ep),Hr(this,A2),Hr(this,E2),Hr(this,tp),Hr(this,L2),Hr(this,rp),Hr(this,O2),Hr(this,D2),Hr(this,Vu),Hr(this,Jc),Hr(this,I2),Hr(this,np),gr(this,xa,Mt.none),gr(this,ep,r=>{const n=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.toMarkdown.match(r));if(!n)throw Yie(r.type);return n}),gr(this,A2,r=>Et(this,ep).call(this,r).spec.toMarkdown.runner(this,r)),gr(this,E2,(r,n)=>Et(this,ep).call(this,r).spec.toMarkdown.runner(this,r,n)),gr(this,tp,r=>{const{marks:n}=r,i=a=>a.type.spec.priority??50;[...n].sort((a,l)=>i(a)-i(l)).every(a=>!Et(this,E2).call(this,a,r))&&Et(this,A2).call(this,r),n.forEach(a=>Et(this,np).call(this,a))}),gr(this,L2,(r,n)=>{var l;if(r.type===n||((l=r.children)==null?void 0:l.length)!==1)return r;const i=c=>{var u;if(c.type===n)return c;if(((u=c.children)==null?void 0:u.length)!==1)return null;const[h]=c.children;return h?i(h):null},s=i(r);if(!s)return r;const o=s.children?[...s.children]:void 0,a={...r,children:o};return a.children=o,s.children=[a],s}),gr(this,rp,r=>{const{children:n}=r;return n&&(r.children=n.reduce((i,s,o)=>{if(o===0)return[s];const a=i.at(-1);if(a&&a.isMark&&s.isMark){s=Et(this,L2).call(this,s,a.type);const{children:l,...c}=s,{children:h,...u}=a;if(s.type===a.type&&l&&h&&JSON.stringify(c)===JSON.stringify(u)){const f={...u,children:[...h,...l]};return i.slice(0,-1).concat(Et(this,rp).call(this,f))}}return i.concat(s)},[])),r}),gr(this,O2,r=>{const n={...r.props,type:r.type};return r.children&&(n.children=r.children),r.value&&(n.value=r.value),n}),this.openNode=(r,n,i)=>(this.open(FA.create(r,void 0,n,i)),this),gr(this,D2,(r,n)=>{let i="",s="";const o=r.children;let a=-1,l=-1;const c=u=>{u&&u.forEach((f,d)=>{f.type==="text"&&f.value&&(a<0&&(a=d),l=d)})};if(o){c(o);const u=o==null?void 0:o[l],f=o==null?void 0:o[a];if(u&&u.value.endsWith(" ")){const d=u.value,p=d.trimEnd();s=d.slice(p.length),u.value=p}if(f&&f.value.startsWith(" ")){const d=f.value,p=d.trimStart();i=d.slice(0,d.length-p.length),f.value=p}}i.length&&Et(this,Jc).call(this,"text",void 0,i);const h=n();return s.length&&Et(this,Jc).call(this,"text",void 0,s),h}),gr(this,Vu,(r=!1)=>{const n=this.close(),i=()=>Et(this,Jc).call(this,n.type,n.children,n.value,n.props);return r?Et(this,D2).call(this,n,i):i()}),this.closeNode=()=>(Et(this,Vu).call(this),this),gr(this,Jc,(r,n,i,s)=>{const o=FA.create(r,n,i,s),a=Et(this,rp).call(this,Et(this,O2).call(this,o));return this.push(a),a}),this.addNode=(r,n,i,s)=>(Et(this,Jc).call(this,r,n,i,s),this),gr(this,I2,(r,n,i,s)=>r.isInSet(Et(this,xa))?this:(gr(this,xa,r.addToSet(Et(this,xa))),this.openNode(n,i,{...s,isMark:!0}))),gr(this,np,r=>{r.isInSet(Et(this,xa))&&(gr(this,xa,r.type.removeFromSet(Et(this,xa))),Et(this,Vu).call(this,!0))}),this.withMark=(r,n,i,s)=>(Et(this,I2).call(this,r,n,i,s),this),this.closeMark=r=>(Et(this,np).call(this,r),this),this.build=()=>{let r=null;do r=Et(this,Vu).call(this);while(this.size());return r},this.next=r=>ece(r)?(r.forEach(n=>{Et(this,tp).call(this,n)}),this):(Et(this,tp).call(this,r),this),this.toString=r=>r.stringify(this.build()),this.run=r=>(this.next(r),this),this.schema=e}};xa=new WeakMap;ep=new WeakMap;A2=new WeakMap;E2=new WeakMap;tp=new WeakMap;L2=new WeakMap;rp=new WeakMap;O2=new WeakMap;D2=new WeakMap;Vu=new WeakMap;Jc=new WeakMap;I2=new WeakMap;np=new WeakMap;Y3.create=(t,e)=>{const r=new Y3(t);return n=>(r.run(n),r.toString(e))};let tce=Y3;const H7=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function SN(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const TN=(t,e,r)=>{let n=SN(t,r);if(!n)return!1;let i=q7(n);if(!i){let o=n.blockRange(),a=o&&Lv(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(EN(t,i,e,-1))return!0;if(n.parent.content.size==0&&(gd(s,"end")||it.isSelectable(s)))for(let o=n.depth;;o--){let a=Dv(t.doc,n.before(o),n.after(o),Be.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(gd(s,"end")?wt.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):it.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},rce=(t,e,r)=>{let n=SN(t,r);if(!n)return!1;let i=q7(n);return i?nce(t,i,e):!1};function nce(t,e,r){let n=e.nodeBefore,i=n,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let h=i.lastChild;if(!h)return!1;i=h}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let h=a.firstChild;if(!h)return!1;a=h}let c=Dv(t.doc,s,l,Be.empty);if(!c||c.from!=s||c instanceof sn&&c.slice.size>=l-s)return!1;if(r){let h=t.tr.step(c);h.setSelection(Ge.create(h.doc,s)),r(h.scrollIntoView())}return!0}function gd(t,e,r=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const _N=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):n.parentOffset>0)return!1;s=q7(n)}let o=s&&s.nodeBefore;return!o||!it.isSelectable(o)?!1:(e&&e(t.tr.setSelection(it.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function q7(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function ice(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const sce=(t,e,r)=>{let n=ice(t,r);if(!n)return!1;let i=MN(n);if(!i)return!1;let s=i.nodeAfter;if(EN(t,i,e,1))return!0;if(n.parent.content.size==0&&(gd(s,"start")||it.isSelectable(s))){let o=Dv(t.doc,n.before(),n.after(),Be.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(gd(s,"start")?wt.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):it.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},oce=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;s=MN(n)}let o=s&&s.nodeAfter;return!o||!it.isSelectable(o)?!1:(e&&e(t.tr.setSelection(it.create(t.doc,s.pos)).scrollIntoView()),!0)};function MN(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let r=t.node(e);if(t.index(e)+1<r.childCount)return t.doc.resolve(t.after(e+1));if(r.type.spec.isolating)break}return null}const ace=(t,e)=>{let{$head:r,$anchor:n}=t.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function V7(t){for(let e=0;e<t.edgeCount;e++){let{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const AN=(t,e)=>{let{$head:r,$anchor:n}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),s=r.indexAfter(-1),o=V7(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=r.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(wt.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},lce=(t,e)=>{let r=t.selection,{$from:n,$to:i}=r;if(r instanceof Oi||n.parent.inlineContent||i.parent.inlineContent)return!1;let s=V7(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Ge.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},cce=(t,e)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let s=r.before();if(Up(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let n=r.blockRange(),i=n&&Lv(n);return i==null?!1:(e&&e(t.tr.lift(n,i).scrollIntoView()),!0)};function hce(t){return(e,r)=>{let{$from:n,$to:i}=e.selection;if(e.selection instanceof it&&e.selection.node.isBlock)return!n.parentOffset||!Up(e.doc,n.pos)?!1:(r&&r(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let d=n.depth;;d--)if(n.node(d).isBlock){l=n.end(d)==n.pos+(n.depth-d),c=n.start(d)==n.pos-(n.depth-d),a=V7(n.node(d-1).contentMatchAt(n.indexAfter(d-1))),s.unshift(l&&a?{type:a}:null),o=d;break}else{if(d==1)return!1;s.unshift(null)}let h=e.tr;(e.selection instanceof Ge||e.selection instanceof Oi)&&h.deleteSelection();let u=h.mapping.map(n.pos),f=Up(h.doc,u,s.length,s);if(f||(s[0]=a?{type:a}:null,f=Up(h.doc,u,s.length,s)),!f)return!1;if(h.split(u,s.length,s),!l&&c&&n.node(o).type!=a){let d=h.mapping.map(n.before(o)),p=h.doc.resolve(d);a&&n.node(o-1).canReplaceWith(p.index(),p.index()+1,a)&&h.setNodeMarkup(h.mapping.map(n.before(o)),a)}return r&&r(h.scrollIntoView()),!0}}const uce=hce(),fce=(t,e)=>(e&&e(t.tr.setSelection(new Oi(t.doc))),!0);function dce(t,e,r){let n=e.nodeBefore,i=e.nodeAfter,s=e.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&e.parent.canReplace(s-1,s)?(r&&r(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Ov(t.doc,e.pos))?!1:(r&&r(t.tr.join(e.pos).scrollIntoView()),!0)}function EN(t,e,r,n){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&dce(t,e,r))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(r){let d=e.pos+s.nodeSize,p=ke.empty;for(let y=o.length-1;y>=0;y--)p=ke.from(o[y].create(null,p));p=ke.from(i.copy(p));let m=t.tr.step(new Nn(e.pos-1,d,e.pos,d,new Be(p,1,0),o.length,!0)),g=m.doc.resolve(d+2*o.length);g.nodeAfter&&g.nodeAfter.type==i.type&&Ov(m.doc,g.pos)&&m.join(g.pos),r(m.scrollIntoView())}return!0}let h=s.type.spec.isolating||n>0&&l?null:wt.findFrom(e,1),u=h&&h.$from.blockRange(h.$to),f=u&&Lv(u);if(f!=null&&f>=e.depth)return r&&r(t.tr.lift(u,f).scrollIntoView()),!0;if(c&&gd(s,"start",!0)&&gd(i,"end")){let d=i,p=[];for(;p.push(d),!d.isTextblock;)d=d.lastChild;let m=s,g=1;for(;!m.isTextblock;m=m.firstChild)g++;if(d.canReplace(d.childCount,d.childCount,m.content)){if(r){let y=ke.empty;for(let x=p.length-1;x>=0;x--)y=ke.from(p[x].copy(y));let b=t.tr.step(new Nn(e.pos-p.length,e.pos+s.nodeSize,e.pos+g,e.pos+s.nodeSize-g,new Be(y,p.length,0),0,!0));r(b.scrollIntoView())}return!0}}return!1}function LN(t){return function(e,r){let n=e.selection,i=t<0?n.$from:n.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(r&&r(e.tr.setSelection(Ge.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const pce=LN(-1),mce=LN(1);function W7(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s),a=o&&A7(o,t,e);return a?(n&&n(r.tr.wrap(o,a).scrollIntoView()),!0):!1}}function jm(t,e=null){return function(r,n){let i=!1;for(let s=0;s<r.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=r.selection.ranges[s];r.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let h=r.doc.resolve(c),u=h.index();i=h.parent.canReplaceWith(u,u+1,t)}})}if(!i)return!1;if(n){let s=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=r.selection.ranges[o];s.setBlockType(a,l,t,e)}n(s.scrollIntoView())}return!0}}function gce(t,e,r,n){for(let i=0;i<e.length;i++){let{$from:s,$to:o}=e[i],a=s.depth==0?t.inlineContent&&t.type.allowsMarkType(r):!1;if(t.nodesBetween(s.pos,o.pos,(l,c)=>{if(a)return!1;a=l.inlineContent&&l.type.allowsMarkType(r)}),a)return!0}return!1}function qv(t,e=null,r){return function(n,i){let{empty:s,$cursor:o,ranges:a}=n.selection;if(s&&!o||!gce(n.doc,a,t))return!1;if(i)if(o)t.isInSet(n.storedMarks||o.marks())?i(n.tr.removeStoredMark(t)):i(n.tr.addStoredMark(t.create(e)));else{let l,c=n.tr;l=!a.some(h=>n.doc.rangeHasMark(h.$from.pos,h.$to.pos,t));for(let h=0;h<a.length;h++){let{$from:u,$to:f}=a[h];if(!l)c.removeMark(u.pos,f.pos,t);else{let d=u.pos,p=f.pos,m=u.nodeAfter,g=f.nodeBefore,y=m&&m.isText?/^\s*/.exec(m.text)[0].length:0,b=g&&g.isText?/\s*$/.exec(g.text)[0].length:0;d+y<p&&(d+=y,p-=b),c.addMark(d,p,t.create(e))}}i(c.scrollIntoView())}return!0}}function Hd(...t){return function(e,r,n){for(let i=0;i<t.length;i++)if(t[i](e,r,n))return!0;return!1}}let r5=Hd(H7,TN,_N),$A=Hd(H7,sce,oce);const Aa={Enter:Hd(ace,lce,cce,uce),"Mod-Enter":AN,Backspace:r5,"Mod-Backspace":r5,"Shift-Backspace":r5,Delete:$A,"Mod-Delete":$A,"Mod-a":fce},ON={"Ctrl-h":Aa.Backspace,"Alt-Backspace":Aa["Mod-Backspace"],"Ctrl-d":Aa.Delete,"Ctrl-Alt-Backspace":Aa["Mod-Delete"],"Alt-Delete":Aa["Mod-Delete"],"Alt-d":Aa["Mod-Delete"],"Ctrl-a":pce,"Ctrl-e":mce};for(let t in Aa)ON[t]=Aa[t];const yce=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,bce=yce?ON:Aa,xce=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),vce=typeof navigator<"u"&&/Win/.test(navigator.platform);function wce(t){let e=t.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))xce?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(r="Alt-"+r),i&&(r="Ctrl-"+r),o&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function kce(t){let e=Object.create(null);for(let r in t)e[wce(r)]=t[r];return e}function n5(t,e,r=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r&&e.shiftKey&&(t="Shift-"+t),t}function DN(t){return new xr({props:{handleKeyDown:j7(t)}})}function j7(t){let e=kce(t);return function(r,n){let i=gB(n),s,o=e[n5(i,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let a=e[n5(i,n,!1)];if(a&&a(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(vce&&n.ctrlKey&&n.altKey)&&(s=Qa[n.keyCode])&&s!=i){let a=e[n5(s,n)];if(a&&a(r.state,r.dispatch,r))return!0}}return!1}}const bn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},yd=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let X3=null;const _a=function(t,e,r){let n=X3||(X3=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},Cce=function(){X3=null},su=function(t,e,r,n){return r&&(zA(t,e,r,n,-1)||zA(t,e,r,n,1))},Sce=/^(img|br|input|textarea|hr)$/i;function zA(t,e,r,n,i){for(var s;;){if(t==r&&e==n)return!0;if(e==(i<0?0:gs(t))){let o=t.parentNode;if(!o||o.nodeType!=1||c1(t)||Sce.test(t.nodeName)||t.contentEditable=="false")return!1;e=bn(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?gs(t):0}else return!1}}function gs(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Tce(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=gs(t)}else if(t.parentNode&&!c1(t))e=bn(t),t=t.parentNode;else return null}}function _ce(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!c1(t))e=bn(t)+1,t=t.parentNode;else return null}}function Mce(t,e,r){for(let n=e==0,i=e==gs(t);n||i;){if(t==r)return!0;let s=bn(t);if(t=t.parentNode,!t)return!1;n=n&&s==0,i=i&&s==gs(t)}}function c1(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Vv=function(t){return t.focusNode&&su(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function oh(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function Ace(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Ece(t,e,r){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,r);if(n)return{node:n.offsetNode,offset:Math.min(gs(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,r);if(n)return{node:n.startContainer,offset:Math.min(gs(n.startContainer),n.startOffset)}}}const Xo=typeof navigator<"u"?navigator:null,HA=typeof document<"u"?document:null,Mc=Xo&&Xo.userAgent||"",J3=/Edge\/(\d+)/.exec(Mc),IN=/MSIE \d/.exec(Mc),Z3=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Mc),Di=!!(IN||Z3||J3),Zl=IN?document.documentMode:Z3?+Z3[1]:J3?+J3[1]:0,Cs=!Di&&/gecko\/(\d+)/i.test(Mc);Cs&&+(/Firefox\/(\d+)/.exec(Mc)||[0,0])[1];const Q3=!Di&&/Chrome\/(\d+)/.exec(Mc),Rn=!!Q3,BN=Q3?+Q3[1]:0,ci=!Di&&!!Xo&&/Apple Computer/.test(Xo.vendor),bd=ci&&(/Mobile\/\w+/.test(Mc)||!!Xo&&Xo.maxTouchPoints>2),ds=bd||(Xo?/Mac/.test(Xo.platform):!1),Lce=Xo?/Win/.test(Xo.platform):!1,Ha=/Android \d/.test(Mc),h1=!!HA&&"webkitFontSmoothing"in HA.documentElement.style,Oce=h1?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Dce(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function da(t,e){return typeof t=="number"?t:t[e]}function Ice(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}function qA(t,e,r){let n=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=r||t.dom;o;){if(o.nodeType!=1){o=yd(o);continue}let a=o,l=a==s.body,c=l?Dce(s):Ice(a),h=0,u=0;if(e.top<c.top+da(n,"top")?u=-(c.top-e.top+da(i,"top")):e.bottom>c.bottom-da(n,"bottom")&&(u=e.bottom-e.top>c.bottom-c.top?e.top+da(i,"top")-c.top:e.bottom-c.bottom+da(i,"bottom")),e.left<c.left+da(n,"left")?h=-(c.left-e.left+da(i,"left")):e.right>c.right-da(n,"right")&&(h=e.right-c.right+da(i,"right")),h||u)if(l)s.defaultView.scrollBy(h,u);else{let d=a.scrollLeft,p=a.scrollTop;u&&(a.scrollTop+=u),h&&(a.scrollLeft+=h);let m=a.scrollLeft-d,g=a.scrollTop-p;e={left:e.left-m,top:e.top-g,right:e.right-m,bottom:e.bottom-g}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:yd(o)}}function Bce(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),n,i;for(let s=(e.left+e.right)/2,o=r+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=r-20){n=a,i=l.top;break}}return{refDOM:n,refTop:i,stack:RN(t.dom)}}function RN(t){let e=[],r=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=r);n=yd(n));return e}function Rce({refDOM:t,refTop:e,stack:r}){let n=t?t.getBoundingClientRect().top:0;PN(r,n==0?0:n-e)}function PN(t,e){for(let r=0;r<t.length;r++){let{dom:n,top:i,left:s}=t[r];n.scrollTop!=i+e&&(n.scrollTop=i+e),n.scrollLeft!=s&&(n.scrollLeft=s)}}let Bu=null;function Pce(t){if(t.setActive)return t.setActive();if(Bu)return t.focus(Bu);let e=RN(t);t.focus(Bu==null?{get preventScroll(){return Bu={preventScroll:!0},!0}}:void 0),Bu||(Bu=!1,PN(e,0))}function NN(t,e){let r,n=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let h=t.firstChild,u=0;h;h=h.nextSibling,u++){let f;if(h.nodeType==1)f=h.getClientRects();else if(h.nodeType==3)f=_a(h).getClientRects();else continue;for(let d=0;d<f.length;d++){let p=f[d];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<n){r=h,n=m,i=m&&r.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,h.nodeType==1&&m&&(s=u+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=h,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!r&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=u+1)}}return!r&&l&&(r=l,i=c,n=0),r&&r.nodeType==3?Nce(r,i):!r||n&&r.nodeType==1?{node:t,offset:s}:NN(r,i)}function Nce(t,e){let r=t.nodeValue.length,n=document.createRange();for(let i=0;i<r;i++){n.setEnd(t,i+1),n.setStart(t,i);let s=Tl(n,1);if(s.top!=s.bottom&&U7(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function U7(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Fce(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function $ce(t,e,r){let{node:n,offset:i}=NN(e,r),s=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();s=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(n,i,s)}function zce(t,e,r,n){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>n.left||l.top>n.top?i=a.posBefore:(!o&&l.right<n.left||l.bottom<n.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,r,-1)}function FN(t,e,r){let n=t.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-r.top)/(r.bottom-r.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(U7(e,c))return FN(o,e,c)}}if((s=(s+1)%n)==i)break}return t}function Hce(t,e){let r=t.dom.ownerDocument,n,i=0,s=Ece(r,e.left,e.top);s&&({node:n,offset:i}=s);let o=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!U7(e,c)||(o=FN(t.dom,e,c),!o))return null}if(ci)for(let c=o;n&&c;c=yd(c))c.draggable&&(n=void 0);if(o=Fce(o,e),n){if(Cs&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let h=n.childNodes[i],u;h.nodeName=="IMG"&&(u=h.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&i++}let c;h1&&i&&n.nodeType==1&&(c=n.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,n==t.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(a=zce(t,n,i,e))}a==null&&(a=$ce(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function VA(t){return t.top<t.bottom||t.left<t.right}function Tl(t,e){let r=t.getClientRects();if(r.length){let n=r[e<0?0:r.length-1];if(VA(n))return n}return Array.prototype.find.call(r,VA)||t.getBoundingClientRect()}const qce=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function $N(t,e,r){let{node:n,offset:i,atom:s}=t.docView.domFromPos(e,r<0?-1:1),o=h1||Cs;if(n.nodeType==3)if(o&&(qce.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let l=Tl(_a(n,i,i),r);if(Cs&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let c=Tl(_a(n,i-1,i-1),-1);if(c.top==l.top){let h=Tl(_a(n,i,i+1),-1);if(h.top!=l.top)return _0(h,h.left<c.left)}}return l}else{let l=i,c=i,h=r<0?1:-1;return r<0&&!i?(c++,h=-1):r>=0&&i==n.nodeValue.length?(l--,h=1):r<0?l--:c++,_0(Tl(_a(n,l,c),h),h<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(r<0||i==gs(n))){let l=n.childNodes[i-1];if(l.nodeType==1)return i5(l.getBoundingClientRect(),!1)}if(s==null&&i<gs(n)){let l=n.childNodes[i];if(l.nodeType==1)return i5(l.getBoundingClientRect(),!0)}return i5(n.getBoundingClientRect(),r>=0)}if(s==null&&i&&(r<0||i==gs(n))){let l=n.childNodes[i-1],c=l.nodeType==3?_a(l,gs(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return _0(Tl(c,1),!1)}if(s==null&&i<gs(n)){let l=n.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?_a(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return _0(Tl(c,-1),!0)}return _0(Tl(n.nodeType==3?_a(n):n,-r),r>=0)}function _0(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function i5(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function zN(t,e,r){let n=t.state,i=t.root.activeElement;n!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),i!=t.dom&&i&&i.focus()}}function Vce(t,e,r){let n=e.selection,i=r=="up"?n.$from:n.$to;return zN(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,r=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=$N(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=_a(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let h=l[c];if(h.bottom>h.top+1&&(r=="up"?o.top-h.top>(h.bottom-o.top)*2:h.bottom-o.bottom>(o.bottom-h.top)*2))return!1}}return!0})}const Wce=/[\u0590-\u08ac]/;function jce(t,e,r){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,s=!i,o=i==n.parent.content.size,a=t.domSelection();return a?!Wce.test(n.parent.textContent)||!a.modify?r=="left"||r=="backward"?s:o:zN(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:h,anchorOffset:u}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",r,"character");let d=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),g=p&&!d.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(h,u),l&&(l!=h||c!=u)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),g}):n.pos==n.start()||n.pos==n.end()}let WA=null,jA=null,UA=!1;function Uce(t,e,r){return WA==e&&jA==r?UA:(WA=e,jA=r,UA=r=="up"||r=="down"?Vce(t,e,r):jce(t,e,r))}const Ss=0,GA=1,uh=2,Jo=3;class u1{constructor(e,r,n,i){this.parent=e,this.children=r,this.dom=n,this.contentDOM=i,this.dirty=Ss,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,n=this.posAtStart;;r++){let i=this.children[r];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let s,o;if(e==this.contentDOM)s=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=r>bn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&r==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let n=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!r||s.node))if(n&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return s}}getDesc(e){let r=e.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(e,r,n){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,r,n)}return-1}descAt(e){for(let r=0,n=0;r<this.children.length;r++){let i=this.children[r],s=n+i.size;if(n==e&&s!=n){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-n-i.border);n=s}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,i=0;for(let s=0;n<this.children.length;n++){let o=this.children[n],a=s+o.size;if(a>e||o instanceof qN){i=e-s;break}s=a}if(i)return this.children[n].domFromPos(i-this.children[n].border,r);for(let s;n&&!(s=this.children[n-1]).size&&s instanceof HN&&s.side>=0;n--);if(r<=0){let s,o=!0;for(;s=n?this.children[n-1]:null,!(!s||s.dom.parentNode==this.contentDOM);n--,o=!1);return s&&r&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,r):{node:this.contentDOM,offset:s?bn(s.dom)+1:0}}else{let s,o=!0;for(;s=n<this.children.length?this.children[n]:null,!(!s||s.dom.parentNode==this.contentDOM);n++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,r):{node:this.contentDOM,offset:s?bn(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=n,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let h=o+l.border;if(e>=h&&r<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,r,h);e=o;for(let u=a;u>0;u--){let f=this.children[u-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=bn(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>r||a==this.children.length-1)){r=c;for(let h=a+1;h<this.children.length;h++){let u=this.children[h];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){s=bn(u.dom);break}r+=u.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:r,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:n}=this.domFromPos(e,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]}setSelection(e,r,n,i=!1){let s=Math.min(e,r),o=Math.max(e,r);for(let d=0,p=0;d<this.children.length;d++){let m=this.children[d],g=p+m.size;if(s>p&&o<g)return m.setSelection(e-p-m.border,r-p-m.border,n,i);p=g}let a=this.domFromPos(e,e?-1:1),l=r==e?a:this.domFromPos(r,r?-1:1),c=n.root.getSelection(),h=n.domSelectionRange(),u=!1;if((Cs||ci)&&e==r){let{node:d,offset:p}=a;if(d.nodeType==3){if(u=!!(p&&d.nodeValue[p-1]==`
`),u&&p==d.nodeValue.length)for(let m=d,g;m;m=m.parentNode){if(g=m.nextSibling){g.nodeName=="BR"&&(a=l={node:g.parentNode,offset:bn(g)+1});break}let y=m.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let m=d.childNodes[p-1];u=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Cs&&h.focusNode&&h.focusNode!=l.node&&h.focusNode.nodeType==1){let d=h.focusNode.childNodes[h.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||u&&ci)&&su(a.node,a.offset,h.anchorNode,h.anchorOffset)&&su(l.node,l.offset,h.focusNode,h.focusOffset))return;let f=!1;if((c.extend||e==r)&&!(u&&Cs)){c.collapse(a.node,a.offset);try{e!=r&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>r){let p=a;a=l,l=p}let d=document.createRange();d.setEnd(l.node,l.offset),d.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let n=0,i=0;i<this.children.length;i++){let s=this.children[i],o=n+s.size;if(n==o?e<=o&&r>=n:e<o&&r>n){let a=n+s.border,l=o-s.border;if(e>=a&&r<=l){this.dirty=e==n||r==o?uh:GA,e==a&&r==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Jo:s.markDirty(e-a,r-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?uh:Jo}n=o}this.dirty=uh}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let n=e==1?uh:GA;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class HN extends u1{constructor(e,r,n,i){let s,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!r.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=r,this.widget=r,s=this}matchesWidget(e){return this.dirty==Ss&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Gce extends u1{constructor(e,r,n,i){super(e,[],r,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ou extends u1{constructor(e,r,n,i,s){super(e,[],n,i),this.mark=r,this.spec=s}static create(e,r,n,i){let s=i.nodeViews[r.type.name],o=s&&s(r,i,n);return(!o||!o.dom)&&(o=xu.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new ou(e,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Jo||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Jo&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=Ss){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Ss}}slice(e,r,n){let i=ou.create(this.parent,this.mark,!0,n),s=this.children,o=this.size;r<o&&(s=tC(s,r,o,n)),e>0&&(s=tC(s,0,e,n));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ql extends u1{constructor(e,r,n,i,s,o,a,l,c){super(e,[],s,o),this.node=r,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=a}static create(e,r,n,i,s,o){let a=s.nodeViews[r.type.name],l,c=a&&a(r,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},n,i),h=c&&c.dom,u=c&&c.contentDOM;if(r.isText){if(!h)h=document.createTextNode(r.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:u}=xu.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!u&&!r.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),r.type.spec.draggable&&(h.draggable=!0));let f=h;return h=jN(h,n,r),c?l=new Kce(e,r,n,i,h,u||null,f,c,s,o+1):r.isText?new Wv(e,r,n,i,h,f,s):new Ql(e,r,n,i,h,u||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ke.empty)}return e}matchesNode(e,r,n){return this.dirty==Ss&&e.eq(this.node)&&Xb(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let n=this.node.inlineContent,i=r,s=e.composing?this.localCompositionInfo(e,r):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new Xce(this,o&&o.node,e);Qce(this.node,this.innerDeco,(c,h,u)=>{c.spec.marks?l.syncToMarks(c.spec.marks,n,e):c.type.side>=0&&!u&&l.syncToMarks(h==this.node.childCount?Mt.none:this.node.child(h).marks,n,e),l.placeWidget(c,e,i)},(c,h,u,f)=>{l.syncToMarks(c.marks,n,e);let d;l.findNodeMatch(c,h,u,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(d=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,h,u,d,e)||l.updateNextNode(c,h,u,e,f,i)||l.addNode(c,h,u,e,i),i+=c.nodeSize}),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==uh)&&(o&&this.protectLocalComposition(e,o),VN(this.contentDOM,this.children,e),bd&&ehe(this.dom))}localCompositionInfo(e,r){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof Ge)||n<r||i>r+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=the(this.node.content,o,n-r,i-r);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:n,text:i}){if(this.getDesc(r))return;let s=r;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new Gce(this,s,r,i);e.input.compositionNodes.push(o),this.children=tC(this.children,n,n+i.length,e,o)}update(e,r,n,i){return this.dirty==Jo||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,n,i),!0)}updateInner(e,r,n,i){this.updateOuterDeco(r),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Ss}updateOuterDeco(e){if(Xb(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=WN(this.dom,this.nodeDOM,eC(this.outerDeco,this.node,r),eC(e,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function KA(t,e,r,n,i){jN(n,e,t);let s=new Ql(void 0,t,e,r,n,n,n,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Wv extends Ql{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,n,i){return this.dirty==Jo||this.dirty!=Ss&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=Ss||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Ss,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,n){let i=this.node.cut(e,r),s=document.createTextNode(i.text);return new Wv(this.parent,i,this.outerDeco,this.innerDeco,s,s,n)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=Jo)}get domAtom(){return!1}isText(e){return this.node.text==e}}class qN extends u1{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ss&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Kce extends Ql{constructor(e,r,n,i,s,o,a,l,c,h){super(e,r,n,i,s,o,a,c,h),this.spec=l}update(e,r,n,i){if(this.dirty==Jo)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,r,n);return s&&this.updateInner(e,r,n,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,n,i){this.spec.setSelection?this.spec.setSelection(e,r,n.root):super.setSelection(e,r,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function VN(t,e,r){let n=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=n;)n=YA(n),i=!0;n=n.nextSibling}else i=!0,t.insertBefore(a,n);if(o instanceof ou){let l=n?n.previousSibling:t.lastChild;VN(o.contentDOM,o.children,r),n=l?l.nextSibling:t.firstChild}}for(;n;)n=YA(n),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}const Yp=function(t){t&&(this.nodeName=t)};Yp.prototype=Object.create(null);const fh=[new Yp];function eC(t,e,r){if(t.length==0)return fh;let n=r?fh[0]:new Yp,i=[n];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(n=new Yp(o.nodeName));for(let a in o){let l=o[a];l!=null&&(r&&i.length==1&&i.push(n=new Yp(e.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+l:a=="style"?n.style=(n.style?n.style+";":"")+l:a!="nodeName"&&(n[a]=l))}}}return i}function WN(t,e,r,n){if(r==fh&&n==fh)return e;let i=e;for(let s=0;s<n.length;s++){let o=n[s],a=r[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=fh[0]),i=l}Yce(i,a||fh[0],o)}return i}function Yce(t,e,r){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&t.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=e[n]&&t.setAttribute(n,r[n]);if(e.class!=r.class){let n=e.class?e.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let s=0;s<n.length;s++)i.indexOf(n[s])==-1&&t.classList.remove(n[s]);for(let s=0;s<i.length;s++)n.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(e.style);)t.style.removeProperty(i[1])}r.style&&(t.style.cssText+=r.style)}}function jN(t,e,r){return WN(t,t,fh,eC(e,r,t.nodeType!=1))}function Xb(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function YA(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Xce{constructor(e,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Jce(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let n=e;n<r;n++)this.top.children[n].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,n){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Ss,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=ou.create(this.top,e[s],r,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,r,n,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,r,n))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,r,n)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,r,n,i,s){let o=this.top.children[i];return o.dirty==Jo&&o.dom==o.contentDOM&&(o.dirty=uh),o.update(e,r,n,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}e=r}}updateNextNode(e,r,n,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ql){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let h=l.dom,u,f=this.isLocked(h)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Jo&&Xb(r,l.outerDeco));if(!f&&l.update(e,r,n,i))return this.destroyBetween(this.index,a),l.dom!=h&&(this.changed=!0),this.index++,!0;if(!f&&(u=this.recreateWrapper(l,e,r,n,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=u,u.contentDOM&&(u.dirty=uh,u.updateChildren(i,o+1),u.dirty=Ss),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,n,i,s,o){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!Xb(n,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Ql.create(this.top,r,n,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,r,n,i,s){let o=Ql.create(this.top,e,r,n,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,r,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new HN(this.top,e,r,n);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof ou;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof Wv)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((ci||Rn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new qN(this.top,[],n,null);r!=this.top?r.children.push(i):r.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Jce(t,e){let r=e,n=r.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(n){let c=r.children[n-1];if(c instanceof ou)r=c,n=c.children.length;else{a=c,n--;break}}else{if(r==e)break e;n=r.parent.children.indexOf(r),r=r.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function Zce(t,e){return t.type.side-e.type.side}function Qce(t,e,r,n){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let h=t.child(c);n(h,i,e.forChild(s,h),c),s+=h.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let h,u;for(;o<i.length&&i[o].to==s;){let g=i[o++];g.widget&&(h?(u||(u=[h])).push(g):h=g)}if(h)if(u){u.sort(Zce);for(let g=0;g<u.length;g++)r(u[g],c,!!l)}else r(h,c,!!l);let f,d;if(l)d=-1,f=l,l=null;else if(c<t.childCount)d=c,f=t.child(c++);else break;for(let g=0;g<a.length;g++)a[g].to<=s&&a.splice(g--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+f.nodeSize;if(f.isText){let g=p;o<i.length&&i[o].from<g&&(g=i[o].from);for(let y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<p&&(l=f.cut(g-s),f=f.cut(0,g-s),p=g,d=-1)}else for(;o<i.length&&i[o].to<p;)o++;let m=f.isInline&&!f.isLeaf?a.filter(g=>!g.inline):a.slice();n(f,m,e.forChild(s,f),d),s=p}}function ehe(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function the(t,e,r,n){for(let i=0,s=0;i<t.childCount&&s<=n;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=r){if(s>=n&&l.slice(n-e.length-a,n-a)==e)return n-e.length;let c=a<n?l.lastIndexOf(e,n-a-1):-1;if(c>=0&&c+e.length+a>=r)return a+c;if(r==n&&l.length>=n+e.length-a&&l.slice(n-a,n-a+e.length)==e)return n}}return-1}function tC(t,e,r,n,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,h=a+=l.size;c>=r||h<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,n)),i&&(s.push(i),i=void 0),h>r&&s.push(l.slice(r-c,l.size,n)))}return s}function G7(t,e=null){let r=t.domSelectionRange(),n=t.state.doc;if(!r.focusNode)return null;let i=t.docView.nearestDesc(r.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let a=n.resolve(o),l,c;if(Vv(r)){for(l=o;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&it.isSelectable(u)&&i.parent&&!(u.isInline&&Mce(r.focusNode,r.focusOffset,i.dom))){let f=i.posBefore;c=new it(o==f?a:n.resolve(f))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let u=o,f=o;for(let d=0;d<r.rangeCount;d++){let p=r.getRangeAt(d);u=Math.min(u,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(u<0)return null;[l,o]=f==t.state.selection.anchor?[f,u]:[u,f],a=n.resolve(o)}else l=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let h=n.resolve(l);if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=K7(t,h,a,u)}return c}function UN(t){return t.editable?t.hasFocus():KN(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Ga(t,e=!1){let r=t.state.selection;if(GN(t,r),!!UN(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Rn){let n=t.domSelectionRange(),i=t.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&su(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)nhe(t);else{let{anchor:n,head:i}=r,s,o;XA&&!(r instanceof Ge)&&(r.$from.parent.inlineContent||(s=JA(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=JA(t,r.to))),t.docView.setSelection(n,i,t,e),XA&&(s&&ZA(s),o&&ZA(o)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&rhe(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const XA=ci||Rn&&BN<63;function JA(t,e){let{node:r,offset:n}=t.docView.domFromPos(e,0),i=n<r.childNodes.length?r.childNodes[n]:null,s=n?r.childNodes[n-1]:null;if(ci&&i&&i.contentEditable=="false")return s5(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return s5(i);if(s)return s5(s)}}function s5(t){return t.contentEditable="true",ci&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function ZA(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function rhe(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!UN(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function nhe(t){let e=t.domSelection();if(!e)return;let r=t.cursorWrapper.dom,n=r.nodeName=="IMG";n?e.collapse(r.parentNode,bn(r)+1):e.collapse(r,0),!n&&!t.state.selection.visible&&Di&&Zl<=11&&(r.disabled=!0,r.disabled=!1)}function GN(t,e){if(e instanceof it){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(QA(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else QA(t)}function QA(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function K7(t,e,r,n){return t.someProp("createSelectionBetween",i=>i(t,e,r))||Ge.between(e,r,n)}function eE(t){return t.editable&&!t.hasFocus()?!1:KN(t)}function KN(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function ihe(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return su(e.node,e.offset,r.anchorNode,r.anchorOffset)}function rC(t,e){let{$anchor:r,$head:n}=t.selection,i=e>0?r.max(n):r.min(n),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&wt.findFrom(s,e)}function Dl(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function tE(t,e,r){let n=t.state.selection;if(n instanceof Ge)if(r.indexOf("s")>-1){let{$head:i}=n,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Dl(t,new Ge(n.$anchor,o))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=rC(t.state,e);return i&&i instanceof it?Dl(t,i):!1}else if(!(ds&&r.indexOf("m")>-1)){let i=n.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?it.isSelectable(s)?Dl(t,new it(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):h1?Dl(t,new Ge(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(n instanceof it&&n.node.isInline)return Dl(t,new Ge(e>0?n.$to:n.$from));{let i=rC(t.state,e);return i?Dl(t,i):!1}}}function Jb(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Xp(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Ru(t,e){return e<0?she(t):ohe(t)}function she(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i,s,o=!1;for(Cs&&r.nodeType==1&&n<Jb(r)&&Xp(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let a=r.childNodes[n-1];if(Xp(a,-1))i=r,s=--n;else if(a.nodeType==3)r=a,n=r.nodeValue.length;else break}}else{if(YN(r))break;{let a=r.previousSibling;for(;a&&Xp(a,-1);)i=r.parentNode,s=bn(a),a=a.previousSibling;if(a)r=a,n=Jb(r);else{if(r=r.parentNode,r==t.dom)break;n=0}}}o?nC(t,r,n):i&&nC(t,i,s)}function ohe(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i=Jb(r),s,o;for(;;)if(n<i){if(r.nodeType!=1)break;let a=r.childNodes[n];if(Xp(a,1))s=r,o=++n;else break}else{if(YN(r))break;{let a=r.nextSibling;for(;a&&Xp(a,1);)s=a.parentNode,o=bn(a)+1,a=a.nextSibling;if(a)r=a,n=0,i=Jb(r);else{if(r=r.parentNode,r==t.dom)break;n=i=0}}}s&&nC(t,s,o)}function YN(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function ahe(t,e){for(;t&&e==t.childNodes.length&&!c1(t);)e=bn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function lhe(t,e){for(;t&&!e&&!c1(t);)e=bn(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function nC(t,e,r){if(e.nodeType!=3){let s,o;(o=ahe(e,r))?(e=o,r=0):(s=lhe(e,r))&&(e=s,r=s.nodeValue.length)}let n=t.domSelection();if(!n)return;if(Vv(n)){let s=document.createRange();s.setEnd(e,r),s.setStart(e,r),n.removeAllRanges(),n.addRange(s)}else n.extend&&n.extend(e,r);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Ga(t)},50)}function rE(t,e){let r=t.state.doc.resolve(e);if(!(Rn||Lce)&&r.parent.inlineContent){let i=t.coordsAtPos(e);if(e>r.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<r.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function nE(t,e,r){let n=t.state.selection;if(n instanceof Ge&&!n.empty||r.indexOf("s")>-1||ds&&r.indexOf("m")>-1)return!1;let{$from:i,$to:s}=n;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=rC(t.state,e);if(o&&o instanceof it)return Dl(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=n instanceof Oi?wt.near(o,e):wt.findFrom(o,e);return a?Dl(t,a):!1}return!1}function iE(t,e){if(!(t.state.selection instanceof Ge))return!0;let{$head:r,$anchor:n,empty:i}=t.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(r.pos-s.nodeSize,r.pos):o.delete(r.pos,r.pos+s.nodeSize),t.dispatch(o),!0}return!1}function sE(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function che(t){if(!ci||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;sE(t,n,"true"),setTimeout(()=>sE(t,n,"false"),20)}return!1}function hhe(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function uhe(t,e){let r=e.keyCode,n=hhe(e);if(r==8||ds&&r==72&&n=="c")return iE(t,-1)||Ru(t,-1);if(r==46&&!e.shiftKey||ds&&r==68&&n=="c")return iE(t,1)||Ru(t,1);if(r==13||r==27)return!0;if(r==37||ds&&r==66&&n=="c"){let i=r==37?rE(t,t.state.selection.from)=="ltr"?-1:1:-1;return tE(t,i,n)||Ru(t,i)}else if(r==39||ds&&r==70&&n=="c"){let i=r==39?rE(t,t.state.selection.from)=="ltr"?1:-1:1;return tE(t,i,n)||Ru(t,i)}else{if(r==38||ds&&r==80&&n=="c")return nE(t,-1,n)||Ru(t,-1);if(r==40||ds&&r==78&&n=="c")return che(t)||nE(t,1,n)||Ru(t,1);if(n==(ds?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function Y7(t,e){t.someProp("transformCopied",d=>{e=d(e,t)});let r=[],{content:n,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,s--;let d=n.firstChild;r.push(d.type.name,d.attrs!=d.type.defaultAttrs?d.attrs:null),n=d.content}let o=t.someProp("clipboardSerializer")||xu.fromSchema(t.state.schema),a=tF(),l=a.createElement("div");l.appendChild(o.serializeFragment(n,{document:a}));let c=l.firstChild,h,u=0;for(;c&&c.nodeType==1&&(h=eF[c.nodeName.toLowerCase()]);){for(let d=h.length-1;d>=0;d--){let p=a.createElement(h[d]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),u++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${u?` -${u}`:""} ${JSON.stringify(r)}`);let f=t.someProp("clipboardTextSerializer",d=>d(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function XN(t,e,r,n,i){let s=i.parent.type.spec.code,o,a;if(!r&&!e)return null;let l=!!e&&(n||s||!r);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||n,t)}),s)return a=new Be(ke.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let u=t.someProp("clipboardTextParser",f=>f(e,i,n,t));if(u)a=u;else{let f=i.marks(),{schema:d}=t.state,p=xu.fromSchema(d);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(d.text(m,f)))})}}else t.someProp("transformPastedHTML",u=>{r=u(r,t)}),o=mhe(r),h1&&ghe(o);let c=o&&o.querySelector("[data-pm-slice]"),h=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let u=+h[3];u>0;u--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||ru.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||h),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!fhe.test(f.parentNode.nodeName)?{ignore:!0}:null}})),h)a=yhe(oE(a,+h[1],+h[2]),h[4]);else if(a=Be.maxOpen(dhe(a.content,i),!0),a.openStart||a.openEnd){let u=0,f=0;for(let d=a.content.firstChild;u<a.openStart&&!d.type.spec.isolating;u++,d=d.firstChild);for(let d=a.content.lastChild;f<a.openEnd&&!d.type.spec.isolating;f++,d=d.lastChild);a=oE(a,u,f)}return t.someProp("transformPasted",u=>{a=u(a,t,l)}),a}const fhe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function dhe(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let i=e.node(r).contentMatchAt(e.index(r)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&ZN(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=QN(o[o.length-1],s.length));let h=JN(a,l);o.push(h),i=i.matchType(h.type),s=l}}),o)return ke.from(o)}return t}function JN(t,e,r=0){for(let n=e.length-1;n>=r;n--)t=e[n].create(null,ke.from(t));return t}function ZN(t,e,r,n,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=ZN(t,e,r,n.lastChild,i+1);if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));if(n.contentMatchAt(n.childCount).matchType(i==t.length-1?r.type:t[i+1]))return n.copy(n.content.append(ke.from(JN(r,t,i+1))))}}function QN(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,QN(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(ke.empty,!0);return t.copy(r.append(n))}function iC(t,e,r,n,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<n-1&&(a=iC(a,e,r,n,i+1,s)),i>=r&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(ke.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function oE(t,e,r){return e<t.openStart&&(t=new Be(iC(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new Be(iC(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const eF={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let aE=null;function tF(){return aE||(aE=document.implementation.createHTMLDocument("title"))}let o5=null;function phe(t){let e=window.trustedTypes;return e?(o5||(o5=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),o5.createHTML(t)):t}function mhe(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=tF().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),i;if((i=n&&eF[n[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),r.innerHTML=phe(t),i)for(let s=0;s<i.length;s++)r=r.querySelector(i[s])||r;return r}function ghe(t){let e=t.querySelectorAll(Rn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let n=e[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function yhe(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=n.length-2;a>=0;a-=2){let l=r.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;i=ke.from(l.create(n[a+1],i)),s++,o++}return new Be(i,s,o)}const hi={},ui={},bhe={touchstart:!0,touchmove:!0};class xhe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function vhe(t){for(let e in hi){let r=hi[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{khe(t,n)&&!X7(t,n)&&(t.editable||!(n.type in ui))&&r(t,n)},bhe[e]?{passive:!0}:void 0)}ci&&t.dom.addEventListener("input",()=>null),sC(t)}function Kl(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function whe(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function sC(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=n=>X7(t,n))})}function X7(t,e){return t.someProp("handleDOMEvents",r=>{let n=r[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function khe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function Che(t,e){!X7(t,e)&&hi[e.type]&&(t.editable||!(e.type in ui))&&hi[e.type](t,e)}ui.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!nF(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Ha&&Rn&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),bd&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",i=>i(t,oh(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,r))||uhe(t,r)?r.preventDefault():Kl(t,"key")};ui.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};ui.keypress=(t,e)=>{let r=e;if(nF(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||ds&&r.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,r))){r.preventDefault();return}let n=t.state.selection;if(!(n instanceof Ge)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(r.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,n.$from.pos,n.$to.pos,i,s))&&t.dispatch(s()),r.preventDefault()}};function jv(t){return{left:t.clientX,top:t.clientY}}function She(t,e){let r=e.x-t.clientX,n=e.y-t.clientY;return r*r+n*n<100}function J7(t,e,r,n,i){if(n==-1)return!1;let s=t.state.doc.resolve(n);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,r,s.nodeAfter,s.before(o),i,!0):a(t,r,s.node(o),s.before(o),i,!1)))return!0;return!1}function ff(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function The(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),n=r.nodeAfter;return n&&n.isAtom&&it.isSelectable(n)?(ff(t,new it(r)),!0):!1}function _he(t,e){if(e==-1)return!1;let r=t.state.selection,n,i;r instanceof it&&(n=r.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(it.isSelectable(a)){n&&r.$from.depth>0&&o>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?i=s.before(r.$from.depth):i=s.before(o);break}}return i!=null?(ff(t,it.create(t.state.doc,i)),!0):!1}function Mhe(t,e,r,n,i){return J7(t,"handleClickOn",e,r,n)||t.someProp("handleClick",s=>s(t,e,n))||(i?_he(t,r):The(t,r))}function Ahe(t,e,r,n){return J7(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",i=>i(t,e,n))}function Ehe(t,e,r,n){return J7(t,"handleTripleClickOn",e,r,n)||t.someProp("handleTripleClick",i=>i(t,e,n))||Lhe(t,r,n)}function Lhe(t,e,r){if(r.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(ff(t,Ge.create(n,0,n.content.size)),!0):!1;let i=n.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)ff(t,Ge.create(n,a+1,a+1+o.content.size));else if(it.isSelectable(o))ff(t,it.create(n,a));else continue;return!0}}function Z7(t){return Zb(t)}const rF=ds?"metaKey":"ctrlKey";hi.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let n=Z7(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&She(r,t.input.lastClick)&&!r[rF]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:s,button:r.button};let o=t.posAtCoords(jv(r));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Ohe(t,o,r,!!n)):(s=="doubleClick"?Ahe:Ehe)(t,o.pos,o.inside,r)?r.preventDefault():Kl(t,"pointer"))};class Ohe{constructor(e,r,n,i){this.view=e,this.pos=r,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[rF],this.allowDefault=n.shiftKey;let s,o;if(r.inside>-1)s=e.state.doc.nodeAt(r.inside),o=r.inside;else{let h=e.state.doc.resolve(r.pos);s=h.parent,o=h.depth?h.before():0}const a=i?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(n.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof it&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Cs&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Kl(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ga(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(jv(e))),this.updateAllowDefault(e),this.allowDefault||!r?Kl(this.view,"pointer"):Mhe(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||ci&&this.mightDrag&&!this.mightDrag.node.isAtom||Rn&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(ff(this.view,wt.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):Kl(this.view,"pointer")}move(e){this.updateAllowDefault(e),Kl(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}hi.touchstart=t=>{t.input.lastTouch=Date.now(),Z7(t),Kl(t,"pointer")};hi.touchmove=t=>{t.input.lastTouch=Date.now(),Kl(t,"pointer")};hi.contextmenu=t=>Z7(t);function nF(t,e){return t.composing?!0:ci&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Dhe=Ha?5e3:-1;ui.compositionstart=ui.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof Ge&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||r.marks(),Zb(t,!0),t.markCursor=null;else if(Zb(t,!e.selection.empty),Cs&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=t.domSelectionRange();for(let i=n.focusNode,s=n.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}iF(t,Dhe)};ui.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,iF(t,20))};function iF(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Zb(t),e))}function sF(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Bhe());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Ihe(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=Tce(e.focusNode,e.focusOffset),n=_ce(e.focusNode,e.focusOffset);if(r&&n&&r!=n){let i=n.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(r==s||n==s)return s;if(!i||!i.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function Bhe(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Zb(t,e=!1){if(!(Ha&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),sF(t),e||t.docView&&t.docView.dirty){let r=G7(t),n=t.state.selection;return r&&!r.eq(n)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Rhe(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const Um=Di&&Zl<15||bd&&Oce<604;hi.copy=ui.cut=(t,e)=>{let r=e,n=t.state.selection,i=r.type=="cut";if(n.empty)return;let s=Um?null:r.clipboardData,o=n.content(),{dom:a,text:l}=Y7(t,o);s?(r.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):Rhe(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Phe(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Nhe(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?Gm(t,n.value,null,i,e):Gm(t,n.textContent,n.innerHTML,i,e)},50)}function Gm(t,e,r,n,i){let s=XN(t,e,r,n,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||Be.empty)))return!0;if(!s)return!1;let o=Phe(s),a=o?t.state.tr.replaceSelectionWith(o,n):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function oF(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}ui.paste=(t,e)=>{let r=e;if(t.composing&&!Ha)return;let n=Um?null:r.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&Gm(t,oF(n),n.getData("text/html"),i,r)?r.preventDefault():Nhe(t,r)};class aF{constructor(e,r,n){this.slice=e,this.move=r,this.node=n}}const Fhe=ds?"altKey":"ctrlKey";function lF(t,e){let r=t.someProp("dragCopies",n=>!n(e));return r??!e[Fhe]}hi.dragstart=(t,e)=>{let r=e,n=t.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(jv(r)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof it?i.to-1:i.to))){if(n&&n.mightDrag)o=it.create(t.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let u=t.docView.nearestDesc(r.target,!0);u&&u.node.type.spec.draggable&&u!=t.docView&&(o=it.create(t.state.doc,u.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:h}=Y7(t,a);(!r.dataTransfer.files.length||!Rn||BN>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(Um?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",Um||r.dataTransfer.setData("text/plain",c),t.dragging=new aF(h,lF(t,r),o)};hi.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};ui.dragover=ui.dragenter=(t,e)=>e.preventDefault();ui.drop=(t,e)=>{let r=e,n=t.dragging;if(t.dragging=null,!r.dataTransfer)return;let i=t.posAtCoords(jv(r));if(!i)return;let s=t.state.doc.resolve(i.pos),o=n&&n.slice;o?t.someProp("transformPasted",p=>{o=p(o,t,!1)}):o=XN(t,oF(r.dataTransfer),Um?null:r.dataTransfer.getData("text/html"),!1,s);let a=!!(n&&lF(t,r));if(t.someProp("handleDrop",p=>p(t,r,o||Be.empty,a))){r.preventDefault();return}if(!o)return;r.preventDefault();let l=o?Oie(t.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:p}=n;p?p.replace(c):c.deleteSelection()}let h=c.mapping.map(l),u=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=c.doc;if(u?c.replaceRangeWith(h,h,o.content.firstChild):c.replaceRange(h,h,o),c.doc.eq(f))return;let d=c.doc.resolve(h);if(u&&it.isSelectable(o.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new it(d));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,y,b)=>p=b),c.setSelection(K7(t,d,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};hi.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Ga(t)},20))};hi.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};hi.beforeinput=(t,e)=>{if(Rn&&Ha&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,oh(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in ui)hi[t]=ui[t];function Km(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class Qb{constructor(e,r){this.toDOM=e,this.spec=r||Ph,this.side=this.spec.side||0}map(e,r,n,i){let{pos:s,deleted:o}=e.mapResult(r.from+i,this.side<0?-1:1);return o?null:new jr(s-n,s-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Qb&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Km(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ec{constructor(e,r){this.attrs=e,this.spec=r||Ph}map(e,r,n,i){let s=e.map(r.from+i,this.spec.inclusiveStart?-1:1)-n,o=e.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return s>=o?null:new jr(s,o,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof ec&&Km(this.attrs,e.attrs)&&Km(this.spec,e.spec)}static is(e){return e.type instanceof ec}destroy(){}}class Q7{constructor(e,r){this.attrs=e,this.spec=r||Ph}map(e,r,n,i){let s=e.mapResult(r.from+i,1);if(s.deleted)return null;let o=e.mapResult(r.to+i,-1);return o.deleted||o.pos<=s.pos?null:new jr(s.pos-n,o.pos-n,this)}valid(e,r){let{index:n,offset:i}=e.content.findIndex(r.from),s;return i==r.from&&!(s=e.child(n)).isText&&i+s.nodeSize==r.to}eq(e){return this==e||e instanceof Q7&&Km(this.attrs,e.attrs)&&Km(this.spec,e.spec)}destroy(){}}class jr{constructor(e,r,n){this.from=e,this.to=r,this.type=n}copy(e,r){return new jr(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,n){return this.type.map(e,this,r,n)}static widget(e,r,n){return new jr(e,e,new Qb(r,n))}static inline(e,r,n,i){return new jr(e,r,new ec(n,i))}static node(e,r,n,i){return new jr(e,r,new Q7(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ec}get widget(){return this.type instanceof Qb}}const Wu=[],Ph={};class or{constructor(e,r){this.local=e.length?e:Wu,this.children=r.length?r:Wu}static create(e,r){return r.length?ex(r,e,0,Ph):Ln}find(e,r,n){let i=[];return this.findInner(e??0,r??1e9,i,0,n),i}findInner(e,r,n,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=r&&a.to>=e&&(!s||s(a.spec))&&n.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,r-a,n,i+a,s)}}map(e,r,n){return this==Ln||e.maps.length==0?this:this.mapInner(e,r,0,0,n||Ph)}mapInner(e,r,n,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,n,i);l&&l.type.valid(r,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?$he(this.children,o||[],e,r,n,i,s):o?new or(o.sort(Nh),Wu):Ln}add(e,r){return r.length?this==Ln?or.create(e,r):this.addInner(e,r,0):this}addInner(e,r,n){let i,s=0;e.forEach((a,l)=>{let c=l+n,h;if(h=hF(r,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,h,c+1):i.splice(s,0,l,l+a.nodeSize,ex(h,a,c+1,Ph)),s+=3}});let o=cF(s?uF(r):r,-n);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new or(o.length?this.local.concat(o).sort(Nh):this.local,i||this.children)}remove(e){return e.length==0||this==Ln?this:this.removeInner(e,0)}removeInner(e,r){let n=this.children,i=this.local;for(let s=0;s<n.length;s+=3){let o,a=n[s]+r,l=n[s+1]+r;for(let h=0,u;h<e.length;h++)(u=e[h])&&u.from>a&&u.to<l&&(e[h]=null,(o||(o=[])).push(u));if(!o)continue;n==this.children&&(n=this.children.slice());let c=n[s+2].removeInner(o,a+1);c!=Ln?n[s+2]=c:(n.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,r)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new or(i,n):Ln}forChild(e,r){if(this==Ln)return this;if(r.isLeaf)return or.empty;let n,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(n=this.children[a+2]);break}let s=e+1,o=s+r.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof ec){let c=Math.max(s,l.from)-s,h=Math.min(o,l.to)-s;c<h&&(i||(i=[])).push(l.copy(c,h))}}if(i){let a=new or(i.sort(Nh),Wu);return n?new $l([a,n]):a}return n||Ln}eq(e){if(this==e)return!0;if(!(e instanceof or)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return eS(this.localsInner(e))}localsInner(e){if(this==Ln)return Wu;if(e.inlineContent||!this.local.some(ec.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof ec||r.push(this.local[n]);return r}forEachSet(e){e(this)}}or.empty=new or([],[]);or.removeOverlap=eS;const Ln=or.empty;class $l{constructor(e){this.members=e}map(e,r){const n=this.members.map(i=>i.map(e,r,Ph));return $l.from(n)}forChild(e,r){if(r.isLeaf)return or.empty;let n=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,r);s!=Ln&&(s instanceof $l?n=n.concat(s.members):n.push(s))}return $l.from(n)}eq(e){if(!(e instanceof $l)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,n=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!r)r=s;else{n&&(r=r.slice(),n=!1);for(let o=0;o<s.length;o++)r.push(s[o])}}return r?eS(n?r:r.sort(Nh)):Wu}static from(e){switch(e.length){case 0:return Ln;case 1:return e[0];default:return new $l(e.every(r=>r instanceof or)?e:e.reduce((r,n)=>r.concat(n instanceof or?n:n.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function $he(t,e,r,n,i,s,o){let a=t.slice();for(let c=0,h=s;c<r.maps.length;c++){let u=0;r.maps[c].forEach((f,d,p,m)=>{let g=m-p-(d-f);for(let y=0;y<a.length;y+=3){let b=a[y+1];if(b<0||f>b+h-u)continue;let x=a[y]+h-u;d>=x?a[y+1]=f<=x?-2:-1:f>=h&&g&&(a[y]+=g,a[y+1]+=g)}u+=g}),h=r.maps[c].map(h,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let h=r.map(t[c]+s),u=h-i;if(u<0||u>=n.content.size){l=!0;continue}let f=r.map(t[c+1]+s,-1),d=f-i,{index:p,offset:m}=n.content.findIndex(u),g=n.maybeChild(p);if(g&&m==u&&m+g.nodeSize==d){let y=a[c+2].mapInner(r,g,h+1,t[c]+s+1,o);y!=Ln?(a[c]=u,a[c+1]=d,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=zhe(a,t,e,r,i,s,o),h=ex(c,n,0,o);e=h.local;for(let u=0;u<a.length;u+=3)a[u+1]<0&&(a.splice(u,3),u-=3);for(let u=0,f=0;u<h.children.length;u+=3){let d=h.children[u];for(;f<a.length&&a[f]<d;)f+=3;a.splice(f,0,h.children[u],h.children[u+1],h.children[u+2])}}return new or(e.sort(Nh),a)}function cF(t,e){if(!e||!t.length)return t;let r=[];for(let n=0;n<t.length;n++){let i=t[n];r.push(new jr(i.from+e,i.to+e,i.type))}return r}function zhe(t,e,r,n,i,s,o){function a(l,c){for(let h=0;h<l.local.length;h++){let u=l.local[h].map(n,i,c);u?r.push(u):o.onRemove&&o.onRemove(l.local[h].spec)}for(let h=0;h<l.children.length;h+=3)a(l.children[h+2],l.children[h]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return r}function hF(t,e,r){if(e.isLeaf)return null;let n=r+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>r&&o.to<n&&((i||(i=[])).push(o),t[s]=null);return i}function uF(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function ex(t,e,r,n){let i=[],s=!1;e.forEach((a,l)=>{let c=hF(t,a,l+r);if(c){s=!0;let h=ex(c,a,r+l+1,n);h!=Ln&&i.push(l,l+a.nodeSize,h)}});let o=cF(s?uF(t):t,-r).sort(Nh);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(n.onRemove&&n.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new or(o,i):Ln}function Nh(t,e){return t.from-e.from||t.to-e.to}function eS(t){let e=t;for(let r=0;r<e.length-1;r++){let n=e[r];if(n.from!=n.to)for(let i=r+1;i<e.length;i++){let s=e[i];if(s.from==n.from){s.to!=n.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,n.to),lE(e,i+1,s.copy(n.to,s.to)));continue}else{s.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,s.from),lE(e,i,n.copy(s.from,n.to)));break}}}return e}function lE(t,e,r){for(;e<t.length&&Nh(r,t[e])>0;)e++;t.splice(e,0,r)}function a5(t){let e=[];return t.someProp("decorations",r=>{let n=r(t.state);n&&n!=Ln&&e.push(n)}),t.cursorWrapper&&e.push(or.create(t.state.doc,[t.cursorWrapper.deco])),$l.from(e)}const Hhe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},qhe=Di&&Zl<=11;class Vhe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Whe{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Vhe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);Di&&Zl<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),qhe&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Hhe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(eE(this.view)){if(this.suppressingSelectionUpdates)return Ga(this.view);if(Di&&Zl<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&su(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,n;for(let s=e.focusNode;s;s=yd(s))r.add(s);for(let s=e.anchorNode;s;s=yd(s))if(r.has(s)){n=s;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&eE(e)&&!this.ignoreSelectionChange(n),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let h=0;h<r.length;h++){let u=this.registerMutation(r[h],l);u&&(s=s<0?u.from:Math.min(u.from,s),o=o<0?u.to:Math.max(u.to,o),u.typeOver&&(a=!0))}if(Cs&&l.length){let h=l.filter(u=>u.nodeName=="BR");if(h.length==2){let[u,f]=h;u.parentNode&&u.parentNode.parentNode==f.parentNode?f.remove():u.remove()}else{let{focusNode:u}=this.currentSelection;for(let f of h){let d=f.parentNode;d&&d.nodeName=="LI"&&(!u||Ghe(e,u)!=d)&&f.remove()}}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Vv(n)&&(c=G7(e))&&c.eq(wt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ga(e),this.currentSelection.set(n),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),jhe(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||Ga(e),this.currentSelection.set(n))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let h=0;h<e.addedNodes.length;h++){let u=e.addedNodes[h];r.push(u),u.nodeType==3&&(this.lastChangedTextNode=u)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Di&&Zl<=11&&e.addedNodes.length)for(let h=0;h<e.addedNodes.length;h++){let{previousSibling:u,nextSibling:f}=e.addedNodes[h];(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(i=u),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?bn(i)+1:0,a=n.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?bn(s):e.target.childNodes.length,c=n.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let cE=new WeakMap,hE=!1;function jhe(t){if(!cE.has(t)&&(cE.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Cs,hE)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),hE=!0}}function uE(t,e){let r=e.startContainer,n=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return su(o.node,o.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function Uhe(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return uE(t,i)}let r;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),r?uE(t,r):null}function Ghe(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let n=t.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function Khe(t,e,r){let{node:n,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,r),l=t.domSelectionRange(),c,h=l.anchorNode;if(h&&t.dom.contains(h.nodeType==1?h:h.parentNode)&&(c=[{node:h,offset:l.anchorOffset}],Vv(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Rn&&t.input.lastKeyCode===8)for(let g=s;g>i;g--){let y=n.childNodes[g-1],b=y.pmViewDesc;if(y.nodeName=="BR"&&!b){s=g;break}if(!b||b.size)break}let u=t.state.doc,f=t.someProp("domParser")||ru.fromSchema(t.state.schema),d=u.resolve(o),p=null,m=f.parse(n,{topNode:d.parent,topMatch:d.parent.contentMatchAt(d.index()),topOpen:!0,from:i,to:s,preserveWhitespace:d.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:Yhe,context:d});if(c&&c[0].pos!=null){let g=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=g),p={anchor:g+o,head:y+o}}return{doc:m,sel:p,from:o,to:a}}function Yhe(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(ci&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||ci&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Xhe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Jhe(t,e,r,n,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let _=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,I=G7(t,_);if(I&&!t.state.selection.eq(I)){if(Rn&&Ha&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",L=>L(t,oh(13,"Enter"))))return;let N=t.state.tr.setSelection(I);_=="pointer"?N.setMeta("pointer",!0):_=="key"&&N.scrollIntoView(),s&&N.setMeta("composition",s),t.dispatch(N)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(r);e=o.before(a+1),r=t.state.doc.resolve(r).after(a+1);let l=t.state.selection,c=Khe(t,e,r),h=t.state.doc,u=h.slice(c.from,c.to),f,d;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,d="end"):(f=t.state.selection.from,d="start"),t.input.lastKeyCode=null;let p=eue(u.content,c.doc.content,c.from,f,d);if(p&&t.input.domChangeCount++,(bd&&t.input.lastIOSEnter>Date.now()-225||Ha)&&i.some(_=>_.nodeType==1&&!Xhe.test(_.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",_=>_(t,oh(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(n&&l instanceof Ge&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let _=fE(t,t.state.doc,c.sel);if(_&&!_.eq(t.state.selection)){let I=t.state.tr.setSelection(_);s&&I.setMeta("composition",s),t.dispatch(I)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof Ge&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Di&&Zl<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),g=c.doc.resolveNoCache(p.endB-c.from),y=h.resolve(p.start),b=m.sameParent(g)&&m.parent.inlineContent&&y.end()>=p.endA;if((bd&&t.input.lastIOSEnter>Date.now()-225&&(!b||i.some(_=>_.nodeName=="DIV"||_.nodeName=="P"))||!b&&m.pos<c.doc.content.size&&(!m.sameParent(g)||!m.parent.inlineContent)&&m.pos<g.pos&&!/\S/.test(c.doc.textBetween(m.pos,g.pos,"","")))&&t.someProp("handleKeyDown",_=>_(t,oh(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&Qhe(h,p.start,p.endA,m,g)&&t.someProp("handleKeyDown",_=>_(t,oh(8,"Backspace")))){Ha&&Rn&&t.domObserver.suppressSelectionUpdates();return}Rn&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),Ha&&!b&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,g=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(_){return _(t,oh(13,"Enter"))})},20));let x=p.start,T=p.endA,S=_=>{let I=_||t.state.tr.replace(x,T,c.doc.slice(p.start-c.from,p.endB-c.from));if(c.sel){let N=fE(t,I.doc,c.sel);N&&!(Rn&&t.composing&&N.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(N.head==x||N.head==I.mapping.map(T)-1)||Di&&N.empty&&N.head==x)&&I.setSelection(N)}return s&&I.setMeta("composition",s),I.scrollIntoView()},w;if(b)if(m.pos==g.pos){Di&&Zl<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ga(t),20));let _=S(t.state.tr.delete(x,T)),I=h.resolve(p.start).marksAcross(h.resolve(p.endA));I&&_.ensureMarks(I),t.dispatch(_)}else if(p.endA==p.endB&&(w=Zhe(m.parent.content.cut(m.parentOffset,g.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start())))){let _=S(t.state.tr);w.type=="add"?_.addMark(x,T,w.mark):_.removeMark(x,T,w.mark),t.dispatch(_)}else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let _=m.parent.textBetween(m.parentOffset,g.parentOffset),I=()=>S(t.state.tr.insertText(_,x,T));t.someProp("handleTextInput",N=>N(t,x,T,_,I))||t.dispatch(I())}else t.dispatch(S());else t.dispatch(S())}function fE(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:K7(t,e.resolve(r.anchor),e.resolve(r.head))}function Zhe(t,e){let r=t.firstChild.marks,n=e.firstChild.marks,i=r,s=n,o,a,l;for(let h=0;h<n.length;h++)i=n[h].removeFromSet(i);for(let h=0;h<r.length;h++)s=r[h].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=h=>h.mark(a.addToSet(h.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=h=>h.mark(a.removeFromSet(h.marks));else return null;let c=[];for(let h=0;h<e.childCount;h++)c.push(l(e.child(h)));if(ke.from(c).eq(t))return{mark:a,type:o}}function Qhe(t,e,r,n,i){if(r-e<=i.pos-n.pos||l5(n,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!n.parent.isTextblock){let a=s.nodeAfter;return a!=null&&r==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(l5(s,!0,!0));return!o.parent.isTextblock||o.pos>r||l5(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function l5(t,e,r){let n=t.depth,i=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,i++,e=!1;if(r){let s=t.node(n).maybeChild(t.indexAfter(n));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function eue(t,e,r,n,i){let s=t.findDiffStart(e,r);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,r+t.size,r+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.size<e.size){let l=n<=s&&n>=o?s-n:0;s-=l,s&&s<e.size&&dE(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,s&&s<t.size&&dE(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function dE(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}class tS{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new xhe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(bE),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=gE(this),mE(this),this.nodeViews=yE(this),this.docView=KA(this.state.doc,pE(this),a5(this),this.dom,this),this.domObserver=new Whe(this,(n,i,s,o)=>Jhe(this,n,i,s,o)),this.domObserver.start(),vhe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&sC(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(bE),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in e)r[n]=e[n];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var n;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(sF(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=r.plugins;if(a||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let d=yE(this);rue(d,this.nodeViews)&&(this.nodeViews=d,s=!0)}(a||r.handleDOMEvents!=this._props.handleDOMEvents)&&sC(this),this.editable=gE(this),mE(this);let l=a5(this),c=pE(this),h=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",u=s||!this.docView.matchesNode(e.doc,c,l);(u||!e.selection.eq(i.selection))&&(o=!0);let f=h=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Bce(this);if(o){this.domObserver.stop();let d=u&&(Di||Rn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&tue(i.selection,e.selection);if(u){let p=Rn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Ihe(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=KA(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(d=!0)}d||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&ihe(this))?Ga(this,d):(GN(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():f&&Rce(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof it){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&qA(this,r.getBoundingClientRect(),e)}else qA(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,e)}}updateDraggedNode(e,r){let n=e.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let s=n.from+(this.state.doc.content.size-r.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==n.node&&(i=s)}this.dragging=new aF(e.slice,e.move,i<0?void 0:it.create(this.state.doc,i))}someProp(e,r){let n=this._props&&this._props[e],i;if(n!=null&&(i=r?r(n):n))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=r?r(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=r?r(a):a))return i}}hasFocus(){if(Di){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Pce(this.dom),Ga(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Hce(this,e)}coordsAtPos(e,r=1){return $N(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,n=-1){let i=this.docView.posFromDOM(e,r,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,r){return Uce(this,r||this.state,e)}pasteHTML(e,r){return Gm(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return Gm(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return Y7(this,e)}destroy(){this.docView&&(whe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],a5(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Cce())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Che(this,e)}domSelectionRange(){let e=this.domSelection();return e?ci&&this.root.nodeType===11&&Ace(this.dom.ownerDocument)==this.dom&&Uhe(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}tS.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function pE(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let n in r)n=="class"?e.class+=" "+r[n]:n=="style"?e.style=(e.style?e.style+";":"")+r[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(r[n]))}),e.translate||(e.translate="no"),[jr.node(0,t.state.doc.content.size,e)]}function mE(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:jr.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function gE(t){return!t.someProp("editable",e=>e(t.state)===!1)}function tue(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function yE(t){let e=Object.create(null);function r(n){for(let i in n)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=n[i])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function rue(t,e){let r=0,n=0;for(let i in t){if(t[i]!=e[i])return!0;r++}for(let i in e)n++;return r!=n}function bE(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}function pl(t,e){return t.meta={package:"@milkdown/core",group:"System",...e},t}const fF={text:(t,e,r,n)=>{const i=t.value;return/^[^*_\\]*\s+$/.test(i)?i:r.safe(i,{...n,encode:[]})},strong:(t,e,r,n)=>{const i=t.marker||r.options.strong||"*",s=r.enter("strong"),o=r.createTracker(n);let a=o.move(i+i);return a+=o.move(r.containerPhrasing(t,{before:a,after:i,...o.current()})),a+=o.move(i+i),s(),a},emphasis:(t,e,r,n)=>{const i=t.marker||r.options.emphasis||"*",s=r.enter("emphasis"),o=r.createTracker(n);let a=o.move(i);return a+=o.move(r.containerPhrasing(t,{before:a,after:i,...o.current()})),a+=o.move(i),s(),a}},fr=Dt({},"editorView"),ip=Dt({},"editorState"),c5=Dt([],"initTimer"),oC=Dt({},"editor"),Ym=Dt([],"inputRules"),hc=Dt([],"prosePlugins"),Xm=Dt([],"remarkPlugins"),Jm=Dt([],"nodeView"),Zm=Dt([],"markView"),Fh=Dt(U3().use($3).use(V3),"remark"),Jp=Dt({handlers:fF,encode:[]},"remarkStringifyOptions"),B2=na("ConfigReady");function nue(t){const e=r=>(r.record(B2),async()=>(await t(r),r.done(B2),()=>{r.clearTimer(B2)}));return pl(e,{displayName:"Config"}),e}const $h=na("InitReady");function iue(t){const e=r=>(r.inject(oC,t).inject(hc,[]).inject(Xm,[]).inject(Ym,[]).inject(Jm,[]).inject(Zm,[]).inject(Jp,{handlers:fF,encode:[]}).inject(Fh,U3().use($3).use(V3)).inject(c5,[B2]).record($h),async()=>{await r.waitTimers(c5);const n=r.get(Jp);return r.set(Fh,U3().use($3).use(V3,n)),r.done($h),()=>{r.remove(oC).remove(hc).remove(Xm).remove(Ym).remove(Jm).remove(Zm).remove(Jp).remove(Fh).remove(c5).clearTimer($h)}});return pl(e,{displayName:"Init"}),e}const li=na("SchemaReady"),h5=Dt([],"schemaTimer"),Uo=Dt({},"schema"),Zp=Dt([],"nodes"),Qp=Dt([],"marks");function xE(t){var e;return{...t,parseDOM:(e=t.parseDOM)==null?void 0:e.map(r=>({priority:t.priority,...r}))}}const dF=t=>(t.inject(Uo,{}).inject(Zp,[]).inject(Qp,[]).inject(h5,[$h]).record(li),async()=>{await t.waitTimers(h5);const e=t.get(Fh),n=t.get(Xm).reduce((a,l)=>a.use(l.plugin,l.options),e);t.set(Fh,n);const i=Object.fromEntries(t.get(Zp).map(([a,l])=>[a,xE(l)])),s=Object.fromEntries(t.get(Qp).map(([a,l])=>[a,xE(l)])),o=new pP({nodes:i,marks:s});return t.set(Uo,o),t.done(li),()=>{t.remove(Uo).remove(Zp).remove(Qp).remove(h5).clearTimer(li)}});pl(dF,{displayName:"Schema"});var kh,fs;class pF{constructor(){we(this,kh);we(this,fs);ne(this,kh,new HP),ne(this,fs,null),this.setCtx=e=>{ne(this,fs,e)},this.chain=()=>{if(V(this,fs)==null)throw jw();const e=V(this,fs),r=[],n=this.get.bind(this),i={run:()=>{const o=Hd(...r),a=e.get(fr);return o(a.state,a.dispatch,a)},inline:o=>(r.push(o),i),pipe:s.bind(this)};function s(o,a){const l=n(o);return r.push(l(a)),i}return i}}get ctx(){return V(this,fs)}create(e,r){const n=e.create(V(this,kh).sliceMap);return n.set(r),n}get(e){return V(this,kh).get(e).get()}remove(e){return V(this,kh).remove(e)}call(e,r){if(V(this,fs)==null)throw jw();const i=this.get(e)(r),s=V(this,fs).get(fr);return i(s.state,s.dispatch,s)}inline(e){if(V(this,fs)==null)throw jw();const r=V(this,fs).get(fr);return e(r.state,r.dispatch,r)}}kh=new WeakMap,fs=new WeakMap;function sue(t="cmdKey"){return Dt(()=>()=>!1,t)}const De=Dt(new pF,"commands"),u5=Dt([li],"commandsTimer"),em=na("CommandsReady"),mF=t=>{const e=new pF;return e.setCtx(t),t.inject(De,e).inject(u5,[li]).record(em),async()=>(await t.waitTimers(u5),t.done(em),()=>{t.remove(De).remove(u5).clearTimer(em)})};pl(mF,{displayName:"Commands"});function oue(t){const e=Hd(qie,H7,rce,_N);return t.Backspace=e,t}var Ch,yi;class gF{constructor(){we(this,Ch);we(this,yi);ne(this,Ch,null),ne(this,yi,[]),this.setCtx=e=>{ne(this,Ch,e)},this.add=e=>(V(this,yi).push(e),()=>{ne(this,yi,V(this,yi).filter(r=>r!==e))}),this.addObjectKeymap=e=>{const r=[];return Object.entries(e).forEach(([n,i])=>{if(typeof i=="function"){const s={key:n,onRun:()=>i};V(this,yi).push(s),r.push(()=>{ne(this,yi,V(this,yi).filter(o=>o!==s))})}else V(this,yi).push(i),r.push(()=>{ne(this,yi,V(this,yi).filter(s=>s!==i))})}),()=>{r.forEach(n=>n())}},this.addBaseKeymap=()=>{const e=oue(bce);return this.addObjectKeymap(e)},this.build=()=>{const e={};return V(this,yi).forEach(n=>{e[n.key]=[...e[n.key]||[],n]}),Object.fromEntries(Object.entries(e).map(([n,i])=>{const s=i.sort((a,l)=>(l.priority??50)-(a.priority??50));return[n,(a,l,c)=>{const h=V(this,Ch);if(h==null)throw Rv();const u=s.map(d=>d.onRun(h));return Hd(...u)(a,l,c)}]}))}}get ctx(){return V(this,Ch)}}Ch=new WeakMap,yi=new WeakMap;const tx=Dt(new gF,"keymap"),f5=Dt([li],"keymapTimer"),tm=na("KeymapReady"),aue=t=>{const e=new gF;return e.setCtx(t),t.inject(tx,e).inject(f5,[li]).record(tm),async()=>(await t.waitTimers(f5),t.done(tm),()=>{t.remove(tx).remove(f5).clearTimer(tm)})},R2=na("ParserReady"),yF=()=>{throw Rv()},rm=Dt(yF,"parser"),d5=Dt([],"parserTimer"),bF=t=>(t.inject(rm,yF).inject(d5,[li]).record(R2),async()=>{await t.waitTimers(d5);const e=t.get(Fh),r=t.get(Uo);return t.set(rm,Qle.create(r,e)),t.done(R2),()=>{t.remove(rm).remove(d5).clearTimer(R2)}});pl(bF,{displayName:"Parser"});const nm=na("SerializerReady"),p5=Dt([],"serializerTimer"),xF=()=>{throw Rv()},df=Dt(xF,"serializer"),vF=t=>(t.inject(df,xF).inject(p5,[li]).record(nm),async()=>{await t.waitTimers(p5);const e=t.get(Fh),r=t.get(Uo);return t.set(df,tce.create(r,e)),t.done(nm),()=>{t.remove(df).remove(p5).clearTimer(nm)}});pl(vF,{displayName:"Serializer"});const P2=Dt("","defaultValue"),m5=Dt(t=>t,"stateOptions"),g5=Dt([],"editorStateTimer"),N2=na("EditorStateReady");function lue(t,e,r){if(typeof t=="string")return e(t);if(t.type==="html")return ru.fromSchema(r).parse(t.dom);if(t.type==="json")return Ua.fromJSON(r,t.value);throw Wie(t)}const cue=new vr("MILKDOWN_STATE_TRACKER"),wF=t=>(t.inject(P2,"").inject(ip,{}).inject(m5,e=>e).inject(g5,[R2,nm,em,tm]).record(N2),async()=>{await t.waitTimers(g5);const e=t.get(Uo),r=t.get(rm),n=t.get(Ym),i=t.get(m5),s=t.get(hc),o=t.get(P2),a=lue(o,r,e),l=t.get(tx),c=l.addBaseKeymap(),h=[...s,new xr({key:cue,state:{init:()=>{},apply:(d,p,m,g)=>{t.set(ip,g)}}}),ase({rules:n}),DN(l.build())];t.set(hc,h);const u=i({schema:e,doc:a,plugins:h}),f=hh.create(u);return t.set(ip,f),t.done(N2),()=>{c(),t.remove(P2).remove(ip).remove(m5).remove(g5).clearTimer(N2)}});pl(wF,{displayName:"EditorState"});const Qm=Dt([],"pasteRule"),y5=Dt([li],"pasteRuleTimer"),F2=na("PasteRuleReady"),kF=t=>(t.inject(Qm,[]).inject(y5,[li]).record(F2),async()=>(await t.waitTimers(y5),t.done(F2),()=>{t.remove(Qm).remove(y5).clearTimer(F2)}));pl(kF,{displayName:"PasteRule"});const $2=na("EditorViewReady"),b5=Dt([],"editorViewTimer"),im=Dt({},"editorViewOptions"),z2=Dt(null,"root"),aC=Dt(null,"rootDOM"),lC=Dt({},"rootAttrs");function hue(t,e){const r=document.createElement("div");r.className="milkdown",t.appendChild(r),e.set(aC,r);const n=e.get(lC);return Object.entries(n).forEach(([i,s])=>r.setAttribute(i,s)),r}function uue(t){t.classList.add("editor"),t.setAttribute("role","textbox")}const fue=new vr("MILKDOWN_VIEW_CLEAR"),CF=t=>(t.inject(z2,document.body).inject(fr,{}).inject(im,{}).inject(aC,null).inject(lC,{}).inject(b5,[N2,F2]).record($2),async()=>{await t.wait($h);const e=t.get(z2)||document.body,r=typeof e=="string"?document.querySelector(e):e;t.update(hc,l=>[new xr({key:fue,view:c=>{const h=r?hue(r,t):void 0;return(()=>{if(h&&r){const f=c.dom;r.replaceChild(h,f),h.appendChild(f)}})(),{destroy:()=>{h!=null&&h.parentNode&&(h==null||h.parentNode.replaceChild(c.dom,h)),h==null||h.remove()}}}}),...l]),await t.waitTimers(b5);const n=t.get(ip),i=t.get(im),s=Object.fromEntries(t.get(Jm)),o=Object.fromEntries(t.get(Zm)),a=new tS(r,{state:n,nodeViews:s,markViews:o,transformPasted:(l,c,h)=>(t.get(Qm).sort((u,f)=>(f.priority??50)-(u.priority??50)).map(u=>u.run).forEach(u=>{l=u(l,c,h)}),l),...i});return uue(a.dom),t.set(fr,a),t.done($2),()=>{a==null||a.destroy(),t.remove(z2).remove(fr).remove(im).remove(aC).remove(lC).remove(b5).clearTimer($2)}});pl(CF,{displayName:"EditorView"});var rx=(t=>(t.Idle="Idle",t.OnCreate="OnCreate",t.Created="Created",t.OnDestroy="OnDestroy",t.Destroyed="Destroyed",t))(rx||{}),Sh,Ui,Ba,Bf,Dg,Ig,bi,Ra,Th,Bg,_h,Rf,Rg,Wl,Pf;const PT=class PT{constructor(){we(this,Sh);we(this,Ui);we(this,Ba);we(this,Bf);we(this,Dg);we(this,Ig);we(this,bi);we(this,Ra);we(this,Th);we(this,Bg);we(this,_h);we(this,Rf);we(this,Rg);we(this,Wl);we(this,Pf);ne(this,Sh,!1),ne(this,Ui,"Idle"),ne(this,Ba,[]),ne(this,Bf,()=>{}),ne(this,Dg,new HP),ne(this,Ig,new Tse),ne(this,bi,new Map),ne(this,Ra,new Map),ne(this,Th,new R3(V(this,Dg),V(this,Ig))),ne(this,Bg,()=>{const e=nue(async n=>{await Promise.all(V(this,Ba).map(i=>Promise.resolve(i(n))))}),r=[dF,bF,vF,mF,aue,kF,wF,CF,iue(this),e];V(this,_h).call(this,r,V(this,Ra))}),ne(this,_h,(e,r)=>{e.forEach(n=>{const i=V(this,Th).produce(V(this,Sh)?n.meta:void 0),s=n(i);r.set(n,{ctx:i,handler:s,cleanup:void 0})})}),ne(this,Rf,(e,r=!1)=>Promise.all([e].flat().map(async n=>{const i=V(this,bi).get(n),s=i==null?void 0:i.cleanup;return r?V(this,bi).delete(n):V(this,bi).set(n,{ctx:void 0,handler:void 0,cleanup:void 0}),typeof s=="function"?s():s}))),ne(this,Rg,async()=>{await Promise.all([...V(this,Ra).entries()].map(async([e,{cleanup:r}])=>typeof r=="function"?r():r)),V(this,Ra).clear()}),ne(this,Wl,e=>{ne(this,Ui,e),V(this,Bf).call(this,e)}),ne(this,Pf,e=>[...e.entries()].map(async([r,n])=>{const{ctx:i,handler:s}=n;if(!s)return;const o=await s();e.set(r,{ctx:i,handler:s,cleanup:o})})),this.enableInspector=(e=!0)=>(ne(this,Sh,e),this),this.onStatusChange=e=>(ne(this,Bf,e),this),this.config=e=>(V(this,Ba).push(e),this),this.removeConfig=e=>(ne(this,Ba,V(this,Ba).filter(r=>r!==e)),this),this.use=e=>{const r=[e].flat();return r.flat().forEach(n=>{V(this,bi).set(n,{ctx:void 0,handler:void 0,cleanup:void 0})}),V(this,Ui)==="Created"&&V(this,_h).call(this,r,V(this,bi)),this},this.remove=async e=>V(this,Ui)==="OnCreate"?(console.warn("[Milkdown]: You are trying to remove plugins when the editor is creating, this is not recommended, please check your code."),new Promise(r=>{setTimeout(()=>{r(this.remove(e))},50)})):(await V(this,Rf).call(this,[e].flat(),!0),this),this.create=async()=>V(this,Ui)==="OnCreate"?this:(V(this,Ui)==="Created"&&await this.destroy(),V(this,Wl).call(this,"OnCreate"),V(this,Bg).call(this),V(this,_h).call(this,[...V(this,bi).keys()],V(this,bi)),await Promise.all([V(this,Pf).call(this,V(this,Ra)),V(this,Pf).call(this,V(this,bi))].flat()),V(this,Wl).call(this,"Created"),this),this.destroy=async(e=!1)=>V(this,Ui)==="Destroyed"||V(this,Ui)==="OnDestroy"?this:V(this,Ui)==="OnCreate"?new Promise(r=>{setTimeout(()=>{r(this.destroy(e))},50)}):(e&&ne(this,Ba,[]),V(this,Wl).call(this,"OnDestroy"),await V(this,Rf).call(this,[...V(this,bi).keys()],e),await V(this,Rg).call(this),V(this,Wl).call(this,"Destroyed"),this),this.action=e=>e(V(this,Th)),this.inspect=()=>V(this,Sh)?[...V(this,Ra).values(),...V(this,bi).values()].map(({ctx:e})=>{var r;return(r=e==null?void 0:e.inspector)==null?void 0:r.read()}).filter(e=>!!e):(console.warn("[Milkdown]: You are trying to collect inspection when inspector is disabled, please enable inspector by `editor.enableInspector()` first."),[])}static make(){return new PT}get ctx(){return V(this,Th)}get status(){return V(this,Ui)}};Sh=new WeakMap,Ui=new WeakMap,Ba=new WeakMap,Bf=new WeakMap,Dg=new WeakMap,Ig=new WeakMap,bi=new WeakMap,Ra=new WeakMap,Th=new WeakMap,Bg=new WeakMap,_h=new WeakMap,Rf=new WeakMap,Rg=new WeakMap,Wl=new WeakMap,Pf=new WeakMap;let cC=PT,due=t=>crypto.getRandomValues(new Uint8Array(t)),pue=(t,e,r)=>{let n=(2<<Math.log2(t.length-1))-1,i=-~(1.6*n*e/t.length);return(s=e)=>{let o="";for(;;){let a=r(i),l=i|0;for(;l--;)if(o+=t[a[l]&n]||"",o.length>=s)return o}}},rS=(t,e=21)=>pue(t,e|0,due);rS("abcedfghicklmn",10);function bt(t,e){const r=sue(t),n=i=>async()=>{n.key=r,await i.wait(em);const s=e(i);return i.get(De).create(r,s),n.run=o=>i.get(De).call(t,o),()=>{i.get(De).remove(r)}};return n}function Wn(t){const e=r=>async()=>{await r.wait(li);const n=t(r);return r.update(Ym,i=>[...i,n]),e.inputRule=n,()=>{r.update(Ym,i=>i.filter(s=>s!==n))}};return e}function mue(t){const e=r=>async()=>{await r.wait(li);const n=t(r);return r.update(Qm,i=>[...i,n]),e.pasteRule=n,()=>{r.update(Qm,i=>i.filter(s=>s!==n))}};return e}function gue(t,e){const r=n=>async()=>{const i=e(n);return n.update(Qp,s=>[...s.filter(o=>o[0]!==t),[t,i]]),r.id=t,r.schema=i,()=>{n.update(Qp,s=>s.filter(([o])=>o!==t))}};return r.type=n=>{const i=n.get(Uo).marks[t];if(!i)throw Zie(t);return i},r}function nS(t,e){const r=n=>async()=>{const i=e(n);return n.update(Zp,s=>[...s.filter(o=>o[0]!==t),[t,i]]),r.id=t,r.schema=i,()=>{n.update(Zp,s=>s.filter(([o])=>o!==t))}};return r.type=n=>{const i=n.get(Uo).nodes[t];if(!i)throw Jie(t);return i},r}function Gr(t){let e;const r=n=>async()=>(await n.wait(li),e=t(n),n.update(hc,i=>[...i,e]),()=>{n.update(hc,i=>i.filter(s=>s!==e))});return r.plugin=()=>e,r.key=()=>e.spec.key,r}function SF(t){const e=r=>async()=>{await r.wait(tm);const n=r.get(tx),i=t(r),s=n.addObjectKeymap(i);return e.keymap=i,()=>{s()}};return e}function f1(t,e){const r=n=>async()=>{await n.wait(li);const i=e(n);return t.type(n)instanceof Gb?n.update(Jm,s=>[...s,[t.id,i]]):n.update(Zm,s=>[...s,[t.id,i]]),r.view=i,r.type=t,()=>{t.type(n)instanceof Gb?n.update(Jm,s=>s.filter(o=>o[0]!==t.id)):n.update(Zm,s=>s.filter(o=>o[0]!==t.id))}};return r}function er(t,e){const r=Dt(t,e),n=i=>(i.inject(r),()=>()=>{i.remove(r)});return n.key=r,n}function $r(t,e){const r=er(e,t),n=nS(t,s=>s.get(r.key)(s)),i=[r,n];return i.id=n.id,i.node=n,i.type=s=>n.type(s),i.ctx=r,i.key=r.key,i.extendSchema=s=>{const o=s(e);return $r(t,o)},i}function qd(t,e){const r=er(e,t),n=gue(t,s=>s.get(r.key)(s)),i=[r,n];return i.id=n.id,i.mark=n,i.type=s=>n.type(s),i.ctx=r,i.key=r.key,i.extendSchema=s=>{const o=s(e);return qd(t,o)},i}function Pi(t,e){const r=Object.fromEntries(Object.entries(e).map(([o,{shortcuts:a,priority:l}])=>[o,{shortcuts:a,priority:l}])),n=er(r,`${t}Keymap`),i=SF(o=>{const a=o.get(n.key),l=Object.entries(e).flatMap(([c,{command:h}])=>{const u=a[c],f=[u.shortcuts].flat(),d=u.priority;return f.map(p=>[p,{key:p,onRun:h,priority:d}])});return Object.fromEntries(l)}),s=[n,i];return s.ctx=n,s.shortcuts=i,s.key=n.key,s.keymap=i.keymap,s}const ho=(t,e=()=>({}))=>er(e,`${t}Attr`),d1=(t,e=()=>({}))=>er(e,`${t}Attr`);function ia(t,e,r){const n=er({},t),i=o=>async()=>{await o.wait($h);const l={plugin:e(o),options:o.get(n.key)};return o.update(Xm,c=>[...c,l]),()=>{o.update(Xm,c=>c.filter(h=>h!==l))}},s=[n,i];return s.id=t,s.plugin=i,s.options=n,s}function yue(t){return e=>{const r=e.get(fr);return e.get(Uo),e.get(df)(r.state.doc)}}const hC=Math.min,pf=Math.max,nx=Math.round,Go=t=>({x:t,y:t}),bue={left:"right",right:"left",bottom:"top",top:"bottom"},xue={start:"end",end:"start"};function vE(t,e,r){return pf(t,hC(e,r))}function Uv(t,e){return typeof t=="function"?t(e):t}function au(t){return t.split("-")[0]}function Gv(t){return t.split("-")[1]}function TF(t){return t==="x"?"y":"x"}function _F(t){return t==="y"?"height":"width"}const vue=new Set(["top","bottom"]);function Yl(t){return vue.has(au(t))?"y":"x"}function MF(t){return TF(Yl(t))}function wue(t,e,r){r===void 0&&(r=!1);const n=Gv(t),i=MF(t),s=_F(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=ix(o)),[o,ix(o)]}function kue(t){const e=ix(t);return[uC(t),e,uC(e)]}function uC(t){return t.replace(/start|end/g,e=>xue[e])}const wE=["left","right"],kE=["right","left"],Cue=["top","bottom"],Sue=["bottom","top"];function Tue(t,e,r){switch(t){case"top":case"bottom":return r?e?kE:wE:e?wE:kE;case"left":case"right":return e?Cue:Sue;default:return[]}}function _ue(t,e,r,n){const i=Gv(t);let s=Tue(au(t),r==="start",n);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(uC)))),s}function ix(t){return t.replace(/left|right|bottom|top/g,e=>bue[e])}function Mue(t){return{top:0,right:0,bottom:0,left:0,...t}}function Aue(t){return typeof t!="number"?Mue(t):{top:t,right:t,bottom:t,left:t}}function sx(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}function CE(t,e,r){let{reference:n,floating:i}=t;const s=Yl(e),o=MF(e),a=_F(o),l=au(e),c=s==="y",h=n.x+n.width/2-i.width/2,u=n.y+n.height/2-i.height/2,f=n[a]/2-i[a]/2;let d;switch(l){case"top":d={x:h,y:n.y-i.height};break;case"bottom":d={x:h,y:n.y+n.height};break;case"right":d={x:n.x+n.width,y:u};break;case"left":d={x:n.x-i.width,y:u};break;default:d={x:n.x,y:n.y}}switch(Gv(e)){case"start":d[o]-=f*(r&&c?-1:1);break;case"end":d[o]+=f*(r&&c?-1:1);break}return d}const Eue=async(t,e,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=r,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:h,y:u}=CE(c,n,l),f=n,d={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:b,y:x,data:T,reset:S}=await y({x:h,y:u,initialPlacement:n,placement:f,strategy:i,middlewareData:d,rects:c,platform:o,elements:{reference:t,floating:e}});h=b??h,u=x??u,d={...d,[g]:{...d[g],...T}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:h,y:u}=CE(c,f,l)),m=-1)}return{x:h,y:u,placement:f,strategy:i,middlewareData:d}};async function AF(t,e){var r;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:u="floating",altBoundary:f=!1,padding:d=0}=Uv(e,t),p=Aue(d),g=a[f?u==="floating"?"reference":"floating":u],y=sx(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(g)))==null||r?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:h,strategy:l})),b=u==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),T=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},S=sx(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:x,strategy:l}):b);return{top:(y.top-S.top+p.top)/T.y,bottom:(S.bottom-y.bottom+p.bottom)/T.y,left:(y.left-S.left+p.left)/T.x,right:(S.right-y.right+p.right)/T.x}}const Lue=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:h=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Uv(t,e);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const y=au(i),b=Yl(a),x=au(a)===a,T=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=f||(x||!m?[ix(a)]:kue(a)),w=p!=="none";!f&&w&&S.push(..._ue(a,m,p,T));const _=[a,...S],I=await AF(e,g),N=[];let L=((n=s.flip)==null?void 0:n.overflows)||[];if(h&&N.push(I[y]),u){const z=wue(i,o,T);N.push(I[z[0]],I[z[1]])}if(L=[...L,{placement:i,overflows:N}],!N.every(z=>z<=0)){var D,P;const z=(((D=s.flip)==null?void 0:D.index)||0)+1,$=_[z];if($&&(!(u==="alignment"?b!==Yl($):!1)||L.every(q=>Yl(q.placement)===b?q.overflows[0]>0:!0)))return{data:{index:z,overflows:L},reset:{placement:$}};let H=(P=L.filter(U=>U.overflows[0]<=0).sort((U,q)=>U.overflows[1]-q.overflows[1])[0])==null?void 0:P.placement;if(!H)switch(d){case"bestFit":{var K;const U=(K=L.filter(q=>{if(w){const re=Yl(q.placement);return re===b||re==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(re=>re>0).reduce((re,E)=>re+E,0)]).sort((q,re)=>q[1]-re[1])[0])==null?void 0:K[0];U&&(H=U);break}case"initialPlacement":H=a;break}if(i!==H)return{reset:{placement:H}}}return{}}}},Oue=new Set(["left","top"]);async function Due(t,e){const{placement:r,platform:n,elements:i}=t,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=au(r),a=Gv(r),l=Yl(r)==="y",c=Oue.has(o)?-1:1,h=s&&l?-1:1,u=Uv(e,t);let{mainAxis:f,crossAxis:d,alignmentAxis:p}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return a&&typeof p=="number"&&(d=a==="end"?p*-1:p),l?{x:d*h,y:f*c}:{x:f*c,y:d*h}}const Iue=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await Due(e,t);return o===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},Bue=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:b}=g;return{x:y,y:b}}},...l}=Uv(t,e),c={x:r,y:n},h=await AF(e,l),u=Yl(au(i)),f=TF(u);let d=c[f],p=c[u];if(s){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",b=d+h[g],x=d-h[y];d=vE(b,d,x)}if(o){const g=u==="y"?"top":"left",y=u==="y"?"bottom":"right",b=p+h[g],x=p-h[y];p=vE(b,p,x)}const m=a.fn({...e,[f]:d,[u]:p});return{...m,data:{x:m.x-r,y:m.y-n,enabled:{[f]:s,[u]:o}}}}}};function Kv(){return typeof window<"u"}function Vd(t){return EF(t)?(t.nodeName||"").toLowerCase():"#document"}function Qi(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ml(t){var e;return(e=(EF(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function EF(t){return Kv()?t instanceof Node||t instanceof Qi(t).Node:!1}function io(t){return Kv()?t instanceof Element||t instanceof Qi(t).Element:!1}function Zo(t){return Kv()?t instanceof HTMLElement||t instanceof Qi(t).HTMLElement:!1}function SE(t){return!Kv()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Qi(t).ShadowRoot}const Rue=new Set(["inline","contents"]);function p1(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=so(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!Rue.has(i)}const Pue=new Set(["table","td","th"]);function Nue(t){return Pue.has(Vd(t))}const Fue=[":popover-open",":modal"];function Yv(t){return Fue.some(e=>{try{return t.matches(e)}catch{return!1}})}const $ue=["transform","translate","scale","rotate","perspective"],zue=["transform","translate","scale","rotate","perspective","filter"],Hue=["paint","layout","strict","content"];function iS(t){const e=sS(),r=io(t)?so(t):t;return $ue.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||zue.some(n=>(r.willChange||"").includes(n))||Hue.some(n=>(r.contain||"").includes(n))}function que(t){let e=uc(t);for(;Zo(e)&&!xd(e);){if(iS(e))return e;if(Yv(e))return null;e=uc(e)}return null}function sS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Vue=new Set(["html","body","#document"]);function xd(t){return Vue.has(Vd(t))}function so(t){return Qi(t).getComputedStyle(t)}function Xv(t){return io(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function uc(t){if(Vd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||SE(t)&&t.host||ml(t);return SE(e)?e.host:e}function LF(t){const e=uc(t);return xd(e)?t.ownerDocument?t.ownerDocument.body:t.body:Zo(e)&&p1(e)?e:LF(e)}function OF(t,e,r){var n;e===void 0&&(e=[]);const i=LF(t),s=i===((n=t.ownerDocument)==null?void 0:n.body),o=Qi(i);return s?(fC(o),e.concat(o,o.visualViewport||[],p1(i)?i:[],[])):e.concat(i,OF(i,[]))}function fC(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function DF(t){const e=so(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=Zo(t),s=i?t.offsetWidth:r,o=i?t.offsetHeight:n,a=nx(r)!==s||nx(n)!==o;return a&&(r=s,n=o),{width:r,height:n,$:a}}function IF(t){return io(t)?t:t.contextElement}function mf(t){const e=IF(t);if(!Zo(e))return Go(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:s}=DF(e);let o=(s?nx(r.width):r.width)/n,a=(s?nx(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Wue=Go(0);function BF(t){const e=Qi(t);return!sS()||!e.visualViewport?Wue:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function jue(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Qi(t)?!1:e}function eg(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),s=IF(t);let o=Go(1);e&&(n?io(n)&&(o=mf(n)):o=mf(t));const a=jue(s,r,n)?BF(s):Go(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,h=i.width/o.x,u=i.height/o.y;if(s){const f=Qi(s),d=n&&io(n)?Qi(n):n;let p=f,m=fC(p);for(;m&&n&&d!==p;){const g=mf(m),y=m.getBoundingClientRect(),b=so(m),x=y.left+(m.clientLeft+parseFloat(b.paddingLeft))*g.x,T=y.top+(m.clientTop+parseFloat(b.paddingTop))*g.y;l*=g.x,c*=g.y,h*=g.x,u*=g.y,l+=x,c+=T,p=Qi(m),m=fC(p)}}return sx({width:h,height:u,x:l,y:c})}function Jv(t,e){const r=Xv(t).scrollLeft;return e?e.left+r:eg(ml(t)).left+r}function RF(t,e){const r=t.getBoundingClientRect(),n=r.left+e.scrollLeft-Jv(t,r),i=r.top+e.scrollTop;return{x:n,y:i}}function Uue(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const s=i==="fixed",o=ml(n),a=e?Yv(e.floating):!1;if(n===o||a&&s)return r;let l={scrollLeft:0,scrollTop:0},c=Go(1);const h=Go(0),u=Zo(n);if((u||!u&&!s)&&((Vd(n)!=="body"||p1(o))&&(l=Xv(n)),Zo(n))){const d=eg(n);c=mf(n),h.x=d.x+n.clientLeft,h.y=d.y+n.clientTop}const f=o&&!u&&!s?RF(o,l):Go(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+h.x+f.x,y:r.y*c.y-l.scrollTop*c.y+h.y+f.y}}function Gue(t){return Array.from(t.getClientRects())}function Kue(t){const e=ml(t),r=Xv(t),n=t.ownerDocument.body,i=pf(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=pf(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Jv(t);const a=-r.scrollTop;return so(n).direction==="rtl"&&(o+=pf(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:a}}const TE=25;function Yue(t,e){const r=Qi(t),n=ml(t),i=r.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const h=sS();(!h||h&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const c=Jv(n);if(c<=0){const h=n.ownerDocument,u=h.body,f=getComputedStyle(u),d=h.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,p=Math.abs(n.clientWidth-u.clientWidth-d);p<=TE&&(s-=p)}else c<=TE&&(s+=c);return{width:s,height:o,x:a,y:l}}const Xue=new Set(["absolute","fixed"]);function Jue(t,e){const r=eg(t,!0,e==="fixed"),n=r.top+t.clientTop,i=r.left+t.clientLeft,s=Zo(t)?mf(t):Go(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=n*s.y;return{width:o,height:a,x:l,y:c}}function _E(t,e,r){let n;if(e==="viewport")n=Yue(t,r);else if(e==="document")n=Kue(ml(t));else if(io(e))n=Jue(e,r);else{const i=BF(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return sx(n)}function PF(t,e){const r=uc(t);return r===e||!io(r)||xd(r)?!1:so(r).position==="fixed"||PF(r,e)}function Zue(t,e){const r=e.get(t);if(r)return r;let n=OF(t,[]).filter(a=>io(a)&&Vd(a)!=="body"),i=null;const s=so(t).position==="fixed";let o=s?uc(t):t;for(;io(o)&&!xd(o);){const a=so(o),l=iS(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&Xue.has(i.position)||p1(o)&&!l&&PF(t,o))?n=n.filter(h=>h!==o):i=a,o=uc(o)}return e.set(t,n),n}function Que(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const o=[...r==="clippingAncestors"?Yv(e)?[]:Zue(e,this._c):[].concat(r),n],a=o[0],l=o.reduce((c,h)=>{const u=_E(e,h,i);return c.top=pf(u.top,c.top),c.right=hC(u.right,c.right),c.bottom=hC(u.bottom,c.bottom),c.left=pf(u.left,c.left),c},_E(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function efe(t){const{width:e,height:r}=DF(t);return{width:e,height:r}}function tfe(t,e,r){const n=Zo(e),i=ml(e),s=r==="fixed",o=eg(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Go(0);function c(){l.x=Jv(i)}if(n||!n&&!s)if((Vd(e)!=="body"||p1(i))&&(a=Xv(e)),n){const d=eg(e,!0,s,e);l.x=d.x+e.clientLeft,l.y=d.y+e.clientTop}else i&&c();s&&!n&&i&&c();const h=i&&!n&&!s?RF(i,a):Go(0),u=o.left+a.scrollLeft-l.x-h.x,f=o.top+a.scrollTop-l.y-h.y;return{x:u,y:f,width:o.width,height:o.height}}function x5(t){return so(t).position==="static"}function ME(t,e){if(!Zo(t)||so(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return ml(t)===r&&(r=r.ownerDocument.body),r}function NF(t,e){const r=Qi(t);if(Yv(t))return r;if(!Zo(t)){let i=uc(t);for(;i&&!xd(i);){if(io(i)&&!x5(i))return i;i=uc(i)}return r}let n=ME(t,e);for(;n&&Nue(n)&&x5(n);)n=ME(n,e);return n&&xd(n)&&x5(n)&&!iS(n)?r:n||que(t)||r}const rfe=async function(t){const e=this.getOffsetParent||NF,r=this.getDimensions,n=await r(t.floating);return{reference:tfe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function nfe(t){return so(t).direction==="rtl"}const ife={convertOffsetParentRelativeRectToViewportRelativeRect:Uue,getDocumentElement:ml,getClippingRect:Que,getOffsetParent:NF,getElementRects:rfe,getClientRects:Gue,getDimensions:efe,getScale:mf,isElement:io,isRTL:nfe},fc=Iue,AE=Bue,ox=Lue,oo=(t,e,r)=>{const n=new Map,i={platform:ife,...r},s={...i.platform,_c:n};return Eue(t,e,{...i,platform:s})};function m1(t,e){return Object.assign(t,{meta:{package:"@milkdown/plugin-block",...e}}),t}const sfe=t=>!jo(r=>r.type.name==="table")(t),Zv=er({filterNodes:sfe},"blockConfig");m1(Zv,{displayName:"Ctx<blockConfig>"});function ofe(t,e,r){var i;if(!t.dom.parentElement)return null;try{const s=(i=t.posAtCoords({left:e.x,top:e.y}))==null?void 0:i.inside;if(s==null||s<0)return null;let o=t.state.doc.resolve(s),a=t.state.doc.nodeAt(s),l=t.nodeDOM(s);const c=u=>{const f=o.depth>=1&&o.index(o.depth)===0;if(!(u||f))return;const p=o.before(o.depth);a=t.state.doc.nodeAt(p),l=t.nodeDOM(p),o=t.state.doc.resolve(p),r(o,a)||c(!0)},h=r(o,a);return c(!h),!l||!a?null:{node:a,$pos:o,el:l}}catch{return null}}const EE=ky.ie&&ky.ie_version<15||ky.ios&&ky.webkit_version<604,LE=20;var Nf,Pg,Mh,$s,Ff,zs,Va,FF,sp,Ah,Eh,Ng,$f,zf,Hf,Fg,Lh;class afe{constructor(){we(this,Va);we(this,Nf);we(this,Pg);we(this,Mh);we(this,$s);we(this,Ff);we(this,zs);we(this,Ah);we(this,Eh);we(this,Ng);we(this,$f);we(this,zf);we(this,Hf);we(this,Fg);we(this,Lh);ne(this,Pg,()=>{if(!V(this,$s))return null;const e=V(this,$s),r=V(this,Va,sp);if(r&&it.isSelectable(e.node)){const n=it.create(r.state.doc,e.$pos.pos);return r.dispatch(r.state.tr.setSelection(n)),r.focus(),ne(this,Mh,n),n}return null}),ne(this,Mh,null),ne(this,$s,null),ne(this,Ff,void 0),ne(this,zs,!1),ne(this,Eh,()=>{var e;(e=V(this,Ah))==null||e.call(this,{type:"hide"}),ne(this,$s,null)}),ne(this,Ng,e=>{var r;ne(this,$s,e),(r=V(this,Ah))==null||r.call(this,{type:"show",active:e})}),this.bind=(e,r)=>{ne(this,Nf,e),ne(this,Ah,r)},this.addEvent=e=>{e.addEventListener("mousedown",V(this,$f)),e.addEventListener("mouseup",V(this,zf)),e.addEventListener("dragstart",V(this,Hf))},this.removeEvent=e=>{e.removeEventListener("mousedown",V(this,$f)),e.removeEventListener("mouseup",V(this,zf)),e.removeEventListener("dragstart",V(this,Hf))},this.unBind=()=>{ne(this,Ah,void 0)},ne(this,$f,()=>{var e;ne(this,Ff,(e=V(this,$s))==null?void 0:e.el.getBoundingClientRect()),V(this,Pg).call(this)}),ne(this,zf,()=>{if(!V(this,zs)){requestAnimationFrame(()=>{var e;V(this,Ff)&&((e=V(this,Va,sp))==null||e.focus())});return}ne(this,zs,!1),ne(this,Mh,null)}),ne(this,Hf,e=>{var i;ne(this,zs,!0);const r=V(this,Va,sp);if(!r)return;r.dom.dataset.dragging="true";const n=V(this,Mh);if(e.dataTransfer&&n){const s=n.content();e.dataTransfer.effectAllowed="copyMove";const{dom:o,text:a}=r.serializeForClipboard(s);e.dataTransfer.clearData(),e.dataTransfer.setData(EE?"Text":"text/html",o.innerHTML),EE||e.dataTransfer.setData("text/plain",a);const l=(i=V(this,$s))==null?void 0:i.el;l&&e.dataTransfer.setDragImage(l,0,0),r.dragging={slice:s,move:!0}}}),this.keydownCallback=e=>(V(this,Eh).call(this),ne(this,zs,!1),e.dom.dataset.dragging="false",!1),ne(this,Fg,wv((e,r)=>{if(!e.editable)return;const n=e.dom.getBoundingClientRect(),i=n.left+n.width/2;if(!(e.root.elementFromPoint(i,r.clientY)instanceof Element)){V(this,Eh).call(this);return}const o=V(this,Va,FF);if(!o)return;const a=ofe(e,{x:i,y:r.clientY},o);if(!a){V(this,Eh).call(this);return}V(this,Ng).call(this,a)},200)),this.mousemoveCallback=(e,r)=>(e.composing||!e.editable||V(this,Fg).call(this,e,r),!1),this.dragoverCallback=(e,r)=>{var n;if(V(this,zs)){const i=(n=V(this,Va,sp))==null?void 0:n.dom.parentElement;if(!i)return!1;const s=i.scrollHeight>i.clientHeight,o=i.getBoundingClientRect();if(s){if(i.scrollTop>0&&Math.abs(r.y-o.y)<LE){const c=i.scrollTop>10?i.scrollTop-10:0;return i.scrollTop=c,!1}const a=Math.round(e.dom.getBoundingClientRect().height);if(Math.round(i.scrollTop+o.height)<a&&Math.abs(r.y-(o.height+o.y))<LE){const c=i.scrollTop+10;return i.scrollTop=c,!1}}}return!1},this.dragenterCallback=e=>{e.dragging&&(ne(this,zs,!0),e.dom.dataset.dragging="true")},this.dragleaveCallback=(e,r)=>{const n=r.clientX,i=r.clientY;(n<0||i<0||n>window.innerWidth||i>window.innerHeight)&&(ne(this,$s,null),V(this,Lh).call(this,e))},this.dropCallback=e=>(V(this,Lh).call(this,e),!1),this.dragendCallback=e=>{V(this,Lh).call(this,e)},ne(this,Lh,e=>{ne(this,zs,!1),e.dom.dataset.dragging="false"})}}Nf=new WeakMap,Pg=new WeakMap,Mh=new WeakMap,$s=new WeakMap,Ff=new WeakMap,zs=new WeakMap,Va=new WeakSet,FF=function(){var e;try{return(e=V(this,Nf))==null?void 0:e.get(Zv.key).filterNodes}catch{return}},sp=function(){var e;return(e=V(this,Nf))==null?void 0:e.get(fr)},Ah=new WeakMap,Eh=new WeakMap,Ng=new WeakMap,$f=new WeakMap,zf=new WeakMap,Hf=new WeakMap,Fg=new WeakMap,Lh=new WeakMap;const oS=er(()=>new afe,"blockService"),Qv=er({},"blockServiceInstance");m1(oS,{displayName:"Ctx<blockService>"});m1(Qv,{displayName:"Ctx<blockServiceInstance>"});const e4=er({},"blockSpec");m1(e4,{displayName:"Ctx<blockSpec>"});const aS=Gr(t=>{const e=new vr("MILKDOWN_BLOCK"),n=t.get(oS.key)();t.set(Qv.key,n);const i=t.get(e4.key);return new xr({key:e,...i,props:{...i.props,handleDOMEvents:{drop:s=>n.dropCallback(s),pointermove:(s,o)=>n.mousemoveCallback(s,o),keydown:s=>n.keydownCallback(s),dragover:(s,o)=>n.dragoverCallback(s,o),dragleave:(s,o)=>n.dragleaveCallback(s,o),dragenter:s=>n.dragenterCallback(s),dragend:s=>n.dragendCallback(s)}}})});m1(aS,{displayName:"Prose<block>"});var xi,Pa,Oh,Dh,$g,qf,zg,Hg,Vf,Wf,jf,uv,$F;class lfe{constructor(e){we(this,uv);we(this,xi);we(this,Pa);we(this,Oh);we(this,Dh);we(this,$g);we(this,qf);we(this,zg);we(this,Hg);we(this,Vf);we(this,Wf);we(this,jf);ne(this,Dh,null),ne(this,qf,!1),this.update=()=>{requestAnimationFrame(()=>{if(!V(this,qf))try{J1(this,uv,$F).call(this),ne(this,qf,!0)}catch{}})},this.destroy=()=>{var r,n;(r=V(this,Oh))==null||r.unBind(),(n=V(this,Oh))==null||n.removeEvent(V(this,xi)),V(this,xi).remove()},this.show=r=>{const n=r.el,i=V(this,Pa).get(fr).dom,s={ctx:V(this,Pa),active:r,editorDom:i,blockDom:V(this,xi)},o={contextElement:n,getBoundingClientRect:()=>V(this,Wf)?V(this,Wf).call(this,s):n.getBoundingClientRect()},a=[ox()];if(V(this,Vf)){const l=V(this,Vf).call(this,s),c=fc(l);a.push(c)}oo(o,V(this,xi),{placement:V(this,jf)?V(this,jf).call(this,s):"left",middleware:[...a,...V(this,zg)],...V(this,Hg)}).then(({x:l,y:c})=>{Object.assign(V(this,xi).style,{left:`${l}px`,top:`${c}px`}),V(this,xi).dataset.show="true"}).catch(console.error)},this.hide=()=>{V(this,xi).dataset.show="false"},ne(this,Pa,e.ctx),ne(this,xi,e.content),ne(this,Vf,e.getOffset),ne(this,Wf,e.getPosition),ne(this,jf,e.getPlacement),ne(this,zg,e.middleware??[]),ne(this,Hg,e.floatingUIOptions??{}),ne(this,$g,e.root),this.hide()}get active(){return V(this,Dh)}}xi=new WeakMap,Pa=new WeakMap,Oh=new WeakMap,Dh=new WeakMap,$g=new WeakMap,qf=new WeakMap,zg=new WeakMap,Hg=new WeakMap,Vf=new WeakMap,Wf=new WeakMap,jf=new WeakMap,uv=new WeakSet,$F=function(){const e=V(this,Pa).get(fr);(V(this,$g)??e.dom.parentElement??document.body).appendChild(V(this,xi));const n=V(this,Pa).get(Qv.key);n.bind(V(this,Pa),i=>{i.type==="hide"?(this.hide(),ne(this,Dh,null)):i.type==="show"&&(this.show(i.active),ne(this,Dh,i.active))}),ne(this,Oh,n),V(this,Oh).addEvent(V(this,xi)),V(this,xi).draggable=!0};const t4=[e4,Zv,oS,Qv,aS];t4.key=e4.key;t4.pluginKey=aS.key;function cfe(t,e){return function(r,n){let{$from:i,$to:s,node:o}=r.selection;if(o&&o.isBlock||i.depth<2||!i.sameParent(s))return!1;let a=i.node(-1);if(a.type!=t)return!1;if(i.parent.content.size==0&&i.node(-1).childCount==i.indexAfter(-1)){if(i.depth==3||i.node(-3).type!=t||i.index(-2)!=i.node(-2).childCount-1)return!1;if(n){let u=ke.empty,f=i.index(-1)?1:i.index(-2)?2:3;for(let y=i.depth-f;y>=i.depth-3;y--)u=ke.from(i.node(y).copy(u));let d=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;u=u.append(ke.from(t.createAndFill()));let p=i.before(i.depth-(f-1)),m=r.tr.replace(p,i.after(-d),new Be(u,4-f,0)),g=-1;m.doc.nodesBetween(p,m.doc.content.size,(y,b)=>{if(g>-1)return!1;y.isTextblock&&y.content.size==0&&(g=b+1)}),g>-1&&m.setSelection(wt.near(m.doc.resolve(g))),n(m.scrollIntoView())}return!0}let l=s.pos==i.end()?a.contentMatchAt(0).defaultType:null,c=r.tr.delete(i.pos,s.pos),h=l?[null,{type:l}]:void 0;return Up(c.doc,i.pos,2,h)?(n&&n(c.split(i.pos,2,h).scrollIntoView()),!0):!1}}function hfe(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?r?n.node(s.depth-1).type==t?ufe(e,r,t,s):ffe(e,r,s):!0:!1}}function ufe(t,e,r,n){let i=t.tr,s=n.end,o=n.$to.end(n.depth);s<o&&(i.step(new Nn(s-1,o,s,o,new Be(ke.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new sP(i.doc.resolve(n.$from.pos),i.doc.resolve(o),n.depth));const a=Lv(n);if(a==null)return!1;i.lift(n,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return Ov(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function ffe(t,e,r){let n=t.tr,i=r.parent;for(let d=r.end,p=r.endIndex-1,m=r.startIndex;p>m;p--)d-=i.child(p).nodeSize,n.delete(d-1,d+1);let s=n.doc.resolve(r.start),o=s.nodeAfter;if(n.mapping.map(r.end)!=r.start+s.nodeAfter.nodeSize)return!1;let a=r.startIndex==0,l=r.endIndex==i.childCount,c=s.node(-1),h=s.index(-1);if(!c.canReplace(h+(a?0:1),h+1,o.content.append(l?ke.empty:ke.from(i))))return!1;let u=s.pos,f=u+o.nodeSize;return n.step(new Nn(u-(a?1:0),f+(l?1:0),u+1,f-1,new Be((a?ke.empty:ke.from(i.copy(ke.empty))).append(l?ke.empty:ke.from(i.copy(ke.empty))),a?0:1,l?0:1),a?0:1)),e(n.scrollIntoView()),!0}function dfe(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(r){let c=l.lastChild&&l.lastChild.type==a.type,h=ke.from(c?t.create():null),u=new Be(ke.from(t.create(null,ke.from(a.type.create(null,h)))),c?3:1,0),f=s.start,d=s.end;r(e.tr.step(new Nn(f-(c?3:1),d,f,d,u,1,!0)).scrollIntoView())}return!0}}function pfe(t){const e=new Map;if(!t||!t.type)throw new Error("mdast-util-definitions expected node");return _c(t,"definition",function(n){const i=OE(n.identifier);i&&!e.get(i)&&e.set(i,n)}),r;function r(n){const i=OE(n);return e.get(i)}}function OE(t){return String(t||"").toUpperCase()}function mfe(){return function(t){const e=pfe(t);_c(t,function(r,n,i){if(r.type==="definition"&&i!==void 0&&typeof n=="number")return i.children.splice(n,1),[q3,n];if(r.type==="imageReference"||r.type==="linkReference"){const s=e(r.identifier);if(s&&i&&typeof n=="number")return i.children[n]=r.type==="imageReference"?{type:"image",url:s.url,title:s.title,alt:r.alt}:{type:"link",url:s.url,title:s.title,children:r.children},[q3,n]}})}}function zF(t,e){var i;if(!(e.childCount>=1&&((i=e.lastChild)==null?void 0:i.type.name)==="hardbreak")){t.next(e.content);return}const n=[];e.content.forEach((s,o,a)=>{a!==e.childCount-1&&n.push(s)}),t.next(ke.fromArray(n))}function se(t,e){return Object.assign(t,{meta:{package:"@milkdown/preset-commonmark",...e}}),t}const lS=d1("emphasis");se(lS,{displayName:"Attr<emphasis>",group:"Emphasis"});const vu=qd("emphasis",t=>({attrs:{marker:{default:t.get(Jp).emphasis||"*",validate:"string"}},parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:e=>e==="italic"}],toDOM:e=>["em",t.get(lS.key)(e)],parseMarkdown:{match:e=>e.type==="emphasis",runner:(e,r,n)=>{e.openMark(n,{marker:r.marker}),e.next(r.children),e.closeMark(n)}},toMarkdown:{match:e=>e.type.name==="emphasis",runner:(e,r)=>{e.withMark(r,"emphasis",void 0,{marker:r.attrs.marker})}}}));se(vu.mark,{displayName:"MarkSchema<emphasis>",group:"Emphasis"});se(vu.ctx,{displayName:"MarkSchemaCtx<emphasis>",group:"Emphasis"});const r4=bt("ToggleEmphasis",t=>()=>qv(vu.type(t)));se(r4,{displayName:"Command<toggleEmphasisCommand>",group:"Emphasis"});const HF=Wn(t=>o1(/(?:^|[^*])\*([^*]+)\*$/,vu.type(t),{getAttr:()=>({marker:"*"}),updateCaptured:({fullMatch:e,start:r})=>e.startsWith("*")?{}:{fullMatch:e.slice(1),start:r+1}}));se(HF,{displayName:"InputRule<emphasis>|Star",group:"Emphasis"});const qF=Wn(t=>o1(/\b_(?![_\s])(.*?[^_\s])_\b/,vu.type(t),{getAttr:()=>({marker:"_"}),updateCaptured:({fullMatch:e,start:r})=>e.startsWith("_")?{}:{fullMatch:e.slice(1),start:r+1}}));se(qF,{displayName:"InputRule<emphasis>|Underscore",group:"Emphasis"});const cS=Pi("emphasisKeymap",{ToggleEmphasis:{shortcuts:"Mod-i",command:t=>{const e=t.get(De);return()=>e.call(r4.key)}}});se(cS.ctx,{displayName:"KeymapCtx<emphasis>",group:"Emphasis"});se(cS.shortcuts,{displayName:"Keymap<emphasis>",group:"Emphasis"});const hS=d1("strong");se(hS,{displayName:"Attr<strong>",group:"Strong"});const Wd=qd("strong",t=>({attrs:{marker:{default:t.get(Jp).strong||"*",validate:"string"}},parseDOM:[{tag:"b",getAttrs:e=>e.style.fontWeight!="normal"&&null},{tag:"strong"},{style:"font-style",getAttrs:e=>e==="bold"},{style:"font-weight=400",clearMark:e=>e.type.name=="strong"},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:e=>["strong",t.get(hS.key)(e)],parseMarkdown:{match:e=>e.type==="strong",runner:(e,r,n)=>{e.openMark(n,{marker:r.marker}),e.next(r.children),e.closeMark(n)}},toMarkdown:{match:e=>e.type.name==="strong",runner:(e,r)=>{e.withMark(r,"strong",void 0,{marker:r.attrs.marker})}}}));se(Wd.mark,{displayName:"MarkSchema<strong>",group:"Strong"});se(Wd.ctx,{displayName:"MarkSchemaCtx<strong>",group:"Strong"});const n4=bt("ToggleStrong",t=>()=>qv(Wd.type(t)));se(n4,{displayName:"Command<toggleStrongCommand>",group:"Strong"});const VF=Wn(t=>o1(new RegExp("(?<![\\w:/])(?:\\*\\*|__)([^*_]+?)(?:\\*\\*|__)(?![\\w/])$"),Wd.type(t),{getAttr:e=>({marker:e[0].startsWith("*")?"*":"_"})}));se(VF,{displayName:"InputRule<strong>",group:"Strong"});const uS=Pi("strongKeymap",{ToggleBold:{shortcuts:["Mod-b"],command:t=>{const e=t.get(De);return()=>e.call(n4.key)}}});se(uS.ctx,{displayName:"KeymapCtx<strong>",group:"Strong"});se(uS.shortcuts,{displayName:"Keymap<strong>",group:"Strong"});const fS=d1("inlineCode");se(fS,{displayName:"Attr<inlineCode>",group:"InlineCode"});const qa=qd("inlineCode",t=>({priority:100,code:!0,parseDOM:[{tag:"code"}],toDOM:e=>["code",t.get(fS.key)(e)],parseMarkdown:{match:e=>e.type==="inlineCode",runner:(e,r,n)=>{e.openMark(n),e.addText(r.value),e.closeMark(n)}},toMarkdown:{match:e=>e.type.name==="inlineCode",runner:(e,r,n)=>{e.withMark(r,"inlineCode",n.text||"")}}}));se(qa.mark,{displayName:"MarkSchema<inlineCode>",group:"InlineCode"});se(qa.ctx,{displayName:"MarkSchemaCtx<inlineCode>",group:"InlineCode"});const i4=bt("ToggleInlineCode",t=>()=>(e,r)=>{const{selection:n,tr:i}=e;if(n.empty)return!1;const{from:s,to:o}=n;return e.doc.rangeHasMark(s,o,qa.type(t))?(r==null||r(i.removeMark(s,o,qa.type(t))),!0):(Object.keys(e.schema.marks).filter(c=>c!==qa.type.name).map(c=>e.schema.marks[c]).forEach(c=>{i.removeMark(s,o,c)}),r==null||r(i.addMark(s,o,qa.type(t).create())),!0)});se(i4,{displayName:"Command<toggleInlineCodeCommand>",group:"InlineCode"});const WF=Wn(t=>o1(/(?:`)([^`]+)(?:`)$/,qa.type(t)));se(WF,{displayName:"InputRule<inlineCodeInputRule>",group:"InlineCode"});const dS=Pi("inlineCodeKeymap",{ToggleInlineCode:{shortcuts:"Mod-e",command:t=>{const e=t.get(De);return()=>e.call(i4.key)}}});se(dS.ctx,{displayName:"KeymapCtx<inlineCode>",group:"InlineCode"});se(dS.shortcuts,{displayName:"Keymap<inlineCode>",group:"InlineCode"});const pS=d1("link");se(pS,{displayName:"Attr<link>",group:"Link"});const Xs=qd("link",t=>({attrs:{href:{validate:"string"},title:{default:null,validate:"string|null"}},parseDOM:[{tag:"a[href]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw co(e);return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:e=>["a",{...t.get(pS.key)(e),...e.attrs}],parseMarkdown:{match:e=>e.type==="link",runner:(e,r,n)=>{const i=r.url,s=r.title;e.openMark(n,{href:i,title:s}),e.next(r.children),e.closeMark(n)}},toMarkdown:{match:e=>e.type.name==="link",runner:(e,r)=>{e.withMark(r,"link",void 0,{title:r.attrs.title,url:r.attrs.href})}}}));se(Xs.mark,{displayName:"MarkSchema<link>",group:"Link"});const jF=bt("ToggleLink",t=>(e={})=>qv(Xs.type(t),e));se(jF,{displayName:"Command<toggleLinkCommand>",group:"Link"});const UF=bt("UpdateLink",t=>(e={})=>(r,n)=>{if(!n)return!1;let i,s=-1;const{selection:o}=r,{from:a,to:l}=o;if(r.doc.nodesBetween(a,a===l?l+1:l,(p,m)=>{if(Xs.type(t).isInSet(p.marks))return i=p,s=m,!1}),!i)return!1;const c=i.marks.find(({type:p})=>p===Xs.type(t));if(!c)return!1;const h=s,u=s+i.nodeSize,{tr:f}=r,d=Xs.type(t).create({...c.attrs,...e});return d?(n(f.removeMark(h,u,c).addMark(h,u,d).setSelection(new Ge(f.selection.$anchor)).scrollIntoView()),!0):!1});se(UF,{displayName:"Command<updateLinkCommand>",group:"Link"});const GF=nS("doc",()=>({content:"block+",parseMarkdown:{match:({type:t})=>t==="root",runner:(t,e,r)=>{t.injectRoot(e,r)}},toMarkdown:{match:t=>t.type.name==="doc",runner:(t,e)=>{t.openNode("root"),t.next(e.content)}}}));se(GF,{displayName:"NodeSchema<doc>",group:"Doc"});function gfe(t){return P7(t,e=>{var r;return e.type==="html"&&["<br />","<br>","<br >","<br/>"].includes((r=e.value)==null?void 0:r.trim())},(e,r)=>{if(!r.length)return;const n=r[r.length-1];if(!n)return;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1)},!0)}const s4=ia("remark-preserve-empty-line",()=>()=>gfe);se(s4.plugin,{displayName:"Remark<remarkPreserveEmptyLine>",group:"Remark"});se(s4.options,{displayName:"RemarkConfig<remarkPreserveEmptyLine>",group:"Remark"});const mS=ho("paragraph");se(mS,{displayName:"Attr<paragraph>",group:"Paragraph"});const uo=$r("paragraph",t=>({content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:e=>["p",t.get(mS.key)(e),0],parseMarkdown:{match:e=>e.type==="paragraph",runner:(e,r,n)=>{e.openNode(n),r.children?e.next(r.children):e.addText(r.value||""),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="paragraph",runner:(e,r)=>{var s;const i=(s=t.get(fr).state)==null?void 0:s.doc.lastChild;e.openNode("paragraph"),(!r.content||r.content.size===0)&&r!==i&&yfe(t)?e.addNode("html",void 0,"<br />"):zF(e,r),e.closeNode()}}}));function yfe(t){let e=!1;try{t.get(s4.id),e=!0}catch{e=!1}return e}se(uo.node,{displayName:"NodeSchema<paragraph>",group:"Paragraph"});se(uo.ctx,{displayName:"NodeSchemaCtx<paragraph>",group:"Paragraph"});const gS=bt("TurnIntoText",t=>()=>jm(uo.type(t)));se(gS,{displayName:"Command<turnIntoTextCommand>",group:"Paragraph"});const yS=Pi("paragraphKeymap",{TurnIntoText:{shortcuts:"Mod-Alt-0",command:t=>{const e=t.get(De);return()=>e.call(gS.key)}}});se(yS.ctx,{displayName:"KeymapCtx<paragraph>",group:"Paragraph"});se(yS.shortcuts,{displayName:"Keymap<paragraph>",group:"Paragraph"});const bfe=Array(6).fill(0).map((t,e)=>e+1);function xfe(t){return t.textContent.toLowerCase().trim().replace(/\s+/g,"-")}const o4=er(xfe,"headingIdGenerator");se(o4,{displayName:"Ctx<HeadingIdGenerator>",group:"Heading"});const bS=ho("heading");se(bS,{displayName:"Attr<heading>",group:"Heading"});const Dn=$r("heading",t=>{const e=t.get(o4.key);return{content:"inline*",group:"block",defining:!0,attrs:{id:{default:"",validate:"string"},level:{default:1,validate:"number"}},parseDOM:bfe.map(r=>({tag:`h${r}`,getAttrs:n=>{if(!(n instanceof HTMLElement))throw co(n);return{level:r,id:n.id}}})),toDOM:r=>[`h${r.attrs.level}`,{...t.get(bS.key)(r),id:r.attrs.id||e(r)},0],parseMarkdown:{match:({type:r})=>r==="heading",runner:(r,n,i)=>{const s=n.depth;r.openNode(i,{level:s}),r.next(n.children),r.closeNode()}},toMarkdown:{match:r=>r.type.name==="heading",runner:(r,n)=>{r.openNode("heading",void 0,{depth:n.attrs.level}),zF(r,n),r.closeNode()}}}});se(Dn.node,{displayName:"NodeSchema<heading>",group:"Heading"});se(Dn.ctx,{displayName:"NodeSchemaCtx<heading>",group:"Heading"});const KF=Wn(t=>O7(/^(?<hashes>#+)\s$/,Dn.type(t),e=>{var o,a;const r=((a=(o=e.groups)==null?void 0:o.hashes)==null?void 0:a.length)||0,n=t.get(fr),{$from:i}=n.state.selection,s=i.node();if(s.type.name==="heading"){let l=Number(s.attrs.level)+Number(r);return l>6&&(l=6),{level:l}}return{level:r}}));se(KF,{displayName:"InputRule<wrapInHeadingInputRule>",group:"Heading"});const qs=bt("WrapInHeading",t=>e=>(e??(e=1),e<1?jm(uo.type(t)):jm(Dn.type(t),{level:e})));se(qs,{displayName:"Command<wrapInHeadingCommand>",group:"Heading"});const xS=bt("DowngradeHeading",t=>()=>(e,r,n)=>{const{$from:i}=e.selection,s=i.node();if(s.type!==Dn.type(t)||!e.selection.empty||i.parentOffset!==0)return!1;const o=s.attrs.level-1;return o?(r==null||r(e.tr.setNodeMarkup(e.selection.$from.before(),void 0,{...s.attrs,level:o})),!0):jm(uo.type(t))(e,r,n)});se(xS,{displayName:"Command<downgradeHeadingCommand>",group:"Heading"});const vS=Pi("headingKeymap",{TurnIntoH1:{shortcuts:"Mod-Alt-1",command:t=>{const e=t.get(De);return()=>e.call(qs.key,1)}},TurnIntoH2:{shortcuts:"Mod-Alt-2",command:t=>{const e=t.get(De);return()=>e.call(qs.key,2)}},TurnIntoH3:{shortcuts:"Mod-Alt-3",command:t=>{const e=t.get(De);return()=>e.call(qs.key,3)}},TurnIntoH4:{shortcuts:"Mod-Alt-4",command:t=>{const e=t.get(De);return()=>e.call(qs.key,4)}},TurnIntoH5:{shortcuts:"Mod-Alt-5",command:t=>{const e=t.get(De);return()=>e.call(qs.key,5)}},TurnIntoH6:{shortcuts:"Mod-Alt-6",command:t=>{const e=t.get(De);return()=>e.call(qs.key,6)}},DowngradeHeading:{shortcuts:["Delete","Backspace"],command:t=>{const e=t.get(De);return()=>e.call(xS.key)}}});se(vS.ctx,{displayName:"KeymapCtx<heading>",group:"Heading"});se(vS.shortcuts,{displayName:"Keymap<heading>",group:"Heading"});const wS=ho("blockquote");se(wS,{displayName:"Attr<blockquote>",group:"Blockquote"});const wu=$r("blockquote",t=>({content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:e=>["blockquote",t.get(wS.key)(e),0],parseMarkdown:{match:({type:e})=>e==="blockquote",runner:(e,r,n)=>{e.openNode(n).next(r.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="blockquote",runner:(e,r)=>{e.openNode("blockquote").next(r.content).closeNode()}}}));se(wu.node,{displayName:"NodeSchema<blockquote>",group:"Blockquote"});se(wu.ctx,{displayName:"NodeSchemaCtx<blockquote>",group:"Blockquote"});const YF=Wn(t=>L7(/^\s*>\s$/,wu.type(t)));se(YF,{displayName:"InputRule<wrapInBlockquoteInputRule>",group:"Blockquote"});const a4=bt("WrapInBlockquote",t=>()=>W7(wu.type(t)));se(a4,{displayName:"Command<wrapInBlockquoteCommand>",group:"Blockquote"});const kS=Pi("blockquoteKeymap",{WrapInBlockquote:{shortcuts:"Mod-Shift-b",command:t=>{const e=t.get(De);return()=>e.call(a4.key)}}});se(kS.ctx,{displayName:"KeymapCtx<blockquote>",group:"Blockquote"});se(kS.shortcuts,{displayName:"Keymap<blockquote>",group:"Blockquote"});const CS=ho("codeBlock",()=>({pre:{},code:{}}));se(CS,{displayName:"Attr<codeBlock>",group:"CodeBlock"});const ao=$r("code_block",t=>({content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:"",validate:"string"}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>{if(!(e instanceof HTMLElement))throw co(e);return{language:e.dataset.language}}}],toDOM:e=>{const r=t.get(CS.key)(e),n=e.attrs.language,i=n&&n.length>0?{"data-language":n}:void 0;return["pre",{...r.pre,...i},["code",r.code,0]]},parseMarkdown:{match:({type:e})=>e==="code",runner:(e,r,n)=>{const i=r.lang??"",s=r.value;e.openNode(n,{language:i}),s&&e.addText(s),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="code_block",runner:(e,r)=>{var n;e.addNode("code",void 0,((n=r.content.firstChild)==null?void 0:n.text)||"",{lang:r.attrs.language})}}}));se(ao.node,{displayName:"NodeSchema<codeBlock>",group:"CodeBlock"});se(ao.ctx,{displayName:"NodeSchemaCtx<codeBlock>",group:"CodeBlock"});const XF=Wn(t=>O7(/^```(?<language>[a-z]*)?[\s\n]$/,ao.type(t),e=>{var r;return{language:((r=e.groups)==null?void 0:r.language)??""}}));se(XF,{displayName:"InputRule<createCodeBlockInputRule>",group:"CodeBlock"});const l4=bt("CreateCodeBlock",t=>(e="")=>jm(ao.type(t),{language:e}));se(l4,{displayName:"Command<createCodeBlockCommand>",group:"CodeBlock"});const vfe=bt("UpdateCodeBlockLanguage",()=>({pos:t,language:e}={pos:-1,language:""})=>(r,n)=>t>=0?(n==null||n(r.tr.setNodeAttribute(t,"language",e)),!0):!1);se(vfe,{displayName:"Command<updateCodeBlockLanguageCommand>",group:"CodeBlock"});const SS=Pi("codeBlockKeymap",{CreateCodeBlock:{shortcuts:"Mod-Alt-c",command:t=>{const e=t.get(De);return()=>e.call(l4.key)}}});se(SS.ctx,{displayName:"KeymapCtx<codeBlock>",group:"CodeBlock"});se(SS.shortcuts,{displayName:"Keymap<codeBlock>",group:"CodeBlock"});const TS=ho("image");se(TS,{displayName:"Attr<image>",group:"Image"});const ku=$r("image",t=>({inline:!0,group:"inline",selectable:!0,draggable:!0,marks:"",atom:!0,defining:!0,isolating:!0,attrs:{src:{default:"",validate:"string"},alt:{default:"",validate:"string"},title:{default:"",validate:"string"}},parseDOM:[{tag:"img[src]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw co(e);return{src:e.getAttribute("src")||"",alt:e.getAttribute("alt")||"",title:e.getAttribute("title")||e.getAttribute("alt")||""}}}],toDOM:e=>["img",{...t.get(TS.key)(e),...e.attrs}],parseMarkdown:{match:({type:e})=>e==="image",runner:(e,r,n)=>{const i=r.url,s=r.alt,o=r.title;e.addNode(n,{src:i,alt:s,title:o})}},toMarkdown:{match:e=>e.type.name==="image",runner:(e,r)=>{e.addNode("image",void 0,void 0,{title:r.attrs.title,url:r.attrs.src,alt:r.attrs.alt})}}}));se(ku.node,{displayName:"NodeSchema<image>",group:"Image"});se(ku.ctx,{displayName:"NodeSchemaCtx<image>",group:"Image"});const JF=bt("InsertImage",t=>(e={})=>(r,n)=>{if(!n)return!0;const{src:i="",alt:s="",title:o=""}=e,a=ku.type(t).create({src:i,alt:s,title:o});return a&&n(r.tr.replaceSelectionWith(a).scrollIntoView()),!0});se(JF,{displayName:"Command<insertImageCommand>",group:"Image"});const ZF=bt("UpdateImage",t=>(e={})=>(r,n)=>{const i=wse(r.selection,ku.type(t));if(!i)return!1;const{node:s,pos:o}=i,a={...s.attrs},{src:l,alt:c,title:h}=e;return l!==void 0&&(a.src=l),c!==void 0&&(a.alt=c),h!==void 0&&(a.title=h),n==null||n(r.tr.setNodeMarkup(o,void 0,a).scrollIntoView()),!0});se(ZF,{displayName:"Command<updateImageCommand>",group:"Image"});const wfe=Wn(t=>new Ii(/!\[(?<alt>.*?)]\((?<filename>.*?)\s*(?="|\))"?(?<title>[^"]+)?"?\)/,(e,r,n,i)=>{const[s,o,a="",l]=r;return s?e.tr.replaceWith(n,i,ku.type(t).create({src:a,alt:o,title:l})):null}));se(wfe,{displayName:"InputRule<insertImageInputRule>",group:"Image"});const ax=ho("hardbreak",t=>({"data-type":"hardbreak","data-is-inline":t.attrs.isInline}));se(ax,{displayName:"Attr<hardbreak>",group:"Hardbreak"});const zh=$r("hardbreak",t=>({inline:!0,group:"inline",attrs:{isInline:{default:!1,validate:"boolean"}},selectable:!1,parseDOM:[{tag:"br"},{tag:'span[data-type="hardbreak"]',getAttrs:()=>({isInline:!0})}],toDOM:e=>e.attrs.isInline?["span",t.get(ax.key)(e)," "]:["br",t.get(ax.key)(e)],parseMarkdown:{match:({type:e})=>e==="break",runner:(e,r,n)=>{var i;e.addNode(n,{isInline:!!((i=r.data)!=null&&i.isInline)})}},leafText:()=>`
`,toMarkdown:{match:e=>e.type.name==="hardbreak",runner:(e,r)=>{r.attrs.isInline?e.addNode("text",void 0,`
`):e.addNode("break")}}}));se(zh.node,{displayName:"NodeSchema<hardbreak>",group:"Hardbreak"});se(zh.ctx,{displayName:"NodeSchemaCtx<hardbreak>",group:"Hardbreak"});const _S=bt("InsertHardbreak",t=>()=>(e,r)=>{var s;const{selection:n,tr:i}=e;if(!(n instanceof Ge))return!1;if(n.empty){const o=n.$from.node();if(o.childCount>0&&((s=o.lastChild)==null?void 0:s.type.name)==="hardbreak")return r==null||r(i.replaceRangeWith(n.to-1,n.to,e.schema.node("paragraph")).setSelection(wt.near(i.doc.resolve(n.to))).scrollIntoView()),!0}return r==null||r(i.setMeta("hardbreak",!0).replaceSelectionWith(zh.type(t).create()).scrollIntoView()),!0});se(_S,{displayName:"Command<insertHardbreakCommand>",group:"Hardbreak"});const MS=Pi("hardbreakKeymap",{InsertHardbreak:{shortcuts:"Shift-Enter",command:t=>{const e=t.get(De);return()=>e.call(_S.key)}}});se(MS.ctx,{displayName:"KeymapCtx<hardbreak>",group:"Hardbreak"});se(MS.shortcuts,{displayName:"Keymap<hardbreak>",group:"Hardbreak"});const AS=ho("hr");se(AS,{displayName:"Attr<hr>",group:"Hr"});const jd=$r("hr",t=>({group:"block",parseDOM:[{tag:"hr"}],toDOM:e=>["hr",t.get(AS.key)(e)],parseMarkdown:{match:({type:e})=>e==="thematicBreak",runner:(e,r,n)=>{e.addNode(n)}},toMarkdown:{match:e=>e.type.name==="hr",runner:e=>{e.addNode("thematicBreak")}}}));se(jd.node,{displayName:"NodeSchema<hr>",group:"Hr"});se(jd.ctx,{displayName:"NodeSchemaCtx<hr>",group:"Hr"});const QF=Wn(t=>new Ii(/^(?:---|___\s|\*\*\*\s)$/,(e,r,n,i)=>{const{tr:s}=e;return r[0]&&s.replaceWith(n-1,i,jd.type(t).create()),s}));se(QF,{displayName:"InputRule<insertHrInputRule>",group:"Hr"});const e$=bt("InsertHr",t=>()=>(e,r)=>{if(!r)return!0;const n=uo.node.type(t).create(),{tr:i,selection:s}=e,{from:o}=s,a=jd.type(t).create();if(!a)return!0;const l=i.replaceSelectionWith(a).insert(o,n),c=wt.findFrom(l.doc.resolve(o),1,!0);return c&&r(l.setSelection(c).scrollIntoView()),!0});se(e$,{displayName:"Command<insertHrCommand>",group:"Hr"});const ES=ho("bulletList");se(ES,{displayName:"Attr<bulletList>",group:"BulletList"});const Cu=$r("bullet_list",t=>({content:"listItem+",group:"block",attrs:{spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ul",getAttrs:e=>{if(!(e instanceof HTMLElement))throw co(e);return{spread:e.dataset.spread==="true"}}}],toDOM:e=>["ul",{...t.get(ES.key)(e),"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:r})=>e==="list"&&!r,runner:(e,r,n)=>{const i=r.spread!=null?`${r.spread}`:"false";e.openNode(n,{spread:i}).next(r.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="bullet_list",runner:(e,r)=>{e.openNode("list",void 0,{ordered:!1,spread:r.attrs.spread}).next(r.content).closeNode()}}}));se(Cu.node,{displayName:"NodeSchema<bulletList>",group:"BulletList"});se(Cu.ctx,{displayName:"NodeSchemaCtx<bulletList>",group:"BulletList"});const t$=Wn(t=>L7(/^\s*([-+*])\s$/,Cu.type(t)));se(t$,{displayName:"InputRule<wrapInBulletListInputRule>",group:"BulletList"});const LS=bt("WrapInBulletList",t=>()=>W7(Cu.type(t)));se(LS,{displayName:"Command<wrapInBulletListCommand>",group:"BulletList"});const OS=Pi("bulletListKeymap",{WrapInBulletList:{shortcuts:"Mod-Alt-8",command:t=>{const e=t.get(De);return()=>e.call(LS.key)}}});se(OS.ctx,{displayName:"KeymapCtx<bulletListKeymap>",group:"BulletList"});se(OS.shortcuts,{displayName:"Keymap<bulletListKeymap>",group:"BulletList"});const DS=ho("orderedList");se(DS,{displayName:"Attr<orderedList>",group:"OrderedList"});const Su=$r("ordered_list",t=>({content:"listItem+",group:"block",attrs:{order:{default:1,validate:"number"},spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ol",getAttrs:e=>{if(!(e instanceof HTMLElement))throw co(e);return{spread:e.dataset.spread,order:e.hasAttribute("start")?Number(e.getAttribute("start")):1}}}],toDOM:e=>["ol",{...t.get(DS.key)(e),...e.attrs.order===1?{}:e.attrs.order,"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:r})=>e==="list"&&!!r,runner:(e,r,n)=>{const i=r.spread!=null?`${r.spread}`:"true";e.openNode(n,{spread:i}).next(r.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="ordered_list",runner:(e,r)=>{e.openNode("list",void 0,{ordered:!0,start:1,spread:r.attrs.spread==="true"}),e.next(r.content),e.closeNode()}}}));se(Su.node,{displayName:"NodeSchema<orderedList>",group:"OrderedList"});se(Su.ctx,{displayName:"NodeSchemaCtx<orderedList>",group:"OrderedList"});const r$=Wn(t=>L7(/^\s*(\d+)\.\s$/,Su.type(t),e=>({order:Number(e[1])}),(e,r)=>r.childCount+r.attrs.order===Number(e[1])));se(r$,{displayName:"InputRule<wrapInOrderedListInputRule>",group:"OrderedList"});const IS=bt("WrapInOrderedList",t=>()=>W7(Su.type(t)));se(IS,{displayName:"Command<wrapInOrderedListCommand>",group:"OrderedList"});const BS=Pi("orderedListKeymap",{WrapInOrderedList:{shortcuts:"Mod-Alt-7",command:t=>{const e=t.get(De);return()=>e.call(IS.key)}}});se(BS.ctx,{displayName:"KeymapCtx<orderedList>",group:"OrderedList"});se(BS.shortcuts,{displayName:"Keymap<orderedList>",group:"OrderedList"});const RS=ho("listItem");se(RS,{displayName:"Attr<listItem>",group:"ListItem"});const fo=$r("list_item",t=>({group:"listItem",content:"paragraph block*",attrs:{label:{default:"",validate:"string"},listType:{default:"bullet",validate:"string"},spread:{default:!0,validate:"boolean"}},defining:!0,parseDOM:[{tag:"li",getAttrs:e=>{if(!(e instanceof HTMLElement))throw co(e);return{label:e.dataset.label,listType:e.dataset.listType,spread:e.dataset.spread==="true"}}}],toDOM:e=>["li",{...t.get(RS.key)(e),"data-label":e.attrs.label,"data-list-type":e.attrs.listType,"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e})=>e==="listItem",runner:(e,r,n)=>{const i=r.label!=null?`${r.label}.`:"",s=r.label!=null?"ordered":"bullet",o=r.spread!=null?`${r.spread}`:"true";e.openNode(n,{label:i,listType:s,spread:o}),e.next(r.children),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="list_item",runner:(e,r)=>{e.openNode("listItem",void 0,{spread:r.attrs.spread}),e.next(r.content),e.closeNode()}}}));se(fo.node,{displayName:"NodeSchema<listItem>",group:"ListItem"});se(fo.ctx,{displayName:"NodeSchemaCtx<listItem>",group:"ListItem"});const PS=bt("SinkListItem",t=>()=>dfe(fo.type(t)));se(PS,{displayName:"Command<sinkListItemCommand>",group:"ListItem"});const NS=bt("LiftListItem",t=>()=>hfe(fo.type(t)));se(NS,{displayName:"Command<liftListItemCommand>",group:"ListItem"});const FS=bt("SplitListItem",t=>()=>cfe(fo.type(t)));se(FS,{displayName:"Command<splitListItemCommand>",group:"ListItem"});function kfe(t){return(e,r,n)=>{const{selection:i}=e;if(!(i instanceof Ge))return!1;const{empty:s,$from:o}=i;return!s||o.parentOffset!==0||o.node(-1).type!==fo.type(t)?!1:TN(e,r,n)}}const $S=bt("LiftFirstListItem",t=>()=>kfe(t));se($S,{displayName:"Command<liftFirstListItemCommand>",group:"ListItem"});const zS=Pi("listItemKeymap",{NextListItem:{shortcuts:"Enter",command:t=>{const e=t.get(De);return()=>e.call(FS.key)}},SinkListItem:{shortcuts:["Tab","Mod-]"],command:t=>{const e=t.get(De);return()=>e.call(PS.key)}},LiftListItem:{shortcuts:["Shift-Tab","Mod-["],command:t=>{const e=t.get(De);return()=>e.call(NS.key)}},LiftFirstListItem:{shortcuts:["Backspace","Delete"],command:t=>{const e=t.get(De);return()=>e.call($S.key)}}});se(zS.ctx,{displayName:"KeymapCtx<listItem>",group:"ListItem"});se(zS.shortcuts,{displayName:"Keymap<listItem>",group:"ListItem"});const n$=nS("text",()=>({group:"inline",parseMarkdown:{match:({type:t})=>t==="text",runner:(t,e)=>{t.addText(e.value)}},toMarkdown:{match:t=>t.type.name==="text",runner:(t,e)=>{t.addNode("text",void 0,e.text)}}}));se(n$,{displayName:"NodeSchema<text>",group:"Text"});const HS=ho("html");se(HS,{displayName:"Attr<html>",group:"Html"});const qS=$r("html",t=>({atom:!0,group:"inline",inline:!0,attrs:{value:{default:"",validate:"string"}},toDOM:e=>{const r=document.createElement("span"),n={...t.get(HS.key)(e),"data-value":e.attrs.value,"data-type":"html"};return r.textContent=e.attrs.value,["span",n,e.attrs.value]},parseDOM:[{tag:'span[data-type="html"]',getAttrs:e=>({value:e.dataset.value??""})}],parseMarkdown:{match:({type:e})=>e==="html",runner:(e,r,n)=>{e.addNode(n,{value:r.value})}},toMarkdown:{match:e=>e.type.name==="html",runner:(e,r)=>{e.addNode("html",void 0,r.attrs.value)}}}));se(qS.node,{displayName:"NodeSchema<html>",group:"Html"});se(qS.ctx,{displayName:"NodeSchemaCtx<html>",group:"Html"});const Cfe=[GF,mS,uo,o4,bS,Dn,ax,zh,wS,wu,CS,ao,AS,jd,TS,ku,ES,Cu,DS,Su,RS,fo,lS,vu,hS,Wd,fS,qa,pS,Xs,HS,qS,n$].flat(),Sfe=[YF,t$,r$,XF,QF,KF].flat(),Tfe=[HF,qF,WF,VF],ju=bt("IsMarkSelected",()=>t=>e=>{if(!t)return!1;const{doc:r,selection:n}=e;return r.rangeHasMark(n.from,n.to,t)}),ah=bt("IsNoteSelected",()=>t=>e=>t?zP(e,t).hasNode:!1),fn=bt("ClearTextInCurrentBlock",()=>()=>(t,e)=>{let r=t.tr;const{$from:n,$to:i}=r.selection,{pos:s}=n,{pos:o}=i,a=s-n.node().content.size;return a<0?!1:(r=r.deleteRange(a,o),e==null||e(r),!0)}),va=bt("SetBlockType",()=>t=>(e,r)=>{const{nodeType:n,attrs:i=null}=t??{};if(!n)return!1;const s=e.tr,{from:o,to:a}=s.selection;try{s.setBlockType(o,a,n,i)}catch{return!1}return r==null||r(s),!0}),op=bt("WrapInBlockType",()=>t=>(e,r)=>{const{nodeType:n,attrs:i=null}=t??{};if(!n)return!1;let s=e.tr;try{const{$from:o,$to:a}=s.selection,l=o.blockRange(a),c=l&&A7(l,n,i);if(!c)return!1;s=s.wrap(l,c)}catch{return!1}return r==null||r(s),!0}),ap=bt("AddBlockType",()=>t=>(e,r)=>{const{nodeType:n,attrs:i=null}=t??{};if(!n)return!1;const s=e.tr;try{const o=n instanceof Ua?n:n.createAndFill(i);if(!o)return!1;s.replaceSelectionWith(o)}catch{return!1}return r==null||r(s),!0}),i$=bt("SelectTextNearPos",()=>t=>(e,r)=>{const{pos:n}=t??{};if(n==null)return!1;const i=(o,a,l)=>Math.min(Math.max(o,a),l),s=e.tr;try{const o=e.doc.resolve(i(n,0,e.doc.content.size));s.setSelection(Ge.near(o))}catch{return!1}return r==null||r(s.scrollIntoView()),!0}),_fe=[gS,a4,qs,xS,l4,_S,e$,JF,ZF,IS,LS,PS,FS,NS,$S,r4,i4,n4,jF,UF,ju,ah,fn,va,op,ap,i$],Mfe=[kS,SS,MS,vS,zS,BS,OS,yS,cS,dS,uS].flat(),VS=ia("remarkAddOrderInList",()=>()=>t=>{_c(t,"list",e=>{if(e.ordered){const r=e.start??1;e.children.forEach((n,i)=>{n.label=i+r})}})});se(VS.plugin,{displayName:"Remark<remarkAddOrderInListPlugin>",group:"Remark"});se(VS.options,{displayName:"RemarkConfig<remarkAddOrderInListPlugin>",group:"Remark"});const WS=ia("remarkLineBreak",()=>()=>t=>{const e=/[\t ]*(?:\r?\n|\r)/g;_c(t,"text",(r,n,i)=>{if(!r.value||typeof r.value!="string")return;const s=[];let o=0;e.lastIndex=0;let a=e.exec(r.value);for(;a;){const c=a.index;o!==c&&s.push({type:"text",value:r.value.slice(o,c)}),s.push({type:"break",data:{isInline:!0}}),o=c+a[0].length,a=e.exec(r.value)}if(s.length>0&&i&&typeof n=="number")return o<r.value.length&&s.push({type:"text",value:r.value.slice(o)}),i.children.splice(n,1,...s),n+s.length})});se(WS.plugin,{displayName:"Remark<remarkLineBreak>",group:"Remark"});se(WS.options,{displayName:"RemarkConfig<remarkLineBreak>",group:"Remark"});const jS=ia("remarkInlineLink",()=>mfe);se(jS.plugin,{displayName:"Remark<remarkInlineLinkPlugin>",group:"Remark"});se(jS.options,{displayName:"RemarkConfig<remarkInlineLinkPlugin>",group:"Remark"});const Afe=t=>!!t.children,Efe=t=>t.type==="html";function Lfe(t,e){return r(t,0,null)[0];function r(n,i,s){if(Afe(n)){const o=[];for(let a=0,l=n.children.length;a<l;a++){const c=n.children[a];if(c){const h=r(c,a,n);if(h)for(let u=0,f=h.length;u<f;u++){const d=h[u];d&&o.push(d)}}}n.children=o}return e(n,i,s)}}const Ofe=["root","blockquote","listItem"],US=ia("remarkHTMLTransformer",()=>()=>t=>{Lfe(t,(e,r,n)=>Efe(e)?(n&&Ofe.includes(n.type)&&(e.children=[{...e}],delete e.value,e.type="paragraph"),[e]):[e])});se(US.plugin,{displayName:"Remark<remarkHtmlTransformer>",group:"Remark"});se(US.options,{displayName:"RemarkConfig<remarkHtmlTransformer>",group:"Remark"});const GS=ia("remarkMarker",()=>()=>(t,e)=>{const r=n=>e.value.charAt(n.position.start.offset);_c(t,n=>["strong","emphasis"].includes(n.type),n=>{n.marker=r(n)})});se(GS.plugin,{displayName:"Remark<remarkMarker>",group:"Remark"});se(GS.options,{displayName:"RemarkConfig<remarkMarker>",group:"Remark"});const s$=Gr(()=>{let t=!1;const e=new vr("MILKDOWN_INLINE_NODES_CURSOR"),r=new xr({key:e,state:{init(){return!1},apply(n){if(!n.selection.empty)return!1;const i=n.selection.$from,s=i.nodeBefore,o=i.nodeAfter;return!!(s&&o&&s.isInline&&!s.isText&&o.isInline&&!o.isText)}},props:{handleDOMEvents:{compositionend:(n,i)=>t?(t=!1,requestAnimationFrame(()=>{if(r.getState(n.state)){const o=n.state.selection.from;i.preventDefault(),n.dispatch(n.state.tr.insertText(i.data||"",o))}}),!0):!1,compositionstart:n=>(r.getState(n.state)&&(t=!0),!1),beforeinput:(n,i)=>{if(r.getState(n.state)&&i instanceof InputEvent&&i.data&&!t){const o=n.state.selection.from;return i.preventDefault(),n.dispatch(n.state.tr.insertText(i.data||"",o)),!0}return!1}},decorations(n){if(r.getState(n)){const o=n.selection.$from.pos,a=document.createElement("span"),l=jr.widget(o,a,{side:-1}),c=document.createElement("span"),h=jr.widget(o,c);return setTimeout(()=>{a.contentEditable="true",c.contentEditable="true"}),or.create(n.doc,[l,h])}return or.empty}}});return r});se(s$,{displayName:"Prose<inlineNodesCursorPlugin>",group:"Prose"});const o$=Gr(t=>new xr({key:new vr("MILKDOWN_HARDBREAK_MARKS"),appendTransaction:(e,r,n)=>{if(!e.length)return;const[i]=e;if(!i)return;const[s]=i.steps;if(i.getMeta("hardbreak")){if(!(s instanceof sn))return;const{from:l}=s;return n.tr.setNodeMarkup(l,zh.type(t),void 0,[])}if(s instanceof za){let l=n.tr;const{from:c,to:h}=s;return n.doc.nodesBetween(c,h,(u,f)=>{u.type===zh.type(t)&&(l=l.setNodeMarkup(f,zh.type(t),void 0,[]))}),l}}}));se(o$,{displayName:"Prose<hardbreakClearMarkPlugin>",group:"Prose"});const KS=er(["table","code_block"],"hardbreakFilterNodes");se(KS,{displayName:"Ctx<hardbreakFilterNodes>",group:"Prose"});const a$=Gr(t=>{const e=t.get(KS.key);return new xr({key:new vr("MILKDOWN_HARDBREAK_FILTER"),filterTransaction:(r,n)=>{const i=r.getMeta("hardbreak"),[s]=r.steps;if(i&&s){const{from:o}=s,a=n.doc.resolve(o);let l=a.depth,c=!0;for(;l>0;)e.includes(a.node(l).type.name)&&(c=!1),l--;return c}return!0}})});se(a$,{displayName:"Prose<hardbreakFilterPlugin>",group:"Prose"});const l$=Gr(t=>{const e=new vr("MILKDOWN_HEADING_ID"),r=n=>{if(n.composing)return;const i=t.get(o4.key),s=n.state.tr.setMeta("addToHistory",!1);let o=!1;const a={};n.state.doc.descendants((l,c)=>{if(l.type===Dn.type(t)){if(l.textContent.trim().length===0)return;const h=l.attrs;let u=i(l);a[u]?(a[u]+=1,u+=`-#${a[u]}`):a[u]=1,h.id!==u&&(o=!0,s.setMeta(e,!0).setNodeMarkup(c,void 0,{...h,id:u}))}}),o&&n.dispatch(s)};return new xr({key:e,view:n=>(r(n),{update:(i,s)=>{i.state.doc.eq(s.doc)||r(i)}})})});se(l$,{displayName:"Prose<syncHeadingIdPlugin>",group:"Prose"});const c$=Gr(t=>{const e=(r,n,i)=>{if(!i.selection||r.some(u=>u.getMeta("addToHistory")===!1||!u.isGeneric))return null;const s=Su.type(t),o=Cu.type(t),a=fo.type(t),l=(u,f)=>{let d=!1;const p=`${f+1}.`;return u.label!==p&&(u.label=p,d=!0),d};let c=i.tr,h=!1;return i.doc.descendants((u,f,d,p)=>{if(u.type===o){const m=u.maybeChild(0);(m==null?void 0:m.type)===a&&m.attrs.listType==="ordered"&&(h=!0,c.setNodeMarkup(f,s,{spread:"true"}),u.descendants((g,y,b,x)=>{if(g.type===a){const T={...g.attrs};l(T,x)&&(c=c.setNodeMarkup(y,void 0,T))}return!1}))}else if(u.type===a&&(d==null?void 0:d.type)===s){const m={...u.attrs};let g=!1;m.listType!=="ordered"&&(m.listType="ordered",g=!0),(d==null?void 0:d.maybeChild(0))&&(g=l(m,p)),g&&(c=c.setNodeMarkup(f,void 0,m),h=!0)}}),h?c.setMeta("addToHistory",!1):null};return new xr({key:new vr("MILKDOWN_KEEP_LIST_ORDER"),appendTransaction:e})});se(c$,{displayName:"Prose<syncListOrderPlugin>",group:"Prose"});const Dfe=[o$,KS,a$,s$,VS,jS,WS,US,GS,s4,l$,c$].flat(),Ife=[Cfe,Sfe,Tfe,_fe,Mfe,Dfe].flat();/**
* @vue/shared v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function YS(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const ur={},sm=[],Js=()=>{},h$=()=>!1,c4=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),XS=t=>t.startsWith("onUpdate:"),qn=Object.assign,JS=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},Bfe=Object.prototype.hasOwnProperty,Yt=(t,e)=>Bfe.call(t,e),At=Array.isArray,om=t=>h4(t)==="[object Map]",Rfe=t=>h4(t)==="[object Set]",_t=t=>typeof t=="function",ln=t=>typeof t=="string",Ud=t=>typeof t=="symbol",Br=t=>t!==null&&typeof t=="object",u$=t=>(Br(t)||_t(t))&&_t(t.then)&&_t(t.catch),Pfe=Object.prototype.toString,h4=t=>Pfe.call(t),Nfe=t=>h4(t).slice(8,-1),Ffe=t=>h4(t)==="[object Object]",ZS=t=>ln(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,am=YS(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),u4=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},$fe=/-\w/g,dc=u4(t=>t.replace($fe,e=>e.slice(1).toUpperCase())),zfe=/\B([A-Z])/g,Tu=u4(t=>t.replace(zfe,"-$1").toLowerCase()),f$=u4(t=>t.charAt(0).toUpperCase()+t.slice(1)),v5=u4(t=>t?`on${f$(t)}`:""),tc=(t,e)=>!Object.is(t,e),w5=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},lx=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},Hfe=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let DE;const Hh=()=>DE||(DE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function QS(t){if(At(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],i=ln(n)?jfe(n):QS(n);if(i)for(const s in i)e[s]=i[s]}return e}else if(ln(t)||Br(t))return t}const qfe=/;(?![^(]*\))/g,Vfe=/:([^]+)/,Wfe=/\/\*[^]*?\*\//g;function jfe(t){const e={};return t.replace(Wfe,"").split(qfe).forEach(r=>{if(r){const n=r.split(Vfe);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function e8(t){let e="";if(ln(t))e=t;else if(At(t))for(let r=0;r<t.length;r++){const n=e8(t[r]);n&&(e+=n+" ")}else if(Br(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const Ufe="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Gfe=YS(Ufe);function d$(t){return!!t||t===""}/**
* @vue/reactivity v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vi;class Kfe{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=vi,!e&&vi&&(this.index=(vi.scopes||(vi.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=vi;try{return vi=this,e()}finally{vi=r}}}on(){++this._on===1&&(this.prevScope=vi,vi=this)}off(){this._on>0&&--this._on===0&&(vi=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Yfe(){return vi}let hr;const k5=new WeakSet;class p${constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,vi&&vi.active&&vi.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,k5.has(this)&&(k5.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||g$(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,IE(this),y$(this);const e=hr,r=Zs;hr=this,Zs=!0;try{return this.fn()}finally{b$(this),hr=e,Zs=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)n8(e);this.deps=this.depsTail=void 0,IE(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?k5.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){dC(this)&&this.run()}get dirty(){return dC(this)}}let m$=0,lm,cm;function g$(t,e=!1){if(t.flags|=8,e){t.next=cm,cm=t;return}t.next=lm,lm=t}function t8(){m$++}function r8(){if(--m$>0)return;if(cm){let e=cm;for(cm=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;lm;){let e=lm;for(lm=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function y$(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function b$(t){let e,r=t.depsTail,n=r;for(;n;){const i=n.prevDep;n.version===-1?(n===r&&(r=i),n8(n),Xfe(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}t.deps=e,t.depsTail=r}function dC(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(x$(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function x$(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===tg)||(t.globalVersion=tg,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!dC(t))))return;t.flags|=2;const e=t.dep,r=hr,n=Zs;hr=t,Zs=!0;try{y$(t);const i=t.fn(t._value);(e.version===0||tc(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{hr=r,Zs=n,b$(t),t.flags&=-3}}function n8(t,e=!1){const{dep:r,prevSub:n,nextSub:i}=t;if(n&&(n.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let s=r.computed.deps;s;s=s.nextDep)n8(s,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function Xfe(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let Zs=!0;const v$=[];function rl(){v$.push(Zs),Zs=!1}function nl(){const t=v$.pop();Zs=t===void 0?!0:t}function IE(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=hr;hr=void 0;try{e()}finally{hr=r}}}let tg=0;class Jfe{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class i8{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!hr||!Zs||hr===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==hr)r=this.activeLink=new Jfe(hr,this),hr.deps?(r.prevDep=hr.depsTail,hr.depsTail.nextDep=r,hr.depsTail=r):hr.deps=hr.depsTail=r,w$(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=hr.depsTail,r.nextDep=void 0,hr.depsTail.nextDep=r,hr.depsTail=r,hr.deps===r&&(hr.deps=n)}return r}trigger(e){this.version++,tg++,this.notify(e)}notify(e){t8();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{r8()}}}function w$(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)w$(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const pC=new WeakMap,qh=Symbol(""),mC=Symbol(""),rg=Symbol("");function In(t,e,r){if(Zs&&hr){let n=pC.get(t);n||pC.set(t,n=new Map);let i=n.get(r);i||(n.set(r,i=new i8),i.map=n,i.key=r),i.track()}}function Fa(t,e,r,n,i,s){const o=pC.get(t);if(!o){tg++;return}const a=l=>{l&&l.trigger()};if(t8(),e==="clear")o.forEach(a);else{const l=At(t),c=l&&ZS(r);if(l&&r==="length"){const h=Number(n);o.forEach((u,f)=>{(f==="length"||f===rg||!Ud(f)&&f>=h)&&a(u)})}else switch((r!==void 0||o.has(void 0))&&a(o.get(r)),c&&a(o.get(rg)),e){case"add":l?c&&a(o.get("length")):(a(o.get(qh)),om(t)&&a(o.get(mC)));break;case"delete":l||(a(o.get(qh)),om(t)&&a(o.get(mC)));break;case"set":om(t)&&a(o.get(qh));break}}r8()}function Pu(t){const e=Kt(t);return e===t?e:(In(e,"iterate",rg),Qs(t)?e:e.map(il))}function s8(t){return In(t=Kt(t),"iterate",rg),t}function Il(t,e){return pc(t)?gf(t)?ng(il(e)):ng(e):il(e)}const Zfe={__proto__:null,[Symbol.iterator](){return C5(this,Symbol.iterator,t=>Il(this,t))},concat(...t){return Pu(this).concat(...t.map(e=>At(e)?Pu(e):e))},entries(){return C5(this,"entries",t=>(t[1]=Il(this,t[1]),t))},every(t,e){return pa(this,"every",t,e,void 0,arguments)},filter(t,e){return pa(this,"filter",t,e,r=>r.map(n=>Il(this,n)),arguments)},find(t,e){return pa(this,"find",t,e,r=>Il(this,r),arguments)},findIndex(t,e){return pa(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return pa(this,"findLast",t,e,r=>Il(this,r),arguments)},findLastIndex(t,e){return pa(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return pa(this,"forEach",t,e,void 0,arguments)},includes(...t){return S5(this,"includes",t)},indexOf(...t){return S5(this,"indexOf",t)},join(t){return Pu(this).join(t)},lastIndexOf(...t){return S5(this,"lastIndexOf",t)},map(t,e){return pa(this,"map",t,e,void 0,arguments)},pop(){return M0(this,"pop")},push(...t){return M0(this,"push",t)},reduce(t,...e){return BE(this,"reduce",t,e)},reduceRight(t,...e){return BE(this,"reduceRight",t,e)},shift(){return M0(this,"shift")},some(t,e){return pa(this,"some",t,e,void 0,arguments)},splice(...t){return M0(this,"splice",t)},toReversed(){return Pu(this).toReversed()},toSorted(t){return Pu(this).toSorted(t)},toSpliced(...t){return Pu(this).toSpliced(...t)},unshift(...t){return M0(this,"unshift",t)},values(){return C5(this,"values",t=>Il(this,t))}};function C5(t,e,r){const n=s8(t),i=n[e]();return n!==t&&!Qs(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.done||(s.value=r(s.value)),s}),i}const Qfe=Array.prototype;function pa(t,e,r,n,i,s){const o=s8(t),a=o!==t&&!Qs(t),l=o[e];if(l!==Qfe[e]){const u=l.apply(t,s);return a?il(u):u}let c=r;o!==t&&(a?c=function(u,f){return r.call(this,Il(t,u),f,t)}:r.length>2&&(c=function(u,f){return r.call(this,u,f,t)}));const h=l.call(o,c,n);return a&&i?i(h):h}function BE(t,e,r,n){const i=s8(t);let s=r;return i!==t&&(Qs(t)?r.length>3&&(s=function(o,a,l){return r.call(this,o,a,l,t)}):s=function(o,a,l){return r.call(this,o,Il(t,a),l,t)}),i[e](s,...n)}function S5(t,e,r){const n=Kt(t);In(n,"iterate",rg);const i=n[e](...r);return(i===-1||i===!1)&&c8(r[0])?(r[0]=Kt(r[0]),n[e](...r)):i}function M0(t,e,r=[]){rl(),t8();const n=Kt(t)[e].apply(t,r);return r8(),nl(),n}const ede=YS("__proto__,__v_isRef,__isVue"),k$=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ud));function tde(t){Ud(t)||(t=String(t));const e=Kt(this);return In(e,"has",t),e.hasOwnProperty(t)}class C${constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!i;if(r==="__v_isReadonly")return i;if(r==="__v_isShallow")return s;if(r==="__v_raw")return n===(i?s?ude:M$:s?_$:T$).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=At(e);if(!i){let l;if(o&&(l=Zfe[r]))return l;if(r==="hasOwnProperty")return tde}const a=Reflect.get(e,r,Fn(e)?e:n);if((Ud(r)?k$.has(r):ede(r))||(i||In(e,"get",r),s))return a;if(Fn(a)){const l=o&&ZS(r)?a:a.value;return i&&Br(l)?yC(l):l}return Br(a)?i?yC(a):a8(a):a}}class S$ extends C${constructor(e=!1){super(!1,e)}set(e,r,n,i){let s=e[r];const o=At(e)&&ZS(r);if(!this._isShallow){const c=pc(s);if(!Qs(n)&&!pc(n)&&(s=Kt(s),n=Kt(n)),!o&&Fn(s)&&!Fn(n))return c||(s.value=n),!0}const a=o?Number(r)<e.length:Yt(e,r),l=Reflect.set(e,r,n,Fn(e)?e:i);return e===Kt(i)&&(a?tc(n,s)&&Fa(e,"set",r,n):Fa(e,"add",r,n)),l}deleteProperty(e,r){const n=Yt(e,r);e[r];const i=Reflect.deleteProperty(e,r);return i&&n&&Fa(e,"delete",r,void 0),i}has(e,r){const n=Reflect.has(e,r);return(!Ud(r)||!k$.has(r))&&In(e,"has",r),n}ownKeys(e){return In(e,"iterate",At(e)?"length":qh),Reflect.ownKeys(e)}}class rde extends C${constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const nde=new S$,ide=new rde,sde=new S$(!0);const gC=t=>t,Sy=t=>Reflect.getPrototypeOf(t);function ode(t,e,r){return function(...n){const i=this.__v_raw,s=Kt(i),o=om(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...n),h=r?gC:e?ng:il;return!e&&In(s,"iterate",l?mC:qh),{next(){const{value:u,done:f}=c.next();return f?{value:u,done:f}:{value:a?[h(u[0]),h(u[1])]:h(u),done:f}},[Symbol.iterator](){return this}}}}function Ty(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ade(t,e){const r={get(i){const s=this.__v_raw,o=Kt(s),a=Kt(i);t||(tc(i,a)&&In(o,"get",i),In(o,"get",a));const{has:l}=Sy(o),c=e?gC:t?ng:il;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&In(Kt(i),"iterate",qh),i.size},has(i){const s=this.__v_raw,o=Kt(s),a=Kt(i);return t||(tc(i,a)&&In(o,"has",i),In(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=Kt(a),c=e?gC:t?ng:il;return!t&&In(l,"iterate",qh),a.forEach((h,u)=>i.call(s,c(h),c(u),o))}};return qn(r,t?{add:Ty("add"),set:Ty("set"),delete:Ty("delete"),clear:Ty("clear")}:{add(i){!e&&!Qs(i)&&!pc(i)&&(i=Kt(i));const s=Kt(this);return Sy(s).has.call(s,i)||(s.add(i),Fa(s,"add",i,i)),this},set(i,s){!e&&!Qs(s)&&!pc(s)&&(s=Kt(s));const o=Kt(this),{has:a,get:l}=Sy(o);let c=a.call(o,i);c||(i=Kt(i),c=a.call(o,i));const h=l.call(o,i);return o.set(i,s),c?tc(s,h)&&Fa(o,"set",i,s):Fa(o,"add",i,s),this},delete(i){const s=Kt(this),{has:o,get:a}=Sy(s);let l=o.call(s,i);l||(i=Kt(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&Fa(s,"delete",i,void 0),c},clear(){const i=Kt(this),s=i.size!==0,o=i.clear();return s&&Fa(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{r[i]=ode(i,t,e)}),r}function o8(t,e){const r=ade(t,e);return(n,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(Yt(r,i)&&i in n?r:n,i,s)}const lde={get:o8(!1,!1)},cde={get:o8(!1,!0)},hde={get:o8(!0,!1)};const T$=new WeakMap,_$=new WeakMap,M$=new WeakMap,ude=new WeakMap;function fde(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function dde(t){return t.__v_skip||!Object.isExtensible(t)?0:fde(Nfe(t))}function a8(t){return pc(t)?t:l8(t,!1,nde,lde,T$)}function pde(t){return l8(t,!1,sde,cde,_$)}function yC(t){return l8(t,!0,ide,hde,M$)}function l8(t,e,r,n,i){if(!Br(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=dde(t);if(s===0)return t;const o=i.get(t);if(o)return o;const a=new Proxy(t,s===2?n:r);return i.set(t,a),a}function gf(t){return pc(t)?gf(t.__v_raw):!!(t&&t.__v_isReactive)}function pc(t){return!!(t&&t.__v_isReadonly)}function Qs(t){return!!(t&&t.__v_isShallow)}function c8(t){return t?!!t.__v_raw:!1}function Kt(t){const e=t&&t.__v_raw;return e?Kt(e):t}function mde(t){return!Yt(t,"__v_skip")&&Object.isExtensible(t)&&lx(t,"__v_skip",!0),t}const il=t=>Br(t)?a8(t):t,ng=t=>Br(t)?yC(t):t;function Fn(t){return t?t.__v_isRef===!0:!1}function ze(t){return A$(t,!1)}function cx(t){return A$(t,!0)}function A$(t,e){return Fn(t)?t:new gde(t,e)}class gde{constructor(e,r){this.dep=new i8,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:Kt(e),this._value=r?e:il(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||Qs(e)||pc(e);e=n?e:Kt(e),tc(e,r)&&(this._rawValue=e,this._value=n?e:il(e),this.dep.trigger())}}function yde(t){return Fn(t)?t.value:t}const bde={get:(t,e,r)=>e==="__v_raw"?t:yde(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const i=t[e];return Fn(i)&&!Fn(r)?(i.value=r,!0):Reflect.set(t,e,r,n)}};function E$(t){return gf(t)?t:new Proxy(t,bde)}class xde{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new i8(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=tg-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&hr!==this)return g$(this,!0),!0}get value(){const e=this.dep.track();return x$(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function vde(t,e,r=!1){let n,i;return _t(t)?n=t:(n=t.get,i=t.set),new xde(n,i,r)}const _y={},hx=new WeakMap;let Zc;function wde(t,e=!1,r=Zc){if(r){let n=hx.get(r);n||hx.set(r,n=[]),n.push(t)}}function kde(t,e,r=ur){const{immediate:n,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=r,c=T=>i?T:Qs(T)||i===!1||i===0?zl(T,1):zl(T);let h,u,f,d,p=!1,m=!1;if(Fn(t)?(u=()=>t.value,p=Qs(t)):gf(t)?(u=()=>c(t),p=!0):At(t)?(m=!0,p=t.some(T=>gf(T)||Qs(T)),u=()=>t.map(T=>{if(Fn(T))return T.value;if(gf(T))return c(T);if(_t(T))return l?l(T,2):T()})):_t(t)?e?u=l?()=>l(t,2):t:u=()=>{if(f){rl();try{f()}finally{nl()}}const T=Zc;Zc=h;try{return l?l(t,3,[d]):t(d)}finally{Zc=T}}:u=Js,e&&i){const T=u,S=i===!0?1/0:i;u=()=>zl(T(),S)}const g=Yfe(),y=()=>{h.stop(),g&&g.active&&JS(g.effects,h)};if(s&&e){const T=e;e=(...S)=>{T(...S),y()}}let b=m?new Array(t.length).fill(_y):_y;const x=T=>{if(!(!(h.flags&1)||!h.dirty&&!T))if(e){const S=h.run();if(i||p||(m?S.some((w,_)=>tc(w,b[_])):tc(S,b))){f&&f();const w=Zc;Zc=h;try{const _=[S,b===_y?void 0:m&&b[0]===_y?[]:b,d];b=S,l?l(e,3,_):e(..._)}finally{Zc=w}}}else h.run()};return a&&a(x),h=new p$(u),h.scheduler=o?()=>o(x,!1):x,d=T=>wde(T,!1,h),f=h.onStop=()=>{const T=hx.get(h);if(T){if(l)l(T,4);else for(const S of T)S();hx.delete(h)}},e?n?x(!0):b=h.run():o?o(x.bind(null,!0),!0):h.run(),y.pause=h.pause.bind(h),y.resume=h.resume.bind(h),y.stop=y,y}function zl(t,e=1/0,r){if(e<=0||!Br(t)||t.__v_skip||(r=r||new Map,(r.get(t)||0)>=e))return t;if(r.set(t,e),e--,Fn(t))zl(t.value,e,r);else if(At(t))for(let n=0;n<t.length;n++)zl(t[n],e,r);else if(Rfe(t)||om(t))t.forEach(n=>{zl(n,e,r)});else if(Ffe(t)){for(const n in t)zl(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&zl(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function g1(t,e,r,n){try{return n?t(...n):t()}catch(i){f4(i,e,r)}}function Qo(t,e,r,n){if(_t(t)){const i=g1(t,e,r,n);return i&&u$(i)&&i.catch(s=>{f4(s,e,r)}),i}if(At(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Qo(t[s],e,r,n));return i}}function f4(t,e,r,n=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ur;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;a;){const h=a.ec;if(h){for(let u=0;u<h.length;u++)if(h[u](t,l,c)===!1)return}a=a.parent}if(s){rl(),g1(s,null,10,[t,l,c]),nl();return}}Cde(t,r,i,n,o)}function Cde(t,e,r,n=!0,i=!1){if(i)throw t;console.error(t)}const Zn=[];let Lo=-1;const yf=[];let Bl=null,Uu=0;const L$=Promise.resolve();let ux=null;function Sde(t){const e=ux||L$;return t?e.then(this?t.bind(this):t):e}function Tde(t){let e=Lo+1,r=Zn.length;for(;e<r;){const n=e+r>>>1,i=Zn[n],s=ig(i);s<t||s===t&&i.flags&2?e=n+1:r=n}return e}function h8(t){if(!(t.flags&1)){const e=ig(t),r=Zn[Zn.length-1];!r||!(t.flags&2)&&e>=ig(r)?Zn.push(t):Zn.splice(Tde(e),0,t),t.flags|=1,O$()}}function O$(){ux||(ux=L$.then(I$))}function _de(t){At(t)?yf.push(...t):Bl&&t.id===-1?Bl.splice(Uu+1,0,t):t.flags&1||(yf.push(t),t.flags|=1),O$()}function RE(t,e,r=Lo+1){for(;r<Zn.length;r++){const n=Zn[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Zn.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function D$(t){if(yf.length){const e=[...new Set(yf)].sort((r,n)=>ig(r)-ig(n));if(yf.length=0,Bl){Bl.push(...e);return}for(Bl=e,Uu=0;Uu<Bl.length;Uu++){const r=Bl[Uu];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Bl=null,Uu=0}}const ig=t=>t.id==null?t.flags&2?-1:1/0:t.id;function I$(t){try{for(Lo=0;Lo<Zn.length;Lo++){const e=Zn[Lo];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),g1(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Lo<Zn.length;Lo++){const e=Zn[Lo];e&&(e.flags&=-2)}Lo=-1,Zn.length=0,D$(),ux=null,(Zn.length||yf.length)&&I$()}}let No,lp=[],bC=!1;function d4(t,...e){No?No.emit(t,...e):bC||lp.push({event:t,args:e})}function B$(t,e){var r,n;No=t,No?(No.enabled=!0,lp.forEach(({event:i,args:s})=>No.emit(i,...s)),lp=[]):typeof window<"u"&&window.HTMLElement&&!((n=(r=window.navigator)==null?void 0:r.userAgent)!=null&&n.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{B$(s,e)}),setTimeout(()=>{No||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,bC=!0,lp=[])},3e3)):(bC=!0,lp=[])}function Mde(t,e){d4("app:init",t,e,{Fragment:xn,Text:x1,Comment:lu,Static:q2})}function Ade(t){d4("app:unmount",t)}const Ede=u8("component:added"),R$=u8("component:updated"),Lde=u8("component:removed"),Ode=t=>{No&&typeof No.cleanupBuffer=="function"&&!No.cleanupBuffer(t)&&Lde(t)};function u8(t){return e=>{d4(t,e.appContext.app,e.uid,e.parent?e.parent.uid:void 0,e)}}function Dde(t,e,r){d4("component:emit",t.appContext.app,t,e,r)}let Ho=null,P$=null;function fx(t){const e=Ho;return Ho=t,P$=t&&t.type.__scopeId||null,e}function Ide(t,e=Ho,r){if(!e||t._n)return t;const n=(...i)=>{n._d;const s=fx(e);let o;try{o=t(...i)}finally{fx(s),n._d}return __VUE_PROD_DEVTOOLS__&&R$(e),o};return n._n=!0,n._c=!0,n._d=!0,n}function $c(t,e,r,n){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[n];l&&(rl(),Qo(l,r,8,[t.el,a,t,e]),nl())}}const Bde=Symbol("_vte"),Rde=t=>t.__isTeleport,Pde=Symbol("_leaveCb");function f8(t,e){t.shapeFlag&6&&t.component?(t.transition=e,f8(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Sn(t,e){return _t(t)?qn({name:t.name},e,{setup:t}):t}function N$(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const dx=new WeakMap;function hm(t,e,r,n,i=!1){if(At(t)){t.forEach((p,m)=>hm(p,e&&(At(e)?e[m]:e),r,n,i));return}if(um(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&hm(t,e,r,n.component.subTree);return}const s=n.shapeFlag&4?y8(n.component):n.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,h=a.refs===ur?a.refs={}:a.refs,u=a.setupState,f=Kt(u),d=u===ur?h$:p=>Yt(f,p);if(c!=null&&c!==l){if(PE(e),ln(c))h[c]=null,d(c)&&(u[c]=null);else if(Fn(c)){c.value=null;const p=e;p.k&&(h[p.k]=null)}}if(_t(l))g1(l,a,12,[o,h]);else{const p=ln(l),m=Fn(l);if(p||m){const g=()=>{if(t.f){const y=p?d(l)?u[l]:h[l]:l.value;if(i)At(y)&&JS(y,s);else if(At(y))y.includes(s)||y.push(s);else if(p)h[l]=[s],d(l)&&(u[l]=h[l]);else{const b=[s];l.value=b,t.k&&(h[t.k]=b)}}else p?(h[l]=o,d(l)&&(u[l]=o)):m&&(l.value=o,t.k&&(h[t.k]=o))};if(o){const y=()=>{g(),dx.delete(t)};y.id=-1,dx.set(t,y),ji(y,r)}else PE(t),g()}}}function PE(t){const e=dx.get(t);e&&(e.flags|=8,dx.delete(t))}Hh().requestIdleCallback;Hh().cancelIdleCallback;const um=t=>!!t.type.__asyncLoader,F$=t=>t.type.__isKeepAlive;function Nde(t,e){$$(t,"a",e)}function Fde(t,e){$$(t,"da",e)}function $$(t,e,r=ei){const n=t.__wdc||(t.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(p4(e,n,r),r){let i=r.parent;for(;i&&i.parent;)F$(i.parent.vnode)&&$de(n,e,r,i),i=i.parent}}function $de(t,e,r,n){const i=p4(e,t,n,!0);b1(()=>{JS(n[e],i)},r)}function p4(t,e,r=ei,n=!1){if(r){const i=r[t]||(r[t]=[]),s=e.__weh||(e.__weh=(...o)=>{rl();const a=v1(r),l=Qo(e,r,t,o);return a(),nl(),l});return n?i.unshift(s):i.push(s),s}}const gl=t=>(e,r=ei)=>{(!sg||t==="sp")&&p4(t,(...n)=>e(...n),r)},zde=gl("bm"),y1=gl("m"),Hde=gl("bu"),qde=gl("u"),Vde=gl("bum"),b1=gl("um"),Wde=gl("sp"),jde=gl("rtg"),Ude=gl("rtc");function Gde(t,e=ei){p4("ec",t,e)}const Kde=Symbol.for("v-ndc"),xC=t=>t?nz(t)?y8(t):xC(t.parent):null,fm=qn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>xC(t.parent),$root:t=>xC(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>__VUE_OPTIONS_API__?H$(t):t.type,$forceUpdate:t=>t.f||(t.f=()=>{h8(t.update)}),$nextTick:t=>t.n||(t.n=Sde.bind(t.proxy)),$watch:t=>__VUE_OPTIONS_API__?o0e.bind(t):Js}),T5=(t,e)=>t!==ur&&!t.__isScriptSetup&&Yt(t,e),Yde={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:i,props:s,accessCache:o,type:a,appContext:l}=t;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return n[e];case 2:return i[e];case 4:return r[e];case 3:return s[e]}else{if(T5(n,e))return o[e]=1,n[e];if(__VUE_OPTIONS_API__&&i!==ur&&Yt(i,e))return o[e]=2,i[e];if(Yt(s,e))return o[e]=3,s[e];if(r!==ur&&Yt(r,e))return o[e]=4,r[e];(!__VUE_OPTIONS_API__||vC)&&(o[e]=0)}}const c=fm[e];let h,u;if(c)return e==="$attrs"&&In(t.attrs,"get",""),c(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(r!==ur&&Yt(r,e))return o[e]=4,r[e];if(u=l.config.globalProperties,Yt(u,e))return u[e]},set({_:t},e,r){const{data:n,setupState:i,ctx:s}=t;return T5(i,e)?(i[e]=r,!0):__VUE_OPTIONS_API__&&n!==ur&&Yt(n,e)?(n[e]=r,!0):Yt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:i,props:s,type:o}},a){let l;return!!(r[a]||__VUE_OPTIONS_API__&&t!==ur&&a[0]!=="$"&&Yt(t,a)||T5(e,a)||Yt(s,a)||Yt(n,a)||Yt(fm,a)||Yt(i.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Yt(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function NE(t){return At(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let vC=!0;function Xde(t){const e=H$(t),r=t.proxy,n=t.ctx;vC=!1,e.beforeCreate&&FE(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:u,mounted:f,beforeUpdate:d,updated:p,activated:m,deactivated:g,beforeDestroy:y,beforeUnmount:b,destroyed:x,unmounted:T,render:S,renderTracked:w,renderTriggered:_,errorCaptured:I,serverPrefetch:N,expose:L,inheritAttrs:D,components:P,directives:K,filters:z}=e;if(c&&Jde(c,n,null),o)for(const U in o){const q=o[U];_t(q)&&(n[U]=q.bind(r))}if(i){const U=i.call(r,r);Br(U)&&(t.data=a8(U))}if(vC=!0,s)for(const U in s){const q=s[U],re=_t(q)?q.bind(r,r):_t(q.get)?q.get.bind(r,r):Js,E=!_t(q)&&_t(q.set)?q.set.bind(r):Js,de=wd({get:re,set:E});Object.defineProperty(n,U,{enumerable:!0,configurable:!0,get:()=>de.value,set:Te=>de.value=Te})}if(a)for(const U in a)z$(a[U],n,r,U);if(l){const U=_t(l)?l.call(r):l;Reflect.ownKeys(U).forEach(q=>{n0e(q,U[q])})}h&&FE(h,t,"c");function H(U,q){At(q)?q.forEach(re=>U(re.bind(r))):q&&U(q.bind(r))}if(H(zde,u),H(y1,f),H(Hde,d),H(qde,p),H(Nde,m),H(Fde,g),H(Gde,I),H(Ude,w),H(jde,_),H(Vde,b),H(b1,T),H(Wde,N),At(L))if(L.length){const U=t.exposed||(t.exposed={});L.forEach(q=>{Object.defineProperty(U,q,{get:()=>r[q],set:re=>r[q]=re,enumerable:!0})})}else t.exposed||(t.exposed={});S&&t.render===Js&&(t.render=S),D!=null&&(t.inheritAttrs=D),P&&(t.components=P),K&&(t.directives=K),N&&N$(t)}function Jde(t,e,r=Js){At(t)&&(t=wC(t));for(const n in t){const i=t[n];let s;Br(i)?"default"in i?s=H2(i.from||n,i.default,!0):s=H2(i.from||n):s=H2(i),Fn(s)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[n]=s}}function FE(t,e,r){Qo(At(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function z$(t,e,r,n){let i=n.includes(".")?V$(r,n):()=>r[n];if(ln(t)){const s=e[t];_t(s)&&Vh(i,s)}else if(_t(t))Vh(i,t.bind(r));else if(Br(t))if(At(t))t.forEach(s=>z$(s,e,r,n));else{const s=_t(t.handler)?t.handler.bind(r):e[t.handler];_t(s)&&Vh(i,s,t)}}function H$(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!r&&!n?l=e:(l={},i.length&&i.forEach(c=>px(l,c,o,!0)),px(l,e,o)),Br(e)&&s.set(e,l),l}function px(t,e,r,n=!1){const{mixins:i,extends:s}=e;s&&px(t,s,r,!0),i&&i.forEach(o=>px(t,o,r,!0));for(const o in e)if(!(n&&o==="expose")){const a=Zde[o]||r&&r[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Zde={data:$E,props:zE,emits:zE,methods:cp,computed:cp,beforeCreate:Xn,created:Xn,beforeMount:Xn,mounted:Xn,beforeUpdate:Xn,updated:Xn,beforeDestroy:Xn,beforeUnmount:Xn,destroyed:Xn,unmounted:Xn,activated:Xn,deactivated:Xn,errorCaptured:Xn,serverPrefetch:Xn,components:cp,directives:cp,watch:e0e,provide:$E,inject:Qde};function $E(t,e){return e?t?function(){return qn(_t(t)?t.call(this,this):t,_t(e)?e.call(this,this):e)}:e:t}function Qde(t,e){return cp(wC(t),wC(e))}function wC(t){if(At(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Xn(t,e){return t?[...new Set([].concat(t,e))]:e}function cp(t,e){return t?qn(Object.create(null),t,e):e}function zE(t,e){return t?At(t)&&At(e)?[...new Set([...t,...e])]:qn(Object.create(null),NE(t),NE(e??{})):e}function e0e(t,e){if(!t)return e;if(!e)return t;const r=qn(Object.create(null),t);for(const n in e)r[n]=Xn(t[n],e[n]);return r}function q$(){return{app:null,config:{isNativeTag:h$,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let t0e=0;function r0e(t,e){return function(n,i=null){_t(n)||(n=qn({},n)),i!=null&&!Br(i)&&(i=null);const s=q$(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:t0e++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:GE,get config(){return s.config},set config(h){},use(h,...u){return o.has(h)||(h&&_t(h.install)?(o.add(h),h.install(c,...u)):_t(h)&&(o.add(h),h(c,...u))),c},mixin(h){return __VUE_OPTIONS_API__&&(s.mixins.includes(h)||s.mixins.push(h)),c},component(h,u){return u?(s.components[h]=u,c):s.components[h]},directive(h,u){return u?(s.directives[h]=u,c):s.directives[h]},mount(h,u,f){if(!l){const d=c._ceVNode||Ks(n,i);return d.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),t(d,h,f),l=!0,c._container=h,h.__vue_app__=c,__VUE_PROD_DEVTOOLS__&&(c._instance=d.component,Mde(c,GE)),y8(d.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Qo(a,c._instance,16),t(null,c._container),__VUE_PROD_DEVTOOLS__&&(c._instance=null,Ade(c)),delete c._container.__vue_app__)},provide(h,u){return s.provides[h]=u,c},runWithContext(h){const u=bf;bf=c;try{return h()}finally{bf=u}}};return c}}let bf=null;function n0e(t,e){if(ei){let r=ei.provides;const n=ei.parent&&ei.parent.provides;n===r&&(r=ei.provides=Object.create(n)),r[t]=e}}function H2(t,e,r=!1){const n=B0e();if(n||bf){let i=bf?bf._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return r&&_t(e)?e.call(n&&n.proxy):e}}const i0e=Symbol.for("v-scx"),s0e=()=>H2(i0e);function Gd(t,e){return d8(t,null,e)}function Vh(t,e,r){return d8(t,e,r)}function d8(t,e,r=ur){const{immediate:n,deep:i,flush:s,once:o}=r,a=qn({},r),l=e&&n||!e&&s!=="post";let c;if(sg){if(s==="sync"){const d=s0e();c=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=Js,d.resume=Js,d.pause=Js,d}}const h=ei;a.call=(d,p,m)=>Qo(d,h,p,m);let u=!1;s==="post"?a.scheduler=d=>{ji(d,h&&h.suspense)}:s!=="sync"&&(u=!0,a.scheduler=(d,p)=>{p?d():h8(d)}),a.augmentJob=d=>{e&&(d.flags|=4),u&&(d.flags|=2,h&&(d.id=h.uid,d.i=h))};const f=kde(t,e,a);return sg&&(c?c.push(f):l&&f()),f}function o0e(t,e,r){const n=this.proxy,i=ln(t)?t.includes(".")?V$(n,t):()=>n[t]:t.bind(n,n);let s;_t(e)?s=e:(s=e.handler,r=e);const o=v1(this),a=d8(i,s.bind(n),r);return o(),a}function V$(t,e){const r=e.split(".");return()=>{let n=t;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}const a0e=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${dc(e)}Modifiers`]||t[`${Tu(e)}Modifiers`];function l0e(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||ur;let i=r;const s=e.startsWith("update:"),o=s&&a0e(n,e.slice(7));o&&(o.trim&&(i=r.map(h=>ln(h)?h.trim():h)),o.number&&(i=r.map(Hfe))),__VUE_PROD_DEVTOOLS__&&Dde(t,e,i);let a,l=n[a=v5(e)]||n[a=v5(dc(e))];!l&&s&&(l=n[a=v5(Tu(e))]),l&&Qo(l,t,6,i);const c=n[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Qo(c,t,6,i)}}const c0e=new WeakMap;function W$(t,e,r=!1){const n=__VUE_OPTIONS_API__&&r?c0e:e.emitsCache,i=n.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(__VUE_OPTIONS_API__&&!_t(t)){const l=c=>{const h=W$(c,e,!0);h&&(a=!0,qn(o,h))};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(Br(t)&&n.set(t,null),null):(At(s)?s.forEach(l=>o[l]=null):qn(o,s),Br(t)&&n.set(t,o),o)}function m4(t,e){return!t||!c4(e)?!1:(e=e.slice(2).replace(/Once$/,""),Yt(t,e[0].toLowerCase()+e.slice(1))||Yt(t,Tu(e))||Yt(t,e))}function HE(t){const{type:e,vnode:r,proxy:n,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:u,data:f,setupState:d,ctx:p,inheritAttrs:m}=t,g=fx(t);let y,b;try{if(r.shapeFlag&4){const T=i||n,S=T;y=Io(c.call(S,T,h,u,d,f,p)),b=a}else{const T=e;y=Io(T.length>1?T(u,{attrs:a,slots:o,emit:l}):T(u,null)),b=e.props?a:h0e(a)}}catch(T){f4(T,t,1),y=Ks(lu)}let x=y;if(b&&m!==!1){const T=Object.keys(b),{shapeFlag:S}=x;T.length&&S&7&&(s&&T.some(XS)&&(b=u0e(b,s)),x=vd(x,b,!1,!0))}return r.dirs&&(x=vd(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(r.dirs):r.dirs),r.transition&&f8(x,r.transition),y=x,fx(g),y}const h0e=t=>{let e;for(const r in t)(r==="class"||r==="style"||c4(r))&&((e||(e={}))[r]=t[r]);return e},u0e=(t,e)=>{const r={};for(const n in t)(!XS(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function f0e(t,e,r){const{props:n,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?qE(n,o,c):!!o;if(l&8){const h=e.dynamicProps;for(let u=0;u<h.length;u++){const f=h[u];if(o[f]!==n[f]&&!m4(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?qE(n,o,c):!0:!!o;return!1}function qE(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(e[s]!==t[s]&&!m4(r,s))return!0}return!1}function d0e({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const j$={},U$=()=>Object.create(j$),G$=t=>Object.getPrototypeOf(t)===j$;function p0e(t,e,r,n=!1){const i={},s=U$();t.propsDefaults=Object.create(null),K$(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);r?t.props=n?i:pde(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function m0e(t,e,r,n){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Kt(i),[l]=t.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let u=0;u<h.length;u++){let f=h[u];if(m4(t.emitsOptions,f))continue;const d=e[f];if(l)if(Yt(s,f))d!==s[f]&&(s[f]=d,c=!0);else{const p=dc(f);i[p]=kC(l,a,p,d,t,!1)}else d!==s[f]&&(s[f]=d,c=!0)}}}else{K$(t,e,i,s)&&(c=!0);let h;for(const u in a)(!e||!Yt(e,u)&&((h=Tu(u))===u||!Yt(e,h)))&&(l?r&&(r[u]!==void 0||r[h]!==void 0)&&(i[u]=kC(l,a,u,void 0,t,!0)):delete i[u]);if(s!==a)for(const u in s)(!e||!Yt(e,u))&&(delete s[u],c=!0)}c&&Fa(t.attrs,"set","")}function K$(t,e,r,n){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(am(l))continue;const c=e[l];let h;i&&Yt(i,h=dc(l))?!s||!s.includes(h)?r[h]=c:(a||(a={}))[h]=c:m4(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(s){const l=Kt(r),c=a||ur;for(let h=0;h<s.length;h++){const u=s[h];r[u]=kC(i,l,u,c[u],t,!Yt(c,u))}}return o}function kC(t,e,r,n,i,s){const o=t[r];if(o!=null){const a=Yt(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&_t(l)){const{propsDefaults:c}=i;if(r in c)n=c[r];else{const h=v1(i);n=c[r]=l.call(null,e),h()}}else n=l;i.ce&&i.ce._setProp(r,n)}o[0]&&(s&&!a?n=!1:o[1]&&(n===""||n===Tu(r))&&(n=!0))}return n}const g0e=new WeakMap;function Y$(t,e,r=!1){const n=__VUE_OPTIONS_API__&&r?g0e:e.propsCache,i=n.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(__VUE_OPTIONS_API__&&!_t(t)){const h=u=>{l=!0;const[f,d]=Y$(u,e,!0);qn(o,f),d&&a.push(...d)};!r&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!s&&!l)return Br(t)&&n.set(t,sm),sm;if(At(s))for(let h=0;h<s.length;h++){const u=dc(s[h]);VE(u)&&(o[u]=ur)}else if(s)for(const h in s){const u=dc(h);if(VE(u)){const f=s[h],d=o[u]=At(f)||_t(f)?{type:f}:qn({},f),p=d.type;let m=!1,g=!0;if(At(p))for(let y=0;y<p.length;++y){const b=p[y],x=_t(b)&&b.name;if(x==="Boolean"){m=!0;break}else x==="String"&&(g=!1)}else m=_t(p)&&p.name==="Boolean";d[0]=m,d[1]=g,(m||Yt(d,"default"))&&a.push(u)}}const c=[o,a];return Br(t)&&n.set(t,c),c}function VE(t){return t[0]!=="$"&&!am(t)}const p8=t=>t==="_"||t==="_ctx"||t==="$stable",m8=t=>At(t)?t.map(Io):[Io(t)],y0e=(t,e,r)=>{if(e._n)return e;const n=Ide((...i)=>m8(e(...i)),r);return n._c=!1,n},X$=(t,e,r)=>{const n=t._ctx;for(const i in t){if(p8(i))continue;const s=t[i];if(_t(s))e[i]=y0e(i,s,n);else if(s!=null){const o=m8(s);e[i]=()=>o}}},J$=(t,e)=>{const r=m8(e);t.slots.default=()=>r},Z$=(t,e,r)=>{for(const n in e)(r||!p8(n))&&(t[n]=e[n])},b0e=(t,e,r)=>{const n=t.slots=U$();if(t.vnode.shapeFlag&32){const i=e._;i?(Z$(n,e,r),r&&lx(n,"_",i,!0)):X$(e,n)}else e&&J$(t,e)},x0e=(t,e,r)=>{const{vnode:n,slots:i}=t;let s=!0,o=ur;if(n.shapeFlag&32){const a=e._;a?r&&a===1?s=!1:Z$(i,e,r):(s=!e.$stable,X$(e,i)),o=e}else e&&(J$(t,e),o={default:1});if(s)for(const a in i)!p8(a)&&o[a]==null&&delete i[a]};function v0e(){typeof __VUE_OPTIONS_API__!="boolean"&&(Hh().__VUE_OPTIONS_API__=!0),typeof __VUE_PROD_DEVTOOLS__!="boolean"&&(Hh().__VUE_PROD_DEVTOOLS__=!1),typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__!="boolean"&&(Hh().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const ji=T0e;function w0e(t){return k0e(t)}function k0e(t,e){v0e();const r=Hh();r.__VUE__=!0,__VUE_PROD_DEVTOOLS__&&B$(r.__VUE_DEVTOOLS_GLOBAL_HOOK__,r);const{insert:n,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:u,nextSibling:f,setScopeId:d=Js,insertStaticContent:p}=t,m=(R,W,ee,ue=null,le=null,ce=null,Ce=void 0,ye=null,be=!!W.dynamicChildren)=>{if(R===W)return;R&&!A0(R,W)&&(ue=Xe(R),Te(R,le,ce,!0),R=null),W.patchFlag===-2&&(be=!1,W.dynamicChildren=null);const{type:pe,ref:Ze,shapeFlag:Oe}=W;switch(pe){case x1:g(R,W,ee,ue);break;case lu:y(R,W,ee,ue);break;case q2:R==null&&b(W,ee,ue,Ce);break;case xn:P(R,W,ee,ue,le,ce,Ce,ye,be);break;default:Oe&1?S(R,W,ee,ue,le,ce,Ce,ye,be):Oe&6?K(R,W,ee,ue,le,ce,Ce,ye,be):(Oe&64||Oe&128)&&pe.process(R,W,ee,ue,le,ce,Ce,ye,be,xt)}Ze!=null&&le?hm(Ze,R&&R.ref,ce,W||R,!W):Ze==null&&R&&R.ref!=null&&hm(R.ref,null,ce,R,!0)},g=(R,W,ee,ue)=>{if(R==null)n(W.el=a(W.children),ee,ue);else{const le=W.el=R.el;W.children!==R.children&&c(le,W.children)}},y=(R,W,ee,ue)=>{R==null?n(W.el=l(W.children||""),ee,ue):W.el=R.el},b=(R,W,ee,ue)=>{[R.el,R.anchor]=p(R.children,W,ee,ue,R.el,R.anchor)},x=({el:R,anchor:W},ee,ue)=>{let le;for(;R&&R!==W;)le=f(R),n(R,ee,ue),R=le;n(W,ee,ue)},T=({el:R,anchor:W})=>{let ee;for(;R&&R!==W;)ee=f(R),i(R),R=ee;i(W)},S=(R,W,ee,ue,le,ce,Ce,ye,be)=>{if(W.type==="svg"?Ce="svg":W.type==="math"&&(Ce="mathml"),R==null)w(W,ee,ue,le,ce,Ce,ye,be);else{const pe=R.el&&R.el._isVueCE?R.el:null;try{pe&&pe._beginPatch(),N(R,W,le,ce,Ce,ye,be)}finally{pe&&pe._endPatch()}}},w=(R,W,ee,ue,le,ce,Ce,ye)=>{let be,pe;const{props:Ze,shapeFlag:Oe,transition:Ye,dirs:rt}=R;if(be=R.el=o(R.type,ce,Ze&&Ze.is,Ze),Oe&8?h(be,R.children):Oe&16&&I(R.children,be,null,ue,le,_5(R,ce),Ce,ye),rt&&$c(R,null,ue,"created"),_(be,R,R.scopeId,Ce,ue),Ze){for(const ae in Ze)ae!=="value"&&!am(ae)&&s(be,ae,null,Ze[ae],ce,ue);"value"in Ze&&s(be,"value",null,Ze.value,ce),(pe=Ze.onVnodeBeforeMount)&&ko(pe,ue,R)}__VUE_PROD_DEVTOOLS__&&(lx(be,"__vnode",R,!0),lx(be,"__vueParentComponent",ue,!0)),rt&&$c(R,null,ue,"beforeMount");const J=C0e(le,Ye);J&&Ye.beforeEnter(be),n(be,W,ee),((pe=Ze&&Ze.onVnodeMounted)||J||rt)&&ji(()=>{pe&&ko(pe,ue,R),J&&Ye.enter(be),rt&&$c(R,null,ue,"mounted")},le)},_=(R,W,ee,ue,le)=>{if(ee&&d(R,ee),ue)for(let ce=0;ce<ue.length;ce++)d(R,ue[ce]);if(le){let ce=le.subTree;if(W===ce||tz(ce.type)&&(ce.ssContent===W||ce.ssFallback===W)){const Ce=le.vnode;_(R,Ce,Ce.scopeId,Ce.slotScopeIds,le.parent)}}},I=(R,W,ee,ue,le,ce,Ce,ye,be=0)=>{for(let pe=be;pe<R.length;pe++){const Ze=R[pe]=ye?Rl(R[pe]):Io(R[pe]);m(null,Ze,W,ee,ue,le,ce,Ce,ye)}},N=(R,W,ee,ue,le,ce,Ce)=>{const ye=W.el=R.el;__VUE_PROD_DEVTOOLS__&&(ye.__vnode=W);let{patchFlag:be,dynamicChildren:pe,dirs:Ze}=W;be|=R.patchFlag&16;const Oe=R.props||ur,Ye=W.props||ur;let rt;if(ee&&zc(ee,!1),(rt=Ye.onVnodeBeforeUpdate)&&ko(rt,ee,W,R),Ze&&$c(W,R,ee,"beforeUpdate"),ee&&zc(ee,!0),(Oe.innerHTML&&Ye.innerHTML==null||Oe.textContent&&Ye.textContent==null)&&h(ye,""),pe?L(R.dynamicChildren,pe,ye,ee,ue,_5(W,le),ce):Ce||q(R,W,ye,null,ee,ue,_5(W,le),ce,!1),be>0){if(be&16)D(ye,Oe,Ye,ee,le);else if(be&2&&Oe.class!==Ye.class&&s(ye,"class",null,Ye.class,le),be&4&&s(ye,"style",Oe.style,Ye.style,le),be&8){const J=W.dynamicProps;for(let ae=0;ae<J.length;ae++){const Me=J[ae],nt=Oe[Me],gt=Ye[Me];(gt!==nt||Me==="value")&&s(ye,Me,nt,gt,le,ee)}}be&1&&R.children!==W.children&&h(ye,W.children)}else!Ce&&pe==null&&D(ye,Oe,Ye,ee,le);((rt=Ye.onVnodeUpdated)||Ze)&&ji(()=>{rt&&ko(rt,ee,W,R),Ze&&$c(W,R,ee,"updated")},ue)},L=(R,W,ee,ue,le,ce,Ce)=>{for(let ye=0;ye<W.length;ye++){const be=R[ye],pe=W[ye],Ze=be.el&&(be.type===xn||!A0(be,pe)||be.shapeFlag&198)?u(be.el):ee;m(be,pe,Ze,null,ue,le,ce,Ce,!0)}},D=(R,W,ee,ue,le)=>{if(W!==ee){if(W!==ur)for(const ce in W)!am(ce)&&!(ce in ee)&&s(R,ce,W[ce],null,le,ue);for(const ce in ee){if(am(ce))continue;const Ce=ee[ce],ye=W[ce];Ce!==ye&&ce!=="value"&&s(R,ce,ye,Ce,le,ue)}"value"in ee&&s(R,"value",W.value,ee.value,le)}},P=(R,W,ee,ue,le,ce,Ce,ye,be)=>{const pe=W.el=R?R.el:a(""),Ze=W.anchor=R?R.anchor:a("");let{patchFlag:Oe,dynamicChildren:Ye,slotScopeIds:rt}=W;rt&&(ye=ye?ye.concat(rt):rt),R==null?(n(pe,ee,ue),n(Ze,ee,ue),I(W.children||[],ee,Ze,le,ce,Ce,ye,be)):Oe>0&&Oe&64&&Ye&&R.dynamicChildren?(L(R.dynamicChildren,Ye,ee,le,ce,Ce,ye),(W.key!=null||le&&W===le.subTree)&&Q$(R,W,!0)):q(R,W,ee,Ze,le,ce,Ce,ye,be)},K=(R,W,ee,ue,le,ce,Ce,ye,be)=>{W.slotScopeIds=ye,R==null?W.shapeFlag&512?le.ctx.activate(W,ee,ue,Ce,be):z(W,ee,ue,le,ce,Ce,be):$(R,W,be)},z=(R,W,ee,ue,le,ce,Ce)=>{const ye=R.component=I0e(R,ue,le);if(F$(R)&&(ye.ctx.renderer=xt),R0e(ye,!1,Ce),ye.asyncDep){if(le&&le.registerDep(ye,H,Ce),!R.el){const be=ye.subTree=Ks(lu);y(null,be,W,ee),R.placeholder=be.el}}else H(ye,R,W,ee,le,ce,Ce)},$=(R,W,ee)=>{const ue=W.component=R.component;if(f0e(R,W,ee))if(ue.asyncDep&&!ue.asyncResolved){U(ue,W,ee);return}else ue.next=W,ue.update();else W.el=R.el,ue.vnode=W},H=(R,W,ee,ue,le,ce,Ce)=>{const ye=()=>{if(R.isMounted){let{next:Oe,bu:Ye,u:rt,parent:J,vnode:ae}=R;{const wr=ez(R);if(wr){Oe&&(Oe.el=ae.el,U(R,Oe,Ce)),wr.asyncDep.then(()=>{R.isUnmounted||ye()});return}}let Me=Oe,nt;zc(R,!1),Oe?(Oe.el=ae.el,U(R,Oe,Ce)):Oe=ae,Ye&&w5(Ye),(nt=Oe.props&&Oe.props.onVnodeBeforeUpdate)&&ko(nt,J,Oe,ae),zc(R,!0);const gt=HE(R),Qt=R.subTree;R.subTree=gt,m(Qt,gt,u(Qt.el),Xe(Qt),R,le,ce),Oe.el=gt.el,Me===null&&d0e(R,gt.el),rt&&ji(rt,le),(nt=Oe.props&&Oe.props.onVnodeUpdated)&&ji(()=>ko(nt,J,Oe,ae),le),__VUE_PROD_DEVTOOLS__&&R$(R)}else{let Oe;const{el:Ye,props:rt}=W,{bm:J,m:ae,parent:Me,root:nt,type:gt}=R,Qt=um(W);zc(R,!1),J&&w5(J),!Qt&&(Oe=rt&&rt.onVnodeBeforeMount)&&ko(Oe,Me,W),zc(R,!0);{nt.ce&&nt.ce._def.shadowRoot!==!1&&nt.ce._injectChildStyle(gt);const wr=R.subTree=HE(R);m(null,wr,ee,ue,R,le,ce),W.el=wr.el}if(ae&&ji(ae,le),!Qt&&(Oe=rt&&rt.onVnodeMounted)){const wr=W;ji(()=>ko(Oe,Me,wr),le)}(W.shapeFlag&256||Me&&um(Me.vnode)&&Me.vnode.shapeFlag&256)&&R.a&&ji(R.a,le),R.isMounted=!0,__VUE_PROD_DEVTOOLS__&&Ede(R),W=ee=ue=null}};R.scope.on();const be=R.effect=new p$(ye);R.scope.off();const pe=R.update=be.run.bind(be),Ze=R.job=be.runIfDirty.bind(be);Ze.i=R,Ze.id=R.uid,be.scheduler=()=>h8(Ze),zc(R,!0),pe()},U=(R,W,ee)=>{W.component=R;const ue=R.vnode.props;R.vnode=W,R.next=null,m0e(R,W.props,ue,ee),x0e(R,W.children,ee),rl(),RE(R),nl()},q=(R,W,ee,ue,le,ce,Ce,ye,be=!1)=>{const pe=R&&R.children,Ze=R?R.shapeFlag:0,Oe=W.children,{patchFlag:Ye,shapeFlag:rt}=W;if(Ye>0){if(Ye&128){E(pe,Oe,ee,ue,le,ce,Ce,ye,be);return}else if(Ye&256){re(pe,Oe,ee,ue,le,ce,Ce,ye,be);return}}rt&8?(Ze&16&&Le(pe,le,ce),Oe!==pe&&h(ee,Oe)):Ze&16?rt&16?E(pe,Oe,ee,ue,le,ce,Ce,ye,be):Le(pe,le,ce,!0):(Ze&8&&h(ee,""),rt&16&&I(Oe,ee,ue,le,ce,Ce,ye,be))},re=(R,W,ee,ue,le,ce,Ce,ye,be)=>{R=R||sm,W=W||sm;const pe=R.length,Ze=W.length,Oe=Math.min(pe,Ze);let Ye;for(Ye=0;Ye<Oe;Ye++){const rt=W[Ye]=be?Rl(W[Ye]):Io(W[Ye]);m(R[Ye],rt,ee,null,le,ce,Ce,ye,be)}pe>Ze?Le(R,le,ce,!0,!1,Oe):I(W,ee,ue,le,ce,Ce,ye,be,Oe)},E=(R,W,ee,ue,le,ce,Ce,ye,be)=>{let pe=0;const Ze=W.length;let Oe=R.length-1,Ye=Ze-1;for(;pe<=Oe&&pe<=Ye;){const rt=R[pe],J=W[pe]=be?Rl(W[pe]):Io(W[pe]);if(A0(rt,J))m(rt,J,ee,null,le,ce,Ce,ye,be);else break;pe++}for(;pe<=Oe&&pe<=Ye;){const rt=R[Oe],J=W[Ye]=be?Rl(W[Ye]):Io(W[Ye]);if(A0(rt,J))m(rt,J,ee,null,le,ce,Ce,ye,be);else break;Oe--,Ye--}if(pe>Oe){if(pe<=Ye){const rt=Ye+1,J=rt<Ze?W[rt].el:ue;for(;pe<=Ye;)m(null,W[pe]=be?Rl(W[pe]):Io(W[pe]),ee,J,le,ce,Ce,ye,be),pe++}}else if(pe>Ye)for(;pe<=Oe;)Te(R[pe],le,ce,!0),pe++;else{const rt=pe,J=pe,ae=new Map;for(pe=J;pe<=Ye;pe++){const Ht=W[pe]=be?Rl(W[pe]):Io(W[pe]);Ht.key!=null&&ae.set(Ht.key,pe)}let Me,nt=0;const gt=Ye-J+1;let Qt=!1,wr=0;const _r=new Array(gt);for(pe=0;pe<gt;pe++)_r[pe]=0;for(pe=rt;pe<=Oe;pe++){const Ht=R[pe];if(nt>=gt){Te(Ht,le,ce,!0);continue}let Pt;if(Ht.key!=null)Pt=ae.get(Ht.key);else for(Me=J;Me<=Ye;Me++)if(_r[Me-J]===0&&A0(Ht,W[Me])){Pt=Me;break}Pt===void 0?Te(Ht,le,ce,!0):(_r[Pt-J]=pe+1,Pt>=wr?wr=Pt:Qt=!0,m(Ht,W[Pt],ee,null,le,ce,Ce,ye,be),nt++)}const Tn=Qt?S0e(_r):sm;for(Me=Tn.length-1,pe=gt-1;pe>=0;pe--){const Ht=J+pe,Pt=W[Ht],_n=W[Ht+1],Yr=Ht+1<Ze?_n.el||_n.placeholder:ue;_r[pe]===0?m(null,Pt,ee,Yr,le,ce,Ce,ye,be):Qt&&(Me<0||pe!==Tn[Me]?de(Pt,ee,Yr,2):Me--)}}},de=(R,W,ee,ue,le=null)=>{const{el:ce,type:Ce,transition:ye,children:be,shapeFlag:pe}=R;if(pe&6){de(R.component.subTree,W,ee,ue);return}if(pe&128){R.suspense.move(W,ee,ue);return}if(pe&64){Ce.move(R,W,ee,xt);return}if(Ce===xn){n(ce,W,ee);for(let Oe=0;Oe<be.length;Oe++)de(be[Oe],W,ee,ue);n(R.anchor,W,ee);return}if(Ce===q2){x(R,W,ee);return}if(ue!==2&&pe&1&&ye)if(ue===0)ye.beforeEnter(ce),n(ce,W,ee),ji(()=>ye.enter(ce),le);else{const{leave:Oe,delayLeave:Ye,afterLeave:rt}=ye,J=()=>{R.ctx.isUnmounted?i(ce):n(ce,W,ee)},ae=()=>{ce._isLeaving&&ce[Pde](!0),Oe(ce,()=>{J(),rt&&rt()})};Ye?Ye(ce,J,ae):ae()}else n(ce,W,ee)},Te=(R,W,ee,ue=!1,le=!1)=>{const{type:ce,props:Ce,ref:ye,children:be,dynamicChildren:pe,shapeFlag:Ze,patchFlag:Oe,dirs:Ye,cacheIndex:rt}=R;if(Oe===-2&&(le=!1),ye!=null&&(rl(),hm(ye,null,ee,R,!0),nl()),rt!=null&&(W.renderCache[rt]=void 0),Ze&256){W.ctx.deactivate(R);return}const J=Ze&1&&Ye,ae=!um(R);let Me;if(ae&&(Me=Ce&&Ce.onVnodeBeforeUnmount)&&ko(Me,W,R),Ze&6)He(R.component,ee,ue);else{if(Ze&128){R.suspense.unmount(ee,ue);return}J&&$c(R,null,W,"beforeUnmount"),Ze&64?R.type.remove(R,W,ee,xt,ue):pe&&!pe.hasOnce&&(ce!==xn||Oe>0&&Oe&64)?Le(pe,W,ee,!1,!0):(ce===xn&&Oe&384||!le&&Ze&16)&&Le(be,W,ee),ue&&O(R)}(ae&&(Me=Ce&&Ce.onVnodeUnmounted)||J)&&ji(()=>{Me&&ko(Me,W,R),J&&$c(R,null,W,"unmounted")},ee)},O=R=>{const{type:W,el:ee,anchor:ue,transition:le}=R;if(W===xn){et(ee,ue);return}if(W===q2){T(R);return}const ce=()=>{i(ee),le&&!le.persisted&&le.afterLeave&&le.afterLeave()};if(R.shapeFlag&1&&le&&!le.persisted){const{leave:Ce,delayLeave:ye}=le,be=()=>Ce(ee,ce);ye?ye(R.el,ce,be):be()}else ce()},et=(R,W)=>{let ee;for(;R!==W;)ee=f(R),i(R),R=ee;i(W)},He=(R,W,ee)=>{const{bum:ue,scope:le,job:ce,subTree:Ce,um:ye,m:be,a:pe}=R;WE(be),WE(pe),ue&&w5(ue),le.stop(),ce&&(ce.flags|=8,Te(Ce,R,W,ee)),ye&&ji(ye,W),ji(()=>{R.isUnmounted=!0},W),__VUE_PROD_DEVTOOLS__&&Ode(R)},Le=(R,W,ee,ue=!1,le=!1,ce=0)=>{for(let Ce=ce;Ce<R.length;Ce++)Te(R[Ce],W,ee,ue,le)},Xe=R=>{if(R.shapeFlag&6)return Xe(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const W=f(R.anchor||R.el),ee=W&&W[Bde];return ee?f(ee):W};let dt=!1;const Ct=(R,W,ee)=>{R==null?W._vnode&&Te(W._vnode,null,null,!0):m(W._vnode||null,R,W,null,null,null,ee),W._vnode=R,dt||(dt=!0,RE(),D$(),dt=!1)},xt={p:m,um:Te,m:de,r:O,mt:z,mc:I,pc:q,pbc:L,n:Xe,o:t};return{render:Ct,hydrate:void 0,createApp:r0e(Ct)}}function _5({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function zc({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function C0e(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Q$(t,e,r=!1){const n=t.children,i=e.children;if(At(n)&&At(i))for(let s=0;s<n.length;s++){const o=n[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Rl(i[s]),a.el=o.el),!r&&a.patchFlag!==-2&&Q$(o,a)),a.type===x1&&a.patchFlag!==-1&&(a.el=o.el),a.type===lu&&!a.el&&(a.el=o.el)}}function S0e(t){const e=t.slice(),r=[0];let n,i,s,o,a;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(i=r[r.length-1],t[i]<c){e[n]=i,r.push(n);continue}for(s=0,o=r.length-1;s<o;)a=s+o>>1,t[r[a]]<c?s=a+1:o=a;c<t[r[s]]&&(s>0&&(e[n]=r[s-1]),r[s]=n)}}for(s=r.length,o=r[s-1];s-- >0;)r[s]=o,o=e[o];return r}function ez(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:ez(e)}function WE(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const tz=t=>t.__isSuspense;function T0e(t,e){e&&e.pendingBranch?At(t)?e.effects.push(...t):e.effects.push(t):_de(t)}const xn=Symbol.for("v-fgt"),x1=Symbol.for("v-txt"),lu=Symbol.for("v-cmt"),q2=Symbol.for("v-stc");function mx(t){return t?t.__v_isVNode===!0:!1}function A0(t,e){return t.type===e.type&&t.key===e.key}const rz=({key:t})=>t??null,V2=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?ln(t)||Fn(t)||_t(t)?{i:Ho,r:t,k:e,f:!!r}:t:null);function _0e(t,e=null,r=null,n=0,i=null,s=t===xn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&rz(e),ref:e&&V2(e),scopeId:P$,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ho};return a?(g8(l,r),s&128&&t.normalize(l)):r&&(l.shapeFlag|=ln(r)?8:16),l}const Ks=M0e;function M0e(t,e=null,r=null,n=0,i=null,s=!1){if((!t||t===Kde)&&(t=lu),mx(t)){const a=vd(t,e,!0);return r&&g8(a,r),a.patchFlag=-2,a}if($0e(t)&&(t=t.__vccOpts),e){e=A0e(e);let{class:a,style:l}=e;a&&!ln(a)&&(e.class=e8(a)),Br(l)&&(c8(l)&&!At(l)&&(l=qn({},l)),e.style=QS(l))}const o=ln(t)?1:tz(t)?128:Rde(t)?64:Br(t)?4:_t(t)?2:0;return _0e(t,e,r,n,i,o,s,!0)}function A0e(t){return t?c8(t)||G$(t)?qn({},t):t:null}function vd(t,e,r=!1,n=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?L0e(i||{},e):i,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&rz(c),ref:e&&e.ref?r&&s?At(s)?s.concat(V2(e)):[s,V2(e)]:V2(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==xn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&vd(t.ssContent),ssFallback:t.ssFallback&&vd(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&f8(h,l.clone(h)),h}function E0e(t=" ",e=0){return Ks(x1,null,t,e)}function Io(t){return t==null||typeof t=="boolean"?Ks(lu):At(t)?Ks(xn,null,t.slice()):mx(t)?Rl(t):Ks(x1,null,String(t))}function Rl(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:vd(t)}function g8(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(At(e))r=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),g8(t,i()),i._c&&(i._d=!0));return}else{r=32;const i=e._;!i&&!G$(e)?e._ctx=Ho:i===3&&Ho&&(Ho.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else _t(e)?(e={default:e,_ctx:Ho},r=32):(e=String(e),n&64?(r=16,e=[E0e(e)]):r=8);t.children=e,t.shapeFlag|=r}function L0e(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=e8([e.class,n.class]));else if(i==="style")e.style=QS([e.style,n.style]);else if(c4(i)){const s=e[i],o=n[i];o&&s!==o&&!(At(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=n[i])}return e}function ko(t,e,r,n=null){Qo(t,e,7,[r,n])}const O0e=q$();let D0e=0;function I0e(t,e,r){const n=t.type,i=(e?e.appContext:t.appContext)||O0e,s={uid:D0e++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Kfe(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Y$(n,i),emitsOptions:W$(n,i),emit:null,emitted:null,propsDefaults:ur,inheritAttrs:n.inheritAttrs,ctx:ur,data:ur,props:ur,attrs:ur,slots:ur,refs:ur,setupState:ur,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=l0e.bind(null,s),t.ce&&t.ce(s),s}let ei=null;const B0e=()=>ei||Ho;let gx,CC;{const t=Hh(),e=(r,n)=>{let i;return(i=t[r])||(i=t[r]=[]),i.push(n),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};gx=e("__VUE_INSTANCE_SETTERS__",r=>ei=r),CC=e("__VUE_SSR_SETTERS__",r=>sg=r)}const v1=t=>{const e=ei;return gx(t),t.scope.on(),()=>{t.scope.off(),gx(e)}},jE=()=>{ei&&ei.scope.off(),gx(null)};function nz(t){return t.vnode.shapeFlag&4}let sg=!1;function R0e(t,e=!1,r=!1){e&&CC(e);const{props:n,children:i}=t.vnode,s=nz(t);p0e(t,n,s,e),b0e(t,i,r||e);const o=s?P0e(t,e):void 0;return e&&CC(!1),o}function P0e(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Yde);const{setup:n}=r;if(n){rl();const i=t.setupContext=n.length>1?F0e(t):null,s=v1(t),o=g1(n,t,0,[t.props,i]),a=u$(o);if(nl(),s(),(a||t.sp)&&!um(t)&&N$(t),a){if(o.then(jE,jE),e)return o.then(l=>{UE(t,l)}).catch(l=>{f4(l,t,0)});t.asyncDep=o}else UE(t,o)}else iz(t)}function UE(t,e,r){_t(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Br(e)&&(__VUE_PROD_DEVTOOLS__&&(t.devtoolsRawSetupState=e),t.setupState=E$(e)),iz(t)}function iz(t,e,r){const n=t.type;if(t.render||(t.render=n.render||Js),__VUE_OPTIONS_API__){const i=v1(t);rl();try{Xde(t)}finally{nl(),i()}}}const N0e={get(t,e){return In(t,"get",""),t[e]}};function F0e(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,N0e),slots:t.slots,emit:t.emit,expose:e}}function y8(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(E$(mde(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in fm)return fm[r](t)},has(e,r){return r in e||r in fm}})):t.proxy}function $0e(t){return _t(t)&&"__vccOpts"in t}const wd=(t,e)=>vde(t,e,sg);function te(t,e,r){try{const n=arguments.length;return n===2?Br(e)&&!At(e)?mx(e)?Ks(t,null,[e]):Ks(t,e):Ks(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&mx(r)&&(r=[r]),Ks(t,e,r))}finally{}}const GE="3.5.25";/**
* @vue/runtime-dom v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let SC;const KE=typeof window<"u"&&window.trustedTypes;if(KE)try{SC=KE.createPolicy("vue",{createHTML:t=>t})}catch{}const sz=SC?t=>SC.createHTML(t):t=>t,z0e="http://www.w3.org/2000/svg",H0e="http://www.w3.org/1998/Math/MathML",Ma=typeof document<"u"?document:null,YE=Ma&&Ma.createElement("template"),q0e={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const i=e==="svg"?Ma.createElementNS(z0e,t):e==="mathml"?Ma.createElementNS(H0e,t):r?Ma.createElement(t,{is:r}):Ma.createElement(t);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>Ma.createTextNode(t),createComment:t=>Ma.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ma.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,i,s){const o=r?r.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),r),!(i===s||!(i=i.nextSibling)););else{YE.innerHTML=sz(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const a=YE.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,r)}return[o?o.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},V0e=Symbol("_vtc");function W0e(t,e,r){const n=t[V0e];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const XE=Symbol("_vod"),j0e=Symbol("_vsh"),U0e=Symbol(""),G0e=/(?:^|;)\s*display\s*:/;function K0e(t,e,r){const n=t.style,i=ln(r);let s=!1;if(r&&!i){if(e)if(ln(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();r[a]==null&&W2(n,a,"")}else for(const o in e)r[o]==null&&W2(n,o,"");for(const o in r)o==="display"&&(s=!0),W2(n,o,r[o])}else if(i){if(e!==r){const o=n[U0e];o&&(r+=";"+o),n.cssText=r,s=G0e.test(r)}}else e&&t.removeAttribute("style");XE in t&&(t[XE]=s?n.display:"",t[j0e]&&(n.display="none"))}const JE=/\s*!important$/;function W2(t,e,r){if(At(r))r.forEach(n=>W2(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=Y0e(t,e);JE.test(r)?t.setProperty(Tu(n),r.replace(JE,""),"important"):t[n]=r}}const ZE=["Webkit","Moz","ms"],M5={};function Y0e(t,e){const r=M5[e];if(r)return r;let n=dc(e);if(n!=="filter"&&n in t)return M5[e]=n;n=f$(n);for(let i=0;i<ZE.length;i++){const s=ZE[i]+n;if(s in t)return M5[e]=s}return e}const QE="http://www.w3.org/1999/xlink";function eL(t,e,r,n,i,s=Gfe(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(QE,e.slice(6,e.length)):t.setAttributeNS(QE,e,r):r==null||s&&!d$(r)?t.removeAttribute(e):t.setAttribute(e,s?"":Ud(r)?String(r):r)}function tL(t,e,r,n,i){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?sz(r):r);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=r==null?t.type==="checkbox"?"on":"":String(r);(a!==l||!("_value"in t))&&(t.value=l),r==null&&t.removeAttribute(e),t._value=r;return}let o=!1;if(r===""||r==null){const a=typeof t[e];a==="boolean"?r=d$(r):r==null&&a==="string"?(r="",o=!0):a==="number"&&(r=0,o=!0)}try{t[e]=r}catch{}o&&t.removeAttribute(i||e)}function X0e(t,e,r,n){t.addEventListener(e,r,n)}function J0e(t,e,r,n){t.removeEventListener(e,r,n)}const rL=Symbol("_vei");function Z0e(t,e,r,n,i=null){const s=t[rL]||(t[rL]={}),o=s[e];if(n&&o)o.value=n;else{const[a,l]=Q0e(e);if(n){const c=s[e]=rpe(n,i);X0e(t,a,c,l)}else o&&(J0e(t,a,o,l),s[e]=void 0)}}const nL=/(?:Once|Passive|Capture)$/;function Q0e(t){let e;if(nL.test(t)){e={};let n;for(;n=t.match(nL);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Tu(t.slice(2)),e]}let A5=0;const epe=Promise.resolve(),tpe=()=>A5||(epe.then(()=>A5=0),A5=Date.now());function rpe(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Qo(npe(n,r.value),e,5,[n])};return r.value=t,r.attached=tpe(),r}function npe(t,e){if(At(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const iL=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,ipe=(t,e,r,n,i,s)=>{const o=i==="svg";e==="class"?W0e(t,n,o):e==="style"?K0e(t,r,n):c4(e)?XS(e)||Z0e(t,e,r,n,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):spe(t,e,n,o))?(tL(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&eL(t,e,n,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ln(n))?tL(t,dc(e),n,s,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),eL(t,e,n,o))};function spe(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&iL(e)&&_t(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return iL(e)&&ln(r)?!1:e in t}const ope=qn({patchProp:ipe},q0e);let sL;function ape(){return sL||(sL=w0e(ope))}const po=(...t)=>{const e=ape().createApp(...t),{mount:r}=e;return e.mount=n=>{const i=cpe(n);if(!i)return;const s=e._component;!_t(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=r(i,!1,lpe(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function lpe(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function cpe(t){return ln(t)?document.querySelector(t):t}function hpe(t){const e=er({},`${t}_SLASH_SPEC`),r=Gr(i=>{const s=i.get(e.key);return new xr({key:new vr(`${t}_SLASH`),...s})}),n=[e,r];return n.key=e.key,n.pluginKey=r.key,e.meta={package:"@milkdown/plugin-slash",displayName:`Ctx<slashSpec>|${t}`},r.meta={package:"@milkdown/plugin-slash",displayName:`Prose<slash>|${t}`},n}var Uf,qg,Vg,Wg,jg,Ih,Ug,Gf,Gg,Kg,fv,oz;class upe{constructor(e){we(this,fv);we(this,Uf);we(this,qg);we(this,Vg);we(this,Wg);we(this,jg);we(this,Ih);we(this,Ug);we(this,Gf);we(this,Gg);we(this,Kg);ne(this,Uf,!1),this.onShow=()=>{},this.onHide=()=>{},ne(this,Kg,(r,n)=>{const{state:i,composing:s}=r,{selection:o,doc:a}=i,{ranges:l}=o,c=Math.min(...l.map(d=>d.$from.pos)),h=Math.max(...l.map(d=>d.$to.pos)),u=n&&n.doc.eq(a)&&n.selection.eq(o);if(V(this,Uf)||((V(this,Wg)??r.dom.parentElement??document.body).appendChild(this.element),ne(this,Uf,!0)),s||u)return;if(!V(this,Ug).call(this,r,n)){this.hide();return}oo({getBoundingClientRect:()=>Nv(r,c,h)},this.element,{placement:"bottom-start",middleware:[ox(),fc(V(this,Gg)),...V(this,qg)],...V(this,Vg)}).then(({x:d,y:p})=>{Object.assign(this.element.style,{left:`${d}px`,top:`${p}px`})}).catch(console.error),this.show()}),this.update=(r,n)=>{V(this,Gf).call(this,r,n)},this.getContent=(r,n=i=>i.type.name==="paragraph")=>{const{selection:i}=r.state,{empty:s,$from:o}=i,a=r.state.selection instanceof Ge;if(typeof document>"u")return;const l=this.element.contains(document.activeElement),c=!r.hasFocus()&&!l,h=!r.editable,f=!vse(n)(r.state.selection);if(!(c||h||!s||!a||f))return o.parent.textBetween(Math.max(0,o.parentOffset-500),o.parentOffset,void 0,"")},this.destroy=()=>{V(this,Gf).cancel()},this.show=()=>{this.element.dataset.show="true",this.onShow()},this.hide=()=>{this.element.dataset.show="false",this.onHide()},this.element=e.content,ne(this,jg,e.debounce??200),ne(this,Ug,e.shouldShow??J1(this,fv,oz)),ne(this,Ih,e.trigger??"/"),ne(this,Gg,e.offset),ne(this,qg,e.middleware??[]),ne(this,Vg,e.floatingUIOptions??{}),ne(this,Wg,e.root),ne(this,Gf,xv(V(this,Kg),V(this,jg)))}}Uf=new WeakMap,qg=new WeakMap,Vg=new WeakMap,Wg=new WeakMap,jg=new WeakMap,Ih=new WeakMap,Ug=new WeakMap,Gf=new WeakMap,Gg=new WeakMap,Kg=new WeakMap,fv=new WeakSet,oz=function(e){const r=this.getContent(e);if(!r)return!1;const n=r.at(-1);return n?Array.isArray(V(this,Ih))?V(this,Ih).includes(n):V(this,Ih)===n:!1};function az(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=az(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Cn(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=az(t))&&(n&&(n+=" "),n+=e);return n}/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:lz,setPrototypeOf:oL,isFrozen:fpe,getPrototypeOf:dpe,getOwnPropertyDescriptor:ppe}=Object;let{freeze:fi,seal:_s,create:TC}=Object,{apply:_C,construct:MC}=typeof Reflect<"u"&&Reflect;fi||(fi=function(e){return e});_s||(_s=function(e){return e});_C||(_C=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];return e.apply(r,i)});MC||(MC=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return new e(...n)});const My=di(Array.prototype.forEach),mpe=di(Array.prototype.lastIndexOf),aL=di(Array.prototype.pop),E0=di(Array.prototype.push),gpe=di(Array.prototype.splice),j2=di(String.prototype.toLowerCase),E5=di(String.prototype.toString),L5=di(String.prototype.match),L0=di(String.prototype.replace),ype=di(String.prototype.indexOf),bpe=di(String.prototype.trim),Ns=di(Object.prototype.hasOwnProperty),Gn=di(RegExp.prototype.test),O0=xpe(TypeError);function di(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return _C(t,e,n)}}function xpe(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return MC(t,r)}}function It(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:j2;oL&&oL(t,null);let n=e.length;for(;n--;){let i=e[n];if(typeof i=="string"){const s=r(i);s!==i&&(fpe(e)||(e[n]=s),i=s)}t[i]=!0}return t}function vpe(t){for(let e=0;e<t.length;e++)Ns(t,e)||(t[e]=null);return t}function wa(t){const e=TC(null);for(const[r,n]of lz(t))Ns(t,r)&&(Array.isArray(n)?e[r]=vpe(n):n&&typeof n=="object"&&n.constructor===Object?e[r]=wa(n):e[r]=n);return e}function D0(t,e){for(;t!==null;){const n=ppe(t,e);if(n){if(n.get)return di(n.get);if(typeof n.value=="function")return di(n.value)}t=dpe(t)}function r(){return null}return r}const lL=fi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),O5=fi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),D5=fi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),wpe=fi(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),I5=fi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),kpe=fi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),cL=fi(["#text"]),hL=fi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),B5=fi(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),uL=fi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ay=fi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Cpe=_s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Spe=_s(/<%[\w\W]*|[\w\W]*%>/gm),Tpe=_s(/\$\{[\w\W]*/gm),_pe=_s(/^data-[\-\w.\u00B7-\uFFFF]+$/),Mpe=_s(/^aria-[\-\w]+$/),cz=_s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ape=_s(/^(?:\w+script|data):/i),Epe=_s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),hz=_s(/^html$/i),Lpe=_s(/^[a-z][.\w]*(-[.\w]+)+$/i);var fL=Object.freeze({__proto__:null,ARIA_ATTR:Mpe,ATTR_WHITESPACE:Epe,CUSTOM_ELEMENT:Lpe,DATA_ATTR:_pe,DOCTYPE_NAME:hz,ERB_EXPR:Spe,IS_ALLOWED_URI:cz,IS_SCRIPT_OR_DATA:Ape,MUSTACHE_EXPR:Cpe,TMPLIT_EXPR:Tpe});const I0={element:1,text:3,progressingInstruction:7,comment:8,document:9},Ope=function(){return typeof window>"u"?null:window},Dpe=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const i="data-tt-policy-suffix";r&&r.hasAttribute(i)&&(n=r.getAttribute(i));const s="dompurify"+(n?"#"+n:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},dL=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function uz(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ope();const e=Qe=>uz(Qe);if(e.version="3.3.0",e.removed=[],!t||!t.document||t.document.nodeType!==I0.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const n=r,i=n.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:u,DOMParser:f,trustedTypes:d}=t,p=l.prototype,m=D0(p,"cloneNode"),g=D0(p,"remove"),y=D0(p,"nextSibling"),b=D0(p,"childNodes"),x=D0(p,"parentNode");if(typeof o=="function"){const Qe=r.createElement("template");Qe.content&&Qe.content.ownerDocument&&(r=Qe.content.ownerDocument)}let T,S="";const{implementation:w,createNodeIterator:_,createDocumentFragment:I,getElementsByTagName:N}=r,{importNode:L}=n;let D=dL();e.isSupported=typeof lz=="function"&&typeof x=="function"&&w&&w.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:P,ERB_EXPR:K,TMPLIT_EXPR:z,DATA_ATTR:$,ARIA_ATTR:H,IS_SCRIPT_OR_DATA:U,ATTR_WHITESPACE:q,CUSTOM_ELEMENT:re}=fL;let{IS_ALLOWED_URI:E}=fL,de=null;const Te=It({},[...lL,...O5,...D5,...I5,...cL]);let O=null;const et=It({},[...hL,...B5,...uL,...Ay]);let He=Object.seal(TC(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Le=null,Xe=null;const dt=Object.seal(TC(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Ct=!0,xt=!0,jt=!1,R=!0,W=!1,ee=!0,ue=!1,le=!1,ce=!1,Ce=!1,ye=!1,be=!1,pe=!0,Ze=!1;const Oe="user-content-";let Ye=!0,rt=!1,J={},ae=null;const Me=It({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let nt=null;const gt=It({},["audio","video","img","source","image","track"]);let Qt=null;const wr=It({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),_r="http://www.w3.org/1998/Math/MathML",Tn="http://www.w3.org/2000/svg",Ht="http://www.w3.org/1999/xhtml";let Pt=Ht,_n=!1,Yr=null;const W1=It({},[_r,Tn,Ht],E5);let Rc=It({},["mi","mo","mn","ms","mtext"]),Pc=It({},["annotation-xml"]);const j1=It({},["title","style","font","a","script"]);let xl=null;const U1=["application/xhtml+xml","text/html"],G1="text/html";let Rr=null,ua=null;const K1=r.createElement("form"),o0=function(j){return j instanceof RegExp||j instanceof Function},Lu=function(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ua&&ua===j)){if((!j||typeof j!="object")&&(j={}),j=wa(j),xl=U1.indexOf(j.PARSER_MEDIA_TYPE)===-1?G1:j.PARSER_MEDIA_TYPE,Rr=xl==="application/xhtml+xml"?E5:j2,de=Ns(j,"ALLOWED_TAGS")?It({},j.ALLOWED_TAGS,Rr):Te,O=Ns(j,"ALLOWED_ATTR")?It({},j.ALLOWED_ATTR,Rr):et,Yr=Ns(j,"ALLOWED_NAMESPACES")?It({},j.ALLOWED_NAMESPACES,E5):W1,Qt=Ns(j,"ADD_URI_SAFE_ATTR")?It(wa(wr),j.ADD_URI_SAFE_ATTR,Rr):wr,nt=Ns(j,"ADD_DATA_URI_TAGS")?It(wa(gt),j.ADD_DATA_URI_TAGS,Rr):gt,ae=Ns(j,"FORBID_CONTENTS")?It({},j.FORBID_CONTENTS,Rr):Me,Le=Ns(j,"FORBID_TAGS")?It({},j.FORBID_TAGS,Rr):wa({}),Xe=Ns(j,"FORBID_ATTR")?It({},j.FORBID_ATTR,Rr):wa({}),J=Ns(j,"USE_PROFILES")?j.USE_PROFILES:!1,Ct=j.ALLOW_ARIA_ATTR!==!1,xt=j.ALLOW_DATA_ATTR!==!1,jt=j.ALLOW_UNKNOWN_PROTOCOLS||!1,R=j.ALLOW_SELF_CLOSE_IN_ATTR!==!1,W=j.SAFE_FOR_TEMPLATES||!1,ee=j.SAFE_FOR_XML!==!1,ue=j.WHOLE_DOCUMENT||!1,Ce=j.RETURN_DOM||!1,ye=j.RETURN_DOM_FRAGMENT||!1,be=j.RETURN_TRUSTED_TYPE||!1,ce=j.FORCE_BODY||!1,pe=j.SANITIZE_DOM!==!1,Ze=j.SANITIZE_NAMED_PROPS||!1,Ye=j.KEEP_CONTENT!==!1,rt=j.IN_PLACE||!1,E=j.ALLOWED_URI_REGEXP||cz,Pt=j.NAMESPACE||Ht,Rc=j.MATHML_TEXT_INTEGRATION_POINTS||Rc,Pc=j.HTML_INTEGRATION_POINTS||Pc,He=j.CUSTOM_ELEMENT_HANDLING||{},j.CUSTOM_ELEMENT_HANDLING&&o0(j.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(He.tagNameCheck=j.CUSTOM_ELEMENT_HANDLING.tagNameCheck),j.CUSTOM_ELEMENT_HANDLING&&o0(j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(He.attributeNameCheck=j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),j.CUSTOM_ELEMENT_HANDLING&&typeof j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(He.allowCustomizedBuiltInElements=j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),W&&(xt=!1),ye&&(Ce=!0),J&&(de=It({},cL),O=[],J.html===!0&&(It(de,lL),It(O,hL)),J.svg===!0&&(It(de,O5),It(O,B5),It(O,Ay)),J.svgFilters===!0&&(It(de,D5),It(O,B5),It(O,Ay)),J.mathMl===!0&&(It(de,I5),It(O,uL),It(O,Ay))),j.ADD_TAGS&&(typeof j.ADD_TAGS=="function"?dt.tagCheck=j.ADD_TAGS:(de===Te&&(de=wa(de)),It(de,j.ADD_TAGS,Rr))),j.ADD_ATTR&&(typeof j.ADD_ATTR=="function"?dt.attributeCheck=j.ADD_ATTR:(O===et&&(O=wa(O)),It(O,j.ADD_ATTR,Rr))),j.ADD_URI_SAFE_ATTR&&It(Qt,j.ADD_URI_SAFE_ATTR,Rr),j.FORBID_CONTENTS&&(ae===Me&&(ae=wa(ae)),It(ae,j.FORBID_CONTENTS,Rr)),Ye&&(de["#text"]=!0),ue&&It(de,["html","head","body"]),de.table&&(It(de,["tbody"]),delete Le.tbody),j.TRUSTED_TYPES_POLICY){if(typeof j.TRUSTED_TYPES_POLICY.createHTML!="function")throw O0('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof j.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw O0('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');T=j.TRUSTED_TYPES_POLICY,S=T.createHTML("")}else T===void 0&&(T=Dpe(d,i)),T!==null&&typeof S=="string"&&(S=T.createHTML(""));fi&&fi(j),ua=j}},a0=It({},[...O5,...D5,...wpe]),l0=It({},[...I5,...kpe]),Y1=function(j){let ve=x(j);(!ve||!ve.tagName)&&(ve={namespaceURI:Pt,tagName:"template"});const qe=j2(j.tagName),rr=j2(ve.tagName);return Yr[j.namespaceURI]?j.namespaceURI===Tn?ve.namespaceURI===Ht?qe==="svg":ve.namespaceURI===_r?qe==="svg"&&(rr==="annotation-xml"||Rc[rr]):!!a0[qe]:j.namespaceURI===_r?ve.namespaceURI===Ht?qe==="math":ve.namespaceURI===Tn?qe==="math"&&Pc[rr]:!!l0[qe]:j.namespaceURI===Ht?ve.namespaceURI===Tn&&!Pc[rr]||ve.namespaceURI===_r&&!Rc[rr]?!1:!l0[qe]&&(j1[qe]||!a0[qe]):!!(xl==="application/xhtml+xml"&&Yr[j.namespaceURI]):!1},Fi=function(j){E0(e.removed,{element:j});try{x(j).removeChild(j)}catch{g(j)}},bo=function(j,ve){try{E0(e.removed,{attribute:ve.getAttributeNode(j),from:ve})}catch{E0(e.removed,{attribute:null,from:ve})}if(ve.removeAttribute(j),j==="is")if(Ce||ye)try{Fi(ve)}catch{}else try{ve.setAttribute(j,"")}catch{}},c0=function(j){let ve=null,qe=null;if(ce)j="<remove></remove>"+j;else{const Mr=L5(j,/^[\r\n\t ]+/);qe=Mr&&Mr[0]}xl==="application/xhtml+xml"&&Pt===Ht&&(j='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+j+"</body></html>");const rr=T?T.createHTML(j):j;if(Pt===Ht)try{ve=new f().parseFromString(rr,xl)}catch{}if(!ve||!ve.documentElement){ve=w.createDocument(Pt,"template",null);try{ve.documentElement.innerHTML=_n?S:rr}catch{}}const Xr=ve.body||ve.documentElement;return j&&qe&&Xr.insertBefore(r.createTextNode(qe),Xr.childNodes[0]||null),Pt===Ht?N.call(ve,ue?"html":"body")[0]:ue?ve.documentElement:Xr},h0=function(j){return _.call(j.ownerDocument||j,j,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Ou=function(j){return j instanceof u&&(typeof j.nodeName!="string"||typeof j.textContent!="string"||typeof j.removeChild!="function"||!(j.attributes instanceof h)||typeof j.removeAttribute!="function"||typeof j.setAttribute!="function"||typeof j.namespaceURI!="string"||typeof j.insertBefore!="function"||typeof j.hasChildNodes!="function")},u0=function(j){return typeof a=="function"&&j instanceof a};function ls(Qe,j,ve){My(Qe,qe=>{qe.call(e,j,ve,ua)})}const f0=function(j){let ve=null;if(ls(D.beforeSanitizeElements,j,null),Ou(j))return Fi(j),!0;const qe=Rr(j.nodeName);if(ls(D.uponSanitizeElement,j,{tagName:qe,allowedTags:de}),ee&&j.hasChildNodes()&&!u0(j.firstElementChild)&&Gn(/<[/\w!]/g,j.innerHTML)&&Gn(/<[/\w!]/g,j.textContent)||j.nodeType===I0.progressingInstruction||ee&&j.nodeType===I0.comment&&Gn(/<[/\w]/g,j.data))return Fi(j),!0;if(!(dt.tagCheck instanceof Function&&dt.tagCheck(qe))&&(!de[qe]||Le[qe])){if(!Le[qe]&&p0(qe)&&(He.tagNameCheck instanceof RegExp&&Gn(He.tagNameCheck,qe)||He.tagNameCheck instanceof Function&&He.tagNameCheck(qe)))return!1;if(Ye&&!ae[qe]){const rr=x(j)||j.parentNode,Xr=b(j)||j.childNodes;if(Xr&&rr){const Mr=Xr.length;for(let un=Mr-1;un>=0;--un){const cs=m(Xr[un],!0);cs.__removalCount=(j.__removalCount||0)+1,rr.insertBefore(cs,y(j))}}}return Fi(j),!0}return j instanceof l&&!Y1(j)||(qe==="noscript"||qe==="noembed"||qe==="noframes")&&Gn(/<\/no(script|embed|frames)/i,j.innerHTML)?(Fi(j),!0):(W&&j.nodeType===I0.text&&(ve=j.textContent,My([P,K,z],rr=>{ve=L0(ve,rr," ")}),j.textContent!==ve&&(E0(e.removed,{element:j.cloneNode()}),j.textContent=ve)),ls(D.afterSanitizeElements,j,null),!1)},d0=function(j,ve,qe){if(pe&&(ve==="id"||ve==="name")&&(qe in r||qe in K1))return!1;if(!(xt&&!Xe[ve]&&Gn($,ve))){if(!(Ct&&Gn(H,ve))){if(!(dt.attributeCheck instanceof Function&&dt.attributeCheck(ve,j))){if(!O[ve]||Xe[ve]){if(!(p0(j)&&(He.tagNameCheck instanceof RegExp&&Gn(He.tagNameCheck,j)||He.tagNameCheck instanceof Function&&He.tagNameCheck(j))&&(He.attributeNameCheck instanceof RegExp&&Gn(He.attributeNameCheck,ve)||He.attributeNameCheck instanceof Function&&He.attributeNameCheck(ve,j))||ve==="is"&&He.allowCustomizedBuiltInElements&&(He.tagNameCheck instanceof RegExp&&Gn(He.tagNameCheck,qe)||He.tagNameCheck instanceof Function&&He.tagNameCheck(qe))))return!1}else if(!Qt[ve]){if(!Gn(E,L0(qe,q,""))){if(!((ve==="src"||ve==="xlink:href"||ve==="href")&&j!=="script"&&ype(qe,"data:")===0&&nt[j])){if(!(jt&&!Gn(U,L0(qe,q,"")))){if(qe)return!1}}}}}}}return!0},p0=function(j){return j!=="annotation-xml"&&L5(j,re)},m0=function(j){ls(D.beforeSanitizeAttributes,j,null);const{attributes:ve}=j;if(!ve||Ou(j))return;const qe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:O,forceKeepAttr:void 0};let rr=ve.length;for(;rr--;){const Xr=ve[rr],{name:Mr,namespaceURI:un,value:cs}=Xr,fa=Rr(Mr),Du=cs;let zr=Mr==="value"?Du:bpe(Du);if(qe.attrName=fa,qe.attrValue=zr,qe.keepAttr=!0,qe.forceKeepAttr=void 0,ls(D.uponSanitizeAttribute,j,qe),zr=qe.attrValue,Ze&&(fa==="id"||fa==="name")&&(bo(Mr,j),zr=Oe+zr),ee&&Gn(/((--!?|])>)|<\/(style|title|textarea)/i,zr)){bo(Mr,j);continue}if(fa==="attributename"&&L5(zr,"href")){bo(Mr,j);continue}if(qe.forceKeepAttr)continue;if(!qe.keepAttr){bo(Mr,j);continue}if(!R&&Gn(/\/>/i,zr)){bo(Mr,j);continue}W&&My([P,K,z],y0=>{zr=L0(zr,y0," ")});const g0=Rr(j.nodeName);if(!d0(g0,fa,zr)){bo(Mr,j);continue}if(T&&typeof d=="object"&&typeof d.getAttributeType=="function"&&!un)switch(d.getAttributeType(g0,fa)){case"TrustedHTML":{zr=T.createHTML(zr);break}case"TrustedScriptURL":{zr=T.createScriptURL(zr);break}}if(zr!==Du)try{un?j.setAttributeNS(un,Mr,zr):j.setAttribute(Mr,zr),Ou(j)?Fi(j):aL(e.removed)}catch{bo(Mr,j)}}ls(D.afterSanitizeAttributes,j,null)},X1=function Qe(j){let ve=null;const qe=h0(j);for(ls(D.beforeSanitizeShadowDOM,j,null);ve=qe.nextNode();)ls(D.uponSanitizeShadowNode,ve,null),f0(ve),m0(ve),ve.content instanceof s&&Qe(ve.content);ls(D.afterSanitizeShadowDOM,j,null)};return e.sanitize=function(Qe){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ve=null,qe=null,rr=null,Xr=null;if(_n=!Qe,_n&&(Qe="<!-->"),typeof Qe!="string"&&!u0(Qe))if(typeof Qe.toString=="function"){if(Qe=Qe.toString(),typeof Qe!="string")throw O0("dirty is not a string, aborting")}else throw O0("toString is not a function");if(!e.isSupported)return Qe;if(le||Lu(j),e.removed=[],typeof Qe=="string"&&(rt=!1),rt){if(Qe.nodeName){const cs=Rr(Qe.nodeName);if(!de[cs]||Le[cs])throw O0("root node is forbidden and cannot be sanitized in-place")}}else if(Qe instanceof a)ve=c0("<!---->"),qe=ve.ownerDocument.importNode(Qe,!0),qe.nodeType===I0.element&&qe.nodeName==="BODY"||qe.nodeName==="HTML"?ve=qe:ve.appendChild(qe);else{if(!Ce&&!W&&!ue&&Qe.indexOf("<")===-1)return T&&be?T.createHTML(Qe):Qe;if(ve=c0(Qe),!ve)return Ce?null:be?S:""}ve&&ce&&Fi(ve.firstChild);const Mr=h0(rt?Qe:ve);for(;rr=Mr.nextNode();)f0(rr),m0(rr),rr.content instanceof s&&X1(rr.content);if(rt)return Qe;if(Ce){if(ye)for(Xr=I.call(ve.ownerDocument);ve.firstChild;)Xr.appendChild(ve.firstChild);else Xr=ve;return(O.shadowroot||O.shadowrootmode)&&(Xr=L.call(n,Xr,!0)),Xr}let un=ue?ve.outerHTML:ve.innerHTML;return ue&&de["!doctype"]&&ve.ownerDocument&&ve.ownerDocument.doctype&&ve.ownerDocument.doctype.name&&Gn(hz,ve.ownerDocument.doctype.name)&&(un="<!DOCTYPE "+ve.ownerDocument.doctype.name+`>
`+un),W&&My([P,K,z],cs=>{un=L0(un,cs," ")}),T&&be?T.createHTML(un):un},e.setConfig=function(){let Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Lu(Qe),le=!0},e.clearConfig=function(){ua=null,le=!1},e.isValidAttribute=function(Qe,j,ve){ua||Lu({});const qe=Rr(Qe),rr=Rr(j);return d0(qe,rr,ve)},e.addHook=function(Qe,j){typeof j=="function"&&E0(D[Qe],j)},e.removeHook=function(Qe,j){if(j!==void 0){const ve=mpe(D[Qe],j);return ve===-1?void 0:gpe(D[Qe],ve,1)[0]}return aL(D[Qe])},e.removeHooks=function(Qe){D[Qe]=[]},e.removeAllHooks=function(){D=dL()},e}var cn=uz();function kd({icon:t,class:e,onClick:r}){return te("span",{class:Cn("milkdown-icon",e),onPointerdown:r,ref:n=>{n&&t&&(n.innerHTML=cn.sanitize(t.trim()))}})}kd.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};var Ipe=Object.defineProperty,pL=Object.getOwnPropertySymbols,Bpe=Object.prototype.hasOwnProperty,Rpe=Object.prototype.propertyIsEnumerable,mL=(t,e,r)=>e in t?Ipe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ppe=(t,e)=>{for(var r in e||(e={}))Bpe.call(e,r)&&mL(t,r,e[r]);if(pL)for(var r of pL(e))Rpe.call(e,r)&&mL(t,r,e[r]);return t};function w1(t,e){return Object.assign(t,{meta:Ppe({package:"@milkdown/components"},e)}),t}const Npe={imageIcon:"",captionIcon:"",uploadButton:"Upload file",confirmButton:"Confirm ",uploadPlaceholderText:"or paste the image link ...",captionPlaceholderText:"Image caption",onUpload:t=>Promise.resolve(URL.createObjectURL(t))},g4=er(Npe,"imageBlockConfigCtx");w1(g4,{displayName:"Config<image-block>",group:"ImageBlock"});function Fpe(t){return _c(t,"paragraph",(e,r,n)=>{var i,s;if(((i=e.children)==null?void 0:i.length)!==1)return;const o=(s=e.children)==null?void 0:s[0];if(!o||o.type!=="image")return;const{url:a,alt:l,title:c}=o,h={type:"image-block",url:a,alt:l,title:c};n.children.splice(r,1,h)})}const b8=ia("remark-image-block",()=>()=>Fpe);w1(b8.plugin,{displayName:"Remark<remarkImageBlock>",group:"ImageBlock"});w1(b8.options,{displayName:"RemarkConfig<remarkImageBlock>",group:"ImageBlock"});var $pe=Object.defineProperty,gL=Object.getOwnPropertySymbols,zpe=Object.prototype.hasOwnProperty,Hpe=Object.prototype.propertyIsEnumerable,yL=(t,e,r)=>e in t?$pe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qpe=(t,e)=>{for(var r in e||(e={}))zpe.call(e,r)&&yL(t,r,e[r]);if(gL)for(var r of gL(e))Hpe.call(e,r)&&yL(t,r,e[r]);return t};const AC="image-block",y4=$r("image-block",()=>({inline:!1,group:"block",selectable:!0,draggable:!0,isolating:!0,marks:"",atom:!0,priority:100,attrs:{src:{default:"",validate:"string"},caption:{default:"",validate:"string"},ratio:{default:1,validate:"number"}},parseDOM:[{tag:`img[data-type="${AC}"]`,getAttrs:t=>{var e;if(!(t instanceof HTMLElement))throw co(t);return{src:t.getAttribute("src")||"",caption:t.getAttribute("caption")||"",ratio:Number((e=t.getAttribute("ratio"))!=null?e:1)}}}],toDOM:t=>["img",qpe({"data-type":AC},t.attrs)],parseMarkdown:{match:({type:t})=>t==="image-block",runner:(t,e,r)=>{const n=e.url,i=e.title;let s=Number(e.alt||1);(Number.isNaN(s)||s===0)&&(s=1),t.addNode(r,{src:n,caption:i,ratio:s})}},toMarkdown:{match:t=>t.type.name==="image-block",runner:(t,e)=>{t.openNode("paragraph"),t.addNode("image",void 0,void 0,{title:e.attrs.caption,url:e.attrs.src,alt:`${Number.parseFloat(e.attrs.ratio).toFixed(2)}`}),t.closeNode()}}}));w1(y4.node,{displayName:"NodeSchema<image-block>",group:"ImageBlock"});function dm({icon:t,class:e,onClick:r}){return te("span",{class:Cn("milkdown-icon",e),onPointerdown:r,ref:n=>{n&&t&&(n.innerHTML=cn.sanitize(t.trim()))}})}dm.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const Vpe=rS("abcdefg",8),Wpe=Sn({props:{src:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setLink:{type:Function,required:!0},imageIcon:{type:String,required:!1},uploadButton:{type:String,required:!1},confirmButton:{type:String,required:!1},uploadPlaceholderText:{type:String,required:!1},onUpload:{type:Function,required:!0}},setup({readonly:t,src:e,setLink:r,onUpload:n,imageIcon:i,uploadButton:s,confirmButton:o,uploadPlaceholderText:a,className:l}){var c,h;const u=ze(!1),f=ze(),d=ze((c=e.value)!=null?c:""),p=ze(Vpe()),m=ze(((h=e.value)==null?void 0:h.length)!==0),g=T=>{const w=T.target.value;m.value=w.length!==0,d.value=w},y=T=>{var S,w;T.key==="Enter"&&r((w=(S=f.value)==null?void 0:S.value)!=null?w:"")},b=()=>{var T,S;r((S=(T=f.value)==null?void 0:T.value)!=null?S:"")},x=T=>{var S;const w=(S=T.target.files)==null?void 0:S[0];w&&n(w).then(_=>{_&&(r(_),m.value=!0)}).catch(_=>{console.error("An error occurred while uploading image"),console.error(_)})};return()=>te("div",{class:Cn("image-edit",l)},te(dm,{icon:i,class:"image-icon"}),te("div",{class:Cn("link-importer",u.value&&"focus")},te("input",{ref:f,draggable:"true",onDragstart:T=>{T.preventDefault(),T.stopPropagation()},disabled:t.value,class:"link-input-area",value:d.value,onInput:g,onKeydown:y,onFocus:()=>u.value=!0,onBlur:()=>u.value=!1}),!m.value&&te("div",{class:"placeholder"},te("input",{disabled:t.value,class:"hidden",id:p.value,type:"file",accept:"image/*",onChange:x}),te("label",{class:"uploader",for:p.value},te(dm,{icon:s})),te("span",{class:"text",onClick:()=>{var T;return(T=f.value)==null?void 0:T.focus()}},a))),d.value&&te("div",{class:"confirm",onClick:()=>b()},te(dm,{icon:o})))}}),jpe=Sn({props:{src:{type:Object,required:!0},caption:{type:Object,required:!0},ratio:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup({src:t,caption:e,ratio:r,readonly:n,setAttr:i,config:s}){var o;const a=ze(),l=ze(),c=ze(!!((o=e.value)!=null&&o.length)),h=ze(0),u=()=>{var b;const x=a.value;if(!x)return;const T=x.closest(".milkdown-image-block");if(!T)return;const S=T.getBoundingClientRect().width;if(!S)return;const w=x.height,_=x.width,I=_<S?w:S*(w/_),N=(I*((b=r.value)!=null?b:1)).toFixed(2);x.dataset.origin=I.toFixed(2),x.dataset.height=N,x.style.height=`${N}px`},f=b=>{b.preventDefault(),b.stopPropagation(),!n.value&&(c.value=!c.value)},d=b=>{const T=b.target.value;h.value&&window.clearTimeout(h.value),h.value=window.setTimeout(()=>{i("caption",T)},1e3)},p=b=>{const T=b.target.value;h.value&&(window.clearTimeout(h.value),h.value=0),i("caption",T)},m=b=>{b.preventDefault();const x=a.value;if(!x)return;const T=x.getBoundingClientRect().top,S=b.clientY-T,w=Number(S<100?100:S).toFixed(2);x.dataset.height=w,x.style.height=`${w}px`},g=()=>{window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",g);const b=a.value;if(!b)return;const x=Number(b.dataset.origin),T=Number(b.dataset.height),S=Number.parseFloat(Number(T/x).toFixed(2));Number.isNaN(S)||i("ratio",S)},y=b=>{n.value||(b.preventDefault(),b.stopPropagation(),window.addEventListener("pointermove",m),window.addEventListener("pointerup",g))};return()=>te(xn,null,te("div",{class:"image-wrapper"},te("div",{class:"operation"},te("div",{class:"operation-item",onPointerdown:f},te(dm,{icon:s.captionIcon}))),te("img",{ref:a,"data-type":AC,onLoad:u,src:t.value,alt:e.value}),te("div",{ref:l,class:"image-resize-handle",onPointerdown:y})),c.value&&te("input",{draggable:"true",onDragstart:b=>{b.preventDefault(),b.stopPropagation()},class:"caption-input",placeholder:s==null?void 0:s.captionPlaceholderText,onInput:d,onBlur:p,value:e.value}))}});var Upe=Object.defineProperty,bL=Object.getOwnPropertySymbols,Gpe=Object.prototype.hasOwnProperty,Kpe=Object.prototype.propertyIsEnumerable,xL=(t,e,r)=>e in t?Upe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ype=(t,e)=>{for(var r in e||(e={}))Gpe.call(e,r)&&xL(t,r,e[r]);if(bL)for(var r of bL(e))Kpe.call(e,r)&&xL(t,r,e[r]);return t};const Xpe=Sn({props:{src:{type:Object,required:!0},caption:{type:Object,required:!0},ratio:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup(t){const{src:e}=t;return()=>{var r;return(r=e.value)!=null&&r.length?te(jpe,Ype({},t)):te(Wpe,{src:t.src,selected:t.selected,readonly:t.readonly,setLink:n=>t.setAttr("src",n),imageIcon:t.config.imageIcon,uploadButton:t.config.uploadButton,confirmButton:t.config.confirmButton,uploadPlaceholderText:t.config.uploadPlaceholderText,onUpload:t.config.onUpload})}}}),fz=f1(y4.node,t=>(e,r,n)=>{const i=ze(e.attrs.src),s=ze(e.attrs.caption),o=ze(e.attrs.ratio),a=ze(!1),l=ze(!r.editable),c=(g,y)=>{if(!r.editable)return;const b=n();b!=null&&r.dispatch(r.state.tr.setNodeAttribute(b,g,g==="src"?cn.sanitize(y):y))},h=t.get(g4.key),u=po(Xpe,{src:i,caption:s,ratio:o,selected:a,readonly:l,setAttr:c,config:h}),f=document.createElement("div");f.className="milkdown-image-block";const d=Gd(()=>{a.value?f.classList.add("selected"):f.classList.remove("selected")}),p=h.proxyDomURL,m=g=>{if(!p)i.value=g.attrs.src;else{const y=p(g.attrs.src);typeof y=="string"?i.value=y:y.then(b=>{i.value=b}).catch(console.error)}o.value=g.attrs.ratio,s.value=g.attrs.caption,l.value=!r.editable};return m(e),u.mount(f),{dom:f,update:g=>g.type!==e.type?!1:(m(g),!0),stopEvent:g=>g.target instanceof HTMLInputElement,selectNode:()=>{a.value=!0},deselectNode:()=>{a.value=!1},destroy:()=>{d(),u.unmount(),f.remove()}}});w1(fz,{displayName:"NodeView<image-block>",group:"ImageBlock"});const Jpe=[b8,y4,fz,g4].flat();var EC,LC;if(typeof WeakMap<"u"){let t=new WeakMap;EC=e=>t.get(e),LC=(e,r)=>(t.set(e,r),r)}else{const t=[];let r=0;EC=n=>{for(let i=0;i<t.length;i+=2)if(t[i]==n)return t[i+1]},LC=(n,i)=>(r==10&&(r=0),t[r++]=n,t[r++]=i)}var Xt=class{constructor(t,e,r,n){this.width=t,this.height=e,this.map=r,this.problems=n}findCell(t){for(let e=0;e<this.map.length;e++){const r=this.map[e];if(r!=t)continue;const n=e%this.width,i=e/this.width|0;let s=n+1,o=i+1;for(let a=1;s<this.width&&this.map[e+a]==r;a++)s++;for(let a=1;o<this.height&&this.map[e+this.width*a]==r;a++)o++;return{left:n,top:i,right:s,bottom:o}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,r){const{left:n,right:i,top:s,bottom:o}=this.findCell(t);return e=="horiz"?(r<0?n==0:i==this.width)?null:this.map[s*this.width+(r<0?n-1:i)]:(r<0?s==0:o==this.height)?null:this.map[n+this.width*(r<0?s-1:o)]}rectBetween(t,e){const{left:r,right:n,top:i,bottom:s}=this.findCell(t),{left:o,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(r,o),top:Math.min(i,l),right:Math.max(n,a),bottom:Math.max(s,c)}}cellsInRect(t){const e=[],r={};for(let n=t.top;n<t.bottom;n++)for(let i=t.left;i<t.right;i++){const s=n*this.width+i,o=this.map[s];r[o]||(r[o]=!0,!(i==t.left&&i&&this.map[s-1]==o||n==t.top&&n&&this.map[s-this.width]==o)&&e.push(o))}return e}positionAt(t,e,r){for(let n=0,i=0;;n++){const s=i+r.child(n).nodeSize;if(n==t){let o=e+t*this.width;const a=(t+1)*this.width;for(;o<a&&this.map[o]<i;)o++;return o==a?s-1:this.map[o]}i=s}}static get(t){return EC(t)||LC(t,Zpe(t))}};function Zpe(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=Qpe(t),r=t.childCount,n=[];let i=0,s=null;const o=[];for(let c=0,h=e*r;c<h;c++)n[c]=0;for(let c=0,h=0;c<r;c++){const u=t.child(c);h++;for(let p=0;;p++){for(;i<n.length&&n[i]!=0;)i++;if(p==u.childCount)break;const m=u.child(p),{colspan:g,rowspan:y,colwidth:b}=m.attrs;for(let x=0;x<y;x++){if(x+c>=r){(s||(s=[])).push({type:"overlong_rowspan",pos:h,n:y-x});break}const T=i+x*e;for(let S=0;S<g;S++){n[T+S]==0?n[T+S]=h:(s||(s=[])).push({type:"collision",row:c,pos:h,n:g-S});const w=b&&b[S];if(w){const _=(T+S)%e*2,I=o[_];I==null||I!=w&&o[_+1]==1?(o[_]=w,o[_+1]=1):I==w&&o[_+1]++}}}i+=g,h+=m.nodeSize}const f=(c+1)*e;let d=0;for(;i<f;)n[i++]==0&&d++;d&&(s||(s=[])).push({type:"missing",row:c,n:d}),h++}(e===0||r===0)&&(s||(s=[])).push({type:"zero_sized"});const a=new Xt(e,r,n,s);let l=!1;for(let c=0;!l&&c<o.length;c+=2)o[c]!=null&&o[c+1]<r&&(l=!0);return l&&eme(a,o,t),a}function Qpe(t){let e=-1,r=!1;for(let n=0;n<t.childCount;n++){const i=t.child(n);let s=0;if(r)for(let o=0;o<n;o++){const a=t.child(o);for(let l=0;l<a.childCount;l++){const c=a.child(l);o+c.attrs.rowspan>n&&(s+=c.attrs.colspan)}}for(let o=0;o<i.childCount;o++){const a=i.child(o);s+=a.attrs.colspan,a.attrs.rowspan>1&&(r=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function eme(t,e,r){t.problems||(t.problems=[]);const n={};for(let i=0;i<t.map.length;i++){const s=t.map[i];if(n[s])continue;n[s]=!0;const o=r.nodeAt(s);if(!o)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=o.attrs;for(let c=0;c<l.colspan;c++){const h=(i+c)%t.width,u=e[h*2];u!=null&&(!l.colwidth||l.colwidth[c]!=u)&&((a||(a=tme(l)))[c]=u)}a&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function tme(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let r=0;r<t.colspan;r++)e.push(0);return e}function vL(t,e){if(typeof t=="string")return{};const r=t.getAttribute("data-colwidth"),n=r&&/^\d+(,\d+)*$/.test(r)?r.split(",").map(o=>Number(o)):null,i=Number(t.getAttribute("colspan")||1),s={colspan:i,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:n&&n.length==i?n:null};for(const o in e){const a=e[o].getFromDOM,l=a&&a(t);l!=null&&(s[o]=l)}return s}function wL(t,e){const r={};t.attrs.colspan!=1&&(r.colspan=t.attrs.colspan),t.attrs.rowspan!=1&&(r.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(r["data-colwidth"]=t.attrs.colwidth.join(","));for(const n in e){const i=e[n].setDOMAttr;i&&i(t.attrs[n],r)}return r}function rme(t){if(t!==null){if(!Array.isArray(t))throw new TypeError("colwidth must be null or an array");for(const e of t)if(typeof e!="number")throw new TypeError("colwidth must be null or an array of numbers")}}function nme(t){const e=t.cellAttributes||{},r={colspan:{default:1,validate:"number"},rowspan:{default:1,validate:"number"},colwidth:{default:null,validate:rme}};for(const n in e)r[n]={default:e[n].default,validate:e[n].validate};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:t.cellContent,attrs:r,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:n=>vL(n,e)}],toDOM(n){return["td",wL(n,e),0]}},table_header:{content:t.cellContent,attrs:r,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:n=>vL(n,e)}],toDOM(n){return["th",wL(n,e),0]}}}}function Ms(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const r in t.nodes){const n=t.nodes[r],i=n.spec.tableRole;i&&(e[i]=n)}}return e}var Hl=new vr("selectingCells");function k1(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function Ds(t){const e=t.selection.$head;for(let r=e.depth;r>0;r--)if(e.node(r).type.spec.tableRole=="row")return!0;return!1}function b4(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const r=k1(e.$head)||ime(e.$head);if(r)return r;throw new RangeError(`No cell found around position ${e.head}`)}function ime(t){for(let e=t.nodeAfter,r=t.pos;e;e=e.firstChild,r++){const n=e.type.spec.tableRole;if(n=="cell"||n=="header_cell")return t.doc.resolve(r)}for(let e=t.nodeBefore,r=t.pos;e;e=e.lastChild,r--){const n=e.type.spec.tableRole;if(n=="cell"||n=="header_cell")return t.doc.resolve(r-e.nodeSize)}}function OC(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function sme(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function x8(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function dz(t,e,r){const n=t.node(-1),i=Xt.get(n),s=t.start(-1),o=i.nextCell(t.pos-s,e,r);return o==null?null:t.node(0).resolve(s+o)}function cu(t,e,r=1){const n={...t,colspan:t.colspan-r};return n.colwidth&&(n.colwidth=n.colwidth.slice(),n.colwidth.splice(e,r),n.colwidth.some(i=>i>0)||(n.colwidth=null)),n}function ome(t,e,r=1){const n={...t,colspan:t.colspan+r};if(n.colwidth){n.colwidth=n.colwidth.slice();for(let i=0;i<r;i++)n.colwidth.splice(e,0,0)}return n}function ame(t,e,r){const n=Ms(e.type.schema).header_cell;for(let i=0;i<t.height;i++)if(e.nodeAt(t.map[r+i*t.width]).type!=n)return!1;return!0}var lr=class ka extends wt{constructor(e,r=e){const n=e.node(-1),i=Xt.get(n),s=e.start(-1),o=i.rectBetween(e.pos-s,r.pos-s),a=e.node(0),l=i.cellsInRect(o).filter(h=>h!=r.pos-s);l.unshift(r.pos-s);const c=l.map(h=>{const u=n.nodeAt(h);if(!u)throw RangeError(`No cell with offset ${h} found`);const f=s+h+1;return new EP(a.resolve(f),a.resolve(f+u.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=r}map(e,r){const n=e.resolve(r.map(this.$anchorCell.pos)),i=e.resolve(r.map(this.$headCell.pos));if(OC(n)&&OC(i)&&x8(n,i)){const s=this.$anchorCell.node(-1)!=n.node(-1);return s&&this.isRowSelection()?ka.rowSelection(n,i):s&&this.isColSelection()?ka.colSelection(n,i):new ka(n,i)}return Ge.between(n,i)}content(){const e=this.$anchorCell.node(-1),r=Xt.get(e),n=this.$anchorCell.start(-1),i=r.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),s={},o=[];for(let l=i.top;l<i.bottom;l++){const c=[];for(let h=l*r.width+i.left,u=i.left;u<i.right;u++,h++){const f=r.map[h];if(s[f])continue;s[f]=!0;const d=r.findCell(f);let p=e.nodeAt(f);if(!p)throw RangeError(`No cell with offset ${f} found`);const m=i.left-d.left,g=d.right-i.right;if(m>0||g>0){let y=p.attrs;if(m>0&&(y=cu(y,0,m)),g>0&&(y=cu(y,y.colspan-g,g)),d.left<i.left){if(p=p.type.createAndFill(y),!p)throw RangeError(`Could not create cell with attrs ${JSON.stringify(y)}`)}else p=p.type.create(y,p.content)}if(d.top<i.top||d.bottom>i.bottom){const y={...p.attrs,rowspan:Math.min(d.bottom,i.bottom)-Math.max(d.top,i.top)};d.top<i.top?p=p.type.createAndFill(y):p=p.type.create(y,p.content)}c.push(p)}o.push(e.child(l).copy(ke.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?e:o;return new Be(ke.from(a),1,1)}replace(e,r=Be.empty){const n=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){const{$from:a,$to:l}=i[o],c=e.mapping.slice(n);e.replace(c.map(a.pos),c.map(l.pos),o?Be.empty:r)}const s=wt.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,r){this.replace(e,new Be(ke.from(r),0,0))}forEachCell(e){const r=this.$anchorCell.node(-1),n=Xt.get(r),i=this.$anchorCell.start(-1),s=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let o=0;o<s.length;o++)e(r.nodeAt(s[o]),i+s[o])}isColSelection(){const e=this.$anchorCell.index(-1),r=this.$headCell.index(-1);if(Math.min(e,r)>0)return!1;const n=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=r+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,i)==this.$headCell.node(-1).childCount}static colSelection(e,r=e){const n=e.node(-1),i=Xt.get(n),s=e.start(-1),o=i.findCell(e.pos-s),a=i.findCell(r.pos-s),l=e.node(0);return o.top<=a.top?(o.top>0&&(e=l.resolve(s+i.map[o.left])),a.bottom<i.height&&(r=l.resolve(s+i.map[i.width*(i.height-1)+a.right-1]))):(a.top>0&&(r=l.resolve(s+i.map[a.left])),o.bottom<i.height&&(e=l.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))),new ka(e,r)}isRowSelection(){const e=this.$anchorCell.node(-1),r=Xt.get(e),n=this.$anchorCell.start(-1),i=r.colCount(this.$anchorCell.pos-n),s=r.colCount(this.$headCell.pos-n);if(Math.min(i,s)>0)return!1;const o=i+this.$anchorCell.nodeAfter.attrs.colspan,a=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,a)==r.width}eq(e){return e instanceof ka&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,r=e){const n=e.node(-1),i=Xt.get(n),s=e.start(-1),o=i.findCell(e.pos-s),a=i.findCell(r.pos-s),l=e.node(0);return o.left<=a.left?(o.left>0&&(e=l.resolve(s+i.map[o.top*i.width])),a.right<i.width&&(r=l.resolve(s+i.map[i.width*(a.top+1)-1]))):(a.left>0&&(r=l.resolve(s+i.map[a.top*i.width])),o.right<i.width&&(e=l.resolve(s+i.map[i.width*(o.top+1)-1]))),new ka(e,r)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,r){return new ka(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){return new ka(e.resolve(r),e.resolve(n))}getBookmark(){return new lme(this.$anchorCell.pos,this.$headCell.pos)}};lr.prototype.visible=!1;wt.jsonID("cell",lr);var lme=class pz{constructor(e,r){this.anchor=e,this.head=r}map(e){return new pz(e.map(this.anchor),e.map(this.head))}resolve(e){const r=e.resolve(this.anchor),n=e.resolve(this.head);return r.parent.type.spec.tableRole=="row"&&n.parent.type.spec.tableRole=="row"&&r.index()<r.parent.childCount&&n.index()<n.parent.childCount&&x8(r,n)?new lr(r,n):wt.near(n,1)}};function cme(t){if(!(t.selection instanceof lr))return null;const e=[];return t.selection.forEachCell((r,n)=>{e.push(jr.node(n,n+r.nodeSize,{class:"selectedCell"}))}),or.create(t.doc,e)}function hme({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let r=t.pos,n=e.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,r++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,n--);return r==n&&/row|table/.test(t.node(i).type.spec.tableRole)}function ume({$from:t,$to:e}){let r,n;for(let i=t.depth;i>0;i--){const s=t.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}for(let i=e.depth;i>0;i--){const s=e.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}return r!==n&&e.parentOffset===0}function fme(t,e,r){const n=(e||t).selection,i=(e||t).doc;let s,o;if(n instanceof it&&(o=n.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")s=lr.create(i,n.from);else if(o=="row"){const a=i.resolve(n.from+1);s=lr.rowSelection(a,a)}else if(!r){const a=Xt.get(n.node),l=n.from+1,c=l+a.map[a.width*a.height-1];s=lr.create(i,l+1,c)}}else n instanceof Ge&&hme(n)?s=Ge.create(i,n.from):n instanceof Ge&&ume(n)&&(s=Ge.create(i,n.$from.start(),n.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}var dme=new vr("fix-tables");function mz(t,e,r,n){const i=t.childCount,s=e.childCount;e:for(let o=0,a=0;o<s;o++){const l=e.child(o);for(let c=a,h=Math.min(i,o+3);c<h;c++)if(t.child(c)==l){a=c+1,r+=l.nodeSize;continue e}n(l,r),a<i&&t.child(a).sameMarkup(l)?mz(t.child(a),l,r+1,n):l.nodesBetween(0,l.content.size,n,r+1),r+=l.nodeSize}}function pme(t,e){let r;const n=(i,s)=>{i.type.spec.tableRole=="table"&&(r=mme(t,i,s,r))};return e?e.doc!=t.doc&&mz(e.doc,t.doc,0,n):t.doc.descendants(n),r}function mme(t,e,r,n){const i=Xt.get(e);if(!i.problems)return n;n||(n=t.tr);const s=[];for(let l=0;l<i.height;l++)s.push(0);for(let l=0;l<i.problems.length;l++){const c=i.problems[l];if(c.type=="collision"){const h=e.nodeAt(c.pos);if(!h)continue;const u=h.attrs;for(let f=0;f<u.rowspan;f++)s[c.row+f]+=c.n;n.setNodeMarkup(n.mapping.map(r+1+c.pos),null,cu(u,u.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const h=e.nodeAt(c.pos);if(!h)continue;n.setNodeMarkup(n.mapping.map(r+1+c.pos),null,{...h.attrs,rowspan:h.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const h=e.nodeAt(c.pos);if(!h)continue;n.setNodeMarkup(n.mapping.map(r+1+c.pos),null,{...h.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const h=n.mapping.map(r);n.delete(h,h+e.nodeSize)}}let o,a;for(let l=0;l<s.length;l++)s[l]&&(o==null&&(o=l),a=l);for(let l=0,c=r+1;l<i.height;l++){const h=e.child(l),u=c+h.nodeSize,f=s[l];if(f>0){let d="cell";h.firstChild&&(d=h.firstChild.type.spec.tableRole);const p=[];for(let g=0;g<f;g++){const y=Ms(t.schema)[d].createAndFill();y&&p.push(y)}const m=(l==0||o==l-1)&&a==l?c+1:u-1;n.insert(n.mapping.map(m),p)}c=u}return n.setMeta(dme,{fixTables:!0})}function gz(t){const e=Xt.get(t),r=[],n=e.height,i=e.width;for(let s=0;s<n;s++){const o=[];for(let a=0;a<i;a++){const l=s*i+a,c=e.map[l];if(s>0){const h=l-i,u=e.map[h];if(c===u){o.push(null);continue}}if(a>0){const h=l-1,u=e.map[h];if(c===u){o.push(null);continue}}o.push(t.nodeAt(c))}r.push(o)}return r}function yz(t,e){const r=[],n=Xt.get(t),i=n.height,s=n.width;for(let a=0;a<i;a++){const l=t.child(a),c=[];for(let u=0;u<s;u++){const f=e[a][u];if(!f)continue;const d=n.map[a*n.width+u],p=t.nodeAt(d);if(!p)continue;const m=p.type.createChecked(f.attrs,f.content,f.marks);c.push(m)}const h=l.type.createChecked(l.attrs,c,l.marks);r.push(h)}return t.type.createChecked(t.attrs,r,t.marks)}function Kd(t){return gme(e=>e.type.spec.tableRole==="table",t)}function gme(t,e){for(let r=e.depth;r>=0;r-=1){const n=e.node(r);if(t(n)){const i=r===0?0:e.before(r),s=e.start(r);return{node:n,pos:i,start:s,depth:r}}}return null}function Gu(t,e){const r=Kd(e.$from);if(!r)return;const n=Xt.get(r.node);return t<0||t>n.width-1?void 0:n.cellsInRect({left:t,right:t+1,top:0,bottom:n.height}).map(s=>{const o=r.node.nodeAt(s),a=s+r.start;return{pos:a,start:a+1,node:o,depth:r.depth+2}})}function Ku(t,e){const r=Kd(e.$from);if(!r)return;const n=Xt.get(r.node);return t<0||t>n.height-1?void 0:n.cellsInRect({left:0,right:n.width,top:t,bottom:t+1}).map(s=>{const o=r.node.nodeAt(s),a=s+r.start;return{pos:a,start:a+1,node:o,depth:r.depth+2}})}function kL(t,e,r=e){let n=e,i=r;for(let u=e;u>=0;u--){const f=Gu(u,t.selection);f&&f.forEach(d=>{const p=d.node.attrs.colspan+u-1;p>=n&&(n=u),p>i&&(i=p)})}for(let u=e;u<=i;u++){const f=Gu(u,t.selection);f&&f.forEach(d=>{const p=d.node.attrs.colspan+u-1;d.node.attrs.colspan>1&&p>i&&(i=p)})}const s=[];for(let u=n;u<=i;u++){const f=Gu(u,t.selection);f&&f.length>0&&s.push(u)}n=s[0],i=s[s.length-1];const o=Gu(n,t.selection),a=Ku(0,t.selection);if(!o||!a)return;const l=t.doc.resolve(o[o.length-1].pos);let c;for(let u=i;u>=n;u--){const f=Gu(u,t.selection);if(f&&f.length>0){for(let d=a.length-1;d>=0;d--)if(a[d].pos===f[0].pos){c=f[0];break}if(c)break}}if(!c)return;const h=t.doc.resolve(c.pos);return{$anchor:l,$head:h,indexes:s}}function CL(t,e,r=e){let n=e,i=r;for(let u=e;u>=0;u--){const f=Ku(u,t.selection);f&&f.forEach(d=>{const p=d.node.attrs.rowspan+u-1;p>=n&&(n=u),p>i&&(i=p)})}for(let u=e;u<=i;u++){const f=Ku(u,t.selection);f&&f.forEach(d=>{const p=d.node.attrs.rowspan+u-1;d.node.attrs.rowspan>1&&p>i&&(i=p)})}const s=[];for(let u=n;u<=i;u++){const f=Ku(u,t.selection);f&&f.length>0&&s.push(u)}n=s[0],i=s[s.length-1];const o=Ku(n,t.selection),a=Gu(0,t.selection);if(!o||!a)return;const l=t.doc.resolve(o[o.length-1].pos);let c;for(let u=i;u>=n;u--){const f=Ku(u,t.selection);if(f&&f.length>0){for(let d=a.length-1;d>=0;d--)if(a[d].pos===f[0].pos){c=f[0];break}if(c)break}}if(!c)return;const h=t.doc.resolve(c.pos);return{$anchor:l,$head:h,indexes:s}}function bz(t,e,r,n){const i=e[0]>r[0]?-1:1,s=t.splice(e[0],e.length),o=s.length%2===0?1:0;let a;return a=i===-1?r[0]:r[r.length-1]-o,t.splice(a,0,...s),t}function SL(t){return t[0].map((e,r)=>t.map(n=>n[r]))}function yme(t){var e,r;const{tr:n,originIndex:i,targetIndex:s,select:o,pos:a}=t,l=n.doc.resolve(a),c=Kd(l);if(!c)return!1;const h=(e=kL(n,i))==null?void 0:e.indexes,u=(r=kL(n,s))==null?void 0:r.indexes;if(!h||!u||h.includes(s))return!1;const f=bme(c.node,h,u);if(n.replaceWith(c.pos,c.pos+c.node.nodeSize,f),!o)return!0;const d=Xt.get(f),p=c.start,m=s,g=d.positionAt(d.height-1,m,f),y=n.doc.resolve(p+g),b=d.positionAt(0,m,f),x=n.doc.resolve(p+b);return n.setSelection(lr.colSelection(y,x)),!0}function bme(t,e,r,n){let i=SL(gz(t));return i=bz(i,e,r),i=SL(i),yz(t,i)}function xme(t){var e,r;const{tr:n,originIndex:i,targetIndex:s,select:o,pos:a}=t,l=n.doc.resolve(a),c=Kd(l);if(!c)return!1;const h=(e=CL(n,i))==null?void 0:e.indexes,u=(r=CL(n,s))==null?void 0:r.indexes;if(!h||!u||h.includes(s))return!1;const f=vme(c.node,h,u);if(n.replaceWith(c.pos,c.pos+c.node.nodeSize,f),!o)return!0;const d=Xt.get(f),p=c.start,m=s,g=d.positionAt(m,d.width-1,f),y=n.doc.resolve(p+g),b=d.positionAt(m,0,f),x=n.doc.resolve(p+b);return n.setSelection(lr.rowSelection(y,x)),!0}function vme(t,e,r,n){let i=gz(t);return i=bz(i,e,r),yz(t,i)}function Ac(t){const e=t.selection,r=b4(t),n=r.node(-1),i=r.start(-1),s=Xt.get(n);return{...e instanceof lr?s.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):s.findCell(r.pos-i),tableStart:i,map:s,table:n}}function xz(t,{map:e,tableStart:r,table:n},i){let s=i>0?-1:0;ame(e,n,i+s)&&(s=i==0||i==e.width?null:0);for(let o=0;o<e.height;o++){const a=o*e.width+i;if(i>0&&i<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],c=n.nodeAt(l);t.setNodeMarkup(t.mapping.map(r+l),null,ome(c.attrs,i-e.colCount(l))),o+=c.attrs.rowspan-1}else{const l=s==null?Ms(n.type.schema).cell:n.nodeAt(e.map[a+s]).type,c=e.positionAt(o,i,n);t.insert(t.mapping.map(r+c),l.createAndFill())}}return t}function wme(t,e){if(!Ds(t))return!1;if(e){const r=Ac(t);e(xz(t.tr,r,r.left))}return!0}function kme(t,e){if(!Ds(t))return!1;if(e){const r=Ac(t);e(xz(t.tr,r,r.right))}return!0}function Cme(t,{map:e,table:r,tableStart:n},i){const s=t.mapping.maps.length;for(let o=0;o<e.height;){const a=o*e.width+i,l=e.map[a],c=r.nodeAt(l),h=c.attrs;if(i>0&&e.map[a-1]==l||i<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(s).map(n+l),null,cu(h,i-e.colCount(l)));else{const u=t.mapping.slice(s).map(n+l);t.delete(u,u+c.nodeSize)}o+=h.rowspan}}function Sme(t,e){if(!Ds(t))return!1;if(e){const r=Ac(t),n=t.tr;if(r.left==0&&r.right==r.map.width)return!1;for(let i=r.right-1;Cme(n,r,i),i!=r.left;i--){const s=r.tableStart?n.doc.nodeAt(r.tableStart-1):n.doc;if(!s)throw RangeError("No table found");r.table=s,r.map=Xt.get(s)}e(n)}return!0}function Tme(t,{map:e,table:r,tableStart:n},i){let s=0;for(let c=0;c<i;c++)s+=r.child(c).nodeSize;const o=s+r.child(i).nodeSize,a=t.mapping.maps.length;t.delete(s+n,o+n);const l=new Set;for(let c=0,h=i*e.width;c<e.width;c++,h++){const u=e.map[h];if(!l.has(u)){if(l.add(u),i>0&&u==e.map[h-e.width]){const f=r.nodeAt(u).attrs;t.setNodeMarkup(t.mapping.slice(a).map(u+n),null,{...f,rowspan:f.rowspan-1}),c+=f.colspan-1}else if(i<e.height&&u==e.map[h+e.width]){const f=r.nodeAt(u),d=f.attrs,p=f.type.create({...d,rowspan:f.attrs.rowspan-1},f.content),m=e.positionAt(i+1,c,r);t.insert(t.mapping.slice(a).map(n+m),p),c+=d.colspan-1}}}}function _me(t,e){if(!Ds(t))return!1;if(e){const r=Ac(t),n=t.tr;if(r.top==0&&r.bottom==r.map.height)return!1;for(let i=r.bottom-1;Tme(n,r,i),i!=r.top;i--){const s=r.tableStart?n.doc.nodeAt(r.tableStart-1):n.doc;if(!s)throw RangeError("No table found");r.table=s,r.map=Xt.get(r.table)}e(n)}return!0}function Mme(t,e){return function(r,n){if(!Ds(r))return!1;const i=b4(r);if(i.nodeAfter.attrs[t]===e)return!1;if(n){const s=r.tr;r.selection instanceof lr?r.selection.forEachCell((o,a)=>{o.attrs[t]!==e&&s.setNodeMarkup(a,null,{...o.attrs,[t]:e})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[t]:e}),n(s)}return!0}}function Ame(t){return function(e,r){if(!Ds(e))return!1;if(r){const n=Ms(e.schema),i=Ac(e),s=e.tr,o=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),a=o.map(l=>i.table.nodeAt(l));for(let l=0;l<o.length;l++)a[l].type==n.header_cell&&s.setNodeMarkup(i.tableStart+o[l],n.cell,a[l].attrs);if(s.steps.length==0)for(let l=0;l<o.length;l++)s.setNodeMarkup(i.tableStart+o[l],n.header_cell,a[l].attrs);r(s)}return!0}}function TL(t,e,r){const n=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<n.length;i++){const s=e.table.nodeAt(n[i]);if(s&&s.type!==r.header_cell)return!1}return!0}function v8(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?Ame(t):function(r,n){if(!Ds(r))return!1;if(n){const i=Ms(r.schema),s=Ac(r),o=r.tr,a=TL("row",s,i),l=TL("column",s,i),h=(t==="column"?a:t==="row"?l:!1)?1:0,u=t=="column"?{left:0,top:h,right:1,bottom:s.map.height}:t=="row"?{left:h,top:0,right:s.map.width,bottom:1}:s,f=t=="column"?l?i.cell:i.header_cell:t=="row"?a?i.cell:i.header_cell:i.cell;s.map.cellsInRect(u).forEach(d=>{const p=d+s.tableStart,m=o.doc.nodeAt(p);m&&o.setNodeMarkup(p,f,m.attrs)}),n(o)}return!0}}v8("row",{useDeprecatedLogic:!0});v8("column",{useDeprecatedLogic:!0});v8("cell",{useDeprecatedLogic:!0});function Eme(t,e){if(e<0){const r=t.nodeBefore;if(r)return t.pos-r.nodeSize;for(let n=t.index(-1)-1,i=t.before();n>=0;n--){const s=t.node(-1).child(n),o=s.lastChild;if(o)return i-1-o.nodeSize;i-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const r=t.node(-1);for(let n=t.indexAfter(-1),i=t.after();n<r.childCount;n++){const s=r.child(n);if(s.childCount)return i+1;i+=s.nodeSize}}return null}function vz(t){return function(e,r){if(!Ds(e))return!1;const n=Eme(b4(e),t);if(n==null)return!1;if(r){const i=e.doc.resolve(n);r(e.tr.setSelection(Ge.between(i,sme(i))).scrollIntoView())}return!0}}function Lme(t,e){const r=t.selection.$anchor;for(let n=r.depth;n>0;n--)if(r.node(n).type.spec.tableRole=="table")return e&&e(t.tr.delete(r.before(n),r.after(n)).scrollIntoView()),!0;return!1}function Ey(t,e){const r=t.selection;if(!(r instanceof lr))return!1;if(e){const n=t.tr,i=Ms(t.schema).cell.createAndFill().content;r.forEachCell((s,o)=>{s.content.eq(i)||n.replace(n.mapping.map(o+1),n.mapping.map(o+s.nodeSize-1),new Be(i,0,0))}),n.docChanged&&e(n)}return!0}function Ome(t){return(e,r)=>{const{from:n,to:i,select:s=!0,pos:o=e.selection.from}=t,a=e.tr;return xme({tr:a,originIndex:n,targetIndex:i,select:s,pos:o})?(r==null||r(a),!0):!1}}function Dme(t){return(e,r)=>{const{from:n,to:i,select:s=!0,pos:o=e.selection.from}=t,a=e.tr;return yme({tr:a,originIndex:n,targetIndex:i,select:s,pos:o})?(r==null||r(a),!0):!1}}function Ime(t){if(!t.size)return null;let{content:e,openStart:r,openEnd:n}=t;for(;e.childCount==1&&(r>0&&n>0||e.child(0).type.spec.tableRole=="table");)r--,n--,e=e.child(0).content;const i=e.child(0),s=i.type.spec.tableRole,o=i.type.schema,a=[];if(s=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const h=l?0:Math.max(0,r-1),u=l<e.childCount-1?0:Math.max(0,n-1);(h||u)&&(c=DC(Ms(o).row,new Be(c,h,u)).content),a.push(c)}else if(s=="cell"||s=="header_cell")a.push(r||n?DC(Ms(o).row,new Be(e,r,n)).content:e);else return null;return Bme(o,a)}function Bme(t,e){const r=[];for(let i=0;i<e.length;i++){const s=e[i];for(let o=s.childCount-1;o>=0;o--){const{rowspan:a,colspan:l}=s.child(o).attrs;for(let c=i;c<i+a;c++)r[c]=(r[c]||0)+l}}let n=0;for(let i=0;i<r.length;i++)n=Math.max(n,r[i]);for(let i=0;i<r.length;i++)if(i>=e.length&&e.push(ke.empty),r[i]<n){const s=Ms(t).cell.createAndFill(),o=[];for(let a=r[i];a<n;a++)o.push(s);e[i]=e[i].append(ke.from(o))}return{height:e.length,width:n,rows:e}}function DC(t,e){const r=t.createAndFill();return new AP(r).replace(0,r.content.size,e).doc}function Rme({width:t,height:e,rows:r},n,i){if(t!=n){const s=[],o=[];for(let a=0;a<r.length;a++){const l=r[a],c=[];for(let h=s[a]||0,u=0;h<n;u++){let f=l.child(u%l.childCount);h+f.attrs.colspan>n&&(f=f.type.createChecked(cu(f.attrs,f.attrs.colspan,h+f.attrs.colspan-n),f.content)),c.push(f),h+=f.attrs.colspan;for(let d=1;d<f.attrs.rowspan;d++)s[a+d]=(s[a+d]||0)+f.attrs.colspan}o.push(ke.from(c))}r=o,t=n}if(e!=i){const s=[];for(let o=0,a=0;o<i;o++,a++){const l=[],c=r[a%e];for(let h=0;h<c.childCount;h++){let u=c.child(h);o+u.attrs.rowspan>i&&(u=u.type.create({...u.attrs,rowspan:Math.max(1,i-u.attrs.rowspan)},u.content)),l.push(u)}s.push(ke.from(l))}r=s,e=i}return{width:t,height:e,rows:r}}function Pme(t,e,r,n,i,s,o){const a=t.doc.type.schema,l=Ms(a);let c,h;if(i>e.width)for(let u=0,f=0;u<e.height;u++){const d=r.child(u);f+=d.nodeSize;const p=[];let m;d.lastChild==null||d.lastChild.type==l.cell?m=c||(c=l.cell.createAndFill()):m=h||(h=l.header_cell.createAndFill());for(let g=e.width;g<i;g++)p.push(m);t.insert(t.mapping.slice(o).map(f-1+n),p)}if(s>e.height){const u=[];for(let p=0,m=(e.height-1)*e.width;p<Math.max(e.width,i);p++){const g=p>=e.width?!1:r.nodeAt(e.map[m+p]).type==l.header_cell;u.push(g?h||(h=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const f=l.row.create(null,ke.from(u)),d=[];for(let p=e.height;p<s;p++)d.push(f);t.insert(t.mapping.slice(o).map(n+r.nodeSize-2),d)}return!!(c||h)}function _L(t,e,r,n,i,s,o,a){if(o==0||o==e.height)return!1;let l=!1;for(let c=i;c<s;c++){const h=o*e.width+c,u=e.map[h];if(e.map[h-e.width]==u){l=!0;const f=r.nodeAt(u),{top:d,left:p}=e.findCell(u);t.setNodeMarkup(t.mapping.slice(a).map(u+n),null,{...f.attrs,rowspan:o-d}),t.insert(t.mapping.slice(a).map(e.positionAt(o,p,r)),f.type.createAndFill({...f.attrs,rowspan:d+f.attrs.rowspan-o})),c+=f.attrs.colspan-1}}return l}function ML(t,e,r,n,i,s,o,a){if(o==0||o==e.width)return!1;let l=!1;for(let c=i;c<s;c++){const h=c*e.width+o,u=e.map[h];if(e.map[h-1]==u){l=!0;const f=r.nodeAt(u),d=e.colCount(u),p=t.mapping.slice(a).map(u+n);t.setNodeMarkup(p,null,cu(f.attrs,o-d,f.attrs.colspan-(o-d))),t.insert(p+f.nodeSize,f.type.createAndFill(cu(f.attrs,0,o-d))),c+=f.attrs.rowspan-1}}return l}function AL(t,e,r,n,i){let s=r?t.doc.nodeAt(r-1):t.doc;if(!s)throw new Error("No table found");let o=Xt.get(s);const{top:a,left:l}=n,c=l+i.width,h=a+i.height,u=t.tr;let f=0;function d(){if(s=r?u.doc.nodeAt(r-1):u.doc,!s)throw new Error("No table found");o=Xt.get(s),f=u.mapping.maps.length}Pme(u,o,s,r,c,h,f)&&d(),_L(u,o,s,r,l,c,a,f)&&d(),_L(u,o,s,r,l,c,h,f)&&d(),ML(u,o,s,r,a,h,l,f)&&d(),ML(u,o,s,r,a,h,c,f)&&d();for(let p=a;p<h;p++){const m=o.positionAt(p,l,s),g=o.positionAt(p,c,s);u.replace(u.mapping.slice(f).map(m+r),u.mapping.slice(f).map(g+r),new Be(i.rows[p-a],0,0))}d(),u.setSelection(new lr(u.doc.resolve(r+o.positionAt(a,l,s)),u.doc.resolve(r+o.positionAt(h-1,c-1,s)))),e(u)}var Nme=j7({ArrowLeft:Ly("horiz",-1),ArrowRight:Ly("horiz",1),ArrowUp:Ly("vert",-1),ArrowDown:Ly("vert",1),"Shift-ArrowLeft":Oy("horiz",-1),"Shift-ArrowRight":Oy("horiz",1),"Shift-ArrowUp":Oy("vert",-1),"Shift-ArrowDown":Oy("vert",1),Backspace:Ey,"Mod-Backspace":Ey,Delete:Ey,"Mod-Delete":Ey});function U2(t,e,r){return r.eq(t.selection)?!1:(e&&e(t.tr.setSelection(r).scrollIntoView()),!0)}function Ly(t,e){return(r,n,i)=>{if(!i)return!1;const s=r.selection;if(s instanceof lr)return U2(r,n,wt.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const o=wz(i,t,e);if(o==null)return!1;if(t=="horiz")return U2(r,n,wt.near(r.doc.resolve(s.head+e),e));{const a=r.doc.resolve(o),l=dz(a,t,e);let c;return l?c=wt.near(l,1):e<0?c=wt.near(r.doc.resolve(a.before(-1)),-1):c=wt.near(r.doc.resolve(a.after(-1)),1),U2(r,n,c)}}}function Oy(t,e){return(r,n,i)=>{if(!i)return!1;const s=r.selection;let o;if(s instanceof lr)o=s;else{const l=wz(i,t,e);if(l==null)return!1;o=new lr(r.doc.resolve(l))}const a=dz(o.$headCell,t,e);return a?U2(r,n,new lr(o.$anchorCell,a)):!1}}function Fme(t,e){const r=t.state.doc,n=k1(r.resolve(e));return n?(t.dispatch(t.state.tr.setSelection(new lr(n))),!0):!1}function $me(t,e,r){if(!Ds(t.state))return!1;let n=Ime(r);const i=t.state.selection;if(i instanceof lr){n||(n={width:1,height:1,rows:[ke.from(DC(Ms(t.state.schema).cell,r))]});const s=i.$anchorCell.node(-1),o=i.$anchorCell.start(-1),a=Xt.get(s).rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o);return n=Rme(n,a.right-a.left,a.bottom-a.top),AL(t.state,t.dispatch,o,a,n),!0}else if(n){const s=b4(t.state),o=s.start(-1);return AL(t.state,t.dispatch,o,Xt.get(s.node(-1)).findCell(s.pos-o),n),!0}else return!1}function zme(t,e){var r;if(e.ctrlKey||e.metaKey)return;const n=EL(t,e.target);let i;if(e.shiftKey&&t.state.selection instanceof lr)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&n&&(i=k1(t.state.selection.$anchor))!=null&&((r=R5(t,e))==null?void 0:r.pos)!=i.pos)s(i,e),e.preventDefault();else if(!n)return;function s(l,c){let h=R5(t,c);const u=Hl.getState(t.state)==null;if(!h||!x8(l,h))if(u)h=l;else return;const f=new lr(l,h);if(u||!t.state.selection.eq(f)){const d=t.state.tr.setSelection(f);u&&d.setMeta(Hl,l.pos),t.dispatch(d)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",a),Hl.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Hl,-1))}function a(l){const c=l,h=Hl.getState(t.state);let u;if(h!=null)u=t.state.doc.resolve(h);else if(EL(t,c.target)!=n&&(u=R5(t,e),!u))return o();u&&s(u,c)}t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",a)}function wz(t,e,r){if(!(t.state.selection instanceof Ge))return null;const{$head:n}=t.state.selection;for(let i=n.depth-1;i>=0;i--){const s=n.node(i);if((r<0?n.index(i):n.indexAfter(i))!=(r<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const a=n.before(i),l=e=="vert"?r>0?"down":"up":r>0?"right":"left";return t.endOfTextblock(l)?a:null}}return null}function EL(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function R5(t,e){const r=t.posAtCoords({left:e.clientX,top:e.clientY});return r&&r?k1(t.state.doc.resolve(r.pos)):null}var Hme=class{constructor(t,e){this.node=t,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),IC(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,IC(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function IC(t,e,r,n,i,s){var o;let a=0,l=!0,c=e.firstChild;const h=t.firstChild;if(h){for(let u=0,f=0;u<h.childCount;u++){const{colspan:d,colwidth:p}=h.child(u).attrs;for(let m=0;m<d;m++,f++){const g=i==f?s:p&&p[m],y=g?g+"px":"";if(a+=g||n,g||(l=!1),c)c.style.width!=y&&(c.style.width=y),c=c.nextSibling;else{const b=document.createElement("col");b.style.width=y,e.appendChild(b)}}}for(;c;){const u=c.nextSibling;(o=c.parentNode)==null||o.removeChild(c),c=u}l?(r.style.width=a+"px",r.style.minWidth=""):(r.style.width="",r.style.minWidth=a+"px")}}var Yi=new vr("tableColumnResizing");function qme({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:r=100,View:n=Hme,lastColumnResizable:i=!0}={}){const s=new xr({key:Yi,state:{init(o,a){var l,c;const h=(c=(l=s.spec)==null?void 0:l.props)==null?void 0:c.nodeViews,u=Ms(a.schema).table.name;return n&&h&&(h[u]=(f,d)=>new n(f,r,d)),new Vme(-1,!1)},apply(o,a){return a.apply(o)}},props:{attributes:o=>{const a=Yi.getState(o);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,a)=>{Wme(o,a,t,i)},mouseleave:o=>{jme(o)},mousedown:(o,a)=>{Ume(o,a,e,r)}},decorations:o=>{const a=Yi.getState(o);if(a&&a.activeHandle>-1)return Jme(o,a.activeHandle)},nodeViews:{}}});return s}var Vme=class G2{constructor(e,r){this.activeHandle=e,this.dragging=r}apply(e){const r=this,n=e.getMeta(Yi);if(n&&n.setHandle!=null)return new G2(n.setHandle,!1);if(n&&n.setDragging!==void 0)return new G2(r.activeHandle,n.setDragging);if(r.activeHandle>-1&&e.docChanged){let i=e.mapping.map(r.activeHandle,-1);return OC(e.doc.resolve(i))||(i=-1),new G2(i,r.dragging)}return r}};function Wme(t,e,r,n){if(!t.editable)return;const i=Yi.getState(t.state);if(i&&!i.dragging){const s=Kme(e.target);let o=-1;if(s){const{left:a,right:l}=s.getBoundingClientRect();e.clientX-a<=r?o=LL(t,e,"left",r):l-e.clientX<=r&&(o=LL(t,e,"right",r))}if(o!=i.activeHandle){if(!n&&o!==-1){const a=t.state.doc.resolve(o),l=a.node(-1),c=Xt.get(l),h=a.start(-1);if(c.colCount(a.pos-h)+a.nodeAfter.attrs.colspan-1==c.width-1)return}kz(t,o)}}}function jme(t){if(!t.editable)return;const e=Yi.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&kz(t,-1)}function Ume(t,e,r,n){var i;if(!t.editable)return!1;const s=(i=t.dom.ownerDocument.defaultView)!=null?i:window,o=Yi.getState(t.state);if(!o||o.activeHandle==-1||o.dragging)return!1;const a=t.state.doc.nodeAt(o.activeHandle),l=Gme(t,o.activeHandle,a.attrs);t.dispatch(t.state.tr.setMeta(Yi,{setDragging:{startX:e.clientX,startWidth:l}}));function c(u){s.removeEventListener("mouseup",c),s.removeEventListener("mousemove",h);const f=Yi.getState(t.state);f!=null&&f.dragging&&(Yme(t,f.activeHandle,OL(f.dragging,u,r)),t.dispatch(t.state.tr.setMeta(Yi,{setDragging:null})))}function h(u){if(!u.which)return c(u);const f=Yi.getState(t.state);if(f&&f.dragging){const d=OL(f.dragging,u,r);DL(t,f.activeHandle,d,n)}}return DL(t,o.activeHandle,l,n),s.addEventListener("mouseup",c),s.addEventListener("mousemove",h),e.preventDefault(),!0}function Gme(t,e,{colspan:r,colwidth:n}){const i=n&&n[n.length-1];if(i)return i;const s=t.domAtPos(e);let a=s.node.childNodes[s.offset].offsetWidth,l=r;if(n)for(let c=0;c<r;c++)n[c]&&(a-=n[c],l--);return a/l}function Kme(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function LL(t,e,r,n){const i=r=="right"?-n:n,s=t.posAtCoords({left:e.clientX+i,top:e.clientY});if(!s)return-1;const{pos:o}=s,a=k1(t.state.doc.resolve(o));if(!a)return-1;if(r=="right")return a.pos;const l=Xt.get(a.node(-1)),c=a.start(-1),h=l.map.indexOf(a.pos-c);return h%l.width==0?-1:c+l.map[h-1]}function OL(t,e,r){const n=e.clientX-t.startX;return Math.max(r,t.startWidth+n)}function kz(t,e){t.dispatch(t.state.tr.setMeta(Yi,{setHandle:e}))}function Yme(t,e,r){const n=t.state.doc.resolve(e),i=n.node(-1),s=Xt.get(i),o=n.start(-1),a=s.colCount(n.pos-o)+n.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let c=0;c<s.height;c++){const h=c*s.width+a;if(c&&s.map[h]==s.map[h-s.width])continue;const u=s.map[h],f=i.nodeAt(u).attrs,d=f.colspan==1?0:a-s.colCount(u);if(f.colwidth&&f.colwidth[d]==r)continue;const p=f.colwidth?f.colwidth.slice():Xme(f.colspan);p[d]=r,l.setNodeMarkup(o+u,null,{...f,colwidth:p})}l.docChanged&&t.dispatch(l)}function DL(t,e,r,n){const i=t.state.doc.resolve(e),s=i.node(-1),o=i.start(-1),a=Xt.get(s).colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;let l=t.domAtPos(i.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&IC(s,l.firstChild,l,n,a,r)}function Xme(t){return Array(t).fill(0)}function Jme(t,e){var r;const n=[],i=t.doc.resolve(e),s=i.node(-1);if(!s)return or.empty;const o=Xt.get(s),a=i.start(-1),l=o.colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1;for(let c=0;c<o.height;c++){const h=l+c*o.width;if((l==o.width-1||o.map[h]!=o.map[h+1])&&(c==0||o.map[h]!=o.map[h-o.width])){const u=o.map[h],f=a+u+s.nodeAt(u).nodeSize-1,d=document.createElement("div");d.className="column-resize-handle",(r=Yi.getState(t))!=null&&r.dragging&&n.push(jr.node(a+u,a+u+s.nodeAt(u).nodeSize,{class:"column-resize-dragging"})),n.push(jr.widget(f,d))}}return or.create(t.doc,n)}function Zme({allowTableNodeSelection:t=!1}={}){return new xr({key:Hl,state:{init(){return null},apply(e,r){const n=e.getMeta(Hl);if(n!=null)return n==-1?null:n;if(r==null||!e.docChanged)return r;const{deleted:i,pos:s}=e.mapping.mapResult(r);return i?null:s}},props:{decorations:cme,handleDOMEvents:{mousedown:zme},createSelectionBetween(e){return Hl.getState(e.state)!=null?e.state.selection:null},handleTripleClick:Fme,handleKeyDown:Nme,handlePaste:$me},appendTransaction(e,r,n){return fme(n,pme(n,r),t)}})}var yx=typeof navigator<"u"?navigator:null,w8=yx&&yx.userAgent||"",Qme=/Edge\/(\d+)/.exec(w8),ege=/MSIE \d/.exec(w8),tge=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(w8),rge=!!(ege||tge||Qme),nge=!rge&&!!yx&&/Apple Computer/.test(yx.vendor),Cz=new vr("safari-ime-span"),BC=!1,ige={key:Cz,props:{decorations:sge,handleDOMEvents:{compositionstart:()=>{BC=!0},compositionend:()=>{BC=!1}}}};function sge(t){const{$from:e,$to:r,to:n}=t.selection;if(BC&&e.sameParent(r)){const i=jr.widget(n,oge,{ignoreSelection:!0,key:"safari-ime-span"});return or.create(t.doc,[i])}}function oge(t){const e=t.dom.ownerDocument.createElement("span");return e.className="ProseMirror-safari-ime-span",e}var age=new xr(nge?ige:{key:Cz});function IL(t,e){const r=String(t);if(typeof e!="string")throw new TypeError("Expected character");let n=0,i=r.indexOf(e);for(;i!==-1;)n++,i=r.indexOf(e,i+e.length);return n}function lge(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function cge(t,e,r){const i=zv((r||{}).ignore||[]),s=hge(e);let o=-1;for(;++o<s.length;)P7(t,"text",a);function a(c,h){let u=-1,f;for(;++u<h.length;){const d=h[u],p=f?f.children:void 0;if(i(d,p?p.indexOf(d):void 0,f))return;f=d}if(f)return l(c,h)}function l(c,h){const u=h[h.length-1],f=s[o][0],d=s[o][1];let p=0;const g=u.children.indexOf(c);let y=!1,b=[];f.lastIndex=0;let x=f.exec(c.value);for(;x;){const T=x.index,S={index:x.index,input:x.input,stack:[...h,c]};let w=d(...x,S);if(typeof w=="string"&&(w=w.length>0?{type:"text",value:w}:void 0),w===!1?f.lastIndex=T+1:(p!==T&&b.push({type:"text",value:c.value.slice(p,T)}),Array.isArray(w)?b.push(...w):w&&b.push(w),p=T+x[0].length,y=!0),!f.global)break;x=f.exec(c.value)}return y?(p<c.value.length&&b.push({type:"text",value:c.value.slice(p)}),u.children.splice(g,1,...b)):b=[c],g+b.length}}function hge(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const r=!t[0]||Array.isArray(t[0])?t:[t];let n=-1;for(;++n<r.length;){const i=r[n];e.push([uge(i[0]),fge(i[1])])}return e}function uge(t){return typeof t=="string"?new RegExp(lge(t),"g"):t}function fge(t){return typeof t=="function"?t:function(){return t}}const P5="phrasing",N5=["autolink","link","image","label"];function dge(){return{transforms:[vge],enter:{literalAutolink:mge,literalAutolinkEmail:F5,literalAutolinkHttp:F5,literalAutolinkWww:F5},exit:{literalAutolink:xge,literalAutolinkEmail:bge,literalAutolinkHttp:gge,literalAutolinkWww:yge}}}function pge(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:P5,notInConstruct:N5},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:P5,notInConstruct:N5},{character:":",before:"[ps]",after:"\\/",inConstruct:P5,notInConstruct:N5}]}}function mge(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function F5(t){this.config.enter.autolinkProtocol.call(this,t)}function gge(t){this.config.exit.autolinkProtocol.call(this,t)}function yge(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function bge(t){this.config.exit.autolinkEmail.call(this,t)}function xge(t){this.exit(t)}function vge(t){cge(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,wge],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),kge]],{ignore:["link","linkReference"]})}function wge(t,e,r,n,i){let s="";if(!Sz(i)||(/^w/i.test(e)&&(r=e+r,e="",s="http://"),!Cge(r)))return!1;const o=Sge(r+n);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function kge(t,e,r,n){return!Sz(n,!0)||/[-\d_]$/.test(r)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+r,children:[{type:"text",value:e+"@"+r}]}}function Cge(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function Sge(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let r=e[0],n=r.indexOf(")");const i=IL(t,"(");let s=IL(t,")");for(;n!==-1&&i>s;)t+=r.slice(0,n+1),r=r.slice(n+1),n=r.indexOf(")"),s++;return[t,r]}function Sz(t,e){const r=t.input.charCodeAt(t.index-1);return(t.index===0||iu(r)||Fv(r))&&(!e||r!==47)}Tz.peek=Ige;function Tge(){this.buffer()}function _ge(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Mge(){this.buffer()}function Age(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Ege(t){const e=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=Ys(this.sliceSerialize(t)).toLowerCase(),r.label=e}function Lge(t){this.exit(t)}function Oge(t){const e=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=Ys(this.sliceSerialize(t)).toLowerCase(),r.label=e}function Dge(t){this.exit(t)}function Ige(){return"["}function Tz(t,e,r,n){const i=r.createTracker(n);let s=i.move("[^");const o=r.enter("footnoteReference"),a=r.enter("reference");return s+=i.move(r.safe(r.associationId(t),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function Bge(){return{enter:{gfmFootnoteCallString:Tge,gfmFootnoteCall:_ge,gfmFootnoteDefinitionLabelString:Mge,gfmFootnoteDefinition:Age},exit:{gfmFootnoteCallString:Ege,gfmFootnoteCall:Lge,gfmFootnoteDefinitionLabelString:Oge,gfmFootnoteDefinition:Dge}}}function Rge(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:r,footnoteReference:Tz},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function r(n,i,s,o){const a=s.createTracker(o);let l=a.move("[^");const c=s.enter("footnoteDefinition"),h=s.enter("label");return l+=a.move(s.safe(s.associationId(n),{before:l,after:"]"})),h(),l+=a.move("]:"),n.children&&n.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(n,a.current()),e?_z:Pge))),c(),l}}function Pge(t,e,r){return e===0?t:_z(t,e,r)}function _z(t,e,r){return(r?"":"    ")+t}const Nge=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Mz.peek=qge;function Fge(){return{canContainEols:["delete"],enter:{strikethrough:zge},exit:{strikethrough:Hge}}}function $ge(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Nge}],handlers:{delete:Mz}}}function zge(t){this.enter({type:"delete",children:[]},t)}function Hge(t){this.exit(t)}function Mz(t,e,r,n){const i=r.createTracker(n),s=r.enter("strikethrough");let o=i.move("~~");return o+=r.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function qge(){return"~"}function Vge(t){return t.length}function Wge(t,e){const r=e||{},n=(r.align||[]).concat(),i=r.stringLength||Vge,s=[],o=[],a=[],l=[];let c=0,h=-1;for(;++h<t.length;){const m=[],g=[];let y=-1;for(t[h].length>c&&(c=t[h].length);++y<t[h].length;){const b=jge(t[h][y]);if(r.alignDelimiters!==!1){const x=i(b);g[y]=x,(l[y]===void 0||x>l[y])&&(l[y]=x)}m.push(b)}o[h]=m,a[h]=g}let u=-1;if(typeof n=="object"&&"length"in n)for(;++u<c;)s[u]=BL(n[u]);else{const m=BL(n);for(;++u<c;)s[u]=m}u=-1;const f=[],d=[];for(;++u<c;){const m=s[u];let g="",y="";m===99?(g=":",y=":"):m===108?g=":":m===114&&(y=":");let b=r.alignDelimiters===!1?1:Math.max(1,l[u]-g.length-y.length);const x=g+"-".repeat(b)+y;r.alignDelimiters!==!1&&(b=g.length+b+y.length,b>l[u]&&(l[u]=b),d[u]=b),f[u]=x}o.splice(1,0,f),a.splice(1,0,d),h=-1;const p=[];for(;++h<o.length;){const m=o[h],g=a[h];u=-1;const y=[];for(;++u<c;){const b=m[u]||"";let x="",T="";if(r.alignDelimiters!==!1){const S=l[u]-(g[u]||0),w=s[u];w===114?x=" ".repeat(S):w===99?S%2?(x=" ".repeat(S/2+.5),T=" ".repeat(S/2-.5)):(x=" ".repeat(S/2),T=x):T=" ".repeat(S)}r.delimiterStart!==!1&&!u&&y.push("|"),r.padding!==!1&&!(r.alignDelimiters===!1&&b==="")&&(r.delimiterStart!==!1||u)&&y.push(" "),r.alignDelimiters!==!1&&y.push(x),y.push(b),r.alignDelimiters!==!1&&y.push(T),r.padding!==!1&&y.push(" "),(r.delimiterEnd!==!1||u!==c-1)&&y.push("|")}p.push(r.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return p.join(`
`)}function jge(t){return t==null?"":String(t)}function BL(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function Uge(){return{enter:{table:Gge,tableData:RL,tableHeader:RL,tableRow:Yge},exit:{codeText:Xge,table:Kge,tableData:$5,tableHeader:$5,tableRow:$5}}}function Gge(t){const e=t._align;this.enter({type:"table",align:e.map(function(r){return r==="none"?null:r}),children:[]},t),this.data.inTable=!0}function Kge(t){this.exit(t),this.data.inTable=void 0}function Yge(t){this.enter({type:"tableRow",children:[]},t)}function $5(t){this.exit(t)}function RL(t){this.enter({type:"tableCell",children:[]},t)}function Xge(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,Jge));const r=this.stack[this.stack.length-1];r.type,r.value=e,this.exit(t)}function Jge(t,e){return e==="|"?e:t}function Zge(t){const e=t||{},r=e.tableCellPadding,n=e.tablePipeAlign,i=e.stringLength,s=r?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:o,tableCell:l,tableRow:a}};function o(d,p,m,g){return c(h(d,m,g),d.align)}function a(d,p,m,g){const y=u(d,m,g),b=c([y]);return b.slice(0,b.indexOf(`
`))}function l(d,p,m,g){const y=m.enter("tableCell"),b=m.enter("phrasing"),x=m.containerPhrasing(d,{...g,before:s,after:s});return b(),y(),x}function c(d,p){return Wge(d,{align:p,alignDelimiters:n,padding:r,stringLength:i})}function h(d,p,m){const g=d.children;let y=-1;const b=[],x=p.enter("table");for(;++y<g.length;)b[y]=u(g[y],p,m);return x(),b}function u(d,p,m){const g=d.children;let y=-1;const b=[],x=p.enter("tableRow");for(;++y<g.length;)b[y]=l(g[y],d,p,m);return x(),b}function f(d,p,m){let g=F7.inlineCode(d,p,m);return m.stack.includes("tableCell")&&(g=g.replace(/\|/g,"\\$&")),g}}function Qge(){return{exit:{taskListCheckValueChecked:PL,taskListCheckValueUnchecked:PL,paragraph:t1e}}}function e1e(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:r1e}}}function PL(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function t1e(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const r=this.stack[this.stack.length-1];r.type;const n=r.children[0];if(n&&n.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===r&&(n.value=n.value.slice(1),n.value.length===0?r.children.shift():r.position&&n.position&&typeof n.position.start.offset=="number"&&(n.position.start.column++,n.position.start.offset++,r.position.start=Object.assign({},n.position.start)))}}this.exit(t)}function r1e(t,e,r,n){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=r.createTracker(n);s&&a.move(o);let l=F7.listItem(t,e,r,{...n,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(h){return h+o}}function n1e(){return[dge(),Bge(),Fge(),Uge(),Qge()]}function i1e(t){return{extensions:[pge(),Rge(t),$ge(),Zge(t),e1e()]}}const s1e={tokenize:u1e,partial:!0},Az={tokenize:f1e,partial:!0},Ez={tokenize:d1e,partial:!0},Lz={tokenize:p1e,partial:!0},o1e={tokenize:m1e,partial:!0},Oz={name:"wwwAutolink",tokenize:c1e,previous:Iz},Dz={name:"protocolAutolink",tokenize:h1e,previous:Bz},yl={name:"emailAutolink",tokenize:l1e,previous:Rz},sa={};function a1e(){return{text:sa}}let Hc=48;for(;Hc<123;)sa[Hc]=yl,Hc++,Hc===58?Hc=65:Hc===91&&(Hc=97);sa[43]=yl;sa[45]=yl;sa[46]=yl;sa[95]=yl;sa[72]=[yl,Dz];sa[104]=[yl,Dz];sa[87]=[yl,Oz];sa[119]=[yl,Oz];function l1e(t,e,r){const n=this;let i,s;return o;function o(u){return!RC(u)||!Rz.call(n,n.previous)||k8(n.events)?r(u):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(u))}function a(u){return RC(u)?(t.consume(u),a):u===64?(t.consume(u),l):r(u)}function l(u){return u===46?t.check(o1e,h,c)(u):u===45||u===95||Ai(u)?(s=!0,t.consume(u),l):h(u)}function c(u){return t.consume(u),i=!0,l}function h(u){return s&&i&&Qn(n.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(u)):r(u)}}function c1e(t,e,r){const n=this;return i;function i(o){return o!==87&&o!==119||!Iz.call(n,n.previous)||k8(n.events)?r(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(s1e,t.attempt(Az,t.attempt(Ez,s),r),r)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function h1e(t,e,r){const n=this;let i="",s=!1;return o;function o(u){return(u===72||u===104)&&Bz.call(n,n.previous)&&!k8(n.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(u),t.consume(u),a):r(u)}function a(u){if(Qn(u)&&i.length<5)return i+=String.fromCodePoint(u),t.consume(u),a;if(u===58){const f=i.toLowerCase();if(f==="http"||f==="https")return t.consume(u),l}return r(u)}function l(u){return u===47?(t.consume(u),s?c:(s=!0,l)):r(u)}function c(u){return u===null||Kb(u)||ar(u)||iu(u)||Fv(u)?r(u):t.attempt(Az,t.attempt(Ez,h),r)(u)}function h(u){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(u)}}function u1e(t,e,r){let n=0;return i;function i(o){return(o===87||o===119)&&n<3?(n++,t.consume(o),i):o===46&&n===3?(t.consume(o),s):r(o)}function s(o){return o===null?r(o):e(o)}}function f1e(t,e,r){let n,i,s;return o;function o(c){return c===46||c===95?t.check(Lz,l,a)(c):c===null||ar(c)||iu(c)||c!==45&&Fv(c)?l(c):(s=!0,t.consume(c),o)}function a(c){return c===95?n=!0:(i=n,n=void 0),t.consume(c),o}function l(c){return i||n||!s?r(c):e(c)}}function d1e(t,e){let r=0,n=0;return i;function i(o){return o===40?(r++,t.consume(o),i):o===41&&n<r?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(Lz,e,s)(o):o===null||ar(o)||iu(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&n++,t.consume(o),i}}function p1e(t,e,r){return n;function n(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),n):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||ar(a)||iu(a)?e(a):r(a)}function i(a){return a===null||a===40||a===91||ar(a)||iu(a)?e(a):n(a)}function s(a){return Qn(a)?o(a):r(a)}function o(a){return a===59?(t.consume(a),n):Qn(a)?(t.consume(a),o):r(a)}}function m1e(t,e,r){return n;function n(s){return t.consume(s),i}function i(s){return Ai(s)?r(s):e(s)}}function Iz(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||ar(t)}function Bz(t){return!Qn(t)}function Rz(t){return!(t===47||RC(t))}function RC(t){return t===43||t===45||t===46||t===95||Ai(t)}function k8(t){let e=t.length,r=!1;for(;e--;){const n=t[e][1];if((n.type==="labelLink"||n.type==="labelImage")&&!n._balanced){r=!0;break}if(n._gfmAutolinkLiteralWalkedInto){r=!1;break}}return t.length>0&&!r&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),r}const g1e={tokenize:S1e,partial:!0};function y1e(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:w1e,continuation:{tokenize:k1e},exit:C1e}},text:{91:{name:"gfmFootnoteCall",tokenize:v1e},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:b1e,resolveTo:x1e}}}}function b1e(t,e,r){const n=this;let i=n.events.length;const s=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let o;for(;i--;){const l=n.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return r(l);const c=Ys(n.sliceSerialize({start:o.end,end:n.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?r(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function x1e(t,e){let r=t.length;for(;r--;)if(t[r][1].type==="labelImage"&&t[r][0]==="enter"){t[r][1];break}t[r+1][1].type="data",t[r+3][1].type="gfmFootnoteCallLabelMarker";const n={type:"gfmFootnoteCall",start:Object.assign({},t[r+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[r+3][1].end),end:Object.assign({},t[r+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[r+1],t[r+2],["enter",n,e],t[r+3],t[r+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",n,e]];return t.splice(r,t.length-r+1,...a),t}function v1e(t,e,r){const n=this,i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let s=0,o;return a;function a(u){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(u),t.exit("gfmFootnoteCallLabelMarker"),l}function l(u){return u!==94?r(u):(t.enter("gfmFootnoteCallMarker"),t.consume(u),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(u){if(s>999||u===93&&!o||u===null||u===91||ar(u))return r(u);if(u===93){t.exit("chunkString");const f=t.exit("gfmFootnoteCallString");return i.includes(Ys(n.sliceSerialize(f)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(u),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):r(u)}return ar(u)||(o=!0),s++,t.consume(u),u===92?h:c}function h(u){return u===91||u===92||u===93?(t.consume(u),s++,c):c(u)}}function w1e(t,e,r){const n=this,i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(p){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(p){return p===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",h):r(p)}function h(p){if(o>999||p===93&&!a||p===null||p===91||ar(p))return r(p);if(p===93){t.exit("chunkString");const m=t.exit("gfmFootnoteDefinitionLabelString");return s=Ys(n.sliceSerialize(m)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),f}return ar(p)||(a=!0),o++,t.consume(p),p===92?u:h}function u(p){return p===91||p===92||p===93?(t.consume(p),o++,h):h(p)}function f(p){return p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),i.includes(s)||i.push(s),Lt(t,d,"gfmFootnoteDefinitionWhitespace")):r(p)}function d(p){return e(p)}}function k1e(t,e,r){return t.check(a1,e,t.attempt(g1e,e,r))}function C1e(t){t.exit("gfmFootnoteDefinition")}function S1e(t,e,r){const n=this;return Lt(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=n.events[n.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):r(s)}}function T1e(t){let r=(t||{}).singleTilde;const n={name:"strikethrough",tokenize:s,resolveAll:i};return r==null&&(r=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},u={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},f=[["enter",h,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",u,a]],d=a.parser.constructs.insideSpan.null;d&&Zi(f,f.length,0,$v(d,o.slice(c+1,l),a)),Zi(f,f.length,0,[["exit",u,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",h,a]]),Zi(o,c-1,l-c+3,f),l=c+f.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const c=this.previous,h=this.events;let u=0;return f;function f(p){return c===126&&h[h.length-1][1].type!=="characterEscape"?l(p):(o.enter("strikethroughSequenceTemporary"),d(p))}function d(p){const m=md(c);if(p===126)return u>1?l(p):(o.consume(p),u++,d);if(u<2&&!r)return l(p);const g=o.exit("strikethroughSequenceTemporary"),y=md(p);return g._open=!y||y===2&&!!m,g._close=!m||m===2&&!!y,a(p)}}}class _1e{constructor(){this.map=[]}add(e,r,n){M1e(this,e,r,n)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let r=this.map.length;const n=[];for(;r>0;)r-=1,n.push(e.slice(this.map[r][0]+this.map[r][1]),this.map[r][2]),e.length=this.map[r][0];n.push(e.slice()),e.length=0;let i=n.pop();for(;i;){for(const s of i)e.push(s);i=n.pop()}this.map.length=0}}function M1e(t,e,r,n){let i=0;if(!(r===0&&n.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=r,t.map[i][2].push(...n);return}i+=1}t.map.push([e,r,n])}}function A1e(t,e){let r=!1;const n=[];for(;e<t.length;){const i=t[e];if(r){if(i[0]==="enter")i[1].type==="tableContent"&&n.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=n.length-1;n[s]=n[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(r=!0);e+=1}return n}function E1e(){return{flow:{null:{name:"table",tokenize:L1e,resolveAll:O1e}}}}function L1e(t,e,r){const n=this;let i=0,s=0,o;return a;function a(L){let D=n.events.length-1;for(;D>-1;){const z=n.events[D][1].type;if(z==="lineEnding"||z==="linePrefix")D--;else break}const P=D>-1?n.events[D][1].type:null,K=P==="tableHead"||P==="tableRow"?w:l;return K===w&&n.parser.lazy[n.now().line]?r(L):K(L)}function l(L){return t.enter("tableHead"),t.enter("tableRow"),c(L)}function c(L){return L===124||(o=!0,s+=1),h(L)}function h(L){return L===null?r(L):Je(L)?s>1?(s=0,n.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(L),t.exit("lineEnding"),d):r(L):Bt(L)?Lt(t,h,"whitespace")(L):(s+=1,o&&(o=!1,i+=1),L===124?(t.enter("tableCellDivider"),t.consume(L),t.exit("tableCellDivider"),o=!0,h):(t.enter("data"),u(L)))}function u(L){return L===null||L===124||ar(L)?(t.exit("data"),h(L)):(t.consume(L),L===92?f:u)}function f(L){return L===92||L===124?(t.consume(L),u):u(L)}function d(L){return n.interrupt=!1,n.parser.lazy[n.now().line]?r(L):(t.enter("tableDelimiterRow"),o=!1,Bt(L)?Lt(t,p,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):p(L))}function p(L){return L===45||L===58?g(L):L===124?(o=!0,t.enter("tableCellDivider"),t.consume(L),t.exit("tableCellDivider"),m):S(L)}function m(L){return Bt(L)?Lt(t,g,"whitespace")(L):g(L)}function g(L){return L===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(L),t.exit("tableDelimiterMarker"),y):L===45?(s+=1,y(L)):L===null||Je(L)?T(L):S(L)}function y(L){return L===45?(t.enter("tableDelimiterFiller"),b(L)):S(L)}function b(L){return L===45?(t.consume(L),b):L===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(L),t.exit("tableDelimiterMarker"),x):(t.exit("tableDelimiterFiller"),x(L))}function x(L){return Bt(L)?Lt(t,T,"whitespace")(L):T(L)}function T(L){return L===124?p(L):L===null||Je(L)?!o||i!==s?S(L):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(L)):S(L)}function S(L){return r(L)}function w(L){return t.enter("tableRow"),_(L)}function _(L){return L===124?(t.enter("tableCellDivider"),t.consume(L),t.exit("tableCellDivider"),_):L===null||Je(L)?(t.exit("tableRow"),e(L)):Bt(L)?Lt(t,_,"whitespace")(L):(t.enter("data"),I(L))}function I(L){return L===null||L===124||ar(L)?(t.exit("data"),_(L)):(t.consume(L),L===92?N:I)}function N(L){return L===92||L===124?(t.consume(L),I):I(L)}}function O1e(t,e){let r=-1,n=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,h,u;const f=new _1e;for(;++r<t.length;){const d=t[r],p=d[1];d[0]==="enter"?p.type==="tableHead"?(a=!1,l!==0&&(NL(f,e,l,c,h),h=void 0,l=0),c={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},f.add(r,0,[["enter",c,e]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(n=!0,u=void 0,s=[0,0,0,0],o=[0,r+1,0,0],a&&(a=!1,h={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},f.add(r,0,[["enter",h,e]])),i=p.type==="tableDelimiterRow"?2:h?3:1):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(n=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],u=Dy(f,e,s,i,void 0,u),s=[0,0,0,0]),o[2]=r)):p.type==="tableCellDivider"&&(n?n=!1:(s[1]!==0&&(o[0]=o[1],u=Dy(f,e,s,i,void 0,u)),s=o,o=[s[1],r,0,0])):p.type==="tableHead"?(a=!0,l=r):p.type==="tableRow"||p.type==="tableDelimiterRow"?(l=r,s[1]!==0?(o[0]=o[1],u=Dy(f,e,s,i,r,u)):o[1]!==0&&(u=Dy(f,e,o,i,r,u)),i=0):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(o[3]=r)}for(l!==0&&NL(f,e,l,c,h),f.consume(e.events),r=-1;++r<e.events.length;){const d=e.events[r];d[0]==="enter"&&d[1].type==="table"&&(d[1]._align=A1e(e.events,r))}return t}function Dy(t,e,r,n,i,s){const o=n===1?"tableHeader":n===2?"tableDelimiter":"tableData",a="tableContent";r[0]!==0&&(s.end=Object.assign({},Yu(e.events,r[0])),t.add(r[0],0,[["exit",s,e]]));const l=Yu(e.events,r[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(r[1],0,[["enter",s,e]]),r[2]!==0){const c=Yu(e.events,r[2]),h=Yu(e.events,r[3]),u={type:a,start:Object.assign({},c),end:Object.assign({},h)};if(t.add(r[2],0,[["enter",u,e]]),n!==2){const f=e.events[r[2]],d=e.events[r[3]];if(f[1].end=Object.assign({},d[1].end),f[1].type="chunkText",f[1].contentType="text",r[3]>r[2]+1){const p=r[2]+1,m=r[3]-r[2]-1;t.add(p,m,[])}}t.add(r[3]+1,0,[["exit",u,e]])}return i!==void 0&&(s.end=Object.assign({},Yu(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function NL(t,e,r,n,i){const s=[],o=Yu(e.events,r);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),n.end=Object.assign({},o),s.push(["exit",n,e]),t.add(r+1,0,s)}function Yu(t,e){const r=t[e],n=r[0]==="enter"?"start":"end";return r[1][n]}const D1e={name:"tasklistCheck",tokenize:B1e};function I1e(){return{text:{91:D1e}}}function B1e(t,e,r){const n=this;return i;function i(l){return n.previous!==null||!n._gfmTasklistFirstContentOfListItem?r(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return ar(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):r(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):r(l)}function a(l){return Je(l)?e(l):Bt(l)?t.check({tokenize:R1e},e,r)(l):r(l)}}function R1e(t,e,r){return Lt(t,n,"whitespace");function n(i){return i===null?r(i):e(i)}}function P1e(t){return VP([a1e(),y1e(),T1e(t),E1e(),I1e()])}const N1e={};function F1e(t){const e=this,r=t||N1e,n=e.data(),i=n.micromarkExtensions||(n.micromarkExtensions=[]),s=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),o=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);i.push(P1e(r)),s.push(n1e()),o.push(i1e(r))}function mt(t,e){return Object.assign(t,{meta:{package:"@milkdown/preset-gfm",...e}}),t}const C8=d1("strike_through");mt(C8,{displayName:"Attr<strikethrough>",group:"Strikethrough"});const Yd=qd("strike_through",t=>({parseDOM:[{tag:"del"},{style:"text-decoration",getAttrs:e=>e==="line-through"}],toDOM:e=>["del",t.get(C8.key)(e)],parseMarkdown:{match:e=>e.type==="delete",runner:(e,r,n)=>{e.openMark(n),e.next(r.children),e.closeMark(n)}},toMarkdown:{match:e=>e.type.name==="strike_through",runner:(e,r)=>{e.withMark(r,"delete")}}}));mt(Yd.mark,{displayName:"MarkSchema<strikethrough>",group:"Strikethrough"});mt(Yd.ctx,{displayName:"MarkSchemaCtx<strikethrough>",group:"Strikethrough"});const x4=bt("ToggleStrikeThrough",t=>()=>qv(Yd.type(t)));mt(x4,{displayName:"Command<ToggleStrikethrough>",group:"Strikethrough"});const Pz=Wn(t=>o1(new RegExp("(?<![\\w:/])(~{1,2})(.+?)\\1(?!\\w|\\/)"),Yd.type(t)));mt(Pz,{displayName:"InputRule<strikethrough>",group:"Strikethrough"});const S8=Pi("strikeThroughKeymap",{ToggleStrikethrough:{shortcuts:"Mod-Alt-x",command:t=>{const e=t.get(De);return()=>e.call(x4.key)}}});mt(S8.ctx,{displayName:"KeymapCtx<strikethrough>",group:"Strikethrough"});mt(S8.shortcuts,{displayName:"Keymap<strikethrough>",group:"Strikethrough"});const C1=nme({tableGroup:"block",cellContent:"paragraph",cellAttributes:{alignment:{default:"left",getFromDOM:t=>t.style.textAlign||"left",setDOMAttr:(t,e)=>{e.style=`text-align: ${t||"left"}`}}}}),Ec=$r("table",()=>({...C1.table,content:"table_header_row table_row+",disableDropCursor:!0,parseMarkdown:{match:t=>t.type==="table",runner:(t,e,r)=>{const n=e.align,i=e.children.map((s,o)=>({...s,align:n,isHeader:o===0}));t.openNode(r),t.next(i),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="table",runner:(t,e)=>{var i;const r=(i=e.content.firstChild)==null?void 0:i.content;if(!r)return;const n=[];r.forEach(s=>{n.push(s.attrs.alignment)}),t.openNode("table",void 0,{align:n}),t.next(e.content),t.closeNode()}}}));mt(Ec.node,{displayName:"NodeSchema<table>",group:"Table"});mt(Ec.ctx,{displayName:"NodeSchemaCtx<table>",group:"Table"});const v4=$r("table_header_row",()=>({...C1.table_row,disableDropCursor:!0,content:"(table_header)*",parseDOM:[{tag:"tr[data-is-header]"}],toDOM(){return["tr",{"data-is-header":!0},0]},parseMarkdown:{match:t=>!!(t.type==="tableRow"&&t.isHeader),runner:(t,e,r)=>{const n=e.align,i=e.children.map((s,o)=>({...s,align:n[o],isHeader:e.isHeader}));t.openNode(r),t.next(i),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="table_header_row",runner:(t,e)=>{t.openNode("tableRow",void 0,{isHeader:!0}),t.next(e.content),t.closeNode()}}}));mt(v4.node,{displayName:"NodeSchema<tableHeaderRow>",group:"Table"});mt(v4.ctx,{displayName:"NodeSchemaCtx<tableHeaderRow>",group:"Table"});const S1=$r("table_row",()=>({...C1.table_row,disableDropCursor:!0,content:"(table_cell)*",parseMarkdown:{match:t=>t.type==="tableRow",runner:(t,e,r)=>{const n=e.align,i=e.children.map((s,o)=>({...s,align:n[o]}));t.openNode(r),t.next(i),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="table_row",runner:(t,e)=>{e.content.size!==0&&(t.openNode("tableRow"),t.next(e.content),t.closeNode())}}}));mt(S1.node,{displayName:"NodeSchema<tableRow>",group:"Table"});mt(S1.ctx,{displayName:"NodeSchemaCtx<tableRow>",group:"Table"});const T1=$r("table_cell",()=>({...C1.table_cell,disableDropCursor:!0,parseMarkdown:{match:t=>t.type==="tableCell"&&!t.isHeader,runner:(t,e,r)=>{const n=e.align;t.openNode(r,{alignment:n}).openNode(t.schema.nodes.paragraph).next(e.children).closeNode().closeNode()}},toMarkdown:{match:t=>t.type.name==="table_cell",runner:(t,e)=>{t.openNode("tableCell").next(e.content).closeNode()}}}));mt(T1.node,{displayName:"NodeSchema<tableCell>",group:"Table"});mt(T1.ctx,{displayName:"NodeSchemaCtx<tableCell>",group:"Table"});const _1=$r("table_header",()=>({...C1.table_header,disableDropCursor:!0,parseMarkdown:{match:t=>t.type==="tableCell"&&!!t.isHeader,runner:(t,e,r)=>{const n=e.align;t.openNode(r,{alignment:n}),t.openNode(t.schema.nodes.paragraph),t.next(e.children),t.closeNode(),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="table_header",runner:(t,e)=>{t.openNode("tableCell"),t.next(e.content),t.closeNode()}}}));mt(_1.node,{displayName:"NodeSchema<tableHeader>",group:"Table"});mt(_1.ctx,{displayName:"NodeSchemaCtx<tableHeader>",group:"Table"});function T8(t,e=3,r=3){const n=Array(r).fill(0).map(()=>T1.type(t).createAndFill()),i=Array(r).fill(0).map(()=>_1.type(t).createAndFill()),s=Array(e).fill(0).map((o,a)=>a===0?v4.type(t).create(null,i):S1.type(t).create(null,n));return Ec.type(t).create(null,s)}function Nz(t){return(e,r)=>n=>{r=r??n.selection.from;const i=n.doc.resolve(r),s=$P(l=>l.type.name==="table")(i),o=s?{node:s.node,from:s.start}:void 0,a=t==="row";if(o){const l=Xt.get(o.node);if(e>=0&&e<(a?l.height:l.width)){const c=l.positionAt(a?e:l.height-1,a?l.width-1:e,o.node),h=n.doc.resolve(o.from+c),u=a?lr.rowSelection:lr.colSelection,f=l.positionAt(a?e:0,a?0:e,o.node),d=n.doc.resolve(o.from+f);return FP(n.setSelection(u(h,d)))}}return n}}const $1e=Nz("row"),z1e=Nz("col");function Fz(t,e,{map:r,tableStart:n,table:i},s){const o=Array(s).fill(0).reduce((l,c,h)=>l+i.child(h).nodeSize,n),a=Array(r.width).fill(0).map((l,c)=>{const h=i.nodeAt(r.map[c]);return T1.type(t).createAndFill({alignment:h==null?void 0:h.attrs.alignment})});return e.insert(o,S1.type(t).create(null,a)),e}function H1e(t){const e=Kd(t.$from);if(!e)return;const r=Xt.get(e.node);return r.cellsInRect({left:0,right:r.width,top:0,bottom:r.height}).map(i=>{const s=e.node.nodeAt(i),o=i+e.start;return{pos:o,start:o+1,node:s}})}function q1e(t){const e=H1e(t.selection);if(e&&e[0]){const r=t.doc.resolve(e[0].pos),n=e[e.length-1];if(n){const i=t.doc.resolve(n.pos);return FP(t.setSelection(new lr(i,r)))}}return t}const _8=bt("GoToPrevTableCell",()=>()=>vz(-1));mt(_8,{displayName:"Command<goToPrevTableCellCommand>",group:"Table"});const M8=bt("GoToNextTableCell",()=>()=>vz(1));mt(M8,{displayName:"Command<goToNextTableCellCommand>",group:"Table"});const A8=bt("ExitTable",t=>()=>(e,r)=>{if(!Ds(e))return!1;const{$head:n}=e.selection,i=bse(n,Ec.type(t));if(!i)return!1;const{to:s}=i,o=e.tr.replaceWith(s,s,uo.type(t).createAndFill());return o.setSelection(wt.near(o.doc.resolve(s),1)).scrollIntoView(),r==null||r(o),!0});mt(A8,{displayName:"Command<breakTableCommand>",group:"Table"});const $z=bt("InsertTable",t=>({row:e,col:r}={})=>(n,i)=>{const{selection:s,tr:o}=n,{from:a}=s,l=T8(t,e,r),c=o.replaceSelectionWith(l),h=wt.findFrom(c.doc.resolve(a),1,!0);return h&&c.setSelection(h),i==null||i(c),!0});mt($z,{displayName:"Command<insertTableCommand>",group:"Table"});const E8=bt("MoveRow",()=>({from:t,to:e,pos:r}={})=>Ome({from:t??0,to:e??0,pos:r}));mt(E8,{displayName:"Command<moveRowCommand>",group:"Table"});const L8=bt("MoveCol",()=>({from:t,to:e,pos:r}={})=>Dme({from:t??0,to:e??0,pos:r}));mt(L8,{displayName:"Command<moveColCommand>",group:"Table"});const dh=bt("SelectRow",()=>(t={index:0})=>(e,r)=>{const{tr:n}=e;return!!(r==null?void 0:r($1e(t.index,t.pos)(n)))});mt(dh,{displayName:"Command<selectRowCommand>",group:"Table"});const ph=bt("SelectCol",()=>(t={index:0})=>(e,r)=>{const{tr:n}=e;return!!(r==null?void 0:r(z1e(t.index,t.pos)(n)))});mt(ph,{displayName:"Command<selectColCommand>",group:"Table"});const zz=bt("SelectTable",()=>()=>(t,e)=>{const{tr:r}=t;return!!(e==null?void 0:e(q1e(r)))});mt(zz,{displayName:"Command<selectTableCommand>",group:"Table"});const O8=bt("DeleteSelectedCells",()=>()=>(t,e)=>{const{selection:r}=t;if(!(r instanceof lr))return!1;const n=r.isRowSelection(),i=r.isColSelection();return n&&i?Lme(t,e):i?Sme(t,e):_me(t,e)});mt(O8,{displayName:"Command<deleteSelectedCellsCommand>",group:"Table"});const D8=bt("AddColBefore",()=>()=>wme);mt(D8,{displayName:"Command<addColBeforeCommand>",group:"Table"});const I8=bt("AddColAfter",()=>()=>kme);mt(I8,{displayName:"Command<addColAfterCommand>",group:"Table"});const B8=bt("AddRowBefore",t=>()=>(e,r)=>{if(!Ds(e))return!1;if(r){const n=Ac(e);r(Fz(t,e.tr,n,n.top))}return!0});mt(B8,{displayName:"Command<addRowBeforeCommand>",group:"Table"});const R8=bt("AddRowAfter",t=>()=>(e,r)=>{if(!Ds(e))return!1;if(r){const n=Ac(e);r(Fz(t,e.tr,n,n.bottom))}return!0});mt(R8,{displayName:"Command<addRowAfterCommand>",group:"Table"});const P8=bt("SetAlign",()=>(t="left")=>Mme("alignment",t));mt(P8,{displayName:"Command<setAlignCommand>",group:"Table"});const Hz=Wn(t=>new Ii(/^\|(?<col>\d+)[xX](?<row>\d+)\|\s$/,(e,r,n,i)=>{var c,h;const s=e.doc.resolve(n);if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),Ec.type(t)))return null;const o=Math.max(Number(((c=r.groups)==null?void 0:c.row)??0),2),a=T8(t,o,Number((h=r.groups)==null?void 0:h.col)),l=e.tr.replaceRangeWith(n,i,a);return l.setSelection(Ge.create(l.doc,n+3)).scrollIntoView()}));mt(Hz,{displayName:"InputRule<insertTableInputRule>",group:"Table"});const qz=mue(t=>({run:(e,r,n)=>{if(n)return e;let i=e.content;return e.content.forEach((s,o,a)=>{var g;if((s==null?void 0:s.type)!==Ec.type(t))return;const l=s.childCount,c=((g=s.lastChild)==null?void 0:g.childCount)??0;if(l===0||c===0){i=i.replaceChild(a,uo.type(t).create());return}const h=s.firstChild;if(!(c>0&&h&&h.childCount===0))return;const f=Array(c).fill(0).map(()=>_1.type(t).createAndFill()),d=new Be(ke.from(f),0,0),p=h.replace(0,0,d),m=s.replace(0,h.nodeSize,new Be(ke.from(p),0,0));i=i.replaceChild(a,m)}),new Be(ke.from(i),e.openStart,e.openEnd)}}));mt(qz,{displayName:"PasteRule<table>",group:"Table"});const N8=Pi("tableKeymap",{NextCell:{priority:100,shortcuts:["Mod-]","Tab"],command:t=>{const e=t.get(De);return()=>e.call(M8.key)}},PrevCell:{shortcuts:["Mod-[","Shift-Tab"],command:t=>{const e=t.get(De);return()=>e.call(_8.key)}},ExitTable:{shortcuts:["Mod-Enter","Enter"],command:t=>{const e=t.get(De);return()=>e.call(A8.key)}}});mt(N8.ctx,{displayName:"KeymapCtx<table>",group:"Table"});mt(N8.shortcuts,{displayName:"Keymap<table>",group:"Table"});const z5="footnote_definition",FL="footnoteDefinition",F8=$r("footnote_definition",()=>({group:"block",content:"block+",defining:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`dl[data-type="${z5}"]`,getAttrs:t=>{if(!(t instanceof HTMLElement))throw co(t);return{label:t.dataset.label}},contentElement:"dd"}],toDOM:t=>{const e=t.attrs.label;return["dl",{"data-label":e,"data-type":z5},["dt",e],["dd",0]]},parseMarkdown:{match:({type:t})=>t===FL,runner:(t,e,r)=>{t.openNode(r,{label:e.label}).next(e.children).closeNode()}},toMarkdown:{match:t=>t.type.name===z5,runner:(t,e)=>{t.openNode(FL,void 0,{label:e.attrs.label,identifier:e.attrs.label}).next(e.content).closeNode()}}}));mt(F8.ctx,{displayName:"NodeSchemaCtx<footnodeDef>",group:"footnote"});mt(F8.node,{displayName:"NodeSchema<footnodeDef>",group:"footnote"});const H5="footnote_reference",$8=$r("footnote_reference",()=>({group:"inline",inline:!0,atom:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`sup[data-type="${H5}"]`,getAttrs:t=>{if(!(t instanceof HTMLElement))throw co(t);return{label:t.dataset.label}}}],toDOM:t=>{const e=t.attrs.label;return["sup",{"data-label":e,"data-type":H5},e]},parseMarkdown:{match:({type:t})=>t==="footnoteReference",runner:(t,e,r)=>{t.addNode(r,{label:e.label})}},toMarkdown:{match:t=>t.type.name===H5,runner:(t,e)=>{t.addNode("footnoteReference",void 0,void 0,{label:e.attrs.label,identifier:e.attrs.label})}}}));mt($8.ctx,{displayName:"NodeSchemaCtx<footnodeRef>",group:"footnote"});mt($8.node,{displayName:"NodeSchema<footnodeRef>",group:"footnote"});const z8=fo.extendSchema(t=>e=>{const r=t(e);return{...r,attrs:{...r.attrs,checked:{default:null,validate:"boolean|null"}},parseDOM:[{tag:'li[data-item-type="task"]',getAttrs:n=>{if(!(n instanceof HTMLElement))throw co(n);return{label:n.dataset.label,listType:n.dataset.listType,spread:n.dataset.spread,checked:n.dataset.checked?n.dataset.checked==="true":null}}},...(r==null?void 0:r.parseDOM)||[]],toDOM:n=>r.toDOM&&n.attrs.checked==null?r.toDOM(n):["li",{"data-item-type":"task","data-label":n.attrs.label,"data-list-type":n.attrs.listType,"data-spread":n.attrs.spread,"data-checked":n.attrs.checked},0],parseMarkdown:{match:({type:n})=>n==="listItem",runner:(n,i,s)=>{if(i.checked==null){r.parseMarkdown.runner(n,i,s);return}const o=i.label!=null?`${i.label}.`:"",a=i.checked!=null?!!i.checked:null,l=i.label!=null?"ordered":"bullet",c=i.spread!=null?`${i.spread}`:"true";n.openNode(s,{label:o,listType:l,spread:c,checked:a}),n.next(i.children),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="list_item",runner:(n,i)=>{if(i.attrs.checked==null){r.toMarkdown.runner(n,i);return}const s=i.attrs.label,o=i.attrs.listType,a=i.attrs.spread==="true",l=i.attrs.checked;n.openNode("listItem",void 0,{label:s,listType:o,spread:a,checked:l}),n.next(i.content),n.closeNode()}}}});mt(z8.node,{displayName:"NodeSchema<taskListItem>",group:"ListItem"});mt(z8.ctx,{displayName:"NodeSchemaCtx<taskListItem>",group:"ListItem"});const Vz=Wn(()=>new Ii(/^\[(?<checked>\s|x)\]\s$/,(t,e,r,n)=>{var h;const i=t.doc.resolve(r);let s=0,o=i.node(s);for(;o&&o.type.name!=="list_item";)s--,o=i.node(s);if(!o||o.attrs.checked!=null)return null;const a=((h=e.groups)==null?void 0:h.checked)==="x",l=i.before(s),c=t.tr;return c.deleteRange(r,n).setNodeMarkup(l,void 0,{...o.attrs,checked:a}),c}));mt(Vz,{displayName:"InputRule<wrapInTaskListInputRule>",group:"ListItem"});const V1e=[S8,N8].flat(),W1e=[Hz,Vz],j1e=[Pz],U1e=[qz],Wz=Gr(()=>age);mt(Wz,{displayName:"Prose<autoInsertSpanPlugin>",group:"Prose"});const G1e=Gr(()=>qme({}));mt(G1e,{displayName:"Prose<columnResizingPlugin>",group:"Prose"});const jz=Gr(()=>Zme({allowTableNodeSelection:!0}));mt(jz,{displayName:"Prose<tableEditingPlugin>",group:"Prose"});const H8=ia("remarkGFM",()=>F1e);mt(H8.plugin,{displayName:"Remark<remarkGFMPlugin>",group:"Remark"});mt(H8.options,{displayName:"RemarkConfig<remarkGFMPlugin>",group:"Remark"});const K1e=new vr("MILKDOWN_KEEP_TABLE_ALIGN_PLUGIN");function Y1e(t,e){let r=0;return e.forEach((n,i,s)=>{n===t&&(r=s)}),r}const Uz=Gr(()=>new xr({key:K1e,appendTransaction:(t,e,r)=>{let n;const i=(s,o)=>{if(n||(n=r.tr),s.type.name!=="table_cell")return;const a=r.doc.resolve(o),l=a.node(a.depth),h=a.node(a.depth-1).firstChild;if(!h)return;const u=Y1e(s,l),f=h.maybeChild(u);if(!f)return;const d=f.attrs.alignment,p=s.attrs.alignment;d!==p&&n.setNodeMarkup(o,void 0,{...s.attrs,alignment:d})};return e.doc!==r.doc&&r.doc.descendants(i),n}}));mt(Uz,{displayName:"Prose<keepTableAlignPlugin>",group:"Prose"});const X1e=[Uz,Wz,H8,jz].flat(),J1e=[z8,Ec,v4,S1,_1,T1,F8,$8,C8,Yd].flat(),Z1e=[M8,_8,A8,$z,E8,L8,dh,ph,zz,O8,B8,R8,D8,I8,P8,x4],Q1e=[J1e,W1e,U1e,j1e,V1e,Z1e,X1e].flat(),eye=t=>{let{state:e}=t,r=e.doc.lineAt(e.selection.main.from),n=V8(t.state,r.from);return n.line?tye(t):n.block?nye(t):!1};function q8(t,e){return({state:r,dispatch:n})=>{if(r.readOnly)return!1;let i=t(e,r);return i?(n(r.update(i)),!0):!1}}const tye=q8(oye,0),rye=q8(Gz,0),nye=q8((t,e)=>Gz(t,e,sye(e)),0);function V8(t,e){let r=t.languageDataAt("commentTokens",e,1);return r.length?r[0]:{}}const B0=50;function iye(t,{open:e,close:r},n,i){let s=t.sliceDoc(n-B0,n),o=t.sliceDoc(i,i+B0),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+r.length)==r)return{open:{pos:n-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let h,u;i-n<=2*B0?h=u=t.sliceDoc(n,i):(h=t.sliceDoc(n,n+B0),u=t.sliceDoc(i-B0,i));let f=/^\s*/.exec(h)[0].length,d=/\s*$/.exec(u)[0].length,p=u.length-d-r.length;return h.slice(f,f+e.length)==e&&u.slice(p,p+r.length)==r?{open:{pos:n+f+e.length,margin:/\s/.test(h.charAt(f+e.length))?1:0},close:{pos:i-d-r.length,margin:/\s/.test(u.charAt(p-1))?1:0}}:null}function sye(t){let e=[];for(let r of t.selection.ranges){let n=t.doc.lineAt(r.from),i=r.to<=n.to?n:t.doc.lineAt(r.to);i.from>n.from&&i.from==r.to&&(i=r.to==n.to+1?n:t.doc.lineAt(r.to-1));let s=e.length-1;s>=0&&e[s].to>n.from?e[s].to=i.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:i.to})}return e}function Gz(t,e,r=e.selection.ranges){let n=r.map(s=>V8(e,s.from).block);if(!n.every(s=>s))return null;let i=r.map((s,o)=>iye(e,n[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(r.map((s,o)=>i[o]?[]:[{from:s.from,insert:n[o].open+" "},{from:s.to,insert:" "+n[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=n[o],{open:c,close:h}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:h.pos-h.margin,to:h.pos+l.close.length})}return{changes:s}}return null}function oye(t,e,r=e.selection.ranges){let n=[],i=-1;for(let{from:s,to:o}of r){let a=n.length,l=1e9,c=V8(e,s).line;if(c){for(let h=s;h<=o;){let u=e.doc.lineAt(h);if(u.from>i&&(s==o||o>u.from)){i=u.from;let f=/^\s*/.exec(u.text)[0].length,d=f==u.length,p=u.text.slice(f,f+c.length)==c?f:-1;f<u.text.length&&f<l&&(l=f),n.push({line:u,comment:p,token:c,indent:f,empty:d,single:!1})}h=u.to+1}if(l<1e9)for(let h=a;h<n.length;h++)n[h].indent<n[h].line.text.length&&(n[h].indent=l);n.length==a+1&&(n[a].single=!0)}}if(t!=2&&n.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:h,single:u}of n)(u||!h)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&n.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of n)if(a>=0){let c=o.from+a,h=c+l.length;o.text[h-o.from]==" "&&h++,s.push({from:c,to:h})}return{changes:s}}return null}const PC=fl.define(),aye=fl.define(),lye=Ne.define(),Kz=Ne.define({combine(t){return ra(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,r)=>r},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,r)=>(n,i)=>e(n,i)||r(n,i)})}}),Yz=hn.define({create(){return pm.empty},update(t,e){let r=e.state.facet(Kz),n=e.annotation(PC);if(n){let l=Ei.fromTransaction(e,n.selection),c=n.side,h=c==0?t.undone:t.done;return l?h=bx(h,h.length,r.minDepth,l):h=Zz(h,e.startState.selection),new pm(c==0?n.rest:h,c==0?h:n.rest)}let i=e.annotation(aye);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(si.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Ei.fromTransaction(e),o=e.annotation(si.time),a=e.annotation(si.userEvent);return s?t=t.addChanges(s,o,a,r,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,r.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new pm(t.done.map(Ei.fromJSON),t.undone.map(Ei.fromJSON))}});function cye(t={}){return[Yz,Kz.of(t),$e.domEventHandlers({beforeinput(e,r){let n=e.inputType=="historyUndo"?Xz:e.inputType=="historyRedo"?NC:null;return n?(e.preventDefault(),n(r)):!1}})]}function w4(t,e){return function({state:r,dispatch:n}){if(!e&&r.readOnly)return!1;let i=r.field(Yz,!1);if(!i)return!1;let s=i.pop(t,r,e);return s?(n(s),!0):!1}}const Xz=w4(0,!1),NC=w4(1,!1),hye=w4(0,!0),uye=w4(1,!0);class Ei{constructor(e,r,n,i,s){this.changes=e,this.effects=r,this.mapped=n,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Ei(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,r,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(r=this.mapped)===null||r===void 0?void 0:r.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Ei(e.changes&&Jr.fromJSON(e.changes),[],e.mapped&&Wo.fromJSON(e.mapped),e.startSelection&&oe.fromJSON(e.startSelection),e.selectionsAfter.map(oe.fromJSON))}static fromTransaction(e,r){let n=xs;for(let i of e.startState.facet(lye)){let s=i(e);s.length&&(n=n.concat(s))}return!n.length&&e.changes.empty?null:new Ei(e.changes.invert(e.startState.doc),n,void 0,r||e.startState.selection,xs)}static selection(e){return new Ei(void 0,xs,void 0,void 0,e)}}function bx(t,e,r,n){let i=e+1>r+20?e-r-1:0,s=t.slice(i,e);return s.push(n),s}function fye(t,e){let r=[],n=!1;return t.iterChangedRanges((i,s)=>r.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<r.length;){let c=r[l++],h=r[l++];a>=c&&o<=h&&(n=!0)}}),n}function dye(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((r,n)=>r.empty!=e.ranges[n].empty).length===0}function Jz(t,e){return t.length?e.length?t.concat(e):t:e}const xs=[],pye=200;function Zz(t,e){if(t.length){let r=t[t.length-1],n=r.selectionsAfter.slice(Math.max(0,r.selectionsAfter.length-pye));return n.length&&n[n.length-1].eq(e)?t:(n.push(e),bx(t,t.length-1,1e9,r.setSelAfter(n)))}else return[Ei.selection([e])]}function mye(t){let e=t[t.length-1],r=t.slice();return r[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),r}function q5(t,e){if(!t.length)return t;let r=t.length,n=xs;for(;r;){let i=gye(t[r-1],e,n);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,r);return s[r-1]=i,s}else e=i.mapped,r--,n=i.selectionsAfter}return n.length?[Ei.selection(n)]:xs}function gye(t,e,r){let n=Jz(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):xs,r);if(!t.changes)return Ei.selection(n);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Ei(i,kt.mapEffects(t.effects,e),o,t.startSelection.map(s),n)}const yye=/^(input\.type|delete)($|\.)/;let pm=class hp{constructor(e,r,n=0,i=void 0){this.done=e,this.undone=r,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new hp(this.done,this.undone):this}addChanges(e,r,n,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!n||yye.test(n))&&(!a.selectionsAfter.length&&r-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,fye(a.changes,e.changes))||n=="input.type.compose")?o=bx(o,o.length-1,i.minDepth,new Ei(e.changes.compose(a.changes),Jz(kt.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,xs)):o=bx(o,o.length,i.minDepth,e),new hp(o,xs,r,n)}addSelection(e,r,n,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:xs;return s.length>0&&r-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&dye(s[s.length-1],e)?this:new hp(Zz(this.done,e),this.undone,r,n)}addMapping(e){return new hp(q5(this.done,e),q5(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,r,n){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||r.selection;if(n&&s.selectionsAfter.length)return r.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:PC.of({side:e,rest:mye(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?xs:i.slice(0,i.length-1);return s.mapped&&(a=q5(a,s.mapped)),r.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:PC.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}};pm.empty=new pm(xs,xs);const bye=[{key:"Mod-z",run:Xz,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:NC,preventDefault:!0},{linux:"Ctrl-Shift-z",run:NC,preventDefault:!0},{key:"Mod-u",run:hye,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:uye,preventDefault:!0}];function Xd(t,e){return oe.create(t.ranges.map(e),t.mainIndex)}function mo(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function go({state:t,dispatch:e},r){let n=Xd(t.selection,r);return n.eq(t.selection,!0)?!1:(e(mo(t,n)),!0)}function k4(t,e){return oe.cursor(e?t.to:t.from)}function Qz(t,e){return go(t,r=>r.empty?t.moveByChar(r,e):k4(r,e))}function jn(t){return t.textDirectionAt(t.state.selection.main.head)==br.LTR}const eH=t=>Qz(t,!jn(t)),tH=t=>Qz(t,jn(t));function rH(t,e){return go(t,r=>r.empty?t.moveByGroup(r,e):k4(r,e))}const xye=t=>rH(t,!jn(t)),vye=t=>rH(t,jn(t));function wye(t,e,r){if(e.type.prop(r))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function C4(t,e,r){let n=kn(t).resolveInner(e.head),i=r?Ot.closedBy:Ot.openedBy;for(let l=e.head;;){let c=r?n.childAfter(l):n.childBefore(l);if(!c)break;wye(t,c,i)?n=c:l=r?c.to:c.from}let s=n.type.prop(i),o,a;return s&&(o=r?$o(t,n.from,1):$o(t,n.to,-1))&&o.matched?a=r?o.end.to:o.end.from:a=r?n.to:n.from,oe.cursor(a,r?-1:1)}const kye=t=>go(t,e=>C4(t.state,e,!jn(t))),Cye=t=>go(t,e=>C4(t.state,e,jn(t)));function nH(t,e){return go(t,r=>{if(!r.empty)return k4(r,e);let n=t.moveVertically(r,e);return n.head!=r.head?n:t.moveToLineBoundary(r,e)})}const iH=t=>nH(t,!1),sH=t=>nH(t,!0);function oH(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,r=0,n=0,i;if(e){for(let s of t.state.facet($e.scrollMargins)){let o=s(t);o!=null&&o.top&&(r=Math.max(o==null?void 0:o.top,r)),o!=null&&o.bottom&&(n=Math.max(o==null?void 0:o.bottom,n))}i=t.scrollDOM.clientHeight-r-n}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:n,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function aH(t,e){let r=oH(t),{state:n}=t,i=Xd(n.selection,o=>o.empty?t.moveVertically(o,e,r.height):k4(o,e));if(i.eq(n.selection))return!1;let s;if(r.selfScroll){let o=t.coordsAtPos(n.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+r.marginTop,c=a.bottom-r.marginBottom;o&&o.top>l&&o.bottom<c&&(s=$e.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(mo(n,i),{effects:s}),!0}const $L=t=>aH(t,!1),FC=t=>aH(t,!0);function Lc(t,e,r){let n=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,r);if(i.head==e.head&&i.head!=(r?n.to:n.from)&&(i=t.moveToLineBoundary(e,r,!1)),!r&&i.head==n.from&&n.length){let s=/^\s*/.exec(t.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;s&&e.head!=n.from+s&&(i=oe.cursor(n.from+s))}return i}const Sye=t=>go(t,e=>Lc(t,e,!0)),Tye=t=>go(t,e=>Lc(t,e,!1)),_ye=t=>go(t,e=>Lc(t,e,!jn(t))),Mye=t=>go(t,e=>Lc(t,e,jn(t))),Aye=t=>go(t,e=>oe.cursor(t.lineBlockAt(e.head).from,1)),Eye=t=>go(t,e=>oe.cursor(t.lineBlockAt(e.head).to,-1));function Lye(t,e,r){let n=!1,i=Xd(t.selection,s=>{let o=$o(t,s.head,-1)||$o(t,s.head,1)||s.head>0&&$o(t,s.head-1,1)||s.head<t.doc.length&&$o(t,s.head+1,-1);if(!o||!o.end)return s;n=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return oe.cursor(a)});return n?(e(mo(t,i)),!0):!1}const Oye=({state:t,dispatch:e})=>Lye(t,e);function Is(t,e){let r=Xd(t.state.selection,n=>{let i=e(n);return oe.range(n.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return r.eq(t.state.selection)?!1:(t.dispatch(mo(t.state,r)),!0)}function lH(t,e){return Is(t,r=>t.moveByChar(r,e))}const cH=t=>lH(t,!jn(t)),hH=t=>lH(t,jn(t));function uH(t,e){return Is(t,r=>t.moveByGroup(r,e))}const Dye=t=>uH(t,!jn(t)),Iye=t=>uH(t,jn(t)),Bye=t=>Is(t,e=>C4(t.state,e,!jn(t))),Rye=t=>Is(t,e=>C4(t.state,e,jn(t)));function fH(t,e){return Is(t,r=>t.moveVertically(r,e))}const dH=t=>fH(t,!1),pH=t=>fH(t,!0);function mH(t,e){return Is(t,r=>t.moveVertically(r,e,oH(t).height))}const zL=t=>mH(t,!1),HL=t=>mH(t,!0),Pye=t=>Is(t,e=>Lc(t,e,!0)),Nye=t=>Is(t,e=>Lc(t,e,!1)),Fye=t=>Is(t,e=>Lc(t,e,!jn(t))),$ye=t=>Is(t,e=>Lc(t,e,jn(t))),zye=t=>Is(t,e=>oe.cursor(t.lineBlockAt(e.head).from)),Hye=t=>Is(t,e=>oe.cursor(t.lineBlockAt(e.head).to)),qL=({state:t,dispatch:e})=>(e(mo(t,{anchor:0})),!0),VL=({state:t,dispatch:e})=>(e(mo(t,{anchor:t.doc.length})),!0),WL=({state:t,dispatch:e})=>(e(mo(t,{anchor:t.selection.main.anchor,head:0})),!0),jL=({state:t,dispatch:e})=>(e(mo(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),qye=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Vye=({state:t,dispatch:e})=>{let r=S4(t).map(({from:n,to:i})=>oe.range(n,Math.min(i+1,t.doc.length)));return e(t.update({selection:oe.create(r),userEvent:"select"})),!0},Wye=({state:t,dispatch:e})=>{let r=Xd(t.selection,n=>{let i=kn(t),s=i.resolveStack(n.from,1);if(n.empty){let o=i.resolveStack(n.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<n.from&&a.to>=n.to||a.to>n.to&&a.from<=n.from)&&o.next)return oe.range(a.to,a.from)}return n});return r.eq(t.selection)?!1:(e(mo(t,r)),!0)};function gH(t,e){let{state:r}=t,n=r.selection,i=r.selection.ranges.slice();for(let s of r.selection.ranges){let o=r.doc.lineAt(s.head);if(e?o.to<t.state.doc.length:o.from>0)for(let a=s;;){let l=t.moveVertically(a,e);if(l.head<o.from||l.head>o.to){i.some(c=>c.head==l.head)||i.push(l);break}else{if(l.head==a.head)break;a=l}}}return i.length==n.ranges.length?!1:(t.dispatch(mo(r,oe.create(i,i.length-1))),!0)}const jye=t=>gH(t,!1),Uye=t=>gH(t,!0),Gye=({state:t,dispatch:e})=>{let r=t.selection,n=null;return r.ranges.length>1?n=oe.create([r.main]):r.main.empty||(n=oe.create([oe.cursor(r.main.head)])),n?(e(mo(t,n)),!0):!1};function M1(t,e){if(t.state.readOnly)return!1;let r="delete.selection",{state:n}=t,i=n.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(r="delete.backward",l=Iy(t,l,!1)):l>o&&(r="delete.forward",l=Iy(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Iy(t,o,!1),a=Iy(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:oe.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(n.update(i,{scrollIntoView:!0,userEvent:r,effects:r=="delete.selection"?$e.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function Iy(t,e,r){if(t instanceof $e)for(let n of t.state.facet($e.atomicRanges).map(i=>i(t)))n.between(e,e,(i,s)=>{i<e&&s>e&&(e=r?s:i)});return e}const yH=(t,e,r)=>M1(t,n=>{let i=n.from,{state:s}=t,o=s.doc.lineAt(i),a,l;if(r&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let c=$d(a,s.tabSize),h=c%Qh(s)||Qh(s);for(let u=0;u<h&&a[a.length-1-u]==" ";u++)i--;l=i}else l=wn(o.text,i-o.from,e,e)+o.from,l==i&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=wn(o.text,l-o.from,!1,!1)+o.from);return l}),$C=t=>yH(t,!1,!0),bH=t=>yH(t,!0,!1),xH=(t,e)=>M1(t,r=>{let n=r.head,{state:i}=t,s=i.doc.lineAt(n),o=i.charCategorizer(n);for(let a=null;;){if(n==(e?s.to:s.from)){n==r.head&&s.number!=(e?i.doc.lines:1)&&(n+=e?1:-1);break}let l=wn(s.text,n-s.from,e)+s.from,c=s.text.slice(Math.min(n,l)-s.from,Math.max(n,l)-s.from),h=o(c);if(a!=null&&h!=a)break;(c!=" "||n!=r.head)&&(a=h),n=l}return n}),vH=t=>xH(t,!1),Kye=t=>xH(t,!0),Yye=t=>M1(t,e=>{let r=t.lineBlockAt(e.head).to;return e.head<r?r:Math.min(t.state.doc.length,e.head+1)}),Xye=t=>M1(t,e=>{let r=t.moveToLineBoundary(e,!1).head;return e.head>r?r:Math.max(0,e.head-1)}),Jye=t=>M1(t,e=>{let r=t.moveToLineBoundary(e,!0).head;return e.head<r?r:Math.min(t.state.doc.length,e.head+1)}),Zye=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=t.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:qt.of(["",""])},range:oe.cursor(n.from)}));return e(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0},Qye=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=t.changeByRange(n=>{if(!n.empty||n.from==0||n.from==t.doc.length)return{range:n};let i=n.from,s=t.doc.lineAt(i),o=i==s.from?i-1:wn(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:wn(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:oe.cursor(a)}});return r.changes.empty?!1:(e(t.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function S4(t){let e=[],r=-1;for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),s=t.doc.lineAt(n.to);if(!n.empty&&n.to==s.from&&(s=t.doc.lineAt(n.to-1)),r>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(n)}else e.push({from:i.from,to:s.to,ranges:[n]});r=s.number+1}return e}function wH(t,e,r){if(t.readOnly)return!1;let n=[],i=[];for(let s of S4(t)){if(r?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(r?s.to+1:s.from-1),a=o.length+1;if(r){n.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)i.push(oe.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{n.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)i.push(oe.range(l.anchor-a,l.head-a))}}return n.length?(e(t.update({changes:n,scrollIntoView:!0,selection:oe.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const e2e=({state:t,dispatch:e})=>wH(t,e,!1),t2e=({state:t,dispatch:e})=>wH(t,e,!0);function kH(t,e,r){if(t.readOnly)return!1;let n=[];for(let i of S4(t))r?n.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):n.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const r2e=({state:t,dispatch:e})=>kH(t,e,!1),n2e=({state:t,dispatch:e})=>kH(t,e,!0),i2e=t=>{if(t.state.readOnly)return!1;let{state:e}=t,r=e.changes(S4(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),n=Xd(e.selection,i=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(i.head),a=t.coordsAtPos(i.head,i.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(r);return t.dispatch({changes:r,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function s2e(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let r=kn(t).resolveInner(e),n=r.childBefore(e),i=r.childAfter(e),s;return n&&i&&n.to<=e&&i.from>=e&&(s=n.type.prop(Ot.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(n.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(n.to,i.from))?{from:n.to,to:i.from}:null}const UL=CH(!1),o2e=CH(!0);function CH(t){return({state:e,dispatch:r})=>{if(e.readOnly)return!1;let n=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!t&&s==o&&s2e(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new Mv(e,{simulateBreak:s,simulateDoubleBreak:!!l}),h=w7(c,s);for(h==null&&(h=$d(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let u=["",$m(e,h)];return l&&u.push($m(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:qt.of(u)},range:oe.cursor(s+1+u[1].length)}});return r(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function W8(t,e){let r=-1;return t.changeByRange(n=>{let i=[];for(let o=n.from;o<=n.to;){let a=t.doc.lineAt(o);a.number>r&&(n.empty||n.to>a.from)&&(e(a,i,n),r=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:oe.range(s.mapPos(n.anchor,1),s.mapPos(n.head,1))}})}const a2e=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=Object.create(null),n=new Mv(t,{overrideIndentation:s=>{let o=r[s];return o??-1}}),i=W8(t,(s,o,a)=>{let l=w7(n,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let c=/^\s*/.exec(s.text)[0],h=$m(t,l);(c!=h||a.from<s.from+c.length)&&(r[s.from]=l,o.push({from:s.from,to:s.from+c.length,insert:h}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},SH=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(W8(t,(r,n)=>{n.push({from:r.from,insert:t.facet(_v)})}),{userEvent:"input.indent"})),!0),TH=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(W8(t,(r,n)=>{let i=/^\s*/.exec(r.text)[0];if(!i)return;let s=$d(i,t.tabSize),o=0,a=$m(t,Math.max(0,s-Qh(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;n.push({from:r.from+o,to:r.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),l2e=t=>(t.setTabFocusMode(),!0),c2e=[{key:"Ctrl-b",run:eH,shift:cH,preventDefault:!0},{key:"Ctrl-f",run:tH,shift:hH},{key:"Ctrl-p",run:iH,shift:dH},{key:"Ctrl-n",run:sH,shift:pH},{key:"Ctrl-a",run:Aye,shift:zye},{key:"Ctrl-e",run:Eye,shift:Hye},{key:"Ctrl-d",run:bH},{key:"Ctrl-h",run:$C},{key:"Ctrl-k",run:Yye},{key:"Ctrl-Alt-h",run:vH},{key:"Ctrl-o",run:Zye},{key:"Ctrl-t",run:Qye},{key:"Ctrl-v",run:FC}],h2e=[{key:"ArrowLeft",run:eH,shift:cH,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:xye,shift:Dye,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:_ye,shift:Fye,preventDefault:!0},{key:"ArrowRight",run:tH,shift:hH,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:vye,shift:Iye,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Mye,shift:$ye,preventDefault:!0},{key:"ArrowUp",run:iH,shift:dH,preventDefault:!0},{mac:"Cmd-ArrowUp",run:qL,shift:WL},{mac:"Ctrl-ArrowUp",run:$L,shift:zL},{key:"ArrowDown",run:sH,shift:pH,preventDefault:!0},{mac:"Cmd-ArrowDown",run:VL,shift:jL},{mac:"Ctrl-ArrowDown",run:FC,shift:HL},{key:"PageUp",run:$L,shift:zL},{key:"PageDown",run:FC,shift:HL},{key:"Home",run:Tye,shift:Nye,preventDefault:!0},{key:"Mod-Home",run:qL,shift:WL},{key:"End",run:Sye,shift:Pye,preventDefault:!0},{key:"Mod-End",run:VL,shift:jL},{key:"Enter",run:UL,shift:UL},{key:"Mod-a",run:qye},{key:"Backspace",run:$C,shift:$C,preventDefault:!0},{key:"Delete",run:bH,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:vH,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:Kye,preventDefault:!0},{mac:"Mod-Backspace",run:Xye,preventDefault:!0},{mac:"Mod-Delete",run:Jye,preventDefault:!0}].concat(c2e.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),_H=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:kye,shift:Bye},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Cye,shift:Rye},{key:"Alt-ArrowUp",run:e2e},{key:"Shift-Alt-ArrowUp",run:r2e},{key:"Alt-ArrowDown",run:t2e},{key:"Shift-Alt-ArrowDown",run:n2e},{key:"Mod-Alt-ArrowUp",run:jye},{key:"Mod-Alt-ArrowDown",run:Uye},{key:"Escape",run:Gye},{key:"Mod-Enter",run:o2e},{key:"Alt-l",mac:"Ctrl-l",run:Vye},{key:"Mod-i",run:Wye,preventDefault:!0},{key:"Mod-[",run:TH},{key:"Mod-]",run:SH},{key:"Mod-Alt-\\",run:a2e},{key:"Shift-Mod-k",run:i2e},{key:"Shift-Mod-\\",run:Oye},{key:"Mod-/",run:eye},{key:"Alt-A",run:rye},{key:"Ctrl-m",mac:"Shift-Alt-m",run:l2e}].concat(h2e),u2e={key:"Tab",run:SH,shift:TH};var xx=200,an=function(){};an.prototype.append=function(e){return e.length?(e=an.from(e),!this.length&&e||e.length<xx&&this.leafAppend(e)||this.length<xx&&e.leafPrepend(this)||this.appendInner(e)):this};an.prototype.prepend=function(e){return e.length?an.from(e).append(this):this};an.prototype.appendInner=function(e){return new f2e(this,e)};an.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?an.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};an.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};an.prototype.forEach=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(e,r,n,0):this.forEachInvertedInner(e,r,n,0)};an.prototype.map=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},r,n),i};an.from=function(e){return e instanceof an?e:e&&e.length?new MH(e):an.empty};var MH=function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=xx)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=xx)return new e(i.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e}(an);an.empty=new MH([]);var f2e=function(t){function e(r,n){t.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(n,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(n,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(n,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(n,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(n,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(n,i):n>=s?this.right.slice(n-s,i-s):this.left.slice(n,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new e(i,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(an);const d2e=500;class js{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,s;r&&(i=this.remapping(n,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],h=[];return this.items.forEach((u,f)=>{if(!u.step){i||(i=this.remapping(n,f+1),s=i.maps.length),s--,h.push(u);return}if(i){h.push(new Oo(u.map));let d=u.step.map(i.slice(s)),p;d&&o.maybeStep(d).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new Oo(p,void 0,void 0,c.length+h.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(u.step);if(u.selection)return a=i?u.selection.map(i.slice(s)):u.selection,l=new js(this.items.slice(0,n).append(h.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,r,n,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let h=0;h<e.steps.length;h++){let u=e.steps[h].invert(e.docs[h]),f=new Oo(e.mapping.maps[h],u,r),d;(d=l&&l.merge(f))&&(f=d,h?s.pop():a=a.slice(0,a.length-1)),s.push(f),r&&(o++,r=void 0),i||(l=f)}let c=o-n.depth;return c>m2e&&(a=p2e(a,c),o-=c),new js(a.append(s),o)}remapping(e,r){let n=new Vm;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,o)},e,r),n}addMaps(e){return this.eventCount==0?this:new js(this.items.append(e.map(r=>new Oo(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-r),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=r;this.items.forEach(f=>{let d=s.getMirror(--l);if(d==null)return;o=Math.min(o,d);let p=s.maps[d];if(f.step){let m=e.steps[d].invert(e.docs[d]),g=f.selection&&f.selection.map(s.slice(l+1,d));g&&a++,n.push(new Oo(p,m,g))}else n.push(new Oo(p))},i);let c=[];for(let f=r;f<o;f++)c.push(new Oo(s.maps[f]));let h=this.items.slice(0,i).append(c).append(n),u=new js(h,a);return u.emptyItemCount()>d2e&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),n=r.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(r.slice(n)),c=l&&l.getMap();if(n--,c&&r.appendMap(c,n),l){let h=o.selection&&o.selection.map(r.slice(n));h&&s++;let u=new Oo(c.invert(),l,h),f,d=i.length-1;(f=i.length&&i[d].merge(u))?i[d]=f:i.push(u)}}else o.map&&n--},this.items.length,0),new js(an.from(i.reverse()),s)}}js.empty=new js(an.empty,0);function p2e(t,e){let r;return t.forEach((n,i)=>{if(n.selection&&e--==0)return r=i,!1}),t.slice(r)}class Oo{constructor(e,r,n,i){this.map=e,this.step=r,this.selection=n,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new Oo(r.getMap().invert(),r,this.selection)}}}class Pl{constructor(e,r,n,i,s){this.done=e,this.undone=r,this.prevRanges=n,this.prevTime=i,this.prevComposition=s}}const m2e=20;function g2e(t,e,r,n){let i=r.getMeta(Wh),s;if(i)return i.historyState;r.getMeta(x2e)&&(t=new Pl(t.done,t.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(o&&o.getMeta(Wh))return o.getMeta(Wh).redo?new Pl(t.done.addTransform(r,void 0,n,K2(e)),t.undone,GL(r.mapping.maps),t.prevTime,t.prevComposition):new Pl(t.done,t.undone.addTransform(r,void 0,n,K2(e)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=r.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(r.time||0)-n.newGroupDelay||!y2e(r,t.prevRanges)),c=o?V5(t.prevRanges,r.mapping):GL(r.mapping.maps);return new Pl(t.done.addTransform(r,l?e.selection.getBookmark():void 0,n,K2(e)),js.empty,c,r.time,a??t.prevComposition)}else return(s=r.getMeta("rebased"))?new Pl(t.done.rebased(r,s),t.undone.rebased(r,s),V5(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new Pl(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),V5(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function y2e(t,e){if(!e)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((n,i)=>{for(let s=0;s<e.length;s+=2)n<=e[s+1]&&i>=e[s]&&(r=!0)}),r}function GL(t){let e=[];for(let r=t.length-1;r>=0&&e.length==0;r--)t[r].forEach((n,i,s,o)=>e.push(s,o));return e}function V5(t,e){if(!t)return null;let r=[];for(let n=0;n<t.length;n+=2){let i=e.map(t[n],1),s=e.map(t[n+1],-1);i<=s&&r.push(i,s)}return r}function b2e(t,e,r){let n=K2(e),i=Wh.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,n);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,n),l=new Pl(r?a:s.remaining,r?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Wh,{redo:r,historyState:l})}let W5=!1,KL=null;function K2(t){let e=t.plugins;if(KL!=e){W5=!1,KL=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){W5=!0;break}}return W5}const Wh=new vr("history"),x2e=new vr("closeHistory");function v2e(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new xr({key:Wh,state:{init(){return new Pl(js.empty,js.empty,null,0,-1)},apply(e,r,n){return g2e(r,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,r){let n=r.inputType,i=n=="historyUndo"?T4:n=="historyRedo"?Cd:null;return!i||!e.editable?!1:(r.preventDefault(),i(e.state,e.dispatch))}}}})}function AH(t,e){return(r,n)=>{let i=Wh.getState(r);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(n){let s=b2e(i,r,t);s&&n(e?s.scrollIntoView():s)}return!0}}const T4=AH(!1,!0),Cd=AH(!0,!0);var w2e=Object.defineProperty,YL=Object.getOwnPropertySymbols,k2e=Object.prototype.hasOwnProperty,C2e=Object.prototype.propertyIsEnumerable,XL=(t,e,r)=>e in t?w2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,S2e=(t,e)=>{for(var r in e||(e={}))k2e.call(e,r)&&XL(t,r,e[r]);if(YL)for(var r of YL(e))C2e.call(e,r)&&XL(t,r,e[r]);return t};function EH(t,e){return Object.assign(t,{meta:S2e({package:"@milkdown/components"},e)}),t}const T2e={extensions:[],languages:[],expandIcon:"",searchIcon:"",clearSearchIcon:"",searchPlaceholder:"Search language",noResultText:"No result",copyText:"Copy",copyIcon:"",onCopy:()=>{},renderLanguage:t=>t,renderPreview:()=>null,previewToggleButton:t=>t?"Edit":"Hide",previewLabel:"Preview",previewLoading:"Loading..."},A1=er(T2e,"codeBlockConfigCtx");EH(A1,{displayName:"Config<code-block>",group:"CodeBlock"});class _2e{constructor(e){this.languages=e,this.map={},e.forEach(r=>{r.alias.forEach(n=>{this.map[n]=r})})}getAll(){return this.languages.map(e=>({name:e.name,alias:e.alias}))}load(e){const n=this.map[e.toLowerCase()];return n?n.support?Promise.resolve(n.support):n.load():Promise.resolve(void 0)}}function xf({icon:t,class:e,onClick:r}){return te("span",{class:Cn("milkdown-icon",e),onPointerdown:r,ref:n=>{n&&t&&(n.innerHTML=cn.sanitize(t.trim()))}})}xf.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};var M2e=(t,e,r)=>new Promise((n,i)=>{var s=l=>{try{a(r.next(l))}catch(c){i(c)}},o=l=>{try{a(r.throw(l))}catch(c){i(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,o);a((r=r.apply(t,e)).next())});function A2e(t){return M2e(this,null,function*(){try{return navigator.clipboard.writeText(t)}catch{const r=document.createElement("textarea"),n=document.activeElement;r.value=t,r.setAttribute("readonly",""),r.style.contain="strict",r.style.position="absolute",r.style.left="-9999px",r.style.fontSize="12pt";const i=document.getSelection(),s=i?i.rangeCount>0&&i.getRangeAt(0):null;document.body.appendChild(r),r.select(),r.selectionStart=0,r.selectionEnd=t.length,document.execCommand("copy"),document.body.removeChild(r),s&&(i.removeAllRanges(),i.addRange(s)),n&&n.focus()}})}const E2e=Sn({props:{copyText:{type:String,required:!0},copyIcon:{type:String,required:!0},onCopy:{type:Function,required:!0},text:{type:String,required:!0}},setup(t){const e=()=>{A2e(t.text).then(()=>t.onCopy(t.text)).catch(console.error)};return()=>te(xn,null,te("button",{type:"button",class:"copy-button",onClick:e},te(xf,{icon:t.copyIcon}),t.copyText))}}),L2e=Sn({props:{language:{type:Object,required:!0},getReadOnly:{type:Function,required:!0},config:{type:Object,required:!0},getAllLanguages:{type:Function,required:!0},setLanguage:{type:Function,required:!0}},setup({language:t,config:e,setLanguage:r,getAllLanguages:n,getReadOnly:i}){const s=ze(),o=ze(!1),a=ze(),l=ze(),c=ze("");Vh([o,s,l],()=>{c.value="";const m=s.value,g=l.value;!m||!g||oo(m,g,{placement:"bottom-start"}).then(({x:y,y:b})=>{Object.assign(g.style,{left:`${y}px`,top:`${b}px`})}).catch(console.error)});const h=m=>{if(m.preventDefault(),m.stopPropagation(),i())return;const g=!o.value;o.value=g,g&&setTimeout(()=>{var y;return(y=a.value)==null?void 0:y.focus()},0)},u=m=>{const g=m.target;c.value=g.value},f=m=>{m.key==="Escape"&&(c.value="")},d=wd(()=>{var m;if(!o.value)return[];const g=(m=n())!=null?m:[],y=g.find(x=>x.name.toLowerCase()===t.value.toLowerCase()),b=g.filter(x=>{const T=c.value.toLowerCase();return(x.name.toLowerCase().includes(T)||x.alias.some(S=>S.toLowerCase().includes(T)))&&x!==y});return b.length===0?[]:y?[y,...b]:b}),p=m=>{const g=m.target;if(s.value&&s.value.contains(g))return;const y=l.value,b=s.value;!b||!y||b.dataset.expanded==="true"&&(y.contains(g)||(o.value=!1))};return y1(()=>{window.addEventListener("click",p)}),b1(()=>{window.removeEventListener("click",p)}),()=>te(xn,null,te("button",{type:"button",ref:s,class:"language-button",onClick:h,"data-expanded":String(o.value)},t.value||"Text",te("div",{class:"expand-icon"},te(xf,{icon:e.expandIcon}))),te("div",{ref:l,class:"language-picker"},o.value?te("div",{class:"list-wrapper"},te("div",{class:"search-box"},te("div",{class:"search-icon"},te(xf,{icon:e.searchIcon})),te("input",{ref:a,class:"search-input",placeholder:e.searchPlaceholder,value:c.value,onInput:u,onKeydown:f}),te("div",{class:Cn("clear-icon",c.value.length===0&&"hidden"),onMousedown:m=>{m.preventDefault(),c.value=""}},te(xf,{icon:e.clearSearchIcon}))),te("ul",{class:"language-list",role:"listbox",onKeydown:m=>{if(m.key==="Enter"){const g=document.activeElement;g instanceof HTMLElement&&g.dataset.language&&r(g.dataset.language)}}},d.value.length?d.value.map(m=>te("li",{role:"listitem",tabindex:"0",class:"language-list-item","aria-selected":m.name.toLowerCase()===t.value.toLowerCase(),"data-language":m.name,onClick:()=>{r(m.name),o.value=!1}},e.renderLanguage(m.name,m.name.toLowerCase()===t.value.toLowerCase()))):te("li",{class:"language-list-item no-result"},e.noResultText))):null))}}),O2e=Sn({props:{text:{type:Object,required:!0},language:{type:Object,required:!0},config:{type:Object,required:!0},previewOnlyMode:{type:Object,required:!0},preview:{type:Object,required:!0}},setup(t){const{previewOnlyMode:e,config:r,preview:n}=t,i=ze();return Gd(()=>{const s=i.value;if(!s)return;for(;s.firstChild;)s.removeChild(s.firstChild);const o=n.value;(typeof o=="string"||o instanceof Element)&&(s.innerHTML=cn.sanitize(o))}),()=>n.value?te("div",{class:"preview-panel"},!e.value&&te(xn,null,te("div",{class:"preview-divider"}),te("div",{class:Cn("preview-label",e&&"hidden")},r.previewLabel)),te("div",{ref:i,class:"preview"})):null}}),D2e=Sn({props:{text:{type:Object,required:!0},selected:{type:Object,required:!0},getReadOnly:{type:Function,required:!0},codemirror:{type:Object,required:!0},language:{type:Object,required:!0},getAllLanguages:{type:Function,required:!0},setLanguage:{type:Function,required:!0},config:{type:Object,required:!0}},setup(t){var e;const r=(e=t.config.previewOnlyByDefault)!=null?e:t.getReadOnly(),n=ze(r),i=ze(),s=ze(null);y1(()=>{for(var a;(a=i.value)!=null&&a.firstChild;)i.value.removeChild(i.value.firstChild);i.value&&i.value.appendChild(t.codemirror.dom)}),Vh(()=>[t.text.value,t.language.value],()=>{const a=t.config.renderPreview(t.language.value,t.text.value,c=>s.value=c);a&&(s.value=a),a===void 0&&!s.value&&(s.value=cn.sanitize(t.config.previewLoading)),a===null&&(s.value=null)},{immediate:!0});const o=()=>{};return()=>{var a;return te(xn,null,te("div",{class:"tools"},te(L2e,{language:t.language,config:t.config,setLanguage:t.setLanguage,getAllLanguages:t.getAllLanguages,getReadOnly:t.getReadOnly}),te("div",{class:"tools-button-group"},te(E2e,{copyIcon:t.config.copyIcon,copyText:t.config.copyText,onCopy:(a=t.config.onCopy)!=null?a:o,text:t.text.value}),s.value?te("button",{class:"preview-toggle-button",onClick:()=>n.value=!n.value},te(xf,{icon:t.config.previewToggleButton(n.value)})):null)),te("div",{ref:i,class:Cn("codemirror-host",s.value&&n.value&&"hidden")}),te(O2e,{text:t.text,language:t.language,config:t.config,previewOnlyMode:n,preview:s}))}}});class I2e{constructor(e,r,n,i,s){this.node=e,this.view=r,this.getPos=n,this.loader=i,this.config=s,this.selected=ze(!1),this.language=ze(""),this.text=ze(""),this.updating=!1,this.languageName="",this.forwardUpdate=o=>{var a;if(this.updating||!this.cm.hasFocus)return;let l=((a=this.getPos())!=null?a:0)+1;const{main:c}=o.state.selection,h=l+c.from,u=l+c.to,f=this.view.state.selection;if(o.docChanged||f.from!==h||f.to!==u){const d=this.view.state.tr;o.changes.iterChanges((p,m,g,y,b)=>{b.length?d.replaceWith(l+p,l+m,this.view.state.schema.text(b.toString())):d.delete(l+p,l+m),l+=y-g-(m-p)}),d.setSelection(Ge.create(d.doc,h,u)),this.view.dispatch(d)}},this.createApp=()=>po(D2e,{text:this.text,selected:this.selected,codemirror:this.cm,language:this.language,getAllLanguages:this.getAllLanguages,getReadOnly:()=>!this.view.editable,setLanguage:this.setLanguage,config:this.config}),this.codeMirrorKeymap=()=>{const o=this.view;return[{key:"ArrowUp",run:()=>this.maybeEscape("line",-1)},{key:"ArrowLeft",run:()=>this.maybeEscape("char",-1)},{key:"ArrowDown",run:()=>this.maybeEscape("line",1)},{key:"ArrowRight",run:()=>this.maybeEscape("char",1)},{key:"Mod-Enter",run:()=>AN(o.state,o.dispatch)?(o.focus(),!0):!1},{key:"Mod-z",run:()=>T4(o.state,o.dispatch)},{key:"Shift-Mod-z",run:()=>Cd(o.state,o.dispatch)},{key:"Mod-y",run:()=>Cd(o.state,o.dispatch)},{key:"Backspace",run:()=>{var a;const l=this.cm.state.selection.ranges;if(l.length>1)return!1;const c=l[0];if(c&&(!c.empty||c.anchor>0)||this.cm.state.doc.lines>=2)return!1;const h=this.view.state,u=(a=this.getPos())!=null?a:0,f=h.tr.replaceWith(u,u+this.node.nodeSize,h.schema.nodes.paragraph.createChecked({},this.node.content));return f.setSelection(Ge.near(f.doc.resolve(u))),this.view.dispatch(f),this.view.focus(),!0}}]},this.maybeEscape=(o,a)=>{var l;const{state:c}=this.cm;let h=c.selection.main;if(!h.empty||(o==="line"&&(h=c.doc.lineAt(h.head)),a<0?h.from>0:h.to<c.doc.length))return!1;const u=((l=this.getPos())!=null?l:0)+(a<0?0:this.node.nodeSize),f=Ge.near(this.view.state.doc.resolve(u),a),d=this.view.state.tr.setSelection(f).scrollIntoView();return this.view.dispatch(d),this.view.focus(),!0},this.setLanguage=o=>{var a;this.view.dispatch(this.view.state.tr.setNodeAttribute((a=this.getPos())!=null?a:0,"language",o))},this.getAllLanguages=()=>this.loader.getAll(),this.languageConf=new cd,this.readOnlyConf=new cd,this.cm=new $e({doc:this.node.textContent,root:this.view.root,extensions:[this.readOnlyConf.of(Sr.readOnly.of(!this.view.editable)),xR(),zd.of(this.codeMirrorKeymap()),this.languageConf.of([]),Sr.changeFilter.of(()=>this.view.editable),...s.extensions,$e.updateListener.of(this.forwardUpdate)]}),this.app=this.createApp(),this.dom=this.createDom(this.app),this.disposeSelectedWatcher=Gd(()=>{this.selected.value?this.dom.classList.add("selected"):this.dom.classList.remove("selected")}),this.updateLanguage()}createDom(e){const r=document.createElement("div");return r.className="milkdown-code-block",this.text.value=this.node.textContent,e.mount(r),r}updateLanguage(){const e=this.node.attrs.language;if(e===this.languageName)return;this.language.value=e,this.loader.load(e??"").then(n=>{n&&(this.cm.dispatch({effects:this.languageConf.reconfigure(n)}),this.languageName=e)}).catch(console.error)}setSelection(e,r){this.cm.dom.isConnected&&(this.cm.focus(),this.updating=!0,this.cm.dispatch({selection:{anchor:e,head:r}}),this.updating=!1)}update(e){if(e.type!==this.node.type)return!1;if(this.updating)return!0;this.node=e,this.text.value=e.textContent,this.updateLanguage(),this.view.editable===this.cm.state.readOnly&&this.cm.dispatch({effects:this.readOnlyConf.reconfigure(Sr.readOnly.of(!this.view.editable))});const r=B2e(this.cm.state.doc.toString(),e.textContent);return r&&(this.updating=!0,this.cm.dispatch({changes:{from:r.from,to:r.to,insert:r.text},scrollIntoView:!0}),this.updating=!1),!0}selectNode(){this.selected.value=!0,this.cm.focus()}deselectNode(){this.selected.value=!1}stopEvent(){return!0}destroy(){this.app.unmount(),this.cm.destroy(),this.disposeSelectedWatcher()}}function B2e(t,e){if(t===e)return null;let r=0,n=t.length,i=e.length;for(;r<n&&t.charCodeAt(r)===e.charCodeAt(r);)++r;for(;n>r&&i>r&&t.charCodeAt(n-1)===e.charCodeAt(i-1);)n--,i--;return{from:r,to:n,text:e.slice(r,i)}}const LH=f1(ao.node,t=>{const e=t.get(A1.key),r=new _2e(e.languages);return(n,i,s)=>new I2e(n,i,s,r,e)});EH(LH,{displayName:"NodeView<code-block>",group:"CodeBlock"});const R2e=[LH,A1],JL=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Sd{constructor(e,r,n=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,i),this.bufferStart=n,this.normalize=s?a=>s(JL(a)):JL,this.query=this.normalize(r)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ci(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let r=o7(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=Ro(e);let i=this.normalize(r);if(i.length)for(let s=0,o=n;;s++){let a=i.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(l)return this.value=l,this;break}o==n&&s<r.length&&r.charCodeAt(s)==a&&o++}}}match(e,r,n){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:n}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:r,to:n}:this.matches.push(1,r)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Sd.prototype[Symbol.iterator]=function(){return this});const OH={from:-1,to:-1,match:/.*/.exec("")},j8="gm"+(/x/.unicode==null?"":"u");class DH{constructor(e,r,n,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=OH,/\\[sWDnr]|\n|\r|\[\^/.test(r))return new IH(e,r,n,i,s);this.re=new RegExp(r,j8+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=vx(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let r=this.matchPos<=this.to&&this.re.exec(this.curLine);if(r){let n=this.curLineStart+r.index,i=n+r[0].length;if(this.matchPos=vx(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,r)))return this.value={from:n,to:i,match:r},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const j5=new WeakMap;class vf{constructor(e,r){this.from=e,this.text=r}get to(){return this.from+this.text.length}static get(e,r,n){let i=j5.get(e);if(!i||i.from>=n||i.to<=r){let a=new vf(r,e.sliceString(r,n));return j5.set(e,a),a}if(i.from==r&&i.to==n)return i;let{text:s,from:o}=i;return o>r&&(s=e.sliceString(r,o)+s,o=r),i.to<n&&(s+=e.sliceString(i.to,n)),j5.set(e,new vf(o,s)),new vf(r,s.slice(r-o,n-o))}}class IH{constructor(e,r,n,i,s){this.text=e,this.to=s,this.done=!1,this.value=OH,this.matchPos=vx(e,i),this.re=new RegExp(r,j8+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.flat=vf.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,r=this.re.exec(this.flat.text);if(r&&!r[0]&&r.index==e&&(this.re.lastIndex=e+1,r=this.re.exec(this.flat.text)),r){let n=this.flat.from+r.index,i=n+r[0].length;if((this.flat.to>=this.to||r.index+r[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,i,r)))return this.value={from:n,to:i,match:r},this.matchPos=vx(this.text,i+(n==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=vf.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(DH.prototype[Symbol.iterator]=IH.prototype[Symbol.iterator]=function(){return this});function P2e(t){try{return new RegExp(t,j8),!0}catch{return!1}}function vx(t,e){if(e>=t.length)return e;let r=t.lineAt(e),n;for(;e<r.to&&(n=r.text.charCodeAt(e-r.from))>=56320&&n<57344;)e++;return e}function zC(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),r=nr("input",{class:"cm-textfield",name:"line",value:e}),n=nr("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:mm.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},nr("label",t.state.phrase("Go to line"),": ",r)," ",nr("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),nr("button",{name:"close",onclick:()=>{t.dispatch({effects:mm.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(r.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,h,u]=s,f=h?+h.slice(1):0,d=c?+c:a.number;if(c&&u){let g=d/100;l&&(g=g*(l=="-"?-1:1)+a.number/o.doc.lines),d=Math.round(o.doc.lines*g)}else c&&l&&(d=d*(l=="-"?-1:1)+a.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,d))),m=oe.cursor(p.from+Math.max(0,Math.min(f,p.length)));t.dispatch({effects:[mm.of(!1),$e.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:n}}const mm=kt.define(),ZL=hn.define({create(){return!0},update(t,e){for(let r of e.effects)r.is(mm)&&(t=r.value);return t},provide:t=>Nm.from(t,e=>e?zC:null)}),N2e=t=>{let e=Pm(t,zC);if(!e){let r=[mm.of(!0)];t.state.field(ZL,!1)==null&&r.push(kt.appendConfig.of([ZL,F2e])),t.dispatch({effects:r}),e=Pm(t,zC)}return e&&e.dom.querySelector("input").select(),!0},F2e=$e.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),$2e={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},z2e=Ne.define({combine(t){return ra(t,$2e,{highlightWordAroundCursor:(e,r)=>e||r,minSelectionLength:Math.min,maxMatches:Math.min})}});function H2e(t){return[U2e,j2e]}const q2e=lt.mark({class:"cm-selectionMatch"}),V2e=lt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function QL(t,e,r,n){return(r==0||t(e.sliceDoc(r-1,r))!=Cr.Word)&&(n==e.doc.length||t(e.sliceDoc(n,n+1))!=Cr.Word)}function W2e(t,e,r,n){return t(e.sliceDoc(r,r+1))==Cr.Word&&t(e.sliceDoc(n-1,n))==Cr.Word}const j2e=Ur.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(z2e),{state:r}=t,n=r.selection;if(n.ranges.length>1)return lt.none;let i=n.main,s,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return lt.none;let l=r.wordAt(i.head);if(!l)return lt.none;o=r.charCategorizer(i.head),s=r.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return lt.none;if(e.wholeWords){if(s=r.sliceDoc(i.from,i.to),o=r.charCategorizer(i.head),!(QL(o,r,i.from,i.to)&&W2e(o,r,i.from,i.to)))return lt.none}else if(s=r.sliceDoc(i.from,i.to),!s)return lt.none}let a=[];for(let l of t.visibleRanges){let c=new Sd(r.doc,s,l.from,l.to);for(;!c.next().done;){let{from:h,to:u}=c.value;if((!o||QL(o,r,h,u))&&(i.empty&&h<=i.from&&u>=i.to?a.push(V2e.range(h,u)):(h>=i.to||u<=i.from)&&a.push(q2e.range(h,u)),a.length>e.maxMatches))return lt.none}}return lt.set(a)}},{decorations:t=>t.decorations}),U2e=$e.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),G2e=({state:t,dispatch:e})=>{let{selection:r}=t,n=oe.create(r.ranges.map(i=>t.wordAt(i.head)||oe.cursor(i.head)),r.mainIndex);return n.eq(r)?!1:(e(t.update({selection:n})),!0)};function K2e(t,e){let{main:r,ranges:n}=t.selection,i=t.wordAt(r.head),s=i&&i.from==r.from&&i.to==r.to;for(let o=!1,a=new Sd(t.doc,e,n[n.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Sd(t.doc,e,0,Math.max(0,n[n.length-1].from-1)),o=!0}else{if(o&&n.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const Y2e=({state:t,dispatch:e})=>{let{ranges:r}=t.selection;if(r.some(s=>s.from===s.to))return G2e({state:t,dispatch:e});let n=t.sliceDoc(r[0].from,r[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=n))return!1;let i=K2e(t,n);return i?(e(t.update({selection:t.selection.addRange(oe.range(i.from,i.to),!1),effects:$e.scrollIntoView(i.to)})),!0):!1},Jd=Ne.define({combine(t){return ra(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new abe(e),scrollToMatch:e=>$e.scrollIntoView(e)})}});class BH{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||P2e(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(r,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Q2e(this):new J2e(this)}getCursor(e,r=0,n){let i=e.doc?e:Sr.create({doc:e});return n==null&&(n=i.doc.length),this.regexp?Ju(this,i,r,n):Xu(this,i,r,n)}}class RH{constructor(e){this.spec=e}}function Xu(t,e,r,n){return new Sd(e.doc,t.unquoted,r,n,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?X2e(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function X2e(t,e){return(r,n,i,s)=>((s>r||s+i.length<n)&&(s=Math.max(0,r-2),i=t.sliceString(s,Math.min(t.length,n+2))),(e(wx(i,r-s))!=Cr.Word||e(kx(i,r-s))!=Cr.Word)&&(e(kx(i,n-s))!=Cr.Word||e(wx(i,n-s))!=Cr.Word))}class J2e extends RH{constructor(e){super(e)}nextMatch(e,r,n){let i=Xu(this.spec,e,n,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,r+this.spec.unquoted.length);i=Xu(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==r&&i.value.to==n?null:i.value}prevMatchInRange(e,r,n){for(let i=n;;){let s=Math.max(r,i-1e4-this.spec.unquoted.length),o=Xu(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==r)return null;i-=1e4}}prevMatch(e,r,n){let i=this.prevMatchInRange(e,0,r);return i||(i=this.prevMatchInRange(e,Math.max(0,n-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=r||i.to!=n)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,r){let n=Xu(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=r)return null;i.push(n.value)}return i}highlight(e,r,n,i){let s=Xu(this.spec,e,Math.max(0,r-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Ju(t,e,r,n){return new DH(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Z2e(e.charCategorizer(e.selection.main.head)):void 0},r,n)}function wx(t,e){return t.slice(wn(t,e,!1),e)}function kx(t,e){return t.slice(e,wn(t,e))}function Z2e(t){return(e,r,n)=>!n[0].length||(t(wx(n.input,n.index))!=Cr.Word||t(kx(n.input,n.index))!=Cr.Word)&&(t(kx(n.input,n.index+n[0].length))!=Cr.Word||t(wx(n.input,n.index+n[0].length))!=Cr.Word)}class Q2e extends RH{nextMatch(e,r,n){let i=Ju(this.spec,e,n,e.doc.length).next();return i.done&&(i=Ju(this.spec,e,0,r).next()),i.done?null:i.value}prevMatchInRange(e,r,n){for(let i=1;;i++){let s=Math.max(r,n-i*1e4),o=Ju(this.spec,e,s,n),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==r||a.from>s+10))return a;if(s==r)return null}}prevMatch(e,r,n){return this.prevMatchInRange(e,0,r)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(r,n)=>{if(n=="&")return e.match[0];if(n=="$")return"$";for(let i=n.length;i>0;i--){let s=+n.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+n.slice(i)}return r})}matchAll(e,r){let n=Ju(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=r)return null;i.push(n.value)}return i}highlight(e,r,n,i){let s=Ju(this.spec,e,Math.max(0,r-250),Math.min(n+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const og=kt.define(),U8=kt.define(),rc=hn.define({create(t){return new U5(HC(t).create(),null)},update(t,e){for(let r of e.effects)r.is(og)?t=new U5(r.value.create(),t.panel):r.is(U8)&&(t=new U5(t.query,r.value?G8:null));return t},provide:t=>Nm.from(t,e=>e.panel)});class U5{constructor(e,r){this.query=e,this.panel=r}}const ebe=lt.mark({class:"cm-searchMatch"}),tbe=lt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),rbe=Ur.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(rc))}update(t){let e=t.state.field(rc);(e!=t.startState.field(rc)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return lt.none;let{view:r}=this,n=new Za;for(let i=0,s=r.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;t.highlight(r.state,a,l,(c,h)=>{let u=r.state.selection.ranges.some(f=>f.from==c&&f.to==h);n.add(c,h,u?tbe:ebe)})}return n.finish()}},{decorations:t=>t.decorations});function E1(t){return e=>{let r=e.state.field(rc,!1);return r&&r.query.spec.valid?t(e,r):FH(e)}}const Cx=E1((t,{query:e})=>{let{to:r}=t.state.selection.main,n=e.nextMatch(t.state,r,r);if(!n)return!1;let i=oe.single(n.from,n.to),s=t.state.facet(Jd);return t.dispatch({selection:i,effects:[K8(t,n),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),NH(t),!0}),Sx=E1((t,{query:e})=>{let{state:r}=t,{from:n}=r.selection.main,i=e.prevMatch(r,n,n);if(!i)return!1;let s=oe.single(i.from,i.to),o=t.state.facet(Jd);return t.dispatch({selection:s,effects:[K8(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),NH(t),!0}),nbe=E1((t,{query:e})=>{let r=e.matchAll(t.state,1e3);return!r||!r.length?!1:(t.dispatch({selection:oe.create(r.map(n=>oe.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),ibe=({state:t,dispatch:e})=>{let r=t.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:n,to:i}=r.main,s=[],o=0;for(let a=new Sd(t.doc,t.sliceDoc(n,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==n&&(o=s.length),s.push(oe.range(a.value.from,a.value.to))}return e(t.update({selection:oe.create(s,o),userEvent:"select.search.matches"})),!0},eO=E1((t,{query:e})=>{let{state:r}=t,{from:n,to:i}=r.selection.main;if(r.readOnly)return!1;let s=e.nextMatch(r,n,n);if(!s)return!1;let o=s,a=[],l,c,h=[];o.from==n&&o.to==i&&(c=r.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(r,o.from,o.to),h.push($e.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(n).number)+".")));let u=t.state.changes(a);return o&&(l=oe.single(o.from,o.to).map(u),h.push(K8(t,o)),h.push(r.facet(Jd).scrollToMatch(l.main,t))),t.dispatch({changes:u,selection:l,effects:h,userEvent:"input.replace"}),!0}),sbe=E1((t,{query:e})=>{if(t.state.readOnly)return!1;let r=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!r.length)return!1;let n=t.state.phrase("replaced $ matches",r.length)+".";return t.dispatch({changes:r,effects:$e.announce.of(n),userEvent:"input.replace.all"}),!0});function G8(t){return t.state.facet(Jd).createPanel(t)}function HC(t,e){var r,n,i,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(Jd);return new BH({search:((r=e==null?void 0:e.literal)!==null&&r!==void 0?r:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(n=e==null?void 0:e.caseSensitive)!==null&&n!==void 0?n:c.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function PH(t){let e=Pm(t,G8);return e&&e.dom.querySelector("[main-field]")}function NH(t){let e=PH(t);e&&e==t.root.activeElement&&e.select()}const FH=t=>{let e=t.state.field(rc,!1);if(e&&e.panel){let r=PH(t);if(r&&r!=t.root.activeElement){let n=HC(t.state,e.query.spec);n.valid&&t.dispatch({effects:og.of(n)}),r.focus(),r.select()}}else t.dispatch({effects:[U8.of(!0),e?og.of(HC(t.state,e.query.spec)):kt.appendConfig.of(cbe)]});return!0},$H=t=>{let e=t.state.field(rc,!1);if(!e||!e.panel)return!1;let r=Pm(t,G8);return r&&r.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:U8.of(!1)}),!0},obe=[{key:"Mod-f",run:FH,scope:"editor search-panel"},{key:"F3",run:Cx,shift:Sx,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Cx,shift:Sx,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:$H,scope:"editor search-panel"},{key:"Mod-Shift-l",run:ibe},{key:"Mod-Alt-g",run:N2e},{key:"Mod-d",run:Y2e,preventDefault:!0}];class abe{constructor(e){this.view=e;let r=this.query=e.state.field(rc).query.spec;this.commit=this.commit.bind(this),this.searchField=nr("input",{value:r.search,placeholder:$i(e,"Find"),"aria-label":$i(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=nr("input",{value:r.replace,placeholder:$i(e,"Replace"),"aria-label":$i(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=nr("input",{type:"checkbox",name:"case",form:"",checked:r.caseSensitive,onchange:this.commit}),this.reField=nr("input",{type:"checkbox",name:"re",form:"",checked:r.regexp,onchange:this.commit}),this.wordField=nr("input",{type:"checkbox",name:"word",form:"",checked:r.wholeWord,onchange:this.commit});function n(i,s,o){return nr("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=nr("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,n("next",()=>Cx(e),[$i(e,"next")]),n("prev",()=>Sx(e),[$i(e,"previous")]),n("select",()=>nbe(e),[$i(e,"all")]),nr("label",null,[this.caseField,$i(e,"match case")]),nr("label",null,[this.reField,$i(e,"regexp")]),nr("label",null,[this.wordField,$i(e,"by word")]),...e.state.readOnly?[]:[nr("br"),this.replaceField,n("replace",()=>eO(e),[$i(e,"replace")]),n("replaceAll",()=>sbe(e),[$i(e,"replace all")])],nr("button",{name:"close",onclick:()=>$H(e),"aria-label":$i(e,"close"),type:"button"},[""])])}commit(){let e=new BH({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:og.of(e)}))}keydown(e){Ete(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Sx:Cx)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),eO(this.view))}update(e){for(let r of e.transactions)for(let n of r.effects)n.is(og)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Jd).top}}function $i(t,e){return t.state.phrase(e)}const By=30,Ry=/[\s\.,:;?!]/;function K8(t,{from:e,to:r}){let n=t.state.doc.lineAt(e),i=t.state.doc.lineAt(r).to,s=Math.max(n.from,e-By),o=Math.min(i,r+By),a=t.state.sliceDoc(s,o);if(s!=n.from){for(let l=0;l<By;l++)if(!Ry.test(a[l+1])&&Ry.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-By;l--)if(!Ry.test(a[l-1])&&Ry.test(a[l])){a=a.slice(0,l);break}}return $e.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${n.number}.`)}const lbe=$e.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),cbe=[rc,Cc.low(rbe),lbe];class zH{constructor(e,r,n,i){this.state=e,this.pos=r,this.explicit=n,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let r=kn(this.state).resolveInner(this.pos,-1);for(;r&&e.indexOf(r.name)<0;)r=r.parent;return r?{from:r.from,to:this.pos,text:this.state.sliceDoc(r.from,this.pos),type:r.type}:null}matchBefore(e){let r=this.state.doc.lineAt(this.pos),n=Math.max(r.from,this.pos-250),i=r.text.slice(n-r.from,this.pos-r.from),s=i.search(HH(e,!1));return s<0?null:{from:n+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,r,n){e=="abort"&&this.abortListeners&&(this.abortListeners.push(r),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function tO(t){let e=Object.keys(t).join(""),r=/\w/.test(e);return r&&(e=e.replace(/\w/g,"")),`[${r?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function hbe(t){let e=Object.create(null),r=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)r[i[s]]=!0}let n=tO(e)+tO(r)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function ube(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[r,n]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:hbe(e);return i=>{let s=i.matchBefore(n);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:r}:null}}function XEe(t,e){return r=>{for(let n=kn(r.state).resolveInner(r.pos,-1);n;n=n.parent){if(t.indexOf(n.name)>-1)return null;if(n.type.isTop)break}return e(r)}}class rO{constructor(e,r,n,i){this.completion=e,this.source=r,this.match=n,this.score=i}}function jh(t){return t.selection.main.from}function HH(t,e){var r;let{source:n}=t,i=e&&n[0]!="^",s=n[n.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${n})${s?"$":""}`,(r=t.flags)!==null&&r!==void 0?r:t.ignoreCase?"i":"")}const Y8=fl.define();function fbe(t,e,r,n){let{main:i}=t.selection,s=r-i.from,o=n-i.from;return{...t.changeByRange(a=>{if(a!=i&&r!=n&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(r,n))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:n==i.from?a.to:a.from+o,insert:l},range:oe.cursor(a.from+s+l.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const nO=new WeakMap;function dbe(t){if(!Array.isArray(t))return t;let e=nO.get(t);return e||nO.set(t,e=ube(t)),e}const Tx=kt.define(),ag=kt.define();class pbe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let r=0;r<e.length;){let n=Ci(e,r),i=Ro(n);this.chars.push(n);let s=e.slice(r,r+i),o=s.toUpperCase();this.folded.push(Ci(o==s?s.toLowerCase():o,0)),r+=i}this.astral=e.length!=this.chars.length}ret(e,r){return this.score=e,this.matched=r,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:r,folded:n,any:i,precise:s,byWord:o}=this;if(r.length==1){let b=Ci(e,0),x=Ro(b),T=x==e.length?0:-100;if(b!=r[0])if(b==n[0])T+=-200;else return null;return this.ret(T,[0,x])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=r.length,c=0;if(a<0){for(let b=0,x=Math.min(e.length,200);b<x&&c<l;){let T=Ci(e,b);(T==r[c]||T==n[c])&&(i[c++]=b),b+=Ro(T)}if(c<l)return null}let h=0,u=0,f=!1,d=0,p=-1,m=-1,g=/[a-z]/.test(e),y=!0;for(let b=0,x=Math.min(e.length,200),T=0;b<x&&u<l;){let S=Ci(e,b);a<0&&(h<l&&S==r[h]&&(s[h++]=b),d<l&&(S==r[d]||S==n[d]?(d==0&&(p=b),m=b+1,d++):d=0));let w,_=S<255?S>=48&&S<=57||S>=97&&S<=122?2:S>=65&&S<=90?1:0:(w=o7(S))!=w.toLowerCase()?1:w!=w.toUpperCase()?2:0;(!b||_==1&&g||T==0&&_!=0)&&(r[u]==S||n[u]==S&&(f=!0)?o[u++]=b:o.length&&(y=!1)),T=_,b+=Ro(S)}return u==l&&o[0]==0&&y?this.result(-100+(f?-200:0),o,e):d==l&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):d==l?this.ret(-900-e.length,[p,m]):u==l?this.result(-100+(f?-200:0)+-700+(y?0:-1100),o,e):r.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,r,n){let i=[],s=0;for(let o of r){let a=o+(this.astral?Ro(Ci(n,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-n.length,i)}}class mbe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let r=e.slice(0,this.pattern.length),n=r==this.pattern?0:r.toLowerCase()==this.folded?-200:null;return n==null?null:(this.matched=[0,r.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}const on=Ne.define({combine(t){return ra(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:gbe,filterStrict:!1,compareCompletions:(e,r)=>(e.sortText||e.label).localeCompare(r.sortText||r.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,r)=>e&&r,closeOnBlur:(e,r)=>e&&r,icons:(e,r)=>e&&r,tooltipClass:(e,r)=>n=>iO(e(n),r(n)),optionClass:(e,r)=>n=>iO(e(n),r(n)),addToOptions:(e,r)=>e.concat(r),filterStrict:(e,r)=>e||r})}});function iO(t,e){return t?e?t+" "+e:t:e}function gbe(t,e,r,n,i,s){let o=t.textDirection==br.RTL,a=o,l=!1,c="top",h,u,f=e.left-i.left,d=i.right-e.right,p=n.right-n.left,m=n.bottom-n.top;if(a&&f<Math.min(p,d)?a=!1:!a&&d<Math.min(p,f)&&(a=!0),p<=(a?f:d))h=Math.max(i.top,Math.min(r.top,i.bottom-m))-e.top,u=Math.min(400,a?f:d);else{l=!0,u=Math.min(400,(o?e.right:i.right-e.left)-30);let b=i.bottom-e.bottom;b>=m||b>e.top?h=r.bottom-e.top:(c="bottom",h=e.bottom-r.top)}let g=(e.bottom-e.top)/s.offsetHeight,y=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${h/g}px; max-width: ${u/y}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function ybe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(r){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),r.type&&n.classList.add(...r.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(r,n,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=r.displayLabel||r.label,l=0;for(let c=0;c<s.length;){let h=s[c++],u=s[c++];h>l&&o.appendChild(document.createTextNode(a.slice(l,h)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(h,u))),f.className="cm-completionMatchedText",l=u}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(r){if(!r.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=r.detail,n},position:80}),e.sort((r,n)=>r.position-n.position).map(r=>r.render)}function G5(t,e,r){if(t<=r)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/r);return{from:i*r,to:(i+1)*r}}let n=Math.floor((t-e)/r);return{from:t-(n+1)*r,to:t-n*r}}class bbe{constructor(e,r,n){this.view=e,this.stateField=r,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(r),{options:s,selected:o}=i.open,a=e.state.facet(on);this.optionContent=ybe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=G5(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(r).open;for(let h=l.target,u;h&&h!=this.dom;h=h.parentNode)if(h.nodeName=="LI"&&(u=/-(\d+)$/.exec(h.id))&&+u[1]<c.length){this.applyCompletion(e,c[+u[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(on).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:ag.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,r){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,r,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var r;let n=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=i){let{options:s,selected:o,disabled:a}=n.open;(!i.open||i.open.options!=s)&&(this.range=G5(s.length,o,e.state.facet(on).maxRenderedOptions),this.showOptions(s,n.id)),this.updateSel(),a!=((r=i.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let r=this.tooltipClass(e);if(r!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of r.split(" "))n&&this.dom.classList.add(n);this.currentClass=r}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),r=e.open;(r.selected>-1&&r.selected<this.range.from||r.selected>=this.range.to)&&(this.range=G5(r.options.length,r.selected,this.view.state.facet(on).maxRenderedOptions),this.showOptions(r.options,e.id));let n=this.updateSelectedOption(r.selected);if(n){this.destroyInfo();let{completion:i}=r.options[r.selected],{info:s}=i;if(!s)return;let o=typeof s=="string"?document.createTextNode(s):s(i);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,i)}).catch(a=>Mi(this.view.state,a,"completion info")):(this.addInfoPane(o,i),n.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,r){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",n.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;n.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let r=null;for(let n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)n.nodeName!="LI"||!n.id?i--:i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),r=n):n.hasAttribute("aria-selected")&&(n.removeAttribute("aria-selected"),n.removeAttribute("aria-describedby"));return r&&vbe(this.list,r),r}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let r=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(s.bottom,r.bottom)-10||i.bottom<Math.max(s.top,r.top)+10?null:this.view.state.facet(on).positionInfo(this.view,r,i,n,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,r,n){const i=document.createElement("ul");i.id=r,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let s=null;for(let o=n.from;o<n.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let f=typeof c=="string"?c:c.name;if(f!=s&&(o>n.from||n.from==0))if(s=f,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let d=i.appendChild(document.createElement("completion-section"));d.textContent=f}}const h=i.appendChild(document.createElement("li"));h.id=r+"-"+o,h.setAttribute("role","option");let u=this.optionClass(a);u&&(h.className=u);for(let f of this.optionContent){let d=f(a,this.view.state,this.view,l);d&&h.appendChild(d)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function xbe(t,e){return r=>new bbe(r,t,e)}function vbe(t,e){let r=t.getBoundingClientRect(),n=e.getBoundingClientRect(),i=r.height/t.offsetHeight;n.top<r.top?t.scrollTop-=(r.top-n.top)/i:n.bottom>r.bottom&&(t.scrollTop+=(n.bottom-r.bottom)/i)}function sO(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function wbe(t,e){let r=[],n=null,i=null,s=h=>{r.push(h);let{section:u}=h.completion;if(u){n||(n=[]);let f=typeof u=="string"?u:u.name;n.some(d=>d.name==f)||n.push(typeof u=="string"?{name:f}:u)}},o=e.facet(on);for(let h of t)if(h.hasResult()){let u=h.result.getMatch;if(h.result.filter===!1)for(let f of h.result.options)s(new rO(f,h.source,u?u(f):[],1e9-r.length));else{let f=e.sliceDoc(h.from,h.to),d,p=o.filterStrict?new mbe(f):new pbe(f);for(let m of h.result.options)if(d=p.match(m.label)){let g=m.displayLabel?u?u(m,d.matched):[]:d.matched,y=d.score+(m.boost||0);if(s(new rO(m,h.source,g,y)),typeof m.section=="object"&&m.section.rank==="dynamic"){let{name:b}=m.section;i||(i=Object.create(null)),i[b]=Math.max(y,i[b]||-1e9)}}}}if(n){let h=Object.create(null),u=0,f=(d,p)=>(d.rank==="dynamic"&&p.rank==="dynamic"?i[p.name]-i[d.name]:0)||(typeof d.rank=="number"?d.rank:1e9)-(typeof p.rank=="number"?p.rank:1e9)||(d.name<p.name?-1:1);for(let d of n.sort(f))u-=1e5,h[d.name]=u;for(let d of r){let{section:p}=d.completion;p&&(d.score+=h[typeof p=="string"?p:p.name])}}let a=[],l=null,c=o.compareCompletions;for(let h of r.sort((u,f)=>f.score-u.score||c(u.completion,f.completion))){let u=h.completion;!l||l.label!=u.label||l.detail!=u.detail||l.type!=null&&u.type!=null&&l.type!=u.type||l.apply!=u.apply||l.boost!=u.boost?a.push(h):sO(h.completion)>sO(l)&&(a[a.length-1]=h),l=h.completion}return a}class of{constructor(e,r,n,i,s,o){this.options=e,this.attrs=r,this.tooltip=n,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,r){return e==this.selected||e>=this.options.length?this:new of(this.options,oO(r,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,r,n,i,s,o){if(i&&!o&&e.some(c=>c.isPending))return i.setDisabled();let a=wbe(e,r);if(!a.length)return i&&e.some(c=>c.isPending)?i.setDisabled():null;let l=r.facet(on).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let c=i.options[i.selected].completion;for(let h=0;h<a.length;h++)if(a[h].completion==c){l=h;break}}return new of(a,oO(n,l),{pos:e.reduce((c,h)=>h.hasResult()?Math.min(c,h.from):c,1e8),create:Mbe,above:s.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new of(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new of(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class _x{constructor(e,r,n){this.active=e,this.id=r,this.open=n}static start(){return new _x(Tbe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:r}=e,n=r.facet(on),s=(n.override||r.languageDataAt("autocomplete",jh(r)).map(dbe)).map(l=>(this.active.find(h=>h.source==l)||new vs(l,this.active.some(h=>h.state!=0)?1:0)).update(e,n));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(X8));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!kbe(s,this.active)||a?o=of.build(s,r,this.id,o,n,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new vs(l.source,0):l));for(let l of e.effects)l.is(VH)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new _x(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Cbe:Sbe}}function kbe(t,e){if(t==e)return!0;for(let r=0,n=0;;){for(;r<t.length&&!t[r].hasResult();)r++;for(;n<e.length&&!e[n].hasResult();)n++;let i=r==t.length,s=n==e.length;if(i||s)return i==s;if(t[r++].result!=e[n++].result)return!1}}const Cbe={"aria-autocomplete":"list"},Sbe={};function oO(t,e){let r={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(r["aria-activedescendant"]=t+"-"+e),r}const Tbe=[];function qH(t,e){if(t.isUserEvent("input.complete")){let n=t.annotation(Y8);if(n&&e.activateOnCompletion(n))return 12}let r=t.isUserEvent("input.type");return r&&e.activateOnTyping?5:r?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class vs{constructor(e,r,n=!1){this.source=e,this.state=r,this.explicit=n}hasResult(){return!1}get isPending(){return this.state==1}update(e,r){let n=qH(e,r),i=this;(n&8||n&16&&this.touches(e))&&(i=new vs(i.source,0)),n&4&&i.state==0&&(i=new vs(this.source,1)),i=i.updateFor(e,n);for(let s of e.effects)if(s.is(Tx))i=new vs(i.source,1,s.value);else if(s.is(ag))i=new vs(i.source,0);else if(s.is(X8))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,r){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(jh(e.state))}}class wf extends vs{constructor(e,r,n,i,s,o){super(e,3,r),this.limit=n,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,r){var n;if(!(r&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=jh(e.state);if(a>o||!i||r&2&&(jh(e.startState)==this.from||a<this.limit))return new vs(this.source,r&4?1:0);let l=e.changes.mapPos(this.limit);return _be(i.validFor,e.state,s,o)?new wf(this.source,this.explicit,l,i,s,o):i.update&&(i=i.update(i,s,o,new zH(e.state,a,!1)))?new wf(this.source,this.explicit,l,i,i.from,(n=i.to)!==null&&n!==void 0?n:jh(e.state)):new vs(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new wf(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new vs(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function _be(t,e,r,n){if(!t)return!1;let i=e.sliceDoc(r,n);return typeof t=="function"?t(i,r,n,e):HH(t,!0).test(i)}const X8=kt.define({map(t,e){return t.map(r=>r.map(e))}}),VH=kt.define(),Si=hn.define({create(){return _x.start()},update(t,e){return t.update(e)},provide:t=>[v7.from(t,e=>e.tooltip),$e.contentAttributes.from(t,e=>e.attrs)]});function J8(t,e){const r=e.completion.apply||e.completion.label;let n=t.state.field(Si).active.find(i=>i.source==e.source);return n instanceof wf?(typeof r=="string"?t.dispatch({...fbe(t.state,r,n.from,n.to),annotations:Y8.of(e.completion)}):r(t,e.completion,n.from,n.to),!0):!1}const Mbe=xbe(Si,J8);function Py(t,e="option"){return r=>{let n=r.state.field(Si,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<r.state.facet(on).interactionDelay)return!1;let i=1,s;e=="page"&&(s=CR(r,n.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=n.open.options,a=n.open.selected>-1?n.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),r.dispatch({effects:VH.of(a)}),!0}}const Abe=t=>{let e=t.state.field(Si,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(on).interactionDelay?!1:J8(t,e.open.options[e.open.selected])},K5=t=>t.state.field(Si,!1)?(t.dispatch({effects:Tx.of(!0)}),!0):!1,Ebe=t=>{let e=t.state.field(Si,!1);return!e||!e.active.some(r=>r.state!=0)?!1:(t.dispatch({effects:ag.of(null)}),!0)};class Lbe{constructor(e,r){this.active=e,this.context=r,this.time=Date.now(),this.updates=[],this.done=void 0}}const Obe=50,Dbe=1e3,Ibe=Ur.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(Si).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(Si),r=t.state.facet(on);if(!t.selectionSet&&!t.docChanged&&t.startState.field(Si)==e)return;let n=t.transactions.some(s=>{let o=qH(s,r);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(n||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>Obe&&Date.now()-o.time>Dbe){for(let a of o.context.abortListeners)try{a()}catch(l){Mi(this.view.state,l)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(s=>s.effects.some(o=>o.is(Tx)))&&(this.pendingStart=!0);let i=this.pendingStart?50:r.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of t.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(Si);for(let r of e.active)r.isPending&&!this.running.some(n=>n.active.source==r.source)&&this.startQuery(r);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(on).updateSyncTime))}startQuery(t){let{state:e}=this.view,r=jh(e),n=new zH(e,r,t.explicit,this.view),i=new Lbe(t,n);this.running.push(i),Promise.resolve(t.source(n)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:ag.of(null)}),Mi(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(on).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],r=this.view.state.facet(on),n=this.view.state.field(Si);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let a=jh(s.updates.length?s.updates[0].startState:this.view.state),l=Math.min(a,s.done.from+(s.active.explicit?0:1)),c=new wf(s.active.source,s.active.explicit,l,s.done,s.done.from,(t=s.done.to)!==null&&t!==void 0?t:a);for(let h of s.updates)c=c.update(h,r);if(c.hasResult()){e.push(c);continue}}let o=n.active.find(a=>a.source==s.active.source);if(o&&o.isPending)if(s.done==null){let a=new vs(s.active.source,0);for(let l of s.updates)a=a.update(l,r);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||n.open&&n.open.disabled)&&this.view.dispatch({effects:X8.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(Si,!1);if(e&&e.tooltip&&this.view.state.facet(on).closeOnBlur){let r=e.open&&CR(this.view,e.open.tooltip);(!r||!r.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:ag.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Tx.of(!1)}),20),this.composing=0}}}),Bbe=typeof navigator=="object"&&/Win/.test(navigator.platform),Rbe=Cc.highest($e.domEventHandlers({keydown(t,e){let r=e.state.field(Si,!1);if(!r||!r.open||r.open.disabled||r.open.selected<0||t.key.length>1||t.ctrlKey&&!(Bbe&&t.altKey)||t.metaKey)return!1;let n=r.open.options[r.open.selected],i=r.active.find(o=>o.source==n.source),s=n.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(t.key)>-1&&J8(e,n),!1}})),WH=$e.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class Pbe{constructor(e,r,n,i){this.field=e,this.line=r,this.from=n,this.to=i}}class Z8{constructor(e,r,n){this.field=e,this.from=r,this.to=n}map(e){let r=e.mapPos(this.from,-1,vn.TrackDel),n=e.mapPos(this.to,1,vn.TrackDel);return r==null||n==null?null:new Z8(this.field,r,n)}}class Q8{constructor(e,r){this.lines=e,this.fieldPositions=r}instantiate(e,r){let n=[],i=[r],s=e.doc.lineAt(r),o=/^\s*/.exec(s.text)[0];for(let l of this.lines){if(n.length){let c=o,h=/^\t*/.exec(l)[0].length;for(let u=0;u<h;u++)c+=e.facet(_v);i.push(r+c.length-h),l=c+l.slice(h)}n.push(l),r+=l.length+1}let a=this.fieldPositions.map(l=>new Z8(l.field,i[l.line]+l.from,i[l.line]+l.to));return{text:n,ranges:a}}static parse(e){let r=[],n=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(o);){let a=s[1]?+s[1]:null,l=s[2]||s[3]||"",c=-1,h=l.replace(/\\[{}]/g,u=>u[1]);for(let u=0;u<r.length;u++)(a!=null?r[u].seq==a:h&&r[u].name==h)&&(c=u);if(c<0){let u=0;for(;u<r.length&&(a==null||r[u].seq!=null&&r[u].seq<a);)u++;r.splice(u,0,{seq:a,name:h}),c=u;for(let f of i)f.field>=c&&f.field++}for(let u of i)if(u.line==n.length&&u.from>s.index){let f=s[2]?3+(s[1]||"").length:2;u.from-=f,u.to-=f}i.push(new Pbe(c,n.length,s.index,s.index+h.length)),o=o.slice(0,s.index)+l+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(a,l,c)=>{for(let h of i)h.line==n.length&&h.from>c&&(h.from--,h.to--);return l}),n.push(o)}return new Q8(n,i)}}let Nbe=lt.widget({widget:new class extends dl{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),Fbe=lt.mark({class:"cm-snippetField"});class Zd{constructor(e,r){this.ranges=e,this.active=r,this.deco=lt.set(e.map(n=>(n.from==n.to?Nbe:Fbe).range(n.from,n.to)),!0)}map(e){let r=[];for(let n of this.ranges){let i=n.map(e);if(!i)return null;r.push(i)}return new Zd(r,this.active)}selectionInsideField(e){return e.ranges.every(r=>this.ranges.some(n=>n.field==this.active&&n.from<=r.from&&n.to>=r.to))}}const L1=kt.define({map(t,e){return t&&t.map(e)}}),$be=kt.define(),lg=hn.define({create(){return null},update(t,e){for(let r of e.effects){if(r.is(L1))return r.value;if(r.is($be)&&t)return new Zd(t.ranges,r.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>$e.decorations.from(t,e=>e?e.deco:lt.none)});function e9(t,e){return oe.create(t.filter(r=>r.field==e).map(r=>oe.range(r.from,r.to)))}function zbe(t){let e=Q8.parse(t);return(r,n,i,s)=>{let{text:o,ranges:a}=e.instantiate(r.state,i),{main:l}=r.state.selection,c={changes:{from:i,to:s==l.from?l.to:s,insert:qt.of(o)},scrollIntoView:!0,annotations:n?[Y8.of(n),si.userEvent.of("input.complete")]:void 0};if(a.length&&(c.selection=e9(a,0)),a.some(h=>h.field>0)){let h=new Zd(a,0),u=c.effects=[L1.of(h)];r.state.field(lg,!1)===void 0&&u.push(kt.appendConfig.of([lg,jbe,Ube,WH]))}r.dispatch(r.state.update(c))}}function jH(t){return({state:e,dispatch:r})=>{let n=e.field(lg,!1);if(!n||t<0&&n.active==0)return!1;let i=n.active+t,s=t>0&&!n.ranges.some(o=>o.field==i+t);return r(e.update({selection:e9(n.ranges,i),effects:L1.of(s?null:new Zd(n.ranges,i)),scrollIntoView:!0})),!0}}const Hbe=({state:t,dispatch:e})=>t.field(lg,!1)?(e(t.update({effects:L1.of(null)})),!0):!1,qbe=jH(1),Vbe=jH(-1),Wbe=[{key:"Tab",run:qbe,shift:Vbe},{key:"Escape",run:Hbe}],aO=Ne.define({combine(t){return t.length?t[0]:Wbe}}),jbe=Cc.highest(zd.compute([aO],t=>t.facet(aO)));function JEe(t,e){return{...e,apply:zbe(t)}}const Ube=$e.domEventHandlers({mousedown(t,e){let r=e.state.field(lg,!1),n;if(!r||(n=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let i=r.ranges.find(s=>s.from<=n&&s.to>=n);return!i||i.field==r.active?!1:(e.dispatch({selection:e9(r.ranges,i.field),effects:L1.of(r.ranges.some(s=>s.field>i.field)?new Zd(r.ranges,i.field):null),scrollIntoView:!0}),!0)}}),cg={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},mh=kt.define({map(t,e){let r=e.mapPos(t,-1,vn.TrackAfter);return r??void 0}}),t9=new class extends Yh{};t9.startSide=1;t9.endSide=-1;const UH=hn.define({create(){return $t.empty},update(t,e){if(t=t.map(e.changes),e.selection){let r=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:n=>n>=r.from&&n<=r.to})}for(let r of e.effects)r.is(mh)&&(t=t.update({add:[t9.range(r.value,r.value+1)]}));return t}});function Gbe(){return[Ybe,UH]}const Y5="()[]{}<>";function GH(t){for(let e=0;e<Y5.length;e+=2)if(Y5.charCodeAt(e)==t)return Y5.charAt(e+1);return o7(t<128?t:t+1)}function KH(t,e){return t.languageDataAt("closeBrackets",e)[0]||cg}const Kbe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Ybe=$e.inputHandler.of((t,e,r,n)=>{if((Kbe?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(n.length>2||n.length==2&&Ro(Ci(n,0))==1||e!=i.from||r!=i.to)return!1;let s=Zbe(t.state,n);return s?(t.dispatch(s),!0):!1}),Xbe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=KH(t,t.selection.main.head).brackets||cg.brackets,i=null,s=t.changeByRange(o=>{if(o.empty){let a=Qbe(t.doc,o.head);for(let l of n)if(l==a&&_4(t.doc,o.head)==GH(Ci(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:oe.cursor(o.head-l.length)}}return{range:i=o}});return i||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},Jbe=[{key:"Backspace",run:Xbe}];function Zbe(t,e){let r=KH(t,t.selection.main.head),n=r.brackets||cg.brackets;for(let i of n){let s=GH(Ci(i,0));if(e==i)return s==i?rxe(t,i,n.indexOf(i+i+i)>-1,r):exe(t,i,s,r.before||cg.before);if(e==s&&YH(t,t.selection.main.from))return txe(t,i,s)}return null}function YH(t,e){let r=!1;return t.field(UH).between(0,t.doc.length,n=>{n==e&&(r=!0)}),r}function _4(t,e){let r=t.sliceString(e,e+2);return r.slice(0,Ro(Ci(r,0)))}function Qbe(t,e){let r=t.sliceString(e-2,e);return Ro(Ci(r,0))==r.length?r:r.slice(1)}function exe(t,e,r,n){let i=null,s=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:r,from:o.to}],effects:mh.of(o.to+e.length),range:oe.range(o.anchor+e.length,o.head+e.length)};let a=_4(t.doc,o.head);return!a||/\s/.test(a)||n.indexOf(a)>-1?{changes:{insert:e+r,from:o.head},effects:mh.of(o.head+e.length),range:oe.cursor(o.head+e.length)}:{range:i=o}});return i?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function txe(t,e,r){let n=null,i=t.changeByRange(s=>s.empty&&_4(t.doc,s.head)==r?{changes:{from:s.head,to:s.head+r.length,insert:r},range:oe.cursor(s.head+r.length)}:n={range:s});return n?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function rxe(t,e,r,n){let i=n.stringPrefixes||cg.stringPrefixes,s=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:mh.of(a.to+e.length),range:oe.range(a.anchor+e.length,a.head+e.length)};let l=a.head,c=_4(t.doc,l),h;if(c==e){if(lO(t,l))return{changes:{insert:e+e,from:l},effects:mh.of(l+e.length),range:oe.cursor(l+e.length)};if(YH(t,l)){let f=r&&t.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+f.length,insert:f},range:oe.cursor(l+f.length)}}}else{if(r&&t.sliceDoc(l-2*e.length,l)==e+e&&(h=cO(t,l-2*e.length,i))>-1&&lO(t,h))return{changes:{insert:e+e+e+e,from:l},effects:mh.of(l+e.length),range:oe.cursor(l+e.length)};if(t.charCategorizer(l)(c)!=Cr.Word&&cO(t,l,i)>-1&&!nxe(t,l,e,i))return{changes:{insert:e+e,from:l},effects:mh.of(l+e.length),range:oe.cursor(l+e.length)}}return{range:s=a}});return s?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function lO(t,e){let r=kn(t).resolveInner(e+1);return r.parent&&r.from==e}function nxe(t,e,r,n){let i=kn(t).resolveInner(e,-1),s=n.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=t.sliceDoc(i.from,Math.min(i.to,i.from+r.length+s)),l=a.indexOf(r);if(!l||l>-1&&n.indexOf(a.slice(0,l))>-1){let h=i.firstChild;for(;h&&h.from==i.from&&h.to-h.from>r.length+l;){if(t.sliceDoc(h.to-r.length,h.to)==r)return!1;h=h.firstChild}return!0}let c=i.to==e&&i.parent;if(!c)break;i=c}return!1}function cO(t,e,r){let n=t.charCategorizer(e);if(n(t.sliceDoc(e-1,e))!=Cr.Word)return e;for(let i of r){let s=e-i.length;if(t.sliceDoc(s,e)==i&&n(t.sliceDoc(s-1,s))!=Cr.Word)return s}return-1}function ixe(t={}){return[Rbe,Si,on.of(t),Ibe,sxe,WH]}const XH=[{key:"Ctrl-Space",run:K5},{mac:"Alt-`",run:K5},{mac:"Alt-i",run:K5},{key:"Escape",run:Ebe},{key:"ArrowDown",run:Py(!0)},{key:"ArrowUp",run:Py(!1)},{key:"PageDown",run:Py(!0,"page")},{key:"PageUp",run:Py(!1,"page")},{key:"Enter",run:Abe}],sxe=Cc.highest(zd.computeN([on],t=>t.facet(on).defaultKeymap?[XH]:[]));class hO{constructor(e,r,n){this.from=e,this.to=r,this.diagnostic=n}}class lh{constructor(e,r,n){this.diagnostics=e,this.panel=r,this.selected=n}static init(e,r,n){let i=n.facet(hg).markerFilter;i&&(e=i(e,n));let s=e.slice().sort((d,p)=>d.from-p.from||d.to-p.to),o=new Za,a=[],l=0,c=n.doc.iter(),h=0,u=n.doc.length;for(let d=0;;){let p=d==s.length?null:s[d];if(!p&&!a.length)break;let m,g;if(a.length)m=l,g=a.reduce((x,T)=>Math.min(x,T.to),p&&p.from>m?p.from:1e8);else{if(m=p.from,m>u)break;g=p.to,a.push(p),d++}for(;d<s.length;){let x=s[d];if(x.from==m&&(x.to>x.from||x.to==m))a.push(x),d++,g=Math.min(x.to,g);else{g=Math.min(x.from,g);break}}g=Math.min(g,u);let y=!1;if(a.some(x=>x.from==m&&(x.to==g||g==u))&&(y=m==g,!y&&g-m<10)){let x=m-(h+c.value.length);x>0&&(c.next(x),h=m);for(let T=m;;){if(T>=g){y=!0;break}if(!c.lineBreak&&h+c.value.length>T)break;T=h+c.value.length,h+=c.value.length,c.next()}}let b=bxe(a);if(y)o.add(m,m,lt.widget({widget:new pxe(b),diagnostics:a.slice()}));else{let x=a.reduce((T,S)=>S.markClass?T+" "+S.markClass:T,"");o.add(m,g,lt.mark({class:"cm-lintRange cm-lintRange-"+b+x,diagnostics:a.slice(),inclusiveEnd:a.some(T=>T.to>g)}))}if(l=g,l==u)break;for(let x=0;x<a.length;x++)a[x].to<=l&&a.splice(x--,1)}let f=o.finish();return new lh(f,r,Td(f))}}function Td(t,e=null,r=0){let n=null;return t.between(r,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!n)n=new hO(i,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(n.diagnostic)<0)return!1;n=new hO(n.from,s,n.diagnostic)}}),n}function oxe(t,e){let r=e.pos,n=e.end||r,i=t.state.facet(hg).hideOn(t,r,n);if(i!=null)return i;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(JH))||t.changes.touchesRange(s.from,Math.max(s.to,n)))}function axe(t,e){return t.field(Ji,!1)?e:e.concat(kt.appendConfig.of(xxe))}const JH=kt.define(),r9=kt.define(),ZH=kt.define(),Ji=hn.define({create(){return new lh(lt.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let r=t.diagnostics.map(e.changes),n=null,i=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);n=Td(r,t.selected.diagnostic,s)||Td(r,null,s)}!r.size&&i&&e.state.facet(hg).autoPanel&&(i=null),t=new lh(r,i,n)}for(let r of e.effects)if(r.is(JH)){let n=e.state.facet(hg).autoPanel?r.value.length?ug.open:null:t.panel;t=lh.init(r.value,n,e.state)}else r.is(r9)?t=new lh(t.diagnostics,r.value?ug.open:null,t.selected):r.is(ZH)&&(t=new lh(t.diagnostics,t.panel,r.value));return t},provide:t=>[Nm.from(t,e=>e.panel),$e.decorations.from(t,e=>e.diagnostics)]}),lxe=lt.mark({class:"cm-lintRange cm-lintRange-active"});function cxe(t,e,r){let{diagnostics:n}=t.state.field(Ji),i,s=-1,o=-1;n.between(e-(r<0?1:0),e+(r>0?1:0),(l,c,{spec:h})=>{if(e>=l&&e<=c&&(l==c||(e>l||r>0)&&(e<c||r<0)))return i=h.diagnostics,s=l,o=c,!1});let a=t.state.facet(hg).tooltipFilter;return i&&a&&(i=a(i,t.state)),i?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:hxe(t,i)}}}:null}function hxe(t,e){return nr("ul",{class:"cm-tooltip-lint"},e.map(r=>eq(t,r,!1)))}const uxe=t=>{let e=t.state.field(Ji,!1);(!e||!e.panel)&&t.dispatch({effects:axe(t.state,[r9.of(!0)])});let r=Pm(t,ug.open);return r&&r.dom.querySelector(".cm-panel-lint ul").focus(),!0},uO=t=>{let e=t.state.field(Ji,!1);return!e||!e.panel?!1:(t.dispatch({effects:r9.of(!1)}),!0)},fxe=t=>{let e=t.state.field(Ji,!1);if(!e)return!1;let r=t.state.selection.main,n=e.diagnostics.iter(r.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==r.from&&n.to==r.to)?!1:(t.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},dxe=[{key:"Mod-Shift-m",run:uxe,preventDefault:!0},{key:"F8",run:fxe}],hg=Ne.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...ra(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:fO,tooltipFilter:fO,needsRefresh:(e,r)=>e?r?n=>e(n)||r(n):e:r,hideOn:(e,r)=>e?r?(n,i,s)=>e(n,i,s)||r(n,i,s):e:r,autoPanel:(e,r)=>e||r})}}});function fO(t,e){return t?e?(r,n)=>e(t(r,n),n):t:e}function QH(t){let e=[];if(t)e:for(let{name:r}of t){for(let n=0;n<r.length;n++){let i=r[n];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function eq(t,e,r){var n;let i=r?QH(e.actions):[];return nr("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},nr("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(n=e.actions)===null||n===void 0?void 0:n.map((s,o)=>{let a=!1,l=d=>{if(d.preventDefault(),a)return;a=!0;let p=Td(t.state.field(Ji).diagnostics,e);p&&s.apply(t,p.from,p.to)},{name:c}=s,h=i[o]?c.indexOf(i[o]):-1,u=h<0?c:[c.slice(0,h),nr("u",c.slice(h,h+1)),c.slice(h+1)],f=s.markClass?" "+s.markClass:"";return nr("button",{type:"button",class:"cm-diagnosticAction"+f,onclick:l,onmousedown:l,"aria-label":` Action: ${c}${h<0?"":` (access key "${i[o]})"`}.`},u)}),e.source&&nr("div",{class:"cm-diagnosticSource"},e.source))}class pxe extends dl{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return nr("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class dO{constructor(e,r){this.diagnostic=r,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=eq(e,r,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class ug{constructor(e){this.view=e,this.items=[];let r=i=>{if(i.keyCode==27)uO(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=QH(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=Td(this.view.state.field(Ji).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},n=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=nr("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:r,onclick:n}),this.dom=nr("div",{class:"cm-panel-lint"},this.list,nr("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>uO(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Ji).selected;if(!e)return-1;for(let r=0;r<this.items.length;r++)if(this.items[r].diagnostic==e.diagnostic)return r;return-1}update(){let{diagnostics:e,selected:r}=this.view.state.field(Ji),n=0,i=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let h of c.diagnostics){if(o.has(h))continue;o.add(h);let u=-1,f;for(let d=n;d<this.items.length;d++)if(this.items[d].diagnostic==h){u=d;break}u<0?(f=new dO(this.view,h),this.items.splice(n,0,f),i=!0):(f=this.items[u],u>n&&(this.items.splice(n,u-n),i=!0)),r&&f.diagnostic==r.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),s=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),n++}});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new dO(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function r(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)r();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)r()}moveSelection(e){if(this.selectedIndex<0)return;let r=this.view.state.field(Ji),n=Td(r.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:ZH.of(n)})}static open(e){return new ug(e)}}function mxe(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Ny(t){return mxe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const gxe=$e.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ny("#d11")},".cm-lintRange-warning":{backgroundImage:Ny("orange")},".cm-lintRange-info":{backgroundImage:Ny("#999")},".cm-lintRange-hint":{backgroundImage:Ny("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function yxe(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function bxe(t){let e="hint",r=1;for(let n of t){let i=yxe(n.severity);i>r&&(r=i,e=n.severity)}return e}const xxe=[Ji,$e.decorations.compute([Ji],t=>{let{selected:e,panel:r}=t.field(Ji);return!e||!r||e.from==e.to?lt.none:lt.set([lxe.range(e.from,e.to)])}),pre(cxe,{hideOn:oxe}),gxe],vxe=[Tre(),Are(),jte(),cye(),hne(),xR(),$te(),Sr.allowMultipleSelections.of(!0),Xre(),qR(pne,{fallback:!0}),wne(),Gbe(),ixe(),nre(),ore(),Jte(),H2e(),zd.of([...Jbe,..._H,...obe,...bye,...one,...XH,...dxe])],wxe=1;function kxe(t){return t.nodeType===wxe}function Cxe(t){return kxe(t)&&t.namespaceURI==="http://www.w3.org/1999/xhtml"}function Sxe(t){let e=[[-1,t.state.doc]],r=[];for(;e.length>0;){const[n,i]=e.pop();if(n>=0){let s=t.nodeDOM(n);if(s&&Cxe(s)){let{top:o,bottom:a,left:l,right:c}=s.getBoundingClientRect();r.push([n,[l,o,c,o]],[n+i.nodeSize,[l,a,c,a]])}}if(i.isBlock&&!i.isTextblock){let s=n+1;for(let o of i.children)e.push([s,o]),s+=o.nodeSize}}return r}function Txe(t,e){let r=[],n,i;const s=()=>{const h=t.dom.getBoundingClientRect(),u=t.state.doc;return r&&n&&i&&h.width===i.width&&h.height===i.height&&h.x===i.x&&h.y===i.y&&n.eq(u)||(i=h,n=u,r=Sxe(t)),r},o=(h,u)=>{if(!t.editable||t.isDestroyed)return;const f=(m,g)=>{const[y,b]=m,[x,T]=g;return mO(h,b)-mO(h,T)||y-x};let d=s();d.sort(f),d=d.slice(0,8);const p=d.find(m=>(e==null?void 0:e({view:t,pos:m[0],event:u}))!==!1);if(!(p&&Mxe(t,p[0])))return p};let a,l;return(h,u)=>(a&&_xe(a,h)||(a=h,l=o(h,u)),l)}function _xe(t,e){return t[0]===e[0]&&t[1]===e[1]}function pO(t,e){return Math.abs(t[0]-e[0])+Math.abs(t[1]-e[1])}function mO(t,e){return Math.min(pO(t,[e[0],e[1]]),pO(t,[e[2],e[3]]))}function Mxe(t,e){const r=t.dragging;if(!r)return;const{move:n}=r;if(!n)return;const i=t.state.selection;if(!(i instanceof it))return;const{from:s,to:o}=i;return s<=e&&e<=o}function Axe(t){let e;return new xr({key:new vr("prosekit-drop-indicator"),view:r=>(e=Txe(r,t.onDrag),Lxe(r,e,t)),props:{handleDrop(r,n,i,s){if(!e)return!1;const o=e([n.clientX,n.clientY],n);if(!o)return!1;n.preventDefault();let a=o[0],l=r.state.tr;if(s){let{node:d}=r.dragging||{};d?d.replace(l):l.deleteSelection()}let c=l.mapping.map(a),h=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,u=l.doc;if(h?l.replaceRangeWith(c,c,i.content.firstChild):l.replaceRange(c,c,i),l.doc.eq(u))return!0;let f=l.doc.resolve(c);if(h&&it.isSelectable(i.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(i.content.firstChild))l.setSelection(new it(f));else{let d=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((p,m,g,y)=>d=y),l.setSelection(Exe(r,f,l.doc.resolve(d)))}return r.focus(),r.dispatch(l.setMeta("uiEvent","drop")),!0}}})}function Exe(t,e,r,n){return t.someProp("createSelectionBetween",i=>i(t,e,r))||Ge.between(e,r,n)}function Lxe(t,e,r){let n=t.dom,i,s,o,a=!1;const l=()=>{i&&clearTimeout(i),a=!1,i=setTimeout(()=>{var u;a||(u=r.onHide)==null||u.call(r)},30)},c=u=>{var m;a=!0;const{clientX:f,clientY:d}=u;if(s===f&&o===d)return;s=f,o=d;let p=e([f,d],u);if(p){const[g,[y,b,x,T]]=p,S={p1:{x:y,y:b},p2:{x,y:T}};(m=r.onShow)==null||m.call(r,{view:t,pos:g,line:S})}else{l();return}};return n.addEventListener("dragover",c),n.addEventListener("dragend",l),n.addEventListener("drop",l),n.addEventListener("dragleave",l),{destroy:()=>{n.removeEventListener("dragover",c),n.removeEventListener("dragend",l),n.removeEventListener("drop",l),n.removeEventListener("dragleave",l)}}}class Ir extends wt{constructor(e){super(e,e)}map(e,r){let n=e.resolve(r.map(this.head));return Ir.valid(n)?new Ir(n):wt.near(n)}content(){return Be.empty}eq(e){return e instanceof Ir&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ir(e.resolve(r.pos))}getBookmark(){return new n9(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!Oxe(e)||!Dxe(e))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let i=r.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,r,n=!1){e:for(;;){if(!n&&Ir.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(r>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(r>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=r;let l=e.doc.resolve(i);if(Ir.valid(l))return l}for(;;){let o=r>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!it.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*r),n=!1;continue e}break}s=o,i+=r;let a=e.doc.resolve(i);if(Ir.valid(a))return a}return null}}}Ir.prototype.visible=!1;Ir.findFrom=Ir.findGapCursorFrom;wt.jsonID("gapcursor",Ir);class n9{constructor(e){this.pos=e}map(e){return new n9(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return Ir.valid(r)?new Ir(r):wt.near(r)}}function tq(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function Oxe(t){for(let e=t.depth;e>=0;e--){let r=t.index(e),n=t.node(e);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||tq(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Dxe(t){for(let e=t.depth;e>=0;e--){let r=t.indexAfter(e),n=t.node(e);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||tq(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Ixe(){return new xr({props:{decorations:Nxe,createSelectionBetween(t,e,r){return e.pos==r.pos&&Ir.valid(r)?new Ir(r):null},handleClick:Rxe,handleKeyDown:Bxe,handleDOMEvents:{beforeinput:Pxe}}})}const Bxe=j7({ArrowLeft:Fy("horiz",-1),ArrowRight:Fy("horiz",1),ArrowUp:Fy("vert",-1),ArrowDown:Fy("vert",1)});function Fy(t,e){const r=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,i,s){let o=n.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Ge){if(!s.endOfTextblock(r)||a.depth==0)return!1;l=!1,a=n.doc.resolve(e>0?a.after():a.before())}let c=Ir.findGapCursorFrom(a,e,l);return c?(i&&i(n.tr.setSelection(new Ir(c))),!0):!1}}function Rxe(t,e,r){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!Ir.valid(n))return!1;let i=t.posAtCoords({left:r.clientX,top:r.clientY});return i&&i.inside>-1&&it.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Ir(n))),!0)}function Pxe(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Ir))return!1;let{$from:r}=t.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let i=ke.empty;for(let o=n.length-1;o>=0;o--)i=ke.from(n[o].createAndFill(null,i));let s=t.state.tr.replace(r.pos,r.pos,new Be(i,0,0));return s.setSelection(Ge.near(s.doc.resolve(r.pos+1))),t.dispatch(s),!1}function Nxe(t){if(!(t.selection instanceof Ir))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",or.create(t.doc,[jr.widget(t.selection.head,e,{key:"gapcursor"})])}function O1(t,e){return Object.assign(t,{meta:{package:"@milkdown/plugin-cursor",...e}}),t}const fg=er(null,"dropIndicatorState");O1(fg,{displayName:"Ctx<dropIndicatorState>"});const M4=er({width:2,color:!1,class:"milkdown-drop-indicator"},"dropIndicatorConfig");O1(M4,{displayName:"Ctx<dropIndicatorConfig>"});const Fxe=new vr("MILKDOWN_DROP_INDICATOR_DOM"),rq=Gr(t=>new xr({key:Fxe,view:e=>{var o;const r=t.get(M4.key),n=document.createElement("div");Object.assign(n.style,{position:"fixed",pointerEvents:"none",display:"none",backgroundColor:r.color,top:"0",left:"0"}),n.classList.add(r.class),n.classList.add("milkdown-drop-indicator"),(o=e.dom.parentNode)==null||o.appendChild(n);const i=t.use(fg.key),s=a=>{$xe(n,a,r)};return i.on(s),{destroy:()=>{i.off(s),n.remove()}}}}));O1(rq,{displayName:"Prose<dropIndicatorDOM>"});function $xe(t,e,r){if(!e){Object.assign(t.style,{display:"none"});return}const{line:n}=e,{width:i}=r,{p1:{x:s,y:o},p2:{x:a,y:l}}=n,c=o===l;let h,u,f=o,d=s;c?(h=a-s,u=i,f-=i/2):(h=i,u=l-o,d-=i/2),f=Math.round(f),d=Math.round(d),Object.assign(t.style,{display:"block",width:`${h}px`,height:`${u}px`,transform:`translate(${d}px, ${f}px)`})}const nq=Gr(t=>Axe({onShow:i=>{t.set(fg.key,i)},onHide:()=>{t.set(fg.key,null)},onDrag:()=>!0}));O1(nq,{displayName:"Prose<dropIndicator>"});const iq=Gr(()=>Ixe());O1(iq,{displayName:"Prose<gapCursor>"});const zxe=[iq,M4,fg,rq,nq].flat();function Hxe(t){var e;const r=(e=void 0)!=null?e:!1;let n=typeof document>"u"?null:document.createElement("div");return new xr({key:qxe,view:i=>{r!==!0&&Uxe(i.state.schema,r||[]);const s=i.dom.ownerDocument;n=n||document.createElement("div");const o=n,a=()=>{Wxe(i,o)};let l;return window.ResizeObserver&&(l=new window.ResizeObserver(()=>a()),l.observe(i.dom)),s.addEventListener("selectionchange",a),{update:()=>{a()},destroy:()=>{s.removeEventListener("selectionchange",a),l&&l.unobserve(i.dom)}}},props:{handleKeyDown:(i,s)=>{var o;const{selection:a}=i.state;if(s.altKey||s.ctrlKey||s.metaKey||s.shiftKey||s.isComposing||!["ArrowLeft","ArrowRight"].includes(s.key)||!qC(a)||!a.empty)return!1;const l=a.$head,[c,h]=sq(l),u=i.state.storedMarks||l.marks();if(c&&h&&!Mt.sameSet(c,h)){if(s.key==="ArrowLeft"&&!Mt.sameSet(c,u))return i.dispatch(i.state.tr.setStoredMarks(c)),!0;if(s.key==="ArrowRight"&&!Mt.sameSet(h,u))return i.dispatch(i.state.tr.setStoredMarks(h)),!0}return s.key==="ArrowLeft"&&l.textOffset===1?(i.dispatch(i.state.tr.setSelection(Ge.create(i.state.doc,l.pos-1)).setStoredMarks(l.marks())),!0):s.key==="ArrowRight"&&l.textOffset+1===((o=l.parent.maybeChild(l.index()))==null?void 0:o.nodeSize)?(i.dispatch(i.state.tr.setSelection(Ge.create(i.state.doc,l.pos+1)).setStoredMarks(l.marks())),!0):!1},decorations:i=>{if(!(!n||!qC(i.selection)||!i.selection.empty))return or.create(i.doc,[jr.widget(0,n,{key:"prosemirror-virtual-cursor"})])},attributes:{class:"virtual-cursor-enabled"}}})}var qxe=new vr("prosemirror-virtual-cursor");function Vxe(t,e){var r;const n=window.getSelection();if(!n||!n.rangeCount)return null;const i=(r=n==null?void 0:n.getRangeAt(0))==null?void 0:r.cloneRange();if(!i)return null;i.collapse(e);const s=i.getClientRects(),o=s!=null&&s.length?s[s.length-1]:null;return o!=null&&o.height?o:t.coordsAtPos(t.state.selection.head)}function sq(t){const e=t.index(),r=t.parent.maybeChild(e);let n=t.textOffset?r:null;return!n&&e>0&&(n=t.parent.maybeChild(e-1)),[n==null?void 0:n.marks,r==null?void 0:r.marks]}function qC(t){return t&&typeof t=="object"&&"$cursor"in t}function Wxe(t,e){if(!t||!t.dom||t.isDestroyed||!e)return;const{state:r,dom:n}=t,{selection:i}=r;if(!qC(i))return;const s=Vxe(t,i.$head===i.$from);if(!s)return e;const o=n.getBoundingClientRect();let a="prosemirror-virtual-cursor";const l=r.selection.$head,[c,h]=sq(l),u=r.storedMarks||l.marks();i.$cursor&&c&&h&&u&&!Mt.sameSet(c,h)&&(Mt.sameSet(c,u)?a+=" prosemirror-virtual-cursor-left":Mt.sameSet(h,u)&&(a+=" prosemirror-virtual-cursor-right")),e.className=a,jxe(e,"prosemirror-virtual-cursor-animation"),e.style.height=`${s.bottom-s.top}px`,e.style.left=`${s.left-o.left}px`,e.style.top=`${s.top-o.top}px`}function jxe(t,e){t.classList.remove(e),t.offsetWidth,t.classList.add(e)}function Uxe(t,e){for(const[r,n]of Object.entries(t.marks))n.spec.inclusive===!1&&!e.includes(r)&&console.warn(`[prosemirror-virtual-cursor] Virtual cursor does not work well with marks that have inclusive set to false. Please consider removing the inclusive option from the "${r}" mark or adding it to the "skipWarning" option.`)}var Gxe=Object.defineProperty,gO=Object.getOwnPropertySymbols,Kxe=Object.prototype.hasOwnProperty,Yxe=Object.prototype.propertyIsEnumerable,yO=(t,e,r)=>e in t?Gxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Xxe=(t,e)=>{for(var r in e||(e={}))Kxe.call(e,r)&&yO(t,r,e[r]);if(gO)for(var r of gO(e))Yxe.call(e,r)&&yO(t,r,e[r]);return t};function oq(t,e){return Object.assign(t,{meta:Xxe({package:"@milkdown/components"},e)}),t}const Jxe={imageIcon:"",uploadButton:"Upload",confirmButton:"",uploadPlaceholderText:"/Paste",onUpload:t=>Promise.resolve(URL.createObjectURL(t))},A4=er(Jxe,"inlineImageConfigCtx");oq(A4,{displayName:"Config<image-inline>",group:"ImageInline"});function Y2({icon:t,class:e,onClick:r}){return te("span",{class:Cn("milkdown-icon",e),onPointerdown:r,ref:n=>{n&&t&&(n.innerHTML=cn.sanitize(t.trim()))}})}Y2.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const Zxe=rS("abcdefg",8),Qxe=Sn({props:{src:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setLink:{type:Function,required:!0},imageIcon:{type:String,required:!1},uploadButton:{type:String,required:!1},confirmButton:{type:String,required:!1},uploadPlaceholderText:{type:String,required:!1},onUpload:{type:Function,required:!0}},setup({readonly:t,src:e,setLink:r,onUpload:n,imageIcon:i,uploadButton:s,confirmButton:o,uploadPlaceholderText:a,className:l}){var c,h;const u=ze(!1),f=ze(),d=ze((c=e.value)!=null?c:""),p=ze(Zxe()),m=ze(((h=e.value)==null?void 0:h.length)!==0),g=T=>{const w=T.target.value;m.value=w.length!==0,d.value=w},y=T=>{var S,w;T.key==="Enter"&&r((w=(S=f.value)==null?void 0:S.value)!=null?w:"")},b=()=>{var T,S;r((S=(T=f.value)==null?void 0:T.value)!=null?S:"")},x=T=>{var S;const w=(S=T.target.files)==null?void 0:S[0];w&&n(w).then(_=>{_&&(r(_),m.value=!0)}).catch(_=>{console.error("An error occurred while uploading image"),console.error(_)})};return()=>te("div",{class:Cn("image-edit",l)},te(Y2,{icon:i,class:"image-icon"}),te("div",{class:Cn("link-importer",u.value&&"focus")},te("input",{ref:f,draggable:"true",onDragstart:T=>{T.preventDefault(),T.stopPropagation()},disabled:t.value,class:"link-input-area",value:d.value,onInput:g,onKeydown:y,onFocus:()=>u.value=!0,onBlur:()=>u.value=!1}),!m.value&&te("div",{class:"placeholder"},te("input",{disabled:t.value,class:"hidden",id:p.value,type:"file",accept:"image/*",onChange:x}),te("label",{class:"uploader",for:p.value},te(Y2,{icon:s})),te("span",{class:"text",onClick:()=>{var T;return(T=f.value)==null?void 0:T.focus()}},a))),d.value&&te("div",{class:"confirm",onClick:()=>b()},te(Y2,{icon:o})))}}),eve=Sn({props:{src:{type:Object,required:!0},alt:{type:Object,required:!0},title:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup(t){const{src:e,alt:r,title:n}=t;return()=>{var i;return(i=e.value)!=null&&i.length?te("img",{class:"image-inline",src:e.value,alt:r.value,title:n.value}):te(Qxe,{src:t.src,selected:t.selected,readonly:t.readonly,setLink:s=>t.setAttr("src",s),imageIcon:t.config.imageIcon,uploadButton:t.config.uploadButton,confirmButton:t.config.confirmButton,uploadPlaceholderText:t.config.uploadPlaceholderText,onUpload:t.config.onUpload,className:"empty-image-inline"})}}}),aq=f1(ku.node,t=>(e,r,n)=>{const i=ze(e.attrs.src),s=ze(e.attrs.alt),o=ze(e.attrs.title),a=ze(!1),l=ze(!r.editable),c=(g,y)=>{if(!r.editable)return;const b=n();b!=null&&r.dispatch(r.state.tr.setNodeAttribute(b,g,g==="src"?cn.sanitize(y):y))},h=t.get(A4.key),u=po(eve,{src:i,alt:s,title:o,selected:a,readonly:l,setAttr:c,config:h}),f=document.createElement("span");f.className="milkdown-image-inline";const d=Gd(()=>{a.value?f.classList.add("selected"):f.classList.remove("selected")}),p=h.proxyDomURL,m=g=>{if(!p)i.value=g.attrs.src;else{const y=p(g.attrs.src);typeof y=="string"?i.value=y:y.then(b=>{i.value=b}).catch(console.error)}s.value=g.attrs.alt,o.value=g.attrs.title};return m(e),u.mount(f),{dom:f,update:g=>g.type!==e.type?!1:(m(g),!0),stopEvent:g=>g.target instanceof HTMLInputElement,selectNode:()=>{a.value=!0},deselectNode:()=>{a.value=!1},destroy:()=>{d(),u.unmount(),f.remove()}}});oq(aq,{displayName:"NodeView<image-inline>",group:"ImageInline"});const tve=[A4,aq];class ki{constructor(e,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new ki(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class es{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new es(r,ki.range(this,e))}}class xe{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,i,s,o=r&&r.loc;if(o&&o.start<=o.end){var a=o.lexer.input;i=o.start,s=o.end,i===a.length?n+=" at end of input: ":n+=" at position "+(i+1)+": ";var l=a.slice(i,s).replace(/[^]/g,"$&"),c;i>15?c=""+a.slice(i-15,i):c=a.slice(0,i);var h;s+15<a.length?h=a.slice(s,s+15)+"":h=a.slice(s),n+=c+l+h}var u=new Error(n);return u.name="ParseError",u.__proto__=xe.prototype,u.position=i,i!=null&&s!=null&&(u.length=s-i),u.rawMessage=e,u}}xe.prototype.__proto__=Error.prototype;var rve=function(e,r){return e===void 0?r:e},nve=/([A-Z])/g,ive=function(e){return e.replace(nve,"-$1").toLowerCase()},sve={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ove=/[&><"']/g;function ave(t){return String(t).replace(ove,e=>sve[e])}var lq=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},lve=function(e){var r=lq(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},cve=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},hve=function(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},Vt={deflt:rve,escape:ave,hyphenate:ive,getBaseElem:lq,isCharacterBox:lve,protocolFromUrl:hve},gm={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function uve(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class i9{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in gm)if(gm.hasOwnProperty(r)){var n=gm[r];this[r]=e[r]!==void 0?n.processor?n.processor(e[r]):e[r]:uve(n)}}reportNonstrict(e,r,n){var i=this.strict;if(typeof i=="function"&&(i=i(e,r,n)),!(!i||i==="ignore")){if(i===!0||i==="error")throw new xe("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),n);i==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,n){var i=this.strict;if(typeof i=="function")try{i=i(e,r,n)}catch{i="error"}return!i||i==="ignore"?!1:i===!0||i==="error"?!0:i==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=Vt.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class kl{constructor(e,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=n}sup(){return Bo[fve[this.id]]}sub(){return Bo[dve[this.id]]}fracNum(){return Bo[pve[this.id]]}fracDen(){return Bo[mve[this.id]]}cramp(){return Bo[gve[this.id]]}text(){return Bo[yve[this.id]]}isTight(){return this.size>=2}}var s9=0,Mx=1,kf=2,Ka=3,dg=4,ws=5,_d=6,ti=7,Bo=[new kl(s9,0,!1),new kl(Mx,0,!0),new kl(kf,1,!1),new kl(Ka,1,!0),new kl(dg,2,!1),new kl(ws,2,!0),new kl(_d,3,!1),new kl(ti,3,!0)],fve=[dg,ws,dg,ws,_d,ti,_d,ti],dve=[ws,ws,ws,ws,ti,ti,ti,ti],pve=[kf,Ka,dg,ws,_d,ti,_d,ti],mve=[Ka,Ka,ws,ws,ti,ti,ti,ti],gve=[Mx,Mx,Ka,Ka,ws,ws,ti,ti],yve=[s9,Mx,kf,Ka,kf,Ka,kf,Ka],ut={DISPLAY:Bo[s9],TEXT:Bo[kf],SCRIPT:Bo[dg],SCRIPTSCRIPT:Bo[_d]},VC=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function bve(t){for(var e=0;e<VC.length;e++)for(var r=VC[e],n=0;n<r.blocks.length;n++){var i=r.blocks[n];if(t>=i[0]&&t<=i[1])return r.name}return null}var X2=[];VC.forEach(t=>t.blocks.forEach(e=>X2.push(...e)));function cq(t){for(var e=0;e<X2.length;e+=2)if(t>=X2[e]&&t<=X2[e+1])return!0;return!1}var Nu=80,xve=function(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},vve=function(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},wve=function(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},kve=function(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},Cve=function(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},Sve=function(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},Tve=function(e,r,n){var i=n-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+i+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},_ve=function(e,r,n){r=1e3*r;var i="";switch(e){case"sqrtMain":i=xve(r,Nu);break;case"sqrtSize1":i=vve(r,Nu);break;case"sqrtSize2":i=wve(r,Nu);break;case"sqrtSize3":i=kve(r,Nu);break;case"sqrtSize4":i=Cve(r,Nu);break;case"sqrtTall":i=Tve(r,Nu,n)}return i},Mve=function(e,r){switch(e){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},bO={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Ave=function(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class D1{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var qo={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},$y={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},xO={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function hq(t,e){qo[t]=e}function o9(t,e,r){if(!qo[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),i=qo[e][n];if(!i&&t[0]in xO&&(n=xO[t[0]].charCodeAt(0),i=qo[e][n]),!i&&r==="text"&&cq(n)&&(i=qo[e][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var X5={};function Eve(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!X5[e]){var r=X5[e]={cssEmPerMu:$y.quad[e]/18};for(var n in $y)$y.hasOwnProperty(n)&&(r[n]=$y[n][e])}return X5[e]}var Lve=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],vO=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],wO=function(e,r){return r.size<2?e:Lve[e-1][r.size-1]};class Ea{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Ea.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=vO[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new Ea(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:wO(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:vO[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=wO(Ea.BASESIZE,e);return this.size===r&&this.textSize===Ea.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Ea.BASESIZE?["sizing","reset-size"+this.size,"size"+Ea.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Eve(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Ea.BASESIZE=6;var WC={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Ove={ex:!0,em:!0,mu:!0},uq=function(e){return typeof e!="string"&&(e=e.unit),e in WC||e in Ove||e==="ex"},Or=function(e,r){var n;if(e.unit in WC)n=WC[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var i;if(r.style.isTight()?i=r.havingStyle(r.style.text()):i=r,e.unit==="ex")n=i.fontMetrics().xHeight;else if(e.unit==="em")n=i.fontMetrics().quad;else throw new xe("Invalid unit: '"+e.unit+"'");i!==r&&(n*=i.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*n,r.maxSize)},_e=function(e){return+e.toFixed(4)+"em"},mc=function(e){return e.filter(r=>r).join(" ")},fq=function(e,r,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var i=r.getColor();i&&(this.style.color=i)}},dq=function(e){var r=document.createElement(e);r.className=mc(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&r.setAttribute(i,this.attributes[i]);for(var s=0;s<this.children.length;s++)r.appendChild(this.children[s].toNode());return r},Dve=/[\s"'>/=\x00-\x1f]/,pq=function(e){var r="<"+e;this.classes.length&&(r+=' class="'+Vt.escape(mc(this.classes))+'"');var n="";for(var i in this.style)this.style.hasOwnProperty(i)&&(n+=Vt.hyphenate(i)+":"+this.style[i]+";");n&&(r+=' style="'+Vt.escape(n)+'"');for(var s in this.attributes)if(this.attributes.hasOwnProperty(s)){if(Dve.test(s))throw new xe("Invalid attribute name '"+s+"'");r+=" "+s+'="'+Vt.escape(this.attributes[s])+'"'}r+=">";for(var o=0;o<this.children.length;o++)r+=this.children[o].toMarkup();return r+="</"+e+">",r};class I1{constructor(e,r,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,fq.call(this,e,n,i),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return dq.call(this,"span")}toMarkup(){return pq.call(this,"span")}}class a9{constructor(e,r,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,fq.call(this,r,i),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return dq.call(this,"a")}toMarkup(){return pq.call(this,"a")}}class Ive{constructor(e,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+Vt.escape(this.src)+'"'+(' alt="'+Vt.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Vt.hyphenate(n)+":"+this.style[n]+";");return r&&(e+=' style="'+Vt.escape(r)+'"'),e+="'/>",e}}var Bve={:"",:"",:"",:""};class As{constructor(e,r,n,i,s,o,a,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=n||0,this.italic=i||0,this.skew=s||0,this.width=o||0,this.classes=a||[],this.style=l||{},this.maxFontSize=0;var c=bve(this.text.charCodeAt(0));c&&this.classes.push(c+"_fallback"),/[]/.test(this.text)&&(this.text=Bve[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=_e(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=mc(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=Vt.escape(mc(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var i in this.style)this.style.hasOwnProperty(i)&&(n+=Vt.hyphenate(i)+":"+this.style[i]+";");n&&(e=!0,r+=' style="'+Vt.escape(n)+'"');var s=Vt.escape(this.text);return e?(r+=">",r+=s,r+="</span>",r):s}}class sl{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var i=0;i<this.children.length;i++)r.appendChild(this.children[i].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Vt.escape(this.attributes[r])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class gc{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",bO[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+Vt.escape(this.alternate)+'"/>':'<path d="'+Vt.escape(bO[this.pathName])+'"/>'}}class jC{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Vt.escape(this.attributes[r])+'"');return e+="/>",e}}function kO(t){if(t instanceof As)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function Rve(t){if(t instanceof I1)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var Pve={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Nve={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},pr={math:{},text:{}};function v(t,e,r,n,i,s){pr[t][i]={font:e,group:r,replace:n},s&&n&&(pr[t][n]=pr[t][i])}var C="math",me="text",M="main",B="ams",Tr="accent-token",Fe="bin",pi="close",Qd="inner",ht="mathord",Kr="op-token",as="open",E4="punct",F="rel",bl="spacing",G="textord";v(C,M,F,"","\\equiv",!0);v(C,M,F,"","\\prec",!0);v(C,M,F,"","\\succ",!0);v(C,M,F,"","\\sim",!0);v(C,M,F,"","\\perp");v(C,M,F,"","\\preceq",!0);v(C,M,F,"","\\succeq",!0);v(C,M,F,"","\\simeq",!0);v(C,M,F,"","\\mid",!0);v(C,M,F,"","\\ll",!0);v(C,M,F,"","\\gg",!0);v(C,M,F,"","\\asymp",!0);v(C,M,F,"","\\parallel");v(C,M,F,"","\\bowtie",!0);v(C,M,F,"","\\smile",!0);v(C,M,F,"","\\sqsubseteq",!0);v(C,M,F,"","\\sqsupseteq",!0);v(C,M,F,"","\\doteq",!0);v(C,M,F,"","\\frown",!0);v(C,M,F,"","\\ni",!0);v(C,M,F,"","\\propto",!0);v(C,M,F,"","\\vdash",!0);v(C,M,F,"","\\dashv",!0);v(C,M,F,"","\\owns");v(C,M,E4,".","\\ldotp");v(C,M,E4,"","\\cdotp");v(C,M,G,"#","\\#");v(me,M,G,"#","\\#");v(C,M,G,"&","\\&");v(me,M,G,"&","\\&");v(C,M,G,"","\\aleph",!0);v(C,M,G,"","\\forall",!0);v(C,M,G,"","\\hbar",!0);v(C,M,G,"","\\exists",!0);v(C,M,G,"","\\nabla",!0);v(C,M,G,"","\\flat",!0);v(C,M,G,"","\\ell",!0);v(C,M,G,"","\\natural",!0);v(C,M,G,"","\\clubsuit",!0);v(C,M,G,"","\\wp",!0);v(C,M,G,"","\\sharp",!0);v(C,M,G,"","\\diamondsuit",!0);v(C,M,G,"","\\Re",!0);v(C,M,G,"","\\heartsuit",!0);v(C,M,G,"","\\Im",!0);v(C,M,G,"","\\spadesuit",!0);v(C,M,G,"","\\S",!0);v(me,M,G,"","\\S");v(C,M,G,"","\\P",!0);v(me,M,G,"","\\P");v(C,M,G,"","\\dag");v(me,M,G,"","\\dag");v(me,M,G,"","\\textdagger");v(C,M,G,"","\\ddag");v(me,M,G,"","\\ddag");v(me,M,G,"","\\textdaggerdbl");v(C,M,pi,"","\\rmoustache",!0);v(C,M,as,"","\\lmoustache",!0);v(C,M,pi,"","\\rgroup",!0);v(C,M,as,"","\\lgroup",!0);v(C,M,Fe,"","\\mp",!0);v(C,M,Fe,"","\\ominus",!0);v(C,M,Fe,"","\\uplus",!0);v(C,M,Fe,"","\\sqcap",!0);v(C,M,Fe,"","\\ast");v(C,M,Fe,"","\\sqcup",!0);v(C,M,Fe,"","\\bigcirc",!0);v(C,M,Fe,"","\\bullet",!0);v(C,M,Fe,"","\\ddagger");v(C,M,Fe,"","\\wr",!0);v(C,M,Fe,"","\\amalg");v(C,M,Fe,"&","\\And");v(C,M,F,"","\\longleftarrow",!0);v(C,M,F,"","\\Leftarrow",!0);v(C,M,F,"","\\Longleftarrow",!0);v(C,M,F,"","\\longrightarrow",!0);v(C,M,F,"","\\Rightarrow",!0);v(C,M,F,"","\\Longrightarrow",!0);v(C,M,F,"","\\leftrightarrow",!0);v(C,M,F,"","\\longleftrightarrow",!0);v(C,M,F,"","\\Leftrightarrow",!0);v(C,M,F,"","\\Longleftrightarrow",!0);v(C,M,F,"","\\mapsto",!0);v(C,M,F,"","\\longmapsto",!0);v(C,M,F,"","\\nearrow",!0);v(C,M,F,"","\\hookleftarrow",!0);v(C,M,F,"","\\hookrightarrow",!0);v(C,M,F,"","\\searrow",!0);v(C,M,F,"","\\leftharpoonup",!0);v(C,M,F,"","\\rightharpoonup",!0);v(C,M,F,"","\\swarrow",!0);v(C,M,F,"","\\leftharpoondown",!0);v(C,M,F,"","\\rightharpoondown",!0);v(C,M,F,"","\\nwarrow",!0);v(C,M,F,"","\\rightleftharpoons",!0);v(C,B,F,"","\\nless",!0);v(C,B,F,"","\\@nleqslant");v(C,B,F,"","\\@nleqq");v(C,B,F,"","\\lneq",!0);v(C,B,F,"","\\lneqq",!0);v(C,B,F,"","\\@lvertneqq");v(C,B,F,"","\\lnsim",!0);v(C,B,F,"","\\lnapprox",!0);v(C,B,F,"","\\nprec",!0);v(C,B,F,"","\\npreceq",!0);v(C,B,F,"","\\precnsim",!0);v(C,B,F,"","\\precnapprox",!0);v(C,B,F,"","\\nsim",!0);v(C,B,F,"","\\@nshortmid");v(C,B,F,"","\\nmid",!0);v(C,B,F,"","\\nvdash",!0);v(C,B,F,"","\\nvDash",!0);v(C,B,F,"","\\ntriangleleft");v(C,B,F,"","\\ntrianglelefteq",!0);v(C,B,F,"","\\subsetneq",!0);v(C,B,F,"","\\@varsubsetneq");v(C,B,F,"","\\subsetneqq",!0);v(C,B,F,"","\\@varsubsetneqq");v(C,B,F,"","\\ngtr",!0);v(C,B,F,"","\\@ngeqslant");v(C,B,F,"","\\@ngeqq");v(C,B,F,"","\\gneq",!0);v(C,B,F,"","\\gneqq",!0);v(C,B,F,"","\\@gvertneqq");v(C,B,F,"","\\gnsim",!0);v(C,B,F,"","\\gnapprox",!0);v(C,B,F,"","\\nsucc",!0);v(C,B,F,"","\\nsucceq",!0);v(C,B,F,"","\\succnsim",!0);v(C,B,F,"","\\succnapprox",!0);v(C,B,F,"","\\ncong",!0);v(C,B,F,"","\\@nshortparallel");v(C,B,F,"","\\nparallel",!0);v(C,B,F,"","\\nVDash",!0);v(C,B,F,"","\\ntriangleright");v(C,B,F,"","\\ntrianglerighteq",!0);v(C,B,F,"","\\@nsupseteqq");v(C,B,F,"","\\supsetneq",!0);v(C,B,F,"","\\@varsupsetneq");v(C,B,F,"","\\supsetneqq",!0);v(C,B,F,"","\\@varsupsetneqq");v(C,B,F,"","\\nVdash",!0);v(C,B,F,"","\\precneqq",!0);v(C,B,F,"","\\succneqq",!0);v(C,B,F,"","\\@nsubseteqq");v(C,B,Fe,"","\\unlhd");v(C,B,Fe,"","\\unrhd");v(C,B,F,"","\\nleftarrow",!0);v(C,B,F,"","\\nrightarrow",!0);v(C,B,F,"","\\nLeftarrow",!0);v(C,B,F,"","\\nRightarrow",!0);v(C,B,F,"","\\nleftrightarrow",!0);v(C,B,F,"","\\nLeftrightarrow",!0);v(C,B,F,"","\\vartriangle");v(C,B,G,"","\\hslash");v(C,B,G,"","\\triangledown");v(C,B,G,"","\\lozenge");v(C,B,G,"","\\circledS");v(C,B,G,"","\\circledR");v(me,B,G,"","\\circledR");v(C,B,G,"","\\measuredangle",!0);v(C,B,G,"","\\nexists");v(C,B,G,"","\\mho");v(C,B,G,"","\\Finv",!0);v(C,B,G,"","\\Game",!0);v(C,B,G,"","\\backprime");v(C,B,G,"","\\blacktriangle");v(C,B,G,"","\\blacktriangledown");v(C,B,G,"","\\blacksquare");v(C,B,G,"","\\blacklozenge");v(C,B,G,"","\\bigstar");v(C,B,G,"","\\sphericalangle",!0);v(C,B,G,"","\\complement",!0);v(C,B,G,"","\\eth",!0);v(me,M,G,"","");v(C,B,G,"","\\diagup");v(C,B,G,"","\\diagdown");v(C,B,G,"","\\square");v(C,B,G,"","\\Box");v(C,B,G,"","\\Diamond");v(C,B,G,"","\\yen",!0);v(me,B,G,"","\\yen",!0);v(C,B,G,"","\\checkmark",!0);v(me,B,G,"","\\checkmark");v(C,B,G,"","\\beth",!0);v(C,B,G,"","\\daleth",!0);v(C,B,G,"","\\gimel",!0);v(C,B,G,"","\\digamma",!0);v(C,B,G,"","\\varkappa");v(C,B,as,"","\\@ulcorner",!0);v(C,B,pi,"","\\@urcorner",!0);v(C,B,as,"","\\@llcorner",!0);v(C,B,pi,"","\\@lrcorner",!0);v(C,B,F,"","\\leqq",!0);v(C,B,F,"","\\leqslant",!0);v(C,B,F,"","\\eqslantless",!0);v(C,B,F,"","\\lesssim",!0);v(C,B,F,"","\\lessapprox",!0);v(C,B,F,"","\\approxeq",!0);v(C,B,Fe,"","\\lessdot");v(C,B,F,"","\\lll",!0);v(C,B,F,"","\\lessgtr",!0);v(C,B,F,"","\\lesseqgtr",!0);v(C,B,F,"","\\lesseqqgtr",!0);v(C,B,F,"","\\doteqdot");v(C,B,F,"","\\risingdotseq",!0);v(C,B,F,"","\\fallingdotseq",!0);v(C,B,F,"","\\backsim",!0);v(C,B,F,"","\\backsimeq",!0);v(C,B,F,"","\\subseteqq",!0);v(C,B,F,"","\\Subset",!0);v(C,B,F,"","\\sqsubset",!0);v(C,B,F,"","\\preccurlyeq",!0);v(C,B,F,"","\\curlyeqprec",!0);v(C,B,F,"","\\precsim",!0);v(C,B,F,"","\\precapprox",!0);v(C,B,F,"","\\vartriangleleft");v(C,B,F,"","\\trianglelefteq");v(C,B,F,"","\\vDash",!0);v(C,B,F,"","\\Vvdash",!0);v(C,B,F,"","\\smallsmile");v(C,B,F,"","\\smallfrown");v(C,B,F,"","\\bumpeq",!0);v(C,B,F,"","\\Bumpeq",!0);v(C,B,F,"","\\geqq",!0);v(C,B,F,"","\\geqslant",!0);v(C,B,F,"","\\eqslantgtr",!0);v(C,B,F,"","\\gtrsim",!0);v(C,B,F,"","\\gtrapprox",!0);v(C,B,Fe,"","\\gtrdot");v(C,B,F,"","\\ggg",!0);v(C,B,F,"","\\gtrless",!0);v(C,B,F,"","\\gtreqless",!0);v(C,B,F,"","\\gtreqqless",!0);v(C,B,F,"","\\eqcirc",!0);v(C,B,F,"","\\circeq",!0);v(C,B,F,"","\\triangleq",!0);v(C,B,F,"","\\thicksim");v(C,B,F,"","\\thickapprox");v(C,B,F,"","\\supseteqq",!0);v(C,B,F,"","\\Supset",!0);v(C,B,F,"","\\sqsupset",!0);v(C,B,F,"","\\succcurlyeq",!0);v(C,B,F,"","\\curlyeqsucc",!0);v(C,B,F,"","\\succsim",!0);v(C,B,F,"","\\succapprox",!0);v(C,B,F,"","\\vartriangleright");v(C,B,F,"","\\trianglerighteq");v(C,B,F,"","\\Vdash",!0);v(C,B,F,"","\\shortmid");v(C,B,F,"","\\shortparallel");v(C,B,F,"","\\between",!0);v(C,B,F,"","\\pitchfork",!0);v(C,B,F,"","\\varpropto");v(C,B,F,"","\\blacktriangleleft");v(C,B,F,"","\\therefore",!0);v(C,B,F,"","\\backepsilon");v(C,B,F,"","\\blacktriangleright");v(C,B,F,"","\\because",!0);v(C,B,F,"","\\llless");v(C,B,F,"","\\gggtr");v(C,B,Fe,"","\\lhd");v(C,B,Fe,"","\\rhd");v(C,B,F,"","\\eqsim",!0);v(C,M,F,"","\\Join");v(C,B,F,"","\\Doteq",!0);v(C,B,Fe,"","\\dotplus",!0);v(C,B,Fe,"","\\smallsetminus");v(C,B,Fe,"","\\Cap",!0);v(C,B,Fe,"","\\Cup",!0);v(C,B,Fe,"","\\doublebarwedge",!0);v(C,B,Fe,"","\\boxminus",!0);v(C,B,Fe,"","\\boxplus",!0);v(C,B,Fe,"","\\divideontimes",!0);v(C,B,Fe,"","\\ltimes",!0);v(C,B,Fe,"","\\rtimes",!0);v(C,B,Fe,"","\\leftthreetimes",!0);v(C,B,Fe,"","\\rightthreetimes",!0);v(C,B,Fe,"","\\curlywedge",!0);v(C,B,Fe,"","\\curlyvee",!0);v(C,B,Fe,"","\\circleddash",!0);v(C,B,Fe,"","\\circledast",!0);v(C,B,Fe,"","\\centerdot");v(C,B,Fe,"","\\intercal",!0);v(C,B,Fe,"","\\doublecap");v(C,B,Fe,"","\\doublecup");v(C,B,Fe,"","\\boxtimes",!0);v(C,B,F,"","\\dashrightarrow",!0);v(C,B,F,"","\\dashleftarrow",!0);v(C,B,F,"","\\leftleftarrows",!0);v(C,B,F,"","\\leftrightarrows",!0);v(C,B,F,"","\\Lleftarrow",!0);v(C,B,F,"","\\twoheadleftarrow",!0);v(C,B,F,"","\\leftarrowtail",!0);v(C,B,F,"","\\looparrowleft",!0);v(C,B,F,"","\\leftrightharpoons",!0);v(C,B,F,"","\\curvearrowleft",!0);v(C,B,F,"","\\circlearrowleft",!0);v(C,B,F,"","\\Lsh",!0);v(C,B,F,"","\\upuparrows",!0);v(C,B,F,"","\\upharpoonleft",!0);v(C,B,F,"","\\downharpoonleft",!0);v(C,M,F,"","\\origof",!0);v(C,M,F,"","\\imageof",!0);v(C,B,F,"","\\multimap",!0);v(C,B,F,"","\\leftrightsquigarrow",!0);v(C,B,F,"","\\rightrightarrows",!0);v(C,B,F,"","\\rightleftarrows",!0);v(C,B,F,"","\\twoheadrightarrow",!0);v(C,B,F,"","\\rightarrowtail",!0);v(C,B,F,"","\\looparrowright",!0);v(C,B,F,"","\\curvearrowright",!0);v(C,B,F,"","\\circlearrowright",!0);v(C,B,F,"","\\Rsh",!0);v(C,B,F,"","\\downdownarrows",!0);v(C,B,F,"","\\upharpoonright",!0);v(C,B,F,"","\\downharpoonright",!0);v(C,B,F,"","\\rightsquigarrow",!0);v(C,B,F,"","\\leadsto");v(C,B,F,"","\\Rrightarrow",!0);v(C,B,F,"","\\restriction");v(C,M,G,"","`");v(C,M,G,"$","\\$");v(me,M,G,"$","\\$");v(me,M,G,"$","\\textdollar");v(C,M,G,"%","\\%");v(me,M,G,"%","\\%");v(C,M,G,"_","\\_");v(me,M,G,"_","\\_");v(me,M,G,"_","\\textunderscore");v(C,M,G,"","\\angle",!0);v(C,M,G,"","\\infty",!0);v(C,M,G,"","\\prime");v(C,M,G,"","\\triangle");v(C,M,G,"","\\Gamma",!0);v(C,M,G,"","\\Delta",!0);v(C,M,G,"","\\Theta",!0);v(C,M,G,"","\\Lambda",!0);v(C,M,G,"","\\Xi",!0);v(C,M,G,"","\\Pi",!0);v(C,M,G,"","\\Sigma",!0);v(C,M,G,"","\\Upsilon",!0);v(C,M,G,"","\\Phi",!0);v(C,M,G,"","\\Psi",!0);v(C,M,G,"","\\Omega",!0);v(C,M,G,"A","");v(C,M,G,"B","");v(C,M,G,"E","");v(C,M,G,"Z","");v(C,M,G,"H","");v(C,M,G,"I","");v(C,M,G,"K","");v(C,M,G,"M","");v(C,M,G,"N","");v(C,M,G,"O","");v(C,M,G,"P","");v(C,M,G,"T","");v(C,M,G,"X","");v(C,M,G,"","\\neg",!0);v(C,M,G,"","\\lnot");v(C,M,G,"","\\top");v(C,M,G,"","\\bot");v(C,M,G,"","\\emptyset");v(C,B,G,"","\\varnothing");v(C,M,ht,"","\\alpha",!0);v(C,M,ht,"","\\beta",!0);v(C,M,ht,"","\\gamma",!0);v(C,M,ht,"","\\delta",!0);v(C,M,ht,"","\\epsilon",!0);v(C,M,ht,"","\\zeta",!0);v(C,M,ht,"","\\eta",!0);v(C,M,ht,"","\\theta",!0);v(C,M,ht,"","\\iota",!0);v(C,M,ht,"","\\kappa",!0);v(C,M,ht,"","\\lambda",!0);v(C,M,ht,"","\\mu",!0);v(C,M,ht,"","\\nu",!0);v(C,M,ht,"","\\xi",!0);v(C,M,ht,"","\\omicron",!0);v(C,M,ht,"","\\pi",!0);v(C,M,ht,"","\\rho",!0);v(C,M,ht,"","\\sigma",!0);v(C,M,ht,"","\\tau",!0);v(C,M,ht,"","\\upsilon",!0);v(C,M,ht,"","\\phi",!0);v(C,M,ht,"","\\chi",!0);v(C,M,ht,"","\\psi",!0);v(C,M,ht,"","\\omega",!0);v(C,M,ht,"","\\varepsilon",!0);v(C,M,ht,"","\\vartheta",!0);v(C,M,ht,"","\\varpi",!0);v(C,M,ht,"","\\varrho",!0);v(C,M,ht,"","\\varsigma",!0);v(C,M,ht,"","\\varphi",!0);v(C,M,Fe,"","*",!0);v(C,M,Fe,"+","+");v(C,M,Fe,"","-",!0);v(C,M,Fe,"","\\cdot",!0);v(C,M,Fe,"","\\circ",!0);v(C,M,Fe,"","\\div",!0);v(C,M,Fe,"","\\pm",!0);v(C,M,Fe,"","\\times",!0);v(C,M,Fe,"","\\cap",!0);v(C,M,Fe,"","\\cup",!0);v(C,M,Fe,"","\\setminus",!0);v(C,M,Fe,"","\\land");v(C,M,Fe,"","\\lor");v(C,M,Fe,"","\\wedge",!0);v(C,M,Fe,"","\\vee",!0);v(C,M,G,"","\\surd");v(C,M,as,"","\\langle",!0);v(C,M,as,"","\\lvert");v(C,M,as,"","\\lVert");v(C,M,pi,"?","?");v(C,M,pi,"!","!");v(C,M,pi,"","\\rangle",!0);v(C,M,pi,"","\\rvert");v(C,M,pi,"","\\rVert");v(C,M,F,"=","=");v(C,M,F,":",":");v(C,M,F,"","\\approx",!0);v(C,M,F,"","\\cong",!0);v(C,M,F,"","\\ge");v(C,M,F,"","\\geq",!0);v(C,M,F,"","\\gets");v(C,M,F,">","\\gt",!0);v(C,M,F,"","\\in",!0);v(C,M,F,"","\\@not");v(C,M,F,"","\\subset",!0);v(C,M,F,"","\\supset",!0);v(C,M,F,"","\\subseteq",!0);v(C,M,F,"","\\supseteq",!0);v(C,B,F,"","\\nsubseteq",!0);v(C,B,F,"","\\nsupseteq",!0);v(C,M,F,"","\\models");v(C,M,F,"","\\leftarrow",!0);v(C,M,F,"","\\le");v(C,M,F,"","\\leq",!0);v(C,M,F,"<","\\lt",!0);v(C,M,F,"","\\rightarrow",!0);v(C,M,F,"","\\to");v(C,B,F,"","\\ngeq",!0);v(C,B,F,"","\\nleq",!0);v(C,M,bl,"","\\ ");v(C,M,bl,"","\\space");v(C,M,bl,"","\\nobreakspace");v(me,M,bl,"","\\ ");v(me,M,bl,""," ");v(me,M,bl,"","\\space");v(me,M,bl,"","\\nobreakspace");v(C,M,bl,null,"\\nobreak");v(C,M,bl,null,"\\allowbreak");v(C,M,E4,",",",");v(C,M,E4,";",";");v(C,B,Fe,"","\\barwedge",!0);v(C,B,Fe,"","\\veebar",!0);v(C,M,Fe,"","\\odot",!0);v(C,M,Fe,"","\\oplus",!0);v(C,M,Fe,"","\\otimes",!0);v(C,M,G,"","\\partial",!0);v(C,M,Fe,"","\\oslash",!0);v(C,B,Fe,"","\\circledcirc",!0);v(C,B,Fe,"","\\boxdot",!0);v(C,M,Fe,"","\\bigtriangleup");v(C,M,Fe,"","\\bigtriangledown");v(C,M,Fe,"","\\dagger");v(C,M,Fe,"","\\diamond");v(C,M,Fe,"","\\star");v(C,M,Fe,"","\\triangleleft");v(C,M,Fe,"","\\triangleright");v(C,M,as,"{","\\{");v(me,M,G,"{","\\{");v(me,M,G,"{","\\textbraceleft");v(C,M,pi,"}","\\}");v(me,M,G,"}","\\}");v(me,M,G,"}","\\textbraceright");v(C,M,as,"{","\\lbrace");v(C,M,pi,"}","\\rbrace");v(C,M,as,"[","\\lbrack",!0);v(me,M,G,"[","\\lbrack",!0);v(C,M,pi,"]","\\rbrack",!0);v(me,M,G,"]","\\rbrack",!0);v(C,M,as,"(","\\lparen",!0);v(C,M,pi,")","\\rparen",!0);v(me,M,G,"<","\\textless",!0);v(me,M,G,">","\\textgreater",!0);v(C,M,as,"","\\lfloor",!0);v(C,M,pi,"","\\rfloor",!0);v(C,M,as,"","\\lceil",!0);v(C,M,pi,"","\\rceil",!0);v(C,M,G,"\\","\\backslash");v(C,M,G,"","|");v(C,M,G,"","\\vert");v(me,M,G,"|","\\textbar",!0);v(C,M,G,"","\\|");v(C,M,G,"","\\Vert");v(me,M,G,"","\\textbardbl");v(me,M,G,"~","\\textasciitilde");v(me,M,G,"\\","\\textbackslash");v(me,M,G,"^","\\textasciicircum");v(C,M,F,"","\\uparrow",!0);v(C,M,F,"","\\Uparrow",!0);v(C,M,F,"","\\downarrow",!0);v(C,M,F,"","\\Downarrow",!0);v(C,M,F,"","\\updownarrow",!0);v(C,M,F,"","\\Updownarrow",!0);v(C,M,Kr,"","\\coprod");v(C,M,Kr,"","\\bigvee");v(C,M,Kr,"","\\bigwedge");v(C,M,Kr,"","\\biguplus");v(C,M,Kr,"","\\bigcap");v(C,M,Kr,"","\\bigcup");v(C,M,Kr,"","\\int");v(C,M,Kr,"","\\intop");v(C,M,Kr,"","\\iint");v(C,M,Kr,"","\\iiint");v(C,M,Kr,"","\\prod");v(C,M,Kr,"","\\sum");v(C,M,Kr,"","\\bigotimes");v(C,M,Kr,"","\\bigoplus");v(C,M,Kr,"","\\bigodot");v(C,M,Kr,"","\\oint");v(C,M,Kr,"","\\oiint");v(C,M,Kr,"","\\oiiint");v(C,M,Kr,"","\\bigsqcup");v(C,M,Kr,"","\\smallint");v(me,M,Qd,"","\\textellipsis");v(C,M,Qd,"","\\mathellipsis");v(me,M,Qd,"","\\ldots",!0);v(C,M,Qd,"","\\ldots",!0);v(C,M,Qd,"","\\@cdots",!0);v(C,M,Qd,"","\\ddots",!0);v(C,M,G,"","\\varvdots");v(me,M,G,"","\\varvdots");v(C,M,Tr,"","\\acute");v(C,M,Tr,"","\\grave");v(C,M,Tr,"","\\ddot");v(C,M,Tr,"~","\\tilde");v(C,M,Tr,"","\\bar");v(C,M,Tr,"","\\breve");v(C,M,Tr,"","\\check");v(C,M,Tr,"^","\\hat");v(C,M,Tr,"","\\vec");v(C,M,Tr,"","\\dot");v(C,M,Tr,"","\\mathring");v(C,M,ht,"","\\@imath");v(C,M,ht,"","\\@jmath");v(C,M,G,"","");v(C,M,G,"","");v(me,M,G,"","\\i",!0);v(me,M,G,"","\\j",!0);v(me,M,G,"","\\ss",!0);v(me,M,G,"","\\ae",!0);v(me,M,G,"","\\oe",!0);v(me,M,G,"","\\o",!0);v(me,M,G,"","\\AE",!0);v(me,M,G,"","\\OE",!0);v(me,M,G,"","\\O",!0);v(me,M,Tr,"","\\'");v(me,M,Tr,"","\\`");v(me,M,Tr,"","\\^");v(me,M,Tr,"","\\~");v(me,M,Tr,"","\\=");v(me,M,Tr,"","\\u");v(me,M,Tr,"","\\.");v(me,M,Tr,"","\\c");v(me,M,Tr,"","\\r");v(me,M,Tr,"","\\v");v(me,M,Tr,"",'\\"');v(me,M,Tr,"","\\H");v(me,M,Tr,"","\\textcircled");var mq={"--":!0,"---":!0,"``":!0,"''":!0};v(me,M,G,"","--",!0);v(me,M,G,"","\\textendash");v(me,M,G,"","---",!0);v(me,M,G,"","\\textemdash");v(me,M,G,"","`",!0);v(me,M,G,"","\\textquoteleft");v(me,M,G,"","'",!0);v(me,M,G,"","\\textquoteright");v(me,M,G,"","``",!0);v(me,M,G,"","\\textquotedblleft");v(me,M,G,"","''",!0);v(me,M,G,"","\\textquotedblright");v(C,M,G,"","\\degree",!0);v(me,M,G,"","\\degree");v(me,M,G,"","\\textdegree",!0);v(C,M,G,"","\\pounds");v(C,M,G,"","\\mathsterling",!0);v(me,M,G,"","\\pounds");v(me,M,G,"","\\textsterling",!0);v(C,B,G,"","\\maltese");v(me,B,G,"","\\maltese");var CO='0123456789/@."';for(var J5=0;J5<CO.length;J5++){var SO=CO.charAt(J5);v(C,M,G,SO,SO)}var TO='0123456789!@*()-=+";:?/.,';for(var Z5=0;Z5<TO.length;Z5++){var _O=TO.charAt(Z5);v(me,M,G,_O,_O)}var Ax="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var Q5=0;Q5<Ax.length;Q5++){var zy=Ax.charAt(Q5);v(C,M,ht,zy,zy),v(me,M,G,zy,zy)}v(C,B,G,"C","");v(me,B,G,"C","");v(C,B,G,"H","");v(me,B,G,"H","");v(C,B,G,"N","");v(me,B,G,"N","");v(C,B,G,"P","");v(me,B,G,"P","");v(C,B,G,"Q","");v(me,B,G,"Q","");v(C,B,G,"R","");v(me,B,G,"R","");v(C,B,G,"Z","");v(me,B,G,"Z","");v(C,M,ht,"h","");v(me,M,ht,"h","");var yt="";for(var Kn=0;Kn<Ax.length;Kn++){var Dr=Ax.charAt(Kn);yt=String.fromCharCode(55349,56320+Kn),v(C,M,ht,Dr,yt),v(me,M,G,Dr,yt),yt=String.fromCharCode(55349,56372+Kn),v(C,M,ht,Dr,yt),v(me,M,G,Dr,yt),yt=String.fromCharCode(55349,56424+Kn),v(C,M,ht,Dr,yt),v(me,M,G,Dr,yt),yt=String.fromCharCode(55349,56580+Kn),v(C,M,ht,Dr,yt),v(me,M,G,Dr,yt),yt=String.fromCharCode(55349,56684+Kn),v(C,M,ht,Dr,yt),v(me,M,G,Dr,yt),yt=String.fromCharCode(55349,56736+Kn),v(C,M,ht,Dr,yt),v(me,M,G,Dr,yt),yt=String.fromCharCode(55349,56788+Kn),v(C,M,ht,Dr,yt),v(me,M,G,Dr,yt),yt=String.fromCharCode(55349,56840+Kn),v(C,M,ht,Dr,yt),v(me,M,G,Dr,yt),yt=String.fromCharCode(55349,56944+Kn),v(C,M,ht,Dr,yt),v(me,M,G,Dr,yt),Kn<26&&(yt=String.fromCharCode(55349,56632+Kn),v(C,M,ht,Dr,yt),v(me,M,G,Dr,yt),yt=String.fromCharCode(55349,56476+Kn),v(C,M,ht,Dr,yt),v(me,M,G,Dr,yt))}yt="";v(C,M,ht,"k",yt);v(me,M,G,"k",yt);for(var qc=0;qc<10;qc++){var Cl=qc.toString();yt=String.fromCharCode(55349,57294+qc),v(C,M,ht,Cl,yt),v(me,M,G,Cl,yt),yt=String.fromCharCode(55349,57314+qc),v(C,M,ht,Cl,yt),v(me,M,G,Cl,yt),yt=String.fromCharCode(55349,57324+qc),v(C,M,ht,Cl,yt),v(me,M,G,Cl,yt),yt=String.fromCharCode(55349,57334+qc),v(C,M,ht,Cl,yt),v(me,M,G,Cl,yt)}var UC="";for(var ek=0;ek<UC.length;ek++){var Hy=UC.charAt(ek);v(C,M,ht,Hy,Hy),v(me,M,G,Hy,Hy)}var qy=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],MO=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Fve=function(e,r){var n=e.charCodeAt(0),i=e.charCodeAt(1),s=(n-55296)*1024+(i-56320)+65536,o=r==="math"?0:1;if(119808<=s&&s<120484){var a=Math.floor((s-119808)/26);return[qy[a][2],qy[a][o]]}else if(120782<=s&&s<=120831){var l=Math.floor((s-120782)/10);return[MO[l][2],MO[l][o]]}else{if(s===120485||s===120486)return[qy[0][2],qy[0][o]];if(120486<s&&s<120782)return["",""];throw new xe("Unsupported character: "+e)}},L4=function(e,r,n){return pr[n][e]&&pr[n][e].replace&&(e=pr[n][e].replace),{value:e,metrics:o9(e,r,n)}},Hs=function(e,r,n,i,s){var o=L4(e,r,n),a=o.metrics;e=o.value;var l;if(a){var c=a.italic;(n==="text"||i&&i.font==="mathit")&&(c=0),l=new As(e,a.height,a.depth,c,a.skew,a.width,s)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+n+"'")),l=new As(e,0,0,0,0,0,s);if(i){l.maxFontSize=i.sizeMultiplier,i.style.isTight()&&l.classes.push("mtight");var h=i.getColor();h&&(l.style.color=h)}return l},$ve=function(e,r,n,i){return i===void 0&&(i=[]),n.font==="boldsymbol"&&L4(e,"Main-Bold",r).metrics?Hs(e,"Main-Bold",r,n,i.concat(["mathbf"])):e==="\\"||pr[r][e].font==="main"?Hs(e,"Main-Regular",r,n,i):Hs(e,"AMS-Regular",r,n,i.concat(["amsrm"]))},zve=function(e,r,n,i,s){return s!=="textord"&&L4(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},Hve=function(e,r,n){var i=e.mode,s=e.text,o=["mord"],a=i==="math"||i==="text"&&r.font,l=a?r.font:r.fontFamily,c="",h="";if(s.charCodeAt(0)===55349&&([c,h]=Fve(s,i)),c.length>0)return Hs(s,c,i,r,o.concat(h));if(l){var u,f;if(l==="boldsymbol"){var d=zve(s,i,r,o,n);u=d.fontName,f=[d.fontClass]}else a?(u=bq[l].fontName,f=[l]):(u=Vy(l,r.fontWeight,r.fontShape),f=[l,r.fontWeight,r.fontShape]);if(L4(s,u,i).metrics)return Hs(s,u,i,r,o.concat(f));if(mq.hasOwnProperty(s)&&u.slice(0,10)==="Typewriter"){for(var p=[],m=0;m<s.length;m++)p.push(Hs(s[m],u,i,r,o.concat(f)));return yq(p)}}if(n==="mathord")return Hs(s,"Math-Italic",i,r,o.concat(["mathnormal"]));if(n==="textord"){var g=pr[i][s]&&pr[i][s].font;if(g==="ams"){var y=Vy("amsrm",r.fontWeight,r.fontShape);return Hs(s,y,i,r,o.concat("amsrm",r.fontWeight,r.fontShape))}else if(g==="main"||!g){var b=Vy("textrm",r.fontWeight,r.fontShape);return Hs(s,b,i,r,o.concat(r.fontWeight,r.fontShape))}else{var x=Vy(g,r.fontWeight,r.fontShape);return Hs(s,x,i,r,o.concat(x,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},qve=(t,e)=>{if(mc(t.classes)!==mc(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var i in e.style)if(e.style.hasOwnProperty(i)&&t.style[i]!==e.style[i])return!1;return!0},Vve=t=>{for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof As&&n instanceof As&&qve(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t},l9=function(e){for(var r=0,n=0,i=0,s=0;s<e.children.length;s++){var o=e.children[s];o.height>r&&(r=o.height),o.depth>n&&(n=o.depth),o.maxFontSize>i&&(i=o.maxFontSize)}e.height=r,e.depth=n,e.maxFontSize=i},wi=function(e,r,n,i){var s=new I1(e,r,n,i);return l9(s),s},gq=(t,e,r,n)=>new I1(t,e,r,n),Wve=function(e,r,n){var i=wi([e],[],r);return i.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),i.style.borderBottomWidth=_e(i.height),i.maxFontSize=1,i},jve=function(e,r,n,i){var s=new a9(e,r,n,i);return l9(s),s},yq=function(e){var r=new D1(e);return l9(r),r},Uve=function(e,r){return e instanceof D1?wi([],[e],r):e},Gve=function(e){if(e.positionType==="individualShift"){for(var r=e.children,n=[r[0]],i=-r[0].shift-r[0].elem.depth,s=i,o=1;o<r.length;o++){var a=-r[o].shift-s-r[o].elem.depth,l=a-(r[o-1].elem.height+r[o-1].elem.depth);s=s+a,n.push({type:"kern",size:l}),n.push(r[o])}return{children:n,depth:i}}var c;if(e.positionType==="top"){for(var h=e.positionData,u=0;u<e.children.length;u++){var f=e.children[u];h-=f.type==="kern"?f.size:f.elem.height+f.elem.depth}c=h}else if(e.positionType==="bottom")c=-e.positionData;else{var d=e.children[0];if(d.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")c=-d.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")c=-d.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:c}},Kve=function(e,r){for(var{children:n,depth:i}=Gve(e),s=0,o=0;o<n.length;o++){var a=n[o];if(a.type==="elem"){var l=a.elem;s=Math.max(s,l.maxFontSize,l.height)}}s+=2;var c=wi(["pstrut"],[]);c.style.height=_e(s);for(var h=[],u=i,f=i,d=i,p=0;p<n.length;p++){var m=n[p];if(m.type==="kern")d+=m.size;else{var g=m.elem,y=m.wrapperClasses||[],b=m.wrapperStyle||{},x=wi(y,[c,g],void 0,b);x.style.top=_e(-s-d-g.depth),m.marginLeft&&(x.style.marginLeft=m.marginLeft),m.marginRight&&(x.style.marginRight=m.marginRight),h.push(x),d+=g.height+g.depth}u=Math.min(u,d),f=Math.max(f,d)}var T=wi(["vlist"],h);T.style.height=_e(f);var S;if(u<0){var w=wi([],[]),_=wi(["vlist"],[w]);_.style.height=_e(-u);var I=wi(["vlist-s"],[new As("")]);S=[wi(["vlist-r"],[T,I]),wi(["vlist-r"],[_])]}else S=[wi(["vlist-r"],[T])];var N=wi(["vlist-t"],S);return S.length===2&&N.classes.push("vlist-t2"),N.height=f,N.depth=-u,N},Yve=(t,e)=>{var r=wi(["mspace"],[],e),n=Or(t,e);return r.style.marginRight=_e(n),r},Vy=function(e,r,n){var i="";switch(e){case"amsrm":i="AMS";break;case"textrm":i="Main";break;case"textsf":i="SansSerif";break;case"texttt":i="Typewriter";break;default:i=e}var s;return r==="textbf"&&n==="textit"?s="BoldItalic":r==="textbf"?s="Bold":r==="textit"?s="Italic":s="Regular",i+"-"+s},bq={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},xq={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Xve=function(e,r){var[n,i,s]=xq[e],o=new gc(n),a=new sl([o],{width:_e(i),height:_e(s),style:"width:"+_e(i),viewBox:"0 0 "+1e3*i+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),l=gq(["overlay"],[a],r);return l.height=s,l.style.height=_e(s),l.style.width=_e(i),l},Z={fontMap:bq,makeSymbol:Hs,mathsym:$ve,makeSpan:wi,makeSvgSpan:gq,makeLineSpan:Wve,makeAnchor:jve,makeFragment:yq,wrapFragment:Uve,makeVList:Kve,makeOrd:Hve,makeGlue:Yve,staticSvg:Xve,svgData:xq,tryCombineChars:Vve},Er={number:3,unit:"mu"},Vc={number:4,unit:"mu"},ma={number:5,unit:"mu"},Jve={mord:{mop:Er,mbin:Vc,mrel:ma,minner:Er},mop:{mord:Er,mop:Er,mrel:ma,minner:Er},mbin:{mord:Vc,mop:Vc,mopen:Vc,minner:Vc},mrel:{mord:ma,mop:ma,mopen:ma,minner:ma},mopen:{},mclose:{mop:Er,mbin:Vc,mrel:ma,minner:Er},mpunct:{mord:Er,mop:Er,mrel:ma,mopen:Er,mclose:Er,mpunct:Er,minner:Er},minner:{mord:Er,mop:Er,mbin:Vc,mrel:ma,mopen:Er,mpunct:Er,minner:Er}},Zve={mord:{mop:Er},mop:{mord:Er,mop:Er},mbin:{},mrel:{},mopen:{},mclose:{mop:Er},mpunct:{},minner:{mop:Er}},vq={},Ex={},Lx={};function Re(t){for(var{type:e,names:r,props:n,handler:i,htmlBuilder:s,mathmlBuilder:o}=t,a={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:i},l=0;l<r.length;++l)vq[r[l]]=a;e&&(s&&(Ex[e]=s),o&&(Lx[e]=o))}function _u(t){var{type:e,htmlBuilder:r,mathmlBuilder:n}=t;Re({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var Ox=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},Fr=function(e){return e.type==="ordgroup"?e.body:[e]},ol=Z.makeSpan,Qve=["leftmost","mbin","mopen","mrel","mop","mpunct"],e4e=["rightmost","mrel","mclose","mpunct"],t4e={display:ut.DISPLAY,text:ut.TEXT,script:ut.SCRIPT,scriptscript:ut.SCRIPTSCRIPT},r4e={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},en=function(e,r,n,i){i===void 0&&(i=[null,null]);for(var s=[],o=0;o<e.length;o++){var a=zt(e[o],r);if(a instanceof D1){var l=a.children;s.push(...l)}else s.push(a)}if(Z.tryCombineChars(s),!n)return s;var c=r;if(e.length===1){var h=e[0];h.type==="sizing"?c=r.havingSize(h.size):h.type==="styling"&&(c=r.havingStyle(t4e[h.style]))}var u=ol([i[0]||"leftmost"],[],r),f=ol([i[1]||"rightmost"],[],r),d=n==="root";return AO(s,(p,m)=>{var g=m.classes[0],y=p.classes[0];g==="mbin"&&e4e.includes(y)?m.classes[0]="mord":y==="mbin"&&Qve.includes(g)&&(p.classes[0]="mord")},{node:u},f,d),AO(s,(p,m)=>{var g=GC(m),y=GC(p),b=g&&y?p.hasClass("mtight")?Zve[g][y]:Jve[g][y]:null;if(b)return Z.makeGlue(b,c)},{node:u},f,d),s},AO=function t(e,r,n,i,s){i&&e.push(i);for(var o=0;o<e.length;o++){var a=e[o],l=wq(a);if(l){t(l.children,r,n,null,s);continue}var c=!a.hasClass("mspace");if(c){var h=r(a,n.node);h&&(n.insertAfter?n.insertAfter(h):(e.unshift(h),o++))}c?n.node=a:s&&a.hasClass("newline")&&(n.node=ol(["leftmost"])),n.insertAfter=(u=>f=>{e.splice(u+1,0,f),o++})(o)}i&&e.pop()},wq=function(e){return e instanceof D1||e instanceof a9||e instanceof I1&&e.hasClass("enclosing")?e:null},n4e=function t(e,r){var n=wq(e);if(n){var i=n.children;if(i.length){if(r==="right")return t(i[i.length-1],"right");if(r==="left")return t(i[0],"left")}}return e},GC=function(e,r){return e?(r&&(e=n4e(e,r)),r4e[e.classes[0]]||null):null},pg=function(e,r){var n=["nulldelimiter"].concat(e.baseSizingClasses());return ol(r.concat(n))},zt=function(e,r,n){if(!e)return ol();if(Ex[e.type]){var i=Ex[e.type](e,r);if(n&&r.size!==n.size){i=ol(r.sizingClasses(n),[i],r);var s=r.sizeMultiplier/n.sizeMultiplier;i.height*=s,i.depth*=s}return i}else throw new xe("Got group of unknown type: '"+e.type+"'")};function Wy(t,e){var r=ol(["base"],t,e),n=ol(["strut"]);return n.style.height=_e(r.height+r.depth),r.depth&&(n.style.verticalAlign=_e(-r.depth)),r.children.unshift(n),r}function KC(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var n=en(t,e,"root"),i;n.length===2&&n[1].hasClass("tag")&&(i=n.pop());for(var s=[],o=[],a=0;a<n.length;a++)if(o.push(n[a]),n[a].hasClass("mbin")||n[a].hasClass("mrel")||n[a].hasClass("allowbreak")){for(var l=!1;a<n.length-1&&n[a+1].hasClass("mspace")&&!n[a+1].hasClass("newline");)a++,o.push(n[a]),n[a].hasClass("nobreak")&&(l=!0);l||(s.push(Wy(o,e)),o=[])}else n[a].hasClass("newline")&&(o.pop(),o.length>0&&(s.push(Wy(o,e)),o=[]),s.push(n[a]));o.length>0&&s.push(Wy(o,e));var c;r?(c=Wy(en(r,e,!0)),c.classes=["tag"],s.push(c)):i&&s.push(i);var h=ol(["katex-html"],s);if(h.setAttribute("aria-hidden","true"),c){var u=c.children[0];u.style.height=_e(h.height+h.depth),h.depth&&(u.style.verticalAlign=_e(-h.depth))}return h}function kq(t){return new D1(t)}class Xi{constructor(e,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=mc(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof Vo&&this.children[n+1]instanceof Vo){for(var i=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof Vo;)i+=this.children[++n].toText();e.appendChild(new Vo(i).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=Vt.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+Vt.escape(mc(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class Vo{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Vt.escape(this.toText())}toText(){return this.text}}class i4e{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",_e(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+_e(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var ge={MathNode:Xi,TextNode:Vo,SpaceNode:i4e,newDocumentFragment:kq},Es=function(e,r,n){return pr[r][e]&&pr[r][e].replace&&e.charCodeAt(0)!==55349&&!(mq.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=pr[r][e].replace),new ge.TextNode(e)},c9=function(e){return e.length===1?e[0]:new ge.MathNode("mrow",e)},h9=function(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var i=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var s=e.text;if(["\\imath","\\jmath"].includes(s))return null;pr[i][s]&&pr[i][s].replace&&(s=pr[i][s].replace);var o=Z.fontMap[n].fontName;return o9(s,o,i)?Z.fontMap[n].variant:null};function tk(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof Vo&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var r=t.children[0];return r instanceof Vo&&r.text===","}else return!1}var Ni=function(e,r,n){if(e.length===1){var i=cr(e[0],r);return n&&i instanceof Xi&&i.type==="mo"&&(i.setAttribute("lspace","0em"),i.setAttribute("rspace","0em")),[i]}for(var s=[],o,a=0;a<e.length;a++){var l=cr(e[a],r);if(l instanceof Xi&&o instanceof Xi){if(l.type==="mtext"&&o.type==="mtext"&&l.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...l.children);continue}else if(l.type==="mn"&&o.type==="mn"){o.children.push(...l.children);continue}else if(tk(l)&&o.type==="mn"){o.children.push(...l.children);continue}else if(l.type==="mn"&&tk(o))l.children=[...o.children,...l.children],s.pop();else if((l.type==="msup"||l.type==="msub")&&l.children.length>=1&&(o.type==="mn"||tk(o))){var c=l.children[0];c instanceof Xi&&c.type==="mn"&&(c.children=[...o.children,...c.children],s.pop())}else if(o.type==="mi"&&o.children.length===1){var h=o.children[0];if(h instanceof Vo&&h.text===""&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var u=l.children[0];u instanceof Vo&&u.text.length>0&&(u.text=u.text.slice(0,1)+""+u.text.slice(1),s.pop())}}}s.push(l),o=l}return s},yc=function(e,r,n){return c9(Ni(e,r,n))},cr=function(e,r){if(!e)return new ge.MathNode("mrow");if(Lx[e.type]){var n=Lx[e.type](e,r);return n}else throw new xe("Got group of unknown type: '"+e.type+"'")};function EO(t,e,r,n,i){var s=Ni(t,r),o;s.length===1&&s[0]instanceof Xi&&["mrow","mtable"].includes(s[0].type)?o=s[0]:o=new ge.MathNode("mrow",s);var a=new ge.MathNode("annotation",[new ge.TextNode(e)]);a.setAttribute("encoding","application/x-tex");var l=new ge.MathNode("semantics",[o,a]),c=new ge.MathNode("math",[l]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&c.setAttribute("display","block");var h=i?"katex":"katex-mathml";return Z.makeSpan([h],[c])}var Cq=function(e){return new Ea({style:e.displayMode?ut.DISPLAY:ut.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},Sq=function(e,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),e=Z.makeSpan(n,[e])}return e},s4e=function(e,r,n){var i=Cq(n),s;if(n.output==="mathml")return EO(e,r,i,n.displayMode,!0);if(n.output==="html"){var o=KC(e,i);s=Z.makeSpan(["katex"],[o])}else{var a=EO(e,r,i,n.displayMode,!1),l=KC(e,i);s=Z.makeSpan(["katex"],[a,l])}return Sq(s,n)},o4e=function(e,r,n){var i=Cq(n),s=KC(e,i),o=Z.makeSpan(["katex"],[s]);return Sq(o,n)},a4e={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},l4e=function(e){var r=new ge.MathNode("mo",[new ge.TextNode(a4e[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},c4e={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},h4e=function(e){return e.type==="ordgroup"?e.body.length:1},u4e=function(e,r){function n(){var a=4e5,l=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(l)){var c=e,h=h4e(c.base),u,f,d;if(h>5)l==="widehat"||l==="widecheck"?(u=420,a=2364,d=.42,f=l+"4"):(u=312,a=2340,d=.34,f="tilde4");else{var p=[1,1,2,2,3,3][h];l==="widehat"||l==="widecheck"?(a=[0,1062,2364,2364,2364][p],u=[0,239,300,360,420][p],d=[0,.24,.3,.3,.36,.42][p],f=l+p):(a=[0,600,1033,2339,2340][p],u=[0,260,286,306,312][p],d=[0,.26,.286,.3,.306,.34][p],f="tilde"+p)}var m=new gc(f),g=new sl([m],{width:"100%",height:_e(d),viewBox:"0 0 "+a+" "+u,preserveAspectRatio:"none"});return{span:Z.makeSvgSpan([],[g],r),minWidth:0,height:d}}else{var y=[],b=c4e[l],[x,T,S]=b,w=S/1e3,_=x.length,I,N;if(_===1){var L=b[3];I=["hide-tail"],N=[L]}else if(_===2)I=["halfarrow-left","halfarrow-right"],N=["xMinYMin","xMaxYMin"];else if(_===3)I=["brace-left","brace-center","brace-right"],N=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+_+" children.");for(var D=0;D<_;D++){var P=new gc(x[D]),K=new sl([P],{width:"400em",height:_e(w),viewBox:"0 0 "+a+" "+S,preserveAspectRatio:N[D]+" slice"}),z=Z.makeSvgSpan([I[D]],[K],r);if(_===1)return{span:z,minWidth:T,height:w};z.style.height=_e(w),y.push(z)}return{span:Z.makeSpan(["stretchy"],y,r),minWidth:T,height:w}}}var{span:i,minWidth:s,height:o}=n();return i.height=o,i.style.height=_e(o),s>0&&(i.style.minWidth=_e(s)),i},f4e=function(e,r,n,i,s){var o,a=e.height+e.depth+n+i;if(/fbox|color|angl/.test(r)){if(o=Z.makeSpan(["stretchy",r],[],s),r==="fbox"){var l=s.color&&s.getColor();l&&(o.style.borderColor=l)}}else{var c=[];/^[bx]cancel$/.test(r)&&c.push(new jC({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&c.push(new jC({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var h=new sl(c,{width:"100%",height:_e(a)});o=Z.makeSvgSpan([],[h],s)}return o.height=a,o.style.height=_e(a),o},al={encloseSpan:f4e,mathMLnode:l4e,svgSpan:u4e};function Tt(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function u9(t){var e=O4(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function O4(t){return t&&(t.type==="atom"||Nve.hasOwnProperty(t.type))?t:null}var f9=(t,e)=>{var r,n,i;t&&t.type==="supsub"?(n=Tt(t.base,"accent"),r=n.base,t.base=r,i=Rve(zt(t,e)),t.base=n):(n=Tt(t,"accent"),r=n.base);var s=zt(r,e.havingCrampedStyle()),o=n.isShifty&&Vt.isCharacterBox(r),a=0;if(o){var l=Vt.getBaseElem(r),c=zt(l,e.havingCrampedStyle());a=kO(c).skew}var h=n.label==="\\c",u=h?s.height+s.depth:Math.min(s.height,e.fontMetrics().xHeight),f;if(n.isStretchy)f=al.svgSpan(n,e),f=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:f,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+_e(2*a)+")",marginLeft:_e(2*a)}:void 0}]},e);else{var d,p;n.label==="\\vec"?(d=Z.staticSvg("vec",e),p=Z.svgData.vec[1]):(d=Z.makeOrd({mode:n.mode,text:n.label},e,"textord"),d=kO(d),d.italic=0,p=d.width,h&&(u+=d.depth)),f=Z.makeSpan(["accent-body"],[d]);var m=n.label==="\\textcircled";m&&(f.classes.push("accent-full"),u=s.height);var g=a;m||(g-=p/2),f.style.left=_e(g),n.label==="\\textcircled"&&(f.style.top=".2em"),f=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-u},{type:"elem",elem:f}]},e)}var y=Z.makeSpan(["mord","accent"],[f],e);return i?(i.children[0]=y,i.height=Math.max(y.height,i.height),i.classes[0]="mord",i):y},Tq=(t,e)=>{var r=t.isStretchy?al.mathMLnode(t.label):new ge.MathNode("mo",[Es(t.label,t.mode)]),n=new ge.MathNode("mover",[cr(t.base,e),r]);return n.setAttribute("accent","true"),n},d4e=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));Re({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var r=Ox(e[0]),n=!d4e.test(t.funcName),i=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:i,base:r}},htmlBuilder:f9,mathmlBuilder:Tq});Re({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var r=e[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:f9,mathmlBuilder:Tq});Re({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:i}},htmlBuilder:(t,e)=>{var r=zt(t.base,e),n=al.svgSpan(t,e),i=t.label==="\\utilde"?.12:0,s=Z.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:r}]},e);return Z.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:(t,e)=>{var r=al.mathMLnode(t.label),n=new ge.MathNode("munder",[cr(t.base,e),r]);return n.setAttribute("accentunder","true"),n}});var jy=t=>{var e=new ge.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};Re({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n,funcName:i}=t;return{type:"xArrow",mode:n.mode,label:i,body:e[0],below:r[0]}},htmlBuilder(t,e){var r=e.style,n=e.havingStyle(r.sup()),i=Z.wrapFragment(zt(t.body,n,e),e),s=t.label.slice(0,2)==="\\x"?"x":"cd";i.classes.push(s+"-arrow-pad");var o;t.below&&(n=e.havingStyle(r.sub()),o=Z.wrapFragment(zt(t.below,n,e),e),o.classes.push(s+"-arrow-pad"));var a=al.svgSpan(t,e),l=-e.fontMetrics().axisHeight+.5*a.height,c=-e.fontMetrics().axisHeight-.5*a.height-.111;(i.depth>.25||t.label==="\\xleftequilibrium")&&(c-=i.depth);var h;if(o){var u=-e.fontMetrics().axisHeight+o.height+.5*a.height+.111;h=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:c},{type:"elem",elem:a,shift:l},{type:"elem",elem:o,shift:u}]},e)}else h=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:c},{type:"elem",elem:a,shift:l}]},e);return h.children[0].children[0].children[1].classes.push("svg-align"),Z.makeSpan(["mrel","x-arrow"],[h],e)},mathmlBuilder(t,e){var r=al.mathMLnode(t.label);r.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(t.body){var i=jy(cr(t.body,e));if(t.below){var s=jy(cr(t.below,e));n=new ge.MathNode("munderover",[r,s,i])}else n=new ge.MathNode("mover",[r,i])}else if(t.below){var o=jy(cr(t.below,e));n=new ge.MathNode("munder",[r,o])}else n=jy(),n=new ge.MathNode("mover",[r,n]);return n}});var p4e=Z.makeSpan;function _q(t,e){var r=en(t.body,e,!0);return p4e([t.mclass],r,e)}function Mq(t,e){var r,n=Ni(t.body,e);return t.mclass==="minner"?r=new ge.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(r=n[0],r.type="mi"):r=new ge.MathNode("mi",n):(t.isCharacterBox?(r=n[0],r.type="mo"):r=new ge.MathNode("mo",n),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}Re({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:Fr(i),isCharacterBox:Vt.isCharacterBox(i)}},htmlBuilder:_q,mathmlBuilder:Mq});var D4=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};Re({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:D4(e[0]),body:Fr(e[1]),isCharacterBox:Vt.isCharacterBox(e[1])}}});Re({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:r,funcName:n}=t,i=e[1],s=e[0],o;n!=="\\stackrel"?o=D4(i):o="mrel";var a={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:Fr(i)},l={type:"supsub",mode:s.mode,base:a,sup:n==="\\underset"?null:s,sub:n==="\\underset"?s:null};return{type:"mclass",mode:r.mode,mclass:o,body:[l],isCharacterBox:Vt.isCharacterBox(l)}},htmlBuilder:_q,mathmlBuilder:Mq});Re({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:D4(e[0]),body:Fr(e[0])}},htmlBuilder(t,e){var r=en(t.body,e,!0),n=Z.makeSpan([t.mclass],r,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var r=Ni(t.body,e),n=new ge.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var m4e={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},LO=()=>({type:"styling",body:[],mode:"math",style:"display"}),OO=t=>t.type==="textord"&&t.text==="@",g4e=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function y4e(t,e,r){var n=m4e[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var i=r.callFunction("\\\\cdleft",[e[0]],[]),s={type:"atom",text:n,mode:"math",family:"rel"},o=r.callFunction("\\Big",[s],[]),a=r.callFunction("\\\\cdright",[e[1]],[]),l={type:"ordgroup",mode:"math",body:[i,o,a]};return r.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var c={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[c],[])}default:return{type:"textord",text:" ",mode:"math"}}}function b4e(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r==="&"||r==="\\\\")t.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new xe("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var n=[],i=[n],s=0;s<e.length;s++){for(var o=e[s],a=LO(),l=0;l<o.length;l++)if(!OO(o[l]))a.body.push(o[l]);else{n.push(a),l+=1;var c=u9(o[l]).text,h=new Array(2);if(h[0]={type:"ordgroup",mode:"math",body:[]},h[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(c)>-1))if("<>AV".indexOf(c)>-1)for(var u=0;u<2;u++){for(var f=!0,d=l+1;d<o.length;d++){if(g4e(o[d],c)){f=!1,l=d;break}if(OO(o[d]))throw new xe("Missing a "+c+" character to complete a CD arrow.",o[d]);h[u].body.push(o[d])}if(f)throw new xe("Missing a "+c+" character to complete a CD arrow.",o[l])}else throw new xe('Expected one of "<>AV=|." after @',o[l]);var p=y4e(c,h,t),m={type:"styling",body:[p],mode:"math",style:"display"};n.push(m),a=LO()}s%2===0?n.push(a):n.shift(),n=[],i.push(n)}t.gullet.endGroup(),t.gullet.endGroup();var g=new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:g,colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}Re({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),n=Z.wrapFragment(zt(t.label,r,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=_e(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var r=new ge.MathNode("mrow",[cr(t.label,e)]);return r=new ge.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new ge.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});Re({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=Z.wrapFragment(zt(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(t,e){return new ge.MathNode("mrow",[cr(t.fragment,e)])}});Re({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,n=Tt(e[0],"ordgroup"),i=n.body,s="",o=0;o<i.length;o++){var a=Tt(i[o],"textord");s+=a.text}var l=parseInt(s),c;if(isNaN(l))throw new xe("\\@char has non-numeric argument "+s);if(l<0||l>=1114111)throw new xe("\\@char with invalid code point "+s);return l<=65535?c=String.fromCharCode(l):(l-=65536,c=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:r.mode,text:c}}});var Aq=(t,e)=>{var r=en(t.body,e.withColor(t.color),!1);return Z.makeFragment(r)},Eq=(t,e)=>{var r=Ni(t.body,e.withColor(t.color)),n=new ge.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n};Re({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,n=Tt(e[0],"color-token").color,i=e[1];return{type:"color",mode:r.mode,color:n,body:Fr(i)}},htmlBuilder:Aq,mathmlBuilder:Eq});Re({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:n}=t,i=Tt(e[0],"color-token").color;r.gullet.macros.set("\\current@color",i);var s=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:i,body:s}},htmlBuilder:Aq,mathmlBuilder:Eq});Re({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:n}=t,i=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,s=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:s,size:i&&Tt(i,"size").value}},htmlBuilder(t,e){var r=Z.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=_e(Or(t.size,e)))),r},mathmlBuilder(t,e){var r=new ge.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",_e(Or(t.size,e)))),r}});var YC={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},Lq=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new xe("Expected a control sequence",t);return e},x4e=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},Oq=(t,e,r,n)=>{var i=t.gullet.macros.get(r.text);i==null&&(r.noexpand=!0,i={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,i,n)};Re({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var n=e.fetch();if(YC[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=YC[n.text]),Tt(e.parseFunction(),"internal");throw new xe("Invalid token after macro prefix",n)}});Re({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=e.gullet.popToken(),i=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new xe("Expected a control sequence",n);for(var s=0,o,a=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),a[s].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new xe('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==s+1)throw new xe('Argument number "'+n.text+'" out of order');s++,a.push([])}else{if(n.text==="EOF")throw new xe("Expected a macro definition");a[s].push(n.text)}var{tokens:l}=e.gullet.consumeArg();return o&&l.unshift(o),(r==="\\edef"||r==="\\xdef")&&(l=e.gullet.expandTokens(l),l.reverse()),e.gullet.macros.set(i,{tokens:l,numArgs:s,delimiters:a},r===YC[r]),{type:"internal",mode:e.mode}}});Re({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=Lq(e.gullet.popToken());e.gullet.consumeSpaces();var i=x4e(e);return Oq(e,n,i,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});Re({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=Lq(e.gullet.popToken()),i=e.gullet.popToken(),s=e.gullet.popToken();return Oq(e,n,s,r==="\\\\globalfuture"),e.gullet.pushToken(s),e.gullet.pushToken(i),{type:"internal",mode:e.mode}}});var up=function(e,r,n){var i=pr.math[e]&&pr.math[e].replace,s=o9(i||e,r,n);if(!s)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return s},d9=function(e,r,n,i){var s=n.havingBaseStyle(r),o=Z.makeSpan(i.concat(s.sizingClasses(n)),[e],n),a=s.sizeMultiplier/n.sizeMultiplier;return o.height*=a,o.depth*=a,o.maxFontSize=s.sizeMultiplier,o},Dq=function(e,r,n){var i=r.havingBaseStyle(n),s=(1-r.sizeMultiplier/i.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=_e(s),e.height-=s,e.depth+=s},v4e=function(e,r,n,i,s,o){var a=Z.makeSymbol(e,"Main-Regular",s,i),l=d9(a,r,i,o);return n&&Dq(l,i,r),l},w4e=function(e,r,n,i){return Z.makeSymbol(e,"Size"+r+"-Regular",n,i)},Iq=function(e,r,n,i,s,o){var a=w4e(e,r,s,i),l=d9(Z.makeSpan(["delimsizing","size"+r],[a],i),ut.TEXT,i,o);return n&&Dq(l,i,ut.TEXT),l},rk=function(e,r,n){var i;r==="Size1-Regular"?i="delim-size1":i="delim-size4";var s=Z.makeSpan(["delimsizinginner",i],[Z.makeSpan([],[Z.makeSymbol(e,r,n)])]);return{type:"elem",elem:s}},nk=function(e,r,n){var i=qo["Size4-Regular"][e.charCodeAt(0)]?qo["Size4-Regular"][e.charCodeAt(0)][4]:qo["Size1-Regular"][e.charCodeAt(0)][4],s=new gc("inner",Mve(e,Math.round(1e3*r))),o=new sl([s],{width:_e(i),height:_e(r),style:"width:"+_e(i),viewBox:"0 0 "+1e3*i+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),a=Z.makeSvgSpan([],[o],n);return a.height=r,a.style.height=_e(r),a.style.width=_e(i),{type:"elem",elem:a}},XC=.008,Uy={type:"kern",size:-1*XC},k4e=["|","\\lvert","\\rvert","\\vert"],C4e=["\\|","\\lVert","\\rVert","\\Vert"],Bq=function(e,r,n,i,s,o){var a,l,c,h,u="",f=0;a=c=h=e,l=null;var d="Size1-Regular";e==="\\uparrow"?c=h="":e==="\\Uparrow"?c=h="":e==="\\downarrow"?a=c="":e==="\\Downarrow"?a=c="":e==="\\updownarrow"?(a="\\uparrow",c="",h="\\downarrow"):e==="\\Updownarrow"?(a="\\Uparrow",c="",h="\\Downarrow"):k4e.includes(e)?(c="",u="vert",f=333):C4e.includes(e)?(c="",u="doublevert",f=556):e==="["||e==="\\lbrack"?(a="",c="",h="",d="Size4-Regular",u="lbrack",f=667):e==="]"||e==="\\rbrack"?(a="",c="",h="",d="Size4-Regular",u="rbrack",f=667):e==="\\lfloor"||e===""?(c=a="",h="",d="Size4-Regular",u="lfloor",f=667):e==="\\lceil"||e===""?(a="",c=h="",d="Size4-Regular",u="lceil",f=667):e==="\\rfloor"||e===""?(c=a="",h="",d="Size4-Regular",u="rfloor",f=667):e==="\\rceil"||e===""?(a="",c=h="",d="Size4-Regular",u="rceil",f=667):e==="("||e==="\\lparen"?(a="",c="",h="",d="Size4-Regular",u="lparen",f=875):e===")"||e==="\\rparen"?(a="",c="",h="",d="Size4-Regular",u="rparen",f=875):e==="\\{"||e==="\\lbrace"?(a="",l="",h="",c="",d="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(a="",l="",h="",c="",d="Size4-Regular"):e==="\\lgroup"||e===""?(a="",h="",c="",d="Size4-Regular"):e==="\\rgroup"||e===""?(a="",h="",c="",d="Size4-Regular"):e==="\\lmoustache"||e===""?(a="",h="",c="",d="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(a="",h="",c="",d="Size4-Regular");var p=up(a,d,s),m=p.height+p.depth,g=up(c,d,s),y=g.height+g.depth,b=up(h,d,s),x=b.height+b.depth,T=0,S=1;if(l!==null){var w=up(l,d,s);T=w.height+w.depth,S=2}var _=m+x+T,I=Math.max(0,Math.ceil((r-_)/(S*y))),N=_+I*S*y,L=i.fontMetrics().axisHeight;n&&(L*=i.sizeMultiplier);var D=N/2-L,P=[];if(u.length>0){var K=N-m-x,z=Math.round(N*1e3),$=Ave(u,Math.round(K*1e3)),H=new gc(u,$),U=(f/1e3).toFixed(3)+"em",q=(z/1e3).toFixed(3)+"em",re=new sl([H],{width:U,height:q,viewBox:"0 0 "+f+" "+z}),E=Z.makeSvgSpan([],[re],i);E.height=z/1e3,E.style.width=U,E.style.height=q,P.push({type:"elem",elem:E})}else{if(P.push(rk(h,d,s)),P.push(Uy),l===null){var de=N-m-x+2*XC;P.push(nk(c,de,i))}else{var Te=(N-m-x-T)/2+2*XC;P.push(nk(c,Te,i)),P.push(Uy),P.push(rk(l,d,s)),P.push(Uy),P.push(nk(c,Te,i))}P.push(Uy),P.push(rk(a,d,s))}var O=i.havingBaseStyle(ut.TEXT),et=Z.makeVList({positionType:"bottom",positionData:D,children:P},O);return d9(Z.makeSpan(["delimsizing","mult"],[et],O),ut.TEXT,i,o)},ik=80,sk=.08,ok=function(e,r,n,i,s){var o=_ve(e,i,n),a=new gc(e,o),l=new sl([a],{width:"400em",height:_e(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return Z.makeSvgSpan(["hide-tail"],[l],s)},S4e=function(e,r){var n=r.havingBaseSizing(),i=Fq("\\surd",e*n.sizeMultiplier,Nq,n),s=n.sizeMultiplier,o=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),a,l=0,c=0,h=0,u;return i.type==="small"?(h=1e3+1e3*o+ik,e<1?s=1:e<1.4&&(s=.7),l=(1+o+sk)/s,c=(1+o)/s,a=ok("sqrtMain",l,h,o,r),a.style.minWidth="0.853em",u=.833/s):i.type==="large"?(h=(1e3+ik)*ym[i.size],c=(ym[i.size]+o)/s,l=(ym[i.size]+o+sk)/s,a=ok("sqrtSize"+i.size,l,h,o,r),a.style.minWidth="1.02em",u=1/s):(l=e+o+sk,c=e+o,h=Math.floor(1e3*e+o)+ik,a=ok("sqrtTall",l,h,o,r),a.style.minWidth="0.742em",u=1.056),a.height=c,a.style.height=_e(l),{span:a,advanceWidth:u,ruleWidth:(r.fontMetrics().sqrtRuleThickness+o)*s}},Rq=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],T4e=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],Pq=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],ym=[0,1.2,1.8,2.4,3],_4e=function(e,r,n,i,s){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),Rq.includes(e)||Pq.includes(e))return Iq(e,r,!1,n,i,s);if(T4e.includes(e))return Bq(e,ym[r],!1,n,i,s);throw new xe("Illegal delimiter: '"+e+"'")},M4e=[{type:"small",style:ut.SCRIPTSCRIPT},{type:"small",style:ut.SCRIPT},{type:"small",style:ut.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],A4e=[{type:"small",style:ut.SCRIPTSCRIPT},{type:"small",style:ut.SCRIPT},{type:"small",style:ut.TEXT},{type:"stack"}],Nq=[{type:"small",style:ut.SCRIPTSCRIPT},{type:"small",style:ut.SCRIPT},{type:"small",style:ut.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],E4e=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},Fq=function(e,r,n,i){for(var s=Math.min(2,3-i.style.size),o=s;o<n.length&&n[o].type!=="stack";o++){var a=up(e,E4e(n[o]),"math"),l=a.height+a.depth;if(n[o].type==="small"){var c=i.havingBaseStyle(n[o].style);l*=c.sizeMultiplier}if(l>r)return n[o]}return n[n.length-1]},$q=function(e,r,n,i,s,o){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var a;Pq.includes(e)?a=M4e:Rq.includes(e)?a=Nq:a=A4e;var l=Fq(e,r,a,i);return l.type==="small"?v4e(e,l.style,n,i,s,o):l.type==="large"?Iq(e,l.size,n,i,s,o):Bq(e,r,n,i,s,o)},L4e=function(e,r,n,i,s,o){var a=i.fontMetrics().axisHeight*i.sizeMultiplier,l=901,c=5/i.fontMetrics().ptPerEm,h=Math.max(r-a,n+a),u=Math.max(h/500*l,2*h-c);return $q(e,u,!0,i,s,o)},Ya={sqrtImage:S4e,sizedDelim:_4e,sizeToMaxHeight:ym,customSizedDelim:$q,leftRightDelim:L4e},DO={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},O4e=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function I4(t,e){var r=O4(t);if(r&&O4e.includes(r.text))return r;throw r?new xe("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",t):new xe("Invalid delimiter type '"+t.type+"'",t)}Re({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var r=I4(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:DO[t.funcName].size,mclass:DO[t.funcName].mclass,delim:r.text}},htmlBuilder:(t,e)=>t.delim==="."?Z.makeSpan([t.mclass]):Ya.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(Es(t.delim,t.mode));var r=new ge.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=_e(Ya.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function IO(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Re({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new xe("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:I4(e[0],t).text,color:r}}});Re({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=I4(e[0],t),n=t.parser;++n.leftrightDepth;var i=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var s=Tt(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:i,left:r.text,right:s.delim,rightColor:s.color}},htmlBuilder:(t,e)=>{IO(t);for(var r=en(t.body,e,!0,["mopen","mclose"]),n=0,i=0,s=!1,o=0;o<r.length;o++)r[o].isMiddle?s=!0:(n=Math.max(r[o].height,n),i=Math.max(r[o].depth,i));n*=e.sizeMultiplier,i*=e.sizeMultiplier;var a;if(t.left==="."?a=pg(e,["mopen"]):a=Ya.leftRightDelim(t.left,n,i,e,t.mode,["mopen"]),r.unshift(a),s)for(var l=1;l<r.length;l++){var c=r[l],h=c.isMiddle;h&&(r[l]=Ya.leftRightDelim(h.delim,n,i,h.options,t.mode,[]))}var u;if(t.right===".")u=pg(e,["mclose"]);else{var f=t.rightColor?e.withColor(t.rightColor):e;u=Ya.leftRightDelim(t.right,n,i,f,t.mode,["mclose"])}return r.push(u),Z.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{IO(t);var r=Ni(t.body,e);if(t.left!=="."){var n=new ge.MathNode("mo",[Es(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(t.right!=="."){var i=new ge.MathNode("mo",[Es(t.right,t.mode)]);i.setAttribute("fence","true"),t.rightColor&&i.setAttribute("mathcolor",t.rightColor),r.push(i)}return c9(r)}});Re({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=I4(e[0],t);if(!t.parser.leftrightDepth)throw new xe("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:(t,e)=>{var r;if(t.delim===".")r=pg(e,[]);else{r=Ya.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r},mathmlBuilder:(t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?Es("|","text"):Es(t.delim,t.mode),n=new ge.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var p9=(t,e)=>{var r=Z.wrapFragment(zt(t.body,e),e),n=t.label.slice(1),i=e.sizeMultiplier,s,o=0,a=Vt.isCharacterBox(t.body);if(n==="sout")s=Z.makeSpan(["stretchy","sout"]),s.height=e.fontMetrics().defaultRuleThickness/i,o=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var l=Or({number:.6,unit:"pt"},e),c=Or({number:.35,unit:"ex"},e),h=e.havingBaseSizing();i=i/h.sizeMultiplier;var u=r.height+r.depth+l+c;r.style.paddingLeft=_e(u/2+l);var f=Math.floor(1e3*u*i),d=Sve(f),p=new sl([new gc("phase",d)],{width:"400em",height:_e(f/1e3),viewBox:"0 0 400000 "+f,preserveAspectRatio:"xMinYMin slice"});s=Z.makeSvgSpan(["hide-tail"],[p],e),s.style.height=_e(u),o=r.depth+l+c}else{/cancel/.test(n)?a||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var m=0,g=0,y=0;/box/.test(n)?(y=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),m=e.fontMetrics().fboxsep+(n==="colorbox"?0:y),g=m):n==="angl"?(y=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),m=4*y,g=Math.max(0,.25-r.depth)):(m=a?.2:0,g=m),s=al.encloseSpan(r,n,m,g,e),/fbox|boxed|fcolorbox/.test(n)?(s.style.borderStyle="solid",s.style.borderWidth=_e(y)):n==="angl"&&y!==.049&&(s.style.borderTopWidth=_e(y),s.style.borderRightWidth=_e(y)),o=r.depth+g,t.backgroundColor&&(s.style.backgroundColor=t.backgroundColor,t.borderColor&&(s.style.borderColor=t.borderColor))}var b;if(t.backgroundColor)b=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:o},{type:"elem",elem:r,shift:0}]},e);else{var x=/cancel|phase/.test(n)?["svg-align"]:[];b=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:s,shift:o,wrapperClasses:x}]},e)}return/cancel/.test(n)&&(b.height=r.height,b.depth=r.depth),/cancel/.test(n)&&!a?Z.makeSpan(["mord","cancel-lap"],[b],e):Z.makeSpan(["mord"],[b],e)},m9=(t,e)=>{var r=0,n=new ge.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[cr(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var i=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+i+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};Re({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:n,funcName:i}=t,s=Tt(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:n.mode,label:i,backgroundColor:s,body:o}},htmlBuilder:p9,mathmlBuilder:m9});Re({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:n,funcName:i}=t,s=Tt(e[0],"color-token").color,o=Tt(e[1],"color-token").color,a=e[2];return{type:"enclose",mode:n.mode,label:i,backgroundColor:o,borderColor:s,body:a}},htmlBuilder:p9,mathmlBuilder:m9});Re({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});Re({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];return{type:"enclose",mode:r.mode,label:n,body:i}},htmlBuilder:p9,mathmlBuilder:m9});Re({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var zq={};function oa(t){for(var{type:e,names:r,props:n,handler:i,htmlBuilder:s,mathmlBuilder:o}=t,a={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},l=0;l<r.length;++l)zq[r[l]]=a;s&&(Ex[e]=s),o&&(Lx[e]=o)}var Hq={};function A(t,e){Hq[t]=e}function BO(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}var B4=t=>{var e=t.parser.settings;if(!e.displayMode)throw new xe("{"+t.envName+"} can be used only in display mode.")};function g9(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function Oc(t,e,r){var{hskipBeforeAndAfter:n,addJot:i,cols:s,arraystretch:o,colSeparationType:a,autoTag:l,singleRow:c,emptySingleRow:h,maxNumCols:u,leqno:f}=e;if(t.gullet.beginGroup(),c||t.gullet.macros.set("\\cr","\\\\\\relax"),!o){var d=t.gullet.expandMacroAsText("\\arraystretch");if(d==null)o=1;else if(o=parseFloat(d),!o||o<0)throw new xe("Invalid \\arraystretch: "+d)}t.gullet.beginGroup();var p=[],m=[p],g=[],y=[],b=l!=null?[]:void 0;function x(){l&&t.gullet.macros.set("\\@eqnsw","1",!0)}function T(){b&&(t.gullet.macros.get("\\df@tag")?(b.push(t.subparse([new es("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):b.push(!!l&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(x(),y.push(BO(t));;){var S=t.parseExpression(!1,c?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),S={type:"ordgroup",mode:t.mode,body:S},r&&(S={type:"styling",mode:t.mode,style:r,body:[S]}),p.push(S);var w=t.fetch().text;if(w==="&"){if(u&&p.length===u){if(c||a)throw new xe("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(w==="\\end"){T(),p.length===1&&S.type==="styling"&&S.body[0].body.length===0&&(m.length>1||!h)&&m.pop(),y.length<m.length+1&&y.push([]);break}else if(w==="\\\\"){t.consume();var _=void 0;t.gullet.future().text!==" "&&(_=t.parseSizeGroup(!0)),g.push(_?_.value:null),T(),y.push(BO(t)),p=[],m.push(p),x()}else throw new xe("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:i,arraystretch:o,body:m,cols:s,rowGaps:g,hskipBeforeAndAfter:n,hLinesBeforeRow:y,colSeparationType:a,tags:b,leqno:f}}function y9(t){return t.slice(0,1)==="d"?"display":"text"}var aa=function(e,r){var n,i,s=e.body.length,o=e.hLinesBeforeRow,a=0,l=new Array(s),c=[],h=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),u=1/r.fontMetrics().ptPerEm,f=5*u;if(e.colSeparationType&&e.colSeparationType==="small"){var d=r.havingStyle(ut.SCRIPT).sizeMultiplier;f=.2778*(d/r.sizeMultiplier)}var p=e.colSeparationType==="CD"?Or({number:3,unit:"ex"},r):12*u,m=3*u,g=e.arraystretch*p,y=.7*g,b=.3*g,x=0;function T(Ce){for(var ye=0;ye<Ce.length;++ye)ye>0&&(x+=.25),c.push({pos:x,isDashed:Ce[ye]})}for(T(o[0]),n=0;n<e.body.length;++n){var S=e.body[n],w=y,_=b;a<S.length&&(a=S.length);var I=new Array(S.length);for(i=0;i<S.length;++i){var N=zt(S[i],r);_<N.depth&&(_=N.depth),w<N.height&&(w=N.height),I[i]=N}var L=e.rowGaps[n],D=0;L&&(D=Or(L,r),D>0&&(D+=b,_<D&&(_=D),D=0)),e.addJot&&(_+=m),I.height=w,I.depth=_,x+=w,I.pos=x,x+=_+D,l[n]=I,T(o[n+1])}var P=x/2+r.fontMetrics().axisHeight,K=e.cols||[],z=[],$,H,U=[];if(e.tags&&e.tags.some(Ce=>Ce))for(n=0;n<s;++n){var q=l[n],re=q.pos-P,E=e.tags[n],de=void 0;E===!0?de=Z.makeSpan(["eqn-num"],[],r):E===!1?de=Z.makeSpan([],[],r):de=Z.makeSpan([],en(E,r,!0),r),de.depth=q.depth,de.height=q.height,U.push({type:"elem",elem:de,shift:re})}for(i=0,H=0;i<a||H<K.length;++i,++H){for(var Te=K[H]||{},O=!0;Te.type==="separator";){if(O||($=Z.makeSpan(["arraycolsep"],[]),$.style.width=_e(r.fontMetrics().doubleRuleSep),z.push($)),Te.separator==="|"||Te.separator===":"){var et=Te.separator==="|"?"solid":"dashed",He=Z.makeSpan(["vertical-separator"],[],r);He.style.height=_e(x),He.style.borderRightWidth=_e(h),He.style.borderRightStyle=et,He.style.margin="0 "+_e(-h/2);var Le=x-P;Le&&(He.style.verticalAlign=_e(-Le)),z.push(He)}else throw new xe("Invalid separator type: "+Te.separator);H++,Te=K[H]||{},O=!1}if(!(i>=a)){var Xe=void 0;(i>0||e.hskipBeforeAndAfter)&&(Xe=Vt.deflt(Te.pregap,f),Xe!==0&&($=Z.makeSpan(["arraycolsep"],[]),$.style.width=_e(Xe),z.push($)));var dt=[];for(n=0;n<s;++n){var Ct=l[n],xt=Ct[i];if(xt){var jt=Ct.pos-P;xt.depth=Ct.depth,xt.height=Ct.height,dt.push({type:"elem",elem:xt,shift:jt})}}dt=Z.makeVList({positionType:"individualShift",children:dt},r),dt=Z.makeSpan(["col-align-"+(Te.align||"c")],[dt]),z.push(dt),(i<a-1||e.hskipBeforeAndAfter)&&(Xe=Vt.deflt(Te.postgap,f),Xe!==0&&($=Z.makeSpan(["arraycolsep"],[]),$.style.width=_e(Xe),z.push($)))}}if(l=Z.makeSpan(["mtable"],z),c.length>0){for(var R=Z.makeLineSpan("hline",r,h),W=Z.makeLineSpan("hdashline",r,h),ee=[{type:"elem",elem:l,shift:0}];c.length>0;){var ue=c.pop(),le=ue.pos-P;ue.isDashed?ee.push({type:"elem",elem:W,shift:le}):ee.push({type:"elem",elem:R,shift:le})}l=Z.makeVList({positionType:"individualShift",children:ee},r)}if(U.length===0)return Z.makeSpan(["mord"],[l],r);var ce=Z.makeVList({positionType:"individualShift",children:U},r);return ce=Z.makeSpan(["tag"],[ce],r),Z.makeFragment([l,ce])},D4e={c:"center ",l:"left ",r:"right "},la=function(e,r){for(var n=[],i=new ge.MathNode("mtd",[],["mtr-glue"]),s=new ge.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var a=e.body[o],l=[],c=0;c<a.length;c++)l.push(new ge.MathNode("mtd",[cr(a[c],r)]));e.tags&&e.tags[o]&&(l.unshift(i),l.push(i),e.leqno?l.unshift(s):l.push(s)),n.push(new ge.MathNode("mtr",l))}var h=new ge.MathNode("mtable",n),u=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);h.setAttribute("rowspacing",_e(u));var f="",d="";if(e.cols&&e.cols.length>0){var p=e.cols,m="",g=!1,y=0,b=p.length;p[0].type==="separator"&&(f+="top ",y=1),p[p.length-1].type==="separator"&&(f+="bottom ",b-=1);for(var x=y;x<b;x++)p[x].type==="align"?(d+=D4e[p[x].align],g&&(m+="none "),g=!0):p[x].type==="separator"&&g&&(m+=p[x].separator==="|"?"solid ":"dashed ",g=!1);h.setAttribute("columnalign",d.trim()),/[sd]/.test(m)&&h.setAttribute("columnlines",m.trim())}if(e.colSeparationType==="align"){for(var T=e.cols||[],S="",w=1;w<T.length;w++)S+=w%2?"0em ":"1em ";h.setAttribute("columnspacing",S.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?h.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?h.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?h.setAttribute("columnspacing","0.5em"):h.setAttribute("columnspacing","1em");var _="",I=e.hLinesBeforeRow;f+=I[0].length>0?"left ":"",f+=I[I.length-1].length>0?"right ":"";for(var N=1;N<I.length-1;N++)_+=I[N].length===0?"none ":I[N][0]?"dashed ":"solid ";return/[sd]/.test(_)&&h.setAttribute("rowlines",_.trim()),f!==""&&(h=new ge.MathNode("menclose",[h]),h.setAttribute("notation",f.trim())),e.arraystretch&&e.arraystretch<1&&(h=new ge.MathNode("mstyle",[h]),h.setAttribute("scriptlevel","1")),h},qq=function(e,r){e.envName.indexOf("ed")===-1&&B4(e);var n=[],i=e.envName.indexOf("at")>-1?"alignat":"align",s=e.envName==="split",o=Oc(e.parser,{cols:n,addJot:!0,autoTag:s?void 0:g9(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:s?2:void 0,leqno:e.parser.settings.leqno},"display"),a,l=0,c={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var h="",u=0;u<r[0].body.length;u++){var f=Tt(r[0].body[u],"textord");h+=f.text}a=Number(h),l=a*2}var d=!l;o.body.forEach(function(y){for(var b=1;b<y.length;b+=2){var x=Tt(y[b],"styling"),T=Tt(x.body[0],"ordgroup");T.body.unshift(c)}if(d)l<y.length&&(l=y.length);else{var S=y.length/2;if(a<S)throw new xe("Too many math in a row: "+("expected "+a+", but got "+S),y[0])}});for(var p=0;p<l;++p){var m="r",g=0;p%2===1?m="l":p>0&&d&&(g=1),n[p]={type:"align",align:m,pregap:g,postgap:0}}return o.colSeparationType=d?"align":"alignat",o};oa({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=O4(e[0]),n=r?[e[0]]:Tt(e[0],"ordgroup").body,i=n.map(function(o){var a=u9(o),l=a.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new xe("Unknown column alignment: "+l,o)}),s={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return Oc(t.parser,s,y9(t.envName))},htmlBuilder:aa,mathmlBuilder:la});oa({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var i=t.parser;if(i.consumeSpaces(),i.fetch().text==="["){if(i.consume(),i.consumeSpaces(),r=i.fetch().text,"lcr".indexOf(r)===-1)throw new xe("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),n.cols=[{type:"align",align:r}]}}var s=Oc(t.parser,n,y9(t.envName)),o=Math.max(0,...s.body.map(a=>a.length));return s.cols=new Array(o).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[s],left:e[0],right:e[1],rightColor:void 0}:s},htmlBuilder:aa,mathmlBuilder:la});oa({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},r=Oc(t.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:aa,mathmlBuilder:la});oa({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=O4(e[0]),n=r?[e[0]]:Tt(e[0],"ordgroup").body,i=n.map(function(o){var a=u9(o),l=a.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new xe("Unknown column alignment: "+l,o)});if(i.length>1)throw new xe("{subarray} can contain only one column");var s={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if(s=Oc(t.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new xe("{subarray} can contain only one column");return s},htmlBuilder:aa,mathmlBuilder:la});oa({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=Oc(t.parser,e,y9(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:aa,mathmlBuilder:la});oa({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:qq,htmlBuilder:aa,mathmlBuilder:la});oa({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){["gather","gather*"].includes(t.envName)&&B4(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:g9(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Oc(t.parser,e,"display")},htmlBuilder:aa,mathmlBuilder:la});oa({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:qq,htmlBuilder:aa,mathmlBuilder:la});oa({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){B4(t);var e={autoTag:g9(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Oc(t.parser,e,"display")},htmlBuilder:aa,mathmlBuilder:la});oa({type:"array",names:["CD"],props:{numArgs:0},handler(t){return B4(t),b4e(t.parser)},htmlBuilder:aa,mathmlBuilder:la});A("\\nonumber","\\gdef\\@eqnsw{0}");A("\\notag","\\nonumber");Re({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new xe(t.funcName+" valid only within array environment")}});var RO=zq;Re({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];if(i.type!=="ordgroup")throw new xe("Invalid environment name",i);for(var s="",o=0;o<i.body.length;++o)s+=Tt(i.body[o],"textord").text;if(n==="\\begin"){if(!RO.hasOwnProperty(s))throw new xe("No such environment: "+s,i);var a=RO[s],{args:l,optArgs:c}=r.parseArguments("\\begin{"+s+"}",a),h={mode:r.mode,envName:s,parser:r},u=a.handler(h,l,c);r.expect("\\end",!1);var f=r.nextToken,d=Tt(r.parseFunction(),"environment");if(d.name!==s)throw new xe("Mismatch: \\begin{"+s+"} matched by \\end{"+d.name+"}",f);return u}return{type:"environment",mode:r.mode,name:s,nameGroup:i}}});var Vq=(t,e)=>{var r=t.font,n=e.withFont(r);return zt(t.body,n)},Wq=(t,e)=>{var r=t.font,n=e.withFont(r);return cr(t.body,n)},PO={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Re({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=Ox(e[0]),s=n;return s in PO&&(s=PO[s]),{type:"font",mode:r.mode,font:s.slice(1),body:i}},htmlBuilder:Vq,mathmlBuilder:Wq});Re({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:r}=t,n=e[0],i=Vt.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:D4(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:i}}});Re({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,breakOnTokenText:i}=t,{mode:s}=r,o=r.parseExpression(!0,i),a="math"+n.slice(1);return{type:"font",mode:s,font:a,body:{type:"ordgroup",mode:r.mode,body:o}}},htmlBuilder:Vq,mathmlBuilder:Wq});var jq=(t,e)=>{var r=e;return t==="display"?r=r.id>=ut.SCRIPT.id?r.text():ut.DISPLAY:t==="text"&&r.size===ut.DISPLAY.size?r=ut.TEXT:t==="script"?r=ut.SCRIPT:t==="scriptscript"&&(r=ut.SCRIPTSCRIPT),r},b9=(t,e)=>{var r=jq(t.size,e.style),n=r.fracNum(),i=r.fracDen(),s;s=e.havingStyle(n);var o=zt(t.numer,s,e);if(t.continued){var a=8.5/e.fontMetrics().ptPerEm,l=3.5/e.fontMetrics().ptPerEm;o.height=o.height<a?a:o.height,o.depth=o.depth<l?l:o.depth}s=e.havingStyle(i);var c=zt(t.denom,s,e),h,u,f;t.hasBarLine?(t.barSize?(u=Or(t.barSize,e),h=Z.makeLineSpan("frac-line",e,u)):h=Z.makeLineSpan("frac-line",e),u=h.height,f=h.height):(h=null,u=0,f=e.fontMetrics().defaultRuleThickness);var d,p,m;r.size===ut.DISPLAY.size||t.size==="display"?(d=e.fontMetrics().num1,u>0?p=3*f:p=7*f,m=e.fontMetrics().denom1):(u>0?(d=e.fontMetrics().num2,p=f):(d=e.fontMetrics().num3,p=3*f),m=e.fontMetrics().denom2);var g;if(h){var b=e.fontMetrics().axisHeight;d-o.depth-(b+.5*u)<p&&(d+=p-(d-o.depth-(b+.5*u))),b-.5*u-(c.height-m)<p&&(m+=p-(b-.5*u-(c.height-m)));var x=-(b-.5*u);g=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:m},{type:"elem",elem:h,shift:x},{type:"elem",elem:o,shift:-d}]},e)}else{var y=d-o.depth-(c.height-m);y<p&&(d+=.5*(p-y),m+=.5*(p-y)),g=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:m},{type:"elem",elem:o,shift:-d}]},e)}s=e.havingStyle(r),g.height*=s.sizeMultiplier/e.sizeMultiplier,g.depth*=s.sizeMultiplier/e.sizeMultiplier;var T;r.size===ut.DISPLAY.size?T=e.fontMetrics().delim1:r.size===ut.SCRIPTSCRIPT.size?T=e.havingStyle(ut.SCRIPT).fontMetrics().delim2:T=e.fontMetrics().delim2;var S,w;return t.leftDelim==null?S=pg(e,["mopen"]):S=Ya.customSizedDelim(t.leftDelim,T,!0,e.havingStyle(r),t.mode,["mopen"]),t.continued?w=Z.makeSpan([]):t.rightDelim==null?w=pg(e,["mclose"]):w=Ya.customSizedDelim(t.rightDelim,T,!0,e.havingStyle(r),t.mode,["mclose"]),Z.makeSpan(["mord"].concat(s.sizingClasses(e)),[S,Z.makeSpan(["mfrac"],[g]),w],e)},x9=(t,e)=>{var r=new ge.MathNode("mfrac",[cr(t.numer,e),cr(t.denom,e)]);if(!t.hasBarLine)r.setAttribute("linethickness","0px");else if(t.barSize){var n=Or(t.barSize,e);r.setAttribute("linethickness",_e(n))}var i=jq(t.size,e.style);if(i.size!==e.style.size){r=new ge.MathNode("mstyle",[r]);var s=i.size===ut.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",s),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var o=[];if(t.leftDelim!=null){var a=new ge.MathNode("mo",[new ge.TextNode(t.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),o.push(a)}if(o.push(r),t.rightDelim!=null){var l=new ge.MathNode("mo",[new ge.TextNode(t.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),o.push(l)}return c9(o)}return r};Re({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0],s=e[1],o,a=null,l=null,c="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,a="(",l=")";break;case"\\\\bracefrac":o=!1,a="\\{",l="\\}";break;case"\\\\brackfrac":o=!1,a="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:i,denom:s,hasBarLine:o,leftDelim:a,rightDelim:l,size:c,barSize:null}},htmlBuilder:b9,mathmlBuilder:x9});Re({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0],s=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:i,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Re({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:r,token:n}=t,i;switch(r){case"\\over":i="\\frac";break;case"\\choose":i="\\binom";break;case"\\atop":i="\\\\atopfrac";break;case"\\brace":i="\\\\bracefrac";break;case"\\brack":i="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:i,token:n}}});var NO=["display","text","script","scriptscript"],FO=function(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};Re({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:r}=t,n=e[4],i=e[5],s=Ox(e[0]),o=s.type==="atom"&&s.family==="open"?FO(s.text):null,a=Ox(e[1]),l=a.type==="atom"&&a.family==="close"?FO(a.text):null,c=Tt(e[2],"size"),h,u=null;c.isBlank?h=!0:(u=c.value,h=u.number>0);var f="auto",d=e[3];if(d.type==="ordgroup"){if(d.body.length>0){var p=Tt(d.body[0],"textord");f=NO[Number(p.text)]}}else d=Tt(d,"textord"),f=NO[Number(d.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:i,continued:!1,hasBarLine:h,barSize:u,leftDelim:o,rightDelim:l,size:f}},htmlBuilder:b9,mathmlBuilder:x9});Re({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:n,token:i}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:Tt(e[0],"size").value,token:i}}});Re({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0],s=cve(Tt(e[1],"infix").size),o=e[2],a=s.number>0;return{type:"genfrac",mode:r.mode,numer:i,denom:o,continued:!1,hasBarLine:a,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:b9,mathmlBuilder:x9});var Uq=(t,e)=>{var r=e.style,n,i;t.type==="supsub"?(n=t.sup?zt(t.sup,e.havingStyle(r.sup()),e):zt(t.sub,e.havingStyle(r.sub()),e),i=Tt(t.base,"horizBrace")):i=Tt(t,"horizBrace");var s=zt(i.base,e.havingBaseStyle(ut.DISPLAY)),o=al.svgSpan(i,e),a;if(i.isOver?(a=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:o}]},e),a.children[0].children[0].children[1].classes.push("svg-align")):(a=Z.makeVList({positionType:"bottom",positionData:s.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:s}]},e),a.children[0].children[0].children[0].classes.push("svg-align")),n){var l=Z.makeSpan(["mord",i.isOver?"mover":"munder"],[a],e);i.isOver?a=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:n}]},e):a=Z.makeVList({positionType:"bottom",positionData:l.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:l}]},e)}return Z.makeSpan(["mord",i.isOver?"mover":"munder"],[a],e)},I4e=(t,e)=>{var r=al.mathMLnode(t.label);return new ge.MathNode(t.isOver?"mover":"munder",[cr(t.base,e),r])};Re({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:Uq,mathmlBuilder:I4e});Re({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[1],i=Tt(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:r.mode,href:i,body:Fr(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var r=en(t.body,e,!1);return Z.makeAnchor(t.href,[],r,e)},mathmlBuilder:(t,e)=>{var r=yc(t.body,e);return r instanceof Xi||(r=new Xi("mrow",[r])),r.setAttribute("href",t.href),r}});Re({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=Tt(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var i=[],s=0;s<n.length;s++){var o=n[s];o==="~"&&(o="\\textasciitilde"),i.push({type:"textord",mode:"text",text:o})}var a={type:"text",mode:r.mode,font:"\\texttt",body:i};return{type:"href",mode:r.mode,href:n,body:Fr(a)}}});Re({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:Fr(e[0])}},htmlBuilder(t,e){var r=en(t.body,e,!1);return Z.makeFragment(r)},mathmlBuilder(t,e){return new ge.MathNode("mrow",Ni(t.body,e))}});Re({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,token:i}=t,s=Tt(e[0],"raw").string,o=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var a,l={};switch(n){case"\\htmlClass":l.class=s,a={command:"\\htmlClass",class:s};break;case"\\htmlId":l.id=s,a={command:"\\htmlId",id:s};break;case"\\htmlStyle":l.style=s,a={command:"\\htmlStyle",style:s};break;case"\\htmlData":{for(var c=s.split(","),h=0;h<c.length;h++){var u=c[h].split("=");if(u.length!==2)throw new xe("Error parsing key-value for \\htmlData");l["data-"+u[0].trim()]=u[1].trim()}a={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(a)?{type:"html",mode:r.mode,attributes:l,body:Fr(o)}:r.formatUnsupportedCmd(n)},htmlBuilder:(t,e)=>{var r=en(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var i=Z.makeSpan(n,r,e);for(var s in t.attributes)s!=="class"&&t.attributes.hasOwnProperty(s)&&i.setAttribute(s,t.attributes[s]);return i},mathmlBuilder:(t,e)=>yc(t.body,e)});Re({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:Fr(e[0]),mathml:Fr(e[1])}},htmlBuilder:(t,e)=>{var r=en(t.html,e,!1);return Z.makeFragment(r)},mathmlBuilder:(t,e)=>yc(t.mathml,e)});var ak=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new xe("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!uq(n))throw new xe("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};Re({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,r)=>{var{parser:n}=t,i={number:0,unit:"em"},s={number:.9,unit:"em"},o={number:0,unit:"em"},a="";if(r[0])for(var l=Tt(r[0],"raw").string,c=l.split(","),h=0;h<c.length;h++){var u=c[h].split("=");if(u.length===2){var f=u[1].trim();switch(u[0].trim()){case"alt":a=f;break;case"width":i=ak(f);break;case"height":s=ak(f);break;case"totalheight":o=ak(f);break;default:throw new xe("Invalid key: '"+u[0]+"' in \\includegraphics.")}}}var d=Tt(e[0],"url").url;return a===""&&(a=d,a=a.replace(/^.*[\\/]/,""),a=a.substring(0,a.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:d})?{type:"includegraphics",mode:n.mode,alt:a,width:i,height:s,totalheight:o,src:d}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var r=Or(t.height,e),n=0;t.totalheight.number>0&&(n=Or(t.totalheight,e)-r);var i=0;t.width.number>0&&(i=Or(t.width,e));var s={height:_e(r+n)};i>0&&(s.width=_e(i)),n>0&&(s.verticalAlign=_e(-n));var o=new Ive(t.src,t.alt,s);return o.height=r,o.depth=n,o},mathmlBuilder:(t,e)=>{var r=new ge.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var n=Or(t.height,e),i=0;if(t.totalheight.number>0&&(i=Or(t.totalheight,e)-n,r.setAttribute("valign",_e(-i))),r.setAttribute("height",_e(n+i)),t.width.number>0){var s=Or(t.width,e);r.setAttribute("width",_e(s))}return r.setAttribute("src",t.src),r}});Re({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,i=Tt(e[0],"size");if(r.settings.strict){var s=n[1]==="m",o=i.value.unit==="mu";s?(o||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+i.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):o&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:i.value}},htmlBuilder(t,e){return Z.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var r=Or(t.dimension,e);return new ge.SpaceNode(r)}});Re({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:i}},htmlBuilder:(t,e)=>{var r;t.alignment==="clap"?(r=Z.makeSpan([],[zt(t.body,e)]),r=Z.makeSpan(["inner"],[r],e)):r=Z.makeSpan(["inner"],[zt(t.body,e)]);var n=Z.makeSpan(["fix"],[]),i=Z.makeSpan([t.alignment],[r,n],e),s=Z.makeSpan(["strut"]);return s.style.height=_e(i.height+i.depth),i.depth&&(s.style.verticalAlign=_e(-i.depth)),i.children.unshift(s),i=Z.makeSpan(["thinbox"],[i],e),Z.makeSpan(["mord","vbox"],[i],e)},mathmlBuilder:(t,e)=>{var r=new ge.MathNode("mpadded",[cr(t.body,e)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});Re({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:n}=t,i=n.mode;n.switchMode("math");var s=r==="\\("?"\\)":"$",o=n.parseExpression(!1,s);return n.expect(s),n.switchMode(i),{type:"styling",mode:n.mode,style:"text",body:o}}});Re({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new xe("Mismatched "+t.funcName)}});var $O=(t,e)=>{switch(e.style.size){case ut.DISPLAY.size:return t.display;case ut.TEXT.size:return t.text;case ut.SCRIPT.size:return t.script;case ut.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};Re({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:Fr(e[0]),text:Fr(e[1]),script:Fr(e[2]),scriptscript:Fr(e[3])}},htmlBuilder:(t,e)=>{var r=$O(t,e),n=en(r,e,!1);return Z.makeFragment(n)},mathmlBuilder:(t,e)=>{var r=$O(t,e);return yc(r,e)}});var Gq=(t,e,r,n,i,s,o)=>{t=Z.makeSpan([],[t]);var a=r&&Vt.isCharacterBox(r),l,c;if(e){var h=zt(e,n.havingStyle(i.sup()),n);c={elem:h,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-h.depth)}}if(r){var u=zt(r,n.havingStyle(i.sub()),n);l={elem:u,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-u.height)}}var f;if(c&&l){var d=n.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+t.depth+o;f=Z.makeVList({positionType:"bottom",positionData:d,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:_e(-s)},{type:"kern",size:l.kern},{type:"elem",elem:t},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:_e(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(l){var p=t.height-o;f=Z.makeVList({positionType:"top",positionData:p,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:_e(-s)},{type:"kern",size:l.kern},{type:"elem",elem:t}]},n)}else if(c){var m=t.depth+o;f=Z.makeVList({positionType:"bottom",positionData:m,children:[{type:"elem",elem:t},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:_e(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return t;var g=[f];if(l&&s!==0&&!a){var y=Z.makeSpan(["mspace"],[],n);y.style.marginRight=_e(s),g.unshift(y)}return Z.makeSpan(["mop","op-limits"],g,n)},Kq=["\\smallint"],e0=(t,e)=>{var r,n,i=!1,s;t.type==="supsub"?(r=t.sup,n=t.sub,s=Tt(t.base,"op"),i=!0):s=Tt(t,"op");var o=e.style,a=!1;o.size===ut.DISPLAY.size&&s.symbol&&!Kq.includes(s.name)&&(a=!0);var l;if(s.symbol){var c=a?"Size2-Regular":"Size1-Regular",h="";if((s.name==="\\oiint"||s.name==="\\oiiint")&&(h=s.name.slice(1),s.name=h==="oiint"?"\\iint":"\\iiint"),l=Z.makeSymbol(s.name,c,"math",e,["mop","op-symbol",a?"large-op":"small-op"]),h.length>0){var u=l.italic,f=Z.staticSvg(h+"Size"+(a?"2":"1"),e);l=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:f,shift:a?.08:0}]},e),s.name="\\"+h,l.classes.unshift("mop"),l.italic=u}}else if(s.body){var d=en(s.body,e,!0);d.length===1&&d[0]instanceof As?(l=d[0],l.classes[0]="mop"):l=Z.makeSpan(["mop"],d,e)}else{for(var p=[],m=1;m<s.name.length;m++)p.push(Z.mathsym(s.name[m],s.mode,e));l=Z.makeSpan(["mop"],p,e)}var g=0,y=0;return(l instanceof As||s.name==="\\oiint"||s.name==="\\oiiint")&&!s.suppressBaseShift&&(g=(l.height-l.depth)/2-e.fontMetrics().axisHeight,y=l.italic),i?Gq(l,r,n,e,o,y,g):(g&&(l.style.position="relative",l.style.top=_e(g)),l)},B1=(t,e)=>{var r;if(t.symbol)r=new Xi("mo",[Es(t.name,t.mode)]),Kq.includes(t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new Xi("mo",Ni(t.body,e));else{r=new Xi("mi",[new Vo(t.name.slice(1))]);var n=new Xi("mo",[Es("","text")]);t.parentIsSupSub?r=new Xi("mrow",[r,n]):r=kq([r,n])}return r},B4e={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};Re({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=n;return i.length===1&&(i=B4e[i]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:e0,mathmlBuilder:B1});Re({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Fr(n)}},htmlBuilder:e0,mathmlBuilder:B1});var R4e={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};Re({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:e0,mathmlBuilder:B1});Re({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:e0,mathmlBuilder:B1});Re({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t,n=r;return n.length===1&&(n=R4e[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:e0,mathmlBuilder:B1});var Yq=(t,e)=>{var r,n,i=!1,s;t.type==="supsub"?(r=t.sup,n=t.sub,s=Tt(t.base,"operatorname"),i=!0):s=Tt(t,"operatorname");var o;if(s.body.length>0){for(var a=s.body.map(u=>{var f=u.text;return typeof f=="string"?{type:"textord",mode:u.mode,text:f}:u}),l=en(a,e.withFont("mathrm"),!0),c=0;c<l.length;c++){var h=l[c];h instanceof As&&(h.text=h.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=Z.makeSpan(["mop"],l,e)}else o=Z.makeSpan(["mop"],[],e);return i?Gq(o,r,n,e,e.style,0,0):o},P4e=(t,e)=>{for(var r=Ni(t.body,e.withFont("mathrm")),n=!0,i=0;i<r.length;i++){var s=r[i];if(!(s instanceof ge.SpaceNode))if(s instanceof ge.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=s.children[0];s.children.length===1&&o instanceof ge.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var a=r.map(h=>h.toText()).join("");r=[new ge.TextNode(a)]}var l=new ge.MathNode("mi",r);l.setAttribute("mathvariant","normal");var c=new ge.MathNode("mo",[Es("","text")]);return t.parentIsSupSub?new ge.MathNode("mrow",[l,c]):ge.newDocumentFragment([l,c])};Re({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0];return{type:"operatorname",mode:r.mode,body:Fr(i),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:Yq,mathmlBuilder:P4e});A("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");_u({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?Z.makeFragment(en(t.body,e,!1)):Z.makeSpan(["mord"],en(t.body,e,!0),e)},mathmlBuilder(t,e){return yc(t.body,e,!0)}});Re({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(t,e){var r=zt(t.body,e.havingCrampedStyle()),n=Z.makeLineSpan("overline-line",e),i=e.fontMetrics().defaultRuleThickness,s=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n},{type:"kern",size:i}]},e);return Z.makeSpan(["mord","overline"],[s],e)},mathmlBuilder(t,e){var r=new ge.MathNode("mo",[new ge.TextNode("")]);r.setAttribute("stretchy","true");var n=new ge.MathNode("mover",[cr(t.body,e),r]);return n.setAttribute("accent","true"),n}});Re({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"phantom",mode:r.mode,body:Fr(n)}},htmlBuilder:(t,e)=>{var r=en(t.body,e.withPhantom(),!1);return Z.makeFragment(r)},mathmlBuilder:(t,e)=>{var r=Ni(t.body,e);return new ge.MathNode("mphantom",r)}});Re({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=Z.makeSpan([],[zt(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),Z.makeSpan(["mord"],[r],e)},mathmlBuilder:(t,e)=>{var r=Ni(Fr(t.body),e),n=new ge.MathNode("mphantom",r),i=new ge.MathNode("mpadded",[n]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}});Re({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=Z.makeSpan(["inner"],[zt(t.body,e.withPhantom())]),n=Z.makeSpan(["fix"],[]);return Z.makeSpan(["mord","rlap"],[r,n],e)},mathmlBuilder:(t,e)=>{var r=Ni(Fr(t.body),e),n=new ge.MathNode("mphantom",r),i=new ge.MathNode("mpadded",[n]);return i.setAttribute("width","0px"),i}});Re({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,n=Tt(e[0],"size").value,i=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:i}},htmlBuilder(t,e){var r=zt(t.body,e),n=Or(t.dy,e);return Z.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new ge.MathNode("mpadded",[cr(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}});Re({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});Re({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,r){var{parser:n}=t,i=r[0],s=Tt(e[0],"size"),o=Tt(e[1],"size");return{type:"rule",mode:n.mode,shift:i&&Tt(i,"size").value,width:s.value,height:o.value}},htmlBuilder(t,e){var r=Z.makeSpan(["mord","rule"],[],e),n=Or(t.width,e),i=Or(t.height,e),s=t.shift?Or(t.shift,e):0;return r.style.borderRightWidth=_e(n),r.style.borderTopWidth=_e(i),r.style.bottom=_e(s),r.width=n,r.height=i+s,r.depth=-s,r.maxFontSize=i*1.125*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=Or(t.width,e),n=Or(t.height,e),i=t.shift?Or(t.shift,e):0,s=e.color&&e.getColor()||"black",o=new ge.MathNode("mspace");o.setAttribute("mathbackground",s),o.setAttribute("width",_e(r)),o.setAttribute("height",_e(n));var a=new ge.MathNode("mpadded",[o]);return i>=0?a.setAttribute("height",_e(i)):(a.setAttribute("height",_e(i)),a.setAttribute("depth",_e(-i))),a.setAttribute("voffset",_e(i)),a}});function Xq(t,e,r){for(var n=en(t,e,!1),i=e.sizeMultiplier/r.sizeMultiplier,s=0;s<n.length;s++){var o=n[s].classes.indexOf("sizing");o<0?Array.prototype.push.apply(n[s].classes,e.sizingClasses(r)):n[s].classes[o+1]==="reset-size"+e.size&&(n[s].classes[o+1]="reset-size"+r.size),n[s].height*=i,n[s].depth*=i}return Z.makeFragment(n)}var zO=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],N4e=(t,e)=>{var r=e.havingSize(t.size);return Xq(t.body,r,e)};Re({type:"sizing",names:zO,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:r,funcName:n,parser:i}=t,s=i.parseExpression(!1,r);return{type:"sizing",mode:i.mode,size:zO.indexOf(n)+1,body:s}},htmlBuilder:N4e,mathmlBuilder:(t,e)=>{var r=e.havingSize(t.size),n=Ni(t.body,r),i=new ge.MathNode("mstyle",n);return i.setAttribute("mathsize",_e(r.sizeMultiplier)),i}});Re({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,r)=>{var{parser:n}=t,i=!1,s=!1,o=r[0]&&Tt(r[0],"ordgroup");if(o)for(var a="",l=0;l<o.body.length;++l){var c=o.body[l];if(a=c.text,a==="t")i=!0;else if(a==="b")s=!0;else{i=!1,s=!1;break}}else i=!0,s=!0;var h=e[0];return{type:"smash",mode:n.mode,body:h,smashHeight:i,smashDepth:s}},htmlBuilder:(t,e)=>{var r=Z.makeSpan([],[zt(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var i=0;i<r.children.length;i++)r.children[i].depth=0;var s=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return Z.makeSpan(["mord"],[s],e)},mathmlBuilder:(t,e)=>{var r=new ge.MathNode("mpadded",[cr(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});Re({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n}=t,i=r[0],s=e[0];return{type:"sqrt",mode:n.mode,body:s,index:i}},htmlBuilder(t,e){var r=zt(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=Z.wrapFragment(r,e);var n=e.fontMetrics(),i=n.defaultRuleThickness,s=i;e.style.id<ut.TEXT.id&&(s=e.fontMetrics().xHeight);var o=i+s/4,a=r.height+r.depth+o+i,{span:l,ruleWidth:c,advanceWidth:h}=Ya.sqrtImage(a,e),u=l.height-c;u>r.height+r.depth+o&&(o=(o+u-r.height-r.depth)/2);var f=l.height-r.height-o-c;r.style.paddingLeft=_e(h);var d=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+f)},{type:"elem",elem:l},{type:"kern",size:c}]},e);if(t.index){var p=e.havingStyle(ut.SCRIPTSCRIPT),m=zt(t.index,p,e),g=.6*(d.height-d.depth),y=Z.makeVList({positionType:"shift",positionData:-g,children:[{type:"elem",elem:m}]},e),b=Z.makeSpan(["root"],[y]);return Z.makeSpan(["mord","sqrt"],[b,d],e)}else return Z.makeSpan(["mord","sqrt"],[d],e)},mathmlBuilder(t,e){var{body:r,index:n}=t;return n?new ge.MathNode("mroot",[cr(r,e),cr(n,e)]):new ge.MathNode("msqrt",[cr(r,e)])}});var HO={display:ut.DISPLAY,text:ut.TEXT,script:ut.SCRIPT,scriptscript:ut.SCRIPTSCRIPT};Re({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:n,parser:i}=t,s=i.parseExpression(!0,r),o=n.slice(1,n.length-5);return{type:"styling",mode:i.mode,style:o,body:s}},htmlBuilder(t,e){var r=HO[t.style],n=e.havingStyle(r).withFont("");return Xq(t.body,n,e)},mathmlBuilder(t,e){var r=HO[t.style],n=e.havingStyle(r),i=Ni(t.body,n),s=new ge.MathNode("mstyle",i),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},a=o[t.style];return s.setAttribute("scriptlevel",a[0]),s.setAttribute("displaystyle",a[1]),s}});var F4e=function(e,r){var n=e.base;if(n)if(n.type==="op"){var i=n.limits&&(r.style.size===ut.DISPLAY.size||n.alwaysHandleSupSub);return i?e0:null}else if(n.type==="operatorname"){var s=n.alwaysHandleSupSub&&(r.style.size===ut.DISPLAY.size||n.limits);return s?Yq:null}else{if(n.type==="accent")return Vt.isCharacterBox(n.base)?f9:null;if(n.type==="horizBrace"){var o=!e.sub;return o===n.isOver?Uq:null}else return null}else return null};_u({type:"supsub",htmlBuilder(t,e){var r=F4e(t,e);if(r)return r(t,e);var{base:n,sup:i,sub:s}=t,o=zt(n,e),a,l,c=e.fontMetrics(),h=0,u=0,f=n&&Vt.isCharacterBox(n);if(i){var d=e.havingStyle(e.style.sup());a=zt(i,d,e),f||(h=o.height-d.fontMetrics().supDrop*d.sizeMultiplier/e.sizeMultiplier)}if(s){var p=e.havingStyle(e.style.sub());l=zt(s,p,e),f||(u=o.depth+p.fontMetrics().subDrop*p.sizeMultiplier/e.sizeMultiplier)}var m;e.style===ut.DISPLAY?m=c.sup1:e.style.cramped?m=c.sup3:m=c.sup2;var g=e.sizeMultiplier,y=_e(.5/c.ptPerEm/g),b=null;if(l){var x=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(o instanceof As||x)&&(b=_e(-o.italic))}var T;if(a&&l){h=Math.max(h,m,a.depth+.25*c.xHeight),u=Math.max(u,c.sub2);var S=c.defaultRuleThickness,w=4*S;if(h-a.depth-(l.height-u)<w){u=w-(h-a.depth)+l.height;var _=.8*c.xHeight-(h-a.depth);_>0&&(h+=_,u-=_)}var I=[{type:"elem",elem:l,shift:u,marginRight:y,marginLeft:b},{type:"elem",elem:a,shift:-h,marginRight:y}];T=Z.makeVList({positionType:"individualShift",children:I},e)}else if(l){u=Math.max(u,c.sub1,l.height-.8*c.xHeight);var N=[{type:"elem",elem:l,marginLeft:b,marginRight:y}];T=Z.makeVList({positionType:"shift",positionData:u,children:N},e)}else if(a)h=Math.max(h,m,a.depth+.25*c.xHeight),T=Z.makeVList({positionType:"shift",positionData:-h,children:[{type:"elem",elem:a,marginRight:y}]},e);else throw new Error("supsub must have either sup or sub.");var L=GC(o,"right")||"mord";return Z.makeSpan([L],[o,Z.makeSpan(["msupsub"],[T])],e)},mathmlBuilder(t,e){var r=!1,n,i;t.base&&t.base.type==="horizBrace"&&(i=!!t.sup,i===t.base.isOver&&(r=!0,n=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var s=[cr(t.base,e)];t.sub&&s.push(cr(t.sub,e)),t.sup&&s.push(cr(t.sup,e));var o;if(r)o=n?"mover":"munder";else if(t.sub)if(t.sup){var c=t.base;c&&c.type==="op"&&c.limits&&e.style===ut.DISPLAY||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(e.style===ut.DISPLAY||c.limits)?o="munderover":o="msubsup"}else{var l=t.base;l&&l.type==="op"&&l.limits&&(e.style===ut.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===ut.DISPLAY)?o="munder":o="msub"}else{var a=t.base;a&&a.type==="op"&&a.limits&&(e.style===ut.DISPLAY||a.alwaysHandleSupSub)||a&&a.type==="operatorname"&&a.alwaysHandleSupSub&&(a.limits||e.style===ut.DISPLAY)?o="mover":o="msup"}return new ge.MathNode(o,s)}});_u({type:"atom",htmlBuilder(t,e){return Z.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var r=new ge.MathNode("mo",[Es(t.text,t.mode)]);if(t.family==="bin"){var n=h9(t,e);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else t.family==="punct"?r.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&r.setAttribute("stretchy","false");return r}});var Jq={mi:"italic",mn:"normal",mtext:"normal"};_u({type:"mathord",htmlBuilder(t,e){return Z.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var r=new ge.MathNode("mi",[Es(t.text,t.mode,e)]),n=h9(t,e)||"italic";return n!==Jq[r.type]&&r.setAttribute("mathvariant",n),r}});_u({type:"textord",htmlBuilder(t,e){return Z.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var r=Es(t.text,t.mode,e),n=h9(t,e)||"normal",i;return t.mode==="text"?i=new ge.MathNode("mtext",[r]):/[0-9]/.test(t.text)?i=new ge.MathNode("mn",[r]):t.text==="\\prime"?i=new ge.MathNode("mo",[r]):i=new ge.MathNode("mi",[r]),n!==Jq[i.type]&&i.setAttribute("mathvariant",n),i}});var lk={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},ck={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};_u({type:"spacing",htmlBuilder(t,e){if(ck.hasOwnProperty(t.text)){var r=ck[t.text].className||"";if(t.mode==="text"){var n=Z.makeOrd(t,e,"textord");return n.classes.push(r),n}else return Z.makeSpan(["mspace",r],[Z.mathsym(t.text,t.mode,e)],e)}else{if(lk.hasOwnProperty(t.text))return Z.makeSpan(["mspace",lk[t.text]],[],e);throw new xe('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var r;if(ck.hasOwnProperty(t.text))r=new ge.MathNode("mtext",[new ge.TextNode("")]);else{if(lk.hasOwnProperty(t.text))return new ge.MathNode("mspace");throw new xe('Unknown type of space "'+t.text+'"')}return r}});var qO=()=>{var t=new ge.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};_u({type:"tag",mathmlBuilder(t,e){var r=new ge.MathNode("mtable",[new ge.MathNode("mtr",[qO(),new ge.MathNode("mtd",[yc(t.body,e)]),qO(),new ge.MathNode("mtd",[yc(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var VO={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},WO={"\\textbf":"textbf","\\textmd":"textmd"},$4e={"\\textit":"textit","\\textup":"textup"},jO=(t,e)=>{var r=t.font;if(r){if(VO[r])return e.withTextFontFamily(VO[r]);if(WO[r])return e.withTextFontWeight(WO[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape($4e[r])};Re({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];return{type:"text",mode:r.mode,body:Fr(i),font:n}},htmlBuilder(t,e){var r=jO(t,e),n=en(t.body,r,!0);return Z.makeSpan(["mord","text"],n,r)},mathmlBuilder(t,e){var r=jO(t,e);return yc(t.body,r)}});Re({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=zt(t.body,e),n=Z.makeLineSpan("underline-line",e),i=e.fontMetrics().defaultRuleThickness,s=Z.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:i},{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r}]},e);return Z.makeSpan(["mord","underline"],[s],e)},mathmlBuilder(t,e){var r=new ge.MathNode("mo",[new ge.TextNode("")]);r.setAttribute("stretchy","true");var n=new ge.MathNode("munder",[cr(t.body,e),r]);return n.setAttribute("accentunder","true"),n}});Re({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=zt(t.body,e),n=e.fontMetrics().axisHeight,i=.5*(r.height-n-(r.depth+n));return Z.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){return new ge.MathNode("mpadded",[cr(t.body,e)],["vcenter"])}});Re({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new xe("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=UO(t),n=[],i=e.havingStyle(e.style.text()),s=0;s<r.length;s++){var o=r[s];o==="~"&&(o="\\textasciitilde"),n.push(Z.makeSymbol(o,"Typewriter-Regular",t.mode,i,["mord","texttt"]))}return Z.makeSpan(["mord","text"].concat(i.sizingClasses(e)),Z.tryCombineChars(n),i)},mathmlBuilder(t,e){var r=new ge.TextNode(UO(t)),n=new ge.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var UO=t=>t.body.replace(/ /g,t.star?"":""),Xl=vq,Zq=`[ \r
	]`,z4e="\\\\[a-zA-Z@]+",H4e="\\\\[^\uD800-\uDFFF]",q4e="("+z4e+")"+Zq+"*",V4e=`\\\\(
|[ \r	]+
?)[ \r	]*`,JC="[-]",W4e=new RegExp(JC+"+$"),j4e="("+Zq+"+)|"+(V4e+"|")+"([!-\\[\\]---]"+(JC+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(JC+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+q4e)+("|"+H4e+")");class GO{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(j4e,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new es("EOF",new ki(this,r,r));var n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new xe("Unexpected character: '"+e[r]+"'",new es(e[r],new ki(this,r,r+1)));var i=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[i]===14){var s=e.indexOf(`
`,this.tokenRegex.lastIndex);return s===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new es(i,new ki(this,r,this.tokenRegex.lastIndex))}}class U4e{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new xe("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,n){if(n===void 0&&(n=!1),n){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var s=this.undefStack[this.undefStack.length-1];s&&!s.hasOwnProperty(e)&&(s[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var G4e=Hq;A("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});A("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});A("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});A("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});A("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});A("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");A("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var KO={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};A("\\char",function(t){var e=t.popToken(),r,n="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new xe("\\char` missing argument");n=e.text.charCodeAt(0)}else r=10;if(r){if(n=KO[e.text],n==null||n>=r)throw new xe("Invalid base-"+r+" digit "+e.text);for(var i;(i=KO[t.future().text])!=null&&i<r;)n*=r,n+=i,t.popToken()}return"\\@char{"+n+"}"});var v9=(t,e,r,n)=>{var i=t.consumeArg().tokens;if(i.length!==1)throw new xe("\\newcommand's first argument must be a macro name");var s=i[0].text,o=t.isDefined(s);if(o&&!e)throw new xe("\\newcommand{"+s+"} attempting to redefine "+(s+"; use \\renewcommand"));if(!o&&!r)throw new xe("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var a=0;if(i=t.consumeArg().tokens,i.length===1&&i[0].text==="["){for(var l="",c=t.expandNextToken();c.text!=="]"&&c.text!=="EOF";)l+=c.text,c=t.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new xe("Invalid number of arguments: "+l);a=parseInt(l),i=t.consumeArg().tokens}return o&&n||t.macros.set(s,{tokens:i,numArgs:a}),""};A("\\newcommand",t=>v9(t,!1,!0,!1));A("\\renewcommand",t=>v9(t,!0,!1,!1));A("\\providecommand",t=>v9(t,!0,!0,!0));A("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});A("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});A("\\show",t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),Xl[r],pr.math[r],pr.text[r]),""});A("\\bgroup","{");A("\\egroup","}");A("~","\\nobreakspace");A("\\lq","`");A("\\rq","'");A("\\aa","\\r a");A("\\AA","\\r A");A("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");A("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");A("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");A("","\\mathscr{B}");A("","\\mathscr{E}");A("","\\mathscr{F}");A("","\\mathscr{H}");A("","\\mathscr{I}");A("","\\mathscr{L}");A("","\\mathscr{M}");A("","\\mathscr{R}");A("","\\mathfrak{C}");A("","\\mathfrak{H}");A("","\\mathfrak{Z}");A("\\Bbbk","\\Bbb{k}");A("","\\cdotp");A("\\llap","\\mathllap{\\textrm{#1}}");A("\\rlap","\\mathrlap{\\textrm{#1}}");A("\\clap","\\mathclap{\\textrm{#1}}");A("\\mathstrut","\\vphantom{(}");A("\\underbar","\\underline{\\text{#1}}");A("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');A("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");A("\\ne","\\neq");A("","\\neq");A("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");A("","\\notin");A("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");A("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");A("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");A("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");A("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");A("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");A("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");A("","\\perp");A("","\\mathclose{!\\mkern-0.8mu!}");A("","\\notni");A("","\\ulcorner");A("","\\urcorner");A("","\\llcorner");A("","\\lrcorner");A("","\\copyright");A("","\\textregistered");A("","\\textregistered");A("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');A("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');A("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');A("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');A("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");A("","\\vdots");A("\\varGamma","\\mathit{\\Gamma}");A("\\varDelta","\\mathit{\\Delta}");A("\\varTheta","\\mathit{\\Theta}");A("\\varLambda","\\mathit{\\Lambda}");A("\\varXi","\\mathit{\\Xi}");A("\\varPi","\\mathit{\\Pi}");A("\\varSigma","\\mathit{\\Sigma}");A("\\varUpsilon","\\mathit{\\Upsilon}");A("\\varPhi","\\mathit{\\Phi}");A("\\varPsi","\\mathit{\\Psi}");A("\\varOmega","\\mathit{\\Omega}");A("\\substack","\\begin{subarray}{c}#1\\end{subarray}");A("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");A("\\boxed","\\fbox{$\\displaystyle{#1}$}");A("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");A("\\implies","\\DOTSB\\;\\Longrightarrow\\;");A("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");A("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");A("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var YO={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};A("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in YO?e=YO[r]:(r.slice(0,4)==="\\not"||r in pr.math&&["bin","rel"].includes(pr.math[r].group))&&(e="\\dotsb"),e});var w9={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};A("\\dotso",function(t){var e=t.future().text;return e in w9?"\\ldots\\,":"\\ldots"});A("\\dotsc",function(t){var e=t.future().text;return e in w9&&e!==","?"\\ldots\\,":"\\ldots"});A("\\cdots",function(t){var e=t.future().text;return e in w9?"\\@cdots\\,":"\\@cdots"});A("\\dotsb","\\cdots");A("\\dotsm","\\cdots");A("\\dotsi","\\!\\cdots");A("\\dotsx","\\ldots\\,");A("\\DOTSI","\\relax");A("\\DOTSB","\\relax");A("\\DOTSX","\\relax");A("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");A("\\,","\\tmspace+{3mu}{.1667em}");A("\\thinspace","\\,");A("\\>","\\mskip{4mu}");A("\\:","\\tmspace+{4mu}{.2222em}");A("\\medspace","\\:");A("\\;","\\tmspace+{5mu}{.2777em}");A("\\thickspace","\\;");A("\\!","\\tmspace-{3mu}{.1667em}");A("\\negthinspace","\\!");A("\\negmedspace","\\tmspace-{4mu}{.2222em}");A("\\negthickspace","\\tmspace-{5mu}{.277em}");A("\\enspace","\\kern.5em ");A("\\enskip","\\hskip.5em\\relax");A("\\quad","\\hskip1em\\relax");A("\\qquad","\\hskip2em\\relax");A("\\tag","\\@ifstar\\tag@literal\\tag@paren");A("\\tag@paren","\\tag@literal{({#1})}");A("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new xe("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});A("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");A("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");A("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");A("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");A("\\newline","\\\\\\relax");A("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var Qq=_e(qo["Main-Regular"][84][1]-.7*qo["Main-Regular"][65][1]);A("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+Qq+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");A("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+Qq+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");A("\\hspace","\\@ifstar\\@hspacer\\@hspace");A("\\@hspace","\\hskip #1\\relax");A("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");A("\\ordinarycolon",":");A("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");A("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');A("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');A("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');A("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');A("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');A("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');A("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');A("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');A("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');A("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');A("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');A("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');A("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');A("","\\dblcolon");A("","\\eqcolon");A("","\\coloneqq");A("","\\eqqcolon");A("","\\Coloneqq");A("\\ratio","\\vcentcolon");A("\\coloncolon","\\dblcolon");A("\\colonequals","\\coloneqq");A("\\coloncolonequals","\\Coloneqq");A("\\equalscolon","\\eqqcolon");A("\\equalscoloncolon","\\Eqqcolon");A("\\colonminus","\\coloneq");A("\\coloncolonminus","\\Coloneq");A("\\minuscolon","\\eqcolon");A("\\minuscoloncolon","\\Eqcolon");A("\\coloncolonapprox","\\Colonapprox");A("\\coloncolonsim","\\Colonsim");A("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");A("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");A("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");A("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");A("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");A("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");A("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");A("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");A("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");A("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");A("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");A("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");A("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");A("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");A("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");A("\\ngeqq","\\html@mathml{\\@ngeqq}{}");A("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");A("\\nleqq","\\html@mathml{\\@nleqq}{}");A("\\nleqslant","\\html@mathml{\\@nleqslant}{}");A("\\nshortmid","\\html@mathml{\\@nshortmid}{}");A("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");A("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");A("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");A("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");A("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");A("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");A("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");A("\\imath","\\html@mathml{\\@imath}{}");A("\\jmath","\\html@mathml{\\@jmath}{}");A("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");A("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");A("","\\llbracket");A("","\\rrbracket");A("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");A("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");A("","\\lBrace");A("","\\rBrace");A("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");A("","\\minuso");A("\\darr","\\downarrow");A("\\dArr","\\Downarrow");A("\\Darr","\\Downarrow");A("\\lang","\\langle");A("\\rang","\\rangle");A("\\uarr","\\uparrow");A("\\uArr","\\Uparrow");A("\\Uarr","\\Uparrow");A("\\N","\\mathbb{N}");A("\\R","\\mathbb{R}");A("\\Z","\\mathbb{Z}");A("\\alef","\\aleph");A("\\alefsym","\\aleph");A("\\Alpha","\\mathrm{A}");A("\\Beta","\\mathrm{B}");A("\\bull","\\bullet");A("\\Chi","\\mathrm{X}");A("\\clubs","\\clubsuit");A("\\cnums","\\mathbb{C}");A("\\Complex","\\mathbb{C}");A("\\Dagger","\\ddagger");A("\\diamonds","\\diamondsuit");A("\\empty","\\emptyset");A("\\Epsilon","\\mathrm{E}");A("\\Eta","\\mathrm{H}");A("\\exist","\\exists");A("\\harr","\\leftrightarrow");A("\\hArr","\\Leftrightarrow");A("\\Harr","\\Leftrightarrow");A("\\hearts","\\heartsuit");A("\\image","\\Im");A("\\infin","\\infty");A("\\Iota","\\mathrm{I}");A("\\isin","\\in");A("\\Kappa","\\mathrm{K}");A("\\larr","\\leftarrow");A("\\lArr","\\Leftarrow");A("\\Larr","\\Leftarrow");A("\\lrarr","\\leftrightarrow");A("\\lrArr","\\Leftrightarrow");A("\\Lrarr","\\Leftrightarrow");A("\\Mu","\\mathrm{M}");A("\\natnums","\\mathbb{N}");A("\\Nu","\\mathrm{N}");A("\\Omicron","\\mathrm{O}");A("\\plusmn","\\pm");A("\\rarr","\\rightarrow");A("\\rArr","\\Rightarrow");A("\\Rarr","\\Rightarrow");A("\\real","\\Re");A("\\reals","\\mathbb{R}");A("\\Reals","\\mathbb{R}");A("\\Rho","\\mathrm{P}");A("\\sdot","\\cdot");A("\\sect","\\S");A("\\spades","\\spadesuit");A("\\sub","\\subset");A("\\sube","\\subseteq");A("\\supe","\\supseteq");A("\\Tau","\\mathrm{T}");A("\\thetasym","\\vartheta");A("\\weierp","\\wp");A("\\Zeta","\\mathrm{Z}");A("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");A("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");A("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");A("\\bra","\\mathinner{\\langle{#1}|}");A("\\ket","\\mathinner{|{#1}\\rangle}");A("\\braket","\\mathinner{\\langle{#1}\\rangle}");A("\\Bra","\\left\\langle#1\\right|");A("\\Ket","\\left|#1\\right\\rangle");var eV=t=>e=>{var r=e.consumeArg().tokens,n=e.consumeArg().tokens,i=e.consumeArg().tokens,s=e.consumeArg().tokens,o=e.macros.get("|"),a=e.macros.get("\\|");e.macros.beginGroup();var l=u=>f=>{t&&(f.macros.set("|",o),i.length&&f.macros.set("\\|",a));var d=u;if(!u&&i.length){var p=f.future();p.text==="|"&&(f.popToken(),d=!0)}return{tokens:d?i:n,numArgs:0}};e.macros.set("|",l(!1)),i.length&&e.macros.set("\\|",l(!0));var c=e.consumeArg().tokens,h=e.expandTokens([...s,...c,...r]);return e.macros.endGroup(),{tokens:h.reverse(),numArgs:0}};A("\\bra@ket",eV(!1));A("\\bra@set",eV(!0));A("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");A("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");A("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");A("\\angln","{\\angl n}");A("\\blue","\\textcolor{##6495ed}{#1}");A("\\orange","\\textcolor{##ffa500}{#1}");A("\\pink","\\textcolor{##ff00af}{#1}");A("\\red","\\textcolor{##df0030}{#1}");A("\\green","\\textcolor{##28ae7b}{#1}");A("\\gray","\\textcolor{gray}{#1}");A("\\purple","\\textcolor{##9d38bd}{#1}");A("\\blueA","\\textcolor{##ccfaff}{#1}");A("\\blueB","\\textcolor{##80f6ff}{#1}");A("\\blueC","\\textcolor{##63d9ea}{#1}");A("\\blueD","\\textcolor{##11accd}{#1}");A("\\blueE","\\textcolor{##0c7f99}{#1}");A("\\tealA","\\textcolor{##94fff5}{#1}");A("\\tealB","\\textcolor{##26edd5}{#1}");A("\\tealC","\\textcolor{##01d1c1}{#1}");A("\\tealD","\\textcolor{##01a995}{#1}");A("\\tealE","\\textcolor{##208170}{#1}");A("\\greenA","\\textcolor{##b6ffb0}{#1}");A("\\greenB","\\textcolor{##8af281}{#1}");A("\\greenC","\\textcolor{##74cf70}{#1}");A("\\greenD","\\textcolor{##1fab54}{#1}");A("\\greenE","\\textcolor{##0d923f}{#1}");A("\\goldA","\\textcolor{##ffd0a9}{#1}");A("\\goldB","\\textcolor{##ffbb71}{#1}");A("\\goldC","\\textcolor{##ff9c39}{#1}");A("\\goldD","\\textcolor{##e07d10}{#1}");A("\\goldE","\\textcolor{##a75a05}{#1}");A("\\redA","\\textcolor{##fca9a9}{#1}");A("\\redB","\\textcolor{##ff8482}{#1}");A("\\redC","\\textcolor{##f9685d}{#1}");A("\\redD","\\textcolor{##e84d39}{#1}");A("\\redE","\\textcolor{##bc2612}{#1}");A("\\maroonA","\\textcolor{##ffbde0}{#1}");A("\\maroonB","\\textcolor{##ff92c6}{#1}");A("\\maroonC","\\textcolor{##ed5fa6}{#1}");A("\\maroonD","\\textcolor{##ca337c}{#1}");A("\\maroonE","\\textcolor{##9e034e}{#1}");A("\\purpleA","\\textcolor{##ddd7ff}{#1}");A("\\purpleB","\\textcolor{##c6b9fc}{#1}");A("\\purpleC","\\textcolor{##aa87ff}{#1}");A("\\purpleD","\\textcolor{##7854ab}{#1}");A("\\purpleE","\\textcolor{##543b78}{#1}");A("\\mintA","\\textcolor{##f5f9e8}{#1}");A("\\mintB","\\textcolor{##edf2df}{#1}");A("\\mintC","\\textcolor{##e0e5cc}{#1}");A("\\grayA","\\textcolor{##f6f7f7}{#1}");A("\\grayB","\\textcolor{##f0f1f2}{#1}");A("\\grayC","\\textcolor{##e3e5e6}{#1}");A("\\grayD","\\textcolor{##d6d8da}{#1}");A("\\grayE","\\textcolor{##babec2}{#1}");A("\\grayF","\\textcolor{##888d93}{#1}");A("\\grayG","\\textcolor{##626569}{#1}");A("\\grayH","\\textcolor{##3b3e40}{#1}");A("\\grayI","\\textcolor{##21242c}{#1}");A("\\kaBlue","\\textcolor{##314453}{#1}");A("\\kaGreen","\\textcolor{##71B307}{#1}");var tV={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class K4e{constructor(e,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new U4e(G4e,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new GO(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,n,i;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:i,end:n}=this.consumeArg(["]"])}else({tokens:i,start:r,end:n}=this.consumeArg());return this.pushToken(new es("EOF",n.loc)),this.pushTokens(i),new es("",ki.range(r,n))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],n=e&&e.length>0;n||this.consumeSpaces();var i=this.future(),s,o=0,a=0;do{if(s=this.popToken(),r.push(s),s.text==="{")++o;else if(s.text==="}"){if(--o,o===-1)throw new xe("Extra }",s)}else if(s.text==="EOF")throw new xe("Unexpected end of input in a macro argument, expected '"+(e&&n?e[a]:"}")+"'",s);if(e&&n)if((o===0||o===1&&e[a]==="{")&&s.text===e[a]){if(++a,a===e.length){r.splice(-a,a);break}}else a=0}while(o!==0||n);return i.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:i,end:s}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new xe("The length of delimiters doesn't match the number of args!");for(var n=r[0],i=0;i<n.length;i++){var s=this.popToken();if(n[i]!==s.text)throw new xe("Use of the macro doesn't match its definition",s)}}for(var o=[],a=0;a<e;a++)o.push(this.consumeArg(r&&r[a+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new xe("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),n=r.text,i=r.noexpand?null:this._getExpansion(n);if(i==null||e&&i.unexpandable){if(e&&i==null&&n[0]==="\\"&&!this.isDefined(n))throw new xe("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var s=i.tokens,o=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs){s=s.slice();for(var a=s.length-1;a>=0;--a){var l=s[a];if(l.text==="#"){if(a===0)throw new xe("Incomplete placeholder at end of macro body",l);if(l=s[--a],l.text==="#")s.splice(a+1,1);else if(/^[1-9]$/.test(l.text))s.splice(a,2,...o[+l.text-1]);else throw new xe("Not a valid argument number",l)}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new es(e)]):void 0}expandTokens(e){var r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var i=this.stack.pop();i.treatAsRelax&&(i.noexpand=!1,i.treatAsRelax=!1),r.push(i)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(n=>n.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var i=typeof r=="function"?r(this):r;if(typeof i=="string"){var s=0;if(i.indexOf("#")!==-1)for(var o=i.replace(/##/g,"");o.indexOf("#"+(s+1))!==-1;)++s;for(var a=new GO(i,this.settings),l=[],c=a.lex();c.text!=="EOF";)l.push(c),c=a.lex();l.reverse();var h={tokens:l,numArgs:s};return h}return i}isDefined(e){return this.macros.has(e)||Xl.hasOwnProperty(e)||pr.math.hasOwnProperty(e)||pr.text.hasOwnProperty(e)||tV.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:Xl.hasOwnProperty(e)&&!Xl[e].primitive}}var XO=/^[]/,Gy=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),hk={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},JO={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class R4{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new K4e(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new xe("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new es("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var i=this.fetch();if(R4.endOfExpression.indexOf(i.text)!==-1||r&&i.text===r||e&&Xl[i.text]&&Xl[i.text].infix)break;var s=this.parseAtom(r);if(s){if(s.type==="internal")continue}else break;n.push(s)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var r=-1,n,i=0;i<e.length;i++)if(e[i].type==="infix"){if(r!==-1)throw new xe("only one infix operator per group",e[i].token);r=i,n=e[i].replaceWith}if(r!==-1&&n){var s,o,a=e.slice(0,r),l=e.slice(r+1);a.length===1&&a[0].type==="ordgroup"?s=a[0]:s={type:"ordgroup",mode:this.mode,body:a},l.length===1&&l[0].type==="ordgroup"?o=l[0]:o={type:"ordgroup",mode:this.mode,body:l};var c;return n==="\\\\abovefrac"?c=this.callFunction(n,[s,e[r],o],[]):c=this.callFunction(n,[s,o],[]),[c]}else return e}handleSupSubscript(e){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var i;do{var s;i=this.parseGroup(e)}while(((s=i)==null?void 0:s.type)==="internal");if(!i)throw new xe("Expected group after '"+n+"'",r);return i}formatUnsupportedCmd(e){for(var r=[],n=0;n<e.length;n++)r.push({type:"textord",mode:"text",text:e[n]});var i={type:"text",mode:this.mode,body:r},s={type:"color",mode:this.mode,color:this.settings.errorColor,body:[i]};return s}parseAtom(e){var r=this.parseGroup("atom",e);if((r==null?void 0:r.type)==="internal"||this.mode==="text")return r;for(var n,i;;){this.consumeSpaces();var s=this.fetch();if(s.text==="\\limits"||s.text==="\\nolimits"){if(r&&r.type==="op"){var o=s.text==="\\limits";r.limits=o,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=s.text==="\\limits");else throw new xe("Limit controls must follow a math operator",s);this.consume()}else if(s.text==="^"){if(n)throw new xe("Double superscript",s);n=this.handleSupSubscript("superscript")}else if(s.text==="_"){if(i)throw new xe("Double subscript",s);i=this.handleSupSubscript("subscript")}else if(s.text==="'"){if(n)throw new xe("Double superscript",s);var a={type:"textord",mode:this.mode,text:"\\prime"},l=[a];for(this.consume();this.fetch().text==="'";)l.push(a),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:l}}else if(Gy[s.text]){var c=XO.test(s.text),h=[];for(h.push(new es(Gy[s.text])),this.consume();;){var u=this.fetch().text;if(!Gy[u]||XO.test(u)!==c)break;h.unshift(new es(Gy[u])),this.consume()}var f=this.subparse(h);c?i={type:"ordgroup",mode:"math",body:f}:n={type:"ordgroup",mode:"math",body:f}}else break}return n||i?{type:"supsub",mode:this.mode,base:r,sup:n,sub:i}:r}parseFunction(e,r){var n=this.fetch(),i=n.text,s=Xl[i];if(!s)return null;if(this.consume(),r&&r!=="atom"&&!s.allowedInArgument)throw new xe("Got function '"+i+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!s.allowedInText)throw new xe("Can't use function '"+i+"' in text mode",n);if(this.mode==="math"&&s.allowedInMath===!1)throw new xe("Can't use function '"+i+"' in math mode",n);var{args:o,optArgs:a}=this.parseArguments(i,s);return this.callFunction(i,o,a,n,e)}callFunction(e,r,n,i,s){var o={funcName:e,parser:this,token:i,breakOnTokenText:s},a=Xl[e];if(a&&a.handler)return a.handler(o,r,n);throw new xe("No function handler for "+e)}parseArguments(e,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var i=[],s=[],o=0;o<n;o++){var a=r.argTypes&&r.argTypes[o],l=o<r.numOptionalArgs;(r.primitive&&a==null||r.type==="sqrt"&&o===1&&s[0]==null)&&(a="primitive");var c=this.parseGroupOfType("argument to '"+e+"'",a,l);if(l)s.push(c);else if(c!=null)i.push(c);else throw new xe("Null argument, please report this as a bug")}return{args:i,optArgs:s}}parseGroupOfType(e,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var i=this.parseArgumentGroup(n,"text");return i!=null?{type:"styling",mode:i.mode,body:[i],style:"text"}:null}case"raw":{var s=this.parseStringGroup("raw",n);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(n)throw new xe("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new xe("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new xe("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var i="",s;(s=this.fetch()).text!=="EOF";)i+=s.text,this.consume();return this.consume(),n.text=i,n}parseRegexGroup(e,r){for(var n=this.fetch(),i=n,s="",o;(o=this.fetch()).text!=="EOF"&&e.test(s+o.text);)i=o,s+=i.text,this.consume();if(s==="")throw new xe("Invalid "+r+": '"+n.text+"'",n);return n.range(i,s)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new xe("Invalid color: '"+r.text+"'",r);var i=n[0];return/^[0-9a-f]{6}$/i.test(i)&&(i="#"+i),{type:"color-token",mode:this.mode,color:i}}parseSizeGroup(e){var r,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",n=!0);var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!i)throw new xe("Invalid size: '"+r.text+"'",r);var s={number:+(i[1]+i[2]),unit:i[3]};if(!uq(s))throw new xe("Invalid unit: '"+s.unit+"'",r);return{type:"size",mode:this.mode,value:s,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){var n=this.gullet.scanArgument(e);if(n==null)return null;var i=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:n.loc,body:s};return r&&this.switchMode(i),o}parseGroup(e,r){var n=this.fetch(),i=n.text,s;if(i==="{"||i==="\\begingroup"){this.consume();var o=i==="{"?"}":"\\endgroup";this.gullet.beginGroup();var a=this.parseExpression(!1,o),l=this.fetch();this.expect(o),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:ki.range(n,l),body:a,semisimple:i==="\\begingroup"||void 0}}else if(s=this.parseFunction(r,e)||this.parseSymbol(),s==null&&i[0]==="\\"&&!tV.hasOwnProperty(i)){if(this.settings.throwOnError)throw new xe("Undefined control sequence: "+i,n);s=this.formatUnsupportedCmd(i),this.consume()}return s}formLigatures(e){for(var r=e.length-1,n=0;n<r;++n){var i=e[n],s=i.text;s==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:ki.range(i,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:ki.range(i,e[n+1]),text:"--"}),r-=1)),(s==="'"||s==="`")&&e[n+1].text===s&&(e.splice(n,2,{type:"textord",mode:"text",loc:ki.range(i,e[n+1]),text:s+s}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),i=n.charAt(0)==="*";if(i&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new xe(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:i}}JO.hasOwnProperty(r[0])&&!pr[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=JO[r[0]]+r.slice(1));var s=W4e.exec(r);s&&(r=r.substring(0,s.index),r==="i"?r="":r==="j"&&(r=""));var o;if(pr[this.mode][r]){this.settings.strict&&this.mode==="math"&&UC.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var a=pr[this.mode][r].group,l=ki.range(e),c;if(Pve.hasOwnProperty(a)){var h=a;c={type:"atom",mode:this.mode,family:h,loc:l,text:r}}else c={type:a,mode:this.mode,loc:l,text:r};o=c}else if(r.charCodeAt(0)>=128)this.settings.strict&&(cq(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:ki.range(e),text:r};else return null;if(this.consume(),s)for(var u=0;u<s[0].length;u++){var f=s[0][u];if(!hk[f])throw new xe("Unknown accent ' "+f+"'",e);var d=hk[f][this.mode]||hk[f].text;if(!d)throw new xe("Accent "+f+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:ki.range(e),label:d,isStretchy:!1,isShifty:!0,base:o}}return o}}R4.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var k9=function(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new R4(e,r);delete n.gullet.macros.current["\\df@tag"];var i=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new xe("\\tag works only in display equations");i=[{type:"tag",mode:"text",body:i,tag:n.subparse([new es("\\df@tag")])}]}return i},C9=function(e,r,n){r.textContent="";var i=P4(e,n).toNode();r.appendChild(i)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),C9=function(){throw new xe("KaTeX doesn't work in quirks mode.")});var rV=function(e,r){var n=P4(e,r).toMarkup();return n},nV=function(e,r){var n=new i9(r);return k9(e,n)},iV=function(e,r,n){if(n.throwOnError||!(e instanceof xe))throw e;var i=Z.makeSpan(["katex-error"],[new As(r)]);return i.setAttribute("title",e.toString()),i.setAttribute("style","color:"+n.errorColor),i},P4=function(e,r){var n=new i9(r);try{var i=k9(e,n);return s4e(i,e,n)}catch(s){return iV(s,e,n)}},sV=function(e,r){var n=new i9(r);try{var i=k9(e,n);return o4e(i,e,n)}catch(s){return iV(s,e,n)}},oV="0.16.25",aV={Span:I1,Anchor:a9,SymbolNode:As,SvgNode:sl,PathNode:gc,LineNode:jC},S9={version:oV,render:C9,renderToString:rV,ParseError:xe,SETTINGS_SCHEMA:gm,__parse:nV,__renderToDomTree:P4,__renderToHTMLTree:sV,__setFontMetrics:hq,__defineSymbol:v,__defineFunction:Re,__defineMacro:A,__domTree:aV};const Y4e=Object.freeze(Object.defineProperty({__proto__:null,ParseError:xe,SETTINGS_SCHEMA:gm,__defineFunction:Re,__defineMacro:A,__defineSymbol:v,__domTree:aV,__parse:nV,__renderToDomTree:P4,__renderToHTMLTree:sV,__setFontMetrics:hq,default:S9,get render(){return C9},renderToString:rV,version:oV},Symbol.toStringTag,{value:"Module"}));var Yg,Xg,Kf,Yf,Jg,Xf,Jf,Zf,Qf,Zg,dv,lV;class N4{constructor(e){we(this,dv);we(this,Yg);we(this,Xg);we(this,Kf);we(this,Yf);we(this,Jg);we(this,Xf);we(this,Jf);we(this,Zf);we(this,Qf);we(this,Zg);ne(this,Xf,!1),this.onShow=()=>{},this.onHide=()=>{},ne(this,Zg,(r,n)=>{const{state:i,composing:s}=r,{selection:o,doc:a}=i,{ranges:l}=o,c=Math.min(...l.map(d=>d.$from.pos)),h=Math.max(...l.map(d=>d.$to.pos)),u=n&&n.doc.eq(a)&&n.selection.eq(o);if(V(this,Xf)||((V(this,Jg)??r.dom.parentElement??document.body).appendChild(this.element),ne(this,Xf,!0)),s||u)return;if(!V(this,Xg).call(this,r,n)){this.hide();return}oo({getBoundingClientRect:()=>Nv(r,c,h)},this.element,{placement:V(this,Yf).placement??"top",middleware:[ox(),fc(V(this,Jf)),AE(V(this,Zf)),...V(this,Kf)]}).then(({x:d,y:p})=>{Object.assign(this.element.style,{left:`${d}px`,top:`${p}px`})}).catch(console.error),this.show()}),this.update=(r,n)=>{V(this,Qf).call(this,r,n)},this.destroy=()=>{V(this,Qf).cancel()},this.show=r=>{this.element.dataset.show="true",r&&oo(r,this.element,{placement:"top",middleware:[ox(),fc(V(this,Jf)),AE(V(this,Zf)),...V(this,Kf)],...V(this,Yf)}).then(({x:n,y:i})=>{Object.assign(this.element.style,{left:`${n}px`,top:`${i}px`})}).catch(console.error),this.onShow()},this.hide=()=>{this.element.dataset.show!=="false"&&(this.element.dataset.show="false",this.onHide())},this.element=e.content,ne(this,Yg,e.debounce??200),ne(this,Xg,e.shouldShow??J1(this,dv,lV)),ne(this,Jf,e.offset),ne(this,Zf,e.shift),ne(this,Kf,e.middleware??[]),ne(this,Yf,e.floatingUIOptions??{}),ne(this,Jg,e.root),this.element.dataset.show="false",ne(this,Qf,wv(V(this,Zg),V(this,Yg)))}}Yg=new WeakMap,Xg=new WeakMap,Kf=new WeakMap,Yf=new WeakMap,Jg=new WeakMap,Xf=new WeakMap,Jf=new WeakMap,Zf=new WeakMap,Qf=new WeakMap,Zg=new WeakMap,dv=new WeakSet,lV=function(e){const{doc:r,selection:n}=e.state,{empty:i,from:s,to:o}=n,a=!r.textBetween(s,o).length&&e.state.selection instanceof Ge,l=this.element.contains(document.activeElement),c=!e.hasFocus()&&!l,h=!e.editable;return!(c||i||a||h)};function F4(t){const e=er({},`${t}_TOOLTIP_SPEC`),r=Gr(i=>{const s=i.get(e.key);return new xr({key:new vr(`${t}_TOOLTIP`),...s})}),n=[e,r];return n.key=e.key,n.pluginKey=r.key,e.meta={package:"@milkdown/plugin-tooltip",displayName:`Ctx<tooltipSpec>|${t}`},r.meta={package:"@milkdown/plugin-tooltip",displayName:`Prose<tooltip>|${t}`},n}function X4e(){return{enter:{mathFlow:t,mathFlowFenceMeta:e,mathText:s},exit:{mathFlow:i,mathFlowFence:n,mathFlowFenceMeta:r,mathFlowValue:a,mathText:o,mathTextData:a}};function t(l){const c={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[c]}},l)}function e(){this.buffer()}function r(){const l=this.resume(),c=this.stack[this.stack.length-1];c.type,c.meta=l}function n(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function i(l){const c=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),h=this.stack[this.stack.length-1];h.type,this.exit(l),h.value=c;const u=h.data.hChildren[0];u.type,u.tagName,u.children.push({type:"text",value:c}),this.data.mathFlowInside=void 0}function s(l){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},l),this.buffer()}function o(l){const c=this.resume(),h=this.stack[this.stack.length-1];h.type,this.exit(l),h.value=c,h.data.hChildren.push({type:"text",value:c})}function a(l){this.config.enter.data.call(this,l),this.config.exit.data.call(this,l)}}function J4e(t){let e=(t||{}).singleDollarTextMath;return e==null&&(e=!0),n.peek=i,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:`
`,inConstruct:"mathFlowMeta"},{character:"$",after:e?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:r,inlineMath:n}};function r(s,o,a,l){const c=s.value||"",h=a.createTracker(l),u="$".repeat(Math.max(sN(c,"$")+1,2)),f=a.enter("mathFlow");let d=h.move(u);if(s.meta){const p=a.enter("mathFlowMeta");d+=h.move(a.safe(s.meta,{after:`
`,before:d,encode:["$"],...h.current()})),p()}return d+=h.move(`
`),c&&(d+=h.move(c+`
`)),d+=h.move(u),f(),d}function n(s,o,a){let l=s.value||"",c=1;for(e||c++;new RegExp("(^|[^$])"+"\\$".repeat(c)+"([^$]|$)").test(l);)c++;const h="$".repeat(c);/[^ \r\n]/.test(l)&&(/^[ \r\n]/.test(l)&&/[ \r\n]$/.test(l)||/^\$|\$$/.test(l))&&(l=" "+l+" ");let u=-1;for(;++u<a.unsafe.length;){const f=a.unsafe[u];if(!f.atBreak)continue;const d=a.compilePattern(f);let p;for(;p=d.exec(l);){let m=p.index;l.codePointAt(m)===10&&l.codePointAt(m-1)===13&&m--,l=l.slice(0,m)+" "+l.slice(p.index+1)}}return h+l+h}function i(){return"$"}}const Z4e={tokenize:Q4e,concrete:!0,name:"mathFlow"},ZO={tokenize:ewe,partial:!0};function Q4e(t,e,r){const n=this,i=n.events[n.events.length-1],s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0;let o=0;return a;function a(b){return t.enter("mathFlow"),t.enter("mathFlowFence"),t.enter("mathFlowFenceSequence"),l(b)}function l(b){return b===36?(t.consume(b),o++,l):o<2?r(b):(t.exit("mathFlowFenceSequence"),Lt(t,c,"whitespace")(b))}function c(b){return b===null||Je(b)?u(b):(t.enter("mathFlowFenceMeta"),t.enter("chunkString",{contentType:"string"}),h(b))}function h(b){return b===null||Je(b)?(t.exit("chunkString"),t.exit("mathFlowFenceMeta"),u(b)):b===36?r(b):(t.consume(b),h)}function u(b){return t.exit("mathFlowFence"),n.interrupt?e(b):t.attempt(ZO,f,g)(b)}function f(b){return t.attempt({tokenize:y,partial:!0},g,d)(b)}function d(b){return(s?Lt(t,p,"linePrefix",s+1):p)(b)}function p(b){return b===null?g(b):Je(b)?t.attempt(ZO,f,g)(b):(t.enter("mathFlowValue"),m(b))}function m(b){return b===null||Je(b)?(t.exit("mathFlowValue"),p(b)):(t.consume(b),m)}function g(b){return t.exit("mathFlow"),e(b)}function y(b,x,T){let S=0;return Lt(b,w,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function w(N){return b.enter("mathFlowFence"),b.enter("mathFlowFenceSequence"),_(N)}function _(N){return N===36?(S++,b.consume(N),_):S<o?T(N):(b.exit("mathFlowFenceSequence"),Lt(b,I,"whitespace")(N))}function I(N){return N===null||Je(N)?(b.exit("mathFlowFence"),x(N)):T(N)}}}function ewe(t,e,r){const n=this;return i;function i(o){return o===null?e(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return n.parser.lazy[n.now().line]?r(o):e(o)}}function twe(t){let r=(t||{}).singleDollarTextMath;return r==null&&(r=!0),{tokenize:n,resolve:rwe,previous:nwe,name:"mathText"};function n(i,s,o){let a=0,l,c;return h;function h(m){return i.enter("mathText"),i.enter("mathTextSequence"),u(m)}function u(m){return m===36?(i.consume(m),a++,u):a<2&&!r?o(m):(i.exit("mathTextSequence"),f(m))}function f(m){return m===null?o(m):m===36?(c=i.enter("mathTextSequence"),l=0,p(m)):m===32?(i.enter("space"),i.consume(m),i.exit("space"),f):Je(m)?(i.enter("lineEnding"),i.consume(m),i.exit("lineEnding"),f):(i.enter("mathTextData"),d(m))}function d(m){return m===null||m===32||m===36||Je(m)?(i.exit("mathTextData"),f(m)):(i.consume(m),d)}function p(m){return m===36?(i.consume(m),l++,p):l===a?(i.exit("mathTextSequence"),i.exit("mathText"),s(m)):(c.type="mathTextData",d(m))}}}function rwe(t){let e=t.length-4,r=3,n,i;if((t[r][1].type==="lineEnding"||t[r][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(n=r;++n<e;)if(t[n][1].type==="mathTextData"){t[e][1].type="mathTextPadding",t[r][1].type="mathTextPadding",r+=2,e-=2;break}}for(n=r-1,e++;++n<=e;)i===void 0?n!==e&&t[n][1].type!=="lineEnding"&&(i=n):(n===e||t[n][1].type==="lineEnding")&&(t[i][1].type="mathTextData",n!==i+2&&(t[i][1].end=t[n-1][1].end,t.splice(i+2,n-i-2),e-=n-i-2,n=i+2),i=void 0);return t}function nwe(t){return t!==36||this.events[this.events.length-1][1].type==="characterEscape"}function iwe(t){return{flow:{36:Z4e},text:{36:twe(t)}}}const swe={};function owe(t){const e=this,r=t||swe,n=e.data(),i=n.micromarkExtensions||(n.micromarkExtensions=[]),s=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),o=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);i.push(iwe(r)),s.push(X4e()),o.push(J4e(r))}var awe=Object.defineProperty,QO=Object.getOwnPropertySymbols,lwe=Object.prototype.hasOwnProperty,cwe=Object.prototype.propertyIsEnumerable,eD=(t,e,r)=>e in t?awe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hwe=(t,e)=>{for(var r in e||(e={}))lwe.call(e,r)&&eD(t,r,e[r]);if(QO)for(var r of QO(e))cwe.call(e,r)&&eD(t,r,e[r]);return t};function Mu(t,e){return Object.assign(t,{meta:hwe({package:"@milkdown/components"},e)}),t}var uwe=Object.defineProperty,tD=Object.getOwnPropertySymbols,fwe=Object.prototype.hasOwnProperty,dwe=Object.prototype.propertyIsEnumerable,rD=(t,e,r)=>e in t?uwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,T9=(t,e)=>{for(var r in e||(e={}))fwe.call(e,r)&&rD(t,r,e[r]);if(tD)for(var r of tD(e))dwe.call(e,r)&&rD(t,r,e[r]);return t};const pwe={mode:"preview"},ll=er(T9({},pwe),"linkTooltipStateCtx");Mu(ll,{displayName:"State<link-tooltip>",group:"LinkTooltip"});const mwe={addLink:()=>{},editLink:()=>{},removeLink:()=>{}},Md=er(T9({},mwe),"linkTooltipAPICtx");Mu(ll,{displayName:"API<link-tooltip>",group:"LinkTooltip"});const gwe={linkIcon:"",editButton:"",removeButton:"",confirmButton:"Confirm ",onCopyLink:()=>{},inputPlaceholder:"Paste link..."},Ad=er(T9({},gwe),"linkTooltipConfigCtx");Mu(ll,{displayName:"Config<link-tooltip>",group:"LinkTooltip"});const cV=bt("ToggleLink",t=>()=>e=>{const{doc:r,selection:n}=e,i=Xs.type(t);return r.rangeHasMark(n.from,n.to,i)?(t.get(Md.key).removeLink(n.from,n.to),!0):(t.get(Md.key).addLink(n.from,n.to),!0)}),R1=F4("LINK_PREVIEW");Mu(R1[0],{displayName:"PreviewTooltipSpec<link-tooltip>",group:"LinkTooltip"});Mu(R1[1],{displayName:"PreviewTooltipPlugin<link-tooltip>",group:"LinkTooltip"});const $4=F4("LINK_EDIT");Mu($4[0],{displayName:"EditTooltipSpec<link-tooltip>",group:"LinkTooltip"});Mu($4[1],{displayName:"EditTooltipPlugin<link-tooltip>",group:"LinkTooltip"});function bm({icon:t,class:e,onClick:r}){return te("span",{class:Cn("milkdown-icon",e),onPointerdown:r,ref:n=>{n&&t&&(n.innerHTML=cn.sanitize(t.trim()))}})}bm.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const ywe=Sn({props:{config:{type:Object,required:!0},src:{type:Object,required:!0},onConfirm:{type:Function,required:!0},onCancel:{type:Function,required:!0}},setup({config:t,src:e,onConfirm:r,onCancel:n}){const i=ze(e);Vh(e,a=>{i.value=a});const s=()=>{r(i.value)},o=a=>{a.stopPropagation(),a.key==="Enter"&&(a.preventDefault(),s()),a.key==="Escape"&&(a.preventDefault(),n())};return()=>te("div",{class:"link-edit"},te("input",{class:"input-area",placeholder:t.value.inputPlaceholder,onKeydown:o,onInput:a=>{i.value=a.target.value},value:i.value}),i.value?te(bm,{class:"button confirm",icon:t.value.confirmButton,onClick:s}):null)}});var bwe=Object.defineProperty,xwe=Object.defineProperties,vwe=Object.getOwnPropertyDescriptors,nD=Object.getOwnPropertySymbols,wwe=Object.prototype.hasOwnProperty,kwe=Object.prototype.propertyIsEnumerable,hV=t=>{throw TypeError(t)},iD=(t,e,r)=>e in t?bwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ky=(t,e)=>{for(var r in e||(e={}))wwe.call(e,r)&&iD(t,r,e[r]);if(nD)for(var r of nD(e))kwe.call(e,r)&&iD(t,r,e[r]);return t},sD=(t,e)=>xwe(t,vwe(e)),uV=(t,e,r)=>e.has(t)||hV("Cannot "+r),Ar=(t,e,r)=>(uV(t,e,"read from private field"),r?r.call(t):e.get(t)),ga=(t,e,r)=>e.has(t)?hV("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Wc=(t,e,r,n)=>(uV(t,e,"write to private field"),e.set(t,r),r),fp,_l,Ml,J2,dp,Z2,Qc,ZC,Q2;const oD={from:-1,to:-1,mark:null};class Cwe{constructor(e,r){this.ctx=e,ga(this,fp),ga(this,_l),ga(this,Ml,Ky({},oD)),ga(this,J2),ga(this,dp),ga(this,Z2,ze("")),ga(this,Qc,()=>{Ar(this,_l).hide(),this.ctx.update(ll.key,s=>sD(Ky({},s),{mode:"preview"})),Wc(this,Ml,Ky({},oD))}),ga(this,ZC,s=>{const o=this.ctx.get(fr),{from:a,to:l,mark:c}=Ar(this,Ml),h=Xs.type(this.ctx),u=cn.sanitize(s);if(c&&c.attrs.href===u){Ar(this,Qc).call(this);return}const f=o.state.tr;c&&f.removeMark(a,l,c),f.addMark(a,l,h.create({href:u})),o.dispatch(f),Ar(this,Qc).call(this)}),ga(this,Q2,(s,o,a)=>{const l=this.ctx.get(Ad.key);Ar(this,dp).value=l,Ar(this,Z2).value=s,this.ctx.update(ll.key,h=>sD(Ky({},h),{mode:"edit"}));const c=this.ctx.get(fr);c.dispatch(c.state.tr.setSelection(Ge.create(c.state.doc,o,a))),Ar(this,_l).show({getBoundingClientRect:()=>Nv(c,o,a)}),requestAnimationFrame(()=>{var h;(h=Ar(this,fp).querySelector("input"))==null||h.focus()})}),this.update=s=>{const{state:o}=s,{selection:a}=o;if(!(a instanceof Ge))return;const{from:l,to:c}=a;l===Ar(this,Ml).from&&c===Ar(this,Ml).to||Ar(this,Qc).call(this)},this.destroy=()=>{Ar(this,J2).unmount(),Ar(this,_l).destroy(),Ar(this,fp).remove()},this.addLink=(s,o)=>{Wc(this,Ml,{from:s,to:o,mark:null}),Ar(this,Q2).call(this,"",s,o)},this.editLink=(s,o,a)=>{Wc(this,Ml,{from:o,to:a,mark:s}),Ar(this,Q2).call(this,s.attrs.href,o,a)},this.removeLink=(s,o)=>{const a=this.ctx.get(fr),l=a.state.tr;l.removeMark(s,o,Xs.type(this.ctx)),a.dispatch(l),Ar(this,Qc).call(this)},Wc(this,dp,ze(this.ctx.get(Ad.key)));const n=document.createElement("div");n.className="milkdown-link-edit";const i=po(ywe,{config:Ar(this,dp),src:Ar(this,Z2),onConfirm:Ar(this,ZC),onCancel:Ar(this,Qc)});i.mount(n),Wc(this,J2,i),Wc(this,fp,n),Wc(this,_l,new N4({content:n,debounce:0,shouldShow:()=>!1})),Ar(this,_l).onHide=()=>{requestAnimationFrame(()=>{r.dom.focus({preventScroll:!0})})},Ar(this,_l).update(r)}}fp=new WeakMap;_l=new WeakMap;Ml=new WeakMap;J2=new WeakMap;dp=new WeakMap;Z2=new WeakMap;Qc=new WeakMap;ZC=new WeakMap;Q2=new WeakMap;var Swe=Object.defineProperty,Twe=Object.defineProperties,_we=Object.getOwnPropertyDescriptors,aD=Object.getOwnPropertySymbols,Mwe=Object.prototype.hasOwnProperty,Awe=Object.prototype.propertyIsEnumerable,lD=(t,e,r)=>e in t?Swe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ewe=(t,e)=>{for(var r in e||(e={}))Mwe.call(e,r)&&lD(t,r,e[r]);if(aD)for(var r of aD(e))Awe.call(e,r)&&lD(t,r,e[r]);return t},Lwe=(t,e)=>Twe(t,_we(e));function Owe(t){let e;t.update(Md.key,r=>Lwe(Ewe({},r),{addLink:(n,i)=>{e==null||e.addLink(n,i)},editLink:(n,i,s)=>{e==null||e.editLink(n,i,s)},removeLink:(n,i)=>{e==null||e.removeLink(n,i)}})),t.set($4.key,{view:r=>(e=new Cwe(t,r),e)})}function Dwe(t,e,r,n,i){let s={start:-1,end:-1};return r.nodesBetween(n,i,(o,a)=>{if(s.start>-1)return!1;s.start===-1&&t.isInSet(o.marks)&&e===o&&(s={start:a,end:a+Math.max(o.textContent.length,1)})}),s}function Iwe(t,e,r){const n=e.posAtCoords({left:r.clientX,top:r.clientY});if(!n)return;const{pos:i}=n,s=e.state.doc.nodeAt(i);if(!s)return;const o=s.marks.find(l=>l.type===Xs.mark.type(t));if(!(!o||!R1.pluginKey()))return{show:!0,pos:i,node:s,mark:o}}const Bwe=Sn({props:{config:{type:Object,required:!0},src:{type:Object,required:!0},onEdit:{type:Object,required:!0},onRemove:{type:Object,required:!0}},setup({config:t,src:e,onEdit:r,onRemove:n}){const i=a=>{a.preventDefault(),a.stopPropagation(),r.value()},s=a=>{a.preventDefault(),a.stopPropagation(),n.value()},o=a=>{a.preventDefault();const l=e.value;navigator.clipboard&&l&&navigator.clipboard.writeText(l).then(()=>{t.value.onCopyLink(l)}).catch(c=>console.error(c))};return()=>te("div",{class:"link-preview"},te(bm,{class:"button link-icon",icon:t.value.linkIcon,onClick:o}),te("a",{href:e.value,target:"_blank",class:"link-display"},e.value),te(bm,{class:"button link-edit-button",icon:t.value.editButton,onClick:i}),te(bm,{class:"button link-remove-button",icon:t.value.removeButton,onClick:s}))}});var fV=t=>{throw TypeError(t)},dV=(t,e,r)=>e.has(t)||fV("Cannot "+r),Nt=(t,e,r)=>(dV(t,e,"read from private field"),r?r.call(t):e.get(t)),zi=(t,e,r)=>e.has(t)?fV("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),jc=(t,e,r,n)=>(dV(t,e,"write to private field"),e.set(t,r),r),eh,Ps,pp,mp,eb,tb,rb,gp,yp,nb,ib,sb,bp;class Rwe{constructor(e,r){this.ctx=e,zi(this,eh),zi(this,Ps),zi(this,pp,this.ctx.use(ll.key)),zi(this,mp),zi(this,eb,ze("")),zi(this,tb,ze(()=>{})),zi(this,rb,ze(()=>{})),zi(this,gp),zi(this,yp,!1),zi(this,nb,({mode:n})=>{n==="edit"&&Nt(this,bp).call(this)}),zi(this,ib,()=>{jc(this,yp,!0)}),zi(this,sb,()=>{jc(this,yp,!1)}),zi(this,bp,()=>{Nt(this,Ps).hide(),Nt(this,Ps).element.removeEventListener("mouseenter",Nt(this,ib)),Nt(this,Ps).element.removeEventListener("mouseleave",Nt(this,sb))}),this.show=(n,i,s,o)=>{Nt(this,mp).value=this.ctx.get(Ad.key),Nt(this,eb).value=n.attrs.href,Nt(this,tb).value=()=>{this.ctx.get(Md.key).editLink(n,i,s)},Nt(this,rb).value=()=>{this.ctx.get(Md.key).removeLink(i,s),Nt(this,bp).call(this)},Nt(this,Ps).show({getBoundingClientRect:()=>o}),Nt(this,Ps).element.addEventListener("mouseenter",Nt(this,ib)),Nt(this,Ps).element.addEventListener("mouseleave",Nt(this,sb))},this.hide=()=>{Nt(this,yp)||Nt(this,bp).call(this)},this.update=()=>{},this.destroy=()=>{Nt(this,gp).unmount(),Nt(this,pp).off(Nt(this,nb)),Nt(this,Ps).destroy(),Nt(this,eh).remove()},jc(this,mp,ze(this.ctx.get(Ad.key))),jc(this,gp,po(Bwe,{config:Nt(this,mp),src:Nt(this,eb),onEdit:Nt(this,tb),onRemove:Nt(this,rb)})),jc(this,eh,document.createElement("div")),Nt(this,eh).className="milkdown-link-preview",Nt(this,gp).mount(Nt(this,eh)),jc(this,Ps,new N4({debounce:0,content:Nt(this,eh),shouldShow:()=>!1})),Nt(this,Ps).update(r),jc(this,pp,e.use(ll.key)),Nt(this,pp).on(Nt(this,nb))}}eh=new WeakMap;Ps=new WeakMap;pp=new WeakMap;mp=new WeakMap;eb=new WeakMap;tb=new WeakMap;rb=new WeakMap;gp=new WeakMap;yp=new WeakMap;nb=new WeakMap;ib=new WeakMap;sb=new WeakMap;bp=new WeakMap;function Pwe(t){let e;const n=xv((s,o)=>{if(!e||!s.hasFocus()||t.get(ll.key).mode==="edit")return;const l=Iwe(t,s,o);if(l){const c=s.state.doc.resolve(l.pos),h=Dwe(l.mark,l.node,s.state.doc,c.before(),c.after()),u=h.start,f=h.end;e.show(l.mark,u,f,Nv(s,u,f));return}e.hide()},50),i=()=>{setTimeout(()=>{e==null||e.hide()},50)};t.set(R1.key,{props:{handleDOMEvents:{mousemove:n,mouseleave:i}},view:s=>(e=new Rwe(t,s),e)})}function Nwe(t){Pwe(t),Owe(t)}const Fwe=[ll,Md,Ad,R1,$4,cV].flat();var $we=Object.defineProperty,cD=Object.getOwnPropertySymbols,zwe=Object.prototype.hasOwnProperty,Hwe=Object.prototype.propertyIsEnumerable,hD=(t,e,r)=>e in t?$we(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qwe=(t,e)=>{for(var r in e||(e={}))zwe.call(e,r)&&hD(t,r,e[r]);if(cD)for(var r of cD(e))Hwe.call(e,r)&&hD(t,r,e[r]);return t};function pV(t,e){return Object.assign(t,{meta:qwe({package:"@milkdown/components"},e)}),t}const Vwe={renderLabel:({label:t,listType:e,checked:r})=>r==null?e==="bullet"?"":t:r?"":""},z4=er(Vwe,"listItemBlockConfigCtx");pV(z4,{displayName:"Config<list-item-block>",group:"ListItemBlock"});function mV({icon:t,class:e,onClick:r}){return te("span",{class:Cn("milkdown-icon",e),onPointerdown:r,ref:n=>{n&&t&&(n.innerHTML=cn.sanitize(t.trim()))}})}mV.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const Wwe=Sn({props:{label:{type:Object,required:!0},checked:{type:Object,required:!0},listType:{type:Object,required:!0},config:{type:Object,required:!0},readonly:{type:Object,required:!0},selected:{type:Object,required:!0},setAttr:{type:Function,required:!0},onMount:{type:Function,required:!0}},setup({label:t,checked:e,listType:r,config:n,readonly:i,setAttr:s,onMount:o,selected:a}){const l=f=>{f!=null&&f instanceof Element&&o(f)},c=f=>{f.stopPropagation(),f.preventDefault(),e.value!=null&&s("checked",!e.value)},h=wd(()=>n.renderLabel({label:t.value,listType:r.value,checked:e.value,readonly:i.value})),u=wd(()=>e.value==null?r.value==="bullet"?"bullet":"ordered":e.value?"checked":"unchecked");return()=>te("li",{class:Cn("list-item",a.value&&"ProseMirror-selectednode")},te("div",{class:"label-wrapper",onPointerdown:c,contenteditable:!1},te(mV,{class:Cn("label",i.value&&"readonly",u.value),icon:h.value})),te("div",{class:"children",ref:l}))}}),gV=f1(fo.node,t=>(e,r,n)=>{const i=document.createElement("div");i.className="milkdown-list-item-block";const s=document.createElement("div");s.setAttribute("data-content-dom","true"),s.classList.add("content-dom");const o=ze(e.attrs.label),a=ze(e.attrs.checked),l=ze(e.attrs.listType),c=ze(!r.editable),h=t.get(z4.key),u=ze(!1),f=(x,T)=>{if(!r.editable)return;const S=n();S!=null&&(r.hasFocus()||r.focus(),r.dispatch(r.state.tr.setNodeAttribute(S,x,T)))},d=Gd(()=>{u.value?i.classList.add("selected"):i.classList.remove("selected")});let p=0;const g=po(Wwe,{label:o,checked:a,listType:l,readonly:c,config:h,selected:u,setAttr:f,onMount:x=>{const{anchor:T,head:S}=r.state.selection;x.appendChild(s);const w=r.state.doc.resolve(T),_=r.state.doc.resolve(S);p=requestAnimationFrame(()=>{if(cancelAnimationFrame(p),!w.doc.eq(r.state.doc))return;const I=new Ge(w,_);r.dispatch(r.state.tr.setSelection(I))})}});g.mount(i);const y=x=>{l.value=x.attrs.listType,o.value=x.attrs.label,a.value=x.attrs.checked,c.value=!r.editable};y(e);let b=e;return{dom:i,contentDOM:s,update:x=>x.type!==e.type?!1:(x.sameMarkup(b)&&x.content.eq(b.content)||(b=x,y(x)),!0),ignoreMutation:x=>!i||!s?!0:x.type==="selection"?!1:s===x.target&&x.type==="attributes"?!0:!s.contains(x.target),selectNode:()=>{u.value=!0},deselectNode:()=>{u.value=!1},destroy:()=>{d(),g.unmount(),i.remove(),s.remove()}}});pV(gV,{displayName:"NodeView<list-item-block>",group:"ListItemBlock"});const jwe=[z4,gV];var Uwe=Object.defineProperty,uD=Object.getOwnPropertySymbols,Gwe=Object.prototype.hasOwnProperty,Kwe=Object.prototype.propertyIsEnumerable,fD=(t,e,r)=>e in t?Uwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ywe=(t,e)=>{for(var r in e||(e={}))Gwe.call(e,r)&&fD(t,r,e[r]);if(uD)for(var r of uD(e))Kwe.call(e,r)&&fD(t,r,e[r]);return t};function yV(t,e){return Object.assign(t,{meta:Ywe({package:"@milkdown/components"},e)}),t}var Xwe=Object.defineProperty,dD=Object.getOwnPropertySymbols,Jwe=Object.prototype.hasOwnProperty,Zwe=Object.prototype.propertyIsEnumerable,pD=(t,e,r)=>e in t?Xwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qwe=(t,e)=>{for(var r in e||(e={}))Jwe.call(e,r)&&pD(t,r,e[r]);if(dD)for(var r of dD(e))Zwe.call(e,r)&&pD(t,r,e[r]);return t};const e5e={renderButton:t=>{switch(t){case"add_row":return"+";case"add_col":return"+";case"delete_row":return"-";case"delete_col":return"-";case"align_col_left":return"left";case"align_col_center":return"center";case"align_col_right":return"right";case"col_drag_handle":return"=";case"row_drag_handle":return"="}}},H4=er(Qwe({},e5e),"tableBlockConfigCtx");yV(H4,{displayName:"Config<table-block>",group:"TableBlock"});function _o({icon:t,class:e,onClick:r}){return te("span",{class:Cn("milkdown-icon",e),onPointerdown:r,ref:n=>{n&&t&&(n.innerHTML=cn.sanitize(t.trim()))}})}_o.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};function bV(t){const{dragPreviewRef:e,tableWrapperRef:r,contentWrapperRef:n,yLineHandleRef:i,xLineHandleRef:s,colHandleRef:o,rowHandleRef:a}=t,l=e.value;if(!l)return;const c=r.value;if(!c)return;const h=n.value;if(!h)return;const u=h.querySelector("tbody");if(!u)return;const f=l.querySelector("tbody");if(!f)return;const d=i.value;if(!d)return;const p=s.value;if(!p)return;const m=o.value;if(!m)return;const g=a.value;return g?{preview:l,wrapper:c,content:h,contentRoot:u,previewRoot:f,yHandle:d,xHandle:p,colHandle:m,rowHandle:g}:void 0}function xV(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function vV(t,e,r,n,i){const{width:s,height:o}=n.querySelector("tbody").getBoundingClientRect();if(t==="y"){const l=n.querySelectorAll("tr")[i];if(!l)return;r.appendChild(l.cloneNode(!0));const c=l.getBoundingClientRect().height;Object.assign(e.style,{width:`${s}px`,height:`${c}px`}),e.dataset.show="true";return}if(t==="x"){const a=n.querySelectorAll("tr");let l;Array.from(a).forEach(c=>{const h=c.children[i];if(!h)return;l===void 0&&(l=h.getBoundingClientRect().width);const u=h.parentElement.cloneNode(!1),f=h.cloneNode(!0);u.appendChild(f),r.appendChild(u)}),Object.assign(e.style,{width:`${l}px`,height:`${o}px`}),e.dataset.show="true";return}}function t5e(t,e){return r=>{kV(t,r,e,n=>{wV("y",r,n,t);const{preview:i,content:s,previewRoot:o}=n;xV(o);const{hoverIndex:a}=t,[l]=a.value;vV("y",i,o,s,l)})}}function r5e(t,e){return r=>{kV(t,r,e,n=>{wV("x",r,n,t);const{preview:i,content:s,previewRoot:o}=n,{hoverIndex:a}=t,[l,c]=a.value;xV(o),vV("x",i,o,s,c)})}}function wV(t,e,r,n){const{xHandle:i,yHandle:s,colHandle:o,rowHandle:a,preview:l}=r;i.dataset.displayType=t==="y"?"indicator":"none",s.dataset.displayType=t==="x"?"indicator":"none",t==="y"?(o.dataset.show="false",mD(a)):(a.dataset.show="false",mD(o));const{hoverIndex:c,dragInfo:h}=n,[u,f]=c.value;h.value={startCoords:[e.clientX,e.clientY],startIndex:t==="y"?u:f,endIndex:t==="y"?u:f,type:t==="y"?"row":"col"},l.dataset.direction=t==="y"?"vertical":"horizontal"}function kV(t,e,r,n){const i=r==null?void 0:r.get(fr);if(!(i!=null&&i.editable))return;e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.effectAllowed="move");const s=bV(t);s&&requestAnimationFrame(()=>{n(s)})}function mD(t){var e;(e=t.querySelector(".button-group"))==null||e.setAttribute("data-show","false")}function QC(t,e){for(let r=0;r<t.childCount;r++)if(t.child(r)===e)return r;return-1}function n5e(t,e){var r,n,i;if(e)try{const s=e.posAtCoords({left:t.clientX,top:t.clientY});if(!s)return;const o=s==null?void 0:s.inside;if(o==null||o<0)return;const a=e.state.doc.resolve(o),l=e.state.doc.nodeAt(o);if(!l)return;const c=["table_cell","table_header"],h=["table_row","table_header_row"],u=c.includes(l.type.name)?l:(r=jo(g=>c.includes(g.type.name))(a))==null?void 0:r.node,f=(n=jo(g=>h.includes(g.type.name))(a))==null?void 0:n.node,d=(i=jo(g=>g.type.name==="table")(a))==null?void 0:i.node;if(!u||!f||!d)return;const p=QC(f,u);return[QC(d,f),p]}catch{return}}function q4(t,[e,r]){const n=t.value;if(!n)return;const i=n.querySelectorAll("tr"),s=i[e];if(!s)return;const o=i[0];if(!o)return;const a=o.children[r];if(!a)return;const l=s.children[r];if(l)return{row:s,col:l,headerCol:a}}function i5e(t,e,r){if(!r||!e)return;const{selection:n}=e.state;if(!(n instanceof lr))return;const{$from:i}=n,s=Kd(i);if(!(!s||s.node!==r)){if(n.isColSelection()){const{$head:o}=n,a=o.index(o.depth-1);_9({refs:t,index:[0,a],before:l=>{var c;(c=l.querySelector(".button-group"))==null||c.setAttribute("data-show","true")}});return}if(n.isRowSelection()){const{$head:o}=n,a=jo(c=>c.type.name==="table_row"||c.type.name==="table_header_row")(o);if(!a)return;const l=QC(s.node,a.node);M9({refs:t,index:[l,0],before:c=>{var h;l>0&&((h=c.querySelector(".button-group"))==null||h.setAttribute("data-show","true"))}})}}}function _9({refs:t,index:e,before:r,after:n}){const{contentWrapperRef:i,colHandleRef:s,hoverIndex:o}=t,a=s.value;if(!a)return;o.value=e;const l=q4(i,e);if(!l)return;const{headerCol:c}=l;a.dataset.show="true",r&&r(a),oo(c,a,{placement:"top"}).then(({x:h,y:u})=>{Object.assign(a.style,{left:`${h}px`,top:`${u}px`}),n&&n(a)}).catch(console.error)}function M9({refs:t,index:e,before:r,after:n}){const{contentWrapperRef:i,rowHandleRef:s,hoverIndex:o}=t,a=s.value;if(!a)return;o.value=e;const l=q4(i,e);if(!l)return;const{row:c}=l;a.dataset.show="true",r&&r(a),oo(c,a,{placement:"left"}).then(({x:h,y:u})=>{Object.assign(a.style,{left:`${h}px`,top:`${u}px`}),n&&n(a)}).catch(console.error)}function CV(t,e,r){const n=r==="x"?"left":"top",i=r==="x"?"right":"bottom",s=t.length-1,o=t.findIndex((l,c)=>{const h=l.getBoundingClientRect(),u=h[n],f=h[i];return u<=e&&e<=f||c===s&&e>f||c===0&&e<u}),a=t[o];return a?[a,o]:void 0}function s5e(t,e){const r=t.querySelector("tr");if(!r)return;const n=Array.from(r.children);return CV(n,e,"x")}function o5e(t,e){const r=Array.from(t.querySelectorAll("tr"));return CV(r,e,"y")}function a5e(t){return wv(e=>{const r=bV(t);if(!r)return;const{preview:n,content:i,contentRoot:s,xHandle:o,yHandle:a}=r,{dragInfo:l,hoverIndex:c}=t;if(n.dataset.show==="false")return;const h=q4(t.contentWrapperRef,c.value);if(!h||!s.querySelector("tr"))return;const f=l.value;if(!f||!s.offsetParent)return;const d=s.offsetParent.offsetTop,p=s.offsetParent.offsetLeft;if(f.type==="col"){const m=h.col.getBoundingClientRect().width,{left:g,width:y}=s.getBoundingClientRect(),b=p-g,x=e.clientX+b-m/2,[T]=f.startCoords,S=T<e.clientX?"right":"left";n.style.top=`${d}px`;const w=x<g+b-20?g+b-20:x>g+y+b-m+20?g+y+b-m+20:x;n.style.left=`${w}px`;const _=s5e(s,e.clientX);if(_){const[I,N]=_,L=a.getBoundingClientRect().width,D=i.getBoundingClientRect();f.endIndex=N,oo(I,a,{placement:S==="left"?"left":"right",middleware:[fc(S==="left"?-1*L:0)]}).then(({x:P})=>{a.dataset.show="true",Object.assign(a.style,{height:`${D.height}px`,left:`${P}px`,top:`${d}px`})}).catch(console.error)}}else if(f.type==="row"){const m=h.row.getBoundingClientRect().height,{top:g,height:y}=s.getBoundingClientRect(),b=d-g,x=e.clientY+b-m/2,[T,S]=f.startCoords,w=S<e.clientY?"down":"up",_=x<g+b-20?g+b-20:x>g+y+b-m+20?g+y+b-m+20:x;n.style.top=`${_}px`,n.style.left=`${p}px`;const I=o5e(s,e.clientY);if(I){const[N,L]=I,D=o.getBoundingClientRect().height,P=i.getBoundingClientRect();f.endIndex=L,oo(N,o,{placement:w==="up"?"top":"bottom",middleware:[fc(w==="up"?-1*D:0)]}).then(({y:K})=>{o.dataset.show="true",Object.assign(o.style,{width:`${P.width}px`,top:`${K}px`})}).catch(console.error)}}},20)}function l5e(t,e,r){const{dragPreviewRef:n,yLineHandleRef:i,xLineHandleRef:s,dragInfo:o}=t,a=t5e(t,e),l=r5e(t,e),c=()=>{const f=n.value;if(!f||f.dataset.show==="false")return;const d=f==null?void 0:f.querySelector("tbody");for(;d!=null&&d.firstChild;)d==null||d.removeChild(d.firstChild);f&&(f.dataset.show="false")},h=()=>{var f;const d=n.value;if(!d)return;const p=i.value;if(!p)return;const m=s.value;if(!m)return;const g=o.value;if(!g||!e||d.dataset.show==="false"||!t.colHandleRef.value||!t.rowHandleRef.value||(p.dataset.show="false",m.dataset.show="false",g.startIndex===g.endIndex))return;const x=e.get(De),T={from:g.startIndex,to:g.endIndex,pos:((f=r==null?void 0:r())!=null?f:0)+1};if(g.type==="col"){x.call(ph.key,{pos:T.pos,index:g.startIndex}),x.call(L8.key,T);const S=[0,g.endIndex];_9({refs:t,index:S})}else{x.call(dh.key,{pos:T.pos,index:g.startIndex}),x.call(E8.key,T);const S=[g.endIndex,0];M9({refs:t,index:S})}requestAnimationFrame(()=>{e.get(fr).focus()})},u=a5e(t);return y1(()=>{window.addEventListener("dragover",u),window.addEventListener("dragend",c),window.addEventListener("drop",h)}),b1(()=>{window.removeEventListener("dragover",u),window.removeEventListener("dragend",c),window.removeEventListener("drop",h)}),{dragRow:a,dragCol:l}}function c5e(t,e,r){const{xLineHandleRef:n,contentWrapperRef:i,colHandleRef:s,rowHandleRef:o,hoverIndex:a,lineHoverIndex:l}=t;return{onAddRow:()=>{var m,g,y;if(!e)return;const b=n.value;if(!b)return;const[x]=l.value;if(x<0||!e.get(fr).editable)return;const T=Array.from((g=(m=i.value)==null?void 0:m.querySelectorAll("tr"))!=null?g:[]),S=e.get(De),w=((y=r==null?void 0:r())!=null?y:0)+1;T.length===x?(S.call(dh.key,{pos:w,index:x-1}),S.call(R8.key)):(S.call(dh.key,{pos:w,index:x}),S.call(B8.key)),S.call(dh.key,{pos:w,index:x}),b.dataset.show="false"},onAddCol:()=>{var m,g,y,b;if(!e||!n.value)return;const[T,S]=l.value;if(S<0||!e.get(fr).editable)return;const w=Array.from((y=(g=(m=i.value)==null?void 0:m.querySelector("tr"))==null?void 0:g.children)!=null?y:[]),_=e.get(De),I=((b=r==null?void 0:r())!=null?b:0)+1;w.length===S?(_.call(ph.key,{pos:I,index:S-1}),_.call(I8.key)):(_.call(ph.key,{pos:I,index:S}),_.call(D8.key)),_.call(ph.key,{pos:I,index:S})},selectCol:()=>{var m,g;if(!e)return;const[y,b]=a.value,x=e.get(De),T=((m=r==null?void 0:r())!=null?m:0)+1;x.call(ph.key,{pos:T,index:b});const S=(g=s.value)==null?void 0:g.querySelector(".button-group");S&&(S.dataset.show=S.dataset.show==="true"?"false":"true")},selectRow:()=>{var m,g;if(!e)return;const[y,b]=a.value,x=e.get(De),T=((m=r==null?void 0:r())!=null?m:0)+1;x.call(dh.key,{pos:T,index:y});const S=(g=o.value)==null?void 0:g.querySelector(".button-group");S&&y>0&&(S.dataset.show=S.dataset.show==="true"?"false":"true")},deleteSelected:m=>{if(!e||!e.get(fr).editable)return;m.preventDefault(),m.stopPropagation(),e.get(De).call(O8.key),requestAnimationFrame(()=>{e.get(fr).focus()})},onAlign:m=>g=>{if(!e||!e.get(fr).editable)return;g.preventDefault(),g.stopPropagation(),e.get(De).call(P8.key,m),requestAnimationFrame(()=>{e.get(fr).focus()})}}}function h5e(t,e){return wv(r=>{if(!(e!=null&&e.editable))return;const{contentWrapperRef:n,yLineHandleRef:i,xLineHandleRef:s,colHandleRef:o,rowHandleRef:a,hoverIndex:l,lineHoverIndex:c}=t,h=i.value;if(!h)return;const u=s.value;if(!u)return;const f=n.value;if(!f)return;const d=a.value;if(!d)return;const p=o.value;if(!p)return;const m=n5e(r,e);if(!m)return;const g=q4(n,m);if(!g)return;const[y,b]=m,x=g.col.getBoundingClientRect(),T=Math.abs(r.clientX-x.left)<8,S=Math.abs(x.right-r.clientX)<8,w=Math.abs(r.clientY-x.top)<8,_=Math.abs(x.bottom-r.clientY)<8,I=T||S||w||_,N=d.querySelector(".button-group"),L=p.querySelector(".button-group");if(N&&(N.dataset.show="false"),L&&(L.dataset.show="false"),I){const D=f.getBoundingClientRect();d.dataset.show="false",p.dataset.show="false",u.dataset.displayType="tool",h.dataset.displayType="tool";const P=h.getBoundingClientRect().width,K=u.getBoundingClientRect().height;T||S?(c.value[1]=T?b:b+1,oo(g.col,h,{placement:T?"left":"right",middleware:[fc(T?-1*P:0)]}).then(({x:z})=>{h.dataset.show="true",Object.assign(h.style,{height:`${D.height}px`,left:`${z}px`})}).catch(console.error)):h.dataset.show="false",m[0]!==0&&(w||_)?(c.value[0]=w?y:y+1,oo(g.row,u,{placement:w?"top":"bottom",middleware:[fc(w?-1*K:0)]}).then(({y:z})=>{u.dataset.show="true",Object.assign(u.style,{width:`${D.width}px`,top:`${z}px`})}).catch(console.error)):u.dataset.show="false";return}c.value=[-1,-1],h.dataset.show="false",u.dataset.show="false",d.dataset.show="true",p.dataset.show="true",M9({refs:t,index:m}),_9({refs:t,index:m}),l.value=m},20)}function u5e(t){return()=>{const{rowHandleRef:e,colHandleRef:r,yLineHandleRef:n,xLineHandleRef:i}=t;setTimeout(()=>{const s=e.value;if(!s)return;const o=r.value;if(!o)return;const a=n.value;if(!a)return;const l=i.value;l&&(s.dataset.show="false",o.dataset.show="false",a.dataset.show="false",l.dataset.show="false")},200)}}function f5e(t,e){const r=h5e(t,e),n=u5e(t);return{pointerMove:r,pointerLeave:n}}const d5e=Sn({props:{view:{type:Object,required:!0},ctx:{type:Object,required:!0},getPos:{type:Function,required:!0},config:{type:Object,required:!0},onMount:{type:Function,required:!0},node:{type:Object,required:!0}},setup({view:t,node:e,ctx:r,getPos:n,config:i,onMount:s}){const o=ze(),a=P=>{P!=null&&(P instanceof HTMLElement?(o.value=P,s(P)):o.value=void 0)},l=ze(),c=ze(),h=ze(),u=ze(),f=ze(),d=ze(),p=ze([0,0]),m=ze([-1,-1]),g=ze(),y={dragPreviewRef:d,tableWrapperRef:f,contentWrapperRef:o,yLineHandleRef:u,xLineHandleRef:h,colHandleRef:l,rowHandleRef:c,hoverIndex:p,lineHoverIndex:m,dragInfo:g},{pointerLeave:b,pointerMove:x}=f5e(y,t),{dragRow:T,dragCol:S}=l5e(y,r,n),{onAddRow:w,onAddCol:_,selectCol:I,selectRow:N,deleteSelected:L,onAlign:D}=c5e(y,r,n);return y1(()=>{requestAnimationFrame(()=>{t.editable&&i5e(y,t,e.value)})}),()=>te("div",{onDragstart:P=>P.preventDefault(),onDragover:P=>P.preventDefault(),onDragleave:P=>P.preventDefault(),onPointermove:x,onPointerleave:b},te("button",{type:"button","data-show":"false",contenteditable:"false",draggable:"true","data-role":"col-drag-handle",class:"handle cell-handle",onDragstart:S,onClick:I,onPointerdown:P=>P.stopPropagation(),onPointermove:P=>P.stopPropagation(),ref:l},te(_o,{icon:i.renderButton("col_drag_handle")}),te("div",{"data-show":"false",class:"button-group",onPointermove:P=>P.stopPropagation()},te("button",{type:"button",onPointerdown:D("left")},te(_o,{icon:i.renderButton("align_col_left")})),te("button",{type:"button",onPointerdown:D("center")},te(_o,{icon:i.renderButton("align_col_center")})),te("button",{type:"button",onPointerdown:D("right")},te(_o,{icon:i.renderButton("align_col_right")})),te("button",{type:"button",onPointerdown:L},te(_o,{icon:i.renderButton("delete_col")})))),te("button",{type:"button","data-show":"false",contenteditable:"false",draggable:"true","data-role":"row-drag-handle",class:"handle cell-handle",onDragstart:T,onClick:N,onPointerdown:P=>P.stopPropagation(),onPointermove:P=>P.stopPropagation(),ref:c},te(_o,{icon:i.renderButton("row_drag_handle")}),te("div",{"data-show":"false",class:"button-group",onPointermove:P=>P.stopPropagation()},te("button",{type:"button",onPointerdown:L},te(_o,{icon:i.renderButton("delete_row")})))),te("div",{class:"table-wrapper",ref:f},te("div",{"data-show":"false",class:"drag-preview","data-direction":"vertical",ref:d},te("table",null,te("tbody",null))),te("div",{"data-show":"false",contenteditable:"false","data-display-type":"tool","data-role":"x-line-drag-handle",class:"handle line-handle",onPointermove:P=>P.stopPropagation(),ref:h},te("button",{type:"button",onClick:w,class:"add-button"},te(_o,{icon:i.renderButton("add_row")}))),te("div",{"data-show":"false",contenteditable:"false","data-display-type":"tool","data-role":"y-line-drag-handle",class:"handle line-handle",onPointermove:P=>P.stopPropagation(),ref:u},te("button",{type:"button",onClick:_,class:"add-button"},te(_o,{icon:i.renderButton("add_col")}))),te("table",{ref:a,class:"children"})))}});var SV=t=>{throw TypeError(t)},p5e=(t,e,r)=>e.has(t)||SV("Cannot "+r),m5e=(t,e,r)=>e.has(t)?SV("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),g5e=(t,e,r)=>(p5e(t,e,"access private method"),r),e6,TV;class y5e{constructor(e,r,n,i){this.ctx=e,this.node=r,this.view=n,this.getPos=i,m5e(this,e6);const s=document.createElement("div");s.className="milkdown-table-block";const o=document.createElement("tbody");this.contentDOM=o,o.setAttribute("data-content-dom","true"),o.classList.add("content-dom"),this.nodeRef=cx(r);const a=po(d5e,{view:n,ctx:e,getPos:i,config:e.get(H4.key),onMount:l=>{l.appendChild(o)},node:this.nodeRef});a.mount(s),this.app=a,this.dom=s}update(e){return e.type!==this.node.type||e.sameMarkup(this.node)&&e.content.eq(this.node.content)?!1:(this.node=e,this.nodeRef.value=e,!0)}stopEvent(e){if(e.type==="drop"||e.type.startsWith("drag"))return!0;if(e.type==="mousedown"||e.type==="pointerdown"){if(e.target instanceof Element&&e.target.closest("button"))return!0;const r=e.target;if(r instanceof HTMLElement&&(r.closest("th")||r.closest("td"))){const n=e;return g5e(this,e6,TV).call(this,n)}}return!1}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:e.type==="selection"?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}destroy(){this.app.unmount(),this.dom.remove(),this.contentDOM.remove()}}e6=new WeakSet;TV=function(t){const e=this.view;if(!e.editable)return!1;const{state:r,dispatch:n}=e,i=e.posAtCoords({left:t.clientX,top:t.clientY});if(!i)return!1;const s=r.doc.resolve(i.inside),o=jo(c=>c.type.name==="table_cell"||c.type.name==="table_header")(s);if(!o)return!1;if(r.selection instanceof Ge){const c=jo(h=>h.type.name==="table_cell"||h.type.name==="table_header")(r.selection.$from);if((c==null?void 0:c.node)===o.node)return!1}const{from:a}=o,l=it.create(r.doc,a+1);return r.selection.eq(l)?!1:(r.selection instanceof lr?setTimeout(()=>{n(r.tr.setSelection(l).scrollIntoView())},20):requestAnimationFrame(()=>{n(r.tr.setSelection(l).scrollIntoView())}),!0)};const _V=f1(Ec.node,t=>(e,r,n)=>new y5e(t,e,r,n));yV(_V,{displayName:"NodeView<table-block>",group:"TableBlock"});const b5e=[H4,_V];function t6(t){if(!t)return!1;if(Array.isArray(t))return t.length>1?!1:t6(t[0]);const e=t.content;return e?t6(e):t.type==="text"}function x5e(t,e){return Object.assign(t,{meta:{package:"@milkdown/plugin-clipboard",...e}}),t}const MV=Gr(t=>{const e=t.get(Uo);t.update(im,i=>({...i,editable:i.editable??(()=>!0)}));const r=new vr("MILKDOWN_CLIPBOARD");return new xr({key:r,props:{handlePaste:(i,s)=>{var y,b;const o=t.get(rm),a=(b=(y=i.props).editable)==null?void 0:b.call(y,i.state),{clipboardData:l}=s;if(!a||!l||i.state.selection.$from.node().type.spec.code)return!1;const h=l.getData("text/plain"),u=l.getData("vscode-editor-data");if(u){const x=JSON.parse(u),T=x==null?void 0:x.mode;if(h&&T){const{tr:S}=i.state,w=xse("code_block",e);return S.replaceSelectionWith(w.create({language:T})).setSelection(Ge.near(S.doc.resolve(Math.max(0,S.selection.from-2)))).insertText(h.replace(/\r\n?/g,`
`)),i.dispatch(S),!0}}const f=l.getData("text/html");if(f.length===0&&h.length===0)return!1;const d=ru.fromSchema(e);let p;if(f.length===0){const x=o(h);if(!x||typeof x=="string")return!1;p=xu.fromSchema(e).serializeFragment(x.content)}else{const x=document.createElement("template");x.innerHTML=f,p=x.content.cloneNode(!0),x.remove()}const m=d.parseSlice(p),g=yse(m);if(g)return i.dispatch(i.state.tr.replaceSelectionWith(g,!0)),!0;try{return i.dispatch(i.state.tr.replaceSelection(m)),!0}catch{return!1}},clipboardTextSerializer:i=>{const s=t.get(df);if(t6(i.content.toJSON()))return i.content.textBetween(0,i.content.size,`

`);const a=e.topNodeType.createAndFill(void 0,i.content);return a?s(a):""}}})});x5e(MV,{displayName:"Prose<clipboard>"});function t0(t,e){return Object.assign(t,{meta:{package:"@milkdown/plugin-history",...e}}),t}const A9=bt("Undo",()=>()=>T4);t0(A9,{displayName:"Command<undo>"});const E9=bt("Redo",()=>()=>Cd);t0(E9,{displayName:"Command<redo>"});const L9=er({},"historyProviderConfig");t0(L9,{displayName:"Ctx<historyProviderConfig>"});const AV=Gr(t=>v2e(t.get(L9.key)));t0(AV,{displayName:"Ctx<historyProviderPlugin>"});const O9=Pi("historyKeymap",{Undo:{shortcuts:"Mod-z",command:t=>{const e=t.get(De);return()=>e.call(A9.key)}},Redo:{shortcuts:["Mod-y","Shift-Mod-z"],command:t=>{const e=t.get(De);return()=>e.call(E9.key)}}});t0(O9.ctx,{displayName:"KeymapCtx<history>"});t0(O9.shortcuts,{displayName:"Keymap<history>"});const v5e=[L9,AV,O9,A9,E9].flat();function w5e(t,e){const{doc:r,selection:n}=t;if(!r||!n||!(n instanceof Ge||n instanceof Oi))return t;const{to:i}=n,s=e.type==="space"?Array(e.size).fill(" ").join(""):"	";return t.insertText(s,i)}const V4=er({type:"space",size:2},"indentConfig");V4.meta={package:"@milkdown/plugin-indent",displayName:"Ctx<indentConfig>"};const EV=SF(t=>({Tab:(e,r)=>{const n=t.get(V4.key),{tr:i}=e,s=w5e(i,n);return s.docChanged?(r==null||r(s),!0):!1}}));EV.meta={package:"@milkdown/plugin-indent",displayName:"Shortcut<indent>"};const k5e=[V4,EV];class LV{constructor(){this.beforeMountedListeners=[],this.mountedListeners=[],this.updatedListeners=[],this.selectionUpdatedListeners=[],this.markdownUpdatedListeners=[],this.blurListeners=[],this.focusListeners=[],this.destroyListeners=[],this.beforeMount=e=>(this.beforeMountedListeners.push(e),this),this.mounted=e=>(this.mountedListeners.push(e),this),this.updated=e=>(this.updatedListeners.push(e),this)}get listeners(){return{beforeMount:this.beforeMountedListeners,mounted:this.mountedListeners,updated:this.updatedListeners,markdownUpdated:this.markdownUpdatedListeners,blur:this.blurListeners,focus:this.focusListeners,destroy:this.destroyListeners,selectionUpdated:this.selectionUpdatedListeners}}markdownUpdated(e){return this.markdownUpdatedListeners.push(e),this}blur(e){return this.blurListeners.push(e),this}focus(e){return this.focusListeners.push(e),this}destroy(e){return this.destroyListeners.push(e),this}selectionUpdated(e){return this.selectionUpdatedListeners.push(e),this}}const Dx=Dt(new LV,"listener"),C5e=new vr("MILKDOWN_LISTENER"),OV=t=>(t.inject(Dx,new LV),async()=>{await t.wait($h);const e=t.get(Dx),{listeners:r}=e;r.beforeMount.forEach(l=>l(t)),await t.wait(nm);const n=t.get(df);let i=null,s=null,o=null;const a=new xr({key:C5e,view:()=>({destroy:()=>{r.destroy.forEach(l=>l(t))}}),props:{handleDOMEvents:{focus:()=>(r.focus.forEach(l=>l(t)),!1),blur:()=>(r.blur.forEach(l=>l(t)),!1)}},state:{init:(l,c)=>{i=c.doc,s=n(c.doc)},apply:l=>{const c=l.selection;return(!o&&c||o&&!c.eq(o))&&(r.selectionUpdated.forEach(u=>{u(t,c,o)}),o=c),!l.docChanged||l.getMeta("addToHistory")===!1?void 0:xv(()=>{const{doc:u}=l;if(r.updated.length>0&&i&&!i.eq(u)&&r.updated.forEach(f=>{f(t,u,i)}),r.markdownUpdated.length>0&&i&&!i.eq(u)){const f=n(u);r.markdownUpdated.forEach(d=>{d(t,f,s)}),s=f}i=u},200)()}}});t.update(hc,l=>l.concat(a)),await t.wait($2),r.mounted.forEach(l=>l(t))});OV.meta={package:"@milkdown/plugin-listener",displayName:"Listener"};const D9=er({shouldAppend:t=>!(!t||["heading","paragraph"].includes(t.type.name)),getNode:t=>t.schema.nodes.paragraph.create()},"trailingConfig");D9.meta={package:"@milkdown/plugin-trailing",displayName:"Ctx<trailingConfig>"};const DV=Gr(t=>{const e=new vr("MILKDOWN_TRAILING"),{shouldAppend:r,getNode:n}=t.get(D9.key),i=new xr({key:e,state:{init:(s,o)=>{const a=o.tr.doc.lastChild;return r(a,o)},apply:(s,o,a,l)=>{if(!s.docChanged)return o;const c=s.doc.lastChild;return r(c,l)}},appendTransaction:(s,o,a)=>{const{doc:l,tr:c}=a,h=n==null?void 0:n(a),u=i.getState(a),f=l.content.size;if(!(!u||!h))return c.insert(f,h)}});return i});DV.meta={package:"@milkdown/plugin-trailing",displayName:"Prose<trailing>"};const S5e=[D9,DV];var St=(t=>(t.CodeMirror="code-mirror",t.ListItem="list-item",t.LinkTooltip="link-tooltip",t.Cursor="cursor",t.ImageBlock="image-block",t.BlockEdit="block-edit",t.Toolbar="toolbar",t.Placeholder="placeholder",t.Table="table",t.Latex="latex",t))(St||{});const T5e={cursor:!0,"list-item":!0,"link-tooltip":!0,"image-block":!0,"block-edit":!0,placeholder:!0,toolbar:!0,"code-mirror":!0,table:!0,latex:!0},_5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25ZM8.25 16.625C8.0375 16.625 7.85942 16.5531 7.71575 16.4093C7.57192 16.2654 7.5 16.0872 7.5 15.8748C7.5 15.6621 7.57192 15.484 7.71575 15.3405C7.85942 15.1968 8.0375 15.125 8.25 15.125H15.75C15.9625 15.125 16.1406 15.1969 16.2843 15.3408C16.4281 15.4846 16.5 15.6628 16.5 15.8753C16.5 16.0879 16.4281 16.266 16.2843 16.4095C16.1406 16.5532 15.9625 16.625 15.75 16.625H8.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM8.25 8.875C8.0375 8.875 7.85942 8.80308 7.71575 8.65925C7.57192 8.51542 7.5 8.33725 7.5 8.12475C7.5 7.91208 7.57192 7.734 7.71575 7.5905C7.85942 7.44683 8.0375 7.375 8.25 7.375H15.75C15.9625 7.375 16.1406 7.44692 16.2843 7.59075C16.4281 7.73458 16.5 7.91275 16.5 8.12525C16.5 8.33792 16.4281 8.516 16.2843 8.6595C16.1406 8.80317 15.9625 8.875 15.75 8.875H8.25ZM4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25Z"
    />
  </svg>
`,M5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25ZM4.25 16.625C4.0375 16.625 3.85942 16.5531 3.71575 16.4093C3.57192 16.2654 3.5 16.0872 3.5 15.8748C3.5 15.6621 3.57192 15.484 3.71575 15.3405C3.85942 15.1968 4.0375 15.125 4.25 15.125H13.75C13.9625 15.125 14.1406 15.1969 14.2843 15.3408C14.4281 15.4846 14.5 15.6628 14.5 15.8753C14.5 16.0879 14.4281 16.266 14.2843 16.4095C14.1406 16.5532 13.9625 16.625 13.75 16.625H4.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM4.25 8.875C4.0375 8.875 3.85942 8.80308 3.71575 8.65925C3.57192 8.51542 3.5 8.33725 3.5 8.12475C3.5 7.91208 3.57192 7.734 3.71575 7.5905C3.85942 7.44683 4.0375 7.375 4.25 7.375H13.75C13.9625 7.375 14.1406 7.44692 14.2843 7.59075C14.4281 7.73458 14.5 7.91275 14.5 8.12525C14.5 8.33792 14.4281 8.516 14.2843 8.6595C14.1406 8.80317 13.9625 8.875 13.75 8.875H4.25ZM4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25Z"
    />
  </svg>
`,A5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25ZM10.25 8.875C10.0375 8.875 9.85942 8.80308 9.71575 8.65925C9.57192 8.51542 9.5 8.33725 9.5 8.12475C9.5 7.91208 9.57192 7.734 9.71575 7.5905C9.85942 7.44683 10.0375 7.375 10.25 7.375H19.75C19.9625 7.375 20.1406 7.44692 20.2843 7.59075C20.4281 7.73458 20.5 7.91275 20.5 8.12525C20.5 8.33792 20.4281 8.516 20.2843 8.6595C20.1406 8.80317 19.9625 8.875 19.75 8.875H10.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM10.25 16.625C10.0375 16.625 9.85942 16.5531 9.71575 16.4093C9.57192 16.2654 9.5 16.0872 9.5 15.8748C9.5 15.6621 9.57192 15.484 9.71575 15.3405C9.85942 15.1968 10.0375 15.125 10.25 15.125H19.75C19.9625 15.125 20.1406 15.1969 20.2843 15.3408C20.4281 15.4846 20.5 15.6628 20.5 15.8753C20.5 16.0879 20.4281 16.266 20.2843 16.4095C20.1406 16.5532 19.9625 16.625 19.75 16.625H10.25ZM4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25Z"
    />
  </svg>
`,E5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M8.85758 18.625C8.4358 18.625 8.07715 18.4772 7.78163 18.1817C7.48613 17.8862 7.33838 17.5275 7.33838 17.1058V6.8942C7.33838 6.47242 7.48613 6.11377 7.78163 5.81825C8.07715 5.52275 8.4358 5.375 8.85758 5.375H12.1999C13.2191 5.375 14.1406 5.69231 14.9643 6.32693C15.788 6.96154 16.1999 7.81603 16.1999 8.89038C16.1999 9.63779 16.0194 10.2471 15.6585 10.7183C15.2976 11.1894 14.9088 11.5314 14.4922 11.7442C15.005 11.9211 15.4947 12.2708 15.9614 12.7933C16.428 13.3157 16.6614 14.0192 16.6614 14.9038C16.6614 16.182 16.1902 17.1217 15.2479 17.723C14.3056 18.3243 13.3563 18.625 12.3999 18.625H8.85758ZM9.4883 16.6327H12.3191C13.1063 16.6327 13.6627 16.4141 13.9884 15.9769C14.314 15.5397 14.4768 15.1205 14.4768 14.7192C14.4768 14.3179 14.314 13.8987 13.9884 13.4615C13.6627 13.0243 13.0909 12.8057 12.273 12.8057H9.4883V16.6327ZM9.4883 10.875H12.0826C12.6903 10.875 13.172 10.7013 13.5278 10.3539C13.8836 10.0064 14.0615 9.59037 14.0615 9.10575C14.0615 8.59035 13.8733 8.16918 13.497 7.84225C13.1207 7.51533 12.6595 7.35188 12.1133 7.35188H9.4883V10.875Z"
    />
  </svg>
`,L5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_952_6527)">
      <circle cx="12" cy="12" r="3" />
    </g>
    <defs>
      <clipPath id="clip0_952_6527">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,O5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8070)">
      <path
        d="M4 10.5C3.17 10.5 2.5 11.17 2.5 12C2.5 12.83 3.17 13.5 4 13.5C4.83 13.5 5.5 12.83 5.5 12C5.5 11.17 4.83 10.5 4 10.5ZM4 4.5C3.17 4.5 2.5 5.17 2.5 6C2.5 6.83 3.17 7.5 4 7.5C4.83 7.5 5.5 6.83 5.5 6C5.5 5.17 4.83 4.5 4 4.5ZM4 16.5C3.17 16.5 2.5 17.18 2.5 18C2.5 18.82 3.18 19.5 4 19.5C4.82 19.5 5.5 18.82 5.5 18C5.5 17.18 4.83 16.5 4 16.5ZM8 19H20C20.55 19 21 18.55 21 18C21 17.45 20.55 17 20 17H8C7.45 17 7 17.45 7 18C7 18.55 7.45 19 8 19ZM8 13H20C20.55 13 21 12.55 21 12C21 11.45 20.55 11 20 11H8C7.45 11 7 11.45 7 12C7 12.55 7.45 13 8 13ZM7 6C7 6.55 7.45 7 8 7H20C20.55 7 21 6.55 21 6C21 5.45 20.55 5 20 5H8C7.45 5 7 5.45 7 6Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8070">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,D5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    viewBox="0 0 24 24"
  >
    <path
      fill="currentColor"
      d="M9 22a1 1 0 0 1-1-1v-3H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6.1l-3.7 3.71c-.2.19-.45.29-.7.29zm1-6v3.08L13.08 16H20V4H4v12z"
    />
  </svg>
`,I5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1803_1151)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM10.71 16.29C10.32 16.68 9.69 16.68 9.3 16.29L5.71 12.7C5.32 12.31 5.32 11.68 5.71 11.29C6.1 10.9 6.73 10.9 7.12 11.29L10 14.17L16.88 7.29C17.27 6.9 17.9 6.9 18.29 7.29C18.68 7.68 18.68 8.31 18.29 8.7L10.71 16.29Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1803_1151">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,B5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1803_535)">
      <path
        d="M18 19H6C5.45 19 5 18.55 5 18V6C5 5.45 5.45 5 6 5H18C18.55 5 19 5.45 19 6V18C19 18.55 18.55 19 18 19ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1803_535">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,IV=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    stroke-width="1.5"
    stroke="currentColor"
    class="w-6 h-6"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="M19.5 8.25l-7.5 7.5-7.5-7.5"
    />
  </svg>
`,BV=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1098_15553)">
      <path
        d="M18.3007 5.70973C17.9107 5.31973 17.2807 5.31973 16.8907 5.70973L12.0007 10.5897L7.1107 5.69973C6.7207 5.30973 6.0907 5.30973 5.7007 5.69973C5.3107 6.08973 5.3107 6.71973 5.7007 7.10973L10.5907 11.9997L5.7007 16.8897C5.3107 17.2797 5.3107 17.9097 5.7007 18.2997C6.0907 18.6897 6.7207 18.6897 7.1107 18.2997L12.0007 13.4097L16.8907 18.2997C17.2807 18.6897 17.9107 18.6897 18.3007 18.2997C18.6907 17.9097 18.6907 17.2797 18.3007 16.8897L13.4107 11.9997L18.3007 7.10973C18.6807 6.72973 18.6807 6.08973 18.3007 5.70973Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1098_15553">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,RV=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8081)">
      <path
        d="M9.4 16.6L4.8 12L9.4 7.4L8 6L2 12L8 18L9.4 16.6ZM14.6 16.6L19.2 12L14.6 7.4L16 6L22 12L16 18L14.6 16.6Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8081">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,I9=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
  >
    <g clip-path="url(#clip0_1013_1606)">
      <path
        d="M9.00012 16.1998L5.50012 12.6998C5.11012 12.3098 4.49012 12.3098 4.10012 12.6998C3.71012 13.0898 3.71012 13.7098 4.10012 14.0998L8.29012 18.2898C8.68012 18.6798 9.31012 18.6798 9.70012 18.2898L20.3001 7.69982C20.6901 7.30982 20.6901 6.68982 20.3001 6.29982C19.9101 5.90982 19.2901 5.90982 18.9001 6.29982L9.00012 16.1998Z"
        fill="#817567"
      />
    </g>
    <defs>
      <clipPath id="clip0_1013_1606">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,PV=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    height="24px"
    viewBox="0 -960 960 960"
    width="24px"
    fill="none"
  >
    <path
      d="M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z"
    />
  </svg>
`,R5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7900)">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M19 13H5C4.45 13 4 12.55 4 12C4 11.45 4.45 11 5 11H19C19.55 11 20 11.45 20 12C20 12.55 19.55 13 19 13Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7900">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,gD=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="16"
    height="16"
    viewBox="0 0 16 16"
  >
    <path
      d="M3.5 9.83366C3.35833 9.83366 3.23961 9.78571 3.14383 9.68983C3.04794 9.59394 3 9.47516 3 9.33349C3 9.19171 3.04794 9.07299 3.14383 8.97733C3.23961 8.88155 3.35833 8.83366 3.5 8.83366H12.5C12.6417 8.83366 12.7604 8.8816 12.8562 8.97749C12.9521 9.07338 13 9.19216 13 9.33383C13 9.4756 12.9521 9.59433 12.8562 9.68999C12.7604 9.78577 12.6417 9.83366 12.5 9.83366H3.5ZM3.5 7.16699C3.35833 7.16699 3.23961 7.11905 3.14383 7.02316C3.04794 6.92727 3 6.80849 3 6.66683C3 6.52505 3.04794 6.40633 3.14383 6.31066C3.23961 6.21488 3.35833 6.16699 3.5 6.16699H12.5C12.6417 6.16699 12.7604 6.21494 12.8562 6.31083C12.9521 6.40671 13 6.52549 13 6.66716C13 6.80894 12.9521 6.92766 12.8562 7.02333C12.7604 7.1191 12.6417 7.16699 12.5 7.16699H3.5Z"
    />
  </svg>
`,B9=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1013_1585)">
      <path
        d="M14.06 9.02L14.98 9.94L5.92 19H5V18.08L14.06 9.02ZM17.66 3C17.41 3 17.15 3.1 16.96 3.29L15.13 5.12L18.88 8.87L20.71 7.04C21.1 6.65 21.1 6.02 20.71 5.63L18.37 3.29C18.17 3.09 17.92 3 17.66 3ZM14.06 6.19L3 17.25V21H6.75L17.81 9.94L14.06 6.19Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1013_1585">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,P5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5553)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM12 17H14V7H10V9H12V17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5553">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,N5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5559)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15H11V13H13C14.1 13 15 12.11 15 11V9C15 7.89 14.1 7 13 7H9V9H13V11H11C9.9 11 9 11.89 9 13V17H15V15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5559">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,F5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5565)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15V13.5C15 12.67 14.33 12 13.5 12C14.33 12 15 11.33 15 10.5V9C15 7.89 14.1 7 13 7H9V9H13V11H11V13H13V15H9V17H13C14.1 17 15 16.11 15 15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5565">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,$5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7757)">
      <path
        d="M19.04 3H5.04004C3.94004 3 3.04004 3.9 3.04004 5V19C3.04004 20.1 3.94004 21 5.04004 21H19.04C20.14 21 21.04 20.1 21.04 19V5C21.04 3.9 20.14 3 19.04 3ZM19.04 19H5.04004V5H19.04V19ZM13.04 17H15.04V7H13.04V11H11.04V7H9.04004V13H13.04V17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7757">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,z5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7760)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15V13C15 11.89 14.1 11 13 11H11V9H15V7H9V13H13V15H9V17H13C14.1 17 15 16.11 15 15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7760">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,H5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7763)">
      <path
        d="M11 17H13C14.1 17 15 16.11 15 15V13C15 11.89 14.1 11 13 11H11V9H15V7H11C9.9 7 9 7.89 9 9V15C9 16.11 9.9 17 11 17ZM11 13H13V15H11V13ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7763">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,r6=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8075)">
      <path
        d="M19 5V19H5V5H19ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM14.14 11.86L11.14 15.73L9 13.14L6 17H18L14.14 11.86Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8075">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,q5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M6.29811 18.625C6.04505 18.625 5.83115 18.5375 5.65641 18.3626C5.48166 18.1877 5.39429 17.9736 5.39429 17.7203C5.39429 17.467 5.48166 17.2532 5.65641 17.0788C5.83115 16.9045 6.04505 16.8173 6.29811 16.8173H9.21159L12.452 7.18265H9.53851C9.28545 7.18265 9.07155 7.0952 8.89681 6.9203C8.72206 6.7454 8.63469 6.5313 8.63469 6.278C8.63469 6.02472 8.72206 5.81089 8.89681 5.63652C9.07155 5.46217 9.28545 5.375 9.53851 5.375H16.8847C17.1377 5.375 17.3516 5.46245 17.5264 5.63735C17.7011 5.81225 17.7885 6.02634 17.7885 6.27962C17.7885 6.53293 17.7011 6.74676 17.5264 6.92113C17.3516 7.09548 17.1377 7.18265 16.8847 7.18265H14.2789L11.0385 16.8173H13.6443C13.8973 16.8173 14.1112 16.9048 14.286 17.0797C14.4607 17.2546 14.5481 17.4687 14.5481 17.722C14.5481 17.9752 14.4607 18.1891 14.286 18.3634C14.1112 18.5378 13.8973 18.625 13.6443 18.625H6.29811Z"
    />
  </svg>
`,V5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M17.0385 19.5003V16.5388H14.0769V15.0388H17.0385V12.0773H18.5384V15.0388H21.5V16.5388H18.5384V19.5003H17.0385ZM10.8077 16.5388H7.03845C5.78282 16.5388 4.7125 16.0963 3.8275 15.2114C2.9425 14.3266 2.5 13.2564 2.5 12.0009C2.5 10.7454 2.9425 9.67504 3.8275 8.78979C4.7125 7.90454 5.78282 7.46191 7.03845 7.46191H10.8077V8.96186H7.03845C6.1987 8.96186 5.48235 9.25834 4.8894 9.85129C4.29645 10.4442 3.99998 11.1606 3.99998 12.0003C3.99998 12.8401 4.29645 13.5564 4.8894 14.1494C5.48235 14.7423 6.1987 15.0388 7.03845 15.0388H10.8077V16.5388ZM8.25 12.7503V11.2504H15.75V12.7503H8.25ZM21.5 12.0003H20C20 11.1606 19.7035 10.4442 19.1106 9.85129C18.5176 9.25834 17.8013 8.96186 16.9615 8.96186H13.1923V7.46191H16.9615C18.2171 7.46191 19.2875 7.90441 20.1725 8.78939C21.0575 9.67439 21.5 10.7447 21.5 12.0003Z"
    />
  </svg>
`,W5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_971_7680)">
      <path
        d="M11 18C11 19.1 10.1 20 9 20C7.9 20 7 19.1 7 18C7 16.9 7.9 16 9 16C10.1 16 11 16.9 11 18ZM9 10C7.9 10 7 10.9 7 12C7 13.1 7.9 14 9 14C10.1 14 11 13.1 11 12C11 10.9 10.1 10 9 10ZM9 4C7.9 4 7 4.9 7 6C7 7.1 7.9 8 9 8C10.1 8 11 7.1 11 6C11 4.9 10.1 4 9 4ZM15 8C16.1 8 17 7.1 17 6C17 4.9 16.1 4 15 4C13.9 4 13 4.9 13 6C13 7.1 13.9 8 15 8ZM15 10C13.9 10 13 10.9 13 12C13 13.1 13.9 14 15 14C16.1 14 17 13.1 17 12C17 10.9 16.1 10 15 10ZM15 16C13.9 16 13 16.9 13 18C13 19.1 13.9 20 15 20C16.1 20 17 19.1 17 18C17 16.9 16.1 16 15 16Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_971_7680">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,j5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8067)">
      <path
        d="M8 7H20C20.55 7 21 6.55 21 6C21 5.45 20.55 5 20 5H8C7.45 5 7 5.45 7 6C7 6.55 7.45 7 8 7ZM20 17H8C7.45 17 7 17.45 7 18C7 18.55 7.45 19 8 19H20C20.55 19 21 18.55 21 18C21 17.45 20.55 17 20 17ZM20 11H8C7.45 11 7 11.45 7 12C7 12.55 7.45 13 8 13H20C20.55 13 21 12.55 21 12C21 11.45 20.55 11 20 11ZM4.5 16H2.5C2.22 16 2 16.22 2 16.5C2 16.78 2.22 17 2.5 17H4V17.5H3.5C3.22 17.5 3 17.72 3 18C3 18.28 3.22 18.5 3.5 18.5H4V19H2.5C2.22 19 2 19.22 2 19.5C2 19.78 2.22 20 2.5 20H4.5C4.78 20 5 19.78 5 19.5V16.5C5 16.22 4.78 16 4.5 16ZM2.5 5H3V7.5C3 7.78 3.22 8 3.5 8C3.78 8 4 7.78 4 7.5V4.5C4 4.22 3.78 4 3.5 4H2.5C2.22 4 2 4.22 2 4.5C2 4.78 2.22 5 2.5 5ZM4.5 10H2.5C2.22 10 2 10.22 2 10.5C2 10.78 2.22 11 2.5 11H3.8L2.12 12.96C2.04 13.05 2 13.17 2 13.28V13.5C2 13.78 2.22 14 2.5 14H4.5C4.78 14 5 13.78 5 13.5C5 13.22 4.78 13 4.5 13H3.2L4.88 11.04C4.96 10.95 5 10.83 5 10.72V10.5C5 10.22 4.78 10 4.5 10Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8067">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,n6=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_971_7676)">
      <path
        d="M18 13H13V18C13 18.55 12.55 19 12 19C11.45 19 11 18.55 11 18V13H6C5.45 13 5 12.55 5 12C5 11.45 5.45 11 6 11H11V6C11 5.45 11.45 5 12 5C12.55 5 13 5.45 13 6V11H18C18.55 11 19 11.45 19 12C19 12.55 18.55 13 18 13Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_971_7676">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,U5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7897)">
      <path
        d="M7.17 17C7.68 17 8.15 16.71 8.37 16.26L9.79 13.42C9.93 13.14 10 12.84 10 12.53V8C10 7.45 9.55 7 9 7H5C4.45 7 4 7.45 4 8V12C4 12.55 4.45 13 5 13H7L5.97 15.06C5.52 15.95 6.17 17 7.17 17ZM17.17 17C17.68 17 18.15 16.71 18.37 16.26L19.79 13.42C19.93 13.14 20 12.84 20 12.53V8C20 7.45 19.55 7 19 7H15C14.45 7 14 7.45 14 8V12C14 12.55 14.45 13 15 13H17L15.97 15.06C15.52 15.95 16.17 17 17.17 17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7897">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,i6=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M7.30775 20.4997C6.81058 20.4997 6.385 20.3227 6.031 19.9687C5.677 19.6147 5.5 19.1892 5.5 18.692V5.99973H5.25C5.0375 5.99973 4.85942 5.92782 4.71575 5.78398C4.57192 5.64015 4.5 5.46198 4.5 5.24948C4.5 5.03682 4.57192 4.85873 4.71575 4.71523C4.85942 4.57157 5.0375 4.49973 5.25 4.49973H9C9 4.2549 9.08625 4.04624 9.25875 3.87374C9.43108 3.7014 9.63967 3.61523 9.8845 3.61523H14.1155C14.3603 3.61523 14.5689 3.7014 14.7413 3.87374C14.9138 4.04624 15 4.2549 15 4.49973H18.75C18.9625 4.49973 19.1406 4.57165 19.2843 4.71548C19.4281 4.85932 19.5 5.03748 19.5 5.24998C19.5 5.46265 19.4281 5.64073 19.2843 5.78423C19.1406 5.9279 18.9625 5.99973 18.75 5.99973H18.5V18.692C18.5 19.1892 18.323 19.6147 17.969 19.9687C17.615 20.3227 17.1894 20.4997 16.6923 20.4997H7.30775ZM17 5.99973H7V18.692C7 18.7818 7.02883 18.8556 7.0865 18.9132C7.14417 18.9709 7.21792 18.9997 7.30775 18.9997H16.6923C16.7821 18.9997 16.8558 18.9709 16.9135 18.9132C16.9712 18.8556 17 18.7818 17 18.692V5.99973ZM10.1543 16.9997C10.3668 16.9997 10.5448 16.9279 10.6885 16.7842C10.832 16.6404 10.9037 16.4622 10.9037 16.2497V8.74973C10.9037 8.53723 10.8318 8.35907 10.688 8.21523C10.5443 8.07157 10.3662 7.99973 10.1535 7.99973C9.941 7.99973 9.76292 8.07157 9.61925 8.21523C9.47575 8.35907 9.404 8.53723 9.404 8.74973V16.2497C9.404 16.4622 9.47583 16.6404 9.6195 16.7842C9.76333 16.9279 9.94158 16.9997 10.1543 16.9997ZM13.8465 16.9997C14.059 16.9997 14.2371 16.9279 14.3807 16.7842C14.5243 16.6404 14.596 16.4622 14.596 16.2497V8.74973C14.596 8.53723 14.5242 8.35907 14.3805 8.21523C14.2367 8.07157 14.0584 7.99973 13.8458 7.99973C13.6333 7.99973 13.4552 8.07157 13.3115 8.21523C13.168 8.35907 13.0962 8.53723 13.0962 8.74973V16.2497C13.0962 16.4622 13.1682 16.6404 13.312 16.7842C13.4557 16.9279 13.6338 16.9997 13.8465 16.9997Z"
    />
  </svg>
`,NV=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    stroke-width="1.5"
    stroke="currentColor"
    class="w-6 h-6"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"
    />
  </svg>
`,G5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M3.25 13.7404C3.0375 13.7404 2.85938 13.6684 2.71563 13.5246C2.57188 13.3808 2.5 13.2026 2.5 12.99C2.5 12.7774 2.57188 12.5993 2.71563 12.4558C2.85938 12.3122 3.0375 12.2404 3.25 12.2404H20.75C20.9625 12.2404 21.1406 12.3123 21.2843 12.4561C21.4281 12.5999 21.5 12.7781 21.5 12.9907C21.5 13.2033 21.4281 13.3814 21.2843 13.525C21.1406 13.6686 20.9625 13.7404 20.75 13.7404H3.25ZM10.9423 10.2596V6.62495H6.5673C6.2735 6.62495 6.02377 6.52201 5.8181 6.31613C5.61245 6.11026 5.50963 5.86027 5.50963 5.56615C5.50963 5.27205 5.61245 5.02083 5.8181 4.8125C6.02377 4.60417 6.2735 4.5 6.5673 4.5H17.4423C17.7361 4.5 17.9858 4.60294 18.1915 4.80883C18.3971 5.01471 18.5 5.2647 18.5 5.5588C18.5 5.85292 18.3971 6.10413 18.1915 6.31245C17.9858 6.52078 17.7361 6.62495 17.4423 6.62495H13.0673V10.2596H10.9423ZM10.9423 15.7211H13.0673V18.4423C13.0673 18.7361 12.9643 18.9858 12.7584 19.1915C12.5526 19.3971 12.3026 19.5 12.0085 19.5C11.7144 19.5 11.4631 19.3962 11.2548 19.1887C11.0465 18.9811 10.9423 18.7291 10.9423 18.4327V15.7211Z"
    />
  </svg>
`,K5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8078)">
      <path
        d="M20 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H20C21.1 21 22 20.1 22 19V5C22 3.9 21.1 3 20 3ZM20 5V8H5V5H20ZM15 19H10V10H15V19ZM5 10H8V19H5V10ZM17 19V10H20V19H17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8078">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Y5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5547)">
      <path
        d="M5 5.5C5 6.33 5.67 7 6.5 7H10.5V17.5C10.5 18.33 11.17 19 12 19C12.83 19 13.5 18.33 13.5 17.5V7H17.5C18.33 7 19 6.33 19 5.5C19 4.67 18.33 4 17.5 4H6.5C5.67 4 5 4.67 5 5.5Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5547">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,X5e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M5.66936 16.3389L9.39244 12.6158C9.54115 12.4671 9.71679 12.3937 9.91936 12.3957C10.1219 12.3976 10.2975 12.4761 10.4463 12.6312C10.5847 12.7823 10.654 12.9585 10.654 13.1599C10.654 13.3613 10.5847 13.5363 10.4463 13.6851L6.32704 17.8197C6.14627 18.0004 5.93538 18.0908 5.69436 18.0908C5.45333 18.0908 5.24243 18.0004 5.06166 17.8197L3.01744 15.7754C2.87899 15.637 2.81136 15.4629 2.81456 15.2533C2.81776 15.0437 2.88859 14.8697 3.02706 14.7312C3.16551 14.5928 3.34008 14.5235 3.55076 14.5235C3.76144 14.5235 3.93494 14.5928 4.07126 14.7312L5.66936 16.3389ZM5.66936 8.72359L9.39244 5.00049C9.54115 4.85177 9.71679 4.77838 9.91936 4.78031C10.1219 4.78223 10.2975 4.86075 10.4463 5.01586C10.5847 5.16691 10.654 5.34314 10.654 5.54454C10.654 5.74592 10.5847 5.92097 10.4463 6.06969L6.32704 10.2043C6.14627 10.3851 5.93538 10.4755 5.69436 10.4755C5.45333 10.4755 5.24243 10.3851 5.06166 10.2043L3.01744 8.16009C2.87899 8.02162 2.81136 7.84759 2.81456 7.63799C2.81776 7.42837 2.88859 7.25433 3.02706 7.11586C3.16551 6.97741 3.34008 6.90819 3.55076 6.90819C3.76144 6.90819 3.93494 6.97741 4.07126 7.11586L5.66936 8.72359ZM13.7597 16.5581C13.5472 16.5581 13.3691 16.4862 13.2253 16.3424C13.0816 16.1986 13.0097 16.0204 13.0097 15.8078C13.0097 15.5952 13.0816 15.4171 13.2253 15.2735C13.3691 15.13 13.5472 15.0582 13.7597 15.0582H20.7597C20.9722 15.0582 21.1503 15.1301 21.2941 15.2739C21.4378 15.4177 21.5097 15.5959 21.5097 15.8085C21.5097 16.0211 21.4378 16.1992 21.2941 16.3427C21.1503 16.4863 20.9722 16.5581 20.7597 16.5581H13.7597ZM13.7597 8.94276C13.5472 8.94276 13.3691 8.87085 13.2253 8.72704C13.0816 8.58324 13.0097 8.40504 13.0097 8.19244C13.0097 7.97985 13.0816 7.80177 13.2253 7.65819C13.3691 7.5146 13.5472 7.44281 13.7597 7.44281H20.7597C20.9722 7.44281 21.1503 7.51471 21.2941 7.65851C21.4378 7.80233 21.5097 7.98053 21.5097 8.19311C21.5097 8.40571 21.4378 8.5838 21.2941 8.72739C21.1503 8.87097 20.9722 8.94276 20.7597 8.94276H13.7597Z"
    />
  </svg>
`,FV=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    viewBox="0 0 24 24"
  >
    <path
      fill="currentColor"
      d="M7 19v-.808L13.096 12L7 5.808V5h10v1.25H9.102L14.727 12l-5.625 5.77H17V19z"
    />
  </svg>
`,$V=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    height="24px"
    viewBox="0 -960 960 960"
    width="24px"
  >
    <path
      d="m644-428-58-58q9-47-27-88t-93-32l-58-58q17-8 34.5-12t37.5-4q75 0 127.5 52.5T660-500q0 20-4 37.5T644-428Zm128 126-58-56q38-29 67.5-63.5T832-500q-50-101-143.5-160.5T480-720q-29 0-57 4t-55 12l-62-62q41-17 84-25.5t90-8.5q151 0 269 83.5T920-500q-23 59-60.5 109.5T772-302Zm20 246L624-222q-35 11-70.5 16.5T480-200q-151 0-269-83.5T40-500q21-53 53-98.5t73-81.5L56-792l56-56 736 736-56 56ZM222-624q-29 26-53 57t-41 67q50 101 143.5 160.5T480-280q20 0 39-2.5t39-5.5l-36-38q-11 3-21 4.5t-21 1.5q-75 0-127.5-52.5T300-500q0-11 1.5-21t4.5-21l-84-82Zm319 93Zm-151 75Z"
    />
  </svg>
`,J5e={[St.CodeMirror]:{theme:Vne,languages:Dne,expandIcon:IV,searchIcon:NV,clearSearchIcon:BV,searchPlaceholder:"Search language",noResultText:"No result",previewToggleIcon:t=>t?B9:$V}},Z5e=Dt([],"FeaturesCtx"),Q5e=Dt({},"CrepeCtx");function eke(t){return t.get("CrepeCtx")}function W4(t){return t.use("FeaturesCtx")}function ca(t){return e=>{W4(e).update(r=>r.includes(t)?r:[...r,t])}}function zV(t){return t.$from.parent.type.name==="code_block"}function HV(t){var e;const r=(e=t.$from.node(t.$from.depth-1))==null?void 0:e.type;return(r==null?void 0:r.name)==="list_item"}var qV=t=>{throw TypeError(t)},VV=(t,e,r)=>e.has(t)||qV("Cannot "+r),R0=(t,e,r)=>(VV(t,e,"read from private field"),r?r.call(t):e.get(t)),yD=(t,e,r)=>e.has(t)?qV("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),tke=(t,e,r,n)=>(VV(t,e,"write to private field"),e.set(t,r),r),Zu,ob;class WV{constructor(){yD(this,Zu,[]),this.clear=()=>(tke(this,Zu,[]),this),yD(this,ob,e=>{const r={group:e,addItem:(n,i)=>{const s={...i,key:n};return e.items.push(s),r},clear:()=>(e.items=[],r)};return r}),this.addGroup=(e,r)=>{const i={key:e,label:r,items:[]};return R0(this,Zu).push(i),R0(this,ob).call(this,i)},this.getGroup=e=>{const r=R0(this,Zu).find(n=>n.key===e);if(!r)throw new Error(`Group with key ${e} not found`);return R0(this,ob).call(this,r)},this.build=()=>R0(this,Zu)}}Zu=new WeakMap;ob=new WeakMap;function rke(t,e,r){var n,i,s,o,a,l,c,h,u,f,d,p,m,g,y,b,x,T,S,w,_,I,N,L,D,P,K,z,$,H,U,q,re,E,de,Te,O,et,He,Le,Xe,dt,Ct,xt,jt,R,W,ee,ue,le,ce,Ce,ye,be,pe,Ze,Oe,Ye,rt,J,ae,Me,nt,gt,Qt,wr,_r,Tn,Ht,Pt,_n,Yr,W1,Rc,Pc,j1,xl,U1,G1,Rr,ua,K1,o0,Lu,a0,l0,Y1,Fi,bo,c0,h0,Ou,u0,ls,f0,d0,p0,m0,X1,Qe,j,ve,qe,rr,Xr,Mr,un,cs,fa,Du,zr,g0,y0,NT,FT,$T,zT,HT,qT;const Iu=r&&W4(r).get(),oX=Iu==null?void 0:Iu.includes(St.Latex),aX=Iu==null?void 0:Iu.includes(St.ImageBlock),lX=Iu==null?void 0:Iu.includes(St.Table),b0=new WV;if((e==null?void 0:e.textGroup)!==null){const Gt=b0.addGroup("text",(i=(n=e==null?void 0:e.textGroup)==null?void 0:n.label)!=null?i:"Text");((s=e==null?void 0:e.textGroup)==null?void 0:s.text)!==null&&Gt.addItem("text",{label:(l=(a=(o=e==null?void 0:e.textGroup)==null?void 0:o.text)==null?void 0:a.label)!=null?l:"Text",icon:(u=(h=(c=e==null?void 0:e.textGroup)==null?void 0:c.text)==null?void 0:h.icon)!=null?u:Y5e,onRun:st=>{const at=st.get(De),Ut=uo.type(st);at.call(fn.key),at.call(va.key,{nodeType:Ut})}}),((f=e==null?void 0:e.textGroup)==null?void 0:f.h1)!==null&&Gt.addItem("h1",{label:(m=(p=(d=e==null?void 0:e.textGroup)==null?void 0:d.h1)==null?void 0:p.label)!=null?m:"Heading 1",icon:(b=(y=(g=e==null?void 0:e.textGroup)==null?void 0:g.h1)==null?void 0:y.icon)!=null?b:P5e,onRun:st=>{const at=st.get(De),Ut=Dn.type(st);at.call(fn.key),at.call(va.key,{nodeType:Ut,attrs:{level:1}})}}),((x=e==null?void 0:e.textGroup)==null?void 0:x.h2)!==null&&Gt.addItem("h2",{label:(w=(S=(T=e==null?void 0:e.textGroup)==null?void 0:T.h2)==null?void 0:S.label)!=null?w:"Heading 2",icon:(N=(I=(_=e==null?void 0:e.textGroup)==null?void 0:_.h2)==null?void 0:I.icon)!=null?N:N5e,onRun:st=>{const at=st.get(De),Ut=Dn.type(st);at.call(fn.key),at.call(va.key,{nodeType:Ut,attrs:{level:2}})}}),((L=e==null?void 0:e.textGroup)==null?void 0:L.h3)!==null&&Gt.addItem("h3",{label:(K=(P=(D=e==null?void 0:e.textGroup)==null?void 0:D.h3)==null?void 0:P.label)!=null?K:"Heading 3",icon:(H=($=(z=e==null?void 0:e.textGroup)==null?void 0:z.h3)==null?void 0:$.icon)!=null?H:F5e,onRun:st=>{const at=st.get(De),Ut=Dn.type(st);at.call(fn.key),at.call(va.key,{nodeType:Ut,attrs:{level:3}})}}),((U=e==null?void 0:e.textGroup)==null?void 0:U.h4)!==null&&Gt.addItem("h4",{label:(E=(re=(q=e==null?void 0:e.textGroup)==null?void 0:q.h4)==null?void 0:re.label)!=null?E:"Heading 4",icon:(O=(Te=(de=e==null?void 0:e.textGroup)==null?void 0:de.h4)==null?void 0:Te.icon)!=null?O:$5e,onRun:st=>{const at=st.get(De),Ut=Dn.type(st);at.call(fn.key),at.call(va.key,{nodeType:Ut,attrs:{level:4}})}}),((et=e==null?void 0:e.textGroup)==null?void 0:et.h5)!==null&&Gt.addItem("h5",{label:(Xe=(Le=(He=e==null?void 0:e.textGroup)==null?void 0:He.h5)==null?void 0:Le.label)!=null?Xe:"Heading 5",icon:(xt=(Ct=(dt=e==null?void 0:e.textGroup)==null?void 0:dt.h5)==null?void 0:Ct.icon)!=null?xt:z5e,onRun:st=>{const at=st.get(De),Ut=Dn.type(st);at.call(fn.key),at.call(va.key,{nodeType:Ut,attrs:{level:5}})}}),((jt=e==null?void 0:e.textGroup)==null?void 0:jt.h6)!==null&&Gt.addItem("h6",{label:(ee=(W=(R=e==null?void 0:e.textGroup)==null?void 0:R.h6)==null?void 0:W.label)!=null?ee:"Heading 6",icon:(ce=(le=(ue=e==null?void 0:e.textGroup)==null?void 0:ue.h6)==null?void 0:le.icon)!=null?ce:H5e,onRun:st=>{const at=st.get(De),Ut=Dn.type(st);at.call(fn.key),at.call(va.key,{nodeType:Ut,attrs:{level:6}})}}),((Ce=e==null?void 0:e.textGroup)==null?void 0:Ce.quote)!==null&&Gt.addItem("quote",{label:(pe=(be=(ye=e==null?void 0:e.textGroup)==null?void 0:ye.quote)==null?void 0:be.label)!=null?pe:"Quote",icon:(Ye=(Oe=(Ze=e==null?void 0:e.textGroup)==null?void 0:Ze.quote)==null?void 0:Oe.icon)!=null?Ye:U5e,onRun:st=>{const at=st.get(De),Ut=wu.type(st);at.call(fn.key),at.call(op.key,{nodeType:Ut})}}),((rt=e==null?void 0:e.textGroup)==null?void 0:rt.divider)!==null&&Gt.addItem("divider",{label:(Me=(ae=(J=e==null?void 0:e.textGroup)==null?void 0:J.divider)==null?void 0:ae.label)!=null?Me:"Divider",icon:(Qt=(gt=(nt=e==null?void 0:e.textGroup)==null?void 0:nt.divider)==null?void 0:gt.icon)!=null?Qt:R5e,onRun:st=>{const at=st.get(De),Ut=jd.type(st);at.call(fn.key),at.call(ap.key,{nodeType:Ut})}})}if((e==null?void 0:e.listGroup)!==null){const Gt=b0.addGroup("list",(_r=(wr=e==null?void 0:e.listGroup)==null?void 0:wr.label)!=null?_r:"List");((Tn=e==null?void 0:e.listGroup)==null?void 0:Tn.bulletList)!==null&&Gt.addItem("bullet-list",{label:(_n=(Pt=(Ht=e==null?void 0:e.listGroup)==null?void 0:Ht.bulletList)==null?void 0:Pt.label)!=null?_n:"Bullet List",icon:(Rc=(W1=(Yr=e==null?void 0:e.listGroup)==null?void 0:Yr.bulletList)==null?void 0:W1.icon)!=null?Rc:O5e,onRun:st=>{const at=st.get(De),Ut=Cu.type(st);at.call(fn.key),at.call(op.key,{nodeType:Ut})}}),((Pc=e==null?void 0:e.listGroup)==null?void 0:Pc.orderedList)!==null&&Gt.addItem("ordered-list",{label:(U1=(xl=(j1=e==null?void 0:e.listGroup)==null?void 0:j1.orderedList)==null?void 0:xl.label)!=null?U1:"Ordered List",icon:(ua=(Rr=(G1=e==null?void 0:e.listGroup)==null?void 0:G1.orderedList)==null?void 0:Rr.icon)!=null?ua:j5e,onRun:st=>{const at=st.get(De),Ut=Su.type(st);at.call(fn.key),at.call(op.key,{nodeType:Ut})}}),((K1=e==null?void 0:e.listGroup)==null?void 0:K1.taskList)!==null&&Gt.addItem("task-list",{label:(a0=(Lu=(o0=e==null?void 0:e.listGroup)==null?void 0:o0.taskList)==null?void 0:Lu.label)!=null?a0:"Task List",icon:(Fi=(Y1=(l0=e==null?void 0:e.listGroup)==null?void 0:l0.taskList)==null?void 0:Y1.icon)!=null?Fi:X5e,onRun:st=>{const at=st.get(De),Ut=fo.type(st);at.call(fn.key),at.call(op.key,{nodeType:Ut,attrs:{checked:!1}})}})}if((e==null?void 0:e.advancedGroup)!==null){const Gt=b0.addGroup("advanced",(c0=(bo=e==null?void 0:e.advancedGroup)==null?void 0:bo.label)!=null?c0:"Advanced");((h0=e==null?void 0:e.advancedGroup)==null?void 0:h0.image)!==null&&aX&&Gt.addItem("image",{label:(ls=(u0=(Ou=e==null?void 0:e.advancedGroup)==null?void 0:Ou.image)==null?void 0:u0.label)!=null?ls:"Image",icon:(p0=(d0=(f0=e==null?void 0:e.advancedGroup)==null?void 0:f0.image)==null?void 0:d0.icon)!=null?p0:r6,onRun:st=>{const at=st.get(De),Ut=y4.type(st);at.call(fn.key),at.call(ap.key,{nodeType:Ut})}}),((m0=e==null?void 0:e.advancedGroup)==null?void 0:m0.codeBlock)!==null&&Gt.addItem("code",{label:(j=(Qe=(X1=e==null?void 0:e.advancedGroup)==null?void 0:X1.codeBlock)==null?void 0:Qe.label)!=null?j:"Code",icon:(rr=(qe=(ve=e==null?void 0:e.advancedGroup)==null?void 0:ve.codeBlock)==null?void 0:qe.icon)!=null?rr:RV,onRun:st=>{const at=st.get(De),Ut=ao.type(st);at.call(fn.key),at.call(va.key,{nodeType:Ut})}}),((Xr=e==null?void 0:e.advancedGroup)==null?void 0:Xr.table)!==null&&lX&&Gt.addItem("table",{label:(cs=(un=(Mr=e==null?void 0:e.advancedGroup)==null?void 0:Mr.table)==null?void 0:un.label)!=null?cs:"Table",icon:(zr=(Du=(fa=e==null?void 0:e.advancedGroup)==null?void 0:fa.table)==null?void 0:Du.icon)!=null?zr:K5e,onRun:st=>{const at=st.get(De),Ut=st.get(fr);at.call(fn.key);const{from:cX}=Ut.state.selection;at.call(ap.key,{nodeType:T8(st,3,3)}),at.call(i$.key,{pos:cX})}}),((g0=e==null?void 0:e.advancedGroup)==null?void 0:g0.math)!==null&&oX&&Gt.addItem("math",{label:(FT=(NT=(y0=e==null?void 0:e.advancedGroup)==null?void 0:y0.math)==null?void 0:NT.label)!=null?FT:"Math",icon:(HT=(zT=($T=e==null?void 0:e.advancedGroup)==null?void 0:$T.math)==null?void 0:zT.icon)!=null?HT:FV,onRun:st=>{const at=st.get(De),Ut=ao.type(st);at.call(fn.key),at.call(ap.key,{nodeType:Ut,attrs:{language:"LaTex"}})}})}(qT=e==null?void 0:e.buildMenu)==null||qT.call(e,b0);let x0=b0.build();t&&(x0=x0.map(Gt=>{const st=Gt.items.filter(at=>at.label.toLowerCase().includes(t.toLowerCase()));return{...Gt,items:st}}).filter(Gt=>Gt.items.length>0));const VT=x0.flatMap(Gt=>Gt.items);return VT.forEach((Gt,st)=>{Object.assign(Gt,{index:st})}),x0.reduce((Gt,st)=>{const at=Gt+st.items.length;return Object.assign(st,{range:[Gt,at]}),at},0),{groups:x0,size:VT.length}}const nke=Sn({props:{ctx:{type:Object,required:!0},show:{type:Object,required:!0},filter:{type:Object,required:!0},hide:{type:Function,required:!0},config:{type:Object,required:!1}},setup({ctx:t,show:e,filter:r,hide:n,config:i}){const s=ze(),o=wd(()=>rke(r.value,i,t)),a=ze(0),l=ze({x:-999,y:-999}),c=m=>{const{x:g,y}=m;l.value={x:g,y}};Vh([o,e],()=>{const{size:m}=o.value;m===0&&e.value?n():a.value>=m&&(a.value=0)});const h=(m,g)=>{const y=a.value,b=typeof m=="function"?m(y):m;g==null||g(b),a.value=b},u=m=>{var g,y;const b=(g=s.value)==null?void 0:g.querySelector(`[data-index="${m}"]`),x=(y=s.value)==null?void 0:y.querySelector(".menu-groups");!b||!x||(x.scrollTop=b.offsetTop-x.offsetTop)},f=m=>{const g=o.value.groups.flatMap(y=>y.items).at(m);g&&t&&g.onRun(t),n()},d=m=>{const{size:g,groups:y}=o.value;if(m.key==="Escape"){m.preventDefault(),n==null||n();return}if(m.key==="ArrowDown")return m.preventDefault(),h(b=>b<g-1?b+1:b,u);if(m.key==="ArrowUp")return m.preventDefault(),h(b=>b<=0?b:b-1,u);if(m.key==="ArrowLeft")return m.preventDefault(),h(b=>{const x=y.find(S=>S.range[0]<=b&&S.range[1]>b);if(!x)return b;const T=y[y.indexOf(x)-1];return T?T.range[1]-1:b},u);if(m.key==="ArrowRight")return m.preventDefault(),h(b=>{const x=y.find(S=>S.range[0]<=b&&S.range[1]>b);if(!x)return b;const T=y[y.indexOf(x)+1];return T?T.range[0]:b},u);m.key==="Enter"&&(m.preventDefault(),f(a.value))},p=m=>g=>{const y=l.value;if(!y)return;const{x:b,y:x}=g;b===y.x&&x===y.y||h(m)};return Gd(()=>{e.value?window.addEventListener("keydown",d,{capture:!0}):window.removeEventListener("keydown",d,{capture:!0})}),b1(()=>{window.removeEventListener("keydown",d,{capture:!0})}),()=>te("div",{ref:s,onPointerdown:m=>m.preventDefault()},te("nav",{class:"tab-group"},te("ul",null,o.value.groups.map(m=>te("li",{key:m.key,onPointerdown:()=>h(m.range[0],u),class:a.value>=m.range[0]&&a.value<m.range[1]?"selected":""},m.label)))),te("div",{class:"menu-groups",onPointermove:c},o.value.groups.map(m=>te("div",{key:m.key,class:"menu-group"},te("h6",null,m.label),te("ul",null,m.items.map(g=>te("li",{key:g.key,"data-index":g.index,class:a.value===g.index?"hover":"",onPointerenter:p(g.index),onPointerdown:()=>{var y,b;(b=(y=s.value)==null?void 0:y.querySelector(`[data-index="${g.index}"]`))==null||b.classList.add("active")},onPointerup:()=>{var y,b;(b=(y=s.value)==null?void 0:y.querySelector(`[data-index="${g.index}"]`))==null||b.classList.remove("active"),f(g.index)}},te(kd,{icon:g.icon}),te("span",null,g.label))))))))}});var jV=t=>{throw TypeError(t)},UV=(t,e,r)=>e.has(t)||jV("Cannot "+r),Bs=(t,e,r)=>(UV(t,e,"read from private field"),r?r.call(t):e.get(t)),P0=(t,e,r)=>e.has(t)?jV("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Uc=(t,e,r,n)=>(UV(t,e,"write to private field"),e.set(t,r),r),xp,ab,lb,Ca,Qu;const GV=hpe("CREPE_MENU"),R9=er({show:()=>{},hide:()=>{}},"menuAPICtx");function ike(t,e){t.set(GV.key,{view:r=>new ske(t,r,e)})}class ske{constructor(e,r,n){P0(this,xp),P0(this,ab),P0(this,lb),P0(this,Ca),P0(this,Qu,null),this.update=h=>{Bs(this,Ca).update(h)},this.show=h=>{Uc(this,Qu,h),Bs(this,lb).value="",Bs(this,Ca).show()},this.hide=()=>{Uc(this,Qu,null),Bs(this,Ca).hide()},this.destroy=()=>{Bs(this,Ca).destroy(),Bs(this,ab).unmount(),Bs(this,xp).remove()};const i=document.createElement("div");i.classList.add("milkdown-slash-menu");const s=ze(!1),o=ze("");Uc(this,lb,o);const a=this.hide,l=po(nke,{ctx:e,config:n,show:s,filter:o,hide:a});Uc(this,ab,l),l.mount(i),Uc(this,xp,i);const c=this;Uc(this,Ca,new upe({content:Bs(this,xp),debounce:20,shouldShow(h){if(zV(h.state.selection)||HV(h.state.selection))return!1;const u=this.getContent(h,d=>["paragraph","heading"].includes(d.type.name));if(u==null||!oke(h.state.selection))return!1;const f=Bs(c,Qu);if(o.value=u.startsWith("/")?u.slice(1):u,typeof f=="number"){const d=h.state.doc.nodeSize-2,p=Math.min(f,d);return h.state.doc.resolve(p).node()!==h.state.doc.resolve(h.state.selection.from).node()?(Uc(c,Qu,null),!1):!0}return!!u.startsWith("/")},offset:10})),Bs(this,Ca).onShow=()=>{s.value=!0},Bs(this,Ca).onHide=()=>{s.value=!1},this.update(r),e.set(R9.key,{show:h=>this.show(h),hide:()=>this.hide()})}}xp=new WeakMap;ab=new WeakMap;lb=new WeakMap;Ca=new WeakMap;Qu=new WeakMap;function oke(t){if(!(t instanceof Ge))return!1;const{$head:e}=t,r=e.parent;return e.parentOffset===r.content.size}const ake=Sn({props:{onAdd:{type:Function,required:!0},addIcon:{type:String,required:!0},handleIcon:{type:String,required:!0}},setup(t){const e=ze();return()=>te(xn,null,te("div",{ref:e,class:"operation-item",onPointerdown:r=>{var n;r.preventDefault(),r.stopPropagation(),(n=e.value)==null||n.classList.add("active")},onPointerup:r=>{var n;r.preventDefault(),r.stopPropagation(),(n=e.value)==null||n.classList.remove("active"),t.onAdd()}},te(kd,{icon:t.addIcon})),te("div",{class:"operation-item"},te(kd,{icon:t.handleIcon})))}});var KV=t=>{throw TypeError(t)},YV=(t,e,r)=>e.has(t)||KV("Cannot "+r),Gc=(t,e,r)=>(YV(t,e,"read from private field"),r?r.call(t):e.get(t)),Yy=(t,e,r)=>e.has(t)?KV("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Xy=(t,e,r,n)=>(YV(t,e,"write to private field"),e.set(t,r),r),cb,th,hb,ub;class lke{constructor(e,r){Yy(this,cb),Yy(this,th),Yy(this,hb),Yy(this,ub),this.update=()=>{Gc(this,th).update()},this.destroy=()=>{Gc(this,th).destroy(),Gc(this,cb).remove(),Gc(this,hb).unmount()},this.onAdd=()=>{const c=Gc(this,ub),h=c.get(fr);h.hasFocus()||h.focus();const{state:u,dispatch:f}=h,d=Gc(this,th).active;if(!d)return;const m=d.$pos.pos+d.node.nodeSize;let g=u.tr.insert(m,uo.type(c).create());g=g.setSelection(Ge.near(g.doc.resolve(m))),f(g.scrollIntoView()),Gc(this,th).hide(),c.get(R9.key).show(g.selection.from)};var n,i,s;Xy(this,ub,e);const o=document.createElement("div");o.classList.add("milkdown-block-handle");const a=po(ake,{onAdd:this.onAdd,addIcon:(n=r==null?void 0:r.handleAddIcon)!=null?n:n6,handleIcon:(i=r==null?void 0:r.handleDragIcon)!=null?i:W5e});a.mount(o),Xy(this,hb,a),Xy(this,cb,o);const l=(s=r==null?void 0:r.blockHandle)!=null?s:{};Xy(this,th,new lfe({ctx:e,content:o,getOffset:()=>16,getPlacement:({active:c,blockDom:h})=>{if(c.node.type.name==="heading")return"left";let u=0;c.node.descendants(T=>{u+=T.childCount});const f=c.el,d=f.getBoundingClientRect(),p=h.getBoundingClientRect(),m=window.getComputedStyle(f),g=Number.parseInt(m.paddingTop,10)||0,y=Number.parseInt(m.paddingBottom,10)||0,b=d.height-g-y,x=p.height;return u>2||x<b?"left-start":"left"},...l})),this.update()}}cb=new WeakMap;th=new WeakMap;hb=new WeakMap;ub=new WeakMap;function cke(t,e){t.set(Zv.key,{filterNodes:r=>!jo(i=>["table","blockquote","math_inline"].includes(i.type.name))(r)}),t.set(t4.key,{view:()=>new lke(t,e)})}const hke=(t,e)=>{t.config(ca(St.BlockEdit)).config(r=>cke(r,e)).config(r=>ike(r,e)).use(R9).use(t4).use(GV)},uke=(t,e={})=>{t.config(ca(St.CodeMirror)).config(r=>{const{languages:n=[],theme:i}=e,s=[zd.of(_H.concat(u2e)),vxe];i&&s.push(i),e.extensions&&s.push(...e.extensions),r.update(A1.key,o=>{var a;return{extensions:s,languages:n,expandIcon:e.expandIcon||IV,searchIcon:e.searchIcon||NV,clearSearchIcon:e.clearSearchIcon||BV,searchPlaceholder:e.searchPlaceholder||"Search language",copyText:e.copyText||"Copy",copyIcon:e.copyIcon||PV,onCopy:e.onCopy||(()=>{}),noResultText:e.noResultText||"No result",renderLanguage:e.renderLanguage||o.renderLanguage,renderPreview:e.renderPreview||o.renderPreview,previewToggleButton:l=>{var c,h;const u=((c=e.previewToggleIcon)==null?void 0:c.call(e,l))||(l?B9:$V),f=((h=e.previewToggleText)==null?void 0:h.call(e,l))||(l?"Edit":"Hide");return[u,f].map(d=>d.trim()).join(" ")},previewLabel:e.previewLabel||o.previewLabel,previewLoading:e.previewLoading||o.previewLoading,previewOnlyByDefault:(a=e.previewOnlyByDefault)!=null?a:o.previewOnlyByDefault}})}).use(R2e)},fke=(t,e)=>{if(t.config(ca(St.Cursor)).config(n=>{n.update(M4.key,()=>{var i,s;return{class:"crepe-drop-cursor",width:(i=e==null?void 0:e.width)!=null?i:4,color:(s=e==null?void 0:e.color)!=null?s:!1}})}).use(zxe),(e==null?void 0:e.virtual)===!1)return;const r=Hxe();t.use(Gr(()=>r))},dke=(t,e)=>{t.config(ca(St.ImageBlock)).config(r=>{r.update(A4.key,n=>{var i,s,o,a,l,c;return{uploadButton:(i=e==null?void 0:e.inlineUploadButton)!=null?i:"Upload",imageIcon:(s=e==null?void 0:e.inlineImageIcon)!=null?s:r6,confirmButton:(o=e==null?void 0:e.inlineConfirmButton)!=null?o:I9,uploadPlaceholderText:(a=e==null?void 0:e.inlineUploadPlaceholderText)!=null?a:"or paste link",onUpload:(c=(l=e==null?void 0:e.inlineOnUpload)!=null?l:e==null?void 0:e.onUpload)!=null?c:n.onUpload,proxyDomURL:e==null?void 0:e.proxyDomURL}}),r.update(g4.key,n=>{var i,s,o,a,l,c,h,u;return{uploadButton:(i=e==null?void 0:e.blockUploadButton)!=null?i:"Upload file",imageIcon:(s=e==null?void 0:e.blockImageIcon)!=null?s:r6,captionIcon:(o=e==null?void 0:e.blockCaptionIcon)!=null?o:D5e,confirmButton:(a=e==null?void 0:e.blockConfirmButton)!=null?a:"Confirm",captionPlaceholderText:(l=e==null?void 0:e.blockCaptionPlaceholderText)!=null?l:"Write Image Caption",uploadPlaceholderText:(c=e==null?void 0:e.blockUploadPlaceholderText)!=null?c:"or paste link",onUpload:(u=(h=e==null?void 0:e.blockOnUpload)!=null?h:e==null?void 0:e.onUpload)!=null?u:n.onUpload,proxyDomURL:e==null?void 0:e.proxyDomURL}})}).use(Jpe).use(tve)},pke=ao.extendSchema(t=>e=>{const r=t(e);return{...r,toMarkdown:{match:r.toMarkdown.match,runner:(n,i)=>{var s,o;if(((s=i.attrs.language)!=null?s:"").toLowerCase()==="latex")n.addNode("math",void 0,((o=i.content.firstChild)==null?void 0:o.text)||"");else return r.toMarkdown.runner(n,i)}}}}),vp="math_inline",mg=$r(vp,()=>({group:"inline",inline:!0,draggable:!0,atom:!0,attrs:{value:{default:""}},parseDOM:[{tag:`span[data-type="${vp}"]`,getAttrs:t=>{var e;return{value:(e=t.dataset.value)!=null?e:""}}}],toDOM:t=>{const e=t.attrs.value,r=document.createElement("span");return r.dataset.type=vp,r.dataset.value=e,S9.render(e,r,{throwOnError:!1}),r},parseMarkdown:{match:t=>t.type==="inlineMath",runner:(t,e,r)=>{t.addNode(r,{value:e.value})}},toMarkdown:{match:t=>t.type.name===vp,runner:(t,e)=>{t.addNode("inlineMath",void 0,e.attrs.value)}}})),XV=bt("ToggleLatex",t=>()=>(e,r)=>{const{hasNode:n,pos:i,target:s}=zP(e,mg.type(t)),{selection:o,doc:a,tr:l}=e;if(!n){const d=a.textBetween(o.from,o.to);let p=l.replaceSelectionWith(mg.type(t).create({value:d}));return r&&r(p.setSelection(it.create(p.doc,o.from))),!0}const{from:c,to:h}=o;if(!s||i<0)return!1;let u=l.delete(i,i+1);const f=s.attrs.value;return u=u.insertText(f,i),r&&r(u.setSelection(Ge.create(u.doc,c,h+f.length-1))),!0}),bD=F4("INLINE_LATEX"),mke=Sn({props:{config:{type:Object,required:!0},innerView:{type:Object,required:!0},updateValue:{type:Object,required:!0}},setup(t){const e=n=>{if(!(!n||!(n instanceof HTMLElement))){for(;n.firstChild;)n.removeChild(n.firstChild);t.innerView.value&&n.appendChild(t.innerView.value.dom)}},r=n=>{n.preventDefault(),t.updateValue.value()};return()=>te("div",{class:"container"},t.innerView&&te("div",{ref:e}),te("button",{type:"button",onPointerdown:r},te(kd,{icon:t.config.inlineEditConfirm})))}});var JV=t=>{throw TypeError(t)},ZV=(t,e,r)=>e.has(t)||JV("Cannot "+r),rn=(t,e,r)=>(ZV(t,e,"read from private field"),r?r.call(t):e.get(t)),Sl=(t,e,r)=>e.has(t)?JV("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Jy=(t,e,r,n)=>(ZV(t,e,"write to private field"),e.set(t,r),r),wp,ef,fb,rh,kp,Cp,s6,o6;class gke{constructor(e,r,n){this.ctx=e,Sl(this,wp),Sl(this,ef),Sl(this,fb),Sl(this,rh,cx(null)),Sl(this,kp,cx(()=>{})),Sl(this,Cp),Sl(this,s6,()=>{rn(this,rh).value&&(rn(this,rh).value.destroy(),rn(this,rh).value=null)}),Sl(this,o6,s=>{const a=(()=>{const{selection:l,schema:c}=s.state;if(l.empty||!(l instanceof it))return!1;const h=l.node;if(h.type.name!==vp)return!1;const u=l.from,f=c.nodes.paragraph.create(null,c.text(h.attrs.value)),d=new tS(rn(this,fb),{state:hh.create({doc:f,schema:new pP({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},text:{group:"inline"}}}),plugins:[DN({"Mod-z":T4,"Mod-Z":Cd,"Mod-y":Cd,Enter:()=>(rn(this,kp).value(),!0)})]})});return rn(this,rh).value=d,rn(this,kp).value=()=>{const{tr:p}=s.state;p.setNodeAttribute(u,"value",d.state.doc.textContent),s.dispatch(p),requestAnimationFrame(()=>{s.focus()})},!0})();return a||rn(this,s6).call(this),a}),this.update=(s,o)=>{rn(this,ef).update(s,o)},this.destroy=()=>{rn(this,Cp).unmount(),rn(this,ef).destroy(),rn(this,wp).remove()};const i=document.createElement("div");i.className="milkdown-latex-inline-edit",Jy(this,wp,i),Jy(this,Cp,po(mke,{config:n,innerView:rn(this,rh),updateValue:rn(this,kp)})),rn(this,Cp).mount(i),Jy(this,ef,new N4({debounce:0,content:rn(this,wp),shouldShow:rn(this,o6),offset:10,floatingUIOptions:{placement:"bottom"}})),rn(this,ef).update(r),Jy(this,fb,document.createElement("div"))}}wp=new WeakMap;ef=new WeakMap;fb=new WeakMap;rh=new WeakMap;kp=new WeakMap;Cp=new WeakMap;s6=new WeakMap;o6=new WeakMap;const yke=Wn(t=>lse(/(?:\$)([^$]+)(?:\$)$/,mg.type(t),{getAttr:e=>{var r;return{value:(r=e[1])!=null?r:""}}})),bke=Wn(t=>O7(/^\$\$[\s\n]$/,ao.type(t),()=>({language:"LaTeX"}))),xke=ia("remarkMath",()=>owe);function vke(t){return _c(t,"math",(e,r,n)=>{const{value:i}=e,s={type:"code",lang:"LaTeX",value:i};n.children.splice(r,1,s)})}const wke=ia("remarkMathBlock",()=>()=>vke),kke=(t,e)=>{t.config(ca(St.Latex)).config(r=>{if(!W4(r).get().includes(St.CodeMirror))throw new Error("You need to enable CodeMirror to use LaTeX feature");r.update(A1.key,s=>({...s,renderPreview:(o,a,l)=>{if(o.toLowerCase()==="latex"&&a.length>0)return Cke(a,e==null?void 0:e.katexOptions);const c=s.renderPreview;return c(o,a,l)}})),r.set(bD.key,{view:s=>{var o;return new gke(r,s,{inlineEditConfirm:(o=e==null?void 0:e.inlineEditConfirm)!=null?o:I9,...e})}})}).use(xke).use(wke).use(mg).use(bD).use(yke).use(bke).use(pke).use(XV)};function Cke(t,e){return S9.renderToString(t,{...e,throwOnError:!1,displayMode:!0})}const Ske=(t,e)=>{t.config(ca(St.LinkTooltip)).config(Nwe).config(r=>{r.update(Ad.key,n=>{var i,s,o,a,l,c;return{...n,linkIcon:(i=e==null?void 0:e.linkIcon)!=null?i:PV,editButton:(s=e==null?void 0:e.editButton)!=null?s:B9,removeButton:(o=e==null?void 0:e.removeButton)!=null?o:i6,confirmButton:(a=e==null?void 0:e.confirmButton)!=null?a:I9,inputPlaceholder:(l=e==null?void 0:e.inputPlaceholder)!=null?l:"Paste link...",onCopyLink:(c=e==null?void 0:e.onCopyLink)!=null?c:()=>{}}})}).use(Fwe)};function Tke(t,e){t.set(z4.key,{renderLabel:({label:r,listType:n,checked:i})=>{var s,o,a;return i==null?n==="bullet"?(s=e==null?void 0:e.bulletIcon)!=null?s:L5e:r:i?(o=e==null?void 0:e.checkBoxCheckedIcon)!=null?o:I5e:(a=e==null?void 0:e.checkBoxUncheckedIcon)!=null?a:B5e}})}const _ke=(t,e)=>{t.config(ca(St.ListItem)).config(r=>Tke(r,e)).use(jwe)};function Mke(t){var e;return t.childCount<=1&&!((e=t.firstChild)!=null&&e.content.size)}function Ake(t,e){const{selection:r}=t;if(!r.empty)return null;const n=r.$anchor,i=n.parent;if(i.content.size>0||jo(a=>a.type.name==="table")(n))return null;const o=n.before();return jr.node(o,o+i.nodeSize,{class:"crepe-placeholder","data-placeholder":e})}const a6=er({text:"Please enter...",mode:"block"},"placeholderConfigCtx"),Eke=Gr(t=>new xr({key:new vr("CREPE_PLACEHOLDER"),props:{decorations:e=>{var r;if(eke(t).readonly)return null;const i=t.get(a6.key);if(i.mode==="doc"&&!Mke(e.doc)||zV(e.selection)||HV(e.selection))return null;const s=(r=i.text)!=null?r:"Please enter...",o=Ake(e,s);return o?or.create(e.doc,[o]):null}}})),Lke=(t,e)=>{t.config(ca(St.Placeholder)).config(r=>{e&&r.update(a6.key,n=>({...n,...e}))}).use(Eke).use(a6)},Oke=(t,e)=>{t.config(ca(St.Table)).config(r=>{r.update(H4.key,n=>({...n,renderButton:i=>{var s,o,a,l,c,h,u,f,d;switch(i){case"add_row":return(s=e==null?void 0:e.addRowIcon)!=null?s:n6;case"add_col":return(o=e==null?void 0:e.addColIcon)!=null?o:n6;case"delete_row":return(a=e==null?void 0:e.deleteRowIcon)!=null?a:i6;case"delete_col":return(l=e==null?void 0:e.deleteColIcon)!=null?l:i6;case"align_col_left":return(c=e==null?void 0:e.alignLeftIcon)!=null?c:M5e;case"align_col_center":return(h=e==null?void 0:e.alignCenterIcon)!=null?h:_5e;case"align_col_right":return(u=e==null?void 0:e.alignRightIcon)!=null?u:A5e;case"col_drag_handle":return(f=e==null?void 0:e.colDragHandleIcon)!=null?f:gD;case"row_drag_handle":return(d=e==null?void 0:e.rowDragHandleIcon)!=null?d:gD}}}))}).use(b5e)};function Dke(t,e){var r,n,i,s,o,a,l;const c=new WV;c.addGroup("formatting","Formatting").addItem("bold",{icon:(r=t==null?void 0:t.boldIcon)!=null?r:E5e,active:d=>d.get(De).call(ju.key,Wd.type(d)),onRun:d=>{d.get(De).call(n4.key)}}).addItem("italic",{icon:(n=t==null?void 0:t.italicIcon)!=null?n:q5e,active:d=>d.get(De).call(ju.key,vu.type(d)),onRun:d=>{d.get(De).call(r4.key)}}).addItem("strikethrough",{icon:(i=t==null?void 0:t.strikethroughIcon)!=null?i:G5e,active:d=>d.get(De).call(ju.key,Yd.type(d)),onRun:d=>{d.get(De).call(x4.key)}});const h=c.addGroup("function","Function");h.addItem("code",{icon:(s=t==null?void 0:t.codeIcon)!=null?s:RV,active:d=>d.get(De).call(ju.key,qa.type(d)),onRun:d=>{d.get(De).call(i4.key)}});const u=e&&W4(e).get();return(u==null?void 0:u.includes(St.Latex))&&h.addItem("latex",{icon:(o=t==null?void 0:t.latexIcon)!=null?o:FV,active:d=>d.get(De).call(ah.key,mg.type(d)),onRun:d=>{d.get(De).call(XV.key)}}),h.addItem("link",{icon:(a=t==null?void 0:t.linkIcon)!=null?a:V5e,active:d=>d.get(De).call(ju.key,Xs.type(d)),onRun:d=>{d.get(De).call(cV.key)}}),(l=t==null?void 0:t.buildToolbar)==null||l.call(t,c),c.build()}const Ike=Sn({props:{ctx:{type:Object,required:!0},hide:{type:Function,required:!0},show:{type:Object,required:!0},selection:{type:Object,required:!0},config:{type:Object,required:!1}},setup(t){const{ctx:e,config:r}=t,n=o=>a=>{a.preventDefault(),e&&o(e)};function i(o){return t.selection.value,e.get(oC).status!==rx.Created?!1:o(e)}const s=wd(()=>Dke(r,e));return()=>te(xn,null,s.value.map(o=>o.items.map(a=>te("button",{type:"button",class:Cn("toolbar-item",e&&i(a.active)&&"active"),onPointerdown:n(a.onRun)},te(kd,{icon:a.icon})))).reduce((o,a,l)=>(l===0?o.push(...a):o.push(te("div",{class:"divider"}),...a),o),[]))}});var QV=t=>{throw TypeError(t)},eW=(t,e,r)=>e.has(t)||QV("Cannot "+r),Hi=(t,e,r)=>(eW(t,e,"read from private field"),r?r.call(t):e.get(t)),N0=(t,e,r)=>e.has(t)?QV("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Zy=(t,e,r,n)=>(eW(t,e,"write to private field"),e.set(t,r),r),Al,Sp,db,Tp,_p;const xD=F4("CREPE_TOOLBAR");class Bke{constructor(e,r,n){N0(this,Al),N0(this,Sp),N0(this,db),N0(this,Tp),N0(this,_p,ze(!1)),this.update=(o,a)=>{Hi(this,Al).update(o,a),Hi(this,Tp).value=o.state.selection},this.destroy=()=>{Hi(this,Al).destroy(),Hi(this,db).unmount(),Hi(this,Sp).remove()},this.hide=()=>{Hi(this,Al).hide()};const i=document.createElement("div");i.className="milkdown-toolbar",Zy(this,Tp,cx(r.state.selection));const s=po(Ike,{ctx:e,hide:this.hide,config:n,selection:Hi(this,Tp),show:Hi(this,_p)});s.mount(i),Zy(this,Sp,i),Zy(this,db,s),Zy(this,Al,new N4({content:Hi(this,Sp),debounce:20,offset:10,shouldShow(o){const{doc:a,selection:l}=o.state,{empty:c,from:h,to:u}=l,f=!a.textBetween(h,u).length&&l instanceof Ge,d=!(l instanceof Ge),p=o.dom.getRootNode().activeElement,m=i.contains(p),g=!o.hasFocus()&&!m,y=!o.editable;return!(g||d||c||f||y)}})),Hi(this,Al).onShow=()=>{Hi(this,_p).value=!0},Hi(this,Al).onHide=()=>{Hi(this,_p).value=!1},this.update(r)}}Al=new WeakMap;Sp=new WeakMap;db=new WeakMap;Tp=new WeakMap;_p=new WeakMap;const Rke=(t,e)=>{t.config(ca(St.Toolbar)).config(r=>{r.set(xD.key,{view:n=>new Bke(r,n,e)})}).use(xD)};function Pke(t,e,r){switch(t){case St.CodeMirror:return uke(e,r);case St.ListItem:return _ke(e,r);case St.LinkTooltip:return Ske(e,r);case St.ImageBlock:return dke(e,r);case St.Cursor:return fke(e,r);case St.BlockEdit:return hke(e,r);case St.Placeholder:return Lke(e,r);case St.Toolbar:return Rke(e,r);case St.Table:return Oke(e,r);case St.Latex:return kke(e,r)}}var tW=t=>{throw TypeError(t)},rW=(t,e,r)=>e.has(t)||tW("Cannot "+r),qi=(t,e,r)=>(rW(t,e,"read from private field"),r?r.call(t):e.get(t)),uk=(t,e,r)=>e.has(t)?tW("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),fk=(t,e,r,n)=>(rW(t,e,"write to private field"),e.set(t,r),r),Wi,pb,Mp;class Nke{constructor({root:e,defaultValue:r=""}={}){uk(this,Wi),uk(this,pb),uk(this,Mp,!0),this.addFeature=(i,s)=>(i(qi(this,Wi),s),this),this.create=()=>qi(this,Wi).create(),this.destroy=()=>qi(this,Wi).destroy(),this.setReadonly=i=>(fk(this,Mp,!i),qi(this,Wi).action(s=>{qi(this,Wi).status===rx.Created&&s.get(fr).setProps({editable:()=>!i})}),this),this.getMarkdown=()=>qi(this,Wi).action(yue()),this.on=i=>qi(this,Wi).status!==rx.Created?(qi(this,Wi).config(s=>{const o=s.get(Dx);i(o)}),this):(qi(this,Wi).action(s=>{const o=s.get(Dx);i(o)}),this);var n;fk(this,pb,(n=typeof e=="string"?document.querySelector(e):e)!=null?n:document.body),fk(this,Wi,cC.make().config(i=>{i.inject(Q5e,this),i.inject(Z5e,[])}).config(i=>{i.set(z2,qi(this,pb)),i.set(P2,r),i.set(im,{editable:()=>qi(this,Mp)}),i.update(V4.key,s=>({...s,size:4}))}).use(Ife).use(OV).use(v5e).use(k5e).use(S5e).use(MV).use(Q1e))}get editor(){return qi(this,Wi)}get readonly(){return!qi(this,Mp)}}Wi=new WeakMap;pb=new WeakMap;Mp=new WeakMap;class nW extends Nke{constructor({features:e={},featureConfigs:r={},...n}={}){super(n);const i=cQ(r,J5e);Object.entries({...T5e,...e}).filter(([,o])=>o).map(([o])=>o).forEach(o=>{const a=i[o];Pke(o,this.editor,a)})}}nW.Feature=St;class Fke{constructor(e,r={}){Se(this,"container");Se(this,"options");Se(this,"crepe",null);Se(this,"currentPath",null);Se(this,"isDirty",!1);Se(this,"saveTimeout",null);Se(this,"lastContent","");Se(this,"initialized",!1);this.container=e,this.options=r}async init(){return await this.createEditor(""),this.initialized=!0,this.container.addEventListener("paste",this.handlePaste.bind(this)),this.container.addEventListener("drop",this.handleDrop.bind(this)),this.container.addEventListener("dragover",e=>e.preventDefault()),this}async createEditor(e){this.crepe&&this.crepe.destroy(),this.container.innerHTML="",this.lastContent=e;const r=this;this.crepe=new nW({root:this.container,defaultValue:e,features:{[St.CodeMirror]:!0,[St.ListItem]:!0,[St.LinkTooltip]:!0,[St.ImageBlock]:!0,[St.BlockEdit]:!0,[St.Toolbar]:!0,[St.Table]:!0,[St.Cursor]:!0,[St.Placeholder]:!0,[St.Latex]:!0},featureConfigs:{[St.Placeholder]:{text:"Start writing..."},[St.Toolbar]:{buildToolbar:n=>{const i=n.getGroup("formatting");i.addItem("heading1",{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12h8"/><path d="M4 18V6"/><path d="M12 18V6"/><path d="M17 12l3-2v8"/></svg>',active:s=>s.get(De).call(ah.key,Dn.type(s)),onRun:s=>{s.get(De).call(qs.key,1)}}),i.addItem("heading2",{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12h8"/><path d="M4 18V6"/><path d="M12 18V6"/><path d="M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1"/></svg>',active:s=>s.get(De).call(ah.key,Dn.type(s)),onRun:s=>{s.get(De).call(qs.key,2)}}),i.addItem("heading3",{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12h8"/><path d="M4 18V6"/><path d="M12 18V6"/><path d="M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2"/><path d="M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2"/></svg>',active:s=>s.get(De).call(ah.key,Dn.type(s)),onRun:s=>{s.get(De).call(qs.key,3)}}),i.addItem("blockquote",{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M7.17 17C7.68 17 8.15 16.71 8.37 16.26L9.79 13.42C9.93 13.14 10 12.84 10 12.53V8C10 7.45 9.55 7 9 7H5C4.45 7 4 7.45 4 8V12C4 12.55 4.45 13 5 13H7L5.97 15.06C5.52 15.95 6.17 17 7.17 17ZM17.17 17C17.68 17 18.15 16.71 18.37 16.26L19.79 13.42C19.93 13.14 20 12.84 20 12.53V8C20 7.45 19.55 7 19 7H15C14.45 7 14 7.45 14 8V12C14 12.55 14.45 13 15 13H17L15.97 15.06C15.52 15.95 16.17 17 17.17 17Z"/></svg>',active:s=>s.get(De).call(ah.key,wu.type(s)),onRun:s=>{s.get(De).call(a4.key)}}),i.addItem("codeblock",{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="m10 8-3 4 3 4"/><path d="m14 8 3 4-3 4"/></svg>',active:s=>s.get(De).call(ah.key,ao.type(s)),onRun:s=>{s.get(De).call(l4.key)}})}},[St.ImageBlock]:{onUpload:async n=>{var i,s,o,a,l,c;try{(s=(i=r.options).onStatus)==null||s.call(i,"Uploading image...");const h=await ir.uploadImage(n);return(a=(o=r.options).onStatus)==null||a.call(o,"Image uploaded"),"/images/"+h.path.replace("assets/","")}catch(h){return console.error("Failed to upload image:",h),(c=(l=r.options).onError)==null||c.call(l,"Failed to upload image: "+h.message),""}}}}}),this.crepe.on(n=>{n.markdownUpdated((i,s,o)=>{s!==o&&r.initialized&&(r.lastContent=s,r.handleChange(s))})}),await this.crepe.create()}async loadFile(e){var r,n;try{console.log("[Editor] Loading file:",e);const i=await ir.getFile(e);console.log("[Editor] File data received, content length:",i.content.length),this.currentPath=e,this.isDirty=!1,await this.setContent(i.content),console.log("[Editor] Content set complete"),(n=(r=this.options).onLoad)==null||n.call(r,e)}catch(i){throw console.error("Failed to load file:",i),i}}async setContent(e){this.lastContent=e,this.crepe&&await this.createEditor(e)}getContent(){return this.crepe?this.crepe.getMarkdown():this.lastContent}handleChange(e){var r,n;this.currentPath&&(this.isDirty=!0,(n=(r=this.options).onChange)==null||n.call(r,this.currentPath,e,!0),this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=window.setTimeout(()=>{this.save()},1e3))}async save(){var e,r,n,i,s,o;if(!(!this.currentPath||!this.isDirty))try{const a=this.getContent();await ir.updateFile(this.currentPath,a),this.isDirty=!1,(r=(e=this.options).onSave)==null||r.call(e,this.currentPath),(i=(n=this.options).onChange)==null||i.call(n,this.currentPath,a,!1)}catch(a){console.error("Failed to save:",a),(o=(s=this.options).onError)==null||o.call(s,"Failed to save: "+a.message)}}async handlePaste(e){var n;const r=(n=e.clipboardData)==null?void 0:n.items;if(r){for(const i of r)if(i.type.startsWith("image/")){e.preventDefault();const s=i.getAsFile();s&&await this.uploadAndInsertImage(s);break}}}async handleDrop(e){var n;const r=(n=e.dataTransfer)==null?void 0:n.files;if(!(!r||r.length===0))for(const i of r)i.type.startsWith("image/")&&(e.preventDefault(),await this.uploadAndInsertImage(i))}async uploadAndInsertImage(e){var r,n,i,s,o,a;try{(n=(r=this.options).onStatus)==null||n.call(r,"Uploading image...");const c="/images/"+(await ir.uploadImage(e)).path.replace("assets/","");if(this.crepe){const h=this.getContent(),u=`![${e.name.replace(/\.[^/.]+$/,"")}](${c})`;await this.setContent(h+`

`+u)}(s=(i=this.options).onStatus)==null||s.call(i,"Image uploaded")}catch(l){console.error("Failed to upload image:",l),(a=(o=this.options).onError)==null||a.call(o,"Failed to upload image: "+l.message)}}focus(){const e=this.container.querySelector(".ProseMirror");e==null||e.focus()}destroy(){var e;this.saveTimeout&&clearTimeout(this.saveTimeout),(e=this.crepe)==null||e.destroy()}getWordCount(){return this.lastContent.replace(/[#*`\[\]()]/g,"").trim().split(/\s+/).filter(n=>n.length>0).length}getCurrentPath(){return this.currentPath}setCurrentPath(e){this.currentPath=e}getHeadings(){const r=this.lastContent.split(`
`),n=[];for(let i=0;i<r.length;i++){const o=r[i].match(/^(#{1,6})\s+(.+)$/);o&&n.push({level:o[1].length,text:o[2].trim(),line:i+1})}return n}scrollToLine(e){const r=this.container.querySelector(".ProseMirror");if(!r)return;const n=r.querySelectorAll("h1, h2, h3, h4, h5, h6"),s=this.lastContent.split(`
`);let o=0;for(let l=0;l<e-1&&l<s.length;l++)s[l].match(/^#{1,6}\s+/)&&o++;const a=n[o];a&&(a.scrollIntoView({behavior:"smooth",block:"start"}),a.classList.add("heading-highlight"),setTimeout(()=>a.classList.remove("heading-highlight"),1500))}}var vD={name:"mermaid",version:"11.12.2",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.13",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},iW={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(Dle,function(){var r=1e3,n=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",h="week",u="month",f="quarter",d="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(z){var $=["th","st","nd","rd"],H=z%100;return"["+z+($[(H-20)%10]||$[H]||$[0])+"]"}},x=function(z,$,H){var U=String(z);return!U||U.length>=$?z:""+Array($+1-U.length).join(H)+z},T={s:x,z:function(z){var $=-z.utcOffset(),H=Math.abs($),U=Math.floor(H/60),q=H%60;return($<=0?"+":"-")+x(U,2,"0")+":"+x(q,2,"0")},m:function z($,H){if($.date()<H.date())return-z(H,$);var U=12*(H.year()-$.year())+(H.month()-$.month()),q=$.clone().add(U,u),re=H-q<0,E=$.clone().add(U+(re?-1:1),u);return+(-(U+(H-q)/(re?q-E:E-q))||0)},a:function(z){return z<0?Math.ceil(z)||0:Math.floor(z)},p:function(z){return{M:u,y:d,w:h,d:c,D:p,h:l,m:a,s:o,ms:s,Q:f}[z]||String(z||"").toLowerCase().replace(/s$/,"")},u:function(z){return z===void 0}},S="en",w={};w[S]=b;var _="$isDayjsObject",I=function(z){return z instanceof P||!(!z||!z[_])},N=function z($,H,U){var q;if(!$)return S;if(typeof $=="string"){var re=$.toLowerCase();w[re]&&(q=re),H&&(w[re]=H,q=re);var E=$.split("-");if(!q&&E.length>1)return z(E[0])}else{var de=$.name;w[de]=$,q=de}return!U&&q&&(S=q),q||!U&&S},L=function(z,$){if(I(z))return z.clone();var H=typeof $=="object"?$:{};return H.date=z,H.args=arguments,new P(H)},D=T;D.l=N,D.i=I,D.w=function(z,$){return L(z,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var P=function(){function z(H){this.$L=N(H.locale,null,!0),this.parse(H),this.$x=this.$x||H.x||{},this[_]=!0}var $=z.prototype;return $.parse=function(H){this.$d=function(U){var q=U.date,re=U.utc;if(q===null)return new Date(NaN);if(D.u(q))return new Date;if(q instanceof Date)return new Date(q);if(typeof q=="string"&&!/Z$/i.test(q)){var E=q.match(g);if(E){var de=E[2]-1||0,Te=(E[7]||"0").substring(0,3);return re?new Date(Date.UTC(E[1],de,E[3]||1,E[4]||0,E[5]||0,E[6]||0,Te)):new Date(E[1],de,E[3]||1,E[4]||0,E[5]||0,E[6]||0,Te)}}return new Date(q)}(H),this.init()},$.init=function(){var H=this.$d;this.$y=H.getFullYear(),this.$M=H.getMonth(),this.$D=H.getDate(),this.$W=H.getDay(),this.$H=H.getHours(),this.$m=H.getMinutes(),this.$s=H.getSeconds(),this.$ms=H.getMilliseconds()},$.$utils=function(){return D},$.isValid=function(){return this.$d.toString()!==m},$.isSame=function(H,U){var q=L(H);return this.startOf(U)<=q&&q<=this.endOf(U)},$.isAfter=function(H,U){return L(H)<this.startOf(U)},$.isBefore=function(H,U){return this.endOf(U)<L(H)},$.$g=function(H,U,q){return D.u(H)?this[U]:this.set(q,H)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(H,U){var q=this,re=!!D.u(U)||U,E=D.p(H),de=function(Ct,xt){var jt=D.w(q.$u?Date.UTC(q.$y,xt,Ct):new Date(q.$y,xt,Ct),q);return re?jt:jt.endOf(c)},Te=function(Ct,xt){return D.w(q.toDate()[Ct].apply(q.toDate("s"),(re?[0,0,0,0]:[23,59,59,999]).slice(xt)),q)},O=this.$W,et=this.$M,He=this.$D,Le="set"+(this.$u?"UTC":"");switch(E){case d:return re?de(1,0):de(31,11);case u:return re?de(1,et):de(0,et+1);case h:var Xe=this.$locale().weekStart||0,dt=(O<Xe?O+7:O)-Xe;return de(re?He-dt:He+(6-dt),et);case c:case p:return Te(Le+"Hours",0);case l:return Te(Le+"Minutes",1);case a:return Te(Le+"Seconds",2);case o:return Te(Le+"Milliseconds",3);default:return this.clone()}},$.endOf=function(H){return this.startOf(H,!1)},$.$set=function(H,U){var q,re=D.p(H),E="set"+(this.$u?"UTC":""),de=(q={},q[c]=E+"Date",q[p]=E+"Date",q[u]=E+"Month",q[d]=E+"FullYear",q[l]=E+"Hours",q[a]=E+"Minutes",q[o]=E+"Seconds",q[s]=E+"Milliseconds",q)[re],Te=re===c?this.$D+(U-this.$W):U;if(re===u||re===d){var O=this.clone().set(p,1);O.$d[de](Te),O.init(),this.$d=O.set(p,Math.min(this.$D,O.daysInMonth())).$d}else de&&this.$d[de](Te);return this.init(),this},$.set=function(H,U){return this.clone().$set(H,U)},$.get=function(H){return this[D.p(H)]()},$.add=function(H,U){var q,re=this;H=Number(H);var E=D.p(U),de=function(et){var He=L(re);return D.w(He.date(He.date()+Math.round(et*H)),re)};if(E===u)return this.set(u,this.$M+H);if(E===d)return this.set(d,this.$y+H);if(E===c)return de(1);if(E===h)return de(7);var Te=(q={},q[a]=n,q[l]=i,q[o]=r,q)[E]||1,O=this.$d.getTime()+H*Te;return D.w(O,this)},$.subtract=function(H,U){return this.add(-1*H,U)},$.format=function(H){var U=this,q=this.$locale();if(!this.isValid())return q.invalidDate||m;var re=H||"YYYY-MM-DDTHH:mm:ssZ",E=D.z(this),de=this.$H,Te=this.$m,O=this.$M,et=q.weekdays,He=q.months,Le=q.meridiem,Xe=function(xt,jt,R,W){return xt&&(xt[jt]||xt(U,re))||R[jt].slice(0,W)},dt=function(xt){return D.s(de%12||12,xt,"0")},Ct=Le||function(xt,jt,R){var W=xt<12?"AM":"PM";return R?W.toLowerCase():W};return re.replace(y,function(xt,jt){return jt||function(R){switch(R){case"YY":return String(U.$y).slice(-2);case"YYYY":return D.s(U.$y,4,"0");case"M":return O+1;case"MM":return D.s(O+1,2,"0");case"MMM":return Xe(q.monthsShort,O,He,3);case"MMMM":return Xe(He,O);case"D":return U.$D;case"DD":return D.s(U.$D,2,"0");case"d":return String(U.$W);case"dd":return Xe(q.weekdaysMin,U.$W,et,2);case"ddd":return Xe(q.weekdaysShort,U.$W,et,3);case"dddd":return et[U.$W];case"H":return String(de);case"HH":return D.s(de,2,"0");case"h":return dt(1);case"hh":return dt(2);case"a":return Ct(de,Te,!0);case"A":return Ct(de,Te,!1);case"m":return String(Te);case"mm":return D.s(Te,2,"0");case"s":return String(U.$s);case"ss":return D.s(U.$s,2,"0");case"SSS":return D.s(U.$ms,3,"0");case"Z":return E}return null}(xt)||E.replace(":","")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(H,U,q){var re,E=this,de=D.p(U),Te=L(H),O=(Te.utcOffset()-this.utcOffset())*n,et=this-Te,He=function(){return D.m(E,Te)};switch(de){case d:re=He()/12;break;case u:re=He();break;case f:re=He()/3;break;case h:re=(et-O)/6048e5;break;case c:re=(et-O)/864e5;break;case l:re=et/i;break;case a:re=et/n;break;case o:re=et/r;break;default:re=et}return q?re:D.a(re)},$.daysInMonth=function(){return this.endOf(u).$D},$.$locale=function(){return w[this.$L]},$.locale=function(H,U){if(!H)return this.$L;var q=this.clone(),re=N(H,U,!0);return re&&(q.$L=re),q},$.clone=function(){return D.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},z}(),K=P.prototype;return L.prototype=K,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",u],["$y",d],["$D",p]].forEach(function(z){K[z[1]]=function($){return this.$g($,z[0],z[1])}}),L.extend=function(z,$){return z.$i||(z($,P,L),z.$i=!0),L},L.locale=N,L.isDayjs=I,L.unix=function(z){return L(1e3*z)},L.en=w[S],L.Ls=w,L.p={},L})})(iW);var $ke=iW.exports;const zke=bN($ke);var sW=Object.defineProperty,k=(t,e)=>sW(t,"name",{value:e,configurable:!0}),Hke=(t,e)=>{for(var r in e)sW(t,r,{get:e[r],enumerable:!0})},ya={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},he={trace:k((...t)=>{},"trace"),debug:k((...t)=>{},"debug"),info:k((...t)=>{},"info"),warn:k((...t)=>{},"warn"),error:k((...t)=>{},"error"),fatal:k((...t)=>{},"fatal")},P9=k(function(t="fatal"){let e=ya.fatal;typeof t=="string"?t.toLowerCase()in ya&&(e=ya[t]):typeof t=="number"&&(e=t),he.trace=()=>{},he.debug=()=>{},he.info=()=>{},he.warn=()=>{},he.error=()=>{},he.fatal=()=>{},e<=ya.fatal&&(he.fatal=console.error?console.error.bind(console,hs("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",hs("FATAL"))),e<=ya.error&&(he.error=console.error?console.error.bind(console,hs("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",hs("ERROR"))),e<=ya.warn&&(he.warn=console.warn?console.warn.bind(console,hs("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",hs("WARN"))),e<=ya.info&&(he.info=console.info?console.info.bind(console,hs("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",hs("INFO"))),e<=ya.debug&&(he.debug=console.debug?console.debug.bind(console,hs("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",hs("DEBUG"))),e<=ya.trace&&(he.trace=console.debug?console.debug.bind(console,hs("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",hs("TRACE")))},"setLogLevel"),hs=k(t=>`%c${zke().format("ss.SSS")} : ${t} : `,"format");const mb={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:t=>t>=255?255:t<0?0:t,g:t=>t>=255?255:t<0?0:t,b:t=>t>=255?255:t<0?0:t,h:t=>t%360,s:t=>t>=100?100:t<0?0:t,l:t=>t>=100?100:t<0?0:t,a:t=>t>=1?1:t<0?0:t},toLinear:t=>{const e=t/255;return t>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92},hue2rgb:(t,e,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t),hsl2rgb:({h:t,s:e,l:r},n)=>{if(!e)return r*2.55;t/=360,e/=100,r/=100;const i=r<.5?r*(1+e):r+e-r*e,s=2*r-i;switch(n){case"r":return mb.hue2rgb(s,i,t+1/3)*255;case"g":return mb.hue2rgb(s,i,t)*255;case"b":return mb.hue2rgb(s,i,t-1/3)*255}},rgb2hsl:({r:t,g:e,b:r},n)=>{t/=255,e/=255,r/=255;const i=Math.max(t,e,r),s=Math.min(t,e,r),o=(i+s)/2;if(n==="l")return o*100;if(i===s)return 0;const a=i-s,l=o>.5?a/(2-i-s):a/(i+s);if(n==="s")return l*100;switch(i){case t:return((e-r)/a+(e<r?6:0))*60;case e:return((r-t)/a+2)*60;case r:return((t-e)/a+4)*60;default:return-1}}},qke={clamp:(t,e,r)=>e>r?Math.min(e,Math.max(r,t)):Math.min(r,Math.max(e,t)),round:t=>Math.round(t*1e10)/1e10},Vke={dec2hex:t=>{const e=Math.round(t).toString(16);return e.length>1?e:`0${e}`}},vt={channel:mb,lang:qke,unit:Vke},El={};for(let t=0;t<=255;t++)El[t]=vt.unit.dec2hex(t);const Mn={ALL:0,RGB:1,HSL:2};class Wke{constructor(){this.type=Mn.ALL}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=Mn.ALL}is(e){return this.type===e}}class jke{constructor(e,r){this.color=r,this.changed=!1,this.data=e,this.type=new Wke}set(e,r){return this.color=r,this.changed=!1,this.data=e,this.type.type=Mn.ALL,this}_ensureHSL(){const e=this.data,{h:r,s:n,l:i}=e;r===void 0&&(e.h=vt.channel.rgb2hsl(e,"h")),n===void 0&&(e.s=vt.channel.rgb2hsl(e,"s")),i===void 0&&(e.l=vt.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r,g:n,b:i}=e;r===void 0&&(e.r=vt.channel.hsl2rgb(e,"r")),n===void 0&&(e.g=vt.channel.hsl2rgb(e,"g")),i===void 0&&(e.b=vt.channel.hsl2rgb(e,"b"))}get r(){const e=this.data,r=e.r;return!this.type.is(Mn.HSL)&&r!==void 0?r:(this._ensureHSL(),vt.channel.hsl2rgb(e,"r"))}get g(){const e=this.data,r=e.g;return!this.type.is(Mn.HSL)&&r!==void 0?r:(this._ensureHSL(),vt.channel.hsl2rgb(e,"g"))}get b(){const e=this.data,r=e.b;return!this.type.is(Mn.HSL)&&r!==void 0?r:(this._ensureHSL(),vt.channel.hsl2rgb(e,"b"))}get h(){const e=this.data,r=e.h;return!this.type.is(Mn.RGB)&&r!==void 0?r:(this._ensureRGB(),vt.channel.rgb2hsl(e,"h"))}get s(){const e=this.data,r=e.s;return!this.type.is(Mn.RGB)&&r!==void 0?r:(this._ensureRGB(),vt.channel.rgb2hsl(e,"s"))}get l(){const e=this.data,r=e.l;return!this.type.is(Mn.RGB)&&r!==void 0?r:(this._ensureRGB(),vt.channel.rgb2hsl(e,"l"))}get a(){return this.data.a}set r(e){this.type.set(Mn.RGB),this.changed=!0,this.data.r=e}set g(e){this.type.set(Mn.RGB),this.changed=!0,this.data.g=e}set b(e){this.type.set(Mn.RGB),this.changed=!0,this.data.b=e}set h(e){this.type.set(Mn.HSL),this.changed=!0,this.data.h=e}set s(e){this.type.set(Mn.HSL),this.changed=!0,this.data.s=e}set l(e){this.type.set(Mn.HSL),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}}const j4=new jke({r:0,g:0,b:0,a:0},"transparent"),Cf={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:t=>{if(t.charCodeAt(0)!==35)return;const e=t.match(Cf.re);if(!e)return;const r=e[1],n=parseInt(r,16),i=r.length,s=i%4===0,o=i>4,a=o?1:17,l=o?8:4,c=s?0:-1,h=o?255:15;return j4.set({r:(n>>l*(c+3)&h)*a,g:(n>>l*(c+2)&h)*a,b:(n>>l*(c+1)&h)*a,a:s?(n&h)*a/255:1},t)},stringify:t=>{const{r:e,g:r,b:n,a:i}=t;return i<1?`#${El[Math.round(e)]}${El[Math.round(r)]}${El[Math.round(n)]}${El[Math.round(i*255)]}`:`#${El[Math.round(e)]}${El[Math.round(r)]}${El[Math.round(n)]}`}},gh={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:t=>{const e=t.match(gh.hueRe);if(e){const[,r,n]=e;switch(n){case"grad":return vt.channel.clamp.h(parseFloat(r)*.9);case"rad":return vt.channel.clamp.h(parseFloat(r)*180/Math.PI);case"turn":return vt.channel.clamp.h(parseFloat(r)*360)}}return vt.channel.clamp.h(parseFloat(t))},parse:t=>{const e=t.charCodeAt(0);if(e!==104&&e!==72)return;const r=t.match(gh.re);if(!r)return;const[,n,i,s,o,a]=r;return j4.set({h:gh._hue2deg(n),s:vt.channel.clamp.s(parseFloat(i)),l:vt.channel.clamp.l(parseFloat(s)),a:o?vt.channel.clamp.a(a?parseFloat(o)/100:parseFloat(o)):1},t)},stringify:t=>{const{h:e,s:r,l:n,a:i}=t;return i<1?`hsla(${vt.lang.round(e)}, ${vt.lang.round(r)}%, ${vt.lang.round(n)}%, ${i})`:`hsl(${vt.lang.round(e)}, ${vt.lang.round(r)}%, ${vt.lang.round(n)}%)`}},xm={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:t=>{t=t.toLowerCase();const e=xm.colors[t];if(e)return Cf.parse(e)},stringify:t=>{const e=Cf.stringify(t);for(const r in xm.colors)if(xm.colors[r]===e)return r}},Ap={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:t=>{const e=t.charCodeAt(0);if(e!==114&&e!==82)return;const r=t.match(Ap.re);if(!r)return;const[,n,i,s,o,a,l,c,h]=r;return j4.set({r:vt.channel.clamp.r(i?parseFloat(n)*2.55:parseFloat(n)),g:vt.channel.clamp.g(o?parseFloat(s)*2.55:parseFloat(s)),b:vt.channel.clamp.b(l?parseFloat(a)*2.55:parseFloat(a)),a:c?vt.channel.clamp.a(h?parseFloat(c)/100:parseFloat(c)):1},t)},stringify:t=>{const{r:e,g:r,b:n,a:i}=t;return i<1?`rgba(${vt.lang.round(e)}, ${vt.lang.round(r)}, ${vt.lang.round(n)}, ${vt.lang.round(i)})`:`rgb(${vt.lang.round(e)}, ${vt.lang.round(r)}, ${vt.lang.round(n)})`}},ea={format:{keyword:xm,hex:Cf,rgb:Ap,rgba:Ap,hsl:gh,hsla:gh},parse:t=>{if(typeof t!="string")return t;const e=Cf.parse(t)||Ap.parse(t)||gh.parse(t)||xm.parse(t);if(e)return e;throw new Error(`Unsupported color format: "${t}"`)},stringify:t=>!t.changed&&t.color?t.color:t.type.is(Mn.HSL)||t.data.r===void 0?gh.stringify(t):t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?Ap.stringify(t):Cf.stringify(t)},oW=(t,e)=>{const r=ea.parse(t);for(const n in e)r[n]=vt.channel.clamp[n](e[n]);return ea.stringify(r)},vm=(t,e,r=0,n=1)=>{if(typeof t!="number")return oW(t,{a:e});const i=j4.set({r:vt.channel.clamp.r(t),g:vt.channel.clamp.g(e),b:vt.channel.clamp.b(r),a:vt.channel.clamp.a(n)});return ea.stringify(i)},Uke=t=>{const{r:e,g:r,b:n}=ea.parse(t),i=.2126*vt.channel.toLinear(e)+.7152*vt.channel.toLinear(r)+.0722*vt.channel.toLinear(n);return vt.lang.round(i)},Gke=t=>Uke(t)>=.5,P1=t=>!Gke(t),aW=(t,e,r)=>{const n=ea.parse(t),i=n[e],s=vt.channel.clamp[e](i+r);return i!==s&&(n[e]=s),ea.stringify(n)},Ve=(t,e)=>aW(t,"l",e),ot=(t,e)=>aW(t,"l",-e),Y=(t,e)=>{const r=ea.parse(t),n={};for(const i in e)e[i]&&(n[i]=r[i]+e[i]);return oW(t,n)},Kke=(t,e,r=50)=>{const{r:n,g:i,b:s,a:o}=ea.parse(t),{r:a,g:l,b:c,a:h}=ea.parse(e),u=r/100,f=u*2-1,d=o-h,m=((f*d===-1?f:(f+d)/(1+f*d))+1)/2,g=1-m,y=n*m+a*g,b=i*m+l*g,x=s*m+c*g,T=o*u+h*(1-u);return vm(y,b,x,T)},Ee=(t,e=100)=>{const r=ea.parse(t);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,Kke(r,t,e)};var lW=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,wm=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,Yke=/\s*%%.*\n/gm,ed,cW=(ed=class extends Error{constructor(e){super(e),this.name="UnknownDiagramError"}},k(ed,"UnknownDiagramError"),ed),hu={},N9=k(function(t,e){t=t.replace(lW,"").replace(wm,"").replace(Yke,`
`);for(const[r,{detector:n}]of Object.entries(hu))if(n(t,e))return r;throw new cW(`No diagram type detected matching given configuration for text: ${t}`)},"detectType"),l6=k((...t)=>{for(const{id:e,detector:r,loader:n}of t)hW(e,r,n)},"registerLazyLoadedDiagrams"),hW=k((t,e,r)=>{hu[t]&&he.warn(`Detector with key ${t} already exists. Overwriting.`),hu[t]={detector:e,loader:r},he.debug(`Detector with key ${t} added${r?" with loader":""}`)},"addDetector"),Xke=k(t=>hu[t].loader,"getDiagramLoader"),c6=k((t,e,{depth:r=2,clobber:n=!1}={})=>{const i={depth:r,clobber:n};return Array.isArray(e)&&!Array.isArray(t)?(e.forEach(s=>c6(t,s,i)),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach(s=>{t.includes(s)||t.push(s)}),t):t===void 0||r<=0?t!=null&&typeof t=="object"&&typeof e=="object"?Object.assign(t,e):e:(e!==void 0&&typeof t=="object"&&typeof e=="object"&&Object.keys(e).forEach(s=>{typeof e[s]=="object"&&(t[s]===void 0||typeof t[s]=="object")?(t[s]===void 0&&(t[s]=Array.isArray(e[s])?[]:{}),t[s]=c6(t[s],e[s],{depth:r-1,clobber:n})):(n||typeof t[s]!="object"&&typeof e[s]!="object")&&(t[s]=e[s])}),t)},"assignWithDepth"),Zr=c6,U4="#ffffff",G4="#f2f2f2",ri=k((t,e)=>e?Y(t,{s:-40,l:10}):Y(t,{s:-40,l:-10}),"mkBorder"),td,Jke=(td=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var r,n,i,s,o,a,l,c,h,u,f,d,p,m,g,y,b,x,T,S,w;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||Y(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||Y(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||ri(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||ri(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||ri(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||ri(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||Ee(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||Ee(this.tertiaryColor),this.lineColor=this.lineColor||Ee(this.background),this.arrowheadColor=this.arrowheadColor||Ee(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?ot(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||ot(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||Ee(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||Ve(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||ot(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||ot(this.mainBkg,10)):(this.rowOdd=this.rowOdd||Ve(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Ve(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Y(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Y(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Y(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Y(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Y(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Y(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||Y(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Y(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Y(this.primaryColor,{h:330}),this.darkMode)for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScale"+_]=ot(this["cScale"+_],75);else for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScale"+_]=ot(this["cScale"+_],25);for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScaleInv"+_]=this["cScaleInv"+_]||Ee(this["cScale"+_]);for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this.darkMode?this["cScalePeer"+_]=this["cScalePeer"+_]||Ve(this["cScale"+_],10):this["cScalePeer"+_]=this["cScalePeer"+_]||ot(this["cScale"+_],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScaleLabel"+_]=this["cScaleLabel"+_]||this.scaleLabelColor;const e=this.darkMode?-4:-1;for(let _=0;_<5;_++)this["surface"+_]=this["surface"+_]||Y(this.mainBkg,{h:180,s:-15,l:e*(5+_*3)}),this["surfacePeer"+_]=this["surfacePeer"+_]||Y(this.mainBkg,{h:180,s:-15,l:e*(8+_*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||Y(this.primaryColor,{h:64}),this.fillType3=this.fillType3||Y(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||Y(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||Y(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||Y(this.primaryColor,{h:128}),this.fillType7=this.fillType7||Y(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Y(this.primaryColor,{l:-10}),this.pie5=this.pie5||Y(this.secondaryColor,{l:-10}),this.pie6=this.pie6||Y(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||Y(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Y(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Y(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Y(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||Y(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||Y(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:((r=this.radar)==null?void 0:r.axisColor)||this.lineColor,axisStrokeWidth:((n=this.radar)==null?void 0:n.axisStrokeWidth)||2,axisLabelFontSize:((i=this.radar)==null?void 0:i.axisLabelFontSize)||12,curveOpacity:((s=this.radar)==null?void 0:s.curveOpacity)||.5,curveStrokeWidth:((o=this.radar)==null?void 0:o.curveStrokeWidth)||2,graticuleColor:((a=this.radar)==null?void 0:a.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((l=this.radar)==null?void 0:l.graticuleStrokeWidth)||1,graticuleOpacity:((c=this.radar)==null?void 0:c.graticuleOpacity)||.3,legendBoxSize:((h=this.radar)==null?void 0:h.legendBoxSize)||12,legendFontSize:((u=this.radar)==null?void 0:u.legendFontSize)||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Y(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Y(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Y(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Y(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Y(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Y(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||P1(this.quadrant1Fill)?Ve(this.quadrant1Fill):ot(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((f=this.xyChart)==null?void 0:f.backgroundColor)||this.background,titleColor:((d=this.xyChart)==null?void 0:d.titleColor)||this.primaryTextColor,xAxisTitleColor:((p=this.xyChart)==null?void 0:p.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((m=this.xyChart)==null?void 0:m.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((g=this.xyChart)==null?void 0:g.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((y=this.xyChart)==null?void 0:y.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((b=this.xyChart)==null?void 0:b.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((x=this.xyChart)==null?void 0:x.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((T=this.xyChart)==null?void 0:T.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((S=this.xyChart)==null?void 0:S.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((w=this.xyChart)==null?void 0:w.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?ot(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Y(this.primaryColor,{h:-30}),this.git4=this.git4||Y(this.primaryColor,{h:-60}),this.git5=this.git5||Y(this.primaryColor,{h:-90}),this.git6=this.git6||Y(this.primaryColor,{h:60}),this.git7=this.git7||Y(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ve(this.git0,25),this.git1=Ve(this.git1,25),this.git2=Ve(this.git2,25),this.git3=Ve(this.git3,25),this.git4=Ve(this.git4,25),this.git5=Ve(this.git5,25),this.git6=Ve(this.git6,25),this.git7=Ve(this.git7,25)):(this.git0=ot(this.git0,25),this.git1=ot(this.git1,25),this.git2=ot(this.git2,25),this.git3=ot(this.git3,25),this.git4=ot(this.git4,25),this.git5=ot(this.git5,25),this.git6=ot(this.git6,25),this.git7=ot(this.git7,25)),this.gitInv0=this.gitInv0||Ee(this.git0),this.gitInv1=this.gitInv1||Ee(this.git1),this.gitInv2=this.gitInv2||Ee(this.git2),this.gitInv3=this.gitInv3||Ee(this.git3),this.gitInv4=this.gitInv4||Ee(this.git4),this.gitInv5=this.gitInv5||Ee(this.git5),this.gitInv6=this.gitInv6||Ee(this.git6),this.gitInv7=this.gitInv7||Ee(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||U4,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||G4}calculate(e){if(typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(n=>{this[n]=e[n]}),this.updateColors(),r.forEach(n=>{this[n]=e[n]})}},k(td,"Theme"),td),Zke=k(t=>{const e=new Jke;return e.calculate(t),e},"getThemeVariables"),rd,Qke=(rd=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=Ve(this.primaryColor,16),this.tertiaryColor=Y(this.primaryColor,{h:-160}),this.primaryBorderColor=Ee(this.background),this.secondaryBorderColor=ri(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ri(this.tertiaryColor,this.darkMode),this.primaryTextColor=Ee(this.primaryColor),this.secondaryTextColor=Ee(this.secondaryColor),this.tertiaryTextColor=Ee(this.tertiaryColor),this.lineColor=Ee(this.background),this.textColor=Ee(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=Ve(Ee("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=vm(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=ot("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=ot(this.sectionBkgColor,10),this.taskBorderColor=vm(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=vm(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Ve(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||ot(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var e,r,n,i,s,o,a,l,c,h,u,f,d,p,m,g,y,b,x,T,S;this.secondBkg=Ve(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=Ve(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=Ve(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Y(this.primaryColor,{h:64}),this.fillType3=Y(this.secondaryColor,{h:64}),this.fillType4=Y(this.primaryColor,{h:-64}),this.fillType5=Y(this.secondaryColor,{h:-64}),this.fillType6=Y(this.primaryColor,{h:128}),this.fillType7=Y(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Y(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Y(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Y(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Y(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Y(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Y(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Y(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Y(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Y(this.primaryColor,{h:330});for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleInv"+w]=this["cScaleInv"+w]||Ee(this["cScale"+w]);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScalePeer"+w]=this["cScalePeer"+w]||Ve(this["cScale"+w],10);for(let w=0;w<5;w++)this["surface"+w]=this["surface"+w]||Y(this.mainBkg,{h:30,s:-30,l:-(-10+w*4)}),this["surfacePeer"+w]=this["surfacePeer"+w]||Y(this.mainBkg,{h:30,s:-30,l:-(-7+w*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleLabel"+w]=this["cScaleLabel"+w]||this.scaleLabelColor;for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["pie"+w]=this["cScale"+w];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Y(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Y(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Y(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Y(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Y(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Y(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||P1(this.quadrant1Fill)?Ve(this.quadrant1Fill):ot(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((n=this.xyChart)==null?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((a=this.xyChart)==null?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((h=this.xyChart)==null?void 0:h.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((u=this.xyChart)==null?void 0:u.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:((f=this.radar)==null?void 0:f.axisColor)||this.lineColor,axisStrokeWidth:((d=this.radar)==null?void 0:d.axisStrokeWidth)||2,axisLabelFontSize:((p=this.radar)==null?void 0:p.axisLabelFontSize)||12,curveOpacity:((m=this.radar)==null?void 0:m.curveOpacity)||.5,curveStrokeWidth:((g=this.radar)==null?void 0:g.curveStrokeWidth)||2,graticuleColor:((y=this.radar)==null?void 0:y.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((b=this.radar)==null?void 0:b.graticuleStrokeWidth)||1,graticuleOpacity:((x=this.radar)==null?void 0:x.graticuleOpacity)||.3,legendBoxSize:((T=this.radar)==null?void 0:T.legendBoxSize)||12,legendFontSize:((S=this.radar)==null?void 0:S.legendFontSize)||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?ot(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Ve(this.secondaryColor,20),this.git1=Ve(this.pie2||this.secondaryColor,20),this.git2=Ve(this.pie3||this.tertiaryColor,20),this.git3=Ve(this.pie4||Y(this.primaryColor,{h:-30}),20),this.git4=Ve(this.pie5||Y(this.primaryColor,{h:-60}),20),this.git5=Ve(this.pie6||Y(this.primaryColor,{h:-90}),10),this.git6=Ve(this.pie7||Y(this.primaryColor,{h:60}),10),this.git7=Ve(this.pie8||Y(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||Ee(this.git0),this.gitInv1=this.gitInv1||Ee(this.git1),this.gitInv2=this.gitInv2||Ee(this.git2),this.gitInv3=this.gitInv3||Ee(this.git3),this.gitInv4=this.gitInv4||Ee(this.git4),this.gitInv5=this.gitInv5||Ee(this.git5),this.gitInv6=this.gitInv6||Ee(this.git6),this.gitInv7=this.gitInv7||Ee(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Ee(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Ee(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ve(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ve(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(e){if(typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(n=>{this[n]=e[n]}),this.updateColors(),r.forEach(n=>{this[n]=e[n]})}},k(rd,"Theme"),rd),e3e=k(t=>{const e=new Qke;return e.calculate(t),e},"getThemeVariables"),nd,t3e=(nd=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=Y(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=Y(this.primaryColor,{h:-160}),this.primaryBorderColor=ri(this.primaryColor,this.darkMode),this.secondaryBorderColor=ri(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ri(this.tertiaryColor,this.darkMode),this.primaryTextColor=Ee(this.primaryColor),this.secondaryTextColor=Ee(this.secondaryColor),this.tertiaryTextColor=Ee(this.tertiaryColor),this.lineColor=Ee(this.background),this.textColor=Ee(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=vm(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var e,r,n,i,s,o,a,l,c,h,u,f,d,p,m,g,y,b,x,T,S;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Y(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Y(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Y(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Y(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Y(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Y(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Y(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Y(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Y(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||ot(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||ot(this.tertiaryColor,40);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScale"+w]=ot(this["cScale"+w],10),this["cScalePeer"+w]=this["cScalePeer"+w]||ot(this["cScale"+w],25);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleInv"+w]=this["cScaleInv"+w]||Y(this["cScale"+w],{h:180});for(let w=0;w<5;w++)this["surface"+w]=this["surface"+w]||Y(this.mainBkg,{h:30,l:-(5+w*5)}),this["surfacePeer"+w]=this["surfacePeer"+w]||Y(this.mainBkg,{h:30,l:-(7+w*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||Ee(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||Ee(this.labelTextColor);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleLabel"+w]=this["cScaleLabel"+w]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=Ve(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Ve(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||Ve(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Y(this.primaryColor,{h:64}),this.fillType3=Y(this.secondaryColor,{h:64}),this.fillType4=Y(this.primaryColor,{h:-64}),this.fillType5=Y(this.secondaryColor,{h:-64}),this.fillType6=Y(this.primaryColor,{h:128}),this.fillType7=Y(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||Y(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||Y(this.primaryColor,{l:-10}),this.pie5=this.pie5||Y(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Y(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||Y(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||Y(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||Y(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||Y(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||Y(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||Y(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Y(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Y(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Y(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Y(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Y(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Y(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||P1(this.quadrant1Fill)?Ve(this.quadrant1Fill):ot(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:((e=this.radar)==null?void 0:e.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((n=this.radar)==null?void 0:n.axisLabelFontSize)||12,curveOpacity:((i=this.radar)==null?void 0:i.curveOpacity)||.5,curveStrokeWidth:((s=this.radar)==null?void 0:s.curveStrokeWidth)||2,graticuleColor:((o=this.radar)==null?void 0:o.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((a=this.radar)==null?void 0:a.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((c=this.radar)==null?void 0:c.legendBoxSize)||12,legendFontSize:((h=this.radar)==null?void 0:h.legendFontSize)||12},this.xyChart={backgroundColor:((u=this.xyChart)==null?void 0:u.backgroundColor)||this.background,titleColor:((f=this.xyChart)==null?void 0:f.titleColor)||this.primaryTextColor,xAxisTitleColor:((d=this.xyChart)==null?void 0:d.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((p=this.xyChart)==null?void 0:p.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((m=this.xyChart)==null?void 0:m.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((g=this.xyChart)==null?void 0:g.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((y=this.xyChart)==null?void 0:y.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((b=this.xyChart)==null?void 0:b.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((x=this.xyChart)==null?void 0:x.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((T=this.xyChart)==null?void 0:T.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((S=this.xyChart)==null?void 0:S.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Y(this.primaryColor,{h:-30}),this.git4=this.git4||Y(this.primaryColor,{h:-60}),this.git5=this.git5||Y(this.primaryColor,{h:-90}),this.git6=this.git6||Y(this.primaryColor,{h:60}),this.git7=this.git7||Y(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ve(this.git0,25),this.git1=Ve(this.git1,25),this.git2=Ve(this.git2,25),this.git3=Ve(this.git3,25),this.git4=Ve(this.git4,25),this.git5=Ve(this.git5,25),this.git6=Ve(this.git6,25),this.git7=Ve(this.git7,25)):(this.git0=ot(this.git0,25),this.git1=ot(this.git1,25),this.git2=ot(this.git2,25),this.git3=ot(this.git3,25),this.git4=ot(this.git4,25),this.git5=ot(this.git5,25),this.git6=ot(this.git6,25),this.git7=ot(this.git7,25)),this.gitInv0=this.gitInv0||ot(Ee(this.git0),25),this.gitInv1=this.gitInv1||Ee(this.git1),this.gitInv2=this.gitInv2||Ee(this.git2),this.gitInv3=this.gitInv3||Ee(this.git3),this.gitInv4=this.gitInv4||Ee(this.git4),this.gitInv5=this.gitInv5||Ee(this.git5),this.gitInv6=this.gitInv6||Ee(this.git6),this.gitInv7=this.gitInv7||Ee(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Ee(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Ee(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||U4,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||G4}calculate(e){if(Object.keys(this).forEach(n=>{this[n]==="calculated"&&(this[n]=void 0)}),typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(n=>{this[n]=e[n]}),this.updateColors(),r.forEach(n=>{this[n]=e[n]})}},k(nd,"Theme"),nd),r3e=k(t=>{const e=new t3e;return e.calculate(t),e},"getThemeVariables"),id,n3e=(id=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=Ve("#cde498",10),this.primaryBorderColor=ri(this.primaryColor,this.darkMode),this.secondaryBorderColor=ri(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ri(this.tertiaryColor,this.darkMode),this.primaryTextColor=Ee(this.primaryColor),this.secondaryTextColor=Ee(this.secondaryColor),this.tertiaryTextColor=Ee(this.primaryColor),this.lineColor=Ee(this.background),this.textColor=Ee(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,r,n,i,s,o,a,l,c,h,u,f,d,p,m,g,y,b,x,T,S;this.actorBorder=ot(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Y(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Y(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Y(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Y(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Y(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Y(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Y(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Y(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Y(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||ot(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||ot(this.tertiaryColor,40);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScale"+w]=ot(this["cScale"+w],10),this["cScalePeer"+w]=this["cScalePeer"+w]||ot(this["cScale"+w],25);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleInv"+w]=this["cScaleInv"+w]||Y(this["cScale"+w],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleLabel"+w]=this["cScaleLabel"+w]||this.scaleLabelColor;for(let w=0;w<5;w++)this["surface"+w]=this["surface"+w]||Y(this.mainBkg,{h:30,s:-30,l:-(5+w*5)}),this["surfacePeer"+w]=this["surfacePeer"+w]||Y(this.mainBkg,{h:30,s:-30,l:-(8+w*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Ve(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Ve(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Y(this.primaryColor,{h:64}),this.fillType3=Y(this.secondaryColor,{h:64}),this.fillType4=Y(this.primaryColor,{h:-64}),this.fillType5=Y(this.secondaryColor,{h:-64}),this.fillType6=Y(this.primaryColor,{h:128}),this.fillType7=Y(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Y(this.primaryColor,{l:-30}),this.pie5=this.pie5||Y(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Y(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||Y(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Y(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Y(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Y(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||Y(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||Y(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Y(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Y(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Y(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Y(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Y(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Y(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||P1(this.quadrant1Fill)?Ve(this.quadrant1Fill):ot(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:((e=this.radar)==null?void 0:e.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((n=this.radar)==null?void 0:n.axisLabelFontSize)||12,curveOpacity:((i=this.radar)==null?void 0:i.curveOpacity)||.5,curveStrokeWidth:((s=this.radar)==null?void 0:s.curveStrokeWidth)||2,graticuleColor:((o=this.radar)==null?void 0:o.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((a=this.radar)==null?void 0:a.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((c=this.radar)==null?void 0:c.legendBoxSize)||12,legendFontSize:((h=this.radar)==null?void 0:h.legendFontSize)||12},this.xyChart={backgroundColor:((u=this.xyChart)==null?void 0:u.backgroundColor)||this.background,titleColor:((f=this.xyChart)==null?void 0:f.titleColor)||this.primaryTextColor,xAxisTitleColor:((d=this.xyChart)==null?void 0:d.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((p=this.xyChart)==null?void 0:p.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((m=this.xyChart)==null?void 0:m.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((g=this.xyChart)==null?void 0:g.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((y=this.xyChart)==null?void 0:y.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((b=this.xyChart)==null?void 0:b.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((x=this.xyChart)==null?void 0:x.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((T=this.xyChart)==null?void 0:T.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((S=this.xyChart)==null?void 0:S.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Y(this.primaryColor,{h:-30}),this.git4=this.git4||Y(this.primaryColor,{h:-60}),this.git5=this.git5||Y(this.primaryColor,{h:-90}),this.git6=this.git6||Y(this.primaryColor,{h:60}),this.git7=this.git7||Y(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ve(this.git0,25),this.git1=Ve(this.git1,25),this.git2=Ve(this.git2,25),this.git3=Ve(this.git3,25),this.git4=Ve(this.git4,25),this.git5=Ve(this.git5,25),this.git6=Ve(this.git6,25),this.git7=Ve(this.git7,25)):(this.git0=ot(this.git0,25),this.git1=ot(this.git1,25),this.git2=ot(this.git2,25),this.git3=ot(this.git3,25),this.git4=ot(this.git4,25),this.git5=ot(this.git5,25),this.git6=ot(this.git6,25),this.git7=ot(this.git7,25)),this.gitInv0=this.gitInv0||Ee(this.git0),this.gitInv1=this.gitInv1||Ee(this.git1),this.gitInv2=this.gitInv2||Ee(this.git2),this.gitInv3=this.gitInv3||Ee(this.git3),this.gitInv4=this.gitInv4||Ee(this.git4),this.gitInv5=this.gitInv5||Ee(this.git5),this.gitInv6=this.gitInv6||Ee(this.git6),this.gitInv7=this.gitInv7||Ee(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Ee(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Ee(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||U4,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||G4}calculate(e){if(typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(n=>{this[n]=e[n]}),this.updateColors(),r.forEach(n=>{this[n]=e[n]})}},k(id,"Theme"),id),i3e=k(t=>{const e=new n3e;return e.calculate(t),e},"getThemeVariables"),sd,s3e=(sd=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=Ve(this.contrast,55),this.background="#ffffff",this.tertiaryColor=Y(this.primaryColor,{h:-160}),this.primaryBorderColor=ri(this.primaryColor,this.darkMode),this.secondaryBorderColor=ri(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ri(this.tertiaryColor,this.darkMode),this.primaryTextColor=Ee(this.primaryColor),this.secondaryTextColor=Ee(this.secondaryColor),this.tertiaryTextColor=Ee(this.tertiaryColor),this.lineColor=Ee(this.background),this.textColor=Ee(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Ve(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,r,n,i,s,o,a,l,c,h,u,f,d,p,m,g,y,b,x,T,S;this.secondBkg=Ve(this.contrast,55),this.border2=this.contrast,this.actorBorder=Ve(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleInv"+w]=this["cScaleInv"+w]||Ee(this["cScale"+w]);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this.darkMode?this["cScalePeer"+w]=this["cScalePeer"+w]||Ve(this["cScale"+w],10):this["cScalePeer"+w]=this["cScalePeer"+w]||ot(this["cScale"+w],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleLabel"+w]=this["cScaleLabel"+w]||this.scaleLabelColor;for(let w=0;w<5;w++)this["surface"+w]=this["surface"+w]||Y(this.mainBkg,{l:-(5+w*5)}),this["surfacePeer"+w]=this["surfacePeer"+w]||Y(this.mainBkg,{l:-(8+w*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=Ve(this.contrast,30),this.sectionBkgColor2=Ve(this.contrast,30),this.taskBorderColor=ot(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=Ve(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=ot(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Y(this.primaryColor,{h:64}),this.fillType3=Y(this.secondaryColor,{h:64}),this.fillType4=Y(this.primaryColor,{h:-64}),this.fillType5=Y(this.secondaryColor,{h:-64}),this.fillType6=Y(this.primaryColor,{h:128}),this.fillType7=Y(this.secondaryColor,{h:128});for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["pie"+w]=this["cScale"+w];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Y(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Y(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Y(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Y(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Y(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Y(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||P1(this.quadrant1Fill)?Ve(this.quadrant1Fill):ot(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((n=this.xyChart)==null?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((a=this.xyChart)==null?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((h=this.xyChart)==null?void 0:h.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((u=this.xyChart)==null?void 0:u.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:((f=this.radar)==null?void 0:f.axisColor)||this.lineColor,axisStrokeWidth:((d=this.radar)==null?void 0:d.axisStrokeWidth)||2,axisLabelFontSize:((p=this.radar)==null?void 0:p.axisLabelFontSize)||12,curveOpacity:((m=this.radar)==null?void 0:m.curveOpacity)||.5,curveStrokeWidth:((g=this.radar)==null?void 0:g.curveStrokeWidth)||2,graticuleColor:((y=this.radar)==null?void 0:y.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((b=this.radar)==null?void 0:b.graticuleStrokeWidth)||1,graticuleOpacity:((x=this.radar)==null?void 0:x.graticuleOpacity)||.3,legendBoxSize:((T=this.radar)==null?void 0:T.legendBoxSize)||12,legendFontSize:((S=this.radar)==null?void 0:S.legendFontSize)||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=ot(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||Y(this.primaryColor,{h:-30}),this.git4=this.pie5||Y(this.primaryColor,{h:-60}),this.git5=this.pie6||Y(this.primaryColor,{h:-90}),this.git6=this.pie7||Y(this.primaryColor,{h:60}),this.git7=this.pie8||Y(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||Ee(this.git0),this.gitInv1=this.gitInv1||Ee(this.git1),this.gitInv2=this.gitInv2||Ee(this.git2),this.gitInv3=this.gitInv3||Ee(this.git3),this.gitInv4=this.gitInv4||Ee(this.git4),this.gitInv5=this.gitInv5||Ee(this.git5),this.gitInv6=this.gitInv6||Ee(this.git6),this.gitInv7=this.gitInv7||Ee(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||U4,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||G4}calculate(e){if(typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(n=>{this[n]=e[n]}),this.updateColors(),r.forEach(n=>{this[n]=e[n]})}},k(sd,"Theme"),sd),o3e=k(t=>{const e=new s3e;return e.calculate(t),e},"getThemeVariables"),Xa={base:{getThemeVariables:Zke},dark:{getThemeVariables:e3e},default:{getThemeVariables:r3e},forest:{getThemeVariables:i3e},neutral:{getThemeVariables:o3e}},Co={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},uW={...Co,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:Xa.default.getThemeVariables(),sequence:{...Co.sequence,messageFont:k(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:k(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:k(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...Co.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Co.c4,useWidth:void 0,personFont:k(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...Co.flowchart,inheritDir:!1},external_personFont:k(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:k(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:k(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:k(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:k(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:k(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:k(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:k(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:k(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:k(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:k(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:k(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:k(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:k(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:k(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:k(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:k(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:k(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:k(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:k(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:k(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...Co.pie,useWidth:984},xyChart:{...Co.xyChart,useWidth:void 0},requirement:{...Co.requirement,useWidth:void 0},packet:{...Co.packet},radar:{...Co.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},fW=k((t,e="")=>Object.keys(t).reduce((r,n)=>Array.isArray(t[n])?r:typeof t[n]=="object"&&t[n]!==null?[...r,e+n,...fW(t[n],"")]:[...r,e+n],[]),"keyify"),a3e=new Set(fW(uW,"")),dW=uW,Ix=k(t=>{if(he.debug("sanitizeDirective called with",t),!(typeof t!="object"||t==null)){if(Array.isArray(t)){t.forEach(e=>Ix(e));return}for(const e of Object.keys(t)){if(he.debug("Checking key",e),e.startsWith("__")||e.includes("proto")||e.includes("constr")||!a3e.has(e)||t[e]==null){he.debug("sanitize deleting key: ",e),delete t[e];continue}if(typeof t[e]=="object"){he.debug("sanitizing object",e),Ix(t[e]);continue}const r=["themeCSS","fontFamily","altFontFamily"];for(const n of r)e.includes(n)&&(he.debug("sanitizing css option",e),t[e]=l3e(t[e]))}if(t.themeVariables)for(const e of Object.keys(t.themeVariables)){const r=t.themeVariables[e];r!=null&&r.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[e]="")}he.debug("After sanitization",t)}},"sanitizeDirective"),l3e=k(t=>{let e=0,r=0;for(const n of t){if(e<r)return"{ /* ERROR: Unbalanced CSS */ }";n==="{"?e++:n==="}"&&r++}return e!==r?"{ /* ERROR: Unbalanced CSS */ }":t},"sanitizeCss"),Ed=Object.freeze(dW),Ti=Zr({},Ed),Bx,uu=[],km=Zr({},Ed),K4=k((t,e)=>{let r=Zr({},t),n={};for(const i of e)gW(i),n=Zr(n,i);if(r=Zr(r,n),n.theme&&n.theme in Xa){const i=Zr({},Bx),s=Zr(i.themeVariables||{},n.themeVariables);r.theme&&r.theme in Xa&&(r.themeVariables=Xa[r.theme].getThemeVariables(s))}return km=r,yW(km),km},"updateCurrentConfig"),c3e=k(t=>(Ti=Zr({},Ed),Ti=Zr(Ti,t),t.theme&&Xa[t.theme]&&(Ti.themeVariables=Xa[t.theme].getThemeVariables(t.themeVariables)),K4(Ti,uu),Ti),"setSiteConfig"),h3e=k(t=>{Bx=Zr({},t)},"saveConfigFromInitialize"),u3e=k(t=>(Ti=Zr(Ti,t),K4(Ti,uu),Ti),"updateSiteConfig"),pW=k(()=>Zr({},Ti),"getSiteConfig"),mW=k(t=>(yW(t),Zr(km,t),$n()),"setConfig"),$n=k(()=>Zr({},km),"getConfig"),gW=k(t=>{t&&(["secure",...Ti.secure??[]].forEach(e=>{Object.hasOwn(t,e)&&(he.debug(`Denied attempt to modify a secure key ${e}`,t[e]),delete t[e])}),Object.keys(t).forEach(e=>{e.startsWith("__")&&delete t[e]}),Object.keys(t).forEach(e=>{typeof t[e]=="string"&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],typeof t[e]=="object"&&gW(t[e])}))},"sanitize"),f3e=k(t=>{var e;Ix(t),t.fontFamily&&!((e=t.themeVariables)!=null&&e.fontFamily)&&(t.themeVariables={...t.themeVariables,fontFamily:t.fontFamily}),uu.push(t),K4(Ti,uu)},"addDirective"),Rx=k((t=Ti)=>{uu=[],K4(t,uu)},"reset"),d3e={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},wD={},p3e=k(t=>{wD[t]||(he.warn(d3e[t]),wD[t]=!0)},"issueWarning"),yW=k(t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&p3e("LAZY_LOAD_DEPRECATED")},"checkConfig"),ZEe=k(()=>{let t={};Bx&&(t=Zr(t,Bx));for(const e of uu)t=Zr(t,e);return t},"getUserDefinedConfig"),N1=/<br\s*\/?>/gi,m3e=k(t=>t?vW(t).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),g3e=(()=>{let t=!1;return()=>{t||(bW(),t=!0)}})();function bW(){const t="data-temp-href-target";cn.addHook("beforeSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute("target")&&e.setAttribute(t,e.getAttribute("target")??"")}),cn.addHook("afterSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute(t)&&(e.setAttribute("target",e.getAttribute(t)??""),e.removeAttribute(t),e.getAttribute("target")==="_blank"&&e.setAttribute("rel","noopener"))})}k(bW,"setupDompurifyHooks");var xW=k(t=>(g3e(),cn.sanitize(t)),"removeScript"),kD=k((t,e)=>{var r;if(((r=e.flowchart)==null?void 0:r.htmlLabels)!==!1){const n=e.securityLevel;n==="antiscript"||n==="strict"?t=xW(t):n!=="loose"&&(t=vW(t),t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/=/g,"&equals;"),t=v3e(t))}return t},"sanitizeMore"),Ls=k((t,e)=>t&&(e.dompurifyConfig?t=cn.sanitize(kD(t,e),e.dompurifyConfig).toString():t=cn.sanitize(kD(t,e),{FORBID_TAGS:["style"]}).toString(),t),"sanitizeText"),y3e=k((t,e)=>typeof t=="string"?Ls(t,e):t.flat().map(r=>Ls(r,e)),"sanitizeTextOrArray"),b3e=k(t=>N1.test(t),"hasBreaks"),x3e=k(t=>t.split(N1),"splitBreaks"),v3e=k(t=>t.replace(/#br#/g,"<br/>"),"placeholderToBreak"),vW=k(t=>t.replace(N1,"#br#"),"breakToPlaceholder"),w3e=k(t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=CSS.escape(e)),e},"getUrl"),tn=k(t=>!(t===!1||["false","null","0"].includes(String(t).trim().toLowerCase())),"evaluate"),k3e=k(function(...t){const e=t.filter(r=>!isNaN(r));return Math.max(...e)},"getMax"),C3e=k(function(...t){const e=t.filter(r=>!isNaN(r));return Math.min(...e)},"getMin"),CD=k(function(t){const e=t.split(/(,)/),r=[];for(let n=0;n<e.length;n++){let i=e[n];if(i===","&&n>0&&n+1<e.length){const s=e[n-1],o=e[n+1];S3e(s,o)&&(i=s+","+o,n++,r.pop())}r.push(T3e(i))}return r.join("")},"parseGenericTypes"),h6=k((t,e)=>Math.max(0,t.split(e).length-1),"countOccurrence"),S3e=k((t,e)=>{const r=h6(t,"~"),n=h6(e,"~");return r===1&&n===1},"shouldCombineSets"),T3e=k(t=>{const e=h6(t,"~");let r=!1;if(e<=1)return t;e%2!==0&&t.startsWith("~")&&(t=t.substring(1),r=!0);const n=[...t];let i=n.indexOf("~"),s=n.lastIndexOf("~");for(;i!==-1&&s!==-1&&i!==s;)n[i]="<",n[s]=">",i=n.indexOf("~"),s=n.lastIndexOf("~");return r&&n.unshift("~"),n.join("")},"processSet"),SD=k(()=>window.MathMLElement!==void 0,"isMathMLSupported"),u6=/\$\$(.*)\$\$/g,Ld=k(t=>{var e;return(((e=t.match(u6))==null?void 0:e.length)??0)>0},"hasKatex"),QEe=k(async(t,e)=>{const r=document.createElement("div");r.innerHTML=await F9(t,e),r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0";const n=document.querySelector("body");n==null||n.insertAdjacentElement("beforeend",r);const i={width:r.clientWidth,height:r.clientHeight};return r.remove(),i},"calculateMathMLDimensions"),_3e=k(async(t,e)=>{if(!Ld(t))return t;if(!(SD()||e.legacyMathML||e.forceLegacyMathML))return t.replace(u6,"MathML is unsupported in this environment.");{const{default:r}=await X(async()=>{const{default:i}=await Promise.resolve().then(()=>Y4e);return{default:i}},void 0),n=e.forceLegacyMathML||!SD()&&e.legacyMathML?"htmlAndMathml":"mathml";return t.split(N1).map(i=>Ld(i)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${i}</div>`:`<div>${i}</div>`).join("").replace(u6,(i,s)=>r.renderToString(s,{throwOnError:!0,displayMode:!0,output:n}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatexUnsanitized"),F9=k(async(t,e)=>Ls(await _3e(t,e),e),"renderKatexSanitized"),r0={getRows:m3e,sanitizeText:Ls,sanitizeTextOrArray:y3e,hasBreaks:b3e,splitBreaks:x3e,lineBreakRegex:N1,removeScript:xW,getUrl:w3e,evaluate:tn,getMax:k3e,getMin:C3e},M3e=k(function(t,e){for(let r of e)t.attr(r[0],r[1])},"d3Attrs"),A3e=k(function(t,e,r){let n=new Map;return r?(n.set("width","100%"),n.set("style",`max-width: ${e}px;`)):(n.set("height",t),n.set("width",e)),n},"calculateSvgSizeAttrs"),wW=k(function(t,e,r,n){const i=A3e(e,r,n);M3e(t,i)},"configureSvgSize"),E3e=k(function(t,e,r,n){const i=e.node().getBBox(),s=i.width,o=i.height;he.info(`SVG bounds: ${s}x${o}`,i);let a=0,l=0;he.info(`Graph bounds: ${a}x${l}`,t),a=s+r*2,l=o+r*2,he.info(`Calculated bounds: ${a}x${l}`),wW(e,l,a,n);const c=`${i.x-r} ${i.y-r} ${i.width+2*r} ${i.height+2*r}`;e.attr("viewBox",c)},"setupGraphViewbox"),gb={},L3e=k((t,e,r)=>{let n="";return t in gb&&gb[t]?n=gb[t](r):he.warn(`No theme found for ${t}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }
   & p {
    margin: 0
   }

  ${n}

  ${e}
`},"getStyles"),O3e=k((t,e)=>{e!==void 0&&(gb[t]=e)},"addStylesForDiagram"),D3e=L3e,kW={};Hke(kW,{clear:()=>I3e,getAccDescription:()=>N3e,getAccTitle:()=>R3e,getDiagramTitle:()=>$3e,setAccDescription:()=>P3e,setAccTitle:()=>B3e,setDiagramTitle:()=>F3e});var $9="",z9="",H9="",q9=k(t=>Ls(t,$n()),"sanitizeText"),I3e=k(()=>{$9="",H9="",z9=""},"clear"),B3e=k(t=>{$9=q9(t).replace(/^\s+/g,"")},"setAccTitle"),R3e=k(()=>$9,"getAccTitle"),P3e=k(t=>{H9=q9(t).replace(/\n\s+/g,`
`)},"setAccDescription"),N3e=k(()=>H9,"getAccDescription"),F3e=k(t=>{z9=q9(t)},"setDiagramTitle"),$3e=k(()=>z9,"getDiagramTitle"),TD=he,z3e=P9,Jt=$n,eLe=mW,tLe=Ed,V9=k(t=>Ls(t,Jt()),"sanitizeText"),H3e=E3e,q3e=k(()=>kW,"getCommonDb"),Px={},Nx=k((t,e,r)=>{var n;Px[t]&&TD.warn(`Diagram with id ${t} already registered. Overwriting.`),Px[t]=e,r&&hW(t,r),O3e(t,e.styles),(n=e.injectUtils)==null||n.call(e,TD,z3e,Jt,V9,H3e,q3e(),()=>{})},"registerDiagram"),f6=k(t=>{if(t in Px)return Px[t];throw new V3e(t)},"getDiagram"),od,V3e=(od=class extends Error{constructor(e){super(`Diagram ${e} not found.`)}},k(od,"DiagramNotFoundError"),od),W3e={value:()=>{}};function CW(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new yb(r)}function yb(t){this._=t}function j3e(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}yb.prototype=CW.prototype={constructor:yb,on:function(t,e){var r=this._,n=j3e(t+"",r),i,s=-1,o=n.length;if(arguments.length<2){for(;++s<o;)if((i=(t=n[s]).type)&&(i=U3e(r[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=n[s]).type)r[i]=_D(r[i],t.name,e);else if(e==null)for(i in r)r[i]=_D(r[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new yb(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,s;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],n=0,i=s.length;n<i;++n)s[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],i=0,s=n.length;i<s;++i)n[i].value.apply(e,r)}};function U3e(t,e){for(var r=0,n=t.length,i;r<n;++r)if((i=t[r]).name===e)return i.value}function _D(t,e,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===e){t[n]=W3e,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var d6="http://www.w3.org/1999/xhtml";const MD={svg:"http://www.w3.org/2000/svg",xhtml:d6,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Y4(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),MD.hasOwnProperty(e)?{space:MD[e],local:t}:t}function G3e(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===d6&&e.documentElement.namespaceURI===d6?e.createElement(t):e.createElementNS(r,t)}}function K3e(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function SW(t){var e=Y4(t);return(e.local?K3e:G3e)(e)}function Y3e(){}function W9(t){return t==null?Y3e:function(){return this.querySelector(t)}}function X3e(t){typeof t!="function"&&(t=W9(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var s=e[i],o=s.length,a=n[i]=new Array(o),l,c,h=0;h<o;++h)(l=s[h])&&(c=t.call(l,l.__data__,h,s))&&("__data__"in l&&(c.__data__=l.__data__),a[h]=c);return new is(n,this._parents)}function J3e(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Z3e(){return[]}function TW(t){return t==null?Z3e:function(){return this.querySelectorAll(t)}}function Q3e(t){return function(){return J3e(t.apply(this,arguments))}}function eCe(t){typeof t=="function"?t=Q3e(t):t=TW(t);for(var e=this._groups,r=e.length,n=[],i=[],s=0;s<r;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(n.push(t.call(l,l.__data__,c,o)),i.push(l));return new is(n,i)}function _W(t){return function(){return this.matches(t)}}function MW(t){return function(e){return e.matches(t)}}var tCe=Array.prototype.find;function rCe(t){return function(){return tCe.call(this.children,t)}}function nCe(){return this.firstElementChild}function iCe(t){return this.select(t==null?nCe:rCe(typeof t=="function"?t:MW(t)))}var sCe=Array.prototype.filter;function oCe(){return Array.from(this.children)}function aCe(t){return function(){return sCe.call(this.children,t)}}function lCe(t){return this.selectAll(t==null?oCe:aCe(typeof t=="function"?t:MW(t)))}function cCe(t){typeof t!="function"&&(t=_W(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var s=e[i],o=s.length,a=n[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new is(n,this._parents)}function AW(t){return new Array(t.length)}function hCe(){return new is(this._enter||this._groups.map(AW),this._parents)}function Fx(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Fx.prototype={constructor:Fx,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function uCe(t){return function(){return t}}function fCe(t,e,r,n,i,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],n[o]=a):r[o]=new Fx(t,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function dCe(t,e,r,n,i,s,o){var a,l,c=new Map,h=e.length,u=s.length,f=new Array(h),d;for(a=0;a<h;++a)(l=e[a])&&(f[a]=d=o.call(l,l.__data__,a,e)+"",c.has(d)?i[a]=l:c.set(d,l));for(a=0;a<u;++a)d=o.call(t,s[a],a,s)+"",(l=c.get(d))?(n[a]=l,l.__data__=s[a],c.delete(d)):r[a]=new Fx(t,s[a]);for(a=0;a<h;++a)(l=e[a])&&c.get(f[a])===l&&(i[a]=l)}function pCe(t){return t.__data__}function mCe(t,e){if(!arguments.length)return Array.from(this,pCe);var r=e?dCe:fCe,n=this._parents,i=this._groups;typeof t!="function"&&(t=uCe(t));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var h=n[c],u=i[c],f=u.length,d=gCe(t.call(h,h&&h.__data__,c,n)),p=d.length,m=a[c]=new Array(p),g=o[c]=new Array(p),y=l[c]=new Array(f);r(h,u,m,g,y,d,e);for(var b=0,x=0,T,S;b<p;++b)if(T=m[b]){for(b>=x&&(x=b+1);!(S=g[x])&&++x<p;);T._next=S||null}}return o=new is(o,n),o._enter=a,o._exit=l,o}function gCe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function yCe(){return new is(this._exit||this._groups.map(AW),this._parents)}function bCe(t,e,r){var n=this.enter(),i=this,s=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),r==null?s.remove():r(s),n&&i?n.merge(i).order():i}function xCe(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,i=r.length,s=n.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var c=r[l],h=n[l],u=c.length,f=a[l]=new Array(u),d,p=0;p<u;++p)(d=c[p]||h[p])&&(f[p]=d);for(;l<i;++l)a[l]=r[l];return new is(a,this._parents)}function vCe(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],i=n.length-1,s=n[i],o;--i>=0;)(o=n[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function wCe(t){t||(t=kCe);function e(u,f){return u&&f?t(u.__data__,f.__data__):!u-!f}for(var r=this._groups,n=r.length,i=new Array(n),s=0;s<n;++s){for(var o=r[s],a=o.length,l=i[s]=new Array(a),c,h=0;h<a;++h)(c=o[h])&&(l[h]=c);l.sort(e)}return new is(i,this._parents).order()}function kCe(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function CCe(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function SCe(){return Array.from(this)}function TCe(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,s=n.length;i<s;++i){var o=n[i];if(o)return o}return null}function _Ce(){let t=0;for(const e of this)++t;return t}function MCe(){return!this.node()}function ACe(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var i=e[r],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function ECe(t){return function(){this.removeAttribute(t)}}function LCe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function OCe(t,e){return function(){this.setAttribute(t,e)}}function DCe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ICe(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function BCe(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function RCe(t,e){var r=Y4(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?LCe:ECe:typeof e=="function"?r.local?BCe:ICe:r.local?DCe:OCe)(r,e))}function EW(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function PCe(t){return function(){this.style.removeProperty(t)}}function NCe(t,e,r){return function(){this.style.setProperty(t,e,r)}}function FCe(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function $Ce(t,e,r){return arguments.length>1?this.each((e==null?PCe:typeof e=="function"?FCe:NCe)(t,e,r??"")):Od(this.node(),t)}function Od(t,e){return t.style.getPropertyValue(e)||EW(t).getComputedStyle(t,null).getPropertyValue(e)}function zCe(t){return function(){delete this[t]}}function HCe(t,e){return function(){this[t]=e}}function qCe(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function VCe(t,e){return arguments.length>1?this.each((e==null?zCe:typeof e=="function"?qCe:HCe)(t,e)):this.node()[t]}function LW(t){return t.trim().split(/^|\s+/)}function j9(t){return t.classList||new OW(t)}function OW(t){this._node=t,this._names=LW(t.getAttribute("class")||"")}OW.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function DW(t,e){for(var r=j9(t),n=-1,i=e.length;++n<i;)r.add(e[n])}function IW(t,e){for(var r=j9(t),n=-1,i=e.length;++n<i;)r.remove(e[n])}function WCe(t){return function(){DW(this,t)}}function jCe(t){return function(){IW(this,t)}}function UCe(t,e){return function(){(e.apply(this,arguments)?DW:IW)(this,t)}}function GCe(t,e){var r=LW(t+"");if(arguments.length<2){for(var n=j9(this.node()),i=-1,s=r.length;++i<s;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof e=="function"?UCe:e?WCe:jCe)(r,e))}function KCe(){this.textContent=""}function YCe(t){return function(){this.textContent=t}}function XCe(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function JCe(t){return arguments.length?this.each(t==null?KCe:(typeof t=="function"?XCe:YCe)(t)):this.node().textContent}function ZCe(){this.innerHTML=""}function QCe(t){return function(){this.innerHTML=t}}function e6e(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function t6e(t){return arguments.length?this.each(t==null?ZCe:(typeof t=="function"?e6e:QCe)(t)):this.node().innerHTML}function r6e(){this.nextSibling&&this.parentNode.appendChild(this)}function n6e(){return this.each(r6e)}function i6e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function s6e(){return this.each(i6e)}function o6e(t){var e=typeof t=="function"?t:SW(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function a6e(){return null}function l6e(t,e){var r=typeof t=="function"?t:SW(t),n=e==null?a6e:typeof e=="function"?e:W9(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function c6e(){var t=this.parentNode;t&&t.removeChild(this)}function h6e(){return this.each(c6e)}function u6e(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function f6e(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function d6e(t){return this.select(t?f6e:u6e)}function p6e(t){return arguments.length?this.property("__data__",t):this.node().__data__}function m6e(t){return function(e){t.call(this,e,this.__data__)}}function g6e(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function y6e(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,i=e.length,s;r<i;++r)s=e[r],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++n]=s;++n?e.length=n:delete this.__on}}}function b6e(t,e,r){return function(){var n=this.__on,i,s=m6e(e);if(n){for(var o=0,a=n.length;o<a;++o)if((i=n[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=r),i.value=e;return}}this.addEventListener(t.type,s,r),i={type:t.type,name:t.name,value:e,listener:s,options:r},n?n.push(i):this.__on=[i]}}function x6e(t,e,r){var n=g6e(t+""),i,s=n.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,h;l<c;++l)for(i=0,h=a[l];i<s;++i)if((o=n[i]).type===h.type&&o.name===h.name)return h.value}return}for(a=e?b6e:y6e,i=0;i<s;++i)this.each(a(n[i],e,r));return this}function BW(t,e,r){var n=EW(t),i=n.CustomEvent;typeof i=="function"?i=new i(e,r):(i=n.document.createEvent("Event"),r?(i.initEvent(e,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function v6e(t,e){return function(){return BW(this,t,e)}}function w6e(t,e){return function(){return BW(this,t,e.apply(this,arguments))}}function k6e(t,e){return this.each((typeof e=="function"?w6e:v6e)(t,e))}function*C6e(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,s=n.length,o;i<s;++i)(o=n[i])&&(yield o)}var RW=[null];function is(t,e){this._groups=t,this._parents=e}function F1(){return new is([[document.documentElement]],RW)}function S6e(){return this}is.prototype=F1.prototype={constructor:is,select:X3e,selectAll:eCe,selectChild:iCe,selectChildren:lCe,filter:cCe,data:mCe,enter:hCe,exit:yCe,join:bCe,merge:xCe,selection:S6e,order:vCe,sort:wCe,call:CCe,nodes:SCe,node:TCe,size:_Ce,empty:MCe,each:ACe,attr:RCe,style:$Ce,property:VCe,classed:GCe,text:JCe,html:t6e,raise:n6e,lower:s6e,append:o6e,insert:l6e,remove:h6e,clone:d6e,datum:p6e,on:x6e,dispatch:k6e,[Symbol.iterator]:C6e};function Ft(t){return typeof t=="string"?new is([[document.querySelector(t)]],[document.documentElement]):new is([[t]],RW)}function U9(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function PW(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function $1(){}var gg=.7,$x=1/gg,Sf="\\s*([+-]?\\d+)\\s*",yg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ko="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",T6e=/^#([0-9a-f]{3,8})$/,_6e=new RegExp(`^rgb\\(${Sf},${Sf},${Sf}\\)$`),M6e=new RegExp(`^rgb\\(${Ko},${Ko},${Ko}\\)$`),A6e=new RegExp(`^rgba\\(${Sf},${Sf},${Sf},${yg}\\)$`),E6e=new RegExp(`^rgba\\(${Ko},${Ko},${Ko},${yg}\\)$`),L6e=new RegExp(`^hsl\\(${yg},${Ko},${Ko}\\)$`),O6e=new RegExp(`^hsla\\(${yg},${Ko},${Ko},${yg}\\)$`),AD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};U9($1,bg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ED,formatHex:ED,formatHex8:D6e,formatHsl:I6e,formatRgb:LD,toString:LD});function ED(){return this.rgb().formatHex()}function D6e(){return this.rgb().formatHex8()}function I6e(){return NW(this).formatHsl()}function LD(){return this.rgb().formatRgb()}function bg(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=T6e.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?OD(e):r===3?new Li(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Qy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Qy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=_6e.exec(t))?new Li(e[1],e[2],e[3],1):(e=M6e.exec(t))?new Li(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=A6e.exec(t))?Qy(e[1],e[2],e[3],e[4]):(e=E6e.exec(t))?Qy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=L6e.exec(t))?BD(e[1],e[2]/100,e[3]/100,1):(e=O6e.exec(t))?BD(e[1],e[2]/100,e[3]/100,e[4]):AD.hasOwnProperty(t)?OD(AD[t]):t==="transparent"?new Li(NaN,NaN,NaN,0):null}function OD(t){return new Li(t>>16&255,t>>8&255,t&255,1)}function Qy(t,e,r,n){return n<=0&&(t=e=r=NaN),new Li(t,e,r,n)}function B6e(t){return t instanceof $1||(t=bg(t)),t?(t=t.rgb(),new Li(t.r,t.g,t.b,t.opacity)):new Li}function p6(t,e,r,n){return arguments.length===1?B6e(t):new Li(t,e,r,n??1)}function Li(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}U9(Li,p6,PW($1,{brighter(t){return t=t==null?$x:Math.pow($x,t),new Li(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?gg:Math.pow(gg,t),new Li(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Li(Uh(this.r),Uh(this.g),Uh(this.b),zx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:DD,formatHex:DD,formatHex8:R6e,formatRgb:ID,toString:ID}));function DD(){return`#${yh(this.r)}${yh(this.g)}${yh(this.b)}`}function R6e(){return`#${yh(this.r)}${yh(this.g)}${yh(this.b)}${yh((isNaN(this.opacity)?1:this.opacity)*255)}`}function ID(){const t=zx(this.opacity);return`${t===1?"rgb(":"rgba("}${Uh(this.r)}, ${Uh(this.g)}, ${Uh(this.b)}${t===1?")":`, ${t})`}`}function zx(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Uh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function yh(t){return t=Uh(t),(t<16?"0":"")+t.toString(16)}function BD(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Us(t,e,r,n)}function NW(t){if(t instanceof Us)return new Us(t.h,t.s,t.l,t.opacity);if(t instanceof $1||(t=bg(t)),!t)return new Us;if(t instanceof Us)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),s=Math.max(e,r,n),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(r-n)/a+(r<n)*6:r===s?o=(n-e)/a+2:o=(e-r)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Us(o,a,l,t.opacity)}function P6e(t,e,r,n){return arguments.length===1?NW(t):new Us(t,e,r,n??1)}function Us(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}U9(Us,P6e,PW($1,{brighter(t){return t=t==null?$x:Math.pow($x,t),new Us(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?gg:Math.pow(gg,t),new Us(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Li(dk(t>=240?t-240:t+120,i,n),dk(t,i,n),dk(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new Us(RD(this.h),e2(this.s),e2(this.l),zx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=zx(this.opacity);return`${t===1?"hsl(":"hsla("}${RD(this.h)}, ${e2(this.s)*100}%, ${e2(this.l)*100}%${t===1?")":`, ${t})`}`}}));function RD(t){return t=(t||0)%360,t<0?t+360:t}function e2(t){return Math.max(0,Math.min(1,t||0))}function dk(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const G9=t=>()=>t;function FW(t,e){return function(r){return t+r*e}}function N6e(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function rLe(t,e){var r=e-t;return r?FW(t,r>180||r<-180?r-360*Math.round(r/360):r):G9(isNaN(t)?e:t)}function F6e(t){return(t=+t)==1?$W:function(e,r){return r-e?N6e(e,r,t):G9(isNaN(e)?r:e)}}function $W(t,e){var r=e-t;return r?FW(t,r):G9(isNaN(t)?e:t)}const PD=function t(e){var r=F6e(e);function n(i,s){var o=r((i=p6(i)).r,(s=p6(s)).r),a=r(i.g,s.g),l=r(i.b,s.b),c=$W(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=a(h),i.b=l(h),i.opacity=c(h),i+""}}return n.gamma=t,n}(1);function Nl(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var m6=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pk=new RegExp(m6.source,"g");function $6e(t){return function(){return t}}function z6e(t){return function(e){return t(e)+""}}function H6e(t,e){var r=m6.lastIndex=pk.lastIndex=0,n,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(n=m6.exec(t))&&(i=pk.exec(e));)(s=i.index)>r&&(s=e.slice(r,s),a[o]?a[o]+=s:a[++o]=s),(n=n[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Nl(n,i)})),r=pk.lastIndex;return r<e.length&&(s=e.slice(r),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?z6e(l[0].x):$6e(e):(e=l.length,function(c){for(var h=0,u;h<e;++h)a[(u=l[h]).i]=u.x(c);return a.join("")})}var ND=180/Math.PI,g6={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zW(t,e,r,n,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*r+e*n)&&(r-=t*l,n-=e*l),(a=Math.sqrt(r*r+n*n))&&(r/=a,n/=a,l/=a),t*n<e*r&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*ND,skewX:Math.atan(l)*ND,scaleX:o,scaleY:a}}var t2;function q6e(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?g6:zW(e.a,e.b,e.c,e.d,e.e,e.f)}function V6e(t){return t==null||(t2||(t2=document.createElementNS("http://www.w3.org/2000/svg","g")),t2.setAttribute("transform",t),!(t=t2.transform.baseVal.consolidate()))?g6:(t=t.matrix,zW(t.a,t.b,t.c,t.d,t.e,t.f))}function HW(t,e,r,n){function i(c){return c.length?c.pop()+" ":""}function s(c,h,u,f,d,p){if(c!==u||h!==f){var m=d.push("translate(",null,e,null,r);p.push({i:m-4,x:Nl(c,u)},{i:m-2,x:Nl(h,f)})}else(u||f)&&d.push("translate("+u+e+f+r)}function o(c,h,u,f){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),f.push({i:u.push(i(u)+"rotate(",null,n)-2,x:Nl(c,h)})):h&&u.push(i(u)+"rotate("+h+n)}function a(c,h,u,f){c!==h?f.push({i:u.push(i(u)+"skewX(",null,n)-2,x:Nl(c,h)}):h&&u.push(i(u)+"skewX("+h+n)}function l(c,h,u,f,d,p){if(c!==u||h!==f){var m=d.push(i(d)+"scale(",null,",",null,")");p.push({i:m-4,x:Nl(c,u)},{i:m-2,x:Nl(h,f)})}else(u!==1||f!==1)&&d.push(i(d)+"scale("+u+","+f+")")}return function(c,h){var u=[],f=[];return c=t(c),h=t(h),s(c.translateX,c.translateY,h.translateX,h.translateY,u,f),o(c.rotate,h.rotate,u,f),a(c.skewX,h.skewX,u,f),l(c.scaleX,c.scaleY,h.scaleX,h.scaleY,u,f),c=h=null,function(d){for(var p=-1,m=f.length,g;++p<m;)u[(g=f[p]).i]=g.x(d);return u.join("")}}}var W6e=HW(q6e,"px, ","px)","deg)"),j6e=HW(V6e,", ",")",")"),Dd=0,Ep=0,F0=0,qW=1e3,Hx,Lp,qx=0,fu=0,X4=0,xg=typeof performance=="object"&&performance.now?performance:Date,VW=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function K9(){return fu||(VW(U6e),fu=xg.now()+X4)}function U6e(){fu=0}function Vx(){this._call=this._time=this._next=null}Vx.prototype=WW.prototype={constructor:Vx,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?K9():+r)+(e==null?0:+e),!this._next&&Lp!==this&&(Lp?Lp._next=this:Hx=this,Lp=this),this._call=t,this._time=r,y6()},stop:function(){this._call&&(this._call=null,this._time=1/0,y6())}};function WW(t,e,r){var n=new Vx;return n.restart(t,e,r),n}function G6e(){K9(),++Dd;for(var t=Hx,e;t;)(e=fu-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Dd}function FD(){fu=(qx=xg.now())+X4,Dd=Ep=0;try{G6e()}finally{Dd=0,Y6e(),fu=0}}function K6e(){var t=xg.now(),e=t-qx;e>qW&&(X4-=e,qx=t)}function Y6e(){for(var t,e=Hx,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:Hx=r);Lp=t,y6(n)}function y6(t){if(!Dd){Ep&&(Ep=clearTimeout(Ep));var e=t-fu;e>24?(t<1/0&&(Ep=setTimeout(FD,t-xg.now()-X4)),F0&&(F0=clearInterval(F0))):(F0||(qx=xg.now(),F0=setInterval(K6e,qW)),Dd=1,VW(FD))}}function $D(t,e,r){var n=new Vx;return e=e==null?0:+e,n.restart(i=>{n.stop(),t(i+e)},e,r),n}var X6e=CW("start","end","cancel","interrupt"),J6e=[],jW=0,zD=1,b6=2,bb=3,HD=4,x6=5,xb=6;function J4(t,e,r,n,i,s){var o=t.__transition;if(!o)t.__transition={};else if(r in o)return;Z6e(t,r,{name:e,index:n,group:i,on:X6e,tween:J6e,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:jW})}function Y9(t,e){var r=yo(t,e);if(r.state>jW)throw new Error("too late; already scheduled");return r}function ha(t,e){var r=yo(t,e);if(r.state>bb)throw new Error("too late; already running");return r}function yo(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function Z6e(t,e,r){var n=t.__transition,i;n[e]=r,r.timer=WW(s,0,r.time);function s(c){r.state=zD,r.timer.restart(o,r.delay,r.time),r.delay<=c&&o(c-r.delay)}function o(c){var h,u,f,d;if(r.state!==zD)return l();for(h in n)if(d=n[h],d.name===r.name){if(d.state===bb)return $D(o);d.state===HD?(d.state=xb,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete n[h]):+h<e&&(d.state=xb,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete n[h])}if($D(function(){r.state===bb&&(r.state=HD,r.timer.restart(a,r.delay,r.time),a(c))}),r.state=b6,r.on.call("start",t,t.__data__,r.index,r.group),r.state===b6){for(r.state=bb,i=new Array(f=r.tween.length),h=0,u=-1;h<f;++h)(d=r.tween[h].value.call(t,t.__data__,r.index,r.group))&&(i[++u]=d);i.length=u+1}}function a(c){for(var h=c<r.duration?r.ease.call(null,c/r.duration):(r.timer.restart(l),r.state=x6,1),u=-1,f=i.length;++u<f;)i[u].call(t,h);r.state===x6&&(r.on.call("end",t,t.__data__,r.index,r.group),l())}function l(){r.state=xb,r.timer.stop(),delete n[e];for(var c in n)return;delete t.__transition}}function Q6e(t,e){var r=t.__transition,n,i,s=!0,o;if(r){e=e==null?null:e+"";for(o in r){if((n=r[o]).name!==e){s=!1;continue}i=n.state>b6&&n.state<x6,n.state=xb,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[o]}s&&delete t.__transition}}function e7e(t){return this.each(function(){Q6e(this,t)})}function t7e(t,e){var r,n;return function(){var i=ha(this,t),s=i.tween;if(s!==r){n=r=s;for(var o=0,a=n.length;o<a;++o)if(n[o].name===e){n=n.slice(),n.splice(o,1);break}}i.tween=n}}function r7e(t,e,r){var n,i;if(typeof r!="function")throw new Error;return function(){var s=ha(this,t),o=s.tween;if(o!==n){i=(n=o).slice();for(var a={name:e,value:r},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function n7e(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=yo(this.node(),r).tween,i=0,s=n.length,o;i<s;++i)if((o=n[i]).name===t)return o.value;return null}return this.each((e==null?t7e:r7e)(r,t,e))}function X9(t,e,r){var n=t._id;return t.each(function(){var i=ha(this,n);(i.value||(i.value={}))[e]=r.apply(this,arguments)}),function(i){return yo(i,n).value[e]}}function UW(t,e){var r;return(typeof e=="number"?Nl:e instanceof bg?PD:(r=bg(e))?(e=r,PD):H6e)(t,e)}function i7e(t){return function(){this.removeAttribute(t)}}function s7e(t){return function(){this.removeAttributeNS(t.space,t.local)}}function o7e(t,e,r){var n,i=r+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===n?s:s=e(n=o,r)}}function a7e(t,e,r){var n,i=r+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===n?s:s=e(n=o,r)}}function l7e(t,e,r){var n,i,s;return function(){var o,a=r(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===n&&l===i?s:(i=l,s=e(n=o,a)))}}function c7e(t,e,r){var n,i,s;return function(){var o,a=r(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===n&&l===i?s:(i=l,s=e(n=o,a)))}}function h7e(t,e){var r=Y4(t),n=r==="transform"?j6e:UW;return this.attrTween(t,typeof e=="function"?(r.local?c7e:l7e)(r,n,X9(this,"attr."+t,e)):e==null?(r.local?s7e:i7e)(r):(r.local?a7e:o7e)(r,n,e))}function u7e(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function f7e(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function d7e(t,e){var r,n;function i(){var s=e.apply(this,arguments);return s!==n&&(r=(n=s)&&f7e(t,s)),r}return i._value=e,i}function p7e(t,e){var r,n;function i(){var s=e.apply(this,arguments);return s!==n&&(r=(n=s)&&u7e(t,s)),r}return i._value=e,i}function m7e(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=Y4(t);return this.tween(r,(n.local?d7e:p7e)(n,e))}function g7e(t,e){return function(){Y9(this,t).delay=+e.apply(this,arguments)}}function y7e(t,e){return e=+e,function(){Y9(this,t).delay=e}}function b7e(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?g7e:y7e)(e,t)):yo(this.node(),e).delay}function x7e(t,e){return function(){ha(this,t).duration=+e.apply(this,arguments)}}function v7e(t,e){return e=+e,function(){ha(this,t).duration=e}}function w7e(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?x7e:v7e)(e,t)):yo(this.node(),e).duration}function k7e(t,e){if(typeof e!="function")throw new Error;return function(){ha(this,t).ease=e}}function C7e(t){var e=this._id;return arguments.length?this.each(k7e(e,t)):yo(this.node(),e).ease}function S7e(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;ha(this,t).ease=r}}function T7e(t){if(typeof t!="function")throw new Error;return this.each(S7e(this._id,t))}function _7e(t){typeof t!="function"&&(t=_W(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var s=e[i],o=s.length,a=n[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new cl(n,this._parents,this._name,this._id)}function M7e(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,i=r.length,s=Math.min(n,i),o=new Array(n),a=0;a<s;++a)for(var l=e[a],c=r[a],h=l.length,u=o[a]=new Array(h),f,d=0;d<h;++d)(f=l[d]||c[d])&&(u[d]=f);for(;a<n;++a)o[a]=e[a];return new cl(o,this._parents,this._name,this._id)}function A7e(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function E7e(t,e,r){var n,i,s=A7e(e)?Y9:ha;return function(){var o=s(this,t),a=o.on;a!==n&&(i=(n=a).copy()).on(e,r),o.on=i}}function L7e(t,e){var r=this._id;return arguments.length<2?yo(this.node(),r).on.on(t):this.each(E7e(r,t,e))}function O7e(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function D7e(){return this.on("end.remove",O7e(this._id))}function I7e(t){var e=this._name,r=this._id;typeof t!="function"&&(t=W9(t));for(var n=this._groups,i=n.length,s=new Array(i),o=0;o<i;++o)for(var a=n[o],l=a.length,c=s[o]=new Array(l),h,u,f=0;f<l;++f)(h=a[f])&&(u=t.call(h,h.__data__,f,a))&&("__data__"in h&&(u.__data__=h.__data__),c[f]=u,J4(c[f],e,r,f,c,yo(h,r)));return new cl(s,this._parents,e,r)}function B7e(t){var e=this._name,r=this._id;typeof t!="function"&&(t=TW(t));for(var n=this._groups,i=n.length,s=[],o=[],a=0;a<i;++a)for(var l=n[a],c=l.length,h,u=0;u<c;++u)if(h=l[u]){for(var f=t.call(h,h.__data__,u,l),d,p=yo(h,r),m=0,g=f.length;m<g;++m)(d=f[m])&&J4(d,e,r,m,f,p);s.push(f),o.push(h)}return new cl(s,o,e,r)}var R7e=F1.prototype.constructor;function P7e(){return new R7e(this._groups,this._parents)}function N7e(t,e){var r,n,i;return function(){var s=Od(this,t),o=(this.style.removeProperty(t),Od(this,t));return s===o?null:s===r&&o===n?i:i=e(r=s,n=o)}}function GW(t){return function(){this.style.removeProperty(t)}}function F7e(t,e,r){var n,i=r+"",s;return function(){var o=Od(this,t);return o===i?null:o===n?s:s=e(n=o,r)}}function $7e(t,e,r){var n,i,s;return function(){var o=Od(this,t),a=r(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),Od(this,t))),o===l?null:o===n&&l===i?s:(i=l,s=e(n=o,a))}}function z7e(t,e){var r,n,i,s="style."+e,o="end."+s,a;return function(){var l=ha(this,t),c=l.on,h=l.value[s]==null?a||(a=GW(e)):void 0;(c!==r||i!==h)&&(n=(r=c).copy()).on(o,i=h),l.on=n}}function H7e(t,e,r){var n=(t+="")=="transform"?W6e:UW;return e==null?this.styleTween(t,N7e(t,n)).on("end.style."+t,GW(t)):typeof e=="function"?this.styleTween(t,$7e(t,n,X9(this,"style."+t,e))).each(z7e(this._id,t)):this.styleTween(t,F7e(t,n,e),r).on("end.style."+t,null)}function q7e(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function V7e(t,e,r){var n,i;function s(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&q7e(t,o,r)),n}return s._value=e,s}function W7e(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,V7e(t,e,r??""))}function j7e(t){return function(){this.textContent=t}}function U7e(t){return function(){var e=t(this);this.textContent=e??""}}function G7e(t){return this.tween("text",typeof t=="function"?U7e(X9(this,"text",t)):j7e(t==null?"":t+""))}function K7e(t){return function(e){this.textContent=t.call(this,e)}}function Y7e(t){var e,r;function n(){var i=t.apply(this,arguments);return i!==r&&(e=(r=i)&&K7e(i)),e}return n._value=t,n}function X7e(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Y7e(t))}function J7e(){for(var t=this._name,e=this._id,r=KW(),n=this._groups,i=n.length,s=0;s<i;++s)for(var o=n[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var h=yo(l,e);J4(l,t,r,c,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new cl(n,this._parents,t,r)}function Z7e(){var t,e,r=this,n=r._id,i=r.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};r.each(function(){var c=ha(this,n),h=c.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),i===0&&s()})}var Q7e=0;function cl(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function KW(){return++Q7e}var ba=F1.prototype;cl.prototype={constructor:cl,select:I7e,selectAll:B7e,selectChild:ba.selectChild,selectChildren:ba.selectChildren,filter:_7e,merge:M7e,selection:P7e,transition:J7e,call:ba.call,nodes:ba.nodes,node:ba.node,size:ba.size,empty:ba.empty,each:ba.each,on:L7e,attr:h7e,attrTween:m7e,style:H7e,styleTween:W7e,text:G7e,textTween:X7e,remove:D7e,tween:n7e,delay:b7e,duration:w7e,ease:C7e,easeVarying:T7e,end:Z7e,[Symbol.iterator]:ba[Symbol.iterator]};function eSe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var tSe={time:null,delay:0,duration:250,ease:eSe};function rSe(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function nSe(t){var e,r;t instanceof cl?(e=t._id,t=t._name):(e=KW(),(r=tSe).time=K9(),t=t==null?null:t+"");for(var n=this._groups,i=n.length,s=0;s<i;++s)for(var o=n[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&J4(l,t,e,c,o,r||rSe(l,e));return new cl(n,this._parents,t,e)}F1.prototype.interrupt=e7e;F1.prototype.transition=nSe;const v6=Math.PI,w6=2*v6,nh=1e-6,iSe=w6-nh;function YW(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function sSe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return YW;const r=10**e;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class oSe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?YW:sSe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,s,o){this._append`C${+e},${+r},${+n},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,n,i,s){if(e=+e,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=n-e,c=i-r,h=o-e,u=a-r,f=h*h+u*u;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(f>nh)if(!(Math.abs(u*l-c*h)>nh)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let d=n-o,p=i-a,m=l*l+c*c,g=d*d+p*p,y=Math.sqrt(m),b=Math.sqrt(f),x=s*Math.tan((v6-Math.acos((m+f-g)/(2*y*b)))/2),T=x/b,S=x/y;Math.abs(T-1)>nh&&this._append`L${e+T*h},${r+T*u}`,this._append`A${s},${s},0,0,${+(u*d>h*p)},${this._x1=e+S*l},${this._y1=r+S*c}`}}arc(e,r,n,i,s,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(i),l=n*Math.sin(i),c=e+a,h=r+l,u=1^o,f=o?i-s:s-i;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>nh||Math.abs(this._y1-h)>nh)&&this._append`L${c},${h}`,n&&(f<0&&(f=f%w6+w6),f>iSe?this._append`A${n},${n},0,1,${u},${e-a},${r-l}A${n},${n},0,1,${u},${this._x1=c},${this._y1=h}`:f>nh&&this._append`A${n},${n},0,${+(f>=v6)},${u},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function Fu(t){return function(){return t}}const nLe=Math.abs,iLe=Math.atan2,sLe=Math.cos,oLe=Math.max,aLe=Math.min,lLe=Math.sin,cLe=Math.sqrt,qD=1e-12,J9=Math.PI,VD=J9/2,hLe=2*J9;function uLe(t){return t>1?0:t<-1?J9:Math.acos(t)}function fLe(t){return t>=1?VD:t<=-1?-VD:Math.asin(t)}function aSe(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new oSe(e)}function lSe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function XW(t){this._context=t}XW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Wx(t){return new XW(t)}function cSe(t){return t[0]}function hSe(t){return t[1]}function uSe(t,e){var r=Fu(!0),n=null,i=Wx,s=null,o=aSe(a);t=typeof t=="function"?t:t===void 0?cSe:Fu(t),e=typeof e=="function"?e:e===void 0?hSe:Fu(e);function a(l){var c,h=(l=lSe(l)).length,u,f=!1,d;for(n==null&&(s=i(d=o())),c=0;c<=h;++c)!(c<h&&r(u=l[c],c,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(u,c,l),+e(u,c,l));if(d)return s=null,d+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Fu(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Fu(+l),a):e},a.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Fu(!!l),a):r},a.curve=function(l){return arguments.length?(i=l,n!=null&&(s=i(n)),a):i},a.context=function(l){return arguments.length?(l==null?n=s=null:s=i(n=l),a):n},a}class JW{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function ZW(t){return new JW(t,!0)}function QW(t){return new JW(t,!1)}function bc(){}function jx(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Z4(t){this._context=t}Z4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:jx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:jx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function vb(t){return new Z4(t)}function ej(t){this._context=t}ej.prototype={areaStart:bc,areaEnd:bc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:jx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function fSe(t){return new ej(t)}function tj(t){this._context=t}tj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:jx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function dSe(t){return new tj(t)}function rj(t,e){this._basis=new Z4(t),this._beta=e}rj.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,r=t.length-1;if(r>0)for(var n=t[0],i=e[0],s=t[r]-n,o=e[r]-i,a=-1,l;++a<=r;)l=a/r,this._basis.point(this._beta*t[a]+(1-this._beta)*(n+l*s),this._beta*e[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const pSe=function t(e){function r(n){return e===1?new Z4(n):new rj(n,e)}return r.beta=function(n){return t(+n)},r}(.85);function Ux(t,e,r){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-r),t._x2,t._y2)}function Z9(t,e){this._context=t,this._k=(1-e)/6}Z9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ux(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ux(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const nj=function t(e){function r(n){return new Z9(n,e)}return r.tension=function(n){return t(+n)},r}(0);function Q9(t,e){this._context=t,this._k=(1-e)/6}Q9.prototype={areaStart:bc,areaEnd:bc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ux(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const mSe=function t(e){function r(n){return new Q9(n,e)}return r.tension=function(n){return t(+n)},r}(0);function eT(t,e){this._context=t,this._k=(1-e)/6}eT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ux(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const gSe=function t(e){function r(n){return new eT(n,e)}return r.tension=function(n){return t(+n)},r}(0);function tT(t,e,r){var n=t._x1,i=t._y1,s=t._x2,o=t._y2;if(t._l01_a>qD){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);n=(n*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>qD){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/h,o=(o*c+t._y1*t._l23_2a-r*t._l12_2a)/h}t._context.bezierCurveTo(n,i,s,o,t._x2,t._y2)}function ij(t,e){this._context=t,this._alpha=e}ij.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:tT(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const sj=function t(e){function r(n){return e?new ij(n,e):new Z9(n,0)}return r.alpha=function(n){return t(+n)},r}(.5);function oj(t,e){this._context=t,this._alpha=e}oj.prototype={areaStart:bc,areaEnd:bc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:tT(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const ySe=function t(e){function r(n){return e?new oj(n,e):new Q9(n,0)}return r.alpha=function(n){return t(+n)},r}(.5);function aj(t,e){this._context=t,this._alpha=e}aj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:tT(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const bSe=function t(e){function r(n){return e?new aj(n,e):new eT(n,0)}return r.alpha=function(n){return t(+n)},r}(.5);function lj(t){this._context=t}lj.prototype={areaStart:bc,areaEnd:bc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function xSe(t){return new lj(t)}function WD(t){return t<0?-1:1}function jD(t,e,r){var n=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(n||i<0&&-0),o=(r-t._y1)/(i||n<0&&-0),a=(s*i+o*n)/(n+i);return(WD(s)+WD(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function UD(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function mk(t,e,r){var n=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-n)/3;t._context.bezierCurveTo(n+a,i+a*e,s-a,o-a*r,s,o)}function Gx(t){this._context=t}Gx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:mk(this,this._t0,UD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,mk(this,UD(this,r=jD(this,t,e)),r);break;default:mk(this,this._t0,r=jD(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function cj(t){this._context=new hj(t)}(cj.prototype=Object.create(Gx.prototype)).point=function(t,e){Gx.prototype.point.call(this,e,t)};function hj(t){this._context=t}hj.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,s){this._context.bezierCurveTo(e,t,n,r,s,i)}};function uj(t){return new Gx(t)}function fj(t){return new cj(t)}function dj(t){this._context=t}dj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=GD(t),i=GD(e),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function GD(t){var e,r=t.length-1,n,i=new Array(r),s=new Array(r),o=new Array(r);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/s[e-1],s[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function pj(t){return new dj(t)}function Q4(t,e){this._context=t,this._t=e}Q4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function mj(t){return new Q4(t,.5)}function gj(t){return new Q4(t,0)}function yj(t){return new Q4(t,1)}function Op(t,e,r){this.k=t,this.x=e,this.y=r}Op.prototype={constructor:Op,scale:function(t){return t===1?this:new Op(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Op(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Op.prototype;var vSe=k(t=>{var i;const{securityLevel:e}=Jt();let r=Ft("body");if(e==="sandbox"){const o=((i=Ft(`#i${t}`).node())==null?void 0:i.contentDocument)??document;r=Ft(o.body)}return r.select(`#${t}`)},"selectSvgElement");function rT(t){return typeof t>"u"||t===null}k(rT,"isNothing");function bj(t){return typeof t=="object"&&t!==null}k(bj,"isObject");function xj(t){return Array.isArray(t)?t:rT(t)?[]:[t]}k(xj,"toArray");function vj(t,e){var r,n,i,s;if(e)for(s=Object.keys(e),r=0,n=s.length;r<n;r+=1)i=s[r],t[i]=e[i];return t}k(vj,"extend");function wj(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}k(wj,"repeat");function kj(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}k(kj,"isNegativeZero");var wSe=rT,kSe=bj,CSe=xj,SSe=wj,TSe=kj,_Se=vj,Qr={isNothing:wSe,isObject:kSe,toArray:CSe,repeat:SSe,isNegativeZero:TSe,extend:_Se};function nT(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}k(nT,"formatError");function Id(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=nT(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}k(Id,"YAMLException$1");Id.prototype=Object.create(Error.prototype);Id.prototype.constructor=Id;Id.prototype.toString=k(function(e){return this.name+": "+nT(this,e)},"toString");var _i=Id;function wb(t,e,r,n,i){var s="",o="",a=Math.floor(i/2)-1;return n-e>a&&(s=" ... ",e=n-a+s.length),r-n>a&&(o=" ...",r=n+a-o.length),{str:s+t.slice(e,r).replace(/\t/g,"")+o,pos:n-e+s.length}}k(wb,"getLine");function kb(t,e){return Qr.repeat(" ",e-t.length)+t}k(kb,"padStart");function Cj(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],s,o=-1;s=r.exec(t.buffer);)i.push(s.index),n.push(s.index+s[0].length),t.position<=s.index&&o<0&&(o=n.length-2);o<0&&(o=n.length-1);var a="",l,c,h=Math.min(t.line+e.linesAfter,i.length).toString().length,u=e.maxLength-(e.indent+h+3);for(l=1;l<=e.linesBefore&&!(o-l<0);l++)c=wb(t.buffer,n[o-l],i[o-l],t.position-(n[o]-n[o-l]),u),a=Qr.repeat(" ",e.indent)+kb((t.line-l+1).toString(),h)+" | "+c.str+`
`+a;for(c=wb(t.buffer,n[o],i[o],t.position,u),a+=Qr.repeat(" ",e.indent)+kb((t.line+1).toString(),h)+" | "+c.str+`
`,a+=Qr.repeat("-",e.indent+h+3+c.pos)+`^
`,l=1;l<=e.linesAfter&&!(o+l>=i.length);l++)c=wb(t.buffer,n[o+l],i[o+l],t.position-(n[o]-n[o+l]),u),a+=Qr.repeat(" ",e.indent)+kb((t.line+l+1).toString(),h)+" | "+c.str+`
`;return a.replace(/\n$/,"")}k(Cj,"makeSnippet");var MSe=Cj,ASe=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],ESe=["scalar","sequence","mapping"];function Sj(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}k(Sj,"compileStyleAliases");function Tj(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(ASe.indexOf(r)===-1)throw new _i('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Sj(e.styleAliases||null),ESe.indexOf(this.kind)===-1)throw new _i('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}k(Tj,"Type$1");var zn=Tj;function k6(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(s,o){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=o)}),r[i]=n}),r}k(k6,"compileList");function _j(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(k(n,"collectType"),e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}k(_j,"compileMap");function Kx(t){return this.extend(t)}k(Kx,"Schema$1");Kx.prototype.extend=k(function(e){var r=[],n=[];if(e instanceof zn)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new _i("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof zn))throw new _i("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new _i("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new _i("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof zn))throw new _i("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Kx.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=k6(i,"implicit"),i.compiledExplicit=k6(i,"explicit"),i.compiledTypeMap=_j(i.compiledImplicit,i.compiledExplicit),i},"extend");var LSe=Kx,OSe=new zn("tag:yaml.org,2002:str",{kind:"scalar",construct:k(function(t){return t!==null?t:""},"construct")}),DSe=new zn("tag:yaml.org,2002:seq",{kind:"sequence",construct:k(function(t){return t!==null?t:[]},"construct")}),ISe=new zn("tag:yaml.org,2002:map",{kind:"mapping",construct:k(function(t){return t!==null?t:{}},"construct")}),BSe=new LSe({explicit:[OSe,DSe,ISe]});function Mj(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}k(Mj,"resolveYamlNull");function Aj(){return null}k(Aj,"constructYamlNull");function Ej(t){return t===null}k(Ej,"isNull");var RSe=new zn("tag:yaml.org,2002:null",{kind:"scalar",resolve:Mj,construct:Aj,predicate:Ej,represent:{canonical:k(function(){return"~"},"canonical"),lowercase:k(function(){return"null"},"lowercase"),uppercase:k(function(){return"NULL"},"uppercase"),camelcase:k(function(){return"Null"},"camelcase"),empty:k(function(){return""},"empty")},defaultStyle:"lowercase"});function Lj(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}k(Lj,"resolveYamlBoolean");function Oj(t){return t==="true"||t==="True"||t==="TRUE"}k(Oj,"constructYamlBoolean");function Dj(t){return Object.prototype.toString.call(t)==="[object Boolean]"}k(Dj,"isBoolean");var PSe=new zn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Lj,construct:Oj,predicate:Dj,represent:{lowercase:k(function(t){return t?"true":"false"},"lowercase"),uppercase:k(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:k(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function Ij(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}k(Ij,"isHexCode");function Bj(t){return 48<=t&&t<=55}k(Bj,"isOctCode");function Rj(t){return 48<=t&&t<=57}k(Rj,"isDecCode");function Pj(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Ij(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Bj(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!Rj(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}k(Pj,"resolveYamlInteger");function Nj(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}k(Nj,"constructYamlInteger");function Fj(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Qr.isNegativeZero(t)}k(Fj,"isInteger");var NSe=new zn("tag:yaml.org,2002:int",{kind:"scalar",resolve:Pj,construct:Nj,predicate:Fj,represent:{binary:k(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:k(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:k(function(t){return t.toString(10)},"decimal"),hexadecimal:k(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),FSe=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function $j(t){return!(t===null||!FSe.test(t)||t[t.length-1]==="_")}k($j,"resolveYamlFloat");function zj(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}k(zj,"constructYamlFloat");var $Se=/^[-+]?[0-9]+e/;function Hj(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Qr.isNegativeZero(t))return"-0.0";return r=t.toString(10),$Se.test(r)?r.replace("e",".e"):r}k(Hj,"representYamlFloat");function qj(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Qr.isNegativeZero(t))}k(qj,"isFloat");var zSe=new zn("tag:yaml.org,2002:float",{kind:"scalar",resolve:$j,construct:zj,predicate:qj,represent:Hj,defaultStyle:"lowercase"}),Vj=BSe.extend({implicit:[RSe,PSe,NSe,zSe]}),HSe=Vj,Wj=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),jj=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Uj(t){return t===null?!1:Wj.exec(t)!==null||jj.exec(t)!==null}k(Uj,"resolveYamlTimestamp");function Gj(t){var e,r,n,i,s,o,a,l=0,c=null,h,u,f;if(e=Wj.exec(t),e===null&&(e=jj.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(s=+e[4],o=+e[5],a=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(h=+e[10],u=+(e[11]||0),c=(h*60+u)*6e4,e[9]==="-"&&(c=-c)),f=new Date(Date.UTC(r,n,i,s,o,a,l)),c&&f.setTime(f.getTime()-c),f}k(Gj,"constructYamlTimestamp");function Kj(t){return t.toISOString()}k(Kj,"representYamlTimestamp");var qSe=new zn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Uj,construct:Gj,instanceOf:Date,represent:Kj});function Yj(t){return t==="<<"||t===null}k(Yj,"resolveYamlMerge");var VSe=new zn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Yj}),iT=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Xj(t){if(t===null)return!1;var e,r,n=0,i=t.length,s=iT;for(r=0;r<i;r++)if(e=s.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}k(Xj,"resolveYamlBinary");function Jj(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,s=iT,o=0,a=[];for(e=0;e<i;e++)e%4===0&&e&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(n.charAt(e));return r=i%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),new Uint8Array(a)}k(Jj,"constructYamlBinary");function Zj(t){var e="",r=0,n,i,s=t.length,o=iT;for(n=0;n<s;n++)n%3===0&&n&&(e+=o[r>>18&63],e+=o[r>>12&63],e+=o[r>>6&63],e+=o[r&63]),r=(r<<8)+t[n];return i=s%3,i===0?(e+=o[r>>18&63],e+=o[r>>12&63],e+=o[r>>6&63],e+=o[r&63]):i===2?(e+=o[r>>10&63],e+=o[r>>4&63],e+=o[r<<2&63],e+=o[64]):i===1&&(e+=o[r>>2&63],e+=o[r<<4&63],e+=o[64],e+=o[64]),e}k(Zj,"representYamlBinary");function Qj(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}k(Qj,"isBinary");var WSe=new zn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Xj,construct:Jj,predicate:Qj,represent:Zj}),jSe=Object.prototype.hasOwnProperty,USe=Object.prototype.toString;function eU(t){if(t===null)return!0;var e=[],r,n,i,s,o,a=t;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],o=!1,USe.call(i)!=="[object Object]")return!1;for(s in i)if(jSe.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}k(eU,"resolveYamlOmap");function tU(t){return t!==null?t:[]}k(tU,"constructYamlOmap");var GSe=new zn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:eU,construct:tU}),KSe=Object.prototype.toString;function rU(t){if(t===null)return!0;var e,r,n,i,s,o=t;for(s=new Array(o.length),e=0,r=o.length;e<r;e+=1){if(n=o[e],KSe.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[e]=[i[0],n[i[0]]]}return!0}k(rU,"resolveYamlPairs");function nU(t){if(t===null)return[];var e,r,n,i,s,o=t;for(s=new Array(o.length),e=0,r=o.length;e<r;e+=1)n=o[e],i=Object.keys(n),s[e]=[i[0],n[i[0]]];return s}k(nU,"constructYamlPairs");var YSe=new zn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:rU,construct:nU}),XSe=Object.prototype.hasOwnProperty;function iU(t){if(t===null)return!0;var e,r=t;for(e in r)if(XSe.call(r,e)&&r[e]!==null)return!1;return!0}k(iU,"resolveYamlSet");function sU(t){return t!==null?t:{}}k(sU,"constructYamlSet");var JSe=new zn("tag:yaml.org,2002:set",{kind:"mapping",resolve:iU,construct:sU}),oU=HSe.extend({implicit:[qSe,VSe],explicit:[WSe,GSe,YSe,JSe]}),xc=Object.prototype.hasOwnProperty,Yx=1,aU=2,lU=3,Xx=4,gk=1,ZSe=2,KD=3,QSe=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,e8e=/[\x85\u2028\u2029]/,t8e=/[,\[\]\{\}]/,cU=/^(?:!|!!|![a-z\-]+!)$/i,hU=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function C6(t){return Object.prototype.toString.call(t)}k(C6,"_class");function eo(t){return t===10||t===13}k(eo,"is_EOL");function nc(t){return t===9||t===32}k(nc,"is_WHITE_SPACE");function ni(t){return t===9||t===32||t===10||t===13}k(ni,"is_WS_OR_EOL");function bh(t){return t===44||t===91||t===93||t===123||t===125}k(bh,"is_FLOW_INDICATOR");function uU(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}k(uU,"fromHexCode");function fU(t){return t===120?2:t===117?4:t===85?8:0}k(fU,"escapedHexLen");function dU(t){return 48<=t&&t<=57?t-48:-1}k(dU,"fromDecimalCode");function S6(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}k(S6,"simpleEscapeSequence");function pU(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}k(pU,"charFromCodepoint");var mU=new Array(256),gU=new Array(256);for(Kc=0;Kc<256;Kc++)mU[Kc]=S6(Kc)?1:0,gU[Kc]=S6(Kc);var Kc;function yU(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||oU,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}k(yU,"State$1");function sT(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=MSe(r),new _i(e,r)}k(sT,"generateError");function tt(t,e){throw sT(t,e)}k(tt,"throwError");function vg(t,e){t.onWarning&&t.onWarning.call(null,sT(t,e))}k(vg,"throwWarning");var YD={YAML:k(function(e,r,n){var i,s,o;e.version!==null&&tt(e,"duplication of %YAML directive"),n.length!==1&&tt(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&tt(e,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&tt(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&vg(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:k(function(e,r,n){var i,s;n.length!==2&&tt(e,"TAG directive accepts exactly two arguments"),i=n[0],s=n[1],cU.test(i)||tt(e,"ill-formed tag handle (first argument) of the TAG directive"),xc.call(e.tagMap,i)&&tt(e,'there is a previously declared suffix for "'+i+'" tag handle'),hU.test(s)||tt(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{tt(e,"tag prefix is malformed: "+s)}e.tagMap[i]=s},"handleTagDirective")};function Ja(t,e,r,n){var i,s,o,a;if(e<r){if(a=t.input.slice(e,r),n)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||tt(t,"expected valid JSON character");else QSe.test(a)&&tt(t,"the stream contains non-printable characters");t.result+=a}}k(Ja,"captureSegment");function T6(t,e,r,n){var i,s,o,a;for(Qr.isObject(r)||tt(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),o=0,a=i.length;o<a;o+=1)s=i[o],xc.call(e,s)||(e[s]=r[s],n[s]=!0)}k(T6,"mergeMappings");function xh(t,e,r,n,i,s,o,a,l){var c,h;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,h=i.length;c<h;c+=1)Array.isArray(i[c])&&tt(t,"nested arrays are not supported inside keys"),typeof i=="object"&&C6(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&C6(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,h=s.length;c<h;c+=1)T6(t,e,s[c],r);else T6(t,e,s,r);else!t.json&&!xc.call(r,i)&&xc.call(e,i)&&(t.line=o||t.line,t.lineStart=a||t.lineStart,t.position=l||t.position,tt(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[i]=s,delete r[i];return e}k(xh,"storeMappingPair");function ew(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):tt(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}k(ew,"readLineBreak");function Nr(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;nc(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(eo(i))for(ew(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&vg(t,"deficient indentation"),n}k(Nr,"skipSeparationSpace");function z1(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||ni(r)))}k(z1,"testDocumentSeparator");function tw(t,e){e===1?t.result+=" ":e>1&&(t.result+=Qr.repeat(`
`,e-1))}k(tw,"writeFoldedLines");function bU(t,e,r){var n,i,s,o,a,l,c,h,u=t.kind,f=t.result,d;if(d=t.input.charCodeAt(t.position),ni(d)||bh(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(i=t.input.charCodeAt(t.position+1),ni(i)||r&&bh(i)))return!1;for(t.kind="scalar",t.result="",s=o=t.position,a=!1;d!==0;){if(d===58){if(i=t.input.charCodeAt(t.position+1),ni(i)||r&&bh(i))break}else if(d===35){if(n=t.input.charCodeAt(t.position-1),ni(n))break}else{if(t.position===t.lineStart&&z1(t)||r&&bh(d))break;if(eo(d))if(l=t.line,c=t.lineStart,h=t.lineIndent,Nr(t,!1,-1),t.lineIndent>=e){a=!0,d=t.input.charCodeAt(t.position);continue}else{t.position=o,t.line=l,t.lineStart=c,t.lineIndent=h;break}}a&&(Ja(t,s,o,!1),tw(t,t.line-l),s=o=t.position,a=!1),nc(d)||(o=t.position+1),d=t.input.charCodeAt(++t.position)}return Ja(t,s,o,!1),t.result?!0:(t.kind=u,t.result=f,!1)}k(bU,"readPlainScalar");function xU(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(Ja(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else eo(r)?(Ja(t,n,i,!0),tw(t,Nr(t,!1,e)),n=i=t.position):t.position===t.lineStart&&z1(t)?tt(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);tt(t,"unexpected end of the stream within a single quoted scalar")}k(xU,"readSingleQuotedScalar");function vU(t,e){var r,n,i,s,o,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return Ja(t,r,t.position,!0),t.position++,!0;if(a===92){if(Ja(t,r,t.position,!0),a=t.input.charCodeAt(++t.position),eo(a))Nr(t,!1,e);else if(a<256&&mU[a])t.result+=gU[a],t.position++;else if((o=fU(a))>0){for(i=o,s=0;i>0;i--)a=t.input.charCodeAt(++t.position),(o=uU(a))>=0?s=(s<<4)+o:tt(t,"expected hexadecimal character");t.result+=pU(s),t.position++}else tt(t,"unknown escape sequence");r=n=t.position}else eo(a)?(Ja(t,r,n,!0),tw(t,Nr(t,!1,e)),r=n=t.position):t.position===t.lineStart&&z1(t)?tt(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}tt(t,"unexpected end of the stream within a double quoted scalar")}k(vU,"readDoubleQuotedScalar");function wU(t,e){var r=!0,n,i,s,o=t.tag,a,l=t.anchor,c,h,u,f,d,p=Object.create(null),m,g,y,b;if(b=t.input.charCodeAt(t.position),b===91)h=93,d=!1,a=[];else if(b===123)h=125,d=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),b=t.input.charCodeAt(++t.position);b!==0;){if(Nr(t,!0,e),b=t.input.charCodeAt(t.position),b===h)return t.position++,t.tag=o,t.anchor=l,t.kind=d?"mapping":"sequence",t.result=a,!0;r?b===44&&tt(t,"expected the node content, but found ','"):tt(t,"missed comma between flow collection entries"),g=m=y=null,u=f=!1,b===63&&(c=t.input.charCodeAt(t.position+1),ni(c)&&(u=f=!0,t.position++,Nr(t,!0,e))),n=t.line,i=t.lineStart,s=t.position,du(t,e,Yx,!1,!0),g=t.tag,m=t.result,Nr(t,!0,e),b=t.input.charCodeAt(t.position),(f||t.line===n)&&b===58&&(u=!0,b=t.input.charCodeAt(++t.position),Nr(t,!0,e),du(t,e,Yx,!1,!0),y=t.result),d?xh(t,a,p,g,m,y,n,i,s):u?a.push(xh(t,null,p,g,m,y,n,i,s)):a.push(m),Nr(t,!0,e),b=t.input.charCodeAt(t.position),b===44?(r=!0,b=t.input.charCodeAt(++t.position)):r=!1}tt(t,"unexpected end of the stream within a flow collection")}k(wU,"readFlowCollection");function kU(t,e){var r,n,i=gk,s=!1,o=!1,a=e,l=0,c=!1,h,u;if(u=t.input.charCodeAt(t.position),u===124)n=!1;else if(u===62)n=!0;else return!1;for(t.kind="scalar",t.result="";u!==0;)if(u=t.input.charCodeAt(++t.position),u===43||u===45)gk===i?i=u===43?KD:ZSe:tt(t,"repeat of a chomping mode identifier");else if((h=dU(u))>=0)h===0?tt(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?tt(t,"repeat of an indentation width identifier"):(a=e+h-1,o=!0);else break;if(nc(u)){do u=t.input.charCodeAt(++t.position);while(nc(u));if(u===35)do u=t.input.charCodeAt(++t.position);while(!eo(u)&&u!==0)}for(;u!==0;){for(ew(t),t.lineIndent=0,u=t.input.charCodeAt(t.position);(!o||t.lineIndent<a)&&u===32;)t.lineIndent++,u=t.input.charCodeAt(++t.position);if(!o&&t.lineIndent>a&&(a=t.lineIndent),eo(u)){l++;continue}if(t.lineIndent<a){i===KD?t.result+=Qr.repeat(`
`,s?1+l:l):i===gk&&s&&(t.result+=`
`);break}for(n?nc(u)?(c=!0,t.result+=Qr.repeat(`
`,s?1+l:l)):c?(c=!1,t.result+=Qr.repeat(`
`,l+1)):l===0?s&&(t.result+=" "):t.result+=Qr.repeat(`
`,l):t.result+=Qr.repeat(`
`,s?1+l:l),s=!0,o=!0,l=0,r=t.position;!eo(u)&&u!==0;)u=t.input.charCodeAt(++t.position);Ja(t,r,t.position,!1)}return!0}k(kU,"readBlockScalar");function _6(t,e){var r,n=t.tag,i=t.anchor,s=[],o,a=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,tt(t,"tab characters must not be used in indentation")),!(l!==45||(o=t.input.charCodeAt(t.position+1),!ni(o))));){if(a=!0,t.position++,Nr(t,!0,-1)&&t.lineIndent<=e){s.push(null),l=t.input.charCodeAt(t.position);continue}if(r=t.line,du(t,e,lU,!1,!0),s.push(t.result),Nr(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&l!==0)tt(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=s,!0):!1}k(_6,"readBlockSequence");function CU(t,e,r){var n,i,s,o,a,l,c=t.tag,h=t.anchor,u={},f=Object.create(null),d=null,p=null,m=null,g=!1,y=!1,b;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=u),b=t.input.charCodeAt(t.position);b!==0;){if(!g&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,tt(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),s=t.line,(b===63||b===58)&&ni(n))b===63?(g&&(xh(t,u,f,d,p,null,o,a,l),d=p=m=null),y=!0,g=!0,i=!0):g?(g=!1,i=!0):tt(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,b=n;else{if(o=t.line,a=t.lineStart,l=t.position,!du(t,r,aU,!1,!0))break;if(t.line===s){for(b=t.input.charCodeAt(t.position);nc(b);)b=t.input.charCodeAt(++t.position);if(b===58)b=t.input.charCodeAt(++t.position),ni(b)||tt(t,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(xh(t,u,f,d,p,null,o,a,l),d=p=m=null),y=!0,g=!1,i=!1,d=t.tag,p=t.result;else if(y)tt(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=c,t.anchor=h,!0}else if(y)tt(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=c,t.anchor=h,!0}if((t.line===s||t.lineIndent>e)&&(g&&(o=t.line,a=t.lineStart,l=t.position),du(t,e,Xx,!0,i)&&(g?p=t.result:m=t.result),g||(xh(t,u,f,d,p,m,o,a,l),d=p=m=null),Nr(t,!0,-1),b=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&b!==0)tt(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return g&&xh(t,u,f,d,p,null,o,a,l),y&&(t.tag=c,t.anchor=h,t.kind="mapping",t.result=u),y}k(CU,"readBlockMapping");function SU(t){var e,r=!1,n=!1,i,s,o;if(o=t.input.charCodeAt(t.position),o!==33)return!1;if(t.tag!==null&&tt(t,"duplication of a tag property"),o=t.input.charCodeAt(++t.position),o===60?(r=!0,o=t.input.charCodeAt(++t.position)):o===33?(n=!0,i="!!",o=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do o=t.input.charCodeAt(++t.position);while(o!==0&&o!==62);t.position<t.length?(s=t.input.slice(e,t.position),o=t.input.charCodeAt(++t.position)):tt(t,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!ni(o);)o===33&&(n?tt(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),cU.test(i)||tt(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),o=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),t8e.test(s)&&tt(t,"tag suffix cannot contain flow indicator characters")}s&&!hU.test(s)&&tt(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{tt(t,"tag name is malformed: "+s)}return r?t.tag=s:xc.call(t.tagMap,i)?t.tag=t.tagMap[i]+s:i==="!"?t.tag="!"+s:i==="!!"?t.tag="tag:yaml.org,2002:"+s:tt(t,'undeclared tag handle "'+i+'"'),!0}k(SU,"readTagProperty");function TU(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&tt(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!ni(r)&&!bh(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&tt(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}k(TU,"readAnchorProperty");function _U(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!ni(n)&&!bh(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&tt(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),xc.call(t.anchorMap,r)||tt(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Nr(t,!0,-1),!0}k(_U,"readAlias");function du(t,e,r,n,i){var s,o,a,l=1,c=!1,h=!1,u,f,d,p,m,g;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=o=a=Xx===r||lU===r,n&&Nr(t,!0,-1)&&(c=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;SU(t)||TU(t);)Nr(t,!0,-1)?(c=!0,a=s,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):a=!1;if(a&&(a=c||i),(l===1||Xx===r)&&(Yx===r||aU===r?m=e:m=e+1,g=t.position-t.lineStart,l===1?a&&(_6(t,g)||CU(t,g,m))||wU(t,m)?h=!0:(o&&kU(t,m)||xU(t,m)||vU(t,m)?h=!0:_U(t)?(h=!0,(t.tag!==null||t.anchor!==null)&&tt(t,"alias node should not have any properties")):bU(t,m,Yx===r)&&(h=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(h=a&&_6(t,g))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&tt(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),u=0,f=t.implicitTypes.length;u<f;u+=1)if(p=t.implicitTypes[u],p.resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(xc.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,d=t.typeMap.multi[t.kind||"fallback"],u=0,f=d.length;u<f;u+=1)if(t.tag.slice(0,d[u].tag.length)===d[u].tag){p=d[u];break}p||tt(t,"unknown tag !<"+t.tag+">"),t.result!==null&&p.kind!==t.kind&&tt(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):tt(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||h}k(du,"composeNode");function MU(t){var e=t.position,r,n,i,s=!1,o;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(o=t.input.charCodeAt(t.position))!==0&&(Nr(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||o!==37));){for(s=!0,o=t.input.charCodeAt(++t.position),r=t.position;o!==0&&!ni(o);)o=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&tt(t,"directive name must not be less than one character in length");o!==0;){for(;nc(o);)o=t.input.charCodeAt(++t.position);if(o===35){do o=t.input.charCodeAt(++t.position);while(o!==0&&!eo(o));break}if(eo(o))break;for(r=t.position;o!==0&&!ni(o);)o=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}o!==0&&ew(t),xc.call(YD,n)?YD[n](t,n,i):vg(t,'unknown document directive "'+n+'"')}if(Nr(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Nr(t,!0,-1)):s&&tt(t,"directives end mark is expected"),du(t,t.lineIndent-1,Xx,!1,!0),Nr(t,!0,-1),t.checkLineBreaks&&e8e.test(t.input.slice(e,t.position))&&vg(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&z1(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Nr(t,!0,-1));return}if(t.position<t.length-1)tt(t,"end of the stream or a document separator is expected");else return}k(MU,"readDocument");function oT(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new yU(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,tt(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)MU(r);return r.documents}k(oT,"loadDocuments");function r8e(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=oT(t,r);if(typeof e!="function")return n;for(var i=0,s=n.length;i<s;i+=1)e(n[i])}k(r8e,"loadAll$1");function AU(t,e){var r=oT(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new _i("expected a single document in the stream, but found more")}}k(AU,"load$1");var n8e=AU,i8e={load:n8e},EU=Object.prototype.toString,LU=Object.prototype.hasOwnProperty,aT=65279,s8e=9,wg=10,o8e=13,a8e=32,l8e=33,c8e=34,M6=35,h8e=37,u8e=38,f8e=39,d8e=42,OU=44,p8e=45,Jx=58,m8e=61,g8e=62,y8e=63,b8e=64,DU=91,IU=93,x8e=96,BU=123,v8e=124,RU=125,Un={};Un[0]="\\0";Un[7]="\\a";Un[8]="\\b";Un[9]="\\t";Un[10]="\\n";Un[11]="\\v";Un[12]="\\f";Un[13]="\\r";Un[27]="\\e";Un[34]='\\"';Un[92]="\\\\";Un[133]="\\N";Un[160]="\\_";Un[8232]="\\L";Un[8233]="\\P";var w8e=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],k8e=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function PU(t,e){var r,n,i,s,o,a,l;if(e===null)return{};for(r={},n=Object.keys(e),i=0,s=n.length;i<s;i+=1)o=n[i],a=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=t.compiledTypeMap.fallback[o],l&&LU.call(l.styleAliases,a)&&(a=l.styleAliases[a]),r[o]=a;return r}k(PU,"compileStyleMap");function NU(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new _i("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Qr.repeat("0",n-e.length)+e}k(NU,"encodeHex");var C8e=1,kg=2;function FU(t){this.schema=t.schema||oU,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Qr.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=PU(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?kg:C8e,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}k(FU,"State");function A6(t,e){for(var r=Qr.repeat(" ",e),n=0,i=-1,s="",o,a=t.length;n<a;)i=t.indexOf(`
`,n),i===-1?(o=t.slice(n),n=a):(o=t.slice(n,i+1),n=i+1),o.length&&o!==`
`&&(s+=r),s+=o;return s}k(A6,"indentString");function Zx(t,e){return`
`+Qr.repeat(" ",t.indent*e)}k(Zx,"generateNextLine");function $U(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}k($U,"testImplicitResolving");function Cg(t){return t===a8e||t===s8e}k(Cg,"isWhitespace");function Bd(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==aT||65536<=t&&t<=1114111}k(Bd,"isPrintable");function E6(t){return Bd(t)&&t!==aT&&t!==o8e&&t!==wg}k(E6,"isNsCharOrWhitespace");function L6(t,e,r){var n=E6(t),i=n&&!Cg(t);return(r?n:n&&t!==OU&&t!==DU&&t!==IU&&t!==BU&&t!==RU)&&t!==M6&&!(e===Jx&&!i)||E6(e)&&!Cg(e)&&t===M6||e===Jx&&i}k(L6,"isPlainSafe");function zU(t){return Bd(t)&&t!==aT&&!Cg(t)&&t!==p8e&&t!==y8e&&t!==Jx&&t!==OU&&t!==DU&&t!==IU&&t!==BU&&t!==RU&&t!==M6&&t!==u8e&&t!==d8e&&t!==l8e&&t!==v8e&&t!==m8e&&t!==g8e&&t!==f8e&&t!==c8e&&t!==h8e&&t!==b8e&&t!==x8e}k(zU,"isPlainSafeFirst");function HU(t){return!Cg(t)&&t!==Jx}k(HU,"isPlainSafeLast");function af(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}k(af,"codePointAt");function lT(t){var e=/^\n* /;return e.test(t)}k(lT,"needIndentIndicator");var qU=1,O6=2,VU=3,WU=4,tf=5;function jU(t,e,r,n,i,s,o,a){var l,c=0,h=null,u=!1,f=!1,d=n!==-1,p=-1,m=zU(af(t,0))&&HU(af(t,t.length-1));if(e||o)for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=af(t,l),!Bd(c))return tf;m=m&&L6(c,h,a),h=c}else{for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=af(t,l),c===wg)u=!0,d&&(f=f||l-p-1>n&&t[p+1]!==" ",p=l);else if(!Bd(c))return tf;m=m&&L6(c,h,a),h=c}f=f||d&&l-p-1>n&&t[p+1]!==" "}return!u&&!f?m&&!o&&!i(t)?qU:s===kg?tf:O6:r>9&&lT(t)?tf:o?s===kg?tf:O6:f?WU:VU}k(jU,"chooseScalarStyle");function UU(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===kg?'""':"''";if(!t.noCompatMode&&(w8e.indexOf(e)!==-1||k8e.test(e)))return t.quotingType===kg?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,r),o=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),a=n||t.flowLevel>-1&&r>=t.flowLevel;function l(c){return $U(t,c)}switch(k(l,"testAmbiguity"),jU(e,a,t.indent,o,l,t.quotingType,t.forceQuotes&&!n,i)){case qU:return e;case O6:return"'"+e.replace(/'/g,"''")+"'";case VU:return"|"+D6(e,t.indent)+I6(A6(e,s));case WU:return">"+D6(e,t.indent)+I6(A6(GU(e,o),s));case tf:return'"'+KU(e)+'"';default:throw new _i("impossible error: invalid scalar style")}}()}k(UU,"writeScalar");function D6(t,e){var r=lT(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),s=i?"+":n?"":"-";return r+s+`
`}k(D6,"blockHeader");function I6(t){return t[t.length-1]===`
`?t.slice(0,-1):t}k(I6,"dropEndingNewline");function GU(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var c=t.indexOf(`
`);return c=c!==-1?c:t.length,r.lastIndex=c,B6(t.slice(0,c),e)}(),i=t[0]===`
`||t[0]===" ",s,o;o=r.exec(t);){var a=o[1],l=o[2];s=l[0]===" ",n+=a+(!i&&!s&&l!==""?`
`:"")+B6(l,e),i=s}return n}k(GU,"foldString");function B6(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,s,o=0,a=0,l="";n=r.exec(t);)a=n.index,a-i>e&&(s=o>i?o:a,l+=`
`+t.slice(i,s),i=s+1),o=a;return l+=`
`,t.length-i>e&&o>i?l+=t.slice(i,o)+`
`+t.slice(o+1):l+=t.slice(i),l.slice(1)}k(B6,"foldLine");function KU(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=af(t,i),n=Un[r],!n&&Bd(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||NU(r);return e}k(KU,"escapeString");function YU(t,e,r){var n="",i=t.tag,s,o,a;for(s=0,o=r.length;s<o;s+=1)a=r[s],t.replacer&&(a=t.replacer.call(r,String(s),a)),(ta(t,e,a,!1,!1)||typeof a>"u"&&ta(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}k(YU,"writeFlowSequence");function R6(t,e,r,n){var i="",s=t.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(ta(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&ta(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=Zx(t,e)),t.dump&&wg===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=s,t.dump=i||"[]"}k(R6,"writeBlockSequence");function XU(t,e,r){var n="",i=t.tag,s=Object.keys(r),o,a,l,c,h;for(o=0,a=s.length;o<a;o+=1)h="",n!==""&&(h+=", "),t.condenseFlow&&(h+='"'),l=s[o],c=r[l],t.replacer&&(c=t.replacer.call(r,l,c)),ta(t,e,l,!1,!1)&&(t.dump.length>1024&&(h+="? "),h+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),ta(t,e,c,!1,!1)&&(h+=t.dump,n+=h));t.tag=i,t.dump="{"+n+"}"}k(XU,"writeFlowMapping");function JU(t,e,r,n){var i="",s=t.tag,o=Object.keys(r),a,l,c,h,u,f;if(t.sortKeys===!0)o.sort();else if(typeof t.sortKeys=="function")o.sort(t.sortKeys);else if(t.sortKeys)throw new _i("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)f="",(!n||i!=="")&&(f+=Zx(t,e)),c=o[a],h=r[c],t.replacer&&(h=t.replacer.call(r,c,h)),ta(t,e+1,c,!0,!0,!0)&&(u=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,u&&(t.dump&&wg===t.dump.charCodeAt(0)?f+="?":f+="? "),f+=t.dump,u&&(f+=Zx(t,e)),ta(t,e+1,h,!0,u)&&(t.dump&&wg===t.dump.charCodeAt(0)?f+=":":f+=": ",f+=t.dump,i+=f));t.tag=s,t.dump=i||"{}"}k(JU,"writeBlockMapping");function P6(t,e,r){var n,i,s,o,a,l;for(i=r?t.explicitTypes:t.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(r?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(l=t.styleMap[a.tag]||a.defaultStyle,EU.call(a.represent)==="[object Function]")n=a.represent(e,l);else if(LU.call(a.represent,l))n=a.represent[l](e,l);else throw new _i("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');t.dump=n}return!0}return!1}k(P6,"detectType");function ta(t,e,r,n,i,s,o){t.tag=null,t.dump=r,P6(t,r,!1)||P6(t,r,!0);var a=EU.call(t.dump),l=n,c;n&&(n=t.flowLevel<0||t.flowLevel>e);var h=a==="[object Object]"||a==="[object Array]",u,f;if(h&&(u=t.duplicates.indexOf(r),f=u!==-1),(t.tag!==null&&t.tag!=="?"||f||t.indent!==2&&e>0)&&(i=!1),f&&t.usedDuplicates[u])t.dump="*ref_"+u;else{if(h&&f&&!t.usedDuplicates[u]&&(t.usedDuplicates[u]=!0),a==="[object Object]")n&&Object.keys(t.dump).length!==0?(JU(t,e,t.dump,i),f&&(t.dump="&ref_"+u+t.dump)):(XU(t,e,t.dump),f&&(t.dump="&ref_"+u+" "+t.dump));else if(a==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!o&&e>0?R6(t,e-1,t.dump,i):R6(t,e,t.dump,i),f&&(t.dump="&ref_"+u+t.dump)):(YU(t,e,t.dump),f&&(t.dump="&ref_"+u+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&UU(t,t.dump,e,s,l);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new _i("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(c=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",t.dump=c+" "+t.dump)}return!0}k(ta,"writeNode");function ZU(t,e){var r=[],n=[],i,s;for(Qx(t,r,n),i=0,s=n.length;i<s;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(s)}k(ZU,"getDuplicateReferences");function Qx(t,e,r){var n,i,s;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,s=t.length;i<s;i+=1)Qx(t[i],e,r);else for(n=Object.keys(t),i=0,s=n.length;i<s;i+=1)Qx(t[n[i]],e,r)}k(Qx,"inspectNode");function S8e(t,e){e=e||{};var r=new FU(e);r.noRefs||ZU(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),ta(r,0,n,!0,!0)?r.dump+`
`:""}k(S8e,"dump$1");function T8e(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}k(T8e,"renamed");var _8e=Vj,M8e=i8e.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var En={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},XD={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function Dp(t,e){if(t===void 0||e===void 0)return{angle:0,deltaX:0,deltaY:0};t=kr(t),e=kr(e);const[r,n]=[t.x,t.y],[i,s]=[e.x,e.y],o=i-r,a=s-n;return{angle:Math.atan(a/o),deltaX:o,deltaY:a}}k(Dp,"calculateDeltaAndAngle");var kr=k(t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,"pointTransformer"),A8e=k(t=>({x:k(function(e,r,n){let i=0;const s=kr(n[0]).x<kr(n[n.length-1]).x?"left":"right";if(r===0&&Object.hasOwn(En,t.arrowTypeStart)){const{angle:d,deltaX:p}=Dp(n[0],n[1]);i=En[t.arrowTypeStart]*Math.cos(d)*(p>=0?1:-1)}else if(r===n.length-1&&Object.hasOwn(En,t.arrowTypeEnd)){const{angle:d,deltaX:p}=Dp(n[n.length-1],n[n.length-2]);i=En[t.arrowTypeEnd]*Math.cos(d)*(p>=0?1:-1)}const o=Math.abs(kr(e).x-kr(n[n.length-1]).x),a=Math.abs(kr(e).y-kr(n[n.length-1]).y),l=Math.abs(kr(e).x-kr(n[0]).x),c=Math.abs(kr(e).y-kr(n[0]).y),h=En[t.arrowTypeStart],u=En[t.arrowTypeEnd],f=1;if(o<u&&o>0&&a<u){let d=u+f-o;d*=s==="right"?-1:1,i-=d}if(l<h&&l>0&&c<h){let d=h+f-l;d*=s==="right"?-1:1,i+=d}return kr(e).x+i},"x"),y:k(function(e,r,n){let i=0;const s=kr(n[0]).y<kr(n[n.length-1]).y?"down":"up";if(r===0&&Object.hasOwn(En,t.arrowTypeStart)){const{angle:d,deltaY:p}=Dp(n[0],n[1]);i=En[t.arrowTypeStart]*Math.abs(Math.sin(d))*(p>=0?1:-1)}else if(r===n.length-1&&Object.hasOwn(En,t.arrowTypeEnd)){const{angle:d,deltaY:p}=Dp(n[n.length-1],n[n.length-2]);i=En[t.arrowTypeEnd]*Math.abs(Math.sin(d))*(p>=0?1:-1)}const o=Math.abs(kr(e).y-kr(n[n.length-1]).y),a=Math.abs(kr(e).x-kr(n[n.length-1]).x),l=Math.abs(kr(e).y-kr(n[0]).y),c=Math.abs(kr(e).x-kr(n[0]).x),h=En[t.arrowTypeStart],u=En[t.arrowTypeEnd],f=1;if(o<u&&o>0&&a<u){let d=u+f-o;d*=s==="up"?-1:1,i-=d}if(l<h&&l>0&&c<h){let d=h+f-l;d*=s==="up"?-1:1,i+=d}return kr(e).y+i},"y")}),"getLineFunctionsWithOffset"),cT=k(({flowchart:t})=>{var i,s;const e=((i=t==null?void 0:t.subGraphTitleMargin)==null?void 0:i.top)??0,r=((s=t==null?void 0:t.subGraphTitleMargin)==null?void 0:s.bottom)??0,n=e+r;return{subGraphTitleTopMargin:e,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:n}},"getSubGraphTitleMargins"),E8e=k(t=>{const{handDrawnSeed:e}=Jt();return{fill:t,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:t,seed:e}},"solidStateFill"),n0=k(t=>{const e=L8e([...t.cssCompiledStyles||[],...t.cssStyles||[],...t.labelStyle||[]]);return{stylesMap:e,stylesArray:[...e]}},"compileStyles"),L8e=k(t=>{const e=new Map;return t.forEach(r=>{const[n,i]=r.split(":");e.set(n.trim(),i==null?void 0:i.trim())}),e},"styles2Map"),QU=k(t=>t==="color"||t==="font-size"||t==="font-family"||t==="font-weight"||t==="font-style"||t==="text-decoration"||t==="text-align"||t==="text-transform"||t==="line-height"||t==="letter-spacing"||t==="word-spacing"||t==="text-shadow"||t==="text-overflow"||t==="white-space"||t==="word-wrap"||t==="word-break"||t==="overflow-wrap"||t==="hyphens","isLabelStyle"),Ue=k(t=>{const{stylesArray:e}=n0(t),r=[],n=[],i=[],s=[];return e.forEach(o=>{const a=o[0];QU(a)?r.push(o.join(":")+" !important"):(n.push(o.join(":")+" !important"),a.includes("stroke")&&i.push(o.join(":")+" !important"),a==="fill"&&s.push(o.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:n.join(";"),stylesArray:e,borderStyles:i,backgroundStyles:s}},"styles2String"),je=k((t,e)=>{var l;const{themeVariables:r,handDrawnSeed:n}=Jt(),{nodeBorder:i,mainBkg:s}=r,{stylesMap:o}=n0(t);return Object.assign({roughness:.7,fill:o.get("fill")||s,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:o.get("stroke")||i,seed:n,strokeWidth:((l=o.get("stroke-width"))==null?void 0:l.replace("px",""))||1.3,fillLineDash:[0,0],strokeLineDash:O8e(o.get("stroke-dasharray"))},e)},"userNodeOverrides"),O8e=k(t=>{if(!t)return[0,0];const e=t.trim().split(/\s+/).map(Number);if(e.length===1){const i=isNaN(e[0])?0:e[0];return[i,i]}const r=isNaN(e[0])?0:e[0],n=isNaN(e[1])?0:e[1];return[r,n]},"getStrokeDashArray"),hT={},nn={};Object.defineProperty(nn,"__esModule",{value:!0});nn.BLANK_URL=nn.relativeFirstCharacters=nn.whitespaceEscapeCharsRegex=nn.urlSchemeRegex=nn.ctrlCharactersRegex=nn.htmlCtrlEntityRegex=nn.htmlEntitiesRegex=nn.invalidProtocolRegex=void 0;nn.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im;nn.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g;nn.htmlCtrlEntityRegex=/&(newline|tab);/gi;nn.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim;nn.urlSchemeRegex=/^.+(:|&colon;)/gim;nn.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g;nn.relativeFirstCharacters=[".","/"];nn.BLANK_URL="about:blank";Object.defineProperty(hT,"__esModule",{value:!0});var eG=hT.sanitizeUrl=void 0,An=nn;function D8e(t){return An.relativeFirstCharacters.indexOf(t[0])>-1}function I8e(t){var e=t.replace(An.ctrlCharactersRegex,"");return e.replace(An.htmlEntitiesRegex,function(r,n){return String.fromCharCode(n)})}function B8e(t){return URL.canParse(t)}function JD(t){try{return decodeURIComponent(t)}catch{return t}}function R8e(t){if(!t)return An.BLANK_URL;var e,r=JD(t.trim());do r=I8e(r).replace(An.htmlCtrlEntityRegex,"").replace(An.ctrlCharactersRegex,"").replace(An.whitespaceEscapeCharsRegex,"").trim(),r=JD(r),e=r.match(An.ctrlCharactersRegex)||r.match(An.htmlEntitiesRegex)||r.match(An.htmlCtrlEntityRegex)||r.match(An.whitespaceEscapeCharsRegex);while(e&&e.length>0);var n=r;if(!n)return An.BLANK_URL;if(D8e(n))return n;var i=n.trimStart(),s=i.match(An.urlSchemeRegex);if(!s)return n;var o=s[0].toLowerCase().trim();if(An.invalidProtocolRegex.test(o))return An.BLANK_URL;var a=i.replace(/\\/g,"/");if(o==="mailto:"||o.includes("://"))return a;if(o==="http:"||o==="https:"){if(!B8e(a))return An.BLANK_URL;var l=new URL(a);return l.protocol=l.protocol.toLowerCase(),l.hostname=l.hostname.toLowerCase(),l.toString()}return a}eG=hT.sanitizeUrl=R8e;var P8e="",N8e={curveBasis:vb,curveBasisClosed:fSe,curveBasisOpen:dSe,curveBumpX:ZW,curveBumpY:QW,curveBundle:pSe,curveCardinalClosed:mSe,curveCardinalOpen:gSe,curveCardinal:nj,curveCatmullRomClosed:ySe,curveCatmullRomOpen:bSe,curveCatmullRom:sj,curveLinear:Wx,curveLinearClosed:xSe,curveMonotoneX:uj,curveMonotoneY:fj,curveNatural:pj,curveStep:mj,curveStepAfter:yj,curveStepBefore:gj},F8e=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,$8e=k(function(t,e){const r=tG(t,/(?:init\b)|(?:initialize\b)/);let n={};if(Array.isArray(r)){const o=r.map(a=>a.args);Ix(o),n=Zr(n,[...o])}else n=r.args;if(!n)return;let i=N9(t,e);const s="config";return n[s]!==void 0&&(i==="flowchart-v2"&&(i="flowchart"),n[i]=n[s],delete n[s]),n},"detectInit"),tG=k(function(t,e=null){var r,n;try{const i=new RegExp(`[%]{2}(?![{]${F8e.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(i,"").replace(/'/gm,'"'),he.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);let s;const o=[];for(;(s=wm.exec(t))!==null;)if(s.index===wm.lastIndex&&wm.lastIndex++,s&&!e||e&&((r=s[1])!=null&&r.match(e))||e&&((n=s[2])!=null&&n.match(e))){const a=s[1]?s[1]:s[2],l=s[3]?s[3].trim():s[4]?JSON.parse(s[4].trim()):null;o.push({type:a,args:l})}return o.length===0?{type:t,args:null}:o.length===1?o[0]:o}catch(i){return he.error(`ERROR: ${i.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}},"detectDirective"),z8e=k(function(t){return t.replace(wm,"")},"removeDirectives"),H8e=k(function(t,e){for(const[r,n]of e.entries())if(n.match(t))return r;return-1},"isSubstringInArray");function uT(t,e){if(!t)return e;const r=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return N8e[r]??e}k(uT,"interpolateToCurve");function rG(t,e){const r=t.trim();if(r)return e.securityLevel!=="loose"?eG(r):r}k(rG,"formatUrl");var q8e=k((t,...e)=>{const r=t.split("."),n=r.length-1,i=r[n];let s=window;for(let o=0;o<n;o++)if(s=s[r[o]],!s){he.error(`Function name: ${t} not found in window`);return}s[i](...e)},"runFunc");function fT(t,e){return!t||!e?0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}k(fT,"distance");function nG(t){let e,r=0;t.forEach(i=>{r+=fT(i,e),e=i});const n=r/2;return dT(t,n)}k(nG,"traverseEdge");function iG(t){return t.length===1?t[0]:nG(t)}k(iG,"calcLabelPosition");var ZD=k((t,e=2)=>{const r=Math.pow(10,e);return Math.round(t*r)/r},"roundNumber"),dT=k((t,e)=>{let r,n=e;for(const i of t){if(r){const s=fT(i,r);if(s===0)return r;if(s<n)n-=s;else{const o=n/s;if(o<=0)return r;if(o>=1)return{x:i.x,y:i.y};if(o>0&&o<1)return{x:ZD((1-o)*r.x+o*i.x,5),y:ZD((1-o)*r.y+o*i.y,5)}}}r=i}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),V8e=k((t,e,r)=>{he.info(`our points ${JSON.stringify(e)}`),e[0]!==r&&(e=e.reverse());const i=dT(e,25),s=t?10:5,o=Math.atan2(e[0].y-i.y,e[0].x-i.x),a={x:0,y:0};return a.x=Math.sin(o)*s+(e[0].x+i.x)/2,a.y=-Math.cos(o)*s+(e[0].y+i.y)/2,a},"calcCardinalityPosition");function sG(t,e,r){const n=structuredClone(r);he.info("our points",n),e!=="start_left"&&e!=="start_right"&&n.reverse();const i=25+t,s=dT(n,i),o=10+t*.5,a=Math.atan2(n[0].y-s.y,n[0].x-s.x),l={x:0,y:0};return e==="start_left"?(l.x=Math.sin(a+Math.PI)*o+(n[0].x+s.x)/2,l.y=-Math.cos(a+Math.PI)*o+(n[0].y+s.y)/2):e==="end_right"?(l.x=Math.sin(a-Math.PI)*o+(n[0].x+s.x)/2-5,l.y=-Math.cos(a-Math.PI)*o+(n[0].y+s.y)/2-5):e==="end_left"?(l.x=Math.sin(a)*o+(n[0].x+s.x)/2-5,l.y=-Math.cos(a)*o+(n[0].y+s.y)/2-5):(l.x=Math.sin(a)*o+(n[0].x+s.x)/2,l.y=-Math.cos(a)*o+(n[0].y+s.y)/2),l}k(sG,"calcTerminalLabelPosition");function oG(t){let e="",r="";for(const n of t)n!==void 0&&(n.startsWith("color:")||n.startsWith("text-align:")?r=r+n+";":e=e+n+";");return{style:e,labelStyle:r}}k(oG,"getStylesFromArray");var QD=0,W8e=k(()=>(QD++,"id-"+Math.random().toString(36).substr(2,12)+"-"+QD),"generateId");function aG(t){let e="";const r="0123456789abcdef",n=r.length;for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*n));return e}k(aG,"makeRandomHex");var j8e=k(t=>aG(t.length),"random"),U8e=k(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),G8e=k(function(t,e){const r=e.text.replace(r0.lineBreakRegex," "),[,n]=rw(e.fontSize),i=t.append("text");i.attr("x",e.x),i.attr("y",e.y),i.style("text-anchor",e.anchor),i.style("font-family",e.fontFamily),i.style("font-size",n),i.style("font-weight",e.fontWeight),i.attr("fill",e.fill),e.class!==void 0&&i.attr("class",e.class);const s=i.append("tspan");return s.attr("x",e.x+e.textMargin*2),s.attr("fill",e.fill),s.text(r),i},"drawSimpleText"),K8e=Qg((t,e,r)=>{if(!t||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),r0.lineBreakRegex.test(t)))return t;const n=t.split(" ").filter(Boolean),i=[];let s="";return n.forEach((o,a)=>{const l=hl(`${o} `,r),c=hl(s,r);if(l>e){const{hyphenatedStrings:f,remainingWord:d}=Y8e(o,e,"-",r);i.push(s,...f),s=d}else c+l>=e?(i.push(s),s=o):s=[s,o].filter(Boolean).join(" ");a+1===n.length&&i.push(s)}),i.filter(o=>o!=="").join(r.joinWith)},(t,e,r)=>`${t}${e}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),Y8e=Qg((t,e,r="-",n)=>{n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},n);const i=[...t],s=[];let o="";return i.forEach((a,l)=>{const c=`${o}${a}`;if(hl(c,n)>=e){const u=l+1,f=i.length===u,d=`${c}${r}`;s.push(f?c:d),o=""}else o=c}),{hyphenatedStrings:s,remainingWord:o}},(t,e,r="-",n)=>`${t}${e}${r}${n.fontSize}${n.fontWeight}${n.fontFamily}`);function lG(t,e){return pT(t,e).height}k(lG,"calculateTextHeight");function hl(t,e){return pT(t,e).width}k(hl,"calculateTextWidth");var pT=Qg((t,e)=>{const{fontSize:r=12,fontFamily:n="Arial",fontWeight:i=400}=e;if(!t)return{width:0,height:0};const[,s]=rw(r),o=["sans-serif",n],a=t.split(r0.lineBreakRegex),l=[],c=Ft("body");if(!c.remove)return{width:0,height:0,lineHeight:0};const h=c.append("svg");for(const f of o){let d=0;const p={width:0,height:0,lineHeight:0};for(const m of a){const g=U8e();g.text=m||P8e;const y=G8e(h,g).style("font-size",s).style("font-weight",i).style("font-family",f),b=(y._groups||y)[0][0].getBBox();if(b.width===0&&b.height===0)throw new Error("svg element not in render tree");p.width=Math.round(Math.max(p.width,b.width)),d=Math.round(b.height),p.height+=d,p.lineHeight=Math.round(Math.max(p.lineHeight,d))}l.push(p)}h.remove();const u=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[u]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`),ad,X8e=(ad=class{constructor(e=!1,r){this.count=0,this.count=r?r.length:0,this.next=e?()=>this.count++:()=>Date.now()}},k(ad,"InitIDGenerator"),ad),r2,J8e=k(function(t){return r2=r2||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),r2.innerHTML=t,unescape(r2.textContent)},"entityDecode");function mT(t){return"str"in t}k(mT,"isDetailedError");var Z8e=k((t,e,r,n)=>{var s;if(!n)return;const i=(s=t.node())==null?void 0:s.getBBox();i&&t.append("text").text(n).attr("text-anchor","middle").attr("x",i.x+i.width/2).attr("y",-r).attr("class",e)},"insertTitle"),rw=k(t=>{if(typeof t=="number")return[t,t+"px"];const e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]},"parseFontSize");function gT(t,e){return pQ({},t,e)}k(gT,"cleanAndMerge");var Gs={assignWithDepth:Zr,wrapLabel:K8e,calculateTextHeight:lG,calculateTextWidth:hl,calculateTextDimensions:pT,cleanAndMerge:gT,detectInit:$8e,detectDirective:tG,isSubstringInArray:H8e,interpolateToCurve:uT,calcLabelPosition:iG,calcCardinalityPosition:V8e,calcTerminalLabelPosition:sG,formatUrl:rG,getStylesFromArray:oG,generateId:W8e,random:j8e,runFunc:q8e,entityDecode:J8e,insertTitle:Z8e,isLabelCoordinateInPath:cG,parseFontSize:rw,InitIDGenerator:X8e},Q8e=k(function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),e=e.replace(/#\w+;/g,function(r){const n=r.substring(1,r.length-1);return/^\+?\d+$/.test(n)?""+n+"":""+n+""}),e},"encodeEntities"),Au=k(function(t){return t.replace(//g,"&#").replace(//g,"&").replace(//g,";")},"decodeEntities"),dLe=k((t,e,{counter:r=0,prefix:n,suffix:i},s)=>s||`${n?`${n}_`:""}${t}_${e}_${r}${i?`_${i}`:""}`,"getEdgeId");function Hn(t){return t??null}k(Hn,"handleUndefinedAttr");function cG(t,e){const r=Math.round(t.x),n=Math.round(t.y),i=e.replace(/(\d+\.\d+)/g,s=>Math.round(parseFloat(s)).toString());return i.includes(r.toString())||i.includes(n.toString())}k(cG,"isLabelCoordinateInPath");const e9e=Object.freeze({left:0,top:0,width:16,height:16}),ev=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),hG=Object.freeze({...e9e,...ev}),t9e=Object.freeze({...hG,body:"",hidden:!1}),r9e=Object.freeze({width:null,height:null}),n9e=Object.freeze({...r9e,...ev}),i9e=(t,e,r,n="")=>{const i=t.split(":");if(t.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;n=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const a=i.pop(),l=i.pop(),c={provider:i.length>0?i[0]:n,prefix:l,name:a};return yk(c)?c:null}const s=i[0],o=s.split("-");if(o.length>1){const a={provider:n,prefix:o.shift(),name:o.join("-")};return yk(a)?a:null}if(r&&n===""){const a={provider:n,prefix:"",name:s};return yk(a,r)?a:null}return null},yk=(t,e)=>t?!!((e&&t.prefix===""||t.prefix)&&t.name):!1;function s9e(t,e){const r={};!t.hFlip!=!e.hFlip&&(r.hFlip=!0),!t.vFlip!=!e.vFlip&&(r.vFlip=!0);const n=((t.rotate||0)+(e.rotate||0))%4;return n&&(r.rotate=n),r}function eI(t,e){const r=s9e(t,e);for(const n in t9e)n in ev?n in t&&!(n in r)&&(r[n]=ev[n]):n in e?r[n]=e[n]:n in t&&(r[n]=t[n]);return r}function o9e(t,e){const r=t.icons,n=t.aliases||Object.create(null),i=Object.create(null);function s(o){if(r[o])return i[o]=[];if(!(o in i)){i[o]=null;const a=n[o]&&n[o].parent,l=a&&s(a);l&&(i[o]=[a].concat(l))}return i[o]}return(e||Object.keys(r).concat(Object.keys(n))).forEach(s),i}function tI(t,e,r){const n=t.icons,i=t.aliases||Object.create(null);let s={};function o(a){s=eI(n[a]||i[a],s)}return o(e),r.forEach(o),eI(t,s)}function a9e(t,e){if(t.icons[e])return tI(t,e,[]);const r=o9e(t,[e])[e];return r?tI(t,e,r):null}const l9e=/(-?[0-9.]*[0-9]+[0-9.]*)/g,c9e=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function rI(t,e,r){if(e===1)return t;if(r=r||100,typeof t=="number")return Math.ceil(t*e*r)/r;if(typeof t!="string")return t;const n=t.split(l9e);if(n===null||!n.length)return t;const i=[];let s=n.shift(),o=c9e.test(s);for(;;){if(o){const a=parseFloat(s);isNaN(a)?i.push(s):i.push(Math.ceil(a*e*r)/r)}else i.push(s);if(s=n.shift(),s===void 0)return i.join("");o=!o}}function h9e(t,e="defs"){let r="";const n=t.indexOf("<"+e);for(;n>=0;){const i=t.indexOf(">",n),s=t.indexOf("</"+e);if(i===-1||s===-1)break;const o=t.indexOf(">",s);if(o===-1)break;r+=t.slice(i+1,s).trim(),t=t.slice(0,n).trim()+t.slice(o+1)}return{defs:r,content:t}}function u9e(t,e){return t?"<defs>"+t+"</defs>"+e:e}function f9e(t,e,r){const n=h9e(t);return u9e(n.defs,e+n.content+r)}const d9e=t=>t==="unset"||t==="undefined"||t==="none";function p9e(t,e){const r={...hG,...t},n={...n9e,...e},i={left:r.left,top:r.top,width:r.width,height:r.height};let s=r.body;[r,n].forEach(m=>{const g=[],y=m.hFlip,b=m.vFlip;let x=m.rotate;y?b?x+=2:(g.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),g.push("scale(-1 1)"),i.top=i.left=0):b&&(g.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),g.push("scale(1 -1)"),i.top=i.left=0);let T;switch(x<0&&(x-=Math.floor(x/4)*4),x=x%4,x){case 1:T=i.height/2+i.top,g.unshift("rotate(90 "+T.toString()+" "+T.toString()+")");break;case 2:g.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:T=i.width/2+i.left,g.unshift("rotate(-90 "+T.toString()+" "+T.toString()+")");break}x%2===1&&(i.left!==i.top&&(T=i.left,i.left=i.top,i.top=T),i.width!==i.height&&(T=i.width,i.width=i.height,i.height=T)),g.length&&(s=f9e(s,'<g transform="'+g.join(" ")+'">',"</g>"))});const o=n.width,a=n.height,l=i.width,c=i.height;let h,u;o===null?(u=a===null?"1em":a==="auto"?c:a,h=rI(u,l/c)):(h=o==="auto"?l:o,u=a===null?rI(h,c/l):a==="auto"?c:a);const f={},d=(m,g)=>{d9e(g)||(f[m]=g.toString())};d("width",h),d("height",u);const p=[i.left,i.top,l,c];return f.viewBox=p.join(" "),{attributes:f,viewBox:p,body:s}}const m9e=/\sid="(\S+)"/g,nI=new Map;function g9e(t){t=t.replace(/[0-9]+$/,"")||"a";const e=nI.get(t)||0;return nI.set(t,e+1),e?`${t}${e}`:t}function y9e(t){const e=[];let r;for(;r=m9e.exec(t);)e.push(r[1]);if(!e.length)return t;const n="suffix"+(Math.random()*16777216|Date.now()).toString(16);return e.forEach(i=>{const s=g9e(i),o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+o+')([")]|\\.[a-z])',"g"),"$1"+s+n+"$3")}),t=t.replace(new RegExp(n,"g"),""),t}function b9e(t,e){let r=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const n in e)r+=" "+n+'="'+e[n]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+t+"</svg>"}function yT(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Eu=yT();function uG(t){Eu=t}var Cm={exec:()=>null};function Wt(t,e=""){let r=typeof t=="string"?t:t.source,n={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(ii.caret,"$1"),r=r.replace(i,o),n},getRegex:()=>new RegExp(r,e)};return n}var x9e=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),ii={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},v9e=/^(?:[ \t]*(?:\n|$))+/,w9e=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,k9e=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,H1=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,C9e=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,bT=/(?:[*+-]|\d{1,9}[.)])/,fG=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,dG=Wt(fG).replace(/bull/g,bT).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),S9e=Wt(fG).replace(/bull/g,bT).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),xT=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,T9e=/^[^\n]+/,vT=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,_9e=Wt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",vT).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),M9e=Wt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,bT).getRegex(),nw="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",wT=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,A9e=Wt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",wT).replace("tag",nw).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),pG=Wt(xT).replace("hr",H1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",nw).getRegex(),E9e=Wt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",pG).getRegex(),kT={blockquote:E9e,code:w9e,def:_9e,fences:k9e,heading:C9e,hr:H1,html:A9e,lheading:dG,list:M9e,newline:v9e,paragraph:pG,table:Cm,text:T9e},iI=Wt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",H1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",nw).getRegex(),L9e={...kT,lheading:S9e,table:iI,paragraph:Wt(xT).replace("hr",H1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",iI).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",nw).getRegex()},O9e={...kT,html:Wt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",wT).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Cm,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Wt(xT).replace("hr",H1).replace("heading",` *#{1,6} *[^
]`).replace("lheading",dG).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},D9e=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,I9e=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,mG=/^( {2,}|\\)\n(?!\s*$)/,B9e=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,iw=/[\p{P}\p{S}]/u,CT=/[\s\p{P}\p{S}]/u,gG=/[^\s\p{P}\p{S}]/u,R9e=Wt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,CT).getRegex(),yG=/(?!~)[\p{P}\p{S}]/u,P9e=/(?!~)[\s\p{P}\p{S}]/u,N9e=/(?:[^\s\p{P}\p{S}]|~)/u,F9e=Wt(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",x9e?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),bG=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,$9e=Wt(bG,"u").replace(/punct/g,iw).getRegex(),z9e=Wt(bG,"u").replace(/punct/g,yG).getRegex(),xG="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",H9e=Wt(xG,"gu").replace(/notPunctSpace/g,gG).replace(/punctSpace/g,CT).replace(/punct/g,iw).getRegex(),q9e=Wt(xG,"gu").replace(/notPunctSpace/g,N9e).replace(/punctSpace/g,P9e).replace(/punct/g,yG).getRegex(),V9e=Wt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,gG).replace(/punctSpace/g,CT).replace(/punct/g,iw).getRegex(),W9e=Wt(/\\(punct)/,"gu").replace(/punct/g,iw).getRegex(),j9e=Wt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),U9e=Wt(wT).replace("(?:-->|$)","-->").getRegex(),G9e=Wt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",U9e).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),tv=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,K9e=Wt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",tv).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),vG=Wt(/^!?\[(label)\]\[(ref)\]/).replace("label",tv).replace("ref",vT).getRegex(),wG=Wt(/^!?\[(ref)\](?:\[\])?/).replace("ref",vT).getRegex(),Y9e=Wt("reflink|nolink(?!\\()","g").replace("reflink",vG).replace("nolink",wG).getRegex(),sI=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,ST={_backpedal:Cm,anyPunctuation:W9e,autolink:j9e,blockSkip:F9e,br:mG,code:I9e,del:Cm,emStrongLDelim:$9e,emStrongRDelimAst:H9e,emStrongRDelimUnd:V9e,escape:D9e,link:K9e,nolink:wG,punctuation:R9e,reflink:vG,reflinkSearch:Y9e,tag:G9e,text:B9e,url:Cm},X9e={...ST,link:Wt(/^!?\[(label)\]\((.*?)\)/).replace("label",tv).getRegex(),reflink:Wt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",tv).getRegex()},N6={...ST,emStrongRDelimAst:q9e,emStrongLDelim:z9e,url:Wt(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",sI).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Wt(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",sI).getRegex()},J9e={...N6,br:Wt(mG).replace("{2,}","*").getRegex(),text:Wt(N6.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},n2={normal:kT,gfm:L9e,pedantic:O9e},$0={normal:ST,gfm:N6,breaks:J9e,pedantic:X9e},Z9e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oI=t=>Z9e[t];function Mo(t,e){if(e){if(ii.escapeTest.test(t))return t.replace(ii.escapeReplace,oI)}else if(ii.escapeTestNoEncode.test(t))return t.replace(ii.escapeReplaceNoEncode,oI);return t}function aI(t){try{t=encodeURI(t).replace(ii.percentDecode,"%")}catch{return null}return t}function lI(t,e){var s;let r=t.replace(ii.findPipe,(o,a,l)=>{let c=!1,h=a;for(;--h>=0&&l[h]==="\\";)c=!c;return c?"|":" |"}),n=r.split(ii.splitPipe),i=0;if(n[0].trim()||n.shift(),n.length>0&&!((s=n.at(-1))!=null&&s.trim())&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(ii.slashPipe,"|");return n}function z0(t,e,r){let n=t.length;if(n===0)return"";let i=0;for(;i<n&&t.charAt(n-i-1)===e;)i++;return t.slice(0,n-i)}function Q9e(t,e){if(t.indexOf(e[1])===-1)return-1;let r=0;for(let n=0;n<t.length;n++)if(t[n]==="\\")n++;else if(t[n]===e[0])r++;else if(t[n]===e[1]&&(r--,r<0))return n;return r>0?-2:-1}function cI(t,e,r,n,i){let s=e.href,o=e.title||null,a=t[1].replace(i.other.outputLinkReplace,"$1");n.state.inLink=!0;let l={type:t[0].charAt(0)==="!"?"image":"link",raw:r,href:s,title:o,text:a,tokens:n.inlineTokens(a)};return n.state.inLink=!1,l}function eTe(t,e,r){let n=t.match(r.other.indentCodeCompensation);if(n===null)return e;let i=n[1];return e.split(`
`).map(s=>{let o=s.match(r.other.beginningSpace);if(o===null)return s;let[a]=o;return a.length>=i.length?s.slice(i.length):s}).join(`
`)}var rv=class{constructor(e){Se(this,"options");Se(this,"rules");Se(this,"lexer");this.options=e||Eu}space(e){let r=this.rules.block.newline.exec(e);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(e){let r=this.rules.block.code.exec(e);if(r){let n=r[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?n:z0(n,`
`)}}}fences(e){let r=this.rules.block.fences.exec(e);if(r){let n=r[0],i=eTe(n,r[3]||"",this.rules);return{type:"code",raw:n,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:i}}}heading(e){let r=this.rules.block.heading.exec(e);if(r){let n=r[2].trim();if(this.rules.other.endingHash.test(n)){let i=z0(n,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(n=i.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let r=this.rules.block.hr.exec(e);if(r)return{type:"hr",raw:z0(r[0],`
`)}}blockquote(e){let r=this.rules.block.blockquote.exec(e);if(r){let n=z0(r[0],`
`).split(`
`),i="",s="",o=[];for(;n.length>0;){let a=!1,l=[],c;for(c=0;c<n.length;c++)if(this.rules.other.blockquoteStart.test(n[c]))l.push(n[c]),a=!0;else if(!a)l.push(n[c]);else break;n=n.slice(c);let h=l.join(`
`),u=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${h}`:h,s=s?`${s}
${u}`:u;let f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,o,!0),this.lexer.state.top=f,n.length===0)break;let d=o.at(-1);if((d==null?void 0:d.type)==="code")break;if((d==null?void 0:d.type)==="blockquote"){let p=d,m=p.raw+`
`+n.join(`
`),g=this.blockquote(m);o[o.length-1]=g,i=i.substring(0,i.length-p.raw.length)+g.raw,s=s.substring(0,s.length-p.text.length)+g.text;break}else if((d==null?void 0:d.type)==="list"){let p=d,m=p.raw+`
`+n.join(`
`),g=this.list(m);o[o.length-1]=g,i=i.substring(0,i.length-d.raw.length)+g.raw,s=s.substring(0,s.length-p.raw.length)+g.raw,n=m.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:o,text:s}}}list(e){let r=this.rules.block.list.exec(e);if(r){let n=r[1].trim(),i=n.length>1,s={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");let o=this.rules.other.listItemRegex(n),a=!1;for(;e;){let c=!1,h="",u="";if(!(r=o.exec(e))||this.rules.block.hr.test(e))break;h=r[0],e=e.substring(h.length);let f=r[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,b=>" ".repeat(3*b.length)),d=e.split(`
`,1)[0],p=!f.trim(),m=0;if(this.options.pedantic?(m=2,u=f.trimStart()):p?m=r[1].length+1:(m=r[2].search(this.rules.other.nonSpaceChar),m=m>4?1:m,u=f.slice(m),m+=r[1].length),p&&this.rules.other.blankLine.test(d)&&(h+=d+`
`,e=e.substring(d.length+1),c=!0),!c){let b=this.rules.other.nextBulletRegex(m),x=this.rules.other.hrRegex(m),T=this.rules.other.fencesBeginRegex(m),S=this.rules.other.headingBeginRegex(m),w=this.rules.other.htmlBeginRegex(m);for(;e;){let _=e.split(`
`,1)[0],I;if(d=_,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,"  "),I=d):I=d.replace(this.rules.other.tabCharGlobal,"    "),T.test(d)||S.test(d)||w.test(d)||b.test(d)||x.test(d))break;if(I.search(this.rules.other.nonSpaceChar)>=m||!d.trim())u+=`
`+I.slice(m);else{if(p||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||T.test(f)||S.test(f)||x.test(f))break;u+=`
`+d}!p&&!d.trim()&&(p=!0),h+=_+`
`,e=e.substring(_.length+1),f=I.slice(m)}}s.loose||(a?s.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(a=!0));let g=null,y;this.options.gfm&&(g=this.rules.other.listIsTask.exec(u),g&&(y=g[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:h,task:!!g,checked:y,loose:!1,text:u,tokens:[]}),s.raw+=h}let l=s.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let c=0;c<s.items.length;c++)if(this.lexer.state.top=!1,s.items[c].tokens=this.lexer.blockTokens(s.items[c].text,[]),!s.loose){let h=s.items[c].tokens.filter(f=>f.type==="space"),u=h.length>0&&h.some(f=>this.rules.other.anyLine.test(f.raw));s.loose=u}if(s.loose)for(let c=0;c<s.items.length;c++)s.items[c].loose=!0;return s}}html(e){let r=this.rules.block.html.exec(e);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(e){let r=this.rules.block.def.exec(e);if(r){let n=r[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=r[2]?r[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:n,raw:r[0],href:i,title:s}}}table(e){var a;let r=this.rules.block.table.exec(e);if(!r||!this.rules.other.tableDelimiter.test(r[2]))return;let n=lI(r[1]),i=r[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=(a=r[3])!=null&&a.trim()?r[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:r[0],header:[],align:[],rows:[]};if(n.length===i.length){for(let l of i)this.rules.other.tableAlignRight.test(l)?o.align.push("right"):this.rules.other.tableAlignCenter.test(l)?o.align.push("center"):this.rules.other.tableAlignLeft.test(l)?o.align.push("left"):o.align.push(null);for(let l=0;l<n.length;l++)o.header.push({text:n[l],tokens:this.lexer.inline(n[l]),header:!0,align:o.align[l]});for(let l of s)o.rows.push(lI(l,o.header.length).map((c,h)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:o.align[h]})));return o}}lheading(e){let r=this.rules.block.lheading.exec(e);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(e){let r=this.rules.block.paragraph.exec(e);if(r){let n=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let r=this.rules.block.text.exec(e);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(e){let r=this.rules.inline.escape.exec(e);if(r)return{type:"escape",raw:r[0],text:r[1]}}tag(e){let r=this.rules.inline.tag.exec(e);if(r)return!this.lexer.state.inLink&&this.rules.other.startATag.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(e){let r=this.rules.inline.link.exec(e);if(r){let n=r[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let o=z0(n.slice(0,-1),"\\");if((n.length-o.length)%2===0)return}else{let o=Q9e(r[2],"()");if(o===-2)return;if(o>-1){let a=(r[0].indexOf("!")===0?5:4)+r[1].length+o;r[2]=r[2].substring(0,o),r[0]=r[0].substring(0,a).trim(),r[3]=""}}let i=r[2],s="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(i);o&&(i=o[1],s=o[3])}else s=r[3]?r[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?i=i.slice(1):i=i.slice(1,-1)),cI(r,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer,this.rules)}}reflink(e,r){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let i=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=r[i.toLowerCase()];if(!s){let o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return cI(n,s,n[0],this.lexer,this.rules)}}emStrong(e,r,n=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!(!i||i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!n||this.rules.inline.punctuation.exec(n))){let s=[...i[0]].length-1,o,a,l=s,c=0,h=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,r=r.slice(-1*e.length+s);(i=h.exec(r))!=null;){if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!o)continue;if(a=[...o].length,i[3]||i[4]){l+=a;continue}else if((i[5]||i[6])&&s%3&&!((s+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);let u=[...i[0]][0].length,f=e.slice(0,s+i.index+u+a);if(Math.min(s,a)%2){let p=f.slice(1,-1);return{type:"em",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}let d=f.slice(2,-2);return{type:"strong",raw:f,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(e){let r=this.rules.inline.code.exec(e);if(r){let n=r[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(n),s=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return i&&s&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:r[0],text:n}}}br(e){let r=this.rules.inline.br.exec(e);if(r)return{type:"br",raw:r[0]}}del(e){let r=this.rules.inline.del.exec(e);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(e){let r=this.rules.inline.autolink.exec(e);if(r){let n,i;return r[2]==="@"?(n=r[1],i="mailto:"+n):(n=r[1],i=n),{type:"link",raw:r[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let r;if(r=this.rules.inline.url.exec(e)){let i,s;if(r[2]==="@")i=r[0],s="mailto:"+i;else{let o;do o=r[0],r[0]=((n=this.rules.inline._backpedal.exec(r[0]))==null?void 0:n[0])??"";while(o!==r[0]);i=r[0],r[1]==="www."?s="http://"+r[0]:s=r[0]}return{type:"link",raw:r[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){let r=this.rules.inline.text.exec(e);if(r){let n=this.lexer.state.inRawBlock;return{type:"text",raw:r[0],text:r[0],escaped:n}}}},Vs=class F6{constructor(e){Se(this,"tokens");Se(this,"options");Se(this,"state");Se(this,"tokenizer");Se(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Eu,this.options.tokenizer=this.options.tokenizer||new rv,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:ii,block:n2.normal,inline:$0.normal};this.options.pedantic?(r.block=n2.pedantic,r.inline=$0.pedantic):this.options.gfm&&(r.block=n2.gfm,this.options.breaks?r.inline=$0.breaks:r.inline=$0.gfm),this.tokenizer.rules=r}static get rules(){return{block:n2,inline:$0}}static lex(e,r){return new F6(r).lex(e)}static lexInline(e,r){return new F6(r).inlineTokens(e)}lex(e){e=e.replace(ii.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let n=this.inlineQueue[r];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,r=[],n=!1){var i,s,o;for(this.options.pedantic&&(e=e.replace(ii.tabCharGlobal,"    ").replace(ii.spaceLine,""));e;){let a;if((s=(i=this.options.extensions)==null?void 0:i.block)!=null&&s.some(c=>(a=c.call({lexer:this},e,r))?(e=e.substring(a.raw.length),r.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);let c=r.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:r.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);let c=r.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):r.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);let c=r.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title},r.push(a));continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),r.push(a);continue}let l=e;if((o=this.options.extensions)!=null&&o.startBlock){let c=1/0,h=e.slice(1),u;this.options.extensions.startBlock.forEach(f=>{u=f.call({lexer:this},h),typeof u=="number"&&u>=0&&(c=Math.min(c,u))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){let c=r.at(-1);n&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):r.push(a),n=l.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);let c=r.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):r.push(a);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){var l,c,h,u,f;let n=e,i=null;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)d.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,i.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(i=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)s=i[2]?i[2].length:0,n=n.slice(0,i.index+s)+"["+"a".repeat(i[0].length-s-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=((c=(l=this.options.hooks)==null?void 0:l.emStrongMask)==null?void 0:c.call({lexer:this},n))??n;let o=!1,a="";for(;e;){o||(a=""),o=!1;let d;if((u=(h=this.options.extensions)==null?void 0:h.inline)!=null&&u.some(m=>(d=m.call({lexer:this},e,r))?(e=e.substring(d.raw.length),r.push(d),!0):!1))continue;if(d=this.tokenizer.escape(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.tag(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.link(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(d.raw.length);let m=r.at(-1);d.type==="text"&&(m==null?void 0:m.type)==="text"?(m.raw+=d.raw,m.text+=d.text):r.push(d);continue}if(d=this.tokenizer.emStrong(e,n,a)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.codespan(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.br(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.del(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.autolink(e)){e=e.substring(d.raw.length),r.push(d);continue}if(!this.state.inLink&&(d=this.tokenizer.url(e))){e=e.substring(d.raw.length),r.push(d);continue}let p=e;if((f=this.options.extensions)!=null&&f.startInline){let m=1/0,g=e.slice(1),y;this.options.extensions.startInline.forEach(b=>{y=b.call({lexer:this},g),typeof y=="number"&&y>=0&&(m=Math.min(m,y))}),m<1/0&&m>=0&&(p=e.substring(0,m+1))}if(d=this.tokenizer.inlineText(p)){e=e.substring(d.raw.length),d.raw.slice(-1)!=="_"&&(a=d.raw.slice(-1)),o=!0;let m=r.at(-1);(m==null?void 0:m.type)==="text"?(m.raw+=d.raw,m.text+=d.text):r.push(d);continue}if(e){let m="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(m);break}else throw new Error(m)}}return r}},nv=class{constructor(e){Se(this,"options");Se(this,"parser");this.options=e||Eu}space(e){return""}code({text:e,lang:r,escaped:n}){var o;let i=(o=(r||"").match(ii.notSpaceStart))==null?void 0:o[0],s=e.replace(ii.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Mo(i)+'">'+(n?s:Mo(s,!0))+`</code></pre>
`:"<pre><code>"+(n?s:Mo(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:r}){return`<h${r}>${this.parser.parseInline(e)}</h${r}>
`}hr(e){return`<hr>
`}list(e){let r=e.ordered,n=e.start,i="";for(let a=0;a<e.items.length;a++){let l=e.items[a];i+=this.listitem(l)}let s=r?"ol":"ul",o=r&&n!==1?' start="'+n+'"':"";return"<"+s+o+`>
`+i+"</"+s+`>
`}listitem(e){var n;let r="";if(e.task){let i=this.checkbox({checked:!!e.checked});e.loose?((n=e.tokens[0])==null?void 0:n.type)==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+Mo(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):r+=i+" "}return r+=this.parser.parse(e.tokens,!!e.loose),`<li>${r}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let r="",n="";for(let s=0;s<e.header.length;s++)n+=this.tablecell(e.header[s]);r+=this.tablerow({text:n});let i="";for(let s=0;s<e.rows.length;s++){let o=e.rows[s];n="";for(let a=0;a<o.length;a++)n+=this.tablecell(o[a]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+r+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let r=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+r+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Mo(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:r,tokens:n}){let i=this.parser.parseInline(n),s=aI(e);if(s===null)return i;e=s;let o='<a href="'+e+'"';return r&&(o+=' title="'+Mo(r)+'"'),o+=">"+i+"</a>",o}image({href:e,title:r,text:n,tokens:i}){i&&(n=this.parser.parseInline(i,this.parser.textRenderer));let s=aI(e);if(s===null)return Mo(n);e=s;let o=`<img src="${e}" alt="${n}"`;return r&&(o+=` title="${Mo(r)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Mo(e.text)}},TT=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Ws=class $6{constructor(e){Se(this,"options");Se(this,"renderer");Se(this,"textRenderer");this.options=e||Eu,this.options.renderer=this.options.renderer||new nv,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new TT}static parse(e,r){return new $6(r).parse(e)}static parseInline(e,r){return new $6(r).parseInline(e)}parse(e,r=!0){var i,s;let n="";for(let o=0;o<e.length;o++){let a=e[o];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[a.type]){let c=a,h=this.options.extensions.renderers[c.type].call({parser:this},c);if(h!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(c.type)){n+=h||"";continue}}let l=a;switch(l.type){case"space":{n+=this.renderer.space(l);continue}case"hr":{n+=this.renderer.hr(l);continue}case"heading":{n+=this.renderer.heading(l);continue}case"code":{n+=this.renderer.code(l);continue}case"table":{n+=this.renderer.table(l);continue}case"blockquote":{n+=this.renderer.blockquote(l);continue}case"list":{n+=this.renderer.list(l);continue}case"html":{n+=this.renderer.html(l);continue}case"def":{n+=this.renderer.def(l);continue}case"paragraph":{n+=this.renderer.paragraph(l);continue}case"text":{let c=l,h=this.renderer.text(c);for(;o+1<e.length&&e[o+1].type==="text";)c=e[++o],h+=`
`+this.renderer.text(c);r?n+=this.renderer.paragraph({type:"paragraph",raw:h,text:h,tokens:[{type:"text",raw:h,text:h,escaped:!0}]}):n+=h;continue}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return n}parseInline(e,r=this.renderer){var i,s;let n="";for(let o=0;o<e.length;o++){let a=e[o];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[a.type]){let c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){n+=c||"";continue}}let l=a;switch(l.type){case"escape":{n+=r.text(l);break}case"html":{n+=r.html(l);break}case"link":{n+=r.link(l);break}case"image":{n+=r.image(l);break}case"strong":{n+=r.strong(l);break}case"em":{n+=r.em(l);break}case"codespan":{n+=r.codespan(l);break}case"br":{n+=r.br(l);break}case"del":{n+=r.del(l);break}case"text":{n+=r.text(l);break}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return n}},c2,Ip=(c2=class{constructor(e){Se(this,"options");Se(this,"block");this.options=e||Eu}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?Vs.lex:Vs.lexInline}provideParser(){return this.block?Ws.parse:Ws.parseInline}},Se(c2,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Se(c2,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),c2),tTe=class{constructor(...e){Se(this,"defaults",yT());Se(this,"options",this.setOptions);Se(this,"parse",this.parseMarkdown(!0));Se(this,"parseInline",this.parseMarkdown(!1));Se(this,"Parser",Ws);Se(this,"Renderer",nv);Se(this,"TextRenderer",TT);Se(this,"Lexer",Vs);Se(this,"Tokenizer",rv);Se(this,"Hooks",Ip);this.use(...e)}walkTokens(e,r){var i,s;let n=[];for(let o of e)switch(n=n.concat(r.call(this,o)),o.type){case"table":{let a=o;for(let l of a.header)n=n.concat(this.walkTokens(l.tokens,r));for(let l of a.rows)for(let c of l)n=n.concat(this.walkTokens(c.tokens,r));break}case"list":{let a=o;n=n.concat(this.walkTokens(a.items,r));break}default:{let a=o;(s=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&s[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{let c=a[l].flat(1/0);n=n.concat(this.walkTokens(c,r))}):a.tokens&&(n=n.concat(this.walkTokens(a.tokens,r)))}}return n}use(...e){let r=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let o=r.renderers[s.name];o?r.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:r.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=r[s.level];o?o.unshift(s.tokenizer):r[s.level]=[s.tokenizer],s.start&&(s.level==="block"?r.startBlock?r.startBlock.push(s.start):r.startBlock=[s.start]:s.level==="inline"&&(r.startInline?r.startInline.push(s.start):r.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(r.childTokens[s.name]=s.childTokens)}),i.extensions=r),n.renderer){let s=this.defaults.renderer||new nv(this.defaults);for(let o in n.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let a=o,l=n.renderer[a],c=s[a];s[a]=(...h)=>{let u=l.apply(s,h);return u===!1&&(u=c.apply(s,h)),u||""}}i.renderer=s}if(n.tokenizer){let s=this.defaults.tokenizer||new rv(this.defaults);for(let o in n.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,l=n.tokenizer[a],c=s[a];s[a]=(...h)=>{let u=l.apply(s,h);return u===!1&&(u=c.apply(s,h)),u}}i.tokenizer=s}if(n.hooks){let s=this.defaults.hooks||new Ip;for(let o in n.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let a=o,l=n.hooks[a],c=s[a];Ip.passThroughHooks.has(o)?s[a]=h=>{if(this.defaults.async&&Ip.passThroughHooksRespectAsync.has(o))return(async()=>{let f=await l.call(s,h);return c.call(s,f)})();let u=l.call(s,h);return c.call(s,u)}:s[a]=(...h)=>{if(this.defaults.async)return(async()=>{let f=await l.apply(s,h);return f===!1&&(f=await c.apply(s,h)),f})();let u=l.apply(s,h);return u===!1&&(u=c.apply(s,h)),u}}i.hooks=s}if(n.walkTokens){let s=this.defaults.walkTokens,o=n.walkTokens;i.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,r){return Vs.lex(e,r??this.defaults)}parser(e,r){return Ws.parse(e,r??this.defaults)}parseMarkdown(e){return(r,n)=>{let i={...n},s={...this.defaults,...i},o=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&i.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(s.hooks&&(s.hooks.options=s,s.hooks.block=e),s.async)return(async()=>{let a=s.hooks?await s.hooks.preprocess(r):r,l=await(s.hooks?await s.hooks.provideLexer():e?Vs.lex:Vs.lexInline)(a,s),c=s.hooks?await s.hooks.processAllTokens(l):l;s.walkTokens&&await Promise.all(this.walkTokens(c,s.walkTokens));let h=await(s.hooks?await s.hooks.provideParser():e?Ws.parse:Ws.parseInline)(c,s);return s.hooks?await s.hooks.postprocess(h):h})().catch(o);try{s.hooks&&(r=s.hooks.preprocess(r));let a=(s.hooks?s.hooks.provideLexer():e?Vs.lex:Vs.lexInline)(r,s);s.hooks&&(a=s.hooks.processAllTokens(a)),s.walkTokens&&this.walkTokens(a,s.walkTokens);let l=(s.hooks?s.hooks.provideParser():e?Ws.parse:Ws.parseInline)(a,s);return s.hooks&&(l=s.hooks.postprocess(l)),l}catch(a){return o(a)}}}onError(e,r){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+Mo(n.message+"",!0)+"</pre>";return r?Promise.resolve(i):i}if(r)return Promise.reject(n);throw n}}},pu=new tTe;function Zt(t,e){return pu.parse(t,e)}Zt.options=Zt.setOptions=function(t){return pu.setOptions(t),Zt.defaults=pu.defaults,uG(Zt.defaults),Zt};Zt.getDefaults=yT;Zt.defaults=Eu;Zt.use=function(...t){return pu.use(...t),Zt.defaults=pu.defaults,uG(Zt.defaults),Zt};Zt.walkTokens=function(t,e){return pu.walkTokens(t,e)};Zt.parseInline=pu.parseInline;Zt.Parser=Ws;Zt.parser=Ws.parse;Zt.Renderer=nv;Zt.TextRenderer=TT;Zt.Lexer=Vs;Zt.lexer=Vs.lex;Zt.Tokenizer=rv;Zt.Hooks=Ip;Zt.parse=Zt;Zt.options;Zt.setOptions;Zt.use;Zt.walkTokens;Zt.parseInline;Ws.parse;Vs.lex;function kG(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.from(typeof t=="string"?[t]:t);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce(function(a,l){var c=l.match(/\n([\t ]+|(?!\s).)/g);return c?a.concat(c.map(function(h){var u,f;return(f=(u=h.match(/[\t ]/g))===null||u===void 0?void 0:u.length)!==null&&f!==void 0?f:0})):a},[]);if(i.length){var s=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");n=n.map(function(a){return a.replace(s,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var o=n[0];return e.forEach(function(a,l){var c=o.match(/(?:^|\n)( *)$/),h=c?c[1]:"",u=a;typeof a=="string"&&a.includes(`
`)&&(u=String(a).split(`
`).map(function(f,d){return d===0?f:""+h+f}).join(`
`)),o+=u+n[l+1]}),o}var rTe={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},z6=new Map,CG=new Map,nTe=k(t=>{for(const e of t){if(!e.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(he.debug("Registering icon pack:",e.name),"loader"in e)CG.set(e.name,e.loader);else if("icons"in e)z6.set(e.name,e.icons);else throw he.error("Invalid icon loader:",e),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),SG=k(async(t,e)=>{const r=i9e(t,!0,e!==void 0);if(!r)throw new Error(`Invalid icon name: ${t}`);const n=r.prefix||e;if(!n)throw new Error(`Icon name must contain a prefix: ${t}`);let i=z6.get(n);if(!i){const o=CG.get(n);if(!o)throw new Error(`Icon set not found: ${r.prefix}`);try{i={...await o(),prefix:n},z6.set(n,i)}catch(a){throw he.error(a),new Error(`Failed to load icon set: ${r.prefix}`)}}const s=a9e(i,r.name);if(!s)throw new Error(`Icon not found: ${t}`);return s},"getRegisteredIconData"),iTe=k(async t=>{try{return await SG(t),!0}catch{return!1}},"isIconAvailable"),q1=k(async(t,e,r)=>{let n;try{n=await SG(t,e==null?void 0:e.fallbackPrefix)}catch(o){he.error(o),n=rTe}const i=p9e(n,e),s=b9e(y9e(i.body),{...i.attributes,...r});return Ls(s,$n())},"getIconSVG");function TG(t,{markdownAutoWrap:e}){const n=t.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),i=kG(n);return e===!1?i.replace(/ /g,"&nbsp;"):i}k(TG,"preprocessMarkdown");function _G(t,e={}){const r=TG(t,e),n=Zt.lexer(r),i=[[]];let s=0;function o(a,l="normal"){a.type==="text"?a.text.split(`
`).forEach((h,u)=>{u!==0&&(s++,i.push([])),h.split(" ").forEach(f=>{f=f.replace(/&#39;/g,"'"),f&&i[s].push({content:f,type:l})})}):a.type==="strong"||a.type==="em"?a.tokens.forEach(c=>{o(c,a.type)}):a.type==="html"&&i[s].push({content:a.text,type:"normal"})}return k(o,"processNode"),n.forEach(a=>{var l;a.type==="paragraph"?(l=a.tokens)==null||l.forEach(c=>{o(c)}):a.type==="html"?i[s].push({content:a.text,type:"normal"}):i[s].push({content:a.raw,type:"normal"})}),i}k(_G,"markdownToLines");function MG(t,{markdownAutoWrap:e}={}){const r=Zt.lexer(t);function n(i){var s,o,a;return i.type==="text"?e===!1?i.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):i.text.replace(/\n */g,"<br/>"):i.type==="strong"?`<strong>${(s=i.tokens)==null?void 0:s.map(n).join("")}</strong>`:i.type==="em"?`<em>${(o=i.tokens)==null?void 0:o.map(n).join("")}</em>`:i.type==="paragraph"?`<p>${(a=i.tokens)==null?void 0:a.map(n).join("")}</p>`:i.type==="space"?"":i.type==="html"?`${i.text}`:i.type==="escape"?i.text:(he.warn(`Unsupported markdown: ${i.type}`),i.raw)}return k(n,"output"),r.map(n).join("")}k(MG,"markdownToHTML");function AG(t){return Intl.Segmenter?[...new Intl.Segmenter().segment(t)].map(e=>e.segment):[...t]}k(AG,"splitTextToChars");function EG(t,e){const r=AG(e.content);return _T(t,[],r,e.type)}k(EG,"splitWordToFitWidth");function _T(t,e,r,n){if(r.length===0)return[{content:e.join(""),type:n},{content:"",type:n}];const[i,...s]=r,o=[...e,i];return t([{content:o.join(""),type:n}])?_T(t,o,s,n):(e.length===0&&i&&(e.push(i),r.shift()),[{content:e.join(""),type:n},{content:r.join(""),type:n}])}k(_T,"splitWordToFitWidthRecursion");function LG(t,e){if(t.some(({content:r})=>r.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return iv(t,e)}k(LG,"splitLineToFitWidth");function iv(t,e,r=[],n=[]){if(t.length===0)return n.length>0&&r.push(n),r.length>0?r:[];let i="";t[0].content===" "&&(i=" ",t.shift());const s=t.shift()??{content:" ",type:"normal"},o=[...n];if(i!==""&&o.push({content:i,type:"normal"}),o.push(s),e(o))return iv(t,e,r,o);if(n.length>0)r.push(n),t.unshift(s);else if(s.content){const[a,l]=EG(e,s);r.push([a]),l.content&&t.unshift(l)}return iv(t,e,r)}k(iv,"splitLineToFitWidthRecursion");function H6(t,e){e&&t.attr("style",e)}k(H6,"applyStyle");async function OG(t,e,r,n,i=!1,s=$n()){const o=t.append("foreignObject");o.attr("width",`${10*r}px`),o.attr("height",`${10*r}px`);const a=o.append("xhtml:div"),l=Ld(e.label)?await F9(e.label.replace(r0.lineBreakRegex,`
`),s):Ls(e.label,s),c=e.isNode?"nodeLabel":"edgeLabel",h=a.append("span");h.html(l),H6(h,e.labelStyle),h.attr("class",`${c} ${n}`),H6(a,e.labelStyle),a.style("display","table-cell"),a.style("white-space","nowrap"),a.style("line-height","1.5"),a.style("max-width",r+"px"),a.style("text-align","center"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),i&&a.attr("class","labelBkg");let u=a.node().getBoundingClientRect();return u.width===r&&(a.style("display","table"),a.style("white-space","break-spaces"),a.style("width",r+"px"),u=a.node().getBoundingClientRect()),o.node()}k(OG,"addHtmlSpan");function sw(t,e,r){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*r-.1+"em").attr("dy",r+"em")}k(sw,"createTspan");function DG(t,e,r){const n=t.append("text"),i=sw(n,1,e);ow(i,r);const s=i.node().getComputedTextLength();return n.remove(),s}k(DG,"computeWidthOfText");function sTe(t,e,r){var o;const n=t.append("text"),i=sw(n,1,e);ow(i,[{content:r,type:"normal"}]);const s=(o=i.node())==null?void 0:o.getBoundingClientRect();return s&&n.remove(),s}k(sTe,"computeDimensionOfText");function IG(t,e,r,n=!1){const s=e.append("g"),o=s.insert("rect").attr("class","background").attr("style","stroke: none"),a=s.append("text").attr("y","-10.1");let l=0;for(const c of r){const h=k(f=>DG(s,1.1,f)<=t,"checkWidth"),u=h(c)?[c]:LG(c,h);for(const f of u){const d=sw(a,l,1.1);ow(d,f),l++}}if(n){const c=a.node().getBBox(),h=2;return o.attr("x",c.x-h).attr("y",c.y-h).attr("width",c.width+2*h).attr("height",c.height+2*h),s.node()}else return a.node()}k(IG,"createFormattedText");function ow(t,e){t.text(""),e.forEach((r,n)=>{const i=t.append("tspan").attr("font-style",r.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",r.type==="strong"?"bold":"normal");n===0?i.text(r.content):i.text(" "+r.content)})}k(ow,"updateTextContentAndStyles");async function BG(t,e={}){const r=[];t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(i,s,o)=>(r.push((async()=>{const a=`${s}:${o}`;return await iTe(a)?await q1(a,void 0,{class:"label-icon"}):`<i class='${Ls(i,e).replace(":"," ")}'></i>`})()),i));const n=await Promise.all(r);return t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>n.shift()??"")}k(BG,"replaceIconSubstring");var Dc=k(async(t,e="",{style:r="",isTitle:n=!1,classes:i="",useHtmlLabels:s=!0,isNode:o=!0,width:a=200,addSvgBackground:l=!1}={},c)=>{if(he.debug("XYZ createText",e,r,n,i,s,o,"addSvgBackground: ",l),s){const h=MG(e,c),u=await BG(Au(h),c),f=e.replace(/\\\\/g,"\\"),d={isNode:o,label:Ld(e)?f:u,labelStyle:r.replace("fill:","color:")};return await OG(t,d,a,i,l,c)}else{const h=e.replace(/<br\s*\/?>/g,"<br/>"),u=_G(h.replace("<br>","<br/>"),c),f=IG(a,t,u,e?l:!1);if(o){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));const d=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Ft(f).attr("style",d)}else{const d=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");Ft(f).select("rect").attr("style",d.replace(/background:/g,"fill:"));const p=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Ft(f).select("text").attr("style",p)}return f}},"createText");function bk(t,e,r){if(t&&t.length){const[n,i]=e,s=Math.PI/180*r,o=Math.cos(s),a=Math.sin(s);for(const l of t){const[c,h]=l;l[0]=(c-n)*o-(h-i)*a+n,l[1]=(c-n)*a+(h-i)*o+i}}}function oTe(t,e){return t[0]===e[0]&&t[1]===e[1]}function aTe(t,e,r,n=1){const i=r,s=Math.max(e,.1),o=t[0]&&t[0][0]&&typeof t[0][0]=="number"?[t]:t,a=[0,0];if(i)for(const c of o)bk(c,a,i);const l=function(c,h,u){const f=[];for(const b of c){const x=[...b];oTe(x[0],x[x.length-1])||x.push([x[0][0],x[0][1]]),x.length>2&&f.push(x)}const d=[];h=Math.max(h,.1);const p=[];for(const b of f)for(let x=0;x<b.length-1;x++){const T=b[x],S=b[x+1];if(T[1]!==S[1]){const w=Math.min(T[1],S[1]);p.push({ymin:w,ymax:Math.max(T[1],S[1]),x:w===T[1]?T[0]:S[0],islope:(S[0]-T[0])/(S[1]-T[1])})}}if(p.sort((b,x)=>b.ymin<x.ymin?-1:b.ymin>x.ymin?1:b.x<x.x?-1:b.x>x.x?1:b.ymax===x.ymax?0:(b.ymax-x.ymax)/Math.abs(b.ymax-x.ymax)),!p.length)return d;let m=[],g=p[0].ymin,y=0;for(;m.length||p.length;){if(p.length){let b=-1;for(let x=0;x<p.length&&!(p[x].ymin>g);x++)b=x;p.splice(0,b+1).forEach(x=>{m.push({s:g,edge:x})})}if(m=m.filter(b=>!(b.edge.ymax<=g)),m.sort((b,x)=>b.edge.x===x.edge.x?0:(b.edge.x-x.edge.x)/Math.abs(b.edge.x-x.edge.x)),(u!==1||y%h==0)&&m.length>1)for(let b=0;b<m.length;b+=2){const x=b+1;if(x>=m.length)break;const T=m[b].edge,S=m[x].edge;d.push([[Math.round(T.x),g],[Math.round(S.x),g]])}g+=u,m.forEach(b=>{b.edge.x=b.edge.x+u*b.edge.islope}),y++}return d}(o,s,n);if(i){for(const c of o)bk(c,a,-i);(function(c,h,u){const f=[];c.forEach(d=>f.push(...d)),bk(f,h,u)})(l,a,-i)}return l}function V1(t,e){var r;const n=e.hachureAngle+90;let i=e.hachureGap;i<0&&(i=4*e.strokeWidth),i=Math.round(Math.max(i,.1));let s=1;return e.roughness>=1&&(((r=e.randomizer)===null||r===void 0?void 0:r.next())||Math.random())>.7&&(s=i),aTe(t,i,n,s||1)}class MT{constructor(e){this.helper=e}fillPolygons(e,r){return this._fillPolygons(e,r)}_fillPolygons(e,r){const n=V1(e,r);return{type:"fillSketch",ops:this.renderLines(n,r)}}renderLines(e,r){const n=[];for(const i of e)n.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],r));return n}}function aw(t){const e=t[0],r=t[1];return Math.sqrt(Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2))}class lTe extends MT{fillPolygons(e,r){let n=r.hachureGap;n<0&&(n=4*r.strokeWidth),n=Math.max(n,.1);const i=V1(e,Object.assign({},r,{hachureGap:n})),s=Math.PI/180*r.hachureAngle,o=[],a=.5*n*Math.cos(s),l=.5*n*Math.sin(s);for(const[c,h]of i)aw([c,h])&&o.push([[c[0]-a,c[1]+l],[...h]],[[c[0]+a,c[1]-l],[...h]]);return{type:"fillSketch",ops:this.renderLines(o,r)}}}class cTe extends MT{fillPolygons(e,r){const n=this._fillPolygons(e,r),i=Object.assign({},r,{hachureAngle:r.hachureAngle+90}),s=this._fillPolygons(e,i);return n.ops=n.ops.concat(s.ops),n}}class hTe{constructor(e){this.helper=e}fillPolygons(e,r){const n=V1(e,r=Object.assign({},r,{hachureAngle:0}));return this.dotsOnLines(n,r)}dotsOnLines(e,r){const n=[];let i=r.hachureGap;i<0&&(i=4*r.strokeWidth),i=Math.max(i,.1);let s=r.fillWeight;s<0&&(s=r.strokeWidth/2);const o=i/4;for(const a of e){const l=aw(a),c=l/i,h=Math.ceil(c)-1,u=l-h*i,f=(a[0][0]+a[1][0])/2-i/4,d=Math.min(a[0][1],a[1][1]);for(let p=0;p<h;p++){const m=d+u+p*i,g=f-o+2*Math.random()*o,y=m-o+2*Math.random()*o,b=this.helper.ellipse(g,y,s,s,r);n.push(...b.ops)}}return{type:"fillSketch",ops:n}}}class uTe{constructor(e){this.helper=e}fillPolygons(e,r){const n=V1(e,r);return{type:"fillSketch",ops:this.dashedLine(n,r)}}dashedLine(e,r){const n=r.dashOffset<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashOffset,i=r.dashGap<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashGap,s=[];return e.forEach(o=>{const a=aw(o),l=Math.floor(a/(n+i)),c=(a+i-l*(n+i))/2;let h=o[0],u=o[1];h[0]>u[0]&&(h=o[1],u=o[0]);const f=Math.atan((u[1]-h[1])/(u[0]-h[0]));for(let d=0;d<l;d++){const p=d*(n+i),m=p+n,g=[h[0]+p*Math.cos(f)+c*Math.cos(f),h[1]+p*Math.sin(f)+c*Math.sin(f)],y=[h[0]+m*Math.cos(f)+c*Math.cos(f),h[1]+m*Math.sin(f)+c*Math.sin(f)];s.push(...this.helper.doubleLineOps(g[0],g[1],y[0],y[1],r))}}),s}}class fTe{constructor(e){this.helper=e}fillPolygons(e,r){const n=r.hachureGap<0?4*r.strokeWidth:r.hachureGap,i=r.zigzagOffset<0?n:r.zigzagOffset,s=V1(e,r=Object.assign({},r,{hachureGap:n+i}));return{type:"fillSketch",ops:this.zigzagLines(s,i,r)}}zigzagLines(e,r,n){const i=[];return e.forEach(s=>{const o=aw(s),a=Math.round(o/(2*r));let l=s[0],c=s[1];l[0]>c[0]&&(l=s[1],c=s[0]);const h=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let u=0;u<a;u++){const f=2*u*r,d=2*(u+1)*r,p=Math.sqrt(2*Math.pow(r,2)),m=[l[0]+f*Math.cos(h),l[1]+f*Math.sin(h)],g=[l[0]+d*Math.cos(h),l[1]+d*Math.sin(h)],y=[m[0]+p*Math.cos(h+Math.PI/4),m[1]+p*Math.sin(h+Math.PI/4)];i.push(...this.helper.doubleLineOps(m[0],m[1],y[0],y[1],n),...this.helper.doubleLineOps(y[0],y[1],g[0],g[1],n))}}),i}}const mi={};class dTe{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const pTe=0,xk=1,hI=2,i2={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function vk(t,e){return t.type===e}function AT(t){const e=[],r=function(o){const a=new Array;for(;o!=="";)if(o.match(/^([ \t\r\n,]+)/))o=o.substr(RegExp.$1.length);else if(o.match(/^([aAcChHlLmMqQsStTvVzZ])/))a[a.length]={type:pTe,text:RegExp.$1},o=o.substr(RegExp.$1.length);else{if(!o.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];a[a.length]={type:xk,text:`${parseFloat(RegExp.$1)}`},o=o.substr(RegExp.$1.length)}return a[a.length]={type:hI,text:""},a}(t);let n="BOD",i=0,s=r[i];for(;!vk(s,hI);){let o=0;const a=[];if(n==="BOD"){if(s.text!=="M"&&s.text!=="m")return AT("M0,0"+t);i++,o=i2[s.text],n=s.text}else vk(s,xk)?o=i2[n]:(i++,o=i2[s.text],n=s.text);if(!(i+o<r.length))throw new Error("Path data ended short");for(let l=i;l<i+o;l++){const c=r[l];if(!vk(c,xk))throw new Error("Param not a number: "+n+","+c.text);a[a.length]=+c.text}if(typeof i2[n]!="number")throw new Error("Bad segment: "+n);{const l={key:n,data:a};e.push(l),i+=o,s=r[i],n==="M"&&(n="L"),n==="m"&&(n="l")}}return e}function RG(t){let e=0,r=0,n=0,i=0;const s=[];for(const{key:o,data:a}of t)switch(o){case"M":s.push({key:"M",data:[...a]}),[e,r]=a,[n,i]=a;break;case"m":e+=a[0],r+=a[1],s.push({key:"M",data:[e,r]}),n=e,i=r;break;case"L":s.push({key:"L",data:[...a]}),[e,r]=a;break;case"l":e+=a[0],r+=a[1],s.push({key:"L",data:[e,r]});break;case"C":s.push({key:"C",data:[...a]}),e=a[4],r=a[5];break;case"c":{const l=a.map((c,h)=>h%2?c+r:c+e);s.push({key:"C",data:l}),e=l[4],r=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),e=a[2],r=a[3];break;case"q":{const l=a.map((c,h)=>h%2?c+r:c+e);s.push({key:"Q",data:l}),e=l[2],r=l[3];break}case"A":s.push({key:"A",data:[...a]}),e=a[5],r=a[6];break;case"a":e+=a[5],r+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],e,r]});break;case"H":s.push({key:"H",data:[...a]}),e=a[0];break;case"h":e+=a[0],s.push({key:"H",data:[e]});break;case"V":s.push({key:"V",data:[...a]}),r=a[0];break;case"v":r+=a[0],s.push({key:"V",data:[r]});break;case"S":s.push({key:"S",data:[...a]}),e=a[2],r=a[3];break;case"s":{const l=a.map((c,h)=>h%2?c+r:c+e);s.push({key:"S",data:l}),e=l[2],r=l[3];break}case"T":s.push({key:"T",data:[...a]}),e=a[0],r=a[1];break;case"t":e+=a[0],r+=a[1],s.push({key:"T",data:[e,r]});break;case"Z":case"z":s.push({key:"Z",data:[]}),e=n,r=i}return s}function PG(t){const e=[];let r="",n=0,i=0,s=0,o=0,a=0,l=0;for(const{key:c,data:h}of t){switch(c){case"M":e.push({key:"M",data:[...h]}),[n,i]=h,[s,o]=h;break;case"C":e.push({key:"C",data:[...h]}),n=h[4],i=h[5],a=h[2],l=h[3];break;case"L":e.push({key:"L",data:[...h]}),[n,i]=h;break;case"H":n=h[0],e.push({key:"L",data:[n,i]});break;case"V":i=h[0],e.push({key:"L",data:[n,i]});break;case"S":{let u=0,f=0;r==="C"||r==="S"?(u=n+(n-a),f=i+(i-l)):(u=n,f=i),e.push({key:"C",data:[u,f,...h]}),a=h[0],l=h[1],n=h[2],i=h[3];break}case"T":{const[u,f]=h;let d=0,p=0;r==="Q"||r==="T"?(d=n+(n-a),p=i+(i-l)):(d=n,p=i);const m=n+2*(d-n)/3,g=i+2*(p-i)/3,y=u+2*(d-u)/3,b=f+2*(p-f)/3;e.push({key:"C",data:[m,g,y,b,u,f]}),a=d,l=p,n=u,i=f;break}case"Q":{const[u,f,d,p]=h,m=n+2*(u-n)/3,g=i+2*(f-i)/3,y=d+2*(u-d)/3,b=p+2*(f-p)/3;e.push({key:"C",data:[m,g,y,b,d,p]}),a=u,l=f,n=d,i=p;break}case"A":{const u=Math.abs(h[0]),f=Math.abs(h[1]),d=h[2],p=h[3],m=h[4],g=h[5],y=h[6];u===0||f===0?(e.push({key:"C",data:[n,i,g,y,g,y]}),n=g,i=y):(n!==g||i!==y)&&(NG(n,i,g,y,u,f,d,p,m).forEach(function(b){e.push({key:"C",data:b})}),n=g,i=y);break}case"Z":e.push({key:"Z",data:[]}),n=s,i=o}r=c}return e}function H0(t,e,r){return[t*Math.cos(r)-e*Math.sin(r),t*Math.sin(r)+e*Math.cos(r)]}function NG(t,e,r,n,i,s,o,a,l,c){const h=(u=o,Math.PI*u/180);var u;let f=[],d=0,p=0,m=0,g=0;if(c)[d,p,m,g]=c;else{[t,e]=H0(t,e,-h),[r,n]=H0(r,n,-h);const K=(t-r)/2,z=(e-n)/2;let $=K*K/(i*i)+z*z/(s*s);$>1&&($=Math.sqrt($),i*=$,s*=$);const H=i*i,U=s*s,q=H*U-H*z*z-U*K*K,re=H*z*z+U*K*K,E=(a===l?-1:1)*Math.sqrt(Math.abs(q/re));m=E*i*z/s+(t+r)/2,g=E*-s*K/i+(e+n)/2,d=Math.asin(parseFloat(((e-g)/s).toFixed(9))),p=Math.asin(parseFloat(((n-g)/s).toFixed(9))),t<m&&(d=Math.PI-d),r<m&&(p=Math.PI-p),d<0&&(d=2*Math.PI+d),p<0&&(p=2*Math.PI+p),l&&d>p&&(d-=2*Math.PI),!l&&p>d&&(p-=2*Math.PI)}let y=p-d;if(Math.abs(y)>120*Math.PI/180){const K=p,z=r,$=n;p=l&&p>d?d+120*Math.PI/180*1:d+120*Math.PI/180*-1,f=NG(r=m+i*Math.cos(p),n=g+s*Math.sin(p),z,$,i,s,o,0,l,[p,K,m,g])}y=p-d;const b=Math.cos(d),x=Math.sin(d),T=Math.cos(p),S=Math.sin(p),w=Math.tan(y/4),_=4/3*i*w,I=4/3*s*w,N=[t,e],L=[t+_*x,e-I*b],D=[r+_*S,n-I*T],P=[r,n];if(L[0]=2*N[0]-L[0],L[1]=2*N[1]-L[1],c)return[L,D,P].concat(f);{f=[L,D,P].concat(f);const K=[];for(let z=0;z<f.length;z+=3){const $=H0(f[z][0],f[z][1],h),H=H0(f[z+1][0],f[z+1][1],h),U=H0(f[z+2][0],f[z+2][1],h);K.push([$[0],$[1],H[0],H[1],U[0],U[1]])}return K}}const mTe={randOffset:function(t,e){return pt(t,e)},randOffsetWithRange:function(t,e,r){return sv(t,e,r)},ellipse:function(t,e,r,n,i){const s=$G(r,n,i);return q6(t,e,i,s).opset},doubleLineOps:function(t,e,r,n,i){return vc(t,e,r,n,i,!0)}};function FG(t,e,r,n,i){return{type:"path",ops:vc(t,e,r,n,i)}}function Cb(t,e,r){const n=(t||[]).length;if(n>2){const i=[];for(let s=0;s<n-1;s++)i.push(...vc(t[s][0],t[s][1],t[s+1][0],t[s+1][1],r));return e&&i.push(...vc(t[n-1][0],t[n-1][1],t[0][0],t[0][1],r)),{type:"path",ops:i}}return n===2?FG(t[0][0],t[0][1],t[1][0],t[1][1],r):{type:"path",ops:[]}}function gTe(t,e,r,n,i){return function(s,o){return Cb(s,!0,o)}([[t,e],[t+r,e],[t+r,e+n],[t,e+n]],i)}function uI(t,e){if(t.length){const r=typeof t[0][0]=="number"?[t]:t,n=s2(r[0],1*(1+.2*e.roughness),e),i=e.disableMultiStroke?[]:s2(r[0],1.5*(1+.22*e.roughness),pI(e));for(let s=1;s<r.length;s++){const o=r[s];if(o.length){const a=s2(o,1*(1+.2*e.roughness),e),l=e.disableMultiStroke?[]:s2(o,1.5*(1+.22*e.roughness),pI(e));for(const c of a)c.op!=="move"&&n.push(c);for(const c of l)c.op!=="move"&&i.push(c)}}return{type:"path",ops:n.concat(i)}}return{type:"path",ops:[]}}function $G(t,e,r){const n=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),i=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*n)),s=2*Math.PI/i;let o=Math.abs(t/2),a=Math.abs(e/2);const l=1-r.curveFitting;return o+=pt(o*l,r),a+=pt(a*l,r),{increment:s,rx:o,ry:a}}function q6(t,e,r,n){const[i,s]=mI(n.increment,t,e,n.rx,n.ry,1,n.increment*sv(.1,sv(.4,1,r),r),r);let o=ov(i,null,r);if(!r.disableMultiStroke&&r.roughness!==0){const[a]=mI(n.increment,t,e,n.rx,n.ry,1.5,0,r),l=ov(a,null,r);o=o.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function fI(t,e,r,n,i,s,o,a,l){const c=t,h=e;let u=Math.abs(r/2),f=Math.abs(n/2);u+=pt(.01*u,l),f+=pt(.01*f,l);let d=i,p=s;for(;d<0;)d+=2*Math.PI,p+=2*Math.PI;p-d>2*Math.PI&&(d=0,p=2*Math.PI);const m=2*Math.PI/l.curveStepCount,g=Math.min(m/2,(p-d)/2),y=gI(g,c,h,u,f,d,p,1,l);if(!l.disableMultiStroke){const b=gI(g,c,h,u,f,d,p,1.5,l);y.push(...b)}return o&&(a?y.push(...vc(c,h,c+u*Math.cos(d),h+f*Math.sin(d),l),...vc(c,h,c+u*Math.cos(p),h+f*Math.sin(p),l)):y.push({op:"lineTo",data:[c,h]},{op:"lineTo",data:[c+u*Math.cos(d),h+f*Math.sin(d)]})),{type:"path",ops:y}}function dI(t,e){const r=PG(RG(AT(t))),n=[];let i=[0,0],s=[0,0];for(const{key:o,data:a}of r)switch(o){case"M":s=[a[0],a[1]],i=[a[0],a[1]];break;case"L":n.push(...vc(s[0],s[1],a[0],a[1],e)),s=[a[0],a[1]];break;case"C":{const[l,c,h,u,f,d]=a;n.push(...yTe(l,c,h,u,f,d,s,e)),s=[f,d];break}case"Z":n.push(...vc(s[0],s[1],i[0],i[1],e)),s=[i[0],i[1]]}return{type:"path",ops:n}}function wk(t,e){const r=[];for(const n of t)if(n.length){const i=e.maxRandomnessOffset||0,s=n.length;if(s>2){r.push({op:"move",data:[n[0][0]+pt(i,e),n[0][1]+pt(i,e)]});for(let o=1;o<s;o++)r.push({op:"lineTo",data:[n[o][0]+pt(i,e),n[o][1]+pt(i,e)]})}}return{type:"fillPath",ops:r}}function $u(t,e){return function(r,n){let i=r.fillStyle||"hachure";if(!mi[i])switch(i){case"zigzag":mi[i]||(mi[i]=new lTe(n));break;case"cross-hatch":mi[i]||(mi[i]=new cTe(n));break;case"dots":mi[i]||(mi[i]=new hTe(n));break;case"dashed":mi[i]||(mi[i]=new uTe(n));break;case"zigzag-line":mi[i]||(mi[i]=new fTe(n));break;default:i="hachure",mi[i]||(mi[i]=new MT(n))}return mi[i]}(e,mTe).fillPolygons(t,e)}function pI(t){const e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function zG(t){return t.randomizer||(t.randomizer=new dTe(t.seed||0)),t.randomizer.next()}function sv(t,e,r,n=1){return r.roughness*n*(zG(r)*(e-t)+t)}function pt(t,e,r=1){return sv(-t,t,e,r)}function vc(t,e,r,n,i,s=!1){const o=s?i.disableMultiStrokeFill:i.disableMultiStroke,a=V6(t,e,r,n,i,!0,!1);if(o)return a;const l=V6(t,e,r,n,i,!0,!0);return a.concat(l)}function V6(t,e,r,n,i,s,o){const a=Math.pow(t-r,2)+Math.pow(e-n,2),l=Math.sqrt(a);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let h=i.maxRandomnessOffset||0;h*h*100>a&&(h=l/10);const u=h/2,f=.2+.2*zG(i);let d=i.bowing*i.maxRandomnessOffset*(n-e)/200,p=i.bowing*i.maxRandomnessOffset*(t-r)/200;d=pt(d,i,c),p=pt(p,i,c);const m=[],g=()=>pt(u,i,c),y=()=>pt(h,i,c),b=i.preserveVertices;return o?m.push({op:"move",data:[t+(b?0:g()),e+(b?0:g())]}):m.push({op:"move",data:[t+(b?0:pt(h,i,c)),e+(b?0:pt(h,i,c))]}),o?m.push({op:"bcurveTo",data:[d+t+(r-t)*f+g(),p+e+(n-e)*f+g(),d+t+2*(r-t)*f+g(),p+e+2*(n-e)*f+g(),r+(b?0:g()),n+(b?0:g())]}):m.push({op:"bcurveTo",data:[d+t+(r-t)*f+y(),p+e+(n-e)*f+y(),d+t+2*(r-t)*f+y(),p+e+2*(n-e)*f+y(),r+(b?0:y()),n+(b?0:y())]}),m}function s2(t,e,r){if(!t.length)return[];const n=[];n.push([t[0][0]+pt(e,r),t[0][1]+pt(e,r)]),n.push([t[0][0]+pt(e,r),t[0][1]+pt(e,r)]);for(let i=1;i<t.length;i++)n.push([t[i][0]+pt(e,r),t[i][1]+pt(e,r)]),i===t.length-1&&n.push([t[i][0]+pt(e,r),t[i][1]+pt(e,r)]);return ov(n,null,r)}function ov(t,e,r){const n=t.length,i=[];if(n>3){const s=[],o=1-r.curveTightness;i.push({op:"move",data:[t[1][0],t[1][1]]});for(let a=1;a+2<n;a++){const l=t[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*t[a+1][0]-o*t[a-1][0])/6,l[1]+(o*t[a+1][1]-o*t[a-1][1])/6],s[2]=[t[a+1][0]+(o*t[a][0]-o*t[a+2][0])/6,t[a+1][1]+(o*t[a][1]-o*t[a+2][1])/6],s[3]=[t[a+1][0],t[a+1][1]],i.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else n===3?(i.push({op:"move",data:[t[1][0],t[1][1]]}),i.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):n===2&&i.push(...V6(t[0][0],t[0][1],t[1][0],t[1][1],r,!0,!0));return i}function mI(t,e,r,n,i,s,o,a){const l=[],c=[];if(a.roughness===0){t/=4,c.push([e+n*Math.cos(-t),r+i*Math.sin(-t)]);for(let h=0;h<=2*Math.PI;h+=t){const u=[e+n*Math.cos(h),r+i*Math.sin(h)];l.push(u),c.push(u)}c.push([e+n*Math.cos(0),r+i*Math.sin(0)]),c.push([e+n*Math.cos(t),r+i*Math.sin(t)])}else{const h=pt(.5,a)-Math.PI/2;c.push([pt(s,a)+e+.9*n*Math.cos(h-t),pt(s,a)+r+.9*i*Math.sin(h-t)]);const u=2*Math.PI+h-.01;for(let f=h;f<u;f+=t){const d=[pt(s,a)+e+n*Math.cos(f),pt(s,a)+r+i*Math.sin(f)];l.push(d),c.push(d)}c.push([pt(s,a)+e+n*Math.cos(h+2*Math.PI+.5*o),pt(s,a)+r+i*Math.sin(h+2*Math.PI+.5*o)]),c.push([pt(s,a)+e+.98*n*Math.cos(h+o),pt(s,a)+r+.98*i*Math.sin(h+o)]),c.push([pt(s,a)+e+.9*n*Math.cos(h+.5*o),pt(s,a)+r+.9*i*Math.sin(h+.5*o)])}return[c,l]}function gI(t,e,r,n,i,s,o,a,l){const c=s+pt(.1,l),h=[];h.push([pt(a,l)+e+.9*n*Math.cos(c-t),pt(a,l)+r+.9*i*Math.sin(c-t)]);for(let u=c;u<=o;u+=t)h.push([pt(a,l)+e+n*Math.cos(u),pt(a,l)+r+i*Math.sin(u)]);return h.push([e+n*Math.cos(o),r+i*Math.sin(o)]),h.push([e+n*Math.cos(o),r+i*Math.sin(o)]),ov(h,null,l)}function yTe(t,e,r,n,i,s,o,a){const l=[],c=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let h=[0,0];const u=a.disableMultiStroke?1:2,f=a.preserveVertices;for(let d=0;d<u;d++)d===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(f?0:pt(c[0],a)),o[1]+(f?0:pt(c[0],a))]}),h=f?[i,s]:[i+pt(c[d],a),s+pt(c[d],a)],l.push({op:"bcurveTo",data:[t+pt(c[d],a),e+pt(c[d],a),r+pt(c[d],a),n+pt(c[d],a),h[0],h[1]]});return l}function q0(t){return[...t]}function yI(t,e=0){const r=t.length;if(r<3)throw new Error("A curve must have at least three points.");const n=[];if(r===3)n.push(q0(t[0]),q0(t[1]),q0(t[2]),q0(t[2]));else{const i=[];i.push(t[0],t[0]);for(let a=1;a<t.length;a++)i.push(t[a]),a===t.length-1&&i.push(t[a]);const s=[],o=1-e;n.push(q0(i[0]));for(let a=1;a+2<i.length;a++){const l=i[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*i[a+1][0]-o*i[a-1][0])/6,l[1]+(o*i[a+1][1]-o*i[a-1][1])/6],s[2]=[i[a+1][0]+(o*i[a][0]-o*i[a+2][0])/6,i[a+1][1]+(o*i[a][1]-o*i[a+2][1])/6],s[3]=[i[a+1][0],i[a+1][1]],n.push(s[1],s[2],s[3])}}return n}function Sb(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function bTe(t,e,r){const n=Sb(e,r);if(n===0)return Sb(t,e);let i=((t[0]-e[0])*(r[0]-e[0])+(t[1]-e[1])*(r[1]-e[1]))/n;return i=Math.max(0,Math.min(1,i)),Sb(t,ih(e,r,i))}function ih(t,e,r){return[t[0]+(e[0]-t[0])*r,t[1]+(e[1]-t[1])*r]}function W6(t,e,r,n){const i=n||[];if(function(a,l){const c=a[l+0],h=a[l+1],u=a[l+2],f=a[l+3];let d=3*h[0]-2*c[0]-f[0];d*=d;let p=3*h[1]-2*c[1]-f[1];p*=p;let m=3*u[0]-2*f[0]-c[0];m*=m;let g=3*u[1]-2*f[1]-c[1];return g*=g,d<m&&(d=m),p<g&&(p=g),d+p}(t,e)<r){const a=t[e+0];i.length?(s=i[i.length-1],o=a,Math.sqrt(Sb(s,o))>1&&i.push(a)):i.push(a),i.push(t[e+3])}else{const l=t[e+0],c=t[e+1],h=t[e+2],u=t[e+3],f=ih(l,c,.5),d=ih(c,h,.5),p=ih(h,u,.5),m=ih(f,d,.5),g=ih(d,p,.5),y=ih(m,g,.5);W6([l,f,m,y],0,r,i),W6([y,g,p,u],0,r,i)}var s,o;return i}function xTe(t,e){return av(t,0,t.length,e)}function av(t,e,r,n,i){const s=i||[],o=t[e],a=t[r-1];let l=0,c=1;for(let h=e+1;h<r-1;++h){const u=bTe(t[h],o,a);u>l&&(l=u,c=h)}return Math.sqrt(l)>n?(av(t,e,c+1,n,s),av(t,c,r,n,s)):(s.length||s.push(o),s.push(a)),s}function kk(t,e=.15,r){const n=[],i=(t.length-1)/3;for(let s=0;s<i;s++)W6(t,3*s,e,n);return r&&r>0?av(n,0,n.length,r):n}const Vi="none";class lv{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,r,n){return{shape:e,sets:r||[],options:n||this.defaultOptions}}line(e,r,n,i,s){const o=this._o(s);return this._d("line",[FG(e,r,n,i,o)],o)}rectangle(e,r,n,i,s){const o=this._o(s),a=[],l=gTe(e,r,n,i,o);if(o.fill){const c=[[e,r],[e+n,r],[e+n,r+i],[e,r+i]];o.fillStyle==="solid"?a.push(wk([c],o)):a.push($u([c],o))}return o.stroke!==Vi&&a.push(l),this._d("rectangle",a,o)}ellipse(e,r,n,i,s){const o=this._o(s),a=[],l=$G(n,i,o),c=q6(e,r,o,l);if(o.fill)if(o.fillStyle==="solid"){const h=q6(e,r,o,l).opset;h.type="fillPath",a.push(h)}else a.push($u([c.estimatedPoints],o));return o.stroke!==Vi&&a.push(c.opset),this._d("ellipse",a,o)}circle(e,r,n,i){const s=this.ellipse(e,r,n,n,i);return s.shape="circle",s}linearPath(e,r){const n=this._o(r);return this._d("linearPath",[Cb(e,!1,n)],n)}arc(e,r,n,i,s,o,a=!1,l){const c=this._o(l),h=[],u=fI(e,r,n,i,s,o,a,!0,c);if(a&&c.fill)if(c.fillStyle==="solid"){const f=Object.assign({},c);f.disableMultiStroke=!0;const d=fI(e,r,n,i,s,o,!0,!1,f);d.type="fillPath",h.push(d)}else h.push(function(f,d,p,m,g,y,b){const x=f,T=d;let S=Math.abs(p/2),w=Math.abs(m/2);S+=pt(.01*S,b),w+=pt(.01*w,b);let _=g,I=y;for(;_<0;)_+=2*Math.PI,I+=2*Math.PI;I-_>2*Math.PI&&(_=0,I=2*Math.PI);const N=(I-_)/b.curveStepCount,L=[];for(let D=_;D<=I;D+=N)L.push([x+S*Math.cos(D),T+w*Math.sin(D)]);return L.push([x+S*Math.cos(I),T+w*Math.sin(I)]),L.push([x,T]),$u([L],b)}(e,r,n,i,s,o,c));return c.stroke!==Vi&&h.push(u),this._d("arc",h,c)}curve(e,r){const n=this._o(r),i=[],s=uI(e,n);if(n.fill&&n.fill!==Vi)if(n.fillStyle==="solid"){const o=uI(e,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=[],a=e;if(a.length){const l=typeof a[0][0]=="number"?[a]:a;for(const c of l)c.length<3?o.push(...c):c.length===3?o.push(...kk(yI([c[0],c[0],c[1],c[2]]),10,(1+n.roughness)/2)):o.push(...kk(yI(c),10,(1+n.roughness)/2))}o.length&&i.push($u([o],n))}return n.stroke!==Vi&&i.push(s),this._d("curve",i,n)}polygon(e,r){const n=this._o(r),i=[],s=Cb(e,!0,n);return n.fill&&(n.fillStyle==="solid"?i.push(wk([e],n)):i.push($u([e],n))),n.stroke!==Vi&&i.push(s),this._d("polygon",i,n)}path(e,r){const n=this._o(r),i=[];if(!e)return this._d("path",i,n);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=n.fill&&n.fill!=="transparent"&&n.fill!==Vi,o=n.stroke!==Vi,a=!!(n.simplification&&n.simplification<1),l=function(h,u,f){const d=PG(RG(AT(h))),p=[];let m=[],g=[0,0],y=[];const b=()=>{y.length>=4&&m.push(...kk(y,u)),y=[]},x=()=>{b(),m.length&&(p.push(m),m=[])};for(const{key:S,data:w}of d)switch(S){case"M":x(),g=[w[0],w[1]],m.push(g);break;case"L":b(),m.push([w[0],w[1]]);break;case"C":if(!y.length){const _=m.length?m[m.length-1]:g;y.push([_[0],_[1]])}y.push([w[0],w[1]]),y.push([w[2],w[3]]),y.push([w[4],w[5]]);break;case"Z":b(),m.push([g[0],g[1]])}if(x(),!f)return p;const T=[];for(const S of p){const w=xTe(S,f);w.length&&T.push(w)}return T}(e,1,a?4-4*(n.simplification||1):(1+n.roughness)/2),c=dI(e,n);if(s)if(n.fillStyle==="solid")if(l.length===1){const h=dI(e,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(h.ops)})}else i.push(wk(l,n));else i.push($u(l,n));return o&&(a?l.forEach(h=>{i.push(Cb(h,!1,n))}):i.push(c)),this._d("path",i,n)}opsToPath(e,r){let n="";for(const i of e.ops){const s=typeof r=="number"&&r>=0?i.data.map(o=>+o.toFixed(r)):i.data;switch(i.op){case"move":n+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":n+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":n+=`L${s[0]} ${s[1]} `}}return n.trim()}toPaths(e){const r=e.sets||[],n=e.options||this.defaultOptions,i=[];for(const s of r){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:Vi};break;case"fillPath":o={d:this.opsToPath(s),stroke:Vi,strokeWidth:0,fill:n.fill||Vi};break;case"fillSketch":o=this.fillSketch(s,n)}o&&i.push(o)}return i}fillSketch(e,r){let n=r.fillWeight;return n<0&&(n=r.strokeWidth/2),{d:this.opsToPath(e),stroke:r.fill||Vi,strokeWidth:n,fill:Vi}}_mergedShape(e){return e.filter((r,n)=>n===0||r.op!=="move")}}class vTe{constructor(e,r){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new lv(r)}draw(e){const r=e.sets||[],n=e.options||this.getDefaultOptions(),i=this.ctx,s=e.options.fixedDecimalPlaceDigits;for(const o of r)switch(o.type){case"path":i.save(),i.strokeStyle=n.stroke==="none"?"transparent":n.stroke,i.lineWidth=n.strokeWidth,n.strokeLineDash&&i.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(i.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(i,o,s),i.restore();break;case"fillPath":{i.save(),i.fillStyle=n.fill||"";const a=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,o,s,a),i.restore();break}case"fillSketch":this.fillSketch(i,o,n)}}fillSketch(e,r,n){let i=n.fillWeight;i<0&&(i=n.strokeWidth/2),e.save(),n.fillLineDash&&e.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(e.lineDashOffset=n.fillLineDashOffset),e.strokeStyle=n.fill||"",e.lineWidth=i,this._drawToContext(e,r,n.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,r,n,i="nonzero"){e.beginPath();for(const s of r.ops){const o=typeof n=="number"&&n>=0?s.data.map(a=>+a.toFixed(n)):s.data;switch(s.op){case"move":e.moveTo(o[0],o[1]);break;case"bcurveTo":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":e.lineTo(o[0],o[1])}}r.type==="fillPath"?e.fill(i):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,r,n,i,s){const o=this.gen.line(e,r,n,i,s);return this.draw(o),o}rectangle(e,r,n,i,s){const o=this.gen.rectangle(e,r,n,i,s);return this.draw(o),o}ellipse(e,r,n,i,s){const o=this.gen.ellipse(e,r,n,i,s);return this.draw(o),o}circle(e,r,n,i){const s=this.gen.circle(e,r,n,i);return this.draw(s),s}linearPath(e,r){const n=this.gen.linearPath(e,r);return this.draw(n),n}polygon(e,r){const n=this.gen.polygon(e,r);return this.draw(n),n}arc(e,r,n,i,s,o,a=!1,l){const c=this.gen.arc(e,r,n,i,s,o,a,l);return this.draw(c),c}curve(e,r){const n=this.gen.curve(e,r);return this.draw(n),n}path(e,r){const n=this.gen.path(e,r);return this.draw(n),n}}const o2="http://www.w3.org/2000/svg";class wTe{constructor(e,r){this.svg=e,this.gen=new lv(r)}draw(e){const r=e.sets||[],n=e.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,s=i.createElementNS(o2,"g"),o=e.options.fixedDecimalPlaceDigits;for(const a of r){let l=null;switch(a.type){case"path":l=i.createElementNS(o2,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",n.stroke),l.setAttribute("stroke-width",n.strokeWidth+""),l.setAttribute("fill","none"),n.strokeLineDash&&l.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${n.strokeLineDashOffset}`);break;case"fillPath":l=i.createElementNS(o2,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",n.fill||""),e.shape!=="curve"&&e.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(i,a,n)}l&&s.appendChild(l)}return s}fillSketch(e,r,n){let i=n.fillWeight;i<0&&(i=n.strokeWidth/2);const s=e.createElementNS(o2,"path");return s.setAttribute("d",this.opsToPath(r,n.fixedDecimalPlaceDigits)),s.setAttribute("stroke",n.fill||""),s.setAttribute("stroke-width",i+""),s.setAttribute("fill","none"),n.fillLineDash&&s.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${n.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,r){return this.gen.opsToPath(e,r)}line(e,r,n,i,s){const o=this.gen.line(e,r,n,i,s);return this.draw(o)}rectangle(e,r,n,i,s){const o=this.gen.rectangle(e,r,n,i,s);return this.draw(o)}ellipse(e,r,n,i,s){const o=this.gen.ellipse(e,r,n,i,s);return this.draw(o)}circle(e,r,n,i){const s=this.gen.circle(e,r,n,i);return this.draw(s)}linearPath(e,r){const n=this.gen.linearPath(e,r);return this.draw(n)}polygon(e,r){const n=this.gen.polygon(e,r);return this.draw(n)}arc(e,r,n,i,s,o,a=!1,l){const c=this.gen.arc(e,r,n,i,s,o,a,l);return this.draw(c)}curve(e,r){const n=this.gen.curve(e,r);return this.draw(n)}path(e,r){const n=this.gen.path(e,r);return this.draw(n)}}var We={canvas:(t,e)=>new vTe(t,e),svg:(t,e)=>new wTe(t,e),generator:t=>new lv(t),newSeed:()=>lv.newSeed()},ft=k(async(t,e,r)=>{var u,f;let n;const i=e.useHtmlLabels||tn((u=Jt())==null?void 0:u.htmlLabels);r?n=r:n="node default";const s=t.insert("g").attr("class",n).attr("id",e.domId||e.id),o=s.insert("g").attr("class","label").attr("style",Hn(e.labelStyle));let a;e.label===void 0?a="":a=typeof e.label=="string"?e.label:e.label[0];const l=await Dc(o,Ls(Au(a),Jt()),{useHtmlLabels:i,width:e.width||((f=Jt().flowchart)==null?void 0:f.wrappingWidth),cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img});let c=l.getBBox();const h=((e==null?void 0:e.padding)??0)/2;if(i){const d=l.children[0],p=Ft(l),m=d.getElementsByTagName("img");if(m){const g=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...m].map(y=>new Promise(b=>{function x(){if(y.style.display="flex",y.style.flexDirection="column",g){const T=Jt().fontSize?Jt().fontSize:window.getComputedStyle(document.body).fontSize,S=5,[w=dW.fontSize]=rw(T),_=w*S+"px";y.style.minWidth=_,y.style.maxWidth=_}else y.style.width="100%";b(y)}k(x,"setupImage"),setTimeout(()=>{y.complete&&x()}),y.addEventListener("error",x),y.addEventListener("load",x)})))}c=d.getBoundingClientRect(),p.attr("width",c.width),p.attr("height",c.height)}return i?o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"):o.attr("transform","translate(0, "+-c.height/2+")"),e.centerLabel&&o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:s,bbox:c,halfPadding:h,label:o}},"labelHelper"),Ck=k(async(t,e,r)=>{var l,c,h,u,f,d;const n=r.useHtmlLabels||tn((c=(l=Jt())==null?void 0:l.flowchart)==null?void 0:c.htmlLabels),i=t.insert("g").attr("class","label").attr("style",r.labelStyle||""),s=await Dc(i,Ls(Au(e),Jt()),{useHtmlLabels:n,width:r.width||((u=(h=Jt())==null?void 0:h.flowchart)==null?void 0:u.wrappingWidth),style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img});let o=s.getBBox();const a=r.padding/2;if(tn((d=(f=Jt())==null?void 0:f.flowchart)==null?void 0:d.htmlLabels)){const p=s.children[0],m=Ft(s);o=p.getBoundingClientRect(),m.attr("width",o.width),m.attr("height",o.height)}return n?i.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"):i.attr("transform","translate(0, "+-o.height/2+")"),r.centerLabel&&i.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),i.insert("rect",":first-child"),{shapeSvg:t,bbox:o,halfPadding:a,label:i}},"insertLabel"),Ke=k((t,e)=>{const r=e.node().getBBox();t.width=r.width,t.height=r.height},"updateNodeBounds"),ct=k((t,e)=>(t.look==="handDrawn"?"rough-node":"node")+" "+t.cssClasses+" "+(e||""),"getNodeClasses");function Rt(t){const e=t.map((r,n)=>`${n===0?"M":"L"}${r.x},${r.y}`);return e.push("Z"),e.join(" ")}k(Rt,"createPathFromPoints");function wc(t,e,r,n,i,s){const o=[],l=r-t,c=n-e,h=l/s,u=2*Math.PI/h,f=e+c/2;for(let d=0;d<=50;d++){const p=d/50,m=t+p*l,g=f+i*Math.sin(u*(m-t));o.push({x:m,y:g})}return o}k(wc,"generateFullSineWavePoints");function Sg(t,e,r,n,i,s){const o=[],a=i*Math.PI/180,h=(s*Math.PI/180-a)/(n-1);for(let u=0;u<n;u++){const f=a+u*h,d=t+r*Math.cos(f),p=e+r*Math.sin(f);o.push({x:-d,y:-p})}return o}k(Sg,"generateCirclePoints");var kTe=k((t,e)=>{var r=t.x,n=t.y,i=e.x-r,s=e.y-n,o=t.width/2,a=t.height/2,l,c;return Math.abs(s)*o>Math.abs(i)*a?(s<0&&(a=-a),l=s===0?0:a*i/s,c=a):(i<0&&(o=-o),l=o,c=i===0?0:o*s/i),{x:r+l,y:n+c}},"intersectRect"),i0=kTe;function HG(t,e){e&&t.attr("style",e)}k(HG,"applyStyle");async function qG(t){const e=Ft(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=e.append("xhtml:div"),n=Jt();let i=t.label;t.label&&Ld(t.label)&&(i=await F9(t.label.replace(r0.lineBreakRegex,`
`),n));const o='<span class="'+(t.isNode?"nodeLabel":"edgeLabel")+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+i+"</span>";return r.html(Ls(o,n)),HG(r,t.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}k(qG,"addHtmlLabel");var CTe=k(async(t,e,r,n)=>{let i=t||"";if(typeof i=="object"&&(i=i[0]),tn(Jt().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),he.info("vertexText"+i);const s={isNode:n,label:Au(i).replace(/fa[blrs]?:fa-[\w-]+/g,a=>`<i class='${a.replace(":"," ")}'></i>`),labelStyle:e&&e.replace("fill:","color:")};return await qG(s)}else{const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("style",e.replace("color:","fill:"));let o=[];typeof i=="string"?o=i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?o=i:o=[];for(const a of o){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),r?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=a.trim(),s.appendChild(l)}return s}},"createLabel"),vh=CTe,Ic=k((t,e,r,n,i)=>["M",t+i,e,"H",t+r-i,"A",i,i,0,0,1,t+r,e+i,"V",e+n-i,"A",i,i,0,0,1,t+r-i,e+n,"H",t+i,"A",i,i,0,0,1,t,e+n-i,"V",e+i,"A",i,i,0,0,1,t+i,e,"Z"].join(" "),"createRoundedRectPathD"),VG=k(async(t,e)=>{he.info("Creating subgraph rect for ",e.id,e);const r=Jt(),{themeVariables:n,handDrawnSeed:i}=r,{clusterBkg:s,clusterBorder:o}=n,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:h}=Ue(e),u=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),f=tn(r.flowchart.htmlLabels),d=u.insert("g").attr("class","cluster-label "),p=await Dc(d,e.label,{style:e.labelStyle,useHtmlLabels:f,isNode:!0});let m=p.getBBox();if(tn(r.flowchart.htmlLabels)){const _=p.children[0],I=Ft(p);m=_.getBoundingClientRect(),I.attr("width",m.width),I.attr("height",m.height)}const g=e.width<=m.width+e.padding?m.width+e.padding:e.width;e.width<=m.width+e.padding?e.diff=(g-e.width)/2-e.padding:e.diff=-e.padding;const y=e.height,b=e.x-g/2,x=e.y-y/2;he.trace("Data ",e,JSON.stringify(e));let T;if(e.look==="handDrawn"){const _=We.svg(u),I=je(e,{roughness:.7,fill:s,stroke:o,fillWeight:3,seed:i}),N=_.path(Ic(b,x,g,y,0),I);T=u.insert(()=>(he.debug("Rough node insert CXC",N),N),":first-child"),T.select("path:nth-child(2)").attr("style",c.join(";")),T.select("path").attr("style",h.join(";").replace("fill","stroke"))}else T=u.insert("rect",":first-child"),T.attr("style",l).attr("rx",e.rx).attr("ry",e.ry).attr("x",b).attr("y",x).attr("width",g).attr("height",y);const{subGraphTitleTopMargin:S}=cT(r);if(d.attr("transform",`translate(${e.x-m.width/2}, ${e.y-e.height/2+S})`),a){const _=d.select("span");_&&_.attr("style",a)}const w=T.node().getBBox();return e.offsetX=0,e.width=w.width,e.height=w.height,e.offsetY=m.height-e.padding/2,e.intersect=function(_){return i0(e,_)},{cluster:u,labelBBox:m}},"rect"),STe=k((t,e)=>{const r=t.insert("g").attr("class","note-cluster").attr("id",e.id),n=r.insert("rect",":first-child"),i=0*e.padding,s=i/2;n.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-s).attr("y",e.y-e.height/2-s).attr("width",e.width+i).attr("height",e.height+i).attr("fill","none");const o=n.node().getBBox();return e.width=o.width,e.height=o.height,e.intersect=function(a){return i0(e,a)},{cluster:r,labelBBox:{width:0,height:0}}},"noteGroup"),TTe=k(async(t,e)=>{const r=Jt(),{themeVariables:n,handDrawnSeed:i}=r,{altBackground:s,compositeBackground:o,compositeTitleBackground:a,nodeBorder:l}=n,c=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),h=c.insert("g",":first-child"),u=c.insert("g").attr("class","cluster-label");let f=c.append("rect");const d=u.node().appendChild(await vh(e.label,e.labelStyle,void 0,!0));let p=d.getBBox();if(tn(r.flowchart.htmlLabels)){const N=d.children[0],L=Ft(d);p=N.getBoundingClientRect(),L.attr("width",p.width),L.attr("height",p.height)}const m=0*e.padding,g=m/2,y=(e.width<=p.width+e.padding?p.width+e.padding:e.width)+m;e.width<=p.width+e.padding?e.diff=(y-e.width)/2-e.padding:e.diff=-e.padding;const b=e.height+m,x=e.height+m-p.height-6,T=e.x-y/2,S=e.y-b/2;e.width=y;const w=e.y-e.height/2-g+p.height+2;let _;if(e.look==="handDrawn"){const N=e.cssClasses.includes("statediagram-cluster-alt"),L=We.svg(c),D=e.rx||e.ry?L.path(Ic(T,S,y,b,10),{roughness:.7,fill:a,fillStyle:"solid",stroke:l,seed:i}):L.rectangle(T,S,y,b,{seed:i});_=c.insert(()=>D,":first-child");const P=L.rectangle(T,w,y,x,{fill:N?s:o,fillStyle:N?"hachure":"solid",stroke:l,seed:i});_=c.insert(()=>D,":first-child"),f=c.insert(()=>P)}else _=h.insert("rect",":first-child"),_.attr("class","outer").attr("x",T).attr("y",S).attr("width",y).attr("height",b).attr("data-look",e.look),f.attr("class","inner").attr("x",T).attr("y",w).attr("width",y).attr("height",x);u.attr("transform",`translate(${e.x-p.width/2}, ${S+1-(tn(r.flowchart.htmlLabels)?0:3)})`);const I=_.node().getBBox();return e.height=I.height,e.offsetX=0,e.offsetY=p.height-e.padding/2,e.labelBBox=p,e.intersect=function(N){return i0(e,N)},{cluster:c,labelBBox:p}},"roundedWithTitle"),_Te=k(async(t,e)=>{he.info("Creating subgraph rect for ",e.id,e);const r=Jt(),{themeVariables:n,handDrawnSeed:i}=r,{clusterBkg:s,clusterBorder:o}=n,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:h}=Ue(e),u=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),f=tn(r.flowchart.htmlLabels),d=u.insert("g").attr("class","cluster-label "),p=await Dc(d,e.label,{style:e.labelStyle,useHtmlLabels:f,isNode:!0,width:e.width});let m=p.getBBox();if(tn(r.flowchart.htmlLabels)){const _=p.children[0],I=Ft(p);m=_.getBoundingClientRect(),I.attr("width",m.width),I.attr("height",m.height)}const g=e.width<=m.width+e.padding?m.width+e.padding:e.width;e.width<=m.width+e.padding?e.diff=(g-e.width)/2-e.padding:e.diff=-e.padding;const y=e.height,b=e.x-g/2,x=e.y-y/2;he.trace("Data ",e,JSON.stringify(e));let T;if(e.look==="handDrawn"){const _=We.svg(u),I=je(e,{roughness:.7,fill:s,stroke:o,fillWeight:4,seed:i}),N=_.path(Ic(b,x,g,y,e.rx),I);T=u.insert(()=>(he.debug("Rough node insert CXC",N),N),":first-child"),T.select("path:nth-child(2)").attr("style",c.join(";")),T.select("path").attr("style",h.join(";").replace("fill","stroke"))}else T=u.insert("rect",":first-child"),T.attr("style",l).attr("rx",e.rx).attr("ry",e.ry).attr("x",b).attr("y",x).attr("width",g).attr("height",y);const{subGraphTitleTopMargin:S}=cT(r);if(d.attr("transform",`translate(${e.x-m.width/2}, ${e.y-e.height/2+S})`),a){const _=d.select("span");_&&_.attr("style",a)}const w=T.node().getBBox();return e.offsetX=0,e.width=w.width,e.height=w.height,e.offsetY=m.height-e.padding/2,e.intersect=function(_){return i0(e,_)},{cluster:u,labelBBox:m}},"kanbanSection"),MTe=k((t,e)=>{const r=Jt(),{themeVariables:n,handDrawnSeed:i}=r,{nodeBorder:s}=n,o=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),a=o.insert("g",":first-child"),l=0*e.padding,c=e.width+l;e.diff=-e.padding;const h=e.height+l,u=e.x-c/2,f=e.y-h/2;e.width=c;let d;if(e.look==="handDrawn"){const g=We.svg(o).rectangle(u,f,c,h,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:s,seed:i});d=o.insert(()=>g,":first-child")}else d=a.insert("rect",":first-child"),d.attr("class","divider").attr("x",u).attr("y",f).attr("width",c).attr("height",h).attr("data-look",e.look);const p=d.node().getBBox();return e.height=p.height,e.offsetX=0,e.offsetY=0,e.intersect=function(m){return i0(e,m)},{cluster:o,labelBBox:{}}},"divider"),ATe=VG,ETe={rect:VG,squareRect:ATe,roundedWithTitle:TTe,noteGroup:STe,divider:MTe,kanbanSection:_Te},WG=new Map,LTe=k(async(t,e)=>{const r=e.shape||"rect",n=await ETe[r](t,e);return WG.set(e.id,n),n},"insertCluster"),xLe=k(()=>{WG=new Map},"clear");function jG(t,e){return t.intersect(e)}k(jG,"intersectNode");var OTe=jG;function UG(t,e,r,n){var i=t.x,s=t.y,o=i-n.x,a=s-n.y,l=Math.sqrt(e*e*a*a+r*r*o*o),c=Math.abs(e*r*o/l);n.x<i&&(c=-c);var h=Math.abs(e*r*a/l);return n.y<s&&(h=-h),{x:i+c,y:s+h}}k(UG,"intersectEllipse");var GG=UG;function KG(t,e,r){return GG(t,e,e,r)}k(KG,"intersectCircle");var DTe=KG;function YG(t,e,r,n){{const i=e.y-t.y,s=t.x-e.x,o=e.x*t.y-t.x*e.y,a=i*r.x+s*r.y+o,l=i*n.x+s*n.y+o,c=1e-6;if(a!==0&&l!==0&&j6(a,l))return;const h=n.y-r.y,u=r.x-n.x,f=n.x*r.y-r.x*n.y,d=h*t.x+u*t.y+f,p=h*e.x+u*e.y+f;if(Math.abs(d)<c&&Math.abs(p)<c&&j6(d,p))return;const m=i*u-h*s;if(m===0)return;const g=Math.abs(m/2);let y=s*f-u*o;const b=y<0?(y-g)/m:(y+g)/m;y=h*o-i*f;const x=y<0?(y-g)/m:(y+g)/m;return{x:b,y:x}}}k(YG,"intersectLine");function j6(t,e){return t*e>0}k(j6,"sameSign");var ITe=YG;function XG(t,e,r){let n=t.x,i=t.y,s=[],o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(h){o=Math.min(o,h.x),a=Math.min(a,h.y)}):(o=Math.min(o,e.x),a=Math.min(a,e.y));let l=n-t.width/2-o,c=i-t.height/2-a;for(let h=0;h<e.length;h++){let u=e[h],f=e[h<e.length-1?h+1:0],d=ITe(t,r,{x:l+u.x,y:c+u.y},{x:l+f.x,y:c+f.y});d&&s.push(d)}return s.length?(s.length>1&&s.sort(function(h,u){let f=h.x-r.x,d=h.y-r.y,p=Math.sqrt(f*f+d*d),m=u.x-r.x,g=u.y-r.y,y=Math.sqrt(m*m+g*g);return p<y?-1:p===y?0:1}),s[0]):t}k(XG,"intersectPolygon");var BTe=XG,Pe={node:OTe,circle:DTe,ellipse:GG,polygon:BTe,rect:i0};function JG(t,e){const{labelStyles:r}=Ue(e);e.labelStyle=r;const n=ct(e);let i=n;n||(i="anchor");const s=t.insert("g").attr("class",i).attr("id",e.domId||e.id),o=1,{cssStyles:a}=e,l=We.svg(s),c=je(e,{fill:"black",stroke:"none",fillStyle:"solid"});e.look!=="handDrawn"&&(c.roughness=0);const h=l.circle(0,0,o*2,c),u=s.insert(()=>h,":first-child");return u.attr("class","anchor").attr("style",Hn(a)),Ke(e,u),e.intersect=function(f){return he.info("Circle intersect",e,o,f),Pe.circle(e,o,f)},s}k(JG,"anchor");function U6(t,e,r,n,i,s,o){const l=(t+r)/2,c=(e+n)/2,h=Math.atan2(n-e,r-t),u=(r-t)/2,f=(n-e)/2,d=u/i,p=f/s,m=Math.sqrt(d**2+p**2);if(m>1)throw new Error("The given radii are too small to create an arc between the points.");const g=Math.sqrt(1-m**2),y=l+g*s*Math.sin(h)*(o?-1:1),b=c-g*i*Math.cos(h)*(o?-1:1),x=Math.atan2((e-b)/s,(t-y)/i);let S=Math.atan2((n-b)/s,(r-y)/i)-x;o&&S<0&&(S+=2*Math.PI),!o&&S>0&&(S-=2*Math.PI);const w=[];for(let _=0;_<20;_++){const I=_/19,N=x+I*S,L=y+i*Math.cos(N),D=b+s*Math.sin(N);w.push({x:L,y:D})}return w}k(U6,"generateArcPoints");async function ZG(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await ft(t,e,ct(e)),o=s.width+e.padding+20,a=s.height+e.padding,l=a/2,c=l/(2.5+a/50),{cssStyles:h}=e,u=[{x:o/2,y:-a/2},{x:-o/2,y:-a/2},...U6(-o/2,-a/2,-o/2,a/2,c,l,!1),{x:o/2,y:a/2},...U6(o/2,a/2,o/2,-a/2,c,l,!0)],f=We.svg(i),d=je(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const p=Rt(u),m=f.path(p,d),g=i.insert(()=>m,":first-child");return g.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",h),n&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",n),g.attr("transform",`translate(${c/2}, 0)`),Ke(e,g),e.intersect=function(y){return Pe.polygon(e,u,y)},i}k(ZG,"bowTieRect");function Bc(t,e,r,n){return t.insert("polygon",":first-child").attr("points",n.map(function(i){return i.x+","+i.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+r/2+")")}k(Bc,"insertPolygonShape");async function QG(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await ft(t,e,ct(e)),o=s.height+e.padding,a=12,l=s.width+e.padding+a,c=0,h=l,u=-o,f=0,d=[{x:c+a,y:u},{x:h,y:u},{x:h,y:f},{x:c,y:f},{x:c,y:u+a},{x:c+a,y:u}];let p;const{cssStyles:m}=e;if(e.look==="handDrawn"){const g=We.svg(i),y=je(e,{}),b=Rt(d),x=g.path(b,y);p=i.insert(()=>x,":first-child").attr("transform",`translate(${-l/2}, ${o/2})`),m&&p.attr("style",m)}else p=Bc(i,l,o,d);return n&&p.attr("style",n),Ke(e,p),e.intersect=function(g){return Pe.polygon(e,d,g)},i}k(QG,"card");function eK(t,e){const{nodeStyles:r}=Ue(e);e.label="";const n=t.insert("g").attr("class",ct(e)).attr("id",e.domId??e.id),{cssStyles:i}=e,s=Math.max(28,e.width??0),o=[{x:0,y:s/2},{x:s/2,y:0},{x:0,y:-s/2},{x:-s/2,y:0}],a=We.svg(n),l=je(e,{});e.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=Rt(o),h=a.path(c,l),u=n.insert(()=>h,":first-child");return i&&e.look!=="handDrawn"&&u.selectAll("path").attr("style",i),r&&e.look!=="handDrawn"&&u.selectAll("path").attr("style",r),e.width=28,e.height=28,e.intersect=function(f){return Pe.polygon(e,o,f)},n}k(eK,"choice");async function ET(t,e,r){const{labelStyles:n,nodeStyles:i}=Ue(e);e.labelStyle=n;const{shapeSvg:s,bbox:o,halfPadding:a}=await ft(t,e,ct(e)),l=(r==null?void 0:r.padding)??a,c=o.width/2+l;let h;const{cssStyles:u}=e;if(e.look==="handDrawn"){const f=We.svg(s),d=je(e,{}),p=f.circle(0,0,c*2,d);h=s.insert(()=>p,":first-child"),h.attr("class","basic label-container").attr("style",Hn(u))}else h=s.insert("circle",":first-child").attr("class","basic label-container").attr("style",i).attr("r",c).attr("cx",0).attr("cy",0);return Ke(e,h),e.calcIntersect=function(f,d){const p=f.width/2;return Pe.circle(f,p,d)},e.intersect=function(f){return he.info("Circle intersect",e,c,f),Pe.circle(e,c,f)},s}k(ET,"circle");function tK(t){const e=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),n=t*2,i={x:n/2*e,y:n/2*r},s={x:-(n/2)*e,y:n/2*r},o={x:-(n/2)*e,y:-(n/2)*r},a={x:n/2*e,y:-(n/2)*r};return`M ${s.x},${s.y} L ${a.x},${a.y}
                   M ${i.x},${i.y} L ${o.x},${o.y}`}k(tK,"createLine");function rK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r,e.label="";const i=t.insert("g").attr("class",ct(e)).attr("id",e.domId??e.id),s=Math.max(30,(e==null?void 0:e.width)??0),{cssStyles:o}=e,a=We.svg(i),l=je(e,{});e.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=a.circle(0,0,s*2,l),h=tK(s),u=a.path(h,l),f=i.insert(()=>c,":first-child");return f.insert(()=>u),o&&e.look!=="handDrawn"&&f.selectAll("path").attr("style",o),n&&e.look!=="handDrawn"&&f.selectAll("path").attr("style",n),Ke(e,f),e.intersect=function(d){return he.info("crossedCircle intersect",e,{radius:s,point:d}),Pe.circle(e,s,d)},i}k(rK,"crossedCircle");function Sa(t,e,r,n=100,i=0,s=180){const o=[],a=i*Math.PI/180,h=(s*Math.PI/180-a)/(n-1);for(let u=0;u<n;u++){const f=a+u*h,d=t+r*Math.cos(f),p=e+r*Math.sin(f);o.push({x:-d,y:-p})}return o}k(Sa,"generateCirclePoints");async function nK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await ft(t,e,ct(e)),a=s.width+(e.padding??0),l=s.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=e,u=[...Sa(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...Sa(a/2+c*2,-c,c,20,-180,-270),...Sa(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...Sa(a/2,l/2,c,20,0,90)],f=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...Sa(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...Sa(a/2+a*.1,-c,c,20,-180,-270),...Sa(a/2+a*.1,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...Sa(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2,y:l/2+c}],d=We.svg(i),p=je(e,{fill:"none"});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=Rt(u).replace("Z",""),y=d.path(g,p),b=Rt(f),x=d.path(b,{...p}),T=i.insert("g",":first-child");return T.insert(()=>x,":first-child").attr("stroke-opacity",0),T.insert(()=>y,":first-child"),T.attr("class","text"),h&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",h),n&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",n),T.attr("transform",`translate(${c}, 0)`),o.attr("transform",`translate(${-a/2+c-(s.x-(s.left??0))},${-l/2+(e.padding??0)/2-(s.y-(s.top??0))})`),Ke(e,T),e.intersect=function(S){return Pe.polygon(e,f,S)},i}k(nK,"curlyBraceLeft");function Ta(t,e,r,n=100,i=0,s=180){const o=[],a=i*Math.PI/180,h=(s*Math.PI/180-a)/(n-1);for(let u=0;u<n;u++){const f=a+u*h,d=t+r*Math.cos(f),p=e+r*Math.sin(f);o.push({x:d,y:p})}return o}k(Ta,"generateCirclePoints");async function iK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await ft(t,e,ct(e)),a=s.width+(e.padding??0),l=s.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=e,u=[...Ta(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...Ta(a/2+c*2,-c,c,20,-180,-270),...Ta(a/2+c*2,c,c,20,-90,-180),{x:a/2+c,y:l/2},...Ta(a/2,l/2,c,20,0,90)],f=[{x:-a/2,y:-l/2-c},{x:a/2,y:-l/2-c},...Ta(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...Ta(a/2+c*2,-c,c,20,-180,-270),...Ta(a/2+c*2,c,c,20,-90,-180),{x:a/2+c,y:l/2},...Ta(a/2,l/2,c,20,0,90),{x:a/2,y:l/2+c},{x:-a/2,y:l/2+c}],d=We.svg(i),p=je(e,{fill:"none"});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=Rt(u).replace("Z",""),y=d.path(g,p),b=Rt(f),x=d.path(b,{...p}),T=i.insert("g",":first-child");return T.insert(()=>x,":first-child").attr("stroke-opacity",0),T.insert(()=>y,":first-child"),T.attr("class","text"),h&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",h),n&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",n),T.attr("transform",`translate(${-c}, 0)`),o.attr("transform",`translate(${-a/2+(e.padding??0)/2-(s.x-(s.left??0))},${-l/2+(e.padding??0)/2-(s.y-(s.top??0))})`),Ke(e,T),e.intersect=function(S){return Pe.polygon(e,f,S)},i}k(iK,"curlyBraceRight");function dn(t,e,r,n=100,i=0,s=180){const o=[],a=i*Math.PI/180,h=(s*Math.PI/180-a)/(n-1);for(let u=0;u<n;u++){const f=a+u*h,d=t+r*Math.cos(f),p=e+r*Math.sin(f);o.push({x:-d,y:-p})}return o}k(dn,"generateCirclePoints");async function sK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await ft(t,e,ct(e)),a=s.width+(e.padding??0),l=s.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=e,u=[...dn(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...dn(a/2+c*2,-c,c,20,-180,-270),...dn(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...dn(a/2,l/2,c,20,0,90)],f=[...dn(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...dn(-a/2-c/2,-c,c,20,0,90),...dn(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...dn(-a/2+c+c/2,l/2,c,30,-180,-270)],d=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...dn(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...dn(a/2+c*2,-c,c,20,-180,-270),...dn(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...dn(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2-c-c/2,y:l/2+c},...dn(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...dn(-a/2-c/2,-c,c,20,0,90),...dn(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...dn(-a/2+c+c/2,l/2,c,30,-180,-270)],p=We.svg(i),m=je(e,{fill:"none"});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=Rt(u).replace("Z",""),b=p.path(y,m),T=Rt(f).replace("Z",""),S=p.path(T,m),w=Rt(d),_=p.path(w,{...m}),I=i.insert("g",":first-child");return I.insert(()=>_,":first-child").attr("stroke-opacity",0),I.insert(()=>b,":first-child"),I.insert(()=>S,":first-child"),I.attr("class","text"),h&&e.look!=="handDrawn"&&I.selectAll("path").attr("style",h),n&&e.look!=="handDrawn"&&I.selectAll("path").attr("style",n),I.attr("transform",`translate(${c-c/4}, 0)`),o.attr("transform",`translate(${-a/2+(e.padding??0)/2-(s.x-(s.left??0))},${-l/2+(e.padding??0)/2-(s.y-(s.top??0))})`),Ke(e,I),e.intersect=function(N){return Pe.polygon(e,d,N)},i}k(sK,"curlyBraces");async function oK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await ft(t,e,ct(e)),o=80,a=20,l=Math.max(o,(s.width+(e.padding??0)*2)*1.25,(e==null?void 0:e.width)??0),c=Math.max(a,s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),h=c/2,{cssStyles:u}=e,f=We.svg(i),d=je(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const p=l,m=c,g=p-h,y=m/4,b=[{x:g,y:0},{x:y,y:0},{x:0,y:m/2},{x:y,y:m},{x:g,y:m},...Sg(-g,-m/2,h,50,270,90)],x=Rt(b),T=f.path(x,d),S=i.insert(()=>T,":first-child");return S.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&S.selectChildren("path").attr("style",u),n&&e.look!=="handDrawn"&&S.selectChildren("path").attr("style",n),S.attr("transform",`translate(${-l/2}, ${-c/2})`),Ke(e,S),e.intersect=function(w){return Pe.polygon(e,b,w)},i}k(oK,"curvedTrapezoid");var RTe=k((t,e,r,n,i,s)=>[`M${t},${e+s}`,`a${i},${s} 0,0,0 ${r},0`,`a${i},${s} 0,0,0 ${-r},0`,`l0,${n}`,`a${i},${s} 0,0,0 ${r},0`,`l0,${-n}`].join(" "),"createCylinderPathD"),PTe=k((t,e,r,n,i,s)=>[`M${t},${e+s}`,`M${t+r},${e+s}`,`a${i},${s} 0,0,0 ${-r},0`,`l0,${n}`,`a${i},${s} 0,0,0 ${r},0`,`l0,${-n}`].join(" "),"createOuterCylinderPathD"),NTe=k((t,e,r,n,i,s)=>[`M${t-r/2},${-n/2}`,`a${i},${s} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function aK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await ft(t,e,ct(e)),a=Math.max(s.width+e.padding,e.width??0),l=a/2,c=l/(2.5+a/50),h=Math.max(s.height+c+e.padding,e.height??0);let u;const{cssStyles:f}=e;if(e.look==="handDrawn"){const d=We.svg(i),p=PTe(0,0,a,h,l,c),m=NTe(0,c,a,h,l,c),g=d.path(p,je(e,{})),y=d.path(m,je(e,{fill:"none"}));u=i.insert(()=>y,":first-child"),u=i.insert(()=>g,":first-child"),u.attr("class","basic label-container"),f&&u.attr("style",f)}else{const d=RTe(0,0,a,h,l,c);u=i.insert("path",":first-child").attr("d",d).attr("class","basic label-container").attr("style",Hn(f)).attr("style",n)}return u.attr("label-offset-y",c),u.attr("transform",`translate(${-a/2}, ${-(h/2+c)})`),Ke(e,u),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+(e.padding??0)/1.5-(s.y-(s.top??0))})`),e.intersect=function(d){const p=Pe.rect(e,d),m=p.x-(e.x??0);if(l!=0&&(Math.abs(m)<(e.width??0)/2||Math.abs(m)==(e.width??0)/2&&Math.abs(p.y-(e.y??0))>(e.height??0)/2-c)){let g=c*c*(1-m*m/(l*l));g>0&&(g=Math.sqrt(g)),g=c-g,d.y-(e.y??0)>0&&(g=-g),p.y+=g}return p},i}k(aK,"cylinder");async function lK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await ft(t,e,ct(e)),a=s.width+e.padding,l=s.height+e.padding,c=l*.2,h=-a/2,u=-l/2-c/2,{cssStyles:f}=e,d=We.svg(i),p=je(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=[{x:h,y:u+c},{x:-h,y:u+c},{x:-h,y:-u},{x:h,y:-u},{x:h,y:u},{x:-h,y:u},{x:-h,y:u+c}],g=d.polygon(m.map(b=>[b.x,b.y]),p),y=i.insert(()=>g,":first-child");return y.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",f),n&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",n),o.attr("transform",`translate(${h+(e.padding??0)/2-(s.x-(s.left??0))}, ${u+c+(e.padding??0)/2-(s.y-(s.top??0))})`),Ke(e,y),e.intersect=function(b){return Pe.rect(e,b)},i}k(lK,"dividedRectangle");async function cK(t,e){var f,d;const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,halfPadding:o}=await ft(t,e,ct(e)),l=s.width/2+o+5,c=s.width/2+o;let h;const{cssStyles:u}=e;if(e.look==="handDrawn"){const p=We.svg(i),m=je(e,{roughness:.2,strokeWidth:2.5}),g=je(e,{roughness:.2,strokeWidth:1.5}),y=p.circle(0,0,l*2,m),b=p.circle(0,0,c*2,g);h=i.insert("g",":first-child"),h.attr("class",Hn(e.cssClasses)).attr("style",Hn(u)),(f=h.node())==null||f.appendChild(y),(d=h.node())==null||d.appendChild(b)}else{h=i.insert("g",":first-child");const p=h.insert("circle",":first-child"),m=h.insert("circle");h.attr("class","basic label-container").attr("style",n),p.attr("class","outer-circle").attr("style",n).attr("r",l).attr("cx",0).attr("cy",0),m.attr("class","inner-circle").attr("style",n).attr("r",c).attr("cx",0).attr("cy",0)}return Ke(e,h),e.intersect=function(p){return he.info("DoubleCircle intersect",e,l,p),Pe.circle(e,l,p)},i}k(cK,"doublecircle");function hK(t,e,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:i}=Ue(e);e.label="",e.labelStyle=n;const s=t.insert("g").attr("class",ct(e)).attr("id",e.domId??e.id),o=7,{cssStyles:a}=e,l=We.svg(s),{nodeBorder:c}=r,h=je(e,{fillStyle:"solid"});e.look!=="handDrawn"&&(h.roughness=0);const u=l.circle(0,0,o*2,h),f=s.insert(()=>u,":first-child");return f.selectAll("path").attr("style",`fill: ${c} !important;`),a&&a.length>0&&e.look!=="handDrawn"&&f.selectAll("path").attr("style",a),i&&e.look!=="handDrawn"&&f.selectAll("path").attr("style",i),Ke(e,f),e.intersect=function(d){return he.info("filledCircle intersect",e,{radius:o,point:d}),Pe.circle(e,o,d)},s}k(hK,"filledCircle");async function uK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await ft(t,e,ct(e)),a=s.width+(e.padding??0),l=a+s.height,c=a+s.height,h=[{x:0,y:-l},{x:c,y:-l},{x:c/2,y:0}],{cssStyles:u}=e,f=We.svg(i),d=je(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const p=Rt(h),m=f.path(p,d),g=i.insert(()=>m,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return u&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",u),n&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",n),e.width=a,e.height=l,Ke(e,g),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-l/2+(e.padding??0)/2+(s.y-(s.top??0))})`),e.intersect=function(y){return he.info("Triangle intersect",e,h,y),Pe.polygon(e,h,y)},i}k(uK,"flippedTriangle");function fK(t,e,{dir:r,config:{state:n,themeVariables:i}}){const{nodeStyles:s}=Ue(e);e.label="";const o=t.insert("g").attr("class",ct(e)).attr("id",e.domId??e.id),{cssStyles:a}=e;let l=Math.max(70,(e==null?void 0:e.width)??0),c=Math.max(10,(e==null?void 0:e.height)??0);r==="LR"&&(l=Math.max(10,(e==null?void 0:e.width)??0),c=Math.max(70,(e==null?void 0:e.height)??0));const h=-1*l/2,u=-1*c/2,f=We.svg(o),d=je(e,{stroke:i.lineColor,fill:i.lineColor});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const p=f.rectangle(h,u,l,c,d),m=o.insert(()=>p,":first-child");a&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",a),s&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",s),Ke(e,m);const g=(n==null?void 0:n.padding)??0;return e.width&&e.height&&(e.width+=g/2||0,e.height+=g/2||0),e.intersect=function(y){return Pe.rect(e,y)},o}k(fK,"forkJoin");async function dK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const i=80,s=50,{shapeSvg:o,bbox:a}=await ft(t,e,ct(e)),l=Math.max(i,a.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),c=Math.max(s,a.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),h=c/2,{cssStyles:u}=e,f=We.svg(o),d=je(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const p=[{x:-l/2,y:-c/2},{x:l/2-h,y:-c/2},...Sg(-l/2+h,0,h,50,90,270),{x:l/2-h,y:c/2},{x:-l/2,y:c/2}],m=Rt(p),g=f.path(m,d),y=o.insert(()=>g,":first-child");return y.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",u),n&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",n),Ke(e,y),e.intersect=function(b){return he.info("Pill intersect",e,{radius:h,point:b}),Pe.polygon(e,p,b)},o}k(dK,"halfRoundedRectangle");async function pK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await ft(t,e,ct(e)),o=s.height+(e.padding??0),a=s.width+(e.padding??0)*2.5,{cssStyles:l}=e,c=We.svg(i),h=je(e,{});e.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");let u=a/2;const f=u/6;u=u+f;const d=o/2,p=d/2,m=u-p,g=[{x:-m,y:-d},{x:0,y:-d},{x:m,y:-d},{x:u,y:0},{x:m,y:d},{x:0,y:d},{x:-m,y:d},{x:-u,y:0}],y=Rt(g),b=c.path(y,h),x=i.insert(()=>b,":first-child");return x.attr("class","basic label-container"),l&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",l),n&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",n),e.width=a,e.height=o,Ke(e,x),e.intersect=function(T){return Pe.polygon(e,g,T)},i}k(pK,"hexagon");async function mK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.label="",e.labelStyle=r;const{shapeSvg:i}=await ft(t,e,ct(e)),s=Math.max(30,(e==null?void 0:e.width)??0),o=Math.max(30,(e==null?void 0:e.height)??0),{cssStyles:a}=e,l=We.svg(i),c=je(e,{});e.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const h=[{x:0,y:0},{x:s,y:0},{x:0,y:o},{x:s,y:o}],u=Rt(h),f=l.path(u,c),d=i.insert(()=>f,":first-child");return d.attr("class","basic label-container"),a&&e.look!=="handDrawn"&&d.selectChildren("path").attr("style",a),n&&e.look!=="handDrawn"&&d.selectChildren("path").attr("style",n),d.attr("transform",`translate(${-s/2}, ${-o/2})`),Ke(e,d),e.intersect=function(p){return he.info("Pill intersect",e,{points:h}),Pe.polygon(e,h,p)},i}k(mK,"hourglass");async function gK(t,e,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:i}=Ue(e);e.labelStyle=i;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=n==null?void 0:n.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,label:u}=await ft(t,e,"icon-shape default"),f=e.pos==="t",d=a,p=a,{nodeBorder:m}=r,{stylesMap:g}=n0(e),y=-p/2,b=-d/2,x=e.label?8:0,T=We.svg(c),S=je(e,{stroke:"none",fill:"none"});e.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const w=T.rectangle(y,b,p,d,S),_=Math.max(p,h.width),I=d+h.height+x,N=T.rectangle(-_/2,-I/2,_,I,{...S,fill:"transparent",stroke:"none"}),L=c.insert(()=>w,":first-child"),D=c.insert(()=>N);if(e.icon){const P=c.append("g");P.html(`<g>${await q1(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const K=P.node().getBBox(),z=K.width,$=K.height,H=K.x,U=K.y;P.attr("transform",`translate(${-z/2-H},${f?h.height/2+x/2-$/2-U:-h.height/2-x/2-$/2-U})`),P.attr("style",`color: ${g.get("stroke")??m};`)}return u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${f?-I/2:I/2-h.height})`),L.attr("transform",`translate(0,${f?h.height/2+x/2:-h.height/2-x/2})`),Ke(e,D),e.intersect=function(P){if(he.info("iconSquare intersect",e,P),!e.label)return Pe.rect(e,P);const K=e.x??0,z=e.y??0,$=e.height??0;let H=[];return f?H=[{x:K-h.width/2,y:z-$/2},{x:K+h.width/2,y:z-$/2},{x:K+h.width/2,y:z-$/2+h.height+x},{x:K+p/2,y:z-$/2+h.height+x},{x:K+p/2,y:z+$/2},{x:K-p/2,y:z+$/2},{x:K-p/2,y:z-$/2+h.height+x},{x:K-h.width/2,y:z-$/2+h.height+x}]:H=[{x:K-p/2,y:z-$/2},{x:K+p/2,y:z-$/2},{x:K+p/2,y:z-$/2+d},{x:K+h.width/2,y:z-$/2+d},{x:K+h.width/2/2,y:z+$/2},{x:K-h.width/2,y:z+$/2},{x:K-h.width/2,y:z-$/2+d},{x:K-p/2,y:z-$/2+d}],Pe.polygon(e,H,P)},c}k(gK,"icon");async function yK(t,e,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:i}=Ue(e);e.labelStyle=i;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=n==null?void 0:n.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,label:u}=await ft(t,e,"icon-shape default"),f=20,d=e.label?8:0,p=e.pos==="t",{nodeBorder:m,mainBkg:g}=r,{stylesMap:y}=n0(e),b=We.svg(c),x=je(e,{});e.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const T=y.get("fill");x.stroke=T??g;const S=c.append("g");e.icon&&S.html(`<g>${await q1(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const w=S.node().getBBox(),_=w.width,I=w.height,N=w.x,L=w.y,D=Math.max(_,I)*Math.SQRT2+f*2,P=b.circle(0,0,D,x),K=Math.max(D,h.width),z=D+h.height+d,$=b.rectangle(-K/2,-z/2,K,z,{...x,fill:"transparent",stroke:"none"}),H=c.insert(()=>P,":first-child"),U=c.insert(()=>$);return S.attr("transform",`translate(${-_/2-N},${p?h.height/2+d/2-I/2-L:-h.height/2-d/2-I/2-L})`),S.attr("style",`color: ${y.get("stroke")??m};`),u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${p?-z/2:z/2-h.height})`),H.attr("transform",`translate(0,${p?h.height/2+d/2:-h.height/2-d/2})`),Ke(e,U),e.intersect=function(q){return he.info("iconSquare intersect",e,q),Pe.rect(e,q)},c}k(yK,"iconCircle");async function bK(t,e,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:i}=Ue(e);e.labelStyle=i;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=n==null?void 0:n.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,halfPadding:u,label:f}=await ft(t,e,"icon-shape default"),d=e.pos==="t",p=a+u*2,m=a+u*2,{nodeBorder:g,mainBkg:y}=r,{stylesMap:b}=n0(e),x=-m/2,T=-p/2,S=e.label?8:0,w=We.svg(c),_=je(e,{});e.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");const I=b.get("fill");_.stroke=I??y;const N=w.path(Ic(x,T,m,p,5),_),L=Math.max(m,h.width),D=p+h.height+S,P=w.rectangle(-L/2,-D/2,L,D,{..._,fill:"transparent",stroke:"none"}),K=c.insert(()=>N,":first-child").attr("class","icon-shape2"),z=c.insert(()=>P);if(e.icon){const $=c.append("g");$.html(`<g>${await q1(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const H=$.node().getBBox(),U=H.width,q=H.height,re=H.x,E=H.y;$.attr("transform",`translate(${-U/2-re},${d?h.height/2+S/2-q/2-E:-h.height/2-S/2-q/2-E})`),$.attr("style",`color: ${b.get("stroke")??g};`)}return f.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${d?-D/2:D/2-h.height})`),K.attr("transform",`translate(0,${d?h.height/2+S/2:-h.height/2-S/2})`),Ke(e,z),e.intersect=function($){if(he.info("iconSquare intersect",e,$),!e.label)return Pe.rect(e,$);const H=e.x??0,U=e.y??0,q=e.height??0;let re=[];return d?re=[{x:H-h.width/2,y:U-q/2},{x:H+h.width/2,y:U-q/2},{x:H+h.width/2,y:U-q/2+h.height+S},{x:H+m/2,y:U-q/2+h.height+S},{x:H+m/2,y:U+q/2},{x:H-m/2,y:U+q/2},{x:H-m/2,y:U-q/2+h.height+S},{x:H-h.width/2,y:U-q/2+h.height+S}]:re=[{x:H-m/2,y:U-q/2},{x:H+m/2,y:U-q/2},{x:H+m/2,y:U-q/2+p},{x:H+h.width/2,y:U-q/2+p},{x:H+h.width/2/2,y:U+q/2},{x:H-h.width/2,y:U+q/2},{x:H-h.width/2,y:U-q/2+p},{x:H-m/2,y:U-q/2+p}],Pe.polygon(e,re,$)},c}k(bK,"iconRounded");async function xK(t,e,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:i}=Ue(e);e.labelStyle=i;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=n==null?void 0:n.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,halfPadding:u,label:f}=await ft(t,e,"icon-shape default"),d=e.pos==="t",p=a+u*2,m=a+u*2,{nodeBorder:g,mainBkg:y}=r,{stylesMap:b}=n0(e),x=-m/2,T=-p/2,S=e.label?8:0,w=We.svg(c),_=je(e,{});e.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");const I=b.get("fill");_.stroke=I??y;const N=w.path(Ic(x,T,m,p,.1),_),L=Math.max(m,h.width),D=p+h.height+S,P=w.rectangle(-L/2,-D/2,L,D,{..._,fill:"transparent",stroke:"none"}),K=c.insert(()=>N,":first-child"),z=c.insert(()=>P);if(e.icon){const $=c.append("g");$.html(`<g>${await q1(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const H=$.node().getBBox(),U=H.width,q=H.height,re=H.x,E=H.y;$.attr("transform",`translate(${-U/2-re},${d?h.height/2+S/2-q/2-E:-h.height/2-S/2-q/2-E})`),$.attr("style",`color: ${b.get("stroke")??g};`)}return f.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${d?-D/2:D/2-h.height})`),K.attr("transform",`translate(0,${d?h.height/2+S/2:-h.height/2-S/2})`),Ke(e,z),e.intersect=function($){if(he.info("iconSquare intersect",e,$),!e.label)return Pe.rect(e,$);const H=e.x??0,U=e.y??0,q=e.height??0;let re=[];return d?re=[{x:H-h.width/2,y:U-q/2},{x:H+h.width/2,y:U-q/2},{x:H+h.width/2,y:U-q/2+h.height+S},{x:H+m/2,y:U-q/2+h.height+S},{x:H+m/2,y:U+q/2},{x:H-m/2,y:U+q/2},{x:H-m/2,y:U-q/2+h.height+S},{x:H-h.width/2,y:U-q/2+h.height+S}]:re=[{x:H-m/2,y:U-q/2},{x:H+m/2,y:U-q/2},{x:H+m/2,y:U-q/2+p},{x:H+h.width/2,y:U-q/2+p},{x:H+h.width/2/2,y:U+q/2},{x:H-h.width/2,y:U+q/2},{x:H-h.width/2,y:U-q/2+p},{x:H-m/2,y:U-q/2+p}],Pe.polygon(e,re,$)},c}k(xK,"iconSquare");async function vK(t,e,{config:{flowchart:r}}){const n=new Image;n.src=(e==null?void 0:e.img)??"",await n.decode();const i=Number(n.naturalWidth.toString().replace("px","")),s=Number(n.naturalHeight.toString().replace("px",""));e.imageAspectRatio=i/s;const{labelStyles:o}=Ue(e);e.labelStyle=o;const a=r==null?void 0:r.wrappingWidth;e.defaultWidth=r==null?void 0:r.wrappingWidth;const l=Math.max(e.label?a??0:0,(e==null?void 0:e.assetWidth)??i),c=e.constraint==="on"&&e!=null&&e.assetHeight?e.assetHeight*e.imageAspectRatio:l,h=e.constraint==="on"?c/e.imageAspectRatio:(e==null?void 0:e.assetHeight)??s;e.width=Math.max(c,a??0);const{shapeSvg:u,bbox:f,label:d}=await ft(t,e,"image-shape default"),p=e.pos==="t",m=-c/2,g=-h/2,y=e.label?8:0,b=We.svg(u),x=je(e,{});e.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const T=b.rectangle(m,g,c,h,x),S=Math.max(c,f.width),w=h+f.height+y,_=b.rectangle(-S/2,-w/2,S,w,{...x,fill:"none",stroke:"none"}),I=u.insert(()=>T,":first-child"),N=u.insert(()=>_);if(e.img){const L=u.append("image");L.attr("href",e.img),L.attr("width",c),L.attr("height",h),L.attr("preserveAspectRatio","none"),L.attr("transform",`translate(${-c/2},${p?w/2-h:-w/2})`)}return d.attr("transform",`translate(${-f.width/2-(f.x-(f.left??0))},${p?-h/2-f.height/2-y/2:h/2-f.height/2+y/2})`),I.attr("transform",`translate(0,${p?f.height/2+y/2:-f.height/2-y/2})`),Ke(e,N),e.intersect=function(L){if(he.info("iconSquare intersect",e,L),!e.label)return Pe.rect(e,L);const D=e.x??0,P=e.y??0,K=e.height??0;let z=[];return p?z=[{x:D-f.width/2,y:P-K/2},{x:D+f.width/2,y:P-K/2},{x:D+f.width/2,y:P-K/2+f.height+y},{x:D+c/2,y:P-K/2+f.height+y},{x:D+c/2,y:P+K/2},{x:D-c/2,y:P+K/2},{x:D-c/2,y:P-K/2+f.height+y},{x:D-f.width/2,y:P-K/2+f.height+y}]:z=[{x:D-c/2,y:P-K/2},{x:D+c/2,y:P-K/2},{x:D+c/2,y:P-K/2+h},{x:D+f.width/2,y:P-K/2+h},{x:D+f.width/2/2,y:P+K/2},{x:D-f.width/2,y:P+K/2},{x:D-f.width/2,y:P-K/2+h},{x:D-c/2,y:P-K/2+h}],Pe.polygon(e,z,L)},u}k(vK,"imageSquare");async function wK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await ft(t,e,ct(e)),o=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),a=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),l=[{x:0,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:-3*a/6,y:-a}];let c;const{cssStyles:h}=e;if(e.look==="handDrawn"){const u=We.svg(i),f=je(e,{}),d=Rt(l),p=u.path(d,f);c=i.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Bc(i,o,a,l);return n&&c.attr("style",n),e.width=o,e.height=a,Ke(e,c),e.intersect=function(u){return Pe.polygon(e,l,u)},i}k(wK,"inv_trapezoid");async function lw(t,e,r){const{labelStyles:n,nodeStyles:i}=Ue(e);e.labelStyle=n;const{shapeSvg:s,bbox:o}=await ft(t,e,ct(e)),a=Math.max(o.width+r.labelPaddingX*2,(e==null?void 0:e.width)||0),l=Math.max(o.height+r.labelPaddingY*2,(e==null?void 0:e.height)||0),c=-a/2,h=-l/2;let u,{rx:f,ry:d}=e;const{cssStyles:p}=e;if(r!=null&&r.rx&&r.ry&&(f=r.rx,d=r.ry),e.look==="handDrawn"){const m=We.svg(s),g=je(e,{}),y=f||d?m.path(Ic(c,h,a,l,f||0),g):m.rectangle(c,h,a,l,g);u=s.insert(()=>y,":first-child"),u.attr("class","basic label-container").attr("style",Hn(p))}else u=s.insert("rect",":first-child"),u.attr("class","basic label-container").attr("style",i).attr("rx",Hn(f)).attr("ry",Hn(d)).attr("x",c).attr("y",h).attr("width",a).attr("height",l);return Ke(e,u),e.calcIntersect=function(m,g){return Pe.rect(m,g)},e.intersect=function(m){return Pe.rect(e,m)},s}k(lw,"drawRect");async function kK(t,e){const{shapeSvg:r,bbox:n,label:i}=await ft(t,e,"label"),s=r.insert("rect",":first-child");return s.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),i.attr("transform",`translate(${-(n.width/2)-(n.x-(n.left??0))}, ${-(n.height/2)-(n.y-(n.top??0))})`),Ke(e,s),e.intersect=function(l){return Pe.rect(e,l)},r}k(kK,"labelRect");async function CK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await ft(t,e,ct(e)),o=Math.max(s.width+(e.padding??0),(e==null?void 0:e.width)??0),a=Math.max(s.height+(e.padding??0),(e==null?void 0:e.height)??0),l=[{x:0,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:-(3*a)/6,y:-a}];let c;const{cssStyles:h}=e;if(e.look==="handDrawn"){const u=We.svg(i),f=je(e,{}),d=Rt(l),p=u.path(d,f);c=i.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Bc(i,o,a,l);return n&&c.attr("style",n),e.width=o,e.height=a,Ke(e,c),e.intersect=function(u){return Pe.polygon(e,l,u)},i}k(CK,"lean_left");async function SK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await ft(t,e,ct(e)),o=Math.max(s.width+(e.padding??0),(e==null?void 0:e.width)??0),a=Math.max(s.height+(e.padding??0),(e==null?void 0:e.height)??0),l=[{x:-3*a/6,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:0,y:-a}];let c;const{cssStyles:h}=e;if(e.look==="handDrawn"){const u=We.svg(i),f=je(e,{}),d=Rt(l),p=u.path(d,f);c=i.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Bc(i,o,a,l);return n&&c.attr("style",n),e.width=o,e.height=a,Ke(e,c),e.intersect=function(u){return Pe.polygon(e,l,u)},i}k(SK,"lean_right");function TK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.label="",e.labelStyle=r;const i=t.insert("g").attr("class",ct(e)).attr("id",e.domId??e.id),{cssStyles:s}=e,o=Math.max(35,(e==null?void 0:e.width)??0),a=Math.max(35,(e==null?void 0:e.height)??0),l=7,c=[{x:o,y:0},{x:0,y:a+l/2},{x:o-2*l,y:a+l/2},{x:0,y:2*a},{x:o,y:a-l/2},{x:2*l,y:a-l/2}],h=We.svg(i),u=je(e,{});e.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const f=Rt(c),d=h.path(f,u),p=i.insert(()=>d,":first-child");return s&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",s),n&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",n),p.attr("transform",`translate(-${o/2},${-a})`),Ke(e,p),e.intersect=function(m){return he.info("lightningBolt intersect",e,m),Pe.polygon(e,c,m)},i}k(TK,"lightningBolt");var FTe=k((t,e,r,n,i,s,o)=>[`M${t},${e+s}`,`a${i},${s} 0,0,0 ${r},0`,`a${i},${s} 0,0,0 ${-r},0`,`l0,${n}`,`a${i},${s} 0,0,0 ${r},0`,`l0,${-n}`,`M${t},${e+s+o}`,`a${i},${s} 0,0,0 ${r},0`].join(" "),"createCylinderPathD"),$Te=k((t,e,r,n,i,s,o)=>[`M${t},${e+s}`,`M${t+r},${e+s}`,`a${i},${s} 0,0,0 ${-r},0`,`l0,${n}`,`a${i},${s} 0,0,0 ${r},0`,`l0,${-n}`,`M${t},${e+s+o}`,`a${i},${s} 0,0,0 ${r},0`].join(" "),"createOuterCylinderPathD"),zTe=k((t,e,r,n,i,s)=>[`M${t-r/2},${-n/2}`,`a${i},${s} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function _K(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await ft(t,e,ct(e)),a=Math.max(s.width+(e.padding??0),e.width??0),l=a/2,c=l/(2.5+a/50),h=Math.max(s.height+c+(e.padding??0),e.height??0),u=h*.1;let f;const{cssStyles:d}=e;if(e.look==="handDrawn"){const p=We.svg(i),m=$Te(0,0,a,h,l,c,u),g=zTe(0,c,a,h,l,c),y=je(e,{}),b=p.path(m,y),x=p.path(g,y);i.insert(()=>x,":first-child").attr("class","line"),f=i.insert(()=>b,":first-child"),f.attr("class","basic label-container"),d&&f.attr("style",d)}else{const p=FTe(0,0,a,h,l,c,u);f=i.insert("path",":first-child").attr("d",p).attr("class","basic label-container").attr("style",Hn(d)).attr("style",n)}return f.attr("label-offset-y",c),f.attr("transform",`translate(${-a/2}, ${-(h/2+c)})`),Ke(e,f),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),e.intersect=function(p){const m=Pe.rect(e,p),g=m.x-(e.x??0);if(l!=0&&(Math.abs(g)<(e.width??0)/2||Math.abs(g)==(e.width??0)/2&&Math.abs(m.y-(e.y??0))>(e.height??0)/2-c)){let y=c*c*(1-g*g/(l*l));y>0&&(y=Math.sqrt(y)),y=c-y,p.y-(e.y??0)>0&&(y=-y),m.y+=y}return m},i}k(_K,"linedCylinder");async function MK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await ft(t,e,ct(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=l/4,h=l+c,{cssStyles:u}=e,f=We.svg(i),d=je(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const p=[{x:-a/2-a/2*.1,y:-h/2},{x:-a/2-a/2*.1,y:h/2},...wc(-a/2-a/2*.1,h/2,a/2+a/2*.1,h/2,c,.8),{x:a/2+a/2*.1,y:-h/2},{x:-a/2-a/2*.1,y:-h/2},{x:-a/2,y:-h/2},{x:-a/2,y:h/2*1.1},{x:-a/2,y:-h/2}],m=f.polygon(p.map(y=>[y.x,y.y]),d),g=i.insert(()=>m,":first-child");return g.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",u),n&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",n),g.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)+a/2*.1/2-(s.x-(s.left??0))},${-l/2+(e.padding??0)-c/2-(s.y-(s.top??0))})`),Ke(e,g),e.intersect=function(y){return Pe.polygon(e,p,y)},i}k(MK,"linedWaveEdgedRect");async function AK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await ft(t,e,ct(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=5,h=-a/2,u=-l/2,{cssStyles:f}=e,d=We.svg(i),p=je(e,{}),m=[{x:h-c,y:u+c},{x:h-c,y:u+l+c},{x:h+a-c,y:u+l+c},{x:h+a-c,y:u+l},{x:h+a,y:u+l},{x:h+a,y:u+l-c},{x:h+a+c,y:u+l-c},{x:h+a+c,y:u-c},{x:h+c,y:u-c},{x:h+c,y:u},{x:h,y:u},{x:h,y:u+c}],g=[{x:h,y:u+c},{x:h+a-c,y:u+c},{x:h+a-c,y:u+l},{x:h+a,y:u+l},{x:h+a,y:u},{x:h,y:u}];e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=Rt(m),b=d.path(y,p),x=Rt(g),T=d.path(x,{...p,fill:"none"}),S=i.insert(()=>T,":first-child");return S.insert(()=>b,":first-child"),S.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&S.selectAll("path").attr("style",f),n&&e.look!=="handDrawn"&&S.selectAll("path").attr("style",n),o.attr("transform",`translate(${-(s.width/2)-c-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),Ke(e,S),e.intersect=function(w){return Pe.polygon(e,m,w)},i}k(AK,"multiRect");async function EK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await ft(t,e,ct(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=l/4,h=l+c,u=-a/2,f=-h/2,d=5,{cssStyles:p}=e,m=wc(u-d,f+h+d,u+a-d,f+h+d,c,.8),g=m==null?void 0:m[m.length-1],y=[{x:u-d,y:f+d},{x:u-d,y:f+h+d},...m,{x:u+a-d,y:g.y-d},{x:u+a,y:g.y-d},{x:u+a,y:g.y-2*d},{x:u+a+d,y:g.y-2*d},{x:u+a+d,y:f-d},{x:u+d,y:f-d},{x:u+d,y:f},{x:u,y:f},{x:u,y:f+d}],b=[{x:u,y:f+d},{x:u+a-d,y:f+d},{x:u+a-d,y:g.y-d},{x:u+a,y:g.y-d},{x:u+a,y:f},{x:u,y:f}],x=We.svg(i),T=je(e,{});e.look!=="handDrawn"&&(T.roughness=0,T.fillStyle="solid");const S=Rt(y),w=x.path(S,T),_=Rt(b),I=x.path(_,T),N=i.insert(()=>w,":first-child");return N.insert(()=>I),N.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&N.selectAll("path").attr("style",p),n&&e.look!=="handDrawn"&&N.selectAll("path").attr("style",n),N.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-(s.width/2)-d-(s.x-(s.left??0))}, ${-(s.height/2)+d-c/2-(s.y-(s.top??0))})`),Ke(e,N),e.intersect=function(L){return Pe.polygon(e,y,L)},i}k(EK,"multiWaveEdgedRectangle");async function LK(t,e,{config:{themeVariables:r}}){var b;const{labelStyles:n,nodeStyles:i}=Ue(e);e.labelStyle=n,e.useHtmlLabels||((b=$n().flowchart)==null?void 0:b.htmlLabels)!==!1||(e.centerLabel=!0);const{shapeSvg:o,bbox:a,label:l}=await ft(t,e,ct(e)),c=Math.max(a.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),h=Math.max(a.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=-c/2,f=-h/2,{cssStyles:d}=e,p=We.svg(o),m=je(e,{fill:r.noteBkgColor,stroke:r.noteBorderColor});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=p.rectangle(u,f,c,h,m),y=o.insert(()=>g,":first-child");return y.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",d),i&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",i),l.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${-(a.height/2)-(a.y-(a.top??0))})`),Ke(e,y),e.intersect=function(x){return Pe.rect(e,x)},o}k(LK,"note");var HTe=k((t,e,r)=>[`M${t+r/2},${e}`,`L${t+r},${e-r/2}`,`L${t+r/2},${e-r}`,`L${t},${e-r/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function OK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await ft(t,e,ct(e)),o=s.width+e.padding,a=s.height+e.padding,l=o+a,c=.5,h=[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}];let u;const{cssStyles:f}=e;if(e.look==="handDrawn"){const d=We.svg(i),p=je(e,{}),m=HTe(0,0,l),g=d.path(m,p);u=i.insert(()=>g,":first-child").attr("transform",`translate(${-l/2+c}, ${l/2})`),f&&u.attr("style",f)}else u=Bc(i,l,l,h),u.attr("transform",`translate(${-l/2+c}, ${l/2})`);return n&&u.attr("style",n),Ke(e,u),e.calcIntersect=function(d,p){const m=d.width,g=[{x:m/2,y:0},{x:m,y:-m/2},{x:m/2,y:-m},{x:0,y:-m/2}],y=Pe.polygon(d,g,p);return{x:y.x-.5,y:y.y-.5}},e.intersect=function(d){return this.calcIntersect(e,d)},i}k(OK,"question");async function DK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await ft(t,e,ct(e)),a=Math.max(s.width+(e.padding??0),(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0),(e==null?void 0:e.height)??0),c=-a/2,h=-l/2,u=h/2,f=[{x:c+u,y:h},{x:c,y:0},{x:c+u,y:-h},{x:-c,y:-h},{x:-c,y:h}],{cssStyles:d}=e,p=We.svg(i),m=je(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=Rt(f),y=p.path(g,m),b=i.insert(()=>y,":first-child");return b.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",d),n&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",n),b.attr("transform",`translate(${-u/2},0)`),o.attr("transform",`translate(${-u/2-s.width/2-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),Ke(e,b),e.intersect=function(x){return Pe.polygon(e,f,x)},i}k(DK,"rect_left_inv_arrow");async function IK(t,e){var I,N;const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;let i;e.cssClasses?i="node "+e.cssClasses:i="node default";const s=t.insert("g").attr("class",i).attr("id",e.domId||e.id),o=s.insert("g"),a=s.insert("g").attr("class","label").attr("style",n),l=e.description,c=e.label,h=a.node().appendChild(await vh(c,e.labelStyle,!0,!0));let u={width:0,height:0};if(tn((N=(I=Jt())==null?void 0:I.flowchart)==null?void 0:N.htmlLabels)){const L=h.children[0],D=Ft(h);u=L.getBoundingClientRect(),D.attr("width",u.width),D.attr("height",u.height)}he.info("Text 2",l);const f=l||[],d=h.getBBox(),p=a.node().appendChild(await vh(f.join?f.join("<br/>"):f,e.labelStyle,!0,!0)),m=p.children[0],g=Ft(p);u=m.getBoundingClientRect(),g.attr("width",u.width),g.attr("height",u.height);const y=(e.padding||0)/2;Ft(p).attr("transform","translate( "+(u.width>d.width?0:(d.width-u.width)/2)+", "+(d.height+y+5)+")"),Ft(h).attr("transform","translate( "+(u.width<d.width?0:-(d.width-u.width)/2)+", 0)"),u=a.node().getBBox(),a.attr("transform","translate("+-u.width/2+", "+(-u.height/2-y+3)+")");const b=u.width+(e.padding||0),x=u.height+(e.padding||0),T=-u.width/2-y,S=-u.height/2-y;let w,_;if(e.look==="handDrawn"){const L=We.svg(s),D=je(e,{}),P=L.path(Ic(T,S,b,x,e.rx||0),D),K=L.line(-u.width/2-y,-u.height/2-y+d.height+y,u.width/2+y,-u.height/2-y+d.height+y,D);_=s.insert(()=>(he.debug("Rough node insert CXC",P),K),":first-child"),w=s.insert(()=>(he.debug("Rough node insert CXC",P),P),":first-child")}else w=o.insert("rect",":first-child"),_=o.insert("line"),w.attr("class","outer title-state").attr("style",n).attr("x",-u.width/2-y).attr("y",-u.height/2-y).attr("width",u.width+(e.padding||0)).attr("height",u.height+(e.padding||0)),_.attr("class","divider").attr("x1",-u.width/2-y).attr("x2",u.width/2+y).attr("y1",-u.height/2-y+d.height+y).attr("y2",-u.height/2-y+d.height+y);return Ke(e,w),e.intersect=function(L){return Pe.rect(e,L)},s}k(IK,"rectWithTitle");function Bp(t,e,r,n,i,s,o){const l=(t+r)/2,c=(e+n)/2,h=Math.atan2(n-e,r-t),u=(r-t)/2,f=(n-e)/2,d=u/i,p=f/s,m=Math.sqrt(d**2+p**2);if(m>1)throw new Error("The given radii are too small to create an arc between the points.");const g=Math.sqrt(1-m**2),y=l+g*s*Math.sin(h)*(o?-1:1),b=c-g*i*Math.cos(h)*(o?-1:1),x=Math.atan2((e-b)/s,(t-y)/i);let S=Math.atan2((n-b)/s,(r-y)/i)-x;o&&S<0&&(S+=2*Math.PI),!o&&S>0&&(S-=2*Math.PI);const w=[];for(let _=0;_<20;_++){const I=_/19,N=x+I*S,L=y+i*Math.cos(N),D=b+s*Math.sin(N);w.push({x:L,y:D})}return w}k(Bp,"generateArcPoints");async function BK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await ft(t,e,ct(e)),o=(e==null?void 0:e.padding)??0,a=(e==null?void 0:e.padding)??0,l=(e!=null&&e.width?e==null?void 0:e.width:s.width)+o*2,c=(e!=null&&e.height?e==null?void 0:e.height:s.height)+a*2,h=e.radius||5,u=e.taper||5,{cssStyles:f}=e,d=We.svg(i),p=je(e,{});e.stroke&&(p.stroke=e.stroke),e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=[{x:-l/2+u,y:-c/2},{x:l/2-u,y:-c/2},...Bp(l/2-u,-c/2,l/2,-c/2+u,h,h,!0),{x:l/2,y:-c/2+u},{x:l/2,y:c/2-u},...Bp(l/2,c/2-u,l/2-u,c/2,h,h,!0),{x:l/2-u,y:c/2},{x:-l/2+u,y:c/2},...Bp(-l/2+u,c/2,-l/2,c/2-u,h,h,!0),{x:-l/2,y:c/2-u},{x:-l/2,y:-c/2+u},...Bp(-l/2,-c/2+u,-l/2+u,-c/2,h,h,!0)],g=Rt(m),y=d.path(g,p),b=i.insert(()=>y,":first-child");return b.attr("class","basic label-container outer-path"),f&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",f),n&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",n),Ke(e,b),e.intersect=function(x){return Pe.polygon(e,m,x)},i}k(BK,"roundedRect");async function RK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await ft(t,e,ct(e)),a=(e==null?void 0:e.padding)??0,l=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),c=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),h=-s.width/2-a,u=-s.height/2-a,{cssStyles:f}=e,d=We.svg(i),p=je(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=[{x:h,y:u},{x:h+l+8,y:u},{x:h+l+8,y:u+c},{x:h-8,y:u+c},{x:h-8,y:u},{x:h,y:u},{x:h,y:u+c}],g=d.polygon(m.map(b=>[b.x,b.y]),p),y=i.insert(()=>g,":first-child");return y.attr("class","basic label-container").attr("style",Hn(f)),n&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",n),f&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",n),o.attr("transform",`translate(${-l/2+4+(e.padding??0)-(s.x-(s.left??0))},${-c/2+(e.padding??0)-(s.y-(s.top??0))})`),Ke(e,y),e.intersect=function(b){return Pe.rect(e,b)},i}k(RK,"shadedProcess");async function PK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await ft(t,e,ct(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=-a/2,h=-l/2,{cssStyles:u}=e,f=We.svg(i),d=je(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const p=[{x:c,y:h},{x:c,y:h+l},{x:c+a,y:h+l},{x:c+a,y:h-l/2}],m=Rt(p),g=f.path(m,d),y=i.insert(()=>g,":first-child");return y.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",u),n&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",n),y.attr("transform",`translate(0, ${l/4})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(s.x-(s.left??0))}, ${-l/4+(e.padding??0)-(s.y-(s.top??0))})`),Ke(e,y),e.intersect=function(b){return Pe.polygon(e,p,b)},i}k(PK,"slopedRect");async function NK(t,e){const r={rx:0,ry:0,labelPaddingX:e.labelPaddingX??((e==null?void 0:e.padding)||0)*2,labelPaddingY:((e==null?void 0:e.padding)||0)*1};return lw(t,e,r)}k(NK,"squareRect");async function FK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await ft(t,e,ct(e)),o=s.height+e.padding,a=s.width+o/4+e.padding,l=o/2,{cssStyles:c}=e,h=We.svg(i),u=je(e,{});e.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const f=[{x:-a/2+l,y:-o/2},{x:a/2-l,y:-o/2},...Sg(-a/2+l,0,l,50,90,270),{x:a/2-l,y:o/2},...Sg(a/2-l,0,l,50,270,450)],d=Rt(f),p=h.path(d,u),m=i.insert(()=>p,":first-child");return m.attr("class","basic label-container outer-path"),c&&e.look!=="handDrawn"&&m.selectChildren("path").attr("style",c),n&&e.look!=="handDrawn"&&m.selectChildren("path").attr("style",n),Ke(e,m),e.intersect=function(g){return Pe.polygon(e,f,g)},i}k(FK,"stadium");async function $K(t,e){return lw(t,e,{rx:5,ry:5})}k($K,"state");function zK(t,e,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:i}=Ue(e);e.labelStyle=n;const{cssStyles:s}=e,{lineColor:o,stateBorder:a,nodeBorder:l}=r,c=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),h=We.svg(c),u=je(e,{});e.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const f=h.circle(0,0,14,{...u,stroke:o,strokeWidth:2}),d=a??l,p=h.circle(0,0,5,{...u,fill:d,stroke:d,strokeWidth:2,fillStyle:"solid"}),m=c.insert(()=>f,":first-child");return m.insert(()=>p),s&&m.selectAll("path").attr("style",s),i&&m.selectAll("path").attr("style",i),Ke(e,m),e.intersect=function(g){return Pe.circle(e,7,g)},c}k(zK,"stateEnd");function HK(t,e,{config:{themeVariables:r}}){const{lineColor:n}=r,i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let s;if(e.look==="handDrawn"){const a=We.svg(i).circle(0,0,14,E8e(n));s=i.insert(()=>a),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else s=i.insert("circle",":first-child"),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return Ke(e,s),e.intersect=function(o){return Pe.circle(e,7,o)},i}k(HK,"stateStart");async function qK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await ft(t,e,ct(e)),o=((e==null?void 0:e.padding)||0)/2,a=s.width+e.padding,l=s.height+e.padding,c=-s.width/2-o,h=-s.height/2-o,u=[{x:0,y:0},{x:a,y:0},{x:a,y:-l},{x:0,y:-l},{x:0,y:0},{x:-8,y:0},{x:a+8,y:0},{x:a+8,y:-l},{x:-8,y:-l},{x:-8,y:0}];if(e.look==="handDrawn"){const f=We.svg(i),d=je(e,{}),p=f.rectangle(c-8,h,a+16,l,d),m=f.line(c,h,c,h+l,d),g=f.line(c+a,h,c+a,h+l,d);i.insert(()=>m,":first-child"),i.insert(()=>g,":first-child");const y=i.insert(()=>p,":first-child"),{cssStyles:b}=e;y.attr("class","basic label-container").attr("style",Hn(b)),Ke(e,y)}else{const f=Bc(i,a,l,u);n&&f.attr("style",n),Ke(e,f)}return e.intersect=function(f){return Pe.polygon(e,u,f)},i}k(qK,"subroutine");async function VK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await ft(t,e,ct(e)),o=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),a=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),l=-o/2,c=-a/2,h=.2*a,u=.2*a,{cssStyles:f}=e,d=We.svg(i),p=je(e,{}),m=[{x:l-h/2,y:c},{x:l+o+h/2,y:c},{x:l+o+h/2,y:c+a},{x:l-h/2,y:c+a}],g=[{x:l+o-h/2,y:c+a},{x:l+o+h/2,y:c+a},{x:l+o+h/2,y:c+a-u}];e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=Rt(m),b=d.path(y,p),x=Rt(g),T=d.path(x,{...p,fillStyle:"solid"}),S=i.insert(()=>T,":first-child");return S.insert(()=>b,":first-child"),S.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&S.selectAll("path").attr("style",f),n&&e.look!=="handDrawn"&&S.selectAll("path").attr("style",n),Ke(e,S),e.intersect=function(w){return Pe.polygon(e,m,w)},i}k(VK,"taggedRect");async function WK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await ft(t,e,ct(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=l/4,h=.2*a,u=.2*l,f=l+c,{cssStyles:d}=e,p=We.svg(i),m=je(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=[{x:-a/2-a/2*.1,y:f/2},...wc(-a/2-a/2*.1,f/2,a/2+a/2*.1,f/2,c,.8),{x:a/2+a/2*.1,y:-f/2},{x:-a/2-a/2*.1,y:-f/2}],y=-a/2+a/2*.1,b=-f/2-u*.4,x=[{x:y+a-h,y:(b+l)*1.4},{x:y+a,y:b+l-u},{x:y+a,y:(b+l)*.9},...wc(y+a,(b+l)*1.3,y+a-h,(b+l)*1.5,-l*.03,.5)],T=Rt(g),S=p.path(T,m),w=Rt(x),_=p.path(w,{...m,fillStyle:"solid"}),I=i.insert(()=>_,":first-child");return I.insert(()=>S,":first-child"),I.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&I.selectAll("path").attr("style",d),n&&e.look!=="handDrawn"&&I.selectAll("path").attr("style",n),I.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(s.x-(s.left??0))},${-l/2+(e.padding??0)-c/2-(s.y-(s.top??0))})`),Ke(e,I),e.intersect=function(N){return Pe.polygon(e,g,N)},i}k(WK,"taggedWaveEdgedRectangle");async function jK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await ft(t,e,ct(e)),o=Math.max(s.width+e.padding,(e==null?void 0:e.width)||0),a=Math.max(s.height+e.padding,(e==null?void 0:e.height)||0),l=-o/2,c=-a/2,h=i.insert("rect",":first-child");return h.attr("class","text").attr("style",n).attr("rx",0).attr("ry",0).attr("x",l).attr("y",c).attr("width",o).attr("height",a),Ke(e,h),e.intersect=function(u){return Pe.rect(e,u)},i}k(jK,"text");var qTe=k((t,e,r,n,i,s)=>`M${t},${e}
    a${i},${s} 0,0,1 0,${-n}
    l${r},0
    a${i},${s} 0,0,1 0,${n}
    M${r},${-n}
    a${i},${s} 0,0,0 0,${n}
    l${-r},0`,"createCylinderPathD"),VTe=k((t,e,r,n,i,s)=>[`M${t},${e}`,`M${t+r},${e}`,`a${i},${s} 0,0,0 0,${-n}`,`l${-r},0`,`a${i},${s} 0,0,0 0,${n}`,`l${r},0`].join(" "),"createOuterCylinderPathD"),WTe=k((t,e,r,n,i,s)=>[`M${t+r/2},${-n/2}`,`a${i},${s} 0,0,0 0,${n}`].join(" "),"createInnerCylinderPathD");async function UK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:o,halfPadding:a}=await ft(t,e,ct(e)),l=e.look==="neo"?a*2:a,c=s.height+l,h=c/2,u=h/(2.5+c/50),f=s.width+u+l,{cssStyles:d}=e;let p;if(e.look==="handDrawn"){const m=We.svg(i),g=VTe(0,0,f,c,u,h),y=WTe(0,0,f,c,u,h),b=m.path(g,je(e,{})),x=m.path(y,je(e,{fill:"none"}));p=i.insert(()=>x,":first-child"),p=i.insert(()=>b,":first-child"),p.attr("class","basic label-container"),d&&p.attr("style",d)}else{const m=qTe(0,0,f,c,u,h);p=i.insert("path",":first-child").attr("d",m).attr("class","basic label-container").attr("style",Hn(d)).attr("style",n),p.attr("class","basic label-container"),d&&p.selectAll("path").attr("style",d),n&&p.selectAll("path").attr("style",n)}return p.attr("label-offset-x",u),p.attr("transform",`translate(${-f/2}, ${c/2} )`),o.attr("transform",`translate(${-(s.width/2)-u-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),Ke(e,p),e.intersect=function(m){const g=Pe.rect(e,m),y=g.y-(e.y??0);if(h!=0&&(Math.abs(y)<(e.height??0)/2||Math.abs(y)==(e.height??0)/2&&Math.abs(g.x-(e.x??0))>(e.width??0)/2-u)){let b=u*u*(1-y*y/(h*h));b!=0&&(b=Math.sqrt(Math.abs(b))),b=u-b,m.x-(e.x??0)>0&&(b=-b),g.x+=b}return g},i}k(UK,"tiltedCylinder");async function GK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await ft(t,e,ct(e)),o=s.width+e.padding,a=s.height+e.padding,l=[{x:-3*a/6,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:0,y:-a}];let c;const{cssStyles:h}=e;if(e.look==="handDrawn"){const u=We.svg(i),f=je(e,{}),d=Rt(l),p=u.path(d,f);c=i.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Bc(i,o,a,l);return n&&c.attr("style",n),e.width=o,e.height=a,Ke(e,c),e.intersect=function(u){return Pe.polygon(e,l,u)},i}k(GK,"trapezoid");async function KK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await ft(t,e,ct(e)),o=60,a=20,l=Math.max(o,s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),c=Math.max(a,s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),{cssStyles:h}=e,u=We.svg(i),f=je(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const d=[{x:-l/2*.8,y:-c/2},{x:l/2*.8,y:-c/2},{x:l/2,y:-c/2*.6},{x:l/2,y:c/2},{x:-l/2,y:c/2},{x:-l/2,y:-c/2*.6}],p=Rt(d),m=u.path(p,f),g=i.insert(()=>m,":first-child");return g.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",h),n&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",n),Ke(e,g),e.intersect=function(y){return Pe.polygon(e,d,y)},i}k(KK,"trapezoidalPentagon");async function YK(t,e){var b;const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await ft(t,e,ct(e)),a=tn((b=Jt().flowchart)==null?void 0:b.htmlLabels),l=s.width+(e.padding??0),c=l+s.height,h=l+s.height,u=[{x:0,y:0},{x:h,y:0},{x:h/2,y:-c}],{cssStyles:f}=e,d=We.svg(i),p=je(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=Rt(u),g=d.path(m,p),y=i.insert(()=>g,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return f&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",f),n&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",n),e.width=l,e.height=c,Ke(e,y),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${c/2-(s.height+(e.padding??0)/(a?2:1)-(s.y-(s.top??0)))})`),e.intersect=function(x){return he.info("Triangle intersect",e,u,x),Pe.polygon(e,u,x)},i}k(YK,"triangle");async function XK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await ft(t,e,ct(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=l/8,h=l+c,{cssStyles:u}=e,d=70-a,p=d>0?d/2:0,m=We.svg(i),g=je(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=[{x:-a/2-p,y:h/2},...wc(-a/2-p,h/2,a/2+p,h/2,c,.8),{x:a/2+p,y:-h/2},{x:-a/2-p,y:-h/2}],b=Rt(y),x=m.path(b,g),T=i.insert(()=>x,":first-child");return T.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",u),n&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",n),T.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(s.x-(s.left??0))},${-l/2+(e.padding??0)-c-(s.y-(s.top??0))})`),Ke(e,T),e.intersect=function(S){return Pe.polygon(e,y,S)},i}k(XK,"waveEdgedRectangle");async function JK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await ft(t,e,ct(e)),o=100,a=50,l=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),c=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),h=l/c;let u=l,f=c;u>f*h?f=u/h:u=f*h,u=Math.max(u,o),f=Math.max(f,a);const d=Math.min(f*.2,f/4),p=f+d*2,{cssStyles:m}=e,g=We.svg(i),y=je(e,{});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=[{x:-u/2,y:p/2},...wc(-u/2,p/2,u/2,p/2,d,1),{x:u/2,y:-p/2},...wc(u/2,-p/2,-u/2,-p/2,d,-1)],x=Rt(b),T=g.path(x,y),S=i.insert(()=>T,":first-child");return S.attr("class","basic label-container"),m&&e.look!=="handDrawn"&&S.selectAll("path").attr("style",m),n&&e.look!=="handDrawn"&&S.selectAll("path").attr("style",n),Ke(e,S),e.intersect=function(w){return Pe.polygon(e,b,w)},i}k(JK,"waveRectangle");async function ZK(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await ft(t,e,ct(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=5,h=-a/2,u=-l/2,{cssStyles:f}=e,d=We.svg(i),p=je(e,{}),m=[{x:h-c,y:u-c},{x:h-c,y:u+l},{x:h+a,y:u+l},{x:h+a,y:u-c}],g=`M${h-c},${u-c} L${h+a},${u-c} L${h+a},${u+l} L${h-c},${u+l} L${h-c},${u-c}
                M${h-c},${u} L${h+a},${u}
                M${h},${u-c} L${h},${u+l}`;e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=d.path(g,p),b=i.insert(()=>y,":first-child");return b.attr("transform",`translate(${c/2}, ${c/2})`),b.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",f),n&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",n),o.attr("transform",`translate(${-(s.width/2)+c/2-(s.x-(s.left??0))}, ${-(s.height/2)+c/2-(s.y-(s.top??0))})`),Ke(e,b),e.intersect=function(x){return Pe.polygon(e,m,x)},i}k(ZK,"windowPane");async function LT(t,e){var Te,O,et,He;const r=e;if(r.alias&&(e.label=r.alias),e.look==="handDrawn"){const{themeVariables:Le}=$n(),{background:Xe}=Le,dt={...e,id:e.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${Xe}`]};await LT(t,dt)}const n=$n();e.useHtmlLabels=n.htmlLabels;let i=((Te=n.er)==null?void 0:Te.diagramPadding)??10,s=((O=n.er)==null?void 0:O.entityPadding)??6;const{cssStyles:o}=e,{labelStyles:a,nodeStyles:l}=Ue(e);if(r.attributes.length===0&&e.label){const Le={rx:0,ry:0,labelPaddingX:i,labelPaddingY:i*1.5};hl(e.label,n)+Le.labelPaddingX*2<n.er.minEntityWidth&&(e.width=n.er.minEntityWidth);const Xe=await lw(t,e,Le);if(!tn(n.htmlLabels)){const dt=Xe.select("text"),Ct=(et=dt.node())==null?void 0:et.getBBox();dt.attr("transform",`translate(${-Ct.width/2}, 0)`)}return Xe}n.htmlLabels||(i*=1.25,s*=1.25);let c=ct(e);c||(c="node default");const h=t.insert("g").attr("class",c).attr("id",e.domId||e.id),u=await rf(h,e.label??"",n,0,0,["name"],a);u.height+=s;let f=0;const d=[],p=[];let m=0,g=0,y=0,b=0,x=!0,T=!0;for(const Le of r.attributes){const Xe=await rf(h,Le.type,n,0,f,["attribute-type"],a);m=Math.max(m,Xe.width+i);const dt=await rf(h,Le.name,n,0,f,["attribute-name"],a);g=Math.max(g,dt.width+i);const Ct=await rf(h,Le.keys.join(),n,0,f,["attribute-keys"],a);y=Math.max(y,Ct.width+i);const xt=await rf(h,Le.comment,n,0,f,["attribute-comment"],a);b=Math.max(b,xt.width+i);const jt=Math.max(Xe.height,dt.height,Ct.height,xt.height)+s;p.push({yOffset:f,rowHeight:jt}),f+=jt}let S=4;y<=i&&(x=!1,y=0,S--),b<=i&&(T=!1,b=0,S--);const w=h.node().getBBox();if(u.width+i*2-(m+g+y+b)>0){const Le=u.width+i*2-(m+g+y+b);m+=Le/S,g+=Le/S,y>0&&(y+=Le/S),b>0&&(b+=Le/S)}const _=m+g+y+b,I=We.svg(h),N=je(e,{});e.look!=="handDrawn"&&(N.roughness=0,N.fillStyle="solid");let L=0;p.length>0&&(L=p.reduce((Le,Xe)=>Le+((Xe==null?void 0:Xe.rowHeight)??0),0));const D=Math.max(w.width+i*2,(e==null?void 0:e.width)||0,_),P=Math.max((L??0)+u.height,(e==null?void 0:e.height)||0),K=-D/2,z=-P/2;h.selectAll("g:not(:first-child)").each((Le,Xe,dt)=>{const Ct=Ft(dt[Xe]),xt=Ct.attr("transform");let jt=0,R=0;if(xt){const ee=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(xt);ee&&(jt=parseFloat(ee[1]),R=parseFloat(ee[2]),Ct.attr("class").includes("attribute-name")?jt+=m:Ct.attr("class").includes("attribute-keys")?jt+=m+g:Ct.attr("class").includes("attribute-comment")&&(jt+=m+g+y))}Ct.attr("transform",`translate(${K+i/2+jt}, ${R+z+u.height+s/2})`)}),h.select(".name").attr("transform","translate("+-u.width/2+", "+(z+s/2)+")");const $=I.rectangle(K,z,D,P,N),H=h.insert(()=>$,":first-child").attr("style",o.join("")),{themeVariables:U}=$n(),{rowEven:q,rowOdd:re,nodeBorder:E}=U;d.push(0);for(const[Le,Xe]of p.entries()){const Ct=(Le+1)%2===0&&Xe.yOffset!==0,xt=I.rectangle(K,u.height+z+(Xe==null?void 0:Xe.yOffset),D,Xe==null?void 0:Xe.rowHeight,{...N,fill:Ct?q:re,stroke:E});h.insert(()=>xt,"g.label").attr("style",o.join("")).attr("class",`row-rect-${Ct?"even":"odd"}`)}let de=I.line(K,u.height+z,D+K,u.height+z,N);h.insert(()=>de).attr("class","divider"),de=I.line(m+K,u.height+z,m+K,P+z,N),h.insert(()=>de).attr("class","divider"),x&&(de=I.line(m+g+K,u.height+z,m+g+K,P+z,N),h.insert(()=>de).attr("class","divider")),T&&(de=I.line(m+g+y+K,u.height+z,m+g+y+K,P+z,N),h.insert(()=>de).attr("class","divider"));for(const Le of d)de=I.line(K,u.height+z+Le,D+K,u.height+z+Le,N),h.insert(()=>de).attr("class","divider");if(Ke(e,H),l&&e.look!=="handDrawn"){const Le=l.split(";"),Xe=(He=Le==null?void 0:Le.filter(dt=>dt.includes("stroke")))==null?void 0:He.map(dt=>`${dt}`).join("; ");h.selectAll("path").attr("style",Xe??""),h.selectAll(".row-rect-even path").attr("style",l)}return e.intersect=function(Le){return Pe.rect(e,Le)},h}k(LT,"erBox");async function rf(t,e,r,n=0,i=0,s=[],o=""){const a=t.insert("g").attr("class",`label ${s.join(" ")}`).attr("transform",`translate(${n}, ${i})`).attr("style",o);e!==CD(e)&&(e=CD(e),e=e.replaceAll("<","&lt;").replaceAll(">","&gt;"));const l=a.node().appendChild(await Dc(a,e,{width:hl(e,r)+100,style:o,useHtmlLabels:r.htmlLabels},r));if(e.includes("&lt;")||e.includes("&gt;")){let h=l.children[0];for(h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");h.childNodes[0];)h=h.childNodes[0],h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let c=l.getBBox();if(tn(r.htmlLabels)){const h=l.children[0];h.style.textAlign="start";const u=Ft(l);c=h.getBoundingClientRect(),u.attr("width",c.width),u.attr("height",c.height)}return c}k(rf,"addText");async function QK(t,e,r,n,i=r.class.padding??12){const s=n?0:3,o=t.insert("g").attr("class",ct(e)).attr("id",e.domId||e.id);let a=null,l=null,c=null,h=null,u=0,f=0,d=0;if(a=o.insert("g").attr("class","annotation-group text"),e.annotations.length>0){const b=e.annotations[0];await Rp(a,{text:`${b}`},0),u=a.node().getBBox().height}l=o.insert("g").attr("class","label-group text"),await Rp(l,e,0,["font-weight: bolder"]);const p=l.node().getBBox();f=p.height,c=o.insert("g").attr("class","members-group text");let m=0;for(const b of e.members){const x=await Rp(c,b,m,[b.parseClassifier()]);m+=x+s}d=c.node().getBBox().height,d<=0&&(d=i/2),h=o.insert("g").attr("class","methods-group text");let g=0;for(const b of e.methods){const x=await Rp(h,b,g,[b.parseClassifier()]);g+=x+s}let y=o.node().getBBox();if(a!==null){const b=a.node().getBBox();a.attr("transform",`translate(${-b.width/2})`)}return l.attr("transform",`translate(${-p.width/2}, ${u})`),y=o.node().getBBox(),c.attr("transform",`translate(0, ${u+f+i*2})`),y=o.node().getBBox(),h.attr("transform",`translate(0, ${u+f+(d?d+i*4:i*2)})`),y=o.node().getBBox(),{shapeSvg:o,bbox:y}}k(QK,"textHelper");async function Rp(t,e,r,n=[]){const i=t.insert("g").attr("class","label").attr("style",n.join("; ")),s=$n();let o="useHtmlLabels"in e?e.useHtmlLabels:tn(s.htmlLabels)??!0,a="";"text"in e?a=e.text:a=e.label,!o&&a.startsWith("\\")&&(a=a.substring(1)),Ld(a)&&(o=!0);const l=await Dc(i,V9(Au(a)),{width:hl(a,s)+50,classes:"markdown-node-label",useHtmlLabels:o},s);let c,h=1;if(o){const u=l.children[0],f=Ft(l);h=u.innerHTML.split("<br>").length,u.innerHTML.includes("</math>")&&(h+=u.innerHTML.split("<mrow>").length-1);const d=u.getElementsByTagName("img");if(d){const p=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...d].map(m=>new Promise(g=>{function y(){var b;if(m.style.display="flex",m.style.flexDirection="column",p){const x=((b=s.fontSize)==null?void 0:b.toString())??window.getComputedStyle(document.body).fontSize,S=parseInt(x,10)*5+"px";m.style.minWidth=S,m.style.maxWidth=S}else m.style.width="100%";g(m)}k(y,"setupImage"),setTimeout(()=>{m.complete&&y()}),m.addEventListener("error",y),m.addEventListener("load",y)})))}c=u.getBoundingClientRect(),f.attr("width",c.width),f.attr("height",c.height)}else{n.includes("font-weight: bolder")&&Ft(l).selectAll("tspan").attr("font-weight",""),h=l.children.length;const u=l.children[0];(l.textContent===""||l.textContent.includes("&gt"))&&(u.textContent=a[0]+a.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),a[1]===" "&&(u.textContent=u.textContent[0]+" "+u.textContent.substring(1))),u.textContent==="undefined"&&(u.textContent=""),c=l.getBBox()}return i.attr("transform","translate(0,"+(-c.height/(2*h)+r)+")"),c.height}k(Rp,"addText");async function eY(t,e){var N,L;const r=Jt(),n=r.class.padding??12,i=n,s=e.useHtmlLabels??tn(r.htmlLabels)??!0,o=e;o.annotations=o.annotations??[],o.members=o.members??[],o.methods=o.methods??[];const{shapeSvg:a,bbox:l}=await QK(t,e,r,s,i),{labelStyles:c,nodeStyles:h}=Ue(e);e.labelStyle=c,e.cssStyles=o.styles||"";const u=((N=o.styles)==null?void 0:N.join(";"))||h||"";e.cssStyles||(e.cssStyles=u.replaceAll("!important","").split(";"));const f=o.members.length===0&&o.methods.length===0&&!((L=r.class)!=null&&L.hideEmptyMembersBox),d=We.svg(a),p=je(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=l.width;let g=l.height;o.members.length===0&&o.methods.length===0?g+=i:o.members.length>0&&o.methods.length===0&&(g+=i*2);const y=-m/2,b=-g/2,x=d.rectangle(y-n,b-n-(f?n:o.members.length===0&&o.methods.length===0?-n/2:0),m+2*n,g+2*n+(f?n*2:o.members.length===0&&o.methods.length===0?-n:0),p),T=a.insert(()=>x,":first-child");T.attr("class","basic label-container");const S=T.node().getBBox();a.selectAll(".text").each((D,P,K)=>{var re;const z=Ft(K[P]),$=z.attr("transform");let H=0;if($){const de=RegExp(/translate\(([^,]+),([^)]+)\)/).exec($);de&&(H=parseFloat(de[2]))}let U=H+b+n-(f?n:o.members.length===0&&o.methods.length===0?-n/2:0);s||(U-=4);let q=y;(z.attr("class").includes("label-group")||z.attr("class").includes("annotation-group"))&&(q=-((re=z.node())==null?void 0:re.getBBox().width)/2||0,a.selectAll("text").each(function(E,de,Te){window.getComputedStyle(Te[de]).textAnchor==="middle"&&(q=0)})),z.attr("transform",`translate(${q}, ${U})`)});const w=a.select(".annotation-group").node().getBBox().height-(f?n/2:0)||0,_=a.select(".label-group").node().getBBox().height-(f?n/2:0)||0,I=a.select(".members-group").node().getBBox().height-(f?n/2:0)||0;if(o.members.length>0||o.methods.length>0||f){const D=d.line(S.x,w+_+b+n,S.x+S.width,w+_+b+n,p);a.insert(()=>D).attr("class","divider").attr("style",u)}if(f||o.members.length>0||o.methods.length>0){const D=d.line(S.x,w+_+I+b+i*2+n,S.x+S.width,w+_+I+b+n+i*2,p);a.insert(()=>D).attr("class","divider").attr("style",u)}if(o.look!=="handDrawn"&&a.selectAll("path").attr("style",u),T.select(":nth-child(2)").attr("style",u),a.selectAll(".divider").select("path").attr("style",u),e.labelStyle?a.selectAll("span").attr("style",e.labelStyle):a.selectAll("span").attr("style",u),!s){const D=RegExp(/color\s*:\s*([^;]*)/),P=D.exec(u);if(P){const K=P[0].replace("color","fill");a.selectAll("tspan").attr("style",K)}else if(c){const K=D.exec(c);if(K){const z=K[0].replace("color","fill");a.selectAll("tspan").attr("style",z)}}}return Ke(e,T),e.intersect=function(D){return Pe.rect(e,D)},a}k(eY,"classBox");async function tY(t,e){var w,_;const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const i=e,s=e,o=20,a=20,l="verifyMethod"in e,c=ct(e),h=t.insert("g").attr("class",c).attr("id",e.domId??e.id);let u;l?u=await Ao(h,`&lt;&lt;${i.type}&gt;&gt;`,0,e.labelStyle):u=await Ao(h,"&lt;&lt;Element&gt;&gt;",0,e.labelStyle);let f=u;const d=await Ao(h,i.name,f,e.labelStyle+"; font-weight: bold;");if(f+=d+a,l){const I=await Ao(h,`${i.requirementId?`ID: ${i.requirementId}`:""}`,f,e.labelStyle);f+=I;const N=await Ao(h,`${i.text?`Text: ${i.text}`:""}`,f,e.labelStyle);f+=N;const L=await Ao(h,`${i.risk?`Risk: ${i.risk}`:""}`,f,e.labelStyle);f+=L,await Ao(h,`${i.verifyMethod?`Verification: ${i.verifyMethod}`:""}`,f,e.labelStyle)}else{const I=await Ao(h,`${s.type?`Type: ${s.type}`:""}`,f,e.labelStyle);f+=I,await Ao(h,`${s.docRef?`Doc Ref: ${s.docRef}`:""}`,f,e.labelStyle)}const p=(((w=h.node())==null?void 0:w.getBBox().width)??200)+o,m=(((_=h.node())==null?void 0:_.getBBox().height)??200)+o,g=-p/2,y=-m/2,b=We.svg(h),x=je(e,{});e.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const T=b.rectangle(g,y,p,m,x),S=h.insert(()=>T,":first-child");if(S.attr("class","basic label-container").attr("style",n),h.selectAll(".label").each((I,N,L)=>{const D=Ft(L[N]),P=D.attr("transform");let K=0,z=0;if(P){const q=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(P);q&&(K=parseFloat(q[1]),z=parseFloat(q[2]))}const $=z-m/2;let H=g+o/2;(N===0||N===1)&&(H=K),D.attr("transform",`translate(${H}, ${$+o})`)}),f>u+d+a){const I=b.line(g,y+u+d+a,g+p,y+u+d+a,x);h.insert(()=>I).attr("style",n)}return Ke(e,S),e.intersect=function(I){return Pe.rect(e,I)},h}k(tY,"requirementBox");async function Ao(t,e,r,n=""){if(e==="")return 0;const i=t.insert("g").attr("class","label").attr("style",n),s=Jt(),o=s.htmlLabels??!0,a=await Dc(i,V9(Au(e)),{width:hl(e,s)+50,classes:"markdown-node-label",useHtmlLabels:o,style:n},s);let l;if(o){const c=a.children[0],h=Ft(a);l=c.getBoundingClientRect(),h.attr("width",l.width),h.attr("height",l.height)}else{const c=a.children[0];for(const h of c.children)h.textContent=h.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),n&&h.setAttribute("style",n);l=a.getBBox(),l.height+=6}return i.attr("transform",`translate(${-l.width/2},${-l.height/2+r})`),l.height}k(Ao,"addText");var jTe=k(t=>{switch(t){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function rY(t,e,{config:r}){var P,K;const{labelStyles:n,nodeStyles:i}=Ue(e);e.labelStyle=n||"";const s=10,o=e.width;e.width=(e.width??200)-10;const{shapeSvg:a,bbox:l,label:c}=await ft(t,e,ct(e)),h=e.padding||10;let u="",f;"ticket"in e&&e.ticket&&((P=r==null?void 0:r.kanban)!=null&&P.ticketBaseUrl)&&(u=(K=r==null?void 0:r.kanban)==null?void 0:K.ticketBaseUrl.replace("#TICKET#",e.ticket),f=a.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",u).attr("target","_blank"));const d={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1};let p,m;f?{label:p,bbox:m}=await Ck(f,"ticket"in e&&e.ticket||"",d):{label:p,bbox:m}=await Ck(a,"ticket"in e&&e.ticket||"",d);const{label:g,bbox:y}=await Ck(a,"assigned"in e&&e.assigned||"",d);e.width=o;const b=10,x=(e==null?void 0:e.width)||0,T=Math.max(m.height,y.height)/2,S=Math.max(l.height+b*2,(e==null?void 0:e.height)||0)+T,w=-x/2,_=-S/2;c.attr("transform","translate("+(h-x/2)+", "+(-T-l.height/2)+")"),p.attr("transform","translate("+(h-x/2)+", "+(-T+l.height/2)+")"),g.attr("transform","translate("+(h+x/2-y.width-2*s)+", "+(-T+l.height/2)+")");let I;const{rx:N,ry:L}=e,{cssStyles:D}=e;if(e.look==="handDrawn"){const z=We.svg(a),$=je(e,{}),H=N||L?z.path(Ic(w,_,x,S,N||0),$):z.rectangle(w,_,x,S,$);I=a.insert(()=>H,":first-child"),I.attr("class","basic label-container").attr("style",D||null)}else{I=a.insert("rect",":first-child"),I.attr("class","basic label-container __APA__").attr("style",i).attr("rx",N??5).attr("ry",L??5).attr("x",w).attr("y",_).attr("width",x).attr("height",S);const z="priority"in e&&e.priority;if(z){const $=a.append("line"),H=w+2,U=_+Math.floor((N??0)/2),q=_+S-Math.floor((N??0)/2);$.attr("x1",H).attr("y1",U).attr("x2",H).attr("y2",q).attr("stroke-width","4").attr("stroke",jTe(z))}}return Ke(e,I),e.height=S,e.intersect=function(z){return Pe.rect(e,z)},a}k(rY,"kanbanItem");async function nY(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,halfPadding:o,label:a}=await ft(t,e,ct(e)),l=s.width+10*o,c=s.height+8*o,h=.15*l,{cssStyles:u}=e,f=s.width+20,d=s.height+20,p=Math.max(l,f),m=Math.max(c,d);a.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`);let g;const y=`M0 0 
    a${h},${h} 1 0,0 ${p*.25},${-1*m*.1}
    a${h},${h} 1 0,0 ${p*.25},0
    a${h},${h} 1 0,0 ${p*.25},0
    a${h},${h} 1 0,0 ${p*.25},${m*.1}

    a${h},${h} 1 0,0 ${p*.15},${m*.33}
    a${h*.8},${h*.8} 1 0,0 0,${m*.34}
    a${h},${h} 1 0,0 ${-1*p*.15},${m*.33}

    a${h},${h} 1 0,0 ${-1*p*.25},${m*.15}
    a${h},${h} 1 0,0 ${-1*p*.25},0
    a${h},${h} 1 0,0 ${-1*p*.25},0
    a${h},${h} 1 0,0 ${-1*p*.25},${-1*m*.15}

    a${h},${h} 1 0,0 ${-1*p*.1},${-1*m*.33}
    a${h*.8},${h*.8} 1 0,0 0,${-1*m*.34}
    a${h},${h} 1 0,0 ${p*.1},${-1*m*.33}
  H0 V0 Z`;if(e.look==="handDrawn"){const b=We.svg(i),x=je(e,{}),T=b.path(y,x);g=i.insert(()=>T,":first-child"),g.attr("class","basic label-container").attr("style",Hn(u))}else g=i.insert("path",":first-child").attr("class","basic label-container").attr("style",n).attr("d",y);return g.attr("transform",`translate(${-p/2}, ${-m/2})`),Ke(e,g),e.calcIntersect=function(b,x){return Pe.rect(b,x)},e.intersect=function(b){return he.info("Bang intersect",e,b),Pe.rect(e,b)},i}k(nY,"bang");async function iY(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,halfPadding:o,label:a}=await ft(t,e,ct(e)),l=s.width+2*o,c=s.height+2*o,h=.15*l,u=.25*l,f=.35*l,d=.2*l,{cssStyles:p}=e;let m;const g=`M0 0 
    a${h},${h} 0 0,1 ${l*.25},${-1*l*.1}
    a${f},${f} 1 0,1 ${l*.4},${-1*l*.1}
    a${u},${u} 1 0,1 ${l*.35},${l*.2}

    a${h},${h} 1 0,1 ${l*.15},${c*.35}
    a${d},${d} 1 0,1 ${-1*l*.15},${c*.65}

    a${u},${h} 1 0,1 ${-1*l*.25},${l*.15}
    a${f},${f} 1 0,1 ${-1*l*.5},0
    a${h},${h} 1 0,1 ${-1*l*.25},${-1*l*.15}

    a${h},${h} 1 0,1 ${-1*l*.1},${-1*c*.35}
    a${d},${d} 1 0,1 ${l*.1},${-1*c*.65}
  H0 V0 Z`;if(e.look==="handDrawn"){const y=We.svg(i),b=je(e,{}),x=y.path(g,b);m=i.insert(()=>x,":first-child"),m.attr("class","basic label-container").attr("style",Hn(p))}else m=i.insert("path",":first-child").attr("class","basic label-container").attr("style",n).attr("d",g);return a.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`),m.attr("transform",`translate(${-l/2}, ${-c/2})`),Ke(e,m),e.calcIntersect=function(y,b){return Pe.rect(y,b)},e.intersect=function(y){return he.info("Cloud intersect",e,y),Pe.rect(e,y)},i}k(iY,"cloud");async function sY(t,e){const{labelStyles:r,nodeStyles:n}=Ue(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,halfPadding:o,label:a}=await ft(t,e,ct(e)),l=s.width+8*o,c=s.height+2*o,h=5,u=`
    M${-l/2} ${c/2-h}
    v${-c+2*h}
    q0,-${h} ${h},-${h}
    h${l-2*h}
    q${h},0 ${h},${h}
    v${c-2*h}
    q0,${h} -${h},${h}
    h${-l+2*h}
    q-${h},0 -${h},-${h}
    Z
  `,f=i.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+e.type).attr("style",n).attr("d",u);return i.append("line").attr("class","node-line-").attr("x1",-l/2).attr("y1",c/2).attr("x2",l/2).attr("y2",c/2),a.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`),i.append(()=>a.node()),Ke(e,f),e.calcIntersect=function(d,p){return Pe.rect(d,p)},e.intersect=function(d){return Pe.rect(e,d)},i}k(sY,"defaultMindmapNode");async function oY(t,e){const r={padding:e.padding??0};return ET(t,e,r)}k(oY,"mindmapCircle");var UTe=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:NK},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:BK},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:FK},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:qK},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:aK},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:ET},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:nY},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:iY},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:OK},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:pK},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:SK},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:CK},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:GK},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:wK},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:cK},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:jK},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:QG},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:RK},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:HK},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:zK},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:fK},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:mK},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:nK},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:iK},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:sK},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:TK},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:XK},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:dK},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:UK},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:_K},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:oK},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:lK},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:YK},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:ZK},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:hK},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:KK},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:uK},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:PK},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:EK},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:AK},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:ZG},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:rK},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:WK},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:VK},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:JK},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:DK},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:MK}],GTe=k(()=>{const e=[...Object.entries({state:$K,choice:eK,note:LK,rectWithTitle:IK,labelRect:kK,iconSquare:xK,iconCircle:yK,icon:gK,iconRounded:bK,imageSquare:vK,anchor:JG,kanbanItem:rY,mindmapCircle:oY,defaultMindmapNode:sY,classBox:eY,erBox:LT,requirementBox:tY}),...UTe.flatMap(r=>[r.shortName,..."aliases"in r?r.aliases:[],..."internalAliases"in r?r.internalAliases:[]].map(i=>[i,r.handler]))];return Object.fromEntries(e)},"generateShapeMap"),aY=GTe();function KTe(t){return t in aY}k(KTe,"isValidShape");var cw=new Map;async function lY(t,e,r){let n,i;e.shape==="rect"&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");const s=e.shape?aY[e.shape]:void 0;if(!s)throw new Error(`No such shape: ${e.shape}. Please check your syntax.`);if(e.link){let o;r.config.securityLevel==="sandbox"?o="_top":e.linkTarget&&(o=e.linkTarget||"_blank"),n=t.insert("svg:a").attr("xlink:href",e.link).attr("target",o??null),i=await s(n,e,r)}else i=await s(t,e,r),n=i;return e.tooltip&&i.attr("title",e.tooltip),cw.set(e.id,n),e.haveCallback&&n.attr("class",n.attr("class")+" clickable"),n}k(lY,"insertNode");var vLe=k((t,e)=>{cw.set(e.id,t)},"setNodeElem"),wLe=k(()=>{cw.clear()},"clear"),kLe=k(t=>{const e=cw.get(t.id);he.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const r=8,n=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+n-t.width/2)+", "+(t.y-t.height/2-r)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),n},"positionNode"),YTe=k((t,e,r,n,i,s)=>{e.arrowTypeStart&&bI(t,"start",e.arrowTypeStart,r,n,i,s),e.arrowTypeEnd&&bI(t,"end",e.arrowTypeEnd,r,n,i,s)},"addEdgeMarkers"),XTe={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},bI=k((t,e,r,n,i,s,o)=>{var u;const a=XTe[r];if(!a){he.warn(`Unknown arrow type: ${r}`);return}const l=a.type,h=`${i}_${s}-${l}${e==="start"?"Start":"End"}`;if(o&&o.trim()!==""){const f=o.replace(/[^\dA-Za-z]/g,"_"),d=`${h}_${f}`;if(!document.getElementById(d)){const p=document.getElementById(h);if(p){const m=p.cloneNode(!0);m.id=d,m.querySelectorAll("path, circle, line").forEach(y=>{y.setAttribute("stroke",o),a.fill&&y.setAttribute("fill",o)}),(u=p.parentNode)==null||u.appendChild(m)}}t.attr(`marker-${e}`,`url(${n}#${d})`)}else t.attr(`marker-${e}`,`url(${n}#${h})`)},"addEdgeMarker"),cv=new Map,mn=new Map,CLe=k(()=>{cv.clear(),mn.clear()},"clear"),a2=k(t=>t?t.reduce((r,n)=>r+";"+n,""):"","getLabelStyles"),JTe=k(async(t,e)=>{let r=tn(Jt().flowchart.htmlLabels);const{labelStyles:n}=Ue(e);e.labelStyle=n;const i=await Dc(t,e.label,{style:e.labelStyle,useHtmlLabels:r,addSvgBackground:!0,isNode:!1});he.info("abc82",e,e.labelType);const s=t.insert("g").attr("class","edgeLabel"),o=s.insert("g").attr("class","label").attr("data-id",e.id);o.node().appendChild(i);let a=i.getBBox();if(r){const c=i.children[0],h=Ft(i);a=c.getBoundingClientRect(),h.attr("width",a.width),h.attr("height",a.height)}o.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),cv.set(e.id,s),e.width=a.width,e.height=a.height;let l;if(e.startLabelLeft){const c=await vh(e.startLabelLeft,a2(e.labelStyle)),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");l=u.node().appendChild(c);const f=c.getBBox();u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),mn.get(e.id)||mn.set(e.id,{}),mn.get(e.id).startLeft=h,Pp(l,e.startLabelLeft)}if(e.startLabelRight){const c=await vh(e.startLabelRight,a2(e.labelStyle)),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");l=h.node().appendChild(c),u.node().appendChild(c);const f=c.getBBox();u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),mn.get(e.id)||mn.set(e.id,{}),mn.get(e.id).startRight=h,Pp(l,e.startLabelRight)}if(e.endLabelLeft){const c=await vh(e.endLabelLeft,a2(e.labelStyle)),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");l=u.node().appendChild(c);const f=c.getBBox();u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),h.node().appendChild(c),mn.get(e.id)||mn.set(e.id,{}),mn.get(e.id).endLeft=h,Pp(l,e.endLabelLeft)}if(e.endLabelRight){const c=await vh(e.endLabelRight,a2(e.labelStyle)),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");l=u.node().appendChild(c);const f=c.getBBox();u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),h.node().appendChild(c),mn.get(e.id)||mn.set(e.id,{}),mn.get(e.id).endRight=h,Pp(l,e.endLabelRight)}return i},"insertEdgeLabel");function Pp(t,e){Jt().flowchart.htmlLabels&&t&&(t.style.width=e.length*9+"px",t.style.height="12px")}k(Pp,"setTerminalWidth");var ZTe=k((t,e)=>{he.debug("Moving label abc88 ",t.id,t.label,cv.get(t.id),e);let r=e.updatedPath?e.updatedPath:e.originalPath;const n=Jt(),{subGraphTitleTotalMargin:i}=cT(n);if(t.label){const s=cv.get(t.id);let o=t.x,a=t.y;if(r){const l=Gs.calcLabelPosition(r);he.debug("Moving label "+t.label+" from (",o,",",a,") to (",l.x,",",l.y,") abc88"),e.updatedPath&&(o=l.x,a=l.y)}s.attr("transform",`translate(${o}, ${a+i/2})`)}if(t.startLabelLeft){const s=mn.get(t.id).startLeft;let o=t.x,a=t.y;if(r){const l=Gs.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",r);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(t.startLabelRight){const s=mn.get(t.id).startRight;let o=t.x,a=t.y;if(r){const l=Gs.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",r);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(t.endLabelLeft){const s=mn.get(t.id).endLeft;let o=t.x,a=t.y;if(r){const l=Gs.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",r);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(t.endLabelRight){const s=mn.get(t.id).endRight;let o=t.x,a=t.y;if(r){const l=Gs.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",r);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}},"positionEdgeLabel"),QTe=k((t,e)=>{const r=t.x,n=t.y,i=Math.abs(e.x-r),s=Math.abs(e.y-n),o=t.width/2,a=t.height/2;return i>=o||s>=a},"outsideNode"),e_e=k((t,e,r)=>{he.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const n=t.x,i=t.y,s=Math.abs(n-r.x),o=t.width/2;let a=r.x<e.x?o-s:o+s;const l=t.height/2,c=Math.abs(e.y-r.y),h=Math.abs(e.x-r.x);if(Math.abs(i-e.y)*o>Math.abs(n-e.x)*l){let u=r.y<e.y?e.y-l-i:i-l-e.y;a=h*u/c;const f={x:r.x<e.x?r.x+a:r.x-h+a,y:r.y<e.y?r.y+c-u:r.y-c+u};return a===0&&(f.x=e.x,f.y=e.y),h===0&&(f.x=e.x),c===0&&(f.y=e.y),he.debug(`abc89 top/bottom calc, Q ${c}, q ${u}, R ${h}, r ${a}`,f),f}else{r.x<e.x?a=e.x-o-n:a=n-o-e.x;let u=c*a/h,f=r.x<e.x?r.x+h-a:r.x-h+a,d=r.y<e.y?r.y+u:r.y-u;return he.debug(`sides calc abc89, Q ${c}, q ${u}, R ${h}, r ${a}`,{_x:f,_y:d}),a===0&&(f=e.x,d=e.y),h===0&&(f=e.x),c===0&&(d=e.y),{x:f,y:d}}},"intersection"),xI=k((t,e)=>{he.warn("abc88 cutPathAtIntersect",t,e);let r=[],n=t[0],i=!1;return t.forEach(s=>{if(he.info("abc88 checking point",s,e),!QTe(e,s)&&!i){const o=e_e(e,n,s);he.debug("abc88 inside",s,n,o),he.debug("abc88 intersection",o,e);let a=!1;r.forEach(l=>{a=a||l.x===o.x&&l.y===o.y}),r.some(l=>l.x===o.x&&l.y===o.y)?he.warn("abc88 no intersect",o,r):r.push(o),i=!0}else he.warn("abc88 outside",s,n),n=s,i||r.push(s)}),he.debug("returning points",r),r},"cutPathAtIntersect");function cY(t){const e=[],r=[];for(let n=1;n<t.length-1;n++){const i=t[n-1],s=t[n],o=t[n+1];(i.x===s.x&&s.y===o.y&&Math.abs(s.x-o.x)>5&&Math.abs(s.y-i.y)>5||i.y===s.y&&s.x===o.x&&Math.abs(s.x-i.x)>5&&Math.abs(s.y-o.y)>5)&&(e.push(s),r.push(n))}return{cornerPoints:e,cornerPointPositions:r}}k(cY,"extractCornerPoints");var vI=k(function(t,e,r){const n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i),o=r/s;return{x:e.x-o*n,y:e.y-o*i}},"findAdjacentPoint"),t_e=k(function(t){const{cornerPointPositions:e}=cY(t),r=[];for(let n=0;n<t.length;n++)if(e.includes(n)){const i=t[n-1],s=t[n+1],o=t[n],a=vI(i,o,5),l=vI(s,o,5),c=l.x-a.x,h=l.y-a.y;r.push(a);const u=Math.sqrt(2)*2;let f={x:o.x,y:o.y};if(Math.abs(s.x-i.x)>10&&Math.abs(s.y-i.y)>=10){he.debug("Corner point fixing",Math.abs(s.x-i.x),Math.abs(s.y-i.y));const d=5;o.x===a.x?f={x:c<0?a.x-d+u:a.x+d-u,y:h<0?a.y-u:a.y+u}:f={x:c<0?a.x-u:a.x+u,y:h<0?a.y-d+u:a.y+d-u}}else he.debug("Corner point skipping fixing",Math.abs(s.x-i.x),Math.abs(s.y-i.y));r.push(f,l)}else r.push(t[n]);return r},"fixCorners"),r_e=k((t,e,r)=>{const n=t-e-r,i=2,s=2,o=i+s,a=Math.floor(n/o),l=Array(a).fill(`${i} ${s}`).join(" ");return`0 ${e} ${l} ${r}`},"generateDashArray"),n_e=k(function(t,e,r,n,i,s,o,a=!1){var z;const{handDrawnSeed:l}=Jt();let c=e.points,h=!1;const u=i;var f=s;const d=[];for(const $ in e.cssCompiledStyles)QU($)||d.push(e.cssCompiledStyles[$]);he.debug("UIO intersect check",e.points,f.x,u.x),f.intersect&&u.intersect&&!a&&(c=c.slice(1,e.points.length-1),c.unshift(u.intersect(c[0])),he.debug("Last point UIO",e.start,"-->",e.end,c[c.length-1],f,f.intersect(c[c.length-1])),c.push(f.intersect(c[c.length-1])));const p=btoa(JSON.stringify(c));e.toCluster&&(he.info("to cluster abc88",r.get(e.toCluster)),c=xI(e.points,r.get(e.toCluster).node),h=!0),e.fromCluster&&(he.debug("from cluster abc88",r.get(e.fromCluster),JSON.stringify(c,null,2)),c=xI(c.reverse(),r.get(e.fromCluster).node).reverse(),h=!0);let m=c.filter($=>!Number.isNaN($.y));m=t_e(m);let g=vb;switch(g=Wx,e.curve){case"linear":g=Wx;break;case"basis":g=vb;break;case"cardinal":g=nj;break;case"bumpX":g=ZW;break;case"bumpY":g=QW;break;case"catmullRom":g=sj;break;case"monotoneX":g=uj;break;case"monotoneY":g=fj;break;case"natural":g=pj;break;case"step":g=mj;break;case"stepAfter":g=yj;break;case"stepBefore":g=gj;break;default:g=vb}const{x:y,y:b}=A8e(e),x=uSe().x(y).y(b).curve(g);let T;switch(e.thickness){case"normal":T="edge-thickness-normal";break;case"thick":T="edge-thickness-thick";break;case"invisible":T="edge-thickness-invisible";break;default:T="edge-thickness-normal"}switch(e.pattern){case"solid":T+=" edge-pattern-solid";break;case"dotted":T+=" edge-pattern-dotted";break;case"dashed":T+=" edge-pattern-dashed";break;default:T+=" edge-pattern-solid"}let S,w=e.curve==="rounded"?hY(uY(m,e),5):x(m);const _=Array.isArray(e.style)?e.style:[e.style];let I=_.find($=>$==null?void 0:$.startsWith("stroke:")),N=!1;if(e.look==="handDrawn"){const $=We.svg(t);Object.assign([],m);const H=$.path(w,{roughness:.3,seed:l});T+=" transition",S=Ft(H).select("path").attr("id",e.id).attr("class"," "+T+(e.classes?" "+e.classes:"")).attr("style",_?_.reduce((q,re)=>q+";"+re,""):"");let U=S.attr("d");S.attr("d",U),t.node().appendChild(S.node())}else{const $=d.join(";"),H=_?_.reduce((O,et)=>O+et+";",""):"";let U="";e.animate&&(U=" edge-animation-fast"),e.animation&&(U=" edge-animation-"+e.animation);const q=($?$+";"+H+";":H)+";"+(_?_.reduce((O,et)=>O+";"+et,""):"");S=t.append("path").attr("d",w).attr("id",e.id).attr("class"," "+T+(e.classes?" "+e.classes:"")+(U??"")).attr("style",q),I=(z=q.match(/stroke:([^;]+)/))==null?void 0:z[1],N=e.animate===!0||!!e.animation||$.includes("animation");const re=S.node(),E=typeof re.getTotalLength=="function"?re.getTotalLength():0,de=XD[e.arrowTypeStart]||0,Te=XD[e.arrowTypeEnd]||0;if(e.look==="neo"&&!N){const et=`stroke-dasharray: ${e.pattern==="dotted"||e.pattern==="dashed"?r_e(E,de,Te):`0 ${de} ${E-de-Te} ${Te}`}; stroke-dashoffset: 0;`;S.attr("style",et+S.attr("style"))}}S.attr("data-edge",!0),S.attr("data-et","edge"),S.attr("data-id",e.id),S.attr("data-points",p),e.showPoints&&m.forEach($=>{t.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",$.x).attr("cy",$.y)});let L="";(Jt().flowchart.arrowMarkerAbsolute||Jt().state.arrowMarkerAbsolute)&&(L=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,L=L.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),he.info("arrowTypeStart",e.arrowTypeStart),he.info("arrowTypeEnd",e.arrowTypeEnd),YTe(S,e,L,o,n,I);const D=Math.floor(c.length/2),P=c[D];Gs.isLabelCoordinateInPath(P,S.attr("d"))||(h=!0);let K={};return h&&(K.updatedPath=c),K.originalPath=e.points,K},"insertEdge");function hY(t,e){if(t.length<2)return"";let r="";const n=t.length,i=1e-5;for(let s=0;s<n;s++){const o=t[s],a=t[s-1],l=t[s+1];if(s===0)r+=`M${o.x},${o.y}`;else if(s===n-1)r+=`L${o.x},${o.y}`;else{const c=o.x-a.x,h=o.y-a.y,u=l.x-o.x,f=l.y-o.y,d=Math.hypot(c,h),p=Math.hypot(u,f);if(d<i||p<i){r+=`L${o.x},${o.y}`;continue}const m=c/d,g=h/d,y=u/p,b=f/p,x=m*y+g*b,T=Math.max(-1,Math.min(1,x)),S=Math.acos(T);if(S<i||Math.abs(Math.PI-S)<i){r+=`L${o.x},${o.y}`;continue}const w=Math.min(e/Math.sin(S/2),d/2,p/2),_=o.x-m*w,I=o.y-g*w,N=o.x+y*w,L=o.y+b*w;r+=`L${_},${I}`,r+=`Q${o.x},${o.y} ${N},${L}`}}return r}k(hY,"generateRoundedPath");function G6(t,e){if(!t||!e)return{angle:0,deltaX:0,deltaY:0};const r=e.x-t.x,n=e.y-t.y;return{angle:Math.atan2(n,r),deltaX:r,deltaY:n}}k(G6,"calculateDeltaAndAngle");function uY(t,e){const r=t.map(i=>({...i}));if(t.length>=2&&En[e.arrowTypeStart]){const i=En[e.arrowTypeStart],s=t[0],o=t[1],{angle:a}=G6(s,o),l=i*Math.cos(a),c=i*Math.sin(a);r[0].x=s.x+l,r[0].y=s.y+c}const n=t.length;if(n>=2&&En[e.arrowTypeEnd]){const i=En[e.arrowTypeEnd],s=t[n-1],o=t[n-2],{angle:a}=G6(o,s),l=i*Math.cos(a),c=i*Math.sin(a);r[n-1].x=s.x-l,r[n-1].y=s.y-c}return r}k(uY,"applyMarkerOffsetsToPoints");var i_e=k((t,e,r,n)=>{e.forEach(i=>{v_e[i](t,r,n)})},"insertMarkers"),s_e=k((t,e,r)=>{he.trace("Making markers for ",r),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),o_e=k((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),a_e=k((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),l_e=k((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),c_e=k((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),h_e=k((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),u_e=k((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),f_e=k((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),d_e=k((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),p_e=k((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-onlyOneStart").attr("class","marker onlyOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",r+"_"+e+"-onlyOneEnd").attr("class","marker onlyOne "+e).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),m_e=k((t,e,r)=>{const n=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrOneStart").attr("class","marker zeroOrOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),n.append("path").attr("d","M9,0 L9,18");const i=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+e).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),i.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),g_e=k((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-oneOrMoreStart").attr("class","marker oneOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",r+"_"+e+"-oneOrMoreEnd").attr("class","marker oneOrMore "+e).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),y_e=k((t,e,r)=>{const n=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),n.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const i=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+e).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),i.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),b_e=k((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),x_e=k((t,e,r)=>{const n=t.append("defs").append("marker").attr("id",r+"_"+e+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");n.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),n.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),n.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),v_e={extension:s_e,composition:o_e,aggregation:a_e,dependency:l_e,lollipop:c_e,point:h_e,circle:u_e,cross:f_e,barb:d_e,only_one:p_e,zero_or_one:m_e,one_or_more:g_e,zero_or_more:y_e,requirement_arrow:b_e,requirement_contains:x_e},w_e=i_e,k_e={common:r0,getConfig:$n,insertCluster:LTe,insertEdge:n_e,insertEdgeLabel:JTe,insertMarkers:w_e,insertNode:lY,interpolateToCurve:uT,labelHelper:ft,log:he,positionEdgeLabel:ZTe},Tg={},fY=k(t=>{for(const e of t)Tg[e.name]=e},"registerLayoutLoaders"),C_e=k(()=>{fY([{name:"dagre",loader:k(async()=>await X(()=>import("./dagre-6UL2VRFP-xoj5m8pJ.js"),__vite__mapDeps([29,30,31,32,33,34,2])),"loader")},{name:"cose-bilkent",loader:k(async()=>await X(()=>import("./cose-bilkent-S5V4N54A-BlYGH6Ua.js"),__vite__mapDeps([35,36,2])),"loader")}])},"registerDefaultLayoutLoaders");C_e();var SLe=k(async(t,e)=>{if(!(t.layoutAlgorithm in Tg))throw new Error(`Unknown layout algorithm: ${t.layoutAlgorithm}`);const r=Tg[t.layoutAlgorithm];return(await r.loader()).render(t,e,k_e,{algorithm:r.algorithm})},"render"),TLe=k((t="",{fallback:e="dagre"}={})=>{if(t in Tg)return t;if(e in Tg)return he.warn(`Layout algorithm ${t} is not registered. Using ${e} as fallback.`),e;throw new Error(`Both layout algorithms ${t} and ${e} are not registered.`)},"getRegisteredLayoutAlgorithm"),dY="comm",pY="rule",mY="decl",S_e="@import",T_e="@namespace",__e="@keyframes",M_e="@layer",gY=Math.abs,OT=String.fromCharCode;function yY(t){return t.trim()}function Tb(t,e,r){return t.replace(e,r)}function A_e(t,e,r){return t.indexOf(e,r)}function Tf(t,e){return t.charCodeAt(e)|0}function Rd(t,e,r){return t.slice(e,r)}function Do(t){return t.length}function E_e(t){return t.length}function l2(t,e){return e.push(t),t}var hw=1,Pd=1,bY=0,Os=0,Vr=0,s0="";function DT(t,e,r,n,i,s,o,a){return{value:t,root:e,parent:r,type:n,props:i,children:s,line:hw,column:Pd,length:o,return:"",siblings:a}}function L_e(){return Vr}function O_e(){return Vr=Os>0?Tf(s0,--Os):0,Pd--,Vr===10&&(Pd=1,hw--),Vr}function to(){return Vr=Os<bY?Tf(s0,Os++):0,Pd++,Vr===10&&(Pd=1,hw++),Vr}function Jl(){return Tf(s0,Os)}function _b(){return Os}function uw(t,e){return Rd(s0,t,e)}function _g(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function D_e(t){return hw=Pd=1,bY=Do(s0=t),Os=0,[]}function I_e(t){return s0="",t}function Sk(t){return yY(uw(Os-1,K6(t===91?t+2:t===40?t+1:t)))}function B_e(t){for(;(Vr=Jl())&&Vr<33;)to();return _g(t)>2||_g(Vr)>3?"":" "}function R_e(t,e){for(;--e&&to()&&!(Vr<48||Vr>102||Vr>57&&Vr<65||Vr>70&&Vr<97););return uw(t,_b()+(e<6&&Jl()==32&&to()==32))}function K6(t){for(;to();)switch(Vr){case t:return Os;case 34:case 39:t!==34&&t!==39&&K6(Vr);break;case 40:t===41&&K6(t);break;case 92:to();break}return Os}function P_e(t,e){for(;to()&&t+Vr!==57;)if(t+Vr===84&&Jl()===47)break;return"/*"+uw(e,Os-1)+"*"+OT(t===47?t:to())}function N_e(t){for(;!_g(Jl());)to();return uw(t,Os)}function F_e(t){return I_e(Mb("",null,null,null,[""],t=D_e(t),0,[0],t))}function Mb(t,e,r,n,i,s,o,a,l){for(var c=0,h=0,u=o,f=0,d=0,p=0,m=1,g=1,y=1,b=0,x="",T=i,S=s,w=n,_=x;g;)switch(p=b,b=to()){case 40:if(p!=108&&Tf(_,u-1)==58){A_e(_+=Tb(Sk(b),"&","&\f"),"&\f",gY(c?a[c-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:_+=Sk(b);break;case 9:case 10:case 13:case 32:_+=B_e(p);break;case 92:_+=R_e(_b()-1,7);continue;case 47:switch(Jl()){case 42:case 47:l2($_e(P_e(to(),_b()),e,r,l),l),(_g(p||1)==5||_g(Jl()||1)==5)&&Do(_)&&Rd(_,-1,void 0)!==" "&&(_+=" ");break;default:_+="/"}break;case 123*m:a[c++]=Do(_)*y;case 125*m:case 59:case 0:switch(b){case 0:case 125:g=0;case 59+h:y==-1&&(_=Tb(_,/\f/g,"")),d>0&&(Do(_)-u||m===0&&p===47)&&l2(d>32?kI(_+";",n,r,u-1,l):kI(Tb(_," ","")+";",n,r,u-2,l),l);break;case 59:_+=";";default:if(l2(w=wI(_,e,r,c,h,i,a,x,T=[],S=[],u,s),s),b===123)if(h===0)Mb(_,e,w,w,T,s,u,a,S);else{switch(f){case 99:if(Tf(_,3)===110)break;case 108:if(Tf(_,2)===97)break;default:h=0;case 100:case 109:case 115:}h?Mb(t,w,w,n&&l2(wI(t,w,w,0,0,i,a,x,i,T=[],u,S),S),i,S,u,a,n?T:S):Mb(_,w,w,w,[""],S,0,a,S)}}c=h=d=0,m=y=1,x=_="",u=o;break;case 58:u=1+Do(_),d=p;default:if(m<1){if(b==123)--m;else if(b==125&&m++==0&&O_e()==125)continue}switch(_+=OT(b),b*m){case 38:y=h>0?1:(_+="\f",-1);break;case 44:a[c++]=(Do(_)-1)*y,y=1;break;case 64:Jl()===45&&(_+=Sk(to())),f=Jl(),h=u=Do(x=_+=N_e(_b())),b++;break;case 45:p===45&&Do(_)==2&&(m=0)}}return s}function wI(t,e,r,n,i,s,o,a,l,c,h,u){for(var f=i-1,d=i===0?s:[""],p=E_e(d),m=0,g=0,y=0;m<n;++m)for(var b=0,x=Rd(t,f+1,f=gY(g=o[m])),T=t;b<p;++b)(T=yY(g>0?d[b]+" "+x:Tb(x,/&\f/g,d[b])))&&(l[y++]=T);return DT(t,e,r,i===0?pY:a,l,c,h,u)}function $_e(t,e,r,n){return DT(t,e,r,dY,OT(L_e()),Rd(t,2,-2),0,n)}function kI(t,e,r,n,i){return DT(t,e,r,mY,Rd(t,0,n),Rd(t,n+1,-1),n,i)}function Y6(t,e){for(var r="",n=0;n<t.length;n++)r+=e(t[n],n,t,e)||"";return r}function z_e(t,e,r,n){switch(t.type){case M_e:if(t.children.length)break;case S_e:case T_e:case mY:return t.return=t.return||t.value;case dY:return"";case __e:return t.return=t.value+"{"+Y6(t.children,n)+"}";case pY:if(!Do(t.value=t.props.join(",")))return""}return Do(r=Y6(t.children,n))?t.return=t.value+"{"+r+"}":""}var xY="c4",H_e=k(t=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(t),"detector"),q_e=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./c4Diagram-YG6GDRKO-DhRm752C.js");return{diagram:e}},__vite__mapDeps([37,38,2]));return{id:xY,diagram:t}},"loader"),V_e={id:xY,detector:H_e,loader:q_e},W_e=V_e,vY="flowchart",j_e=k((t,e)=>{var r,n;return((r=e==null?void 0:e.flowchart)==null?void 0:r.defaultRenderer)==="dagre-wrapper"||((n=e==null?void 0:e.flowchart)==null?void 0:n.defaultRenderer)==="elk"?!1:/^\s*graph/.test(t)},"detector"),U_e=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./flowDiagram-NV44I4VS-CCGKKyJ4.js");return{diagram:e}},__vite__mapDeps([39,40,41,42,43,2]));return{id:vY,diagram:t}},"loader"),G_e={id:vY,detector:j_e,loader:U_e},K_e=G_e,wY="flowchart-v2",Y_e=k((t,e)=>{var r,n,i;return((r=e==null?void 0:e.flowchart)==null?void 0:r.defaultRenderer)==="dagre-d3"?!1:(((n=e==null?void 0:e.flowchart)==null?void 0:n.defaultRenderer)==="elk"&&(e.layout="elk"),/^\s*graph/.test(t)&&((i=e==null?void 0:e.flowchart)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(t))},"detector"),X_e=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./flowDiagram-NV44I4VS-CCGKKyJ4.js");return{diagram:e}},__vite__mapDeps([39,40,41,42,43,2]));return{id:wY,diagram:t}},"loader"),J_e={id:wY,detector:Y_e,loader:X_e},Z_e=J_e,kY="er",Q_e=k(t=>/^\s*erDiagram/.test(t),"detector"),eMe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./erDiagram-Q2GNP2WA-DNb-NC3s.js");return{diagram:e}},__vite__mapDeps([44,41,42,43,2]));return{id:kY,diagram:t}},"loader"),tMe={id:kY,detector:Q_e,loader:eMe},rMe=tMe,CY="gitGraph",nMe=k(t=>/^\s*gitGraph/.test(t),"detector"),iMe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./gitGraphDiagram-NY62KEGX-BA0vGsGC.js");return{diagram:e}},__vite__mapDeps([45,46,47,48,31,33,34,2]));return{id:CY,diagram:t}},"loader"),sMe={id:CY,detector:nMe,loader:iMe},oMe=sMe,SY="gantt",aMe=k(t=>/^\s*gantt/.test(t),"detector"),lMe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./ganttDiagram-JELNMOA3-DJ9s-RGg.js");return{diagram:e}},__vite__mapDeps([49,50,51,52,2]));return{id:SY,diagram:t}},"loader"),cMe={id:SY,detector:aMe,loader:lMe},hMe=cMe,TY="info",uMe=k(t=>/^\s*info/.test(t),"detector"),fMe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./infoDiagram-WHAUD3N6-B_mLOX_z.js");return{diagram:e}},__vite__mapDeps([53,48,31,33,34,2]));return{id:TY,diagram:t}},"loader"),dMe={id:TY,detector:uMe,loader:fMe},_Y="pie",pMe=k(t=>/^\s*pie/.test(t),"detector"),mMe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./pieDiagram-ADFJNKIX-Bmzuhxwb.js");return{diagram:e}},__vite__mapDeps([54,46,48,31,33,34,55,56,51,2]));return{id:_Y,diagram:t}},"loader"),gMe={id:_Y,detector:pMe,loader:mMe},MY="quadrantChart",yMe=k(t=>/^\s*quadrantChart/.test(t),"detector"),bMe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./quadrantDiagram-AYHSOK5B-q-UKUj8w.js");return{diagram:e}},__vite__mapDeps([57,50,51,52,2]));return{id:MY,diagram:t}},"loader"),xMe={id:MY,detector:yMe,loader:bMe},vMe=xMe,AY="xychart",wMe=k(t=>/^\s*xychart(-beta)?/.test(t),"detector"),kMe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./xychartDiagram-PRI3JC2R-b7vSs4aW.js");return{diagram:e}},__vite__mapDeps([58,51,56,50,52,2]));return{id:AY,diagram:t}},"loader"),CMe={id:AY,detector:wMe,loader:kMe},SMe=CMe,EY="requirement",TMe=k(t=>/^\s*requirement(Diagram)?/.test(t),"detector"),_Me=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./requirementDiagram-UZGBJVZJ-oOeduwhT.js");return{diagram:e}},__vite__mapDeps([59,41,42,2]));return{id:EY,diagram:t}},"loader"),MMe={id:EY,detector:TMe,loader:_Me},AMe=MMe,LY="sequence",EMe=k(t=>/^\s*sequenceDiagram/.test(t),"detector"),LMe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./sequenceDiagram-WL72ISMW-B_-co07h.js");return{diagram:e}},__vite__mapDeps([60,38,47,2]));return{id:LY,diagram:t}},"loader"),OMe={id:LY,detector:EMe,loader:LMe},DMe=OMe,OY="class",IMe=k((t,e)=>{var r;return((r=e==null?void 0:e.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(t)},"detector"),BMe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./classDiagram-2ON5EDUG-CFsY5O2j.js");return{diagram:e}},__vite__mapDeps([61,62,40,41,42,2]));return{id:OY,diagram:t}},"loader"),RMe={id:OY,detector:IMe,loader:BMe},PMe=RMe,DY="classDiagram",NMe=k((t,e)=>{var r;return/^\s*classDiagram/.test(t)&&((r=e==null?void 0:e.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(t)},"detector"),FMe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./classDiagram-v2-WZHVMYZB-CFsY5O2j.js");return{diagram:e}},__vite__mapDeps([63,62,40,41,42,2]));return{id:DY,diagram:t}},"loader"),$Me={id:DY,detector:NMe,loader:FMe},zMe=$Me,IY="state",HMe=k((t,e)=>{var r;return((r=e==null?void 0:e.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(t)},"detector"),qMe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./stateDiagram-FKZM4ZOC-DKiImlSk.js");return{diagram:e}},__vite__mapDeps([64,65,41,42,30,31,32,33,2]));return{id:IY,diagram:t}},"loader"),VMe={id:IY,detector:HMe,loader:qMe},WMe=VMe,BY="stateDiagram",jMe=k((t,e)=>{var r;return!!(/^\s*stateDiagram-v2/.test(t)||/^\s*stateDiagram/.test(t)&&((r=e==null?void 0:e.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper")},"detector"),UMe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./stateDiagram-v2-4FDKWEC3-CCgGuC_l.js");return{diagram:e}},__vite__mapDeps([66,65,41,42,2]));return{id:BY,diagram:t}},"loader"),GMe={id:BY,detector:jMe,loader:UMe},KMe=GMe,RY="journey",YMe=k(t=>/^\s*journey/.test(t),"detector"),XMe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./journeyDiagram-XKPGCS4Q-B8zXjuzs.js");return{diagram:e}},__vite__mapDeps([67,38,40,55,2]));return{id:RY,diagram:t}},"loader"),JMe={id:RY,detector:YMe,loader:XMe},ZMe=JMe,QMe=k((t,e,r)=>{he.debug(`rendering svg for syntax error
`);const n=vSe(e),i=n.append("g");n.attr("viewBox","0 0 2412 512"),wW(n,100,512,!0),i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw"),PY={draw:QMe},eAe=PY,tAe={db:{},renderer:PY,parser:{parse:k(()=>{},"parse")}},rAe=tAe,NY="flowchart-elk",nAe=k((t,e={})=>{var r;return/^\s*flowchart-elk/.test(t)||/^\s*(flowchart|graph)/.test(t)&&((r=e==null?void 0:e.flowchart)==null?void 0:r.defaultRenderer)==="elk"?(e.layout="elk",!0):!1},"detector"),iAe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./flowDiagram-NV44I4VS-CCGKKyJ4.js");return{diagram:e}},__vite__mapDeps([39,40,41,42,43,2]));return{id:NY,diagram:t}},"loader"),sAe={id:NY,detector:nAe,loader:iAe},oAe=sAe,FY="timeline",aAe=k(t=>/^\s*timeline/.test(t),"detector"),lAe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./timeline-definition-IT6M3QCI-BQI99iyp.js");return{diagram:e}},__vite__mapDeps([68,55,2]));return{id:FY,diagram:t}},"loader"),cAe={id:FY,detector:aAe,loader:lAe},hAe=cAe,$Y="mindmap",uAe=k(t=>/^\s*mindmap/.test(t),"detector"),fAe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./mindmap-definition-VGOIOE7T-QRqLP6gO.js");return{diagram:e}},__vite__mapDeps([69,41,42,2]));return{id:$Y,diagram:t}},"loader"),dAe={id:$Y,detector:uAe,loader:fAe},pAe=dAe,zY="kanban",mAe=k(t=>/^\s*kanban/.test(t),"detector"),gAe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./kanban-definition-3W4ZIXB7-CMiRr_zt.js");return{diagram:e}},__vite__mapDeps([70,40,2]));return{id:zY,diagram:t}},"loader"),yAe={id:zY,detector:mAe,loader:gAe},bAe=yAe,HY="sankey",xAe=k(t=>/^\s*sankey(-beta)?/.test(t),"detector"),vAe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./sankeyDiagram-TZEHDZUN-Bs2_qQED.js");return{diagram:e}},__vite__mapDeps([71,56,51,2]));return{id:HY,diagram:t}},"loader"),wAe={id:HY,detector:xAe,loader:vAe},kAe=wAe,qY="packet",CAe=k(t=>/^\s*packet(-beta)?/.test(t),"detector"),SAe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./diagram-S2PKOQOG-CuIAxAiW.js");return{diagram:e}},__vite__mapDeps([72,46,48,31,33,34,2]));return{id:qY,diagram:t}},"loader"),TAe={id:qY,detector:CAe,loader:SAe},VY="radar",_Ae=k(t=>/^\s*radar-beta/.test(t),"detector"),MAe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./diagram-QEK2KX5R-9AwnJ8OD.js");return{diagram:e}},__vite__mapDeps([73,46,48,31,33,34,2]));return{id:VY,diagram:t}},"loader"),AAe={id:VY,detector:_Ae,loader:MAe},WY="block",EAe=k(t=>/^\s*block(-beta)?/.test(t),"detector"),LAe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./blockDiagram-VD42YOAC-Q0OVLKMP.js");return{diagram:e}},__vite__mapDeps([74,40,34,31,30,43,2]));return{id:WY,diagram:t}},"loader"),OAe={id:WY,detector:EAe,loader:LAe},DAe=OAe,jY="architecture",IAe=k(t=>/^\s*architecture/.test(t),"detector"),BAe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./architectureDiagram-VXUJARFQ-DDas4UQQ.js");return{diagram:e}},__vite__mapDeps([75,46,48,31,33,34,36,2]));return{id:jY,diagram:t}},"loader"),RAe={id:jY,detector:IAe,loader:BAe},PAe=RAe,UY="treemap",NAe=k(t=>/^\s*treemap/.test(t),"detector"),FAe=k(async()=>{const{diagram:t}=await X(async()=>{const{diagram:e}=await import("./diagram-PSM6KHXK-AodemfoS.js");return{diagram:e}},__vite__mapDeps([76,42,46,48,31,33,34,52,56,51,2]));return{id:UY,diagram:t}},"loader"),$Ae={id:UY,detector:NAe,loader:FAe},CI=!1,fw=k(()=>{CI||(CI=!0,Nx("error",rAe,t=>t.toLowerCase().trim()==="error"),Nx("---",{db:{clear:k(()=>{},"clear")},styles:{},renderer:{draw:k(()=>{},"draw")},parser:{parse:k(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:k(()=>null,"init")},t=>t.toLowerCase().trimStart().startsWith("---")),l6(oAe,pAe,PAe),l6(W_e,bAe,zMe,PMe,rMe,hMe,dMe,gMe,AMe,DMe,Z_e,K_e,hAe,oMe,KMe,WMe,ZMe,vMe,kAe,TAe,SMe,DAe,AAe,$Ae))},"addDiagrams"),zAe=k(async()=>{he.debug("Loading registered diagrams");const e=(await Promise.allSettled(Object.entries(hu).map(async([r,{detector:n,loader:i}])=>{if(i)try{f6(r)}catch{try{const{diagram:s,id:o}=await i();Nx(o,s,n)}catch(s){throw he.error(`Failed to load external diagram with key ${r}. Removing from detectors.`),delete hu[r],s}}}))).filter(r=>r.status==="rejected");if(e.length>0){he.error(`Failed to load ${e.length} external diagrams`);for(const r of e)he.error(r);throw new Error(`Failed to load ${e.length} external diagrams`)}},"loadRegisteredDiagrams"),HAe="graphics-document document";function GY(t,e){t.attr("role",HAe),e!==""&&t.attr("aria-roledescription",e)}k(GY,"setA11yDiagramInfo");function KY(t,e,r,n){if(t.insert!==void 0){if(r){const i=`chart-desc-${n}`;t.attr("aria-describedby",i),t.insert("desc",":first-child").attr("id",i).text(r)}if(e){const i=`chart-title-${n}`;t.attr("aria-labelledby",i),t.insert("title",":first-child").attr("id",i).text(e)}}}k(KY,"addSVGa11yTitleDescription");var Gh,X6=(Gh=class{constructor(e,r,n,i,s){this.type=e,this.text=r,this.db=n,this.parser=i,this.renderer=s}static async fromText(e,r={}){var c,h;const n=$n(),i=N9(e,n);e=Q8e(e)+`
`;try{f6(i)}catch{const u=Xke(i);if(!u)throw new cW(`Diagram ${i} not found.`);const{id:f,diagram:d}=await u();Nx(f,d)}const{db:s,parser:o,renderer:a,init:l}=f6(i);return o.parser&&(o.parser.yy=s),(c=s.clear)==null||c.call(s),l==null||l(n),r.title&&((h=s.setDiagramTitle)==null||h.call(s,r.title)),await o.parse(e),new Gh(i,e,s,o,a)}async render(e,r){await this.renderer.draw(this.text,e,r,this)}getParser(){return this.parser}getType(){return this.type}},k(Gh,"Diagram"),Gh),SI=[],qAe=k(()=>{SI.forEach(t=>{t()}),SI=[]},"attachFunctions"),VAe=k(t=>t.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function YY(t){const e=t.match(lW);if(!e)return{text:t,metadata:{}};let r=M8e(e[1],{schema:_8e})??{};r=typeof r=="object"&&!Array.isArray(r)?r:{};const n={};return r.displayMode&&(n.displayMode=r.displayMode.toString()),r.title&&(n.title=r.title.toString()),r.config&&(n.config=r.config),{text:t.slice(e[0].length),metadata:n}}k(YY,"extractFrontMatter");var WAe=k(t=>t.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(e,r,n)=>"<"+r+n.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),jAe=k(t=>{const{text:e,metadata:r}=YY(t),{displayMode:n,title:i,config:s={}}=r;return n&&(s.gantt||(s.gantt={}),s.gantt.displayMode=n),{title:i,config:s,text:e}},"processFrontmatter"),UAe=k(t=>{const e=Gs.detectInit(t)??{},r=Gs.detectDirective(t,"wrap");return Array.isArray(r)?e.wrap=r.some(({type:n})=>n==="wrap"):(r==null?void 0:r.type)==="wrap"&&(e.wrap=!0),{text:z8e(t),directive:e}},"processDirectives");function IT(t){const e=WAe(t),r=jAe(e),n=UAe(r.text),i=gT(r.config,n.directive);return t=VAe(n.text),{code:t,title:r.title,config:i}}k(IT,"preprocessDiagram");function XY(t){const e=new TextEncoder().encode(t),r=Array.from(e,n=>String.fromCodePoint(n)).join("");return btoa(r)}k(XY,"toBase64");var GAe=5e4,KAe="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",YAe="sandbox",XAe="loose",JAe="http://www.w3.org/2000/svg",ZAe="http://www.w3.org/1999/xlink",QAe="http://www.w3.org/1999/xhtml",eEe="100%",tEe="100%",rEe="border:0;margin:0;",nEe="margin:0",iEe="allow-top-navigation-by-user-activation allow-popups",sEe='The "iframe" tag is not supported by your browser.',oEe=["foreignobject"],aEe=["dominant-baseline"];function BT(t){const e=IT(t);return Rx(),f3e(e.config??{}),e}k(BT,"processAndSetConfigs");async function JY(t,e){fw();try{const{code:r,config:n}=BT(t);return{diagramType:(await QY(r)).type,config:n}}catch(r){if(e!=null&&e.suppressErrors)return!1;throw r}}k(JY,"parse");var TI=k((t,e,r=[])=>`
.${t} ${e} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),lEe=k((t,e=new Map)=>{var n;let r="";if(t.themeCSS!==void 0&&(r+=`
${t.themeCSS}`),t.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${t.fontFamily}}`),t.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),e instanceof Map){const a=t.htmlLabels??((n=t.flowchart)==null?void 0:n.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];e.forEach(l=>{f_(l.styles)||a.forEach(c=>{r+=TI(l.id,c,l.styles)}),f_(l.textStyles)||(r+=TI(l.id,"tspan",((l==null?void 0:l.textStyles)||[]).map(c=>c.replace("color","fill"))))})}return r},"createCssStyles"),cEe=k((t,e,r,n)=>{const i=lEe(t,r),s=D3e(e,i,t.themeVariables);return Y6(F_e(`${n}{${s}}`),z_e)},"createUserStyles"),hEe=k((t="",e,r)=>{let n=t;return!r&&!e&&(n=n.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),n=Au(n),n=n.replace(/<br>/g,"<br/>"),n},"cleanUpSvgCode"),uEe=k((t="",e)=>{var i,s;const r=(s=(i=e==null?void 0:e.viewBox)==null?void 0:i.baseVal)!=null&&s.height?e.viewBox.baseVal.height+"px":tEe,n=XY(`<body style="${nEe}">${t}</body>`);return`<iframe style="width:${eEe};height:${r};${rEe}" src="data:text/html;charset=UTF-8;base64,${n}" sandbox="${iEe}">
  ${sEe}
</iframe>`},"putIntoIFrame"),_I=k((t,e,r,n,i)=>{const s=t.append("div");s.attr("id",r),n&&s.attr("style",n);const o=s.append("svg").attr("id",e).attr("width","100%").attr("xmlns",JAe);return i&&o.attr("xmlns:xlink",i),o.append("g"),t},"appendDivSvgG");function J6(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}k(J6,"sandboxedIframe");var fEe=k((t,e,r,n)=>{var i,s,o;(i=t.getElementById(e))==null||i.remove(),(s=t.getElementById(r))==null||s.remove(),(o=t.getElementById(n))==null||o.remove()},"removeExistingElements"),dEe=k(async function(t,e,r){var P,K,z,$,H,U;fw();const n=BT(e);e=n.code;const i=$n();he.debug(i),e.length>((i==null?void 0:i.maxTextSize)??GAe)&&(e=KAe);const s="#"+t,o="i"+t,a="#"+o,l="d"+t,c="#"+l,h=k(()=>{const re=Ft(f?a:c).node();re&&"remove"in re&&re.remove()},"removeTempElements");let u=Ft("body");const f=i.securityLevel===YAe,d=i.securityLevel===XAe,p=i.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),f){const q=J6(Ft(r),o);u=Ft(q.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=Ft(r);_I(u,t,l,`font-family: ${p}`,ZAe)}else{if(fEe(document,t,l,o),f){const q=J6(Ft("body"),o);u=Ft(q.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=Ft("body");_I(u,t,l)}let m,g;try{m=await X6.fromText(e,{title:n.title})}catch(q){if(i.suppressErrorRendering)throw h(),q;m=await X6.fromText("error"),g=q}const y=u.select(c).node(),b=m.type,x=y.firstChild,T=x.firstChild,S=(K=(P=m.renderer).getClasses)==null?void 0:K.call(P,e,m),w=cEe(i,b,S,s),_=document.createElement("style");_.innerHTML=w,x.insertBefore(_,T);try{await m.renderer.draw(e,t,vD.version,m)}catch(q){throw i.suppressErrorRendering?h():eAe.draw(e,t,vD.version),q}const I=u.select(`${c} svg`),N=($=(z=m.db).getAccTitle)==null?void 0:$.call(z),L=(U=(H=m.db).getAccDescription)==null?void 0:U.call(H);eX(b,I,N,L),u.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",QAe);let D=u.select(c).node().innerHTML;if(he.debug("config.arrowMarkerAbsolute",i.arrowMarkerAbsolute),D=hEe(D,f,tn(i.arrowMarkerAbsolute)),f){const q=u.select(c+" svg").node();D=uEe(D,q)}else d||(D=cn.sanitize(D,{ADD_TAGS:oEe,ADD_ATTR:aEe,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(qAe(),g)throw g;return h(),{diagramType:b,svg:D,bindFunctions:m.db.bindFunctions}},"render");function ZY(t={}){var n;const e=Zr({},t);e!=null&&e.fontFamily&&!((n=e.themeVariables)!=null&&n.fontFamily)&&(e.themeVariables||(e.themeVariables={}),e.themeVariables.fontFamily=e.fontFamily),h3e(e),e!=null&&e.theme&&e.theme in Xa?e.themeVariables=Xa[e.theme].getThemeVariables(e.themeVariables):e&&(e.themeVariables=Xa.default.getThemeVariables(e.themeVariables));const r=typeof e=="object"?c3e(e):pW();P9(r.logLevel),fw()}k(ZY,"initialize");var QY=k((t,e={})=>{const{code:r}=IT(t);return X6.fromText(r,e)},"getDiagramFromText");function eX(t,e,r,n){GY(e,t),KY(e,r,n,e.attr("id"))}k(eX,"addA11yInfo");var mu=Object.freeze({render:dEe,parse:JY,getDiagramFromText:QY,initialize:ZY,getConfig:$n,setConfig:mW,getSiteConfig:pW,updateSiteConfig:u3e,reset:k(()=>{Rx()},"reset"),globalReset:k(()=>{Rx(Ed)},"globalReset"),defaultConfig:Ed});P9($n().logLevel);Rx($n());var pEe=k((t,e,r)=>{he.warn(t),mT(t)?(r&&r(t.str,t.hash),e.push({...t,message:t.str,error:t})):(r&&r(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},"handleError"),tX=k(async function(t={querySelector:".mermaid"}){try{await mEe(t)}catch(e){if(mT(e)&&he.error(e.str),ts.parseError&&ts.parseError(e),!t.suppressErrors)throw he.error("Use the suppressErrors option to suppress these errors"),e}},"run"),mEe=k(async function({postRenderCallback:t,querySelector:e,nodes:r}={querySelector:".mermaid"}){const n=mu.getConfig();he.debug(`${t?"":"No "}Callback function found`);let i;if(r)i=r;else if(e)i=document.querySelectorAll(e);else throw new Error("Nodes and querySelector are both undefined");he.debug(`Found ${i.length} diagrams`),(n==null?void 0:n.startOnLoad)!==void 0&&(he.debug("Start On Load: "+(n==null?void 0:n.startOnLoad)),mu.updateSiteConfig({startOnLoad:n==null?void 0:n.startOnLoad}));const s=new Gs.InitIDGenerator(n.deterministicIds,n.deterministicIDSeed);let o;const a=[];for(const l of Array.from(i)){if(he.info("Rendering diagram: "+l.id),l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const c=`mermaid-${s.next()}`;o=l.innerHTML,o=kG(Gs.entityDecode(o)).trim().replace(/<br\s*\/?>/gi,"<br/>");const h=Gs.detectInit(o);h&&he.debug("Detected early reinit: ",h);try{const{svg:u,bindFunctions:f}=await sX(c,o,l);l.innerHTML=u,t&&await t(c),f&&f(l)}catch(u){pEe(u,a,ts.parseError)}}if(a.length>0)throw a[0]},"runThrowsErrors"),rX=k(function(t){mu.initialize(t)},"initialize"),gEe=k(async function(t,e,r){he.warn("mermaid.init is deprecated. Please use run instead."),t&&rX(t);const n={postRenderCallback:r,querySelector:".mermaid"};typeof e=="string"?n.querySelector=e:e&&(e instanceof HTMLElement?n.nodes=[e]:n.nodes=e),await tX(n)},"init"),yEe=k(async(t,{lazyLoad:e=!0}={})=>{fw(),l6(...t),e===!1&&await zAe()},"registerExternalDiagrams"),nX=k(function(){if(ts.startOnLoad){const{startOnLoad:t}=mu.getConfig();t&&ts.run().catch(e=>he.error("Mermaid failed to initialize",e))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",nX,!1);var bEe=k(function(t){ts.parseError=t},"setParseErrorHandler"),hv=[],Tk=!1,iX=k(async()=>{if(!Tk){for(Tk=!0;hv.length>0;){const t=hv.shift();if(t)try{await t()}catch(e){he.error("Error executing queue",e)}}Tk=!1}},"executeQueue"),xEe=k(async(t,e)=>new Promise((r,n)=>{const i=k(()=>new Promise((s,o)=>{mu.parse(t,e).then(a=>{s(a),r(a)},a=>{var l;he.error("Error parsing",a),(l=ts.parseError)==null||l.call(ts,a),o(a),n(a)})}),"performCall");hv.push(i),iX().catch(n)}),"parse"),sX=k((t,e,r)=>new Promise((n,i)=>{const s=k(()=>new Promise((o,a)=>{mu.render(t,e,r).then(l=>{o(l),n(l)},l=>{var c;he.error("Error parsing",l),(c=ts.parseError)==null||c.call(ts,l),a(l),i(l)})}),"performCall");hv.push(s),iX().catch(i)}),"render"),vEe=k(()=>Object.keys(hu).map(t=>({id:t})),"getRegisteredDiagramsMetadata"),ts={startOnLoad:!0,mermaidAPI:mu,parse:xEe,render:sX,init:gEe,run:tX,registerExternalDiagrams:yEe,registerLayoutLoaders:fY,initialize:rX,parseError:void 0,contentLoaded:nX,setParseErrorHandler:bEe,detectType:N9,registerIconPacks:nTe,getRegisteredDiagramsMetadata:vEe},Ab=ts;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */Ab.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose",fontFamily:"var(--font-mono)"});class wEe{constructor(e){Se(this,"observer",null);Se(this,"themeObserver",null);Se(this,"container");Se(this,"blocks",new Map);Se(this,"idCounter",0);Se(this,"currentTheme","light");Se(this,"scanDebounceTimer",null);Se(this,"isScanning",!1);this.container=e,this.detectTheme()}detectTheme(){const e=document.body.getAttribute("data-theme")||document.documentElement.getAttribute("data-theme")||"light";this.currentTheme=e.startsWith("dark")?"dark":"light",this.updateMermaidTheme()}updateMermaidTheme(){const e=this.currentTheme==="dark";Ab.initialize({startOnLoad:!1,securityLevel:"loose",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif',theme:"base",themeVariables:e?{primaryColor:"#3b82f6",primaryTextColor:"#f8fafc",primaryBorderColor:"#475569",secondaryColor:"#1e293b",secondaryTextColor:"#e2e8f0",secondaryBorderColor:"#334155",tertiaryColor:"#0f172a",tertiaryTextColor:"#cbd5e1",tertiaryBorderColor:"#1e293b",lineColor:"#64748b",textColor:"#e2e8f0",mainBkg:"#1e293b",nodeBorder:"#475569",clusterBkg:"#0f172a",clusterBorder:"#334155",titleColor:"#f1f5f9",edgeLabelBackground:"#1e293b",nodeTextColor:"#f1f5f9",nodeBkg:"#1e293b",actorBkg:"#1e293b",actorBorder:"#475569",actorTextColor:"#f1f5f9",actorLineColor:"#64748b",signalColor:"#64748b",signalTextColor:"#e2e8f0",labelBoxBkgColor:"#1e293b",labelBoxBorderColor:"#475569",labelTextColor:"#e2e8f0",loopTextColor:"#94a3b8",noteBkgColor:"#334155",noteBorderColor:"#475569",noteTextColor:"#e2e8f0",activationBkgColor:"#334155",activationBorderColor:"#475569",classText:"#f1f5f9",labelColor:"#e2e8f0",altBackground:"#0f172a",sectionBkgColor:"#1e293b",altSectionBkgColor:"#0f172a",gridColor:"#334155",todayLineColor:"#3b82f6"}:{primaryColor:"#3b82f6",primaryTextColor:"#1e293b",primaryBorderColor:"#cbd5e1",secondaryColor:"#f1f5f9",secondaryTextColor:"#334155",secondaryBorderColor:"#e2e8f0",tertiaryColor:"#ffffff",tertiaryTextColor:"#475569",tertiaryBorderColor:"#f1f5f9",lineColor:"#94a3b8",textColor:"#334155",mainBkg:"#ffffff",nodeBorder:"#cbd5e1",clusterBkg:"#f8fafc",clusterBorder:"#e2e8f0",titleColor:"#1e293b",edgeLabelBackground:"#ffffff",nodeTextColor:"#1e293b",nodeBkg:"#ffffff",actorBkg:"#ffffff",actorBorder:"#cbd5e1",actorTextColor:"#1e293b",actorLineColor:"#94a3b8",signalColor:"#94a3b8",signalTextColor:"#334155",labelBoxBkgColor:"#ffffff",labelBoxBorderColor:"#e2e8f0",labelTextColor:"#334155",loopTextColor:"#64748b",noteBkgColor:"#fef3c7",noteBorderColor:"#fcd34d",noteTextColor:"#92400e",activationBkgColor:"#f1f5f9",activationBorderColor:"#cbd5e1",classText:"#1e293b",labelColor:"#334155",altBackground:"#f8fafc",sectionBkgColor:"#ffffff",altSectionBkgColor:"#f8fafc",gridColor:"#e2e8f0",todayLineColor:"#3b82f6"}})}start(){setTimeout(()=>this.scanForMermaidBlocks(),500),this.observer=new MutationObserver(()=>{this.debouncedScan()}),this.observer.observe(this.container,{childList:!0,subtree:!0,characterData:!0}),this.themeObserver=new MutationObserver(()=>{const r=(document.body.getAttribute("data-theme")||"light").startsWith("dark");(r&&this.currentTheme!=="dark"||!r&&this.currentTheme!=="light")&&(this.currentTheme=r?"dark":"light",this.updateMermaidTheme(),this.reRenderAllDiagrams())}),this.themeObserver.observe(document.body,{attributes:!0,attributeFilter:["data-theme"]})}debouncedScan(){this.scanDebounceTimer!==null&&clearTimeout(this.scanDebounceTimer),this.scanDebounceTimer=window.setTimeout(()=>{this.scanDebounceTimer=null,this.scanForMermaidBlocks()},300)}stop(){this.observer&&(this.observer.disconnect(),this.observer=null),this.themeObserver&&(this.themeObserver.disconnect(),this.themeObserver=null),this.scanDebounceTimer!==null&&clearTimeout(this.scanDebounceTimer);for(const[,e]of this.blocks)e.wrapper.remove();this.blocks.clear()}hashCode(e){let r=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);r=(r<<5)-r+i,r=r&r}return"mermaid-"+Math.abs(r).toString(36)}async scanForMermaidBlocks(){if(!this.isScanning){this.isScanning=!0;try{let e=this.container.querySelectorAll('[data-type="code_block"]');e.length===0&&(e=this.container.querySelectorAll('pre:has(.cm-editor), .code-block, [data-node-type="code_block"]')),e.length===0&&(e=this.container.querySelectorAll("div.cm-editor")),console.log("[Mermaid] Found code blocks:",e.length);const r=new Set;for(const n of e){const i=n,s=i.nextElementSibling;if(s!=null&&s.classList.contains("mermaid-diagram-wrapper")){const h=this.extractCode(i),u=this.hashCode(h);r.add(u);const f=this.blocks.get(u);f&&f.code!==h&&(f.code=h,f.showingSource||await this.updateDiagram(f));continue}const o=this.getCodeBlockLanguage(i);if(console.log("[Mermaid] Code block language:",o,"attrs:",i.getAttribute("data-language")),o!=="mermaid")continue;const a=this.extractCode(i);if(!a.trim())continue;const l=this.hashCode(a);if(r.add(l),this.blocks.has(l))continue;const c=await this.createDiagramWrapper(a,l);c&&(i.insertAdjacentElement("afterend",c),i.style.display="none",this.blocks.set(l,{code:a,showingSource:!1,diagramId:l,wrapper:c}))}for(const[n,i]of this.blocks)r.has(n)||(i.wrapper.remove(),this.blocks.delete(n))}finally{this.isScanning=!1}}}getCodeBlockLanguage(e){const r=e.getAttribute("data-language");if(r)return r.toLowerCase();const n=e.className.split(" ");for(const s of n)if(s.startsWith("language-"))return s.replace("language-","").toLowerCase();const i=this.extractCode(e);return this.looksLikeMermaid(i)?"mermaid":""}looksLikeMermaid(e){const r=e.trim().toLowerCase(),i=["graph ",`graph
`,"graph	","flowchart ",`flowchart
`,"sequencediagram","classdiagram","statediagram","erdiagram","gantt","pie","journey","gitgraph","mindmap","timeline","quadrantchart","sankey","xychart","block-beta"].some(s=>r.startsWith(s));return console.log("[Mermaid] looksLikeMermaid check:",r.substring(0,50),"=> result:",i),i}extractCode(e){const r=e.querySelectorAll(".cm-line");if(r.length>0){const o=[];return r.forEach(a=>{o.push(a.textContent||"")}),o.join(`
`)}const n=e.querySelector(".cm-content");if(n)return n.innerText||n.textContent||"";const i=e.querySelector("code");if(i)return i.innerText||i.textContent||"";const s=e.querySelector("pre");return s?s.innerText||s.textContent||"":e.innerText||e.textContent||""}async createDiagramWrapper(e,r){const n=document.createElement("div");n.className="mermaid-diagram-wrapper",n.setAttribute("data-mermaid-id",r);try{const i=`${r}-${++this.idCounter}`,{svg:s}=await Ab.render(i,e);n.innerHTML=`
        <div class="mermaid-toolbar">
          <button class="mermaid-toggle-source" title="Show source code">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="16 18 22 12 16 6"></polyline>
              <polyline points="8 6 2 12 8 18"></polyline>
            </svg>
          </button>
        </div>
        <div class="mermaid-diagram">${s}</div>
        <div class="mermaid-source hidden">
          <pre><code>${this.escapeHtml(e)}</code></pre>
        </div>
      `;const o=n.querySelector(".mermaid-toggle-source"),a=n.querySelector(".mermaid-diagram"),l=n.querySelector(".mermaid-source");return o.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation();const h=this.blocks.get(r);h&&(h.showingSource=!h.showingSource,h.showingSource?(a.classList.add("hidden"),l.classList.remove("hidden"),o.classList.add("active"),o.title="Show diagram"):(a.classList.remove("hidden"),l.classList.add("hidden"),o.classList.remove("active"),o.title="Show source code"))}),n}catch(i){return console.error("Failed to render mermaid diagram:",i),n.innerHTML=`
        <div class="mermaid-error">
          <div class="mermaid-error-header">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="8" x2="12" y2="12"></line>
              <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
            <span>Mermaid syntax error</span>
          </div>
          <pre><code>${this.escapeHtml(e)}</code></pre>
        </div>
      `,n}}async updateDiagram(e){try{const r=`${e.diagramId}-${++this.idCounter}`,{svg:n}=await Ab.render(r,e.code),i=e.wrapper.querySelector(".mermaid-diagram");i&&(i.innerHTML=n);const s=e.wrapper.querySelector(".mermaid-source code");s&&(s.innerHTML=this.escapeHtml(e.code))}catch(r){console.error("Failed to update mermaid diagram:",r)}}async reRenderAllDiagrams(){for(const[,e]of this.blocks)await this.updateDiagram(e)}escapeHtml(e){const r=document.createElement("div");return r.textContent=e,r.innerHTML}}class kEe{constructor(e){Se(this,"container");Se(this,"isRepo",!1);Se(this,"status",null);Se(this,"onInitRepo",null);Se(this,"onCloneRepo",null);this.container=e,this.render()}setOnInitRepo(e){this.onInitRepo=e}setOnCloneRepo(e){this.onCloneRepo=e}async refresh(){try{const e=await ir.getGitStatus();this.isRepo=e.isRepo,this.status=e.status||null,this.render()}catch(e){console.error("Failed to get git status:",e),this.isRepo=!1,this.status=null,this.render()}}update(e){this.isRepo=e.isRepo,this.status=e.status||null,this.render()}render(){if(!this.isRepo){this.container.innerHTML=`
        <button class="git-init-btn" title="Initialize Git Repository">
          <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
            <path d="M15.698 7.287L8.712.302a1.03 1.03 0 00-1.457 0l-1.45 1.45 1.84 1.84a1.223 1.223 0 011.55 1.56l1.773 1.774a1.224 1.224 0 11-.733.692L8.52 5.902v4.253a1.225 1.225 0 11-1.008-.036V5.832a1.224 1.224 0 01-.665-1.605L5.02 2.401.302 7.12a1.03 1.03 0 000 1.457l6.986 6.986a1.03 1.03 0 001.457 0l6.953-6.953a1.03 1.03 0 000-1.457"/>
          </svg>
          <span>Init Git</span>
        </button>
        <div class="git-actions">
          <button class="git-action-btn git-clone-btn" title="Clone a remote repository">
            <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
              <path d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/>
            </svg>
            Clone
          </button>
        </div>
      `;const c=this.container.querySelector(".git-init-btn");c==null||c.addEventListener("click",()=>this.handleInitRepo());const h=this.container.querySelector(".git-clone-btn");h==null||h.addEventListener("click",()=>this.handleCloneRepo());return}if(!this.status){this.container.innerHTML="";return}const{branch:e,ahead:r,behind:n,files:i,hasConflicts:s,isClean:o}=this.status;let a="";(r>0||n>0)&&(a='<span class="git-sync">',r>0&&(a+=`<span class="git-ahead" title="${r} commit(s) ahead">${r}</span>`),n>0&&(a+=`<span class="git-behind" title="${n} commit(s) behind">${n}</span>`),a+="</span>");let l="";s?l='<span class="git-status-indicator git-conflict" title="Merge conflicts">!</span>':o||(l=`<span class="git-status-indicator git-dirty" title="${i.length} changed file(s)"></span>`),this.container.innerHTML=`
      <div class="git-branch" title="Current branch: ${e}">
        <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
          <path d="M15.698 7.287L8.712.302a1.03 1.03 0 00-1.457 0l-1.45 1.45 1.84 1.84a1.223 1.223 0 011.55 1.56l1.773 1.774a1.224 1.224 0 11-.733.692L8.52 5.902v4.253a1.225 1.225 0 11-1.008-.036V5.832a1.224 1.224 0 01-.665-1.605L5.02 2.401.302 7.12a1.03 1.03 0 000 1.457l6.986 6.986a1.03 1.03 0 001.457 0l6.953-6.953a1.03 1.03 0 000-1.457"/>
        </svg>
        <span class="git-branch-name">${e}</span>
        ${a}
        ${l}
      </div>
    `}async handleInitRepo(){try{const e=await ir.initGitRepo();this.update(e),this.onInitRepo&&this.onInitRepo()}catch(e){console.error("Failed to initialize git repository:",e),alert("Failed to initialize git repository: "+e.message)}}handleCloneRepo(){this.onCloneRepo&&this.onCloneRepo()}getStatus(){return this.status}isGitRepo(){return this.isRepo}}class CEe{constructor(){Se(this,"dialog",null);Se(this,"onSuccess",null);Se(this,"handleEscape",e=>{e.key==="Escape"&&this.close()})}show(e){this.onSuccess=e,this.createDialog()}createDialog(){this.close(),this.dialog=document.createElement("div"),this.dialog.className="modal",this.dialog.innerHTML=`
            <div class="modal-backdrop"></div>
            <div class="modal-content clone-dialog">
                <h3>Clone Repository</h3>
                <div class="clone-form">
                    <div class="form-group">
                        <label for="clone-url">Repository URL</label>
                        <input type="text" id="clone-url" placeholder="https://github.com/user/repo.git or git@github.com:user/repo.git" />
                        <span id="url-validation" class="validation-message"></span>
                    </div>

                    <div id="auth-section" class="auth-section hidden">
                        <div class="auth-type-indicator">
                            <span id="auth-type-label"></span>
                        </div>

                        <div id="ssh-auth" class="hidden">
                            <div class="form-group">
                                <label for="ssh-key-path">SSH Key Path (optional)</label>
                                <input type="text" id="ssh-key-path" placeholder="~/.ssh/id_ed25519" />
                                <span class="form-hint">Leave empty to use default keys</span>
                            </div>
                        </div>

                        <div id="https-auth" class="hidden">
                            <div class="form-group">
                                <label for="https-username">Username</label>
                                <input type="text" id="https-username" placeholder="Username or email" />
                            </div>
                            <div class="form-group">
                                <label for="https-password">Password / Token</label>
                                <input type="password" id="https-password" placeholder="Personal access token recommended" />
                                <span class="form-hint">Use a personal access token for better security</span>
                            </div>
                        </div>
                    </div>

                    <div id="clone-progress" class="clone-progress hidden">
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                        <span class="progress-text">Cloning...</span>
                    </div>

                    <div id="clone-error" class="error-message hidden"></div>
                </div>

                <div class="modal-actions">
                    <button id="cancel-clone" class="btn-secondary">Cancel</button>
                    <button id="confirm-clone" class="btn-primary" disabled>Clone</button>
                </div>
            </div>
        `,document.body.appendChild(this.dialog),this.attachEventListeners();const e=this.dialog.querySelector("#clone-url");e==null||e.focus()}attachEventListeners(){if(!this.dialog)return;const e=this.dialog.querySelector(".modal-backdrop"),r=this.dialog.querySelector("#cancel-clone"),n=this.dialog.querySelector("#confirm-clone"),i=this.dialog.querySelector("#clone-url");e==null||e.addEventListener("click",()=>this.close()),r==null||r.addEventListener("click",()=>this.close()),n==null||n.addEventListener("click",()=>this.doClone());let s;i==null||i.addEventListener("input",()=>{clearTimeout(s),s=window.setTimeout(()=>this.validateURL(),300)}),i==null||i.addEventListener("keydown",o=>{o.key==="Enter"&&!n.disabled&&this.doClone()}),document.addEventListener("keydown",this.handleEscape)}async validateURL(){if(!this.dialog)return;const e=this.dialog.querySelector("#clone-url"),r=this.dialog.querySelector("#url-validation"),n=this.dialog.querySelector("#auth-section"),i=this.dialog.querySelector("#auth-type-label"),s=this.dialog.querySelector("#ssh-auth"),o=this.dialog.querySelector("#https-auth"),a=this.dialog.querySelector("#confirm-clone"),l=e.value.trim();if(!l){r.textContent="",r.className="validation-message",n.classList.add("hidden"),a.disabled=!0;return}try{const h=await(await fetch(`/api/git/validate-url?url=${encodeURIComponent(l)}`)).json();if(!h.success)throw new Error(h.error);const u=h.data;u.valid?(r.textContent=" Valid repository URL",r.className="validation-message valid",a.disabled=!1,n.classList.remove("hidden"),u.authType==="ssh"?(i.textContent="SSH Authentication",s.classList.remove("hidden"),o.classList.add("hidden")):u.authType==="https"?(i.textContent="HTTPS Authentication (optional)",s.classList.add("hidden"),o.classList.remove("hidden")):n.classList.add("hidden")):(r.textContent=u.error||"Invalid URL",r.className="validation-message invalid",n.classList.add("hidden"),a.disabled=!0)}catch{r.textContent="Failed to validate URL",r.className="validation-message invalid",a.disabled=!0}}async doClone(){if(!this.dialog)return;const e=this.dialog.querySelector("#clone-url"),r=this.dialog.querySelector("#ssh-key-path"),n=this.dialog.querySelector("#https-username"),i=this.dialog.querySelector("#https-password"),s=this.dialog.querySelector("#clone-progress"),o=this.dialog.querySelector("#clone-error"),a=this.dialog.querySelector("#confirm-clone"),l=this.dialog.querySelector("#cancel-clone"),c=e.value.trim();a.disabled=!0,l.textContent="Cancel",s.classList.remove("hidden"),o.classList.add("hidden");try{const u=await(await fetch("/api/git/clone",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:c,sshKeyPath:(r==null?void 0:r.value.trim())||void 0,username:(n==null?void 0:n.value.trim())||void 0,password:(i==null?void 0:i.value)||void 0})})).json();if(!u.success)throw new Error(u.error);const f=u.data;this.close(),this.onSuccess&&this.onSuccess(f.path)}catch(h){s.classList.add("hidden"),o.classList.remove("hidden"),o.textContent=h instanceof Error?h.message:"Clone failed",a.disabled=!1}}close(){document.removeEventListener("keydown",this.handleEscape),this.dialog&&(this.dialog.remove(),this.dialog=null)}}const SEe=new CEe;class TEe{constructor(e){Se(this,"container");Se(this,"status",null);Se(this,"isRepo",!1);Se(this,"currentTab","changes");Se(this,"onStatusChange",null);this.container=e,this.render()}setOnStatusChange(e){this.onStatusChange=e}async refresh(){try{const e=await ir.getGitStatus();this.isRepo=e.isRepo,this.status=e.status||null,this.render(),this.onStatusChange&&this.onStatusChange(this.status)}catch(e){console.error("Failed to get git status:",e),this.isRepo=!1,this.status=null,this.render()}}updateStatus(e,r=!0){this.status=e,this.isRepo=r,this.render()}render(){if(!this.isRepo){this.container.innerHTML=`
        <div class="git-panel-empty">
          <p>Not a git repository</p>
          <p class="git-panel-hint">Initialize or clone a repository to use git features</p>
        </div>
      `;return}if(!this.status){this.container.innerHTML=`
        <div class="git-panel-loading">Loading...</div>
      `;return}this.container.innerHTML=`
      <div class="git-panel">
        <div class="git-panel-tabs">
          <button class="git-tab ${this.currentTab==="changes"?"active":""}" data-tab="changes">
            Changes ${this.getChangesCount()}
          </button>
          <button class="git-tab ${this.currentTab==="history"?"active":""}" data-tab="history" disabled>
            History
          </button>
          <button class="git-tab ${this.currentTab==="branches"?"active":""}" data-tab="branches" disabled>
            Branches
          </button>
        </div>
        <div class="git-panel-content">
          ${this.renderCurrentTab()}
        </div>
      </div>
    `,this.attachEventListeners()}getChangesCount(){var e;return(e=this.status)!=null&&e.files.length?`(${this.status.files.length})`:""}renderCurrentTab(){switch(this.currentTab){case"changes":return this.renderChangesTab();case"history":return'<div class="git-panel-placeholder">History coming soon...</div>';case"branches":return'<div class="git-panel-placeholder">Branches coming soon...</div>';default:return""}}renderChangesTab(){if(!this.status)return"";const e=this.status.files.filter(i=>i.staged),r=this.status.files.filter(i=>!i.staged);if(e.length===0&&r.length===0)return`
        <div class="git-panel-clean">
          <svg width="48" height="48" viewBox="0 0 16 16" fill="currentColor" opacity="0.3">
            <path d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"/>
          </svg>
          <p>No changes</p>
          <p class="git-panel-hint">Working tree is clean</p>
        </div>
      `;let n="";return e.length>0&&(n+=`
        <div class="git-section">
          <div class="git-section-header">
            <span class="git-section-title">Staged Changes (${e.length})</span>
            <button class="git-section-action" data-action="unstage-all" title="Unstage all">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
                <path d="M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zM8 4.5l-1.25-1.5h2.5L8 4.5z"/>
                <path d="M10.88 9.38a.75.75 0 10-1.06-1.06L8 10.14 6.18 8.32a.75.75 0 10-1.06 1.06l1.82 1.82-1.82 1.82a.75.75 0 101.06 1.06L8 12.26l1.82 1.82a.75.75 0 101.06-1.06l-1.82-1.82 1.82-1.82z"/>
              </svg>
            </button>
          </div>
          <div class="git-file-list">
            ${e.map(i=>this.renderFileItem(i,!0)).join("")}
          </div>
        </div>
      `),r.length>0&&(n+=`
        <div class="git-section">
          <div class="git-section-header">
            <span class="git-section-title">Changes (${r.length})</span>
            <button class="git-section-action" data-action="stage-all" title="Stage all">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 4a.75.75 0 01.75.75v5.69l1.72-1.72a.75.75 0 111.06 1.06l-3 3a.75.75 0 01-1.06 0l-3-3a.75.75 0 011.06-1.06l1.72 1.72V4.75A.75.75 0 018 4z"/>
              </svg>
            </button>
          </div>
          <div class="git-file-list">
            ${r.map(i=>this.renderFileItem(i,!1)).join("")}
          </div>
        </div>
      `),e.length>0&&(n+=`
        <div class="git-commit-section">
          <textarea class="git-commit-message" placeholder="Commit message..." rows="3"></textarea>
          <button class="git-commit-btn">
            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
              <path d="M11.93 8.5a4.002 4.002 0 01-7.86 0H.75a.75.75 0 010-1.5h3.32a4.002 4.002 0 017.86 0h3.32a.75.75 0 010 1.5h-3.32zM8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"/>
            </svg>
            Commit
          </button>
        </div>
      `),n}renderFileItem(e,r){const n=`git-status-${e.status}`,i=this.getStatusIcon(e.status),s=e.path.split("/").pop()||e.path,o=e.path.includes("/")?e.path.substring(0,e.path.lastIndexOf("/")):"";return`
      <div class="git-file-item ${n}" data-path="${e.path}" data-staged="${r}">
        <span class="git-file-status" title="${e.status}">${i}</span>
        <span class="git-file-name" title="${e.path}">
          ${s}
          ${o?`<span class="git-file-path">${o}</span>`:""}
        </span>
        <div class="git-file-actions">
          ${r?`
            <button class="git-file-action" data-action="unstage" title="Unstage">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 12a.75.75 0 01-.75-.75V5.56L5.53 7.28a.75.75 0 01-1.06-1.06l3-3a.75.75 0 011.06 0l3 3a.75.75 0 11-1.06 1.06L8.75 5.56v5.69A.75.75 0 018 12z"/>
              </svg>
            </button>
          `:`
            <button class="git-file-action" data-action="stage" title="Stage">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 4a.75.75 0 01.75.75v5.69l1.72-1.72a.75.75 0 111.06 1.06l-3 3a.75.75 0 01-1.06 0l-3-3a.75.75 0 011.06-1.06l1.72 1.72V4.75A.75.75 0 018 4z"/>
              </svg>
            </button>
            <button class="git-file-action git-action-danger" data-action="discard" title="Discard changes">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
                <path d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"/>
              </svg>
            </button>
          `}
        </div>
      </div>
    `}getStatusIcon(e){switch(e){case"modified":return"M";case"added":return"A";case"deleted":return"D";case"untracked":return"U";case"conflicted":return"!";default:return"?"}}attachEventListeners(){var e,r,n,i;this.container.querySelectorAll(".git-tab").forEach(s=>{s.addEventListener("click",o=>{const a=o.currentTarget;if(a.hasAttribute("disabled"))return;const l=a.dataset.tab;l&&(this.currentTab=l,this.render())})}),(e=this.container.querySelector('[data-action="stage-all"]'))==null||e.addEventListener("click",async()=>{await this.handleStageAll()}),(r=this.container.querySelector('[data-action="unstage-all"]'))==null||r.addEventListener("click",async()=>{await this.handleUnstageAll()}),this.container.querySelectorAll(".git-file-action").forEach(s=>{s.addEventListener("click",async o=>{o.stopPropagation();const a=o.currentTarget,l=a.dataset.action,c=a.closest(".git-file-item"),h=c==null?void 0:c.dataset.path;if(h)switch(l){case"stage":await this.handleStageFile(h);break;case"unstage":await this.handleUnstageFile(h);break;case"discard":await this.handleDiscardFile(h);break}})}),(n=this.container.querySelector(".git-commit-btn"))==null||n.addEventListener("click",async()=>{const s=this.container.querySelector(".git-commit-message"),o=s==null?void 0:s.value.trim();o&&await this.handleCommit(o)}),(i=this.container.querySelector(".git-commit-message"))==null||i.addEventListener("keydown",async s=>{const o=s;if((o.ctrlKey||o.metaKey)&&o.key==="Enter"){const a=s.target,l=a==null?void 0:a.value.trim();l&&await this.handleCommit(l)}})}async handleStageFile(e){try{const r=await ir.stageFiles([e]);this.updateStatus(r.status),this.onStatusChange&&this.onStatusChange(r.status)}catch(r){console.error("Failed to stage file:",r),alert("Failed to stage file: "+r.message)}}async handleUnstageFile(e){try{const r=await ir.unstageFiles([e]);this.updateStatus(r.status),this.onStatusChange&&this.onStatusChange(r.status)}catch(r){console.error("Failed to unstage file:",r),alert("Failed to unstage file: "+r.message)}}async handleDiscardFile(e){if(confirm(`Discard changes to ${e}? This cannot be undone.`))try{const r=await ir.discardChanges([e]);this.updateStatus(r.status),this.onStatusChange&&this.onStatusChange(r.status)}catch(r){console.error("Failed to discard changes:",r),alert("Failed to discard changes: "+r.message)}}async handleStageAll(){try{const e=await ir.stageFiles([],!0);this.updateStatus(e.status),this.onStatusChange&&this.onStatusChange(e.status)}catch(e){console.error("Failed to stage all:",e),alert("Failed to stage all: "+e.message)}}async handleUnstageAll(){try{const e=await ir.unstageFiles([],!0);this.updateStatus(e.status),this.onStatusChange&&this.onStatusChange(e.status)}catch(e){console.error("Failed to unstage all:",e),alert("Failed to unstage all: "+e.message)}}async handleCommit(e){try{const r=await ir.commit(e);this.updateStatus(r.status),this.onStatusChange&&this.onStatusChange(r.status);const n=this.container.querySelector(".git-commit-message");n&&(n.value=""),this.showCommitSuccess(r.commit)}catch(r){console.error("Failed to commit:",r),alert("Failed to commit: "+r.message)}}showCommitSuccess(e){const r=document.createElement("div");r.className="git-commit-success",r.innerHTML=`
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"/>
      </svg>
      <span>Committed ${e.shortHash}</span>
    `,this.container.appendChild(r),setTimeout(()=>r.remove(),3e3)}}class _Ee{constructor(){Se(this,"fileTree",null);Se(this,"editor",null);Se(this,"mermaidRenderer",null);Se(this,"gitStatus",null);Se(this,"gitPanel",null);Se(this,"tabs",[]);Se(this,"activeTab",null);Se(this,"editors",new Map);Se(this,"theme","light");Se(this,"markdownPanelOpen",!1);Se(this,"directoryPath","");Se(this,"recents",[]);Se(this,"elements",{sidebar:document.getElementById("sidebar"),fileTree:document.getElementById("file-tree"),tabsContainer:document.getElementById("tabs-container"),editorContainer:document.getElementById("editor-container"),editorWrapper:document.getElementById("editor-wrapper"),editorEl:document.getElementById("editor"),markdownPanel:document.getElementById("markdown-panel"),markdownContent:document.getElementById("markdown-content"),emptyState:document.getElementById("empty-state"),statusText:document.getElementById("status-text"),wordCount:document.getElementById("word-count"),searchInput:document.getElementById("search-input"),themeToggle:document.getElementById("theme-toggle"),newFileBtn:document.getElementById("new-file-btn"),newFileModal:document.getElementById("new-file-modal"),newFileName:document.getElementById("new-file-name"),confirmNewFile:document.getElementById("confirm-new-file"),cancelNewFile:document.getElementById("cancel-new-file"),openFolderBtn:document.getElementById("open-folder-btn"),directoryModal:document.getElementById("directory-modal"),directoryPathInput:document.getElementById("directory-path-input"),directoryList:document.getElementById("directory-list"),confirmDirectory:document.getElementById("confirm-directory"),cancelDirectory:document.getElementById("cancel-directory"),toggleMarkdown:document.getElementById("toggle-markdown"),closeMarkdownPanel:document.getElementById("close-markdown-panel"),copyMarkdown:document.getElementById("copy-markdown"),widthControl:document.getElementById("width-control"),startupModal:document.getElementById("startup-modal"),startupRecents:document.getElementById("startup-recents"),startupBrowse:document.getElementById("startup-browse"),startupContinue:document.getElementById("startup-continue"),themeSelector:document.getElementById("theme-selector"),closeThemeSelector:document.getElementById("close-theme-selector"),gitStatusContainer:document.getElementById("git-status"),gitPanelContainer:document.getElementById("git-panel-container")})}async init(){try{(await ir.getConfig()).theme==="dark"&&this.setTheme("dark")}catch(n){console.error("Failed to load config:",n)}this.fileTree=new pX(this.elements.fileTree,{onFileSelect:n=>this.selectFile(n),onFileOpen:n=>this.openFile(n),onFileDeleted:n=>this.closeTab(n),onHeadingClick:(n,i)=>this.scrollToHeading(n,i)}),await this.fileTree.load(),this.editor=new Fke(this.elements.editorEl,{onLoad:()=>this.setStatus("Loaded"),onSave:()=>this.setStatus("Saved"),onChange:(n,i,s)=>this.handleEditorChange(n,s),onError:n=>this.setStatus(n),onStatus:n=>this.setStatus(n)}),await this.editor.init(),this.mermaidRenderer=new wEe(this.elements.editorEl),this.mermaidRenderer.start(),this.gitStatus=new kEe(this.elements.gitStatusContainer),this.gitStatus.setOnInitRepo(()=>this.handleGitRepoChange()),this.gitStatus.setOnCloneRepo(()=>this.showCloneDialog()),await this.gitStatus.refresh(),this.gitPanel=new TEe(this.elements.gitPanelContainer),this.gitPanel.setOnStatusChange(n=>{this.gitStatus&&n&&this.gitStatus.update({isRepo:!0,status:n})}),await this.gitPanel.refresh(),Z1.connect(),Z1.on("fileEvent",n=>this.handleFileEvent(n)),Z1.on("connected",()=>this.setStatus("Connected")),Z1.on("disconnected",()=>this.setStatus("Disconnected")),this.setupEventListeners();const r=new URLSearchParams(window.location.search).get("file");r&&this.openFile(r);try{this.recents=await ir.getRecents(),this.recents.length>1&&this.showStartupModal()}catch(n){console.error("Failed to load recents:",n)}this.setStatus("Ready")}setupEventListeners(){var e,r,n;this.elements.searchInput.addEventListener("input",i=>{var o;const s=i.target;(o=this.fileTree)==null||o.setSearchQuery(s.value)}),this.elements.themeToggle.addEventListener("click",()=>{this.toggleThemeSelector()}),this.elements.closeThemeSelector.addEventListener("click",()=>{this.hideThemeSelector()}),this.elements.themeSelector.querySelectorAll(".theme-card").forEach(i=>{i.addEventListener("click",()=>{const s=i.dataset.theme;this.setTheme(s),this.updateThemeCards()})}),document.addEventListener("click",i=>{const s=i.target;!this.elements.themeSelector.classList.contains("hidden")&&!this.elements.themeSelector.contains(s)&&!this.elements.themeToggle.contains(s)&&this.hideThemeSelector()}),this.elements.newFileBtn.addEventListener("click",()=>{this.showNewFileModal()}),this.elements.confirmNewFile.addEventListener("click",()=>{this.createNewFile()}),this.elements.cancelNewFile.addEventListener("click",()=>{this.hideNewFileModal()}),this.elements.newFileName.addEventListener("keydown",i=>{i.key==="Enter"?this.createNewFile():i.key==="Escape"&&this.hideNewFileModal()}),(e=this.elements.newFileModal.querySelector(".modal-backdrop"))==null||e.addEventListener("click",()=>{this.hideNewFileModal()}),this.elements.openFolderBtn.addEventListener("click",()=>{this.showDirectoryModal()}),this.elements.confirmDirectory.addEventListener("click",()=>{this.openDirectory()}),this.elements.cancelDirectory.addEventListener("click",()=>{this.hideDirectoryModal()}),this.elements.directoryPathInput.addEventListener("keydown",i=>{i.key==="Enter"?this.openDirectory():i.key==="Escape"&&this.hideDirectoryModal()}),(r=this.elements.directoryModal.querySelector(".modal-backdrop"))==null||r.addEventListener("click",()=>{this.hideDirectoryModal()}),this.elements.startupBrowse.addEventListener("click",()=>{this.hideStartupModal(),this.showDirectoryModal()}),this.elements.startupContinue.addEventListener("click",()=>{this.hideStartupModal()}),(n=this.elements.startupModal.querySelector(".modal-backdrop"))==null||n.addEventListener("click",()=>{this.hideStartupModal()}),this.elements.toggleMarkdown.addEventListener("click",()=>this.toggleMarkdownPanel()),this.elements.closeMarkdownPanel.addEventListener("click",()=>this.toggleMarkdownPanel(!1)),this.elements.copyMarkdown.addEventListener("click",()=>this.copyMarkdownToClipboard()),this.elements.widthControl.querySelectorAll(".width-btn").forEach(i=>{i.addEventListener("click",()=>{const s=i.dataset.width;this.setEditorWidth(s)})}),this.elements.editorWrapper.addEventListener("click",()=>{this.markdownPanelOpen&&this.toggleMarkdownPanel(!1)}),document.addEventListener("keydown",i=>{var s;(i.metaKey||i.ctrlKey)&&i.key==="s"&&(i.preventDefault(),(s=this.editor)==null||s.save()),(i.metaKey||i.ctrlKey)&&i.key==="w"&&(i.preventDefault(),this.activeTab&&this.closeTab(this.activeTab)),(i.metaKey||i.ctrlKey)&&i.key==="n"&&(i.preventDefault(),this.showNewFileModal()),(i.metaKey||i.ctrlKey)&&i.key==="p"&&(i.preventDefault(),this.elements.searchInput.focus())})}selectFile(e){var r;(r=this.fileTree)==null||r.setActiveFile(e)}async openFile(e){if(this.tabs.find(i=>i.path===e)){this.switchToTab(e);return}const n={path:e,name:e.split("/").pop()||e,dirty:!1};this.tabs.push(n),this.renderTabs(),this.switchToTab(e)}async switchToTab(e){var n,i,s,o,a;this.activeTab&&this.editor&&this.editors.set(this.activeTab,this.editor.getContent()),this.activeTab=e,(n=this.fileTree)==null||n.setActiveFile(e),this.renderTabs(),this.elements.emptyState.classList.add("hidden"),this.elements.editorWrapper.classList.remove("hidden");const r=this.editors.get(e);r!==void 0?(await((i=this.editor)==null?void 0:i.setContent(r)),(s=this.editor)==null||s.setCurrentPath(e)):await((o=this.editor)==null?void 0:o.loadFile(e)),this.updateWordCount(),this.updateOutline(),(a=this.editor)==null||a.focus()}closeTab(e){var i;const r=this.tabs.findIndex(s=>s.path===e);if(r===-1)return;const n=this.tabs[r];if(!(n.dirty&&!confirm(`"${n.name}" has unsaved changes. Close anyway?`))){if(this.tabs.splice(r,1),this.editors.delete(e),this.activeTab===e)if(this.tabs.length>0){const s=Math.min(r,this.tabs.length-1);this.switchToTab(this.tabs[s].path)}else this.activeTab=null,this.elements.editorWrapper.classList.add("hidden"),this.elements.emptyState.classList.remove("hidden"),(i=this.fileTree)==null||i.setActiveFile(null);this.renderTabs()}}renderTabs(){this.elements.tabsContainer.innerHTML=this.tabs.map(e=>`
      <button class="tab ${e.path===this.activeTab?"active":""} ${e.dirty?"dirty":""}"
              data-path="${this.escapeAttr(e.path)}">
        <span class="tab-name">${this.escapeHtml(e.name)}</span>
        <span class="tab-close" data-close="${this.escapeAttr(e.path)}">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </span>
      </button>
    `).join(""),this.elements.tabsContainer.querySelectorAll(".tab").forEach(e=>{e.addEventListener("click",r=>{const i=r.target.closest(".tab-close");i?this.closeTab(i.getAttribute("data-close")):this.switchToTab(e.dataset.path)})})}handleEditorChange(e,r){const n=this.tabs.find(i=>i.path===e);n&&(n.dirty=r,this.renderTabs()),this.updateWordCount(),this.updateOutline(),this.markdownPanelOpen&&this.updateMarkdownView()}handleFileEvent(e){var r;console.log("File event:",e),(r=this.fileTree)==null||r.refresh()}setTheme(e){this.theme=e,document.body.dataset.theme=e,e.startsWith("dark")?document.body.classList.add("dark"):document.body.classList.remove("dark");const r={light:"Light","light-sepia":"Sepia","light-ocean":"Ocean",dark:"Dark","dark-nord":"Nord","dark-monokai":"Monokai"};this.elements.themeToggle.title=`Theme: ${r[e]||e}`}toggleThemeSelector(){this.elements.themeSelector.classList.contains("hidden")?this.showThemeSelector():this.hideThemeSelector()}showThemeSelector(){this.elements.themeSelector.classList.remove("hidden"),this.updateThemeCards()}hideThemeSelector(){this.elements.themeSelector.classList.add("hidden")}updateThemeCards(){this.elements.themeSelector.querySelectorAll(".theme-card").forEach(e=>{const r=e.dataset.theme;e.classList.toggle("active",r===this.theme)})}showNewFileModal(){this.elements.newFileModal.classList.remove("hidden"),this.elements.newFileName.value="",this.elements.newFileName.focus()}hideNewFileModal(){this.elements.newFileModal.classList.add("hidden")}async createNewFile(){var r;let e=this.elements.newFileName.value.trim();if(e){e.toLowerCase().endsWith(".md")||(e+=".md");try{await ir.createFile(e,`# ${e.replace(".md","")}

`),this.hideNewFileModal(),await((r=this.fileTree)==null?void 0:r.refresh()),this.openFile(e)}catch(n){alert("Failed to create file: "+n.message)}}}setStatus(e){this.elements.statusText.textContent=e}updateWordCount(){if(this.editor){const e=this.editor.getWordCount();this.elements.wordCount.textContent=`${e} words`}else this.elements.wordCount.textContent=""}escapeHtml(e){const r=document.createElement("div");return r.textContent=e,r.innerHTML}escapeAttr(e){return e.replace(/"/g,"&quot;")}async showDirectoryModal(){this.elements.directoryModal.classList.remove("hidden");try{this.recents=await ir.getRecents()}catch(e){console.error("Failed to load recents:",e),this.recents=[]}try{const r=(await ir.listDirectories()).parent,n=await ir.listDirectories(r);this.directoryPath=n.current,this.elements.directoryPathInput.value=n.current,this.renderDirectoryList(n.directories,n.parent)}catch(e){console.error("Failed to list directories:",e)}this.elements.directoryPathInput.focus()}hideDirectoryModal(){this.elements.directoryModal.classList.add("hidden")}renderDirectoryList(e,r){let n="";if(this.recents.length>0){n+='<div class="recents-section">',n+='<div class="recents-header">Recent Locations</div>';for(const i of this.recents)n+=`
          <div class="directory-item recent" data-path="${this.escapeAttr(i.path)}" data-recent="true">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
            <div class="recent-info">
              <span class="recent-name">${this.escapeHtml(i.name)}</span>
              <span class="recent-path">${this.escapeHtml(i.path)}</span>
            </div>
          </div>
        `;n+="</div>",n+='<div class="directory-divider"></div>',n+='<div class="browse-header">Browse</div>'}r!==this.directoryPath&&(n+=`
        <div class="directory-item parent" data-path="${this.escapeAttr(r)}">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15 18 9 12 15 6"/>
          </svg>
          <span>..</span>
        </div>
      `);for(const i of e)n+=`
        <div class="directory-item" data-path="${this.escapeAttr(i.path)}">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
          </svg>
          <span>${this.escapeHtml(i.name)}</span>
        </div>
      `;e.length===0&&r===this.directoryPath&&(n+='<div class="directory-empty">No subdirectories</div>'),this.elements.directoryList.innerHTML=n,this.elements.directoryList.querySelectorAll(".directory-item:not([data-recent])").forEach(i=>{i.addEventListener("click",async()=>{const s=i.dataset.path;try{const o=await ir.listDirectories(s);this.directoryPath=o.current,this.elements.directoryPathInput.value=o.current,this.recents=[],this.renderDirectoryList(o.directories,o.parent)}catch(o){console.error("Failed to list directories:",o)}}),i.addEventListener("dblclick",async()=>{const s=i.dataset.path;this.elements.directoryPathInput.value=s,await this.openDirectory()})}),this.elements.directoryList.querySelectorAll(".directory-item[data-recent]").forEach(i=>{i.addEventListener("click",async()=>{const s=i.dataset.path;this.elements.directoryPathInput.value=s,await this.openDirectory()})})}async openDirectory(){var r;const e=this.elements.directoryPathInput.value.trim();if(e)try{await ir.changeDirectory(e),this.hideDirectoryModal(),this.tabs=[],this.editors.clear(),this.activeTab=null,this.renderTabs(),this.elements.editorWrapper.classList.add("hidden"),this.elements.emptyState.classList.remove("hidden"),this.toggleMarkdownPanel(!1),await((r=this.fileTree)==null?void 0:r.load()),this.setStatus("Opened: "+e)}catch(n){alert("Failed to open directory: "+n.message)}}setEditorWidth(e){this.elements.editorEl.dataset.width=e,this.elements.widthControl.querySelectorAll(".width-btn").forEach(r=>{r.classList.toggle("active",r.dataset.width===e)})}toggleMarkdownPanel(e){this.markdownPanelOpen=e??!this.markdownPanelOpen,this.elements.markdownPanel.classList.toggle("hidden",!this.markdownPanelOpen),this.elements.toggleMarkdown.classList.toggle("active",this.markdownPanelOpen),this.markdownPanelOpen&&this.updateMarkdownView()}updateMarkdownView(){if(this.editor){const e=this.editor.getContent();this.elements.markdownContent.textContent=e}}async copyMarkdownToClipboard(){if(!this.editor)return;const e=this.editor.getContent();try{await navigator.clipboard.writeText(e),this.setStatus("Copied to clipboard")}catch(r){console.error("Failed to copy:",r),this.setStatus("Failed to copy")}}scrollToHeading(e,r){var n;(n=this.editor)==null||n.scrollToLine(r)}updateOutline(){var e,r;if(this.editor&&this.activeTab){const n=this.editor.getHeadings();(e=this.fileTree)==null||e.updateOutline(n)}else(r=this.fileTree)==null||r.clearOutline()}showStartupModal(){this.elements.startupModal.classList.remove("hidden"),this.renderStartupRecents()}hideStartupModal(){this.elements.startupModal.classList.add("hidden")}async handleGitRepoChange(){var e,r;await((e=this.fileTree)==null?void 0:e.load()),await((r=this.gitPanel)==null?void 0:r.refresh())}showCloneDialog(){SEe.show(async e=>{var r,n,i;try{await ir.changeDirectory(e),await((r=this.fileTree)==null?void 0:r.load()),await((n=this.gitStatus)==null?void 0:n.refresh()),await((i=this.gitPanel)==null?void 0:i.refresh()),this.setStatus("Cloned: "+e)}catch(s){alert("Cloned successfully, but failed to open: "+s.message)}})}renderStartupRecents(){let e="";for(const r of this.recents)e+=`
        <div class="startup-recent-item" data-path="${this.escapeAttr(r.path)}">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
          </svg>
          <div class="startup-recent-info">
            <span class="startup-recent-name">${this.escapeHtml(r.name)}</span>
            <span class="startup-recent-path">${this.escapeHtml(r.path)}</span>
          </div>
        </div>
      `;this.elements.startupRecents.innerHTML=e,this.elements.startupRecents.querySelectorAll(".startup-recent-item").forEach(r=>{r.addEventListener("click",async()=>{const n=r.dataset.path;await this.openStartupDirectory(n)})})}async openStartupDirectory(e){var r;try{await ir.changeDirectory(e),this.hideStartupModal(),await((r=this.fileTree)==null?void 0:r.load()),this.setStatus("Opened: "+e)}catch(n){alert("Failed to open directory: "+n.message)}}}document.addEventListener("DOMContentLoaded",()=>{new _Ee().init().catch(console.error)});export{kW as $,vm as A,Hke as B,H3e as C,gT as D,$n as E,dW as F,j8e as G,vSe as H,vD as I,_8e as J,r3e as K,Ld as L,QEe as M,rw as N,w3e as O,F9 as P,CD as Q,uSe as R,vb as S,W8e as T,N1 as U,E3e as V,P1 as W,Ve as X,ot as Y,P8e as Z,k as _,R3e as a,Jre as a$,aSe as a0,VD as a1,qD as a2,hLe as a3,sLe as a4,lLe as a5,aLe as a6,nLe as a7,Fu as a8,J9 as a9,kn as aA,YI as aB,r7 as aC,ns as aD,bQ as aE,Ot as aF,dr as aG,Lr as aH,$e as aI,oe as aJ,DEe as aK,$Ee as aL,qEe as aM,zEe as aN,II as aO,sQ as aP,rJ as aQ,Z6 as aR,f_ as aS,LEe as aT,JEe as aU,kne as aV,Fre as aW,ER as aX,ps as aY,bs as aZ,$d as a_,cLe as aa,iLe as ab,fLe as ac,uLe as ad,oLe as ae,LTe as af,lY as ag,kLe as ah,A8e as ai,tn as aj,Dc as ak,cT as al,BG as am,Au as an,oG as ao,vt as ap,ea as aq,x3 as ar,Hre as as,OR as at,Zre as au,Ire as av,HEe as aw,ie as ax,XEe as ay,ube as az,B3e as b,HI as b$,Cc as b0,zd as b1,_v as b2,ch as b3,zH as b4,Sr as b5,Q as b6,v3 as b7,w_e as b8,wLe as b9,G9 as bA,Nl as bB,PD as bC,H6e as bD,bg as bE,Ue as bF,QU as bG,Li as bH,B6e as bI,U9 as bJ,PW as bK,$1 as bL,$W as bM,rLe as bN,zke as bO,iJ as bP,uJ as bQ,tQ as bR,Q6 as bS,GJ as bT,pQ as bU,Eb as bV,JJ as bW,tZ as bX,Qg as bY,Db as bZ,hJ as b_,CLe as ba,xLe as bb,Ke as bc,vLe as bd,n_e as be,ZTe as bf,JTe as bg,sTe as bh,lSe as bi,ZEe as bj,Dle as bk,bN as bl,q1 as bm,nTe as bn,rTe as bo,KT as bp,dJ as bq,zI as br,pv as bs,mv as bt,Lb as bu,TX as bv,LI as bw,rs as bx,DI as by,cJ as bz,Jt as c,JZ as c0,ZZ as c1,Nd as c2,Yc as c3,t_ as c4,JX as c5,e7 as c6,WZ as c7,QZ as c8,Fd as c9,kc as ca,u_ as cb,t7 as cc,BI as cd,Ek as ce,RI as cf,gv as cg,gu as ch,X as ci,Ft as d,wW as e,Zr as f,N3e as g,hl as h,Ls as i,eG as j,r0 as k,he as l,lG as m,eLe as n,TLe as o,F3e as p,$3e as q,SLe as r,P3e as s,M8e as t,Gs as u,KTe as v,K8e as w,dLe as x,I3e as y,tLe as z};
