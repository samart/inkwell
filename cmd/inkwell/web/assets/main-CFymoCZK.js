const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BwesHr4O.js","assets/index-DAa3tfgQ.js","assets/main-lotkb3XF.css","assets/index-QcSfTM8v.js","assets/index-B-gsjejv.js","assets/index-CrOGm4BG.js","assets/index-CV_iIolA.js","assets/index-DqPEs79x.js","assets/index-Cb1y2V-j.js","assets/index-BKZD2ikC.js","assets/index-DP82TZam.js","assets/index-DQnQfd0u.js","assets/index-Cbfbx2ak.js","assets/index-DlOmBEmt.js","assets/index-Df1pjS5C.js","assets/index-BsAmYUPp.js","assets/index-BRGUa4BS.js","assets/index-DjR-TzRU.js","assets/index-BlHEbwzV.js","assets/index-Bp93_Vzd.js","assets/index-ioLf5GGK.js","assets/dockerfile-BKs6k2Af.js","assets/simple-mode-GW_nhZxv.js","assets/factor-kuTfRLto.js","assets/nsis-LdVXkNf5.js","assets/pug-DukmZTjD.js","assets/javascript-qCveANmP.js","assets/index-Cm-lUucx.js","assets/index-DfbwBfhL.js","assets/dagre-6UL2VRFP-Q0DxOnd3.js","assets/graph-Bvqe8u-X.js","assets/_baseUniq-C_Konr6g.js","assets/layout-yIgfE5Dz.js","assets/_basePickBy-CPUti-tt.js","assets/clone-DkjNyZzN.js","assets/cose-bilkent-S5V4N54A-BF7J2krM.js","assets/cytoscape.esm-CyJtwmzi.js","assets/c4Diagram-YG6GDRKO-CfEXVNdI.js","assets/chunk-TZMSLE5B-DCUHC18j.js","assets/flowDiagram-NV44I4VS-CMwLndpn.js","assets/chunk-FMBD7UC4-CKYPNHSW.js","assets/chunk-55IACEB6-CGQgw5LK.js","assets/chunk-QN33PNHL-Dj-hEfk_.js","assets/channel-CitDMMRg.js","assets/erDiagram-Q2GNP2WA-BcOWVU02.js","assets/gitGraphDiagram-NY62KEGX-CgYFIN65.js","assets/chunk-4BX2VUAB-C-giYHaU.js","assets/chunk-QZHKN3VN-BdV7v-UU.js","assets/treemap-KMMF4GRG-Cy07_y-v.js","assets/ganttDiagram-JELNMOA3-BySR67SD.js","assets/linear-DHbDIWSI.js","assets/init-Gi6I4Gst.js","assets/defaultLocale-C4B-KCzX.js","assets/infoDiagram-WHAUD3N6-m_PMCZun.js","assets/pieDiagram-ADFJNKIX-DPdrmq09.js","assets/arc-BcBbifXp.js","assets/ordinal-Cboi1Yqb.js","assets/quadrantDiagram-AYHSOK5B-HOVadC5m.js","assets/xychartDiagram-PRI3JC2R-CIHrUl-O.js","assets/requirementDiagram-UZGBJVZJ-DzMsjeUP.js","assets/sequenceDiagram-WL72ISMW-BtCgL8dC.js","assets/classDiagram-2ON5EDUG-Bqhq5rZw.js","assets/chunk-B4BG7PRW-DzfYucxF.js","assets/classDiagram-v2-WZHVMYZB-Bqhq5rZw.js","assets/stateDiagram-FKZM4ZOC-D52ROeko.js","assets/chunk-DI55MBZ5-CpD9OfbH.js","assets/stateDiagram-v2-4FDKWEC3-DxljjQ2T.js","assets/journeyDiagram-XKPGCS4Q-BHvSxoNw.js","assets/timeline-definition-IT6M3QCI-de-Yy3Ep.js","assets/mindmap-definition-VGOIOE7T-BVXNonB6.js","assets/kanban-definition-3W4ZIXB7-B83U8Xn5.js","assets/sankeyDiagram-TZEHDZUN-Dc4floOj.js","assets/diagram-S2PKOQOG-BNNjeyUa.js","assets/diagram-QEK2KX5R-B4ZcGvt9.js","assets/blockDiagram-VD42YOAC-ho0s4FUz.js","assets/architectureDiagram-VXUJARFQ-CTZx8I-Y.js","assets/diagram-PSM6KHXK-DcXwbXbY.js"])))=>i.map(i=>d[i]);
var hX=Object.defineProperty;var WT=e=>{throw TypeError(e)};var uX=(e,t,r)=>t in e?hX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var gt=(e,t,r)=>uX(e,typeof t!="symbol"?t+"":t,r),dw=(e,t,r)=>t.has(e)||WT("Cannot "+r);var V=(e,t,r)=>(dw(e,t,"read from private field"),r?r.call(e):t.get(e)),kt=(e,t,r)=>t.has(e)?WT("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),nt=(e,t,r,n)=>(dw(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),J1=(e,t,r)=>(dw(e,t,"access private method"),r);/* empty css             */(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const jT="/api";class fX{async request(t,r={}){const n=`${jT}${t}`,i=await fetch(n,{headers:{"Content-Type":"application/json",...r.headers},...r}),s=await i.json();if(!i.ok||!s.success)throw new Error(s.error||"Request failed");return s.data}async getTree(){return this.request("/tree")}async getFile(t){return this.request(`/files?path=${encodeURIComponent(t)}`)}async createFile(t,r=""){return this.request("/files",{method:"POST",body:JSON.stringify({path:t,content:r})})}async updateFile(t,r){return this.request(`/files?path=${encodeURIComponent(t)}`,{method:"PUT",body:JSON.stringify({path:t,content:r})})}async deleteFile(t){await this.request(`/files?path=${encodeURIComponent(t)}`,{method:"DELETE"})}async uploadImage(t){const r=new FormData;r.append("image",t);const n=await fetch(`${jT}/images`,{method:"POST",body:r}),i=await n.json();if(!n.ok||!i.success)throw new Error(i.error||"Upload failed");return i.data}async getConfig(){return this.request("/config")}async listDirectories(t){const r=t?`?path=${encodeURIComponent(t)}`:"";return this.request(`/directories${r}`)}async changeDirectory(t){return this.request("/directories",{method:"POST",body:JSON.stringify({path:t})})}async getFileMetadata(t){return this.request(`/files/metadata?path=${encodeURIComponent(t)}`)}async getRecents(){return this.request("/recents")}async getGitStatus(){return this.request("/git/status")}async initGitRepo(){return this.request("/git/init",{method:"POST"})}async stageFiles(t,r=!1){return this.request("/git/stage",{method:"POST",body:JSON.stringify({files:t,all:r})})}async unstageFiles(t,r=!1){return this.request("/git/unstage",{method:"POST",body:JSON.stringify({files:t,all:r})})}async commit(t,r){return this.request("/git/commit",{method:"POST",body:JSON.stringify({message:t,files:r})})}async discardChanges(t,r=!1){return this.request("/git/discard",{method:"POST",body:JSON.stringify({files:t,all:r})})}async push(t){return this.request("/git/push",{method:"POST",body:JSON.stringify(t||{})})}async pull(t){return this.request("/git/pull",{method:"POST",body:JSON.stringify(t||{})})}async fetch(t){return this.request("/git/fetch",{method:"POST",body:JSON.stringify(t||{})})}async listBranches(){return this.request("/git/branches")}async checkout(t,r=!1){return this.request("/git/checkout",{method:"POST",body:JSON.stringify({name:t,create:r})})}async createBranch(t){return this.request("/git/branches/create",{method:"POST",body:JSON.stringify({name:t})})}async deleteBranch(t){return this.request("/git/branches/delete",{method:"POST",body:JSON.stringify({name:t})})}async renameBranch(t,r){return this.request("/git/branches/rename",{method:"POST",body:JSON.stringify({name:t,newName:r})})}async getHistory(t=50,r=0,n){let i=`/git/history?limit=${t}&skip=${r}`;return n&&(i+=`&path=${encodeURIComponent(n)}`),this.request(i)}async getCommitDetail(t){return this.request(`/git/commit-detail?hash=${encodeURIComponent(t)}`)}async getDiff(t,r,n){let i=`/git/diff?from=${encodeURIComponent(t)}&to=${encodeURIComponent(r)}`;return n&&(i+=`&path=${encodeURIComponent(n)}`),this.request(i)}async getFileAtCommit(t,r){return this.request(`/git/file-at-commit?hash=${encodeURIComponent(t)}&path=${encodeURIComponent(r)}`)}async quickCommit(t,r,n=!1){return this.request("/git/quick-commit",{method:"POST",body:JSON.stringify({message:t,files:r,push:n})})}}const Le=new fX;class dX{constructor(){gt(this,"ws",null);gt(this,"listeners",new Map);gt(this,"reconnectAttempts",0);gt(this,"maxReconnectAttempts",5);gt(this,"reconnectDelay",1e3);gt(this,"connected",!1)}connect(){const r=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`;this.ws=new WebSocket(r),this.ws.onopen=()=>{console.log("WebSocket connected"),this.connected=!0,this.reconnectAttempts=0,this.emit("connected",null)},this.ws.onclose=()=>{console.log("WebSocket disconnected"),this.connected=!1,this.emit("disconnected",null),this.scheduleReconnect()},this.ws.onerror=n=>{console.error("WebSocket error:",n),this.emit("error",n)},this.ws.onmessage=n=>{try{const i=JSON.parse(n.data);this.handleMessage(i)}catch(i){console.error("Failed to parse WebSocket message:",i)}}}scheduleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.log("Max reconnect attempts reached");return}this.reconnectAttempts++;const t=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log(`Reconnecting in ${t}ms (attempt ${this.reconnectAttempts})`),setTimeout(()=>{this.connected||this.connect()},t)}handleMessage(t){var r;switch(t.type){case"fileEvent":this.emit("fileEvent",{path:t.path,eventType:(r=t.data)==null?void 0:r.eventType});break;case"saved":this.emit("saved",{path:t.path});break;case"error":this.emit("error",{message:t.content});break;default:console.log("Unknown message type:",t.type)}}send(t,r={}){var n;if(!this.connected||((n=this.ws)==null?void 0:n.readyState)!==WebSocket.OPEN){console.warn("WebSocket not connected");return}this.ws.send(JSON.stringify({type:t,...r}))}subscribe(t){this.send("subscribe",{path:t})}unsubscribe(t){this.send("unsubscribe",{path:t})}save(t,r){this.send("save",{path:t,content:r})}on(t,r){this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(r)}off(t,r){const n=this.listeners.get(t);if(!n)return;const i=n.indexOf(r);i>-1&&n.splice(i,1)}emit(t,r){const n=this.listeners.get(t);if(n)for(const i of n)i(r)}disconnect(){this.ws&&(this.ws.close(),this.ws=null)}}const Z1=new dX;class pX{constructor(t,r={}){gt(this,"container");gt(this,"options");gt(this,"tree",null);gt(this,"expandedDirs",new Set);gt(this,"activeFile",null);gt(this,"searchQuery","");gt(this,"tooltip",null);gt(this,"tooltipTimeout",null);gt(this,"metadataCache",new Map);gt(this,"outline",[]);gt(this,"outlineExpanded",!0);gt(this,"collapsedSiblings",!0);gt(this,"expandedSiblingGroups",new Set);this.container=t,this.options=r;try{const n=localStorage.getItem("inkwell-expanded-dirs");n&&(this.expandedDirs=new Set(JSON.parse(n)))}catch{}}async load(){this.showLoading();try{this.tree=await Le.getTree(),this.render()}catch(t){this.showError(t.message)}}async refresh(){try{this.tree=await Le.getTree(),this.render()}catch(t){console.error("Failed to refresh tree:",t)}}setSearchQuery(t){this.searchQuery=t.toLowerCase(),this.render()}setActiveFile(t){t!==this.activeFile&&this.expandedSiblingGroups.clear(),this.activeFile=t,this.render()}render(){if(!this.tree){this.showEmpty();return}const t=this.filterTree(this.tree);if(!t||t.children&&t.children.length===0){this.searchQuery?this.showEmpty("No files match your search"):this.showEmpty("No markdown files found");return}this.container.innerHTML="",this.renderNodeWithCollapse(t,0,null)}getParentPath(t){const r=t.split("/");return r.pop(),r.join("/")||""}renderNodeWithCollapse(t,r,n){if(r===0&&t.isDir){this.renderChildrenWithCollapse(t.children||[],r,t.path);return}this.renderSingleNode(t,r),!t.isDir&&this.activeFile===t.path&&this.outline.length>0&&this.renderOutline(r),t.isDir&&this.expandedDirs.has(t.path)&&t.children&&this.renderChildrenWithCollapse(t.children,r+1,t.path)}renderChildrenWithCollapse(t,r,n){if(!this.activeFile||!this.collapsedSiblings||this.searchQuery){t.forEach(f=>this.renderNodeWithCollapse(f,r,n));return}const i=this.getParentPath(this.activeFile);if(!(i===n||n===""&&!i.includes("/"))){t.forEach(f=>this.renderNodeWithCollapse(f,r,n));return}const o=n||"root",a=this.expandedSiblingGroups.has(o),l=t.findIndex(f=>f.path===this.activeFile);if(l===-1){t.forEach(f=>this.renderNodeWithCollapse(f,r,n));return}const c=t.slice(0,l),h=t[l],u=t.slice(l+1);c.length>0&&!a?this.renderCollapsedPill(c,r,o,"before"):c.forEach(f=>this.renderNodeWithCollapse(f,r,n)),this.renderNodeWithCollapse(h,r,n),u.length>0&&!a?this.renderCollapsedPill(u,r,o,"after"):u.forEach(f=>this.renderNodeWithCollapse(f,r,n))}renderCollapsedPill(t,r,n,i){const s=document.createElement("div");s.className="sibling-collapse-pill",s.dataset.depth=String(r),s.dataset.position=i;const o=t.length,a=o===1?"file":"files";s.innerHTML=`
      <span class="collapse-pill-dots">
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
      </span>
      <span class="collapse-pill-text">${o} more ${a}</span>
    `,s.addEventListener("click",l=>{l.stopPropagation(),this.expandedSiblingGroups.add(n),this.render()}),this.container.appendChild(s)}renderSingleNode(t,r){const n=document.createElement("div");n.className="tree-item",n.dataset.path=t.path,n.dataset.depth=String(r),t.isDir?(n.classList.add("directory"),this.expandedDirs.has(t.path)&&n.classList.add("expanded")):this.activeFile===t.path&&n.classList.add("active");let i="";t.isDir?(i+=`<svg class="tree-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="9 18 15 12 9 6"/>
      </svg>`,i+=`<svg class="tree-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
      </svg>`):i+=`<svg class="tree-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
        <polyline points="14 2 14 8 20 8"/>
      </svg>`,i+=`<span class="tree-name">${this.escapeHtml(t.name)}</span>`,n.innerHTML=i,n.addEventListener("click",s=>{var o,a;s.stopPropagation(),t.isDir?this.toggleDir(t.path):(a=(o=this.options).onFileSelect)==null||a.call(o,t.path)}),n.addEventListener("dblclick",s=>{var o,a;s.stopPropagation(),t.isDir||(a=(o=this.options).onFileOpen)==null||a.call(o,t.path)}),n.addEventListener("contextmenu",s=>{s.preventDefault(),this.showContextMenu(s,t)}),n.addEventListener("mouseenter",s=>{this.showTooltip(s,t)}),n.addEventListener("mouseleave",()=>{this.hideTooltip()}),this.container.appendChild(n)}filterTree(t){var n;if(!this.searchQuery)return t;if(!t.isDir)return t.name.toLowerCase().includes(this.searchQuery)?t:null;const r=(n=t.children)==null?void 0:n.map(i=>this.filterTree(i)).filter(i=>i!==null);return!r||r.length===0?null:{...t,children:r}}renderNode(t,r){var s;if(r===0&&t.isDir){(s=t.children)==null||s.forEach(o=>this.renderNode(o,r));return}const n=document.createElement("div");n.className="tree-item",n.dataset.path=t.path,n.dataset.depth=String(r),t.isDir?(n.classList.add("directory"),this.expandedDirs.has(t.path)&&n.classList.add("expanded")):this.activeFile===t.path&&n.classList.add("active");let i="";t.isDir?(i+=`<svg class="tree-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="9 18 15 12 9 6"/>
      </svg>`,i+=`<svg class="tree-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
      </svg>`):i+=`<svg class="tree-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
        <polyline points="14 2 14 8 20 8"/>
      </svg>`,i+=`<span class="tree-name">${this.escapeHtml(t.name)}</span>`,n.innerHTML=i,n.addEventListener("click",o=>{var a,l;o.stopPropagation(),t.isDir?this.toggleDir(t.path):(l=(a=this.options).onFileSelect)==null||l.call(a,t.path)}),n.addEventListener("dblclick",o=>{var a,l;o.stopPropagation(),t.isDir||(l=(a=this.options).onFileOpen)==null||l.call(a,t.path)}),n.addEventListener("contextmenu",o=>{o.preventDefault(),this.showContextMenu(o,t)}),n.addEventListener("mouseenter",o=>{this.showTooltip(o,t)}),n.addEventListener("mouseleave",()=>{this.hideTooltip()}),this.container.appendChild(n),!t.isDir&&this.activeFile===t.path&&this.outline.length>0&&this.renderOutline(r),t.isDir&&this.expandedDirs.has(t.path)&&t.children&&t.children.forEach(o=>this.renderNode(o,r+1))}renderOutline(t){const r=document.createElement("div");r.className="outline-container",this.outlineExpanded&&r.classList.add("expanded");const n=document.createElement("div");n.className="outline-header",n.innerHTML=`
      <svg class="outline-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="9 18 15 12 9 6"/>
      </svg>
      <span class="outline-title">Outline</span>
    `,n.addEventListener("click",s=>{s.stopPropagation(),this.outlineExpanded=!this.outlineExpanded,r.classList.toggle("expanded",this.outlineExpanded)}),r.appendChild(n);const i=document.createElement("div");i.className="outline-items";for(const s of this.outline){const o=document.createElement("div");o.className="outline-item",o.dataset.level=String(s.level),o.dataset.line=String(s.line),o.innerHTML=`
        <span class="outline-text">${this.escapeHtml(s.text)}</span>
      `,o.addEventListener("click",a=>{var l,c;a.stopPropagation(),this.activeFile&&((c=(l=this.options).onHeadingClick)==null||c.call(l,this.activeFile,s.line))}),i.appendChild(o)}r.appendChild(i),this.container.appendChild(r)}updateOutline(t){this.outline=t,this.render()}clearOutline(){this.outline=[],this.render()}toggleDir(t){this.expandedDirs.has(t)?this.expandedDirs.delete(t):this.expandedDirs.add(t);try{localStorage.setItem("inkwell-expanded-dirs",JSON.stringify([...this.expandedDirs]))}catch{}this.render()}showContextMenu(t,r){const n=document.querySelector(".tree-context-menu");n&&n.remove();const i=document.createElement("div");i.className="tree-context-menu",i.style.left=`${t.clientX}px`,i.style.top=`${t.clientY}px`;let s="";r.isDir||(s+=`<div class="tree-context-menu-item" data-action="open">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
        </svg>
        Open
      </div>`),s+=`<div class="tree-context-menu-item" data-action="rename">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/>
      </svg>
      Rename
    </div>`,s+='<div class="tree-context-menu-divider"></div>',s+=`<div class="tree-context-menu-item danger" data-action="delete">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="3 6 5 6 21 6"/>
        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
      </svg>
      Delete
    </div>`,i.innerHTML=s,i.addEventListener("click",async a=>{var h,u,f,d,p,m,g;const c=(h=a.target.closest("[data-action]"))==null?void 0:h.getAttribute("data-action");if(c)switch(i.remove(),c){case"open":(f=(u=this.options).onFileOpen)==null||f.call(u,r.path);break;case"rename":(p=(d=this.options).onRename)==null||p.call(d,r.path);break;case"delete":if(confirm(`Delete "${r.name}"?`))try{await Le.deleteFile(r.path),(g=(m=this.options).onFileDeleted)==null||g.call(m,r.path),await this.refresh()}catch(y){alert("Failed to delete: "+y.message)}break}}),document.body.appendChild(i);const o=a=>{i.contains(a.target)||(i.remove(),document.removeEventListener("click",o))};setTimeout(()=>document.addEventListener("click",o),0)}showLoading(){this.container.innerHTML=`
      <div class="tree-loading">
        <div class="tree-loading-spinner"></div>
        Loading...
      </div>
    `}showEmpty(t="No markdown files found"){this.container.innerHTML=`
      <div class="tree-empty">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
        </svg>
        ${this.escapeHtml(t)}
      </div>
    `}showError(t){this.container.innerHTML=`
      <div class="tree-empty">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <line x1="12" y1="8" x2="12" y2="12"/>
          <line x1="12" y1="16" x2="12.01" y2="16"/>
        </svg>
        ${this.escapeHtml(t)}
      </div>
    `}formatFileSize(t){if(t===0)return"0 B";const r=1024,n=["B","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(r));return parseFloat((t/Math.pow(r,i)).toFixed(1))+" "+n[i]}createTooltip(){return this.tooltip?this.tooltip:(this.tooltip=document.createElement("div"),this.tooltip.className="file-tooltip",document.body.appendChild(this.tooltip),this.tooltip)}async showTooltip(t,r){this.tooltipTimeout&&clearTimeout(this.tooltipTimeout),this.tooltipTimeout=window.setTimeout(async()=>{const n=this.createTooltip();let i=this.metadataCache.get(r.path);if(!i){n.innerHTML=`
          <div class="tooltip-path">${this.escapeHtml(r.path)}</div>
          <div class="tooltip-loading">Loading...</div>
        `,n.classList.add("visible"),this.positionTooltip(t);try{i=await Le.getFileMetadata(r.path),this.metadataCache.set(r.path,i)}catch{n.innerHTML=`
            <div class="tooltip-path">${this.escapeHtml(r.path)}</div>
            <div class="tooltip-error">Could not load metadata</div>
          `;return}}n.innerHTML=`
        <div class="tooltip-path">${this.escapeHtml(r.path)}</div>
        <div class="tooltip-meta">
          <span class="tooltip-size">${r.isDir?"Directory":this.formatFileSize(i.size)}</span>
          <span class="tooltip-modified">Modified: ${i.modifiedTime}</span>
        </div>
      `,n.classList.add("visible"),this.positionTooltip(t)},400)}positionTooltip(t){if(!this.tooltip)return;const r=10;let n=t.clientX+r,i=t.clientY+r;const s=this.tooltip.getBoundingClientRect();n+s.width>window.innerWidth&&(n=t.clientX-s.width-r),i+s.height>window.innerHeight&&(i=t.clientY-s.height-r),this.tooltip.style.left=`${n}px`,this.tooltip.style.top=`${i}px`}hideTooltip(){this.tooltipTimeout&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=null),this.tooltip&&this.tooltip.classList.remove("visible")}escapeHtml(t){const r=document.createElement("div");return r.textContent=t,r.innerHTML}}var AI=typeof global=="object"&&global&&global.Object===Object&&global,mX=typeof self=="object"&&self&&self.Object===Object&&self,lo=AI||mX||Function("return this")(),Eb=lo.Symbol,EI=Object.prototype,gX=EI.hasOwnProperty,yX=EI.toString,v0=Eb?Eb.toStringTag:void 0;function bX(e){var t=gX.call(e,v0),r=e[v0];try{e[v0]=void 0;var n=!0}catch{}var i=yX.call(e);return n&&(t?e[v0]=r:delete e[v0]),i}var xX=Object.prototype,vX=xX.toString;function wX(e){return vX.call(e)}var kX="[object Null]",CX="[object Undefined]",UT=Eb?Eb.toStringTag:void 0;function gu(e){return e==null?e===void 0?CX:kX:UT&&UT in Object(e)?bX(e):wX(e)}function Nd(e){return e!=null&&typeof e=="object"}var SX="[object Symbol]";function TX(e){return typeof e=="symbol"||Nd(e)&&gu(e)==SX}var Lb=Array.isArray,_X=/\s/;function MX(e){for(var t=e.length;t--&&_X.test(e.charAt(t)););return t}var AX=/^\s+/;function EX(e){return e&&e.slice(0,MX(e)+1).replace(AX,"")}function rs(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var GT=NaN,LX=/^[-+]0x[0-9a-f]+$/i,OX=/^0b[01]+$/i,DX=/^0o[0-7]+$/i,IX=parseInt;function KT(e){if(typeof e=="number")return e;if(TX(e))return GT;if(rs(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=rs(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=EX(e);var r=OX.test(e);return r||DX.test(e)?IX(e.slice(2),r?2:8):LX.test(e)?GT:+e}function LI(e){return e}var BX="[object AsyncFunction]",RX="[object Function]",PX="[object GeneratorFunction]",NX="[object Proxy]";function Z6(e){if(!rs(e))return!1;var t=gu(e);return t==RX||t==PX||t==BX||t==NX}var pw=lo["__core-js_shared__"],YT=function(){var e=/[^.]+$/.exec(pw&&pw.keys&&pw.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function FX(e){return!!YT&&YT in e}var $X=Function.prototype,zX=$X.toString;function yu(e){if(e!=null){try{return zX.call(e)}catch{}try{return e+""}catch{}}return""}var HX=/[\\^$.*+?()[\]{}|]/g,qX=/^\[object .+?Constructor\]$/,VX=Function.prototype,WX=Object.prototype,jX=VX.toString,UX=WX.hasOwnProperty,GX=RegExp("^"+jX.call(UX).replace(HX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function KX(e){if(!rs(e)||FX(e))return!1;var t=Z6(e)?GX:qX;return t.test(yu(e))}function YX(e,t){return e==null?void 0:e[t]}function bu(e,t){var r=YX(e,t);return KX(r)?r:void 0}var _3=bu(lo,"WeakMap"),XT=Object.create,XX=function(){function e(){}return function(t){if(!rs(t))return{};if(XT)return XT(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function OI(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function JX(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var ZX=800,QX=16,tJ=Date.now;function eJ(e){var t=0,r=0;return function(){var n=tJ(),i=QX-(n-r);if(r=n,i>0){if(++t>=ZX)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function rJ(e){return function(){return e}}var Ob=function(){try{var e=bu(Object,"defineProperty");return e({},"",{}),e}catch{}}(),nJ=Ob?function(e,t){return Ob(e,"toString",{configurable:!0,enumerable:!1,value:rJ(t),writable:!0})}:LI,iJ=eJ(nJ),sJ=9007199254740991,oJ=/^(?:0|[1-9]\d*)$/;function DI(e,t){var r=typeof e;return t=t??sJ,!!t&&(r=="number"||r!="symbol"&&oJ.test(e))&&e>-1&&e%1==0&&e<t}function Q6(e,t,r){t=="__proto__"&&Ob?Ob(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function pv(e,t){return e===t||e!==e&&t!==t}var aJ=Object.prototype,lJ=aJ.hasOwnProperty;function cJ(e,t,r){var n=e[t];(!(lJ.call(e,t)&&pv(n,r))||r===void 0&&!(t in e))&&Q6(e,t,r)}function hJ(e,t,r,n){var i=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=void 0;l===void 0&&(l=e[a]),i?Q6(r,a,l):cJ(r,a,l)}return r}var JT=Math.max;function uJ(e,t,r){return t=JT(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,s=JT(n.length-t,0),o=Array(s);++i<s;)o[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(o),OI(e,this,a)}}function II(e,t){return iJ(uJ(e,t,LI),e+"")}var fJ=9007199254740991;function BI(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=fJ}function mv(e){return e!=null&&BI(e.length)&&!Z6(e)}function dJ(e,t,r){if(!rs(r))return!1;var n=typeof t;return(n=="number"?mv(r)&&DI(t,r.length):n=="string"&&t in r)?pv(r[t],e):!1}function RI(e){return II(function(t,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,o&&dJ(r[0],r[1],o)&&(s=i<3?void 0:s,i=1),t=Object(t);++n<i;){var a=r[n];a&&e(t,a,n,s)}return t})}var pJ=Object.prototype;function gv(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||pJ;return e===r}function mJ(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var gJ="[object Arguments]";function ZT(e){return Nd(e)&&gu(e)==gJ}var PI=Object.prototype,yJ=PI.hasOwnProperty,bJ=PI.propertyIsEnumerable,Db=ZT(function(){return arguments}())?ZT:function(e){return Nd(e)&&yJ.call(e,"callee")&&!bJ.call(e,"callee")};function xJ(){return!1}var NI=typeof exports=="object"&&exports&&!exports.nodeType&&exports,QT=NI&&typeof module=="object"&&module&&!module.nodeType&&module,vJ=QT&&QT.exports===NI,t_=vJ?lo.Buffer:void 0,wJ=t_?t_.isBuffer:void 0,t7=wJ||xJ,kJ="[object Arguments]",CJ="[object Array]",SJ="[object Boolean]",TJ="[object Date]",_J="[object Error]",MJ="[object Function]",AJ="[object Map]",EJ="[object Number]",LJ="[object Object]",OJ="[object RegExp]",DJ="[object Set]",IJ="[object String]",BJ="[object WeakMap]",RJ="[object ArrayBuffer]",PJ="[object DataView]",NJ="[object Float32Array]",FJ="[object Float64Array]",$J="[object Int8Array]",zJ="[object Int16Array]",HJ="[object Int32Array]",qJ="[object Uint8Array]",VJ="[object Uint8ClampedArray]",WJ="[object Uint16Array]",jJ="[object Uint32Array]",mr={};mr[NJ]=mr[FJ]=mr[$J]=mr[zJ]=mr[HJ]=mr[qJ]=mr[VJ]=mr[WJ]=mr[jJ]=!0;mr[kJ]=mr[CJ]=mr[RJ]=mr[SJ]=mr[PJ]=mr[TJ]=mr[_J]=mr[MJ]=mr[AJ]=mr[EJ]=mr[LJ]=mr[OJ]=mr[DJ]=mr[IJ]=mr[BJ]=!1;function UJ(e){return Nd(e)&&BI(e.length)&&!!mr[gu(e)]}function GJ(e){return function(t){return e(t)}}var FI=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Np=FI&&typeof module=="object"&&module&&!module.nodeType&&module,KJ=Np&&Np.exports===FI,mw=KJ&&AI.process,e_=function(){try{var e=Np&&Np.require&&Np.require("util").types;return e||mw&&mw.binding&&mw.binding("util")}catch{}}(),r_=e_&&e_.isTypedArray,e7=r_?GJ(r_):UJ,YJ=Object.prototype,XJ=YJ.hasOwnProperty;function JJ(e,t){var r=Lb(e),n=!r&&Db(e),i=!r&&!n&&t7(e),s=!r&&!n&&!i&&e7(e),o=r||n||i||s,a=o?mJ(e.length,String):[],l=a.length;for(var c in e)(t||XJ.call(e,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||DI(c,l)))&&a.push(c);return a}function $I(e,t){return function(r){return e(t(r))}}var ZJ=$I(Object.keys,Object),QJ=Object.prototype,tZ=QJ.hasOwnProperty;function eZ(e){if(!gv(e))return ZJ(e);var t=[];for(var r in Object(e))tZ.call(e,r)&&r!="constructor"&&t.push(r);return t}function rZ(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var nZ=Object.prototype,iZ=nZ.hasOwnProperty;function sZ(e){if(!rs(e))return rZ(e);var t=gv(e),r=[];for(var n in e)n=="constructor"&&(t||!iZ.call(e,n))||r.push(n);return r}function zI(e){return mv(e)?JJ(e,!0):sZ(e)}var Sm=bu(Object,"create");function oZ(){this.__data__=Sm?Sm(null):{},this.size=0}function aZ(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var lZ="__lodash_hash_undefined__",cZ=Object.prototype,hZ=cZ.hasOwnProperty;function uZ(e){var t=this.__data__;if(Sm){var r=t[e];return r===lZ?void 0:r}return hZ.call(t,e)?t[e]:void 0}var fZ=Object.prototype,dZ=fZ.hasOwnProperty;function pZ(e){var t=this.__data__;return Sm?t[e]!==void 0:dZ.call(t,e)}var mZ="__lodash_hash_undefined__";function gZ(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Sm&&t===void 0?mZ:t,this}function Kh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Kh.prototype.clear=oZ;Kh.prototype.delete=aZ;Kh.prototype.get=uZ;Kh.prototype.has=pZ;Kh.prototype.set=gZ;function yZ(){this.__data__=[],this.size=0}function yv(e,t){for(var r=e.length;r--;)if(pv(e[r][0],t))return r;return-1}var bZ=Array.prototype,xZ=bZ.splice;function vZ(e){var t=this.__data__,r=yv(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():xZ.call(t,r,1),--this.size,!0}function wZ(e){var t=this.__data__,r=yv(t,e);return r<0?void 0:t[r][1]}function kZ(e){return yv(this.__data__,e)>-1}function CZ(e,t){var r=this.__data__,n=yv(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function ul(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ul.prototype.clear=yZ;ul.prototype.delete=vZ;ul.prototype.get=wZ;ul.prototype.has=kZ;ul.prototype.set=CZ;var Tm=bu(lo,"Map");function SZ(){this.size=0,this.__data__={hash:new Kh,map:new(Tm||ul),string:new Kh}}function TZ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function bv(e,t){var r=e.__data__;return TZ(t)?r[typeof t=="string"?"string":"hash"]:r.map}function _Z(e){var t=bv(this,e).delete(e);return this.size-=t?1:0,t}function MZ(e){return bv(this,e).get(e)}function AZ(e){return bv(this,e).has(e)}function EZ(e,t){var r=bv(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function kc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}kc.prototype.clear=SZ;kc.prototype.delete=_Z;kc.prototype.get=MZ;kc.prototype.has=AZ;kc.prototype.set=EZ;var LZ="Expected a function";function Qg(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(LZ);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=e.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(Qg.Cache||kc),r}Qg.Cache=kc;var HI=$I(Object.getPrototypeOf,Object),OZ="[object Object]",DZ=Function.prototype,IZ=Object.prototype,qI=DZ.toString,BZ=IZ.hasOwnProperty,RZ=qI.call(Object);function PZ(e){if(!Nd(e)||gu(e)!=OZ)return!1;var t=HI(e);if(t===null)return!0;var r=BZ.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&qI.call(r)==RZ}function NZ(){this.__data__=new ul,this.size=0}function FZ(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function $Z(e){return this.__data__.get(e)}function zZ(e){return this.__data__.has(e)}var HZ=200;function qZ(e,t){var r=this.__data__;if(r instanceof ul){var n=r.__data__;if(!Tm||n.length<HZ-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new kc(n)}return r.set(e,t),this.size=r.size,this}function Fd(e){var t=this.__data__=new ul(e);this.size=t.size}Fd.prototype.clear=NZ;Fd.prototype.delete=FZ;Fd.prototype.get=$Z;Fd.prototype.has=zZ;Fd.prototype.set=qZ;var VI=typeof exports=="object"&&exports&&!exports.nodeType&&exports,n_=VI&&typeof module=="object"&&module&&!module.nodeType&&module,VZ=n_&&n_.exports===VI,i_=VZ?lo.Buffer:void 0,s_=i_?i_.allocUnsafe:void 0;function WZ(e,t){if(t)return e.slice();var r=e.length,n=s_?s_(r):new e.constructor(r);return e.copy(n),n}var M3=bu(lo,"DataView"),A3=bu(lo,"Promise"),E3=bu(lo,"Set"),o_="[object Map]",jZ="[object Object]",a_="[object Promise]",l_="[object Set]",c_="[object WeakMap]",h_="[object DataView]",UZ=yu(M3),GZ=yu(Tm),KZ=yu(A3),YZ=yu(E3),XZ=yu(_3),Yc=gu;(M3&&Yc(new M3(new ArrayBuffer(1)))!=h_||Tm&&Yc(new Tm)!=o_||A3&&Yc(A3.resolve())!=a_||E3&&Yc(new E3)!=l_||_3&&Yc(new _3)!=c_)&&(Yc=function(e){var t=gu(e),r=t==jZ?e.constructor:void 0,n=r?yu(r):"";if(n)switch(n){case UZ:return h_;case GZ:return o_;case KZ:return a_;case YZ:return l_;case XZ:return c_}return t});var u_=lo.Uint8Array;function JZ(e){var t=new e.constructor(e.byteLength);return new u_(t).set(new u_(e)),t}function ZZ(e,t){var r=t?JZ(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function QZ(e){return typeof e.constructor=="function"&&!gv(e)?XX(HI(e)):{}}function tQ(e){return function(t,r,n){for(var i=-1,s=Object(t),o=n(t),a=o.length;a--;){var l=o[++i];if(r(s[l],l,s)===!1)break}return t}}var eQ=tQ(),gw=function(){return lo.Date.now()},rQ="Expected a function",nQ=Math.max,iQ=Math.min;function xv(e,t,r){var n,i,s,o,a,l,c=0,h=!1,u=!1,f=!0;if(typeof e!="function")throw new TypeError(rQ);t=KT(t)||0,rs(r)&&(h=!!r.leading,u="maxWait"in r,s=u?nQ(KT(r.maxWait)||0,t):s,f="trailing"in r?!!r.trailing:f);function d(w){var _=n,I=i;return n=i=void 0,c=w,o=e.apply(I,_),o}function p(w){return c=w,a=setTimeout(y,t),h?d(w):o}function m(w){var _=w-l,I=w-c,N=t-_;return u?iQ(N,s-I):N}function g(w){var _=w-l,I=w-c;return l===void 0||_>=t||_<0||u&&I>=s}function y(){var w=gw();if(g(w))return b(w);a=setTimeout(y,m(w))}function b(w){return a=void 0,f&&n?d(w):(n=i=void 0,o)}function x(){a!==void 0&&clearTimeout(a),c=0,n=l=i=a=void 0}function T(){return a===void 0?o:b(gw())}function S(){var w=gw(),_=g(w);if(n=arguments,i=this,l=w,_){if(a===void 0)return p(l);if(u)return clearTimeout(a),a=setTimeout(y,t),d(l)}return a===void 0&&(a=setTimeout(y,t)),o}return S.cancel=x,S.flush=T,S}function L3(e,t,r){(r!==void 0&&!pv(e[t],r)||r===void 0&&!(t in e))&&Q6(e,t,r)}function sQ(e){return Nd(e)&&mv(e)}function O3(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function oQ(e){return hJ(e,zI(e))}function aQ(e,t,r,n,i,s,o){var a=O3(e,r),l=O3(t,r),c=o.get(l);if(c){L3(e,r,c);return}var h=s?s(a,l,r+"",e,t,o):void 0,u=h===void 0;if(u){var f=Lb(l),d=!f&&t7(l),p=!f&&!d&&e7(l);h=l,f||d||p?Lb(a)?h=a:sQ(a)?h=JX(a):d?(u=!1,h=WZ(l,!0)):p?(u=!1,h=ZZ(l,!0)):h=[]:PZ(l)||Db(l)?(h=a,Db(a)?h=oQ(a):(!rs(a)||Z6(a))&&(h=QZ(l))):u=!1}u&&(o.set(l,h),i(h,l,n,s,o),o.delete(l)),L3(e,r,h)}function vv(e,t,r,n,i){e!==t&&eQ(t,function(s,o){if(i||(i=new Fd),rs(s))aQ(e,t,o,r,vv,n,i);else{var a=n?n(O3(e,o),s,o+"",e,t,i):void 0;a===void 0&&(a=s),L3(e,o,a)}},zI)}function WI(e,t,r,n,i,s){return rs(e)&&rs(t)&&(s.set(t,e),vv(e,t,void 0,WI,s),s.delete(t)),e}var lQ=RI(function(e,t,r,n){vv(e,t,r,n)}),cQ=II(function(e){return e.push(void 0,WI),OI(lQ,void 0,e)}),hQ="[object Map]",uQ="[object Set]",fQ=Object.prototype,dQ=fQ.hasOwnProperty;function f_(e){if(e==null)return!0;if(mv(e)&&(Lb(e)||typeof e=="string"||typeof e.splice=="function"||t7(e)||e7(e)||Db(e)))return!e.length;var t=Yc(e);if(t==hQ||t==uQ)return!e.size;if(gv(e))return!eZ(e).length;for(var r in e)if(dQ.call(e,r))return!1;return!0}var pQ=RI(function(e,t,r){vv(e,t,r)}),mQ="Expected a function";function wv(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(mQ);return rs(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),xv(e,t,{leading:n,maxWait:t,trailing:i})}const gQ="modulepreload",yQ=function(e){return"/"+e},d_={},X=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=yQ(l),l in d_)return;d_[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":gQ,c||(u.as="script"),u.crossOrigin="",u.href=l,a&&u.setAttribute("nonce",a),document.head.appendChild(u),c)return new Promise((f,d)=>{u.addEventListener("load",f),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})},bQ=1024;let xQ=0,ys=class{constructor(t,r){this.from=t,this.to=r}};class De{constructor(t={}){this.id=xQ++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=t.combine||null}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=ns.match(t)),r=>{let n=t(r);return n===void 0?null:[this,n]}}}De.closedBy=new De({deserialize:e=>e.split(" ")});De.openedBy=new De({deserialize:e=>e.split(" ")});De.group=new De({deserialize:e=>e.split(" ")});De.isolate=new De({deserialize:e=>{if(e&&e!="rtl"&&e!="ltr"&&e!="auto")throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}});De.contextHash=new De({perNode:!0});De.lookAhead=new De({perNode:!0});De.mounted=new De({perNode:!0});class _m{constructor(t,r,n){this.tree=t,this.overlay=r,this.parser=n}static get(t){return t&&t.props&&t.props[De.mounted.id]}}const vQ=Object.create(null);let ns=class jI{constructor(t,r,n,i=0){this.name=t,this.props=r,this.id=n,this.flags=i}static define(t){let r=t.props&&t.props.length?Object.create(null):vQ,n=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),i=new jI(t.name||"",r,t.id,n);if(t.props){for(let s of t.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");r[s[0].id]=s[1]}}return i}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let r=this.prop(De.group);return r?r.indexOf(t)>-1:!1}return this.id==t}static match(t){let r=Object.create(null);for(let n in t)for(let i of n.split(" "))r[i]=t[n];return n=>{for(let i=n.prop(De.group),s=-1;s<(i?i.length:0);s++){let o=r[s<0?n.name:i[s]];if(o)return o}}}};ns.none=new ns("",Object.create(null),0,8);class r7{constructor(t){this.types=t;for(let r=0;r<t.length;r++)if(t[r].id!=r)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let r=[];for(let n of this.types){let i=null;for(let s of t){let o=s(n);if(o){i||(i=Object.assign({},n.props));let a=o[1],l=o[0];l.combine&&l.id in i&&(a=l.combine(i[l.id],a)),i[l.id]=a}}r.push(i?new ns(n.name,i,n.id,n.flags):n)}return new r7(r)}}const Q1=new WeakMap,p_=new WeakMap;var Lr;(function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"})(Lr||(Lr={}));class dr{constructor(t,r,n,i,s){if(this.type=t,this.children=r,this.positions=n,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let t=_m.get(this);if(t&&!t.overlay)return t.tree.toString();let r="";for(let n of this.children){let i=n.toString();i&&(r&&(r+=","),r+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(r.length?"("+r+")":""):r}cursor(t=0){return new Ib(this.topNode,t)}cursorAt(t,r=0,n=0){let i=Q1.get(this)||this.topNode,s=new Ib(i);return s.moveTo(t,r),Q1.set(this,s._tree),s}get topNode(){return new Pn(this,0,0,null)}resolve(t,r=0){let n=Mm(Q1.get(this)||this.topNode,t,r,!1);return Q1.set(this,n),n}resolveInner(t,r=0){let n=Mm(p_.get(this)||this.topNode,t,r,!0);return p_.set(this,n),n}resolveStack(t,r=0){return CQ(this,t,r)}iterate(t){let{enter:r,leave:n,from:i=0,to:s=this.length}=t,o=t.mode||0,a=(o&Lr.IncludeAnonymous)>0;for(let l=this.cursor(o|Lr.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||r(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&n&&(a||!l.type.isAnonymous)&&n(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let r in this.props)t.push([+r,this.props[r]]);return t}balance(t={}){return this.children.length<=8?this:s7(ns.none,this.children,this.positions,0,this.children.length,0,this.length,(r,n,i)=>new dr(this.type,r,n,i,this.propValues),t.makeTree||((r,n,i)=>new dr(ns.none,r,n,i)))}static build(t){return SQ(t)}}dr.empty=new dr(ns.none,[],[],0);class n7{constructor(t,r){this.buffer=t,this.index=r}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new n7(this.buffer,this.index)}}class ic{constructor(t,r,n){this.buffer=t,this.length=r,this.set=n}get type(){return ns.none}toString(){let t=[];for(let r=0;r<this.buffer.length;)t.push(this.childString(r)),r=this.buffer[r+3];return t.join(",")}childString(t){let r=this.buffer[t],n=this.buffer[t+3],i=this.set.types[r],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),t+=4,n==t)return s;let o=[];for(;t<n;)o.push(this.childString(t)),t=this.buffer[t+3];return s+"("+o.join(",")+")"}findChild(t,r,n,i,s){let{buffer:o}=this,a=-1;for(let l=t;l!=r&&!(UI(s,i,o[l+1],o[l+2])&&(a=l,n>0));l=o[l+3]);return a}slice(t,r,n){let i=this.buffer,s=new Uint16Array(r-t),o=0;for(let a=t,l=0;a<r;){s[l++]=i[a++],s[l++]=i[a++]-n;let c=s[l++]=i[a++]-n;s[l++]=i[a++]-t,o=Math.max(o,c)}return new ic(s,o,this.set)}}function UI(e,t,r,n){switch(e){case-2:return r<t;case-1:return n>=t&&r<t;case 0:return r<t&&n>t;case 1:return r<=t&&n>t;case 2:return n>t;case 4:return!0}}function Mm(e,t,r,n){for(var i;e.from==e.to||(r<1?e.from>=t:e.from>t)||(r>-1?e.to<=t:e.to<t);){let o=!n&&e instanceof Pn&&e.index<0?null:e.parent;if(!o)return e;e=o}let s=n?0:Lr.IgnoreOverlays;if(n)for(let o=e,a=o.parent;a;o=a,a=o.parent)o instanceof Pn&&o.index<0&&((i=a.enter(t,r,s))===null||i===void 0?void 0:i.from)!=o.from&&(e=a);for(;;){let o=e.enter(t,r,s);if(!o)return e;e=o}}class GI{cursor(t=0){return new Ib(this,t)}getChild(t,r=null,n=null){let i=m_(this,t,r,n);return i.length?i[0]:null}getChildren(t,r=null,n=null){return m_(this,t,r,n)}resolve(t,r=0){return Mm(this,t,r,!1)}resolveInner(t,r=0){return Mm(this,t,r,!0)}matchContext(t){return D3(this.parent,t)}enterUnfinishedNodesBefore(t){let r=this.childBefore(t),n=this;for(;r;){let i=r.lastChild;if(!i||i.to!=r.to)break;i.type.isError&&i.from==i.to?(n=r,r=i.prevSibling):r=i}return n}get node(){return this}get next(){return this.parent}}class Pn extends GI{constructor(t,r,n,i){super(),this._tree=t,this.from=r,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,r,n,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=r>0?a.length:-1;t!=c;t+=r){let h=a[t],u=l[t]+o.from;if(UI(i,n,u,u+h.length)){if(h instanceof ic){if(s&Lr.ExcludeBuffers)continue;let f=h.findChild(0,h.buffer.length,r,n-u,i);if(f>-1)return new Fo(new wQ(o,h,t,u),null,f)}else if(s&Lr.IncludeAnonymous||!h.type.isAnonymous||i7(h)){let f;if(!(s&Lr.IgnoreMounts)&&(f=_m.get(h))&&!f.overlay)return new Pn(f.tree,u,t,o);let d=new Pn(h,u,t,o);return s&Lr.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(r<0?h.children.length-1:0,r,n,i)}}}if(s&Lr.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?t=o.index+r:t=r<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,r,n=0){let i;if(!(n&Lr.IgnoreOverlays)&&(i=_m.get(this._tree))&&i.overlay){let s=t-this.from;for(let{from:o,to:a}of i.overlay)if((r>0?o<=s:o<s)&&(r<0?a>=s:a>s))return new Pn(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,r,n)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function m_(e,t,r,n){let i=e.cursor(),s=[];if(!i.firstChild())return s;if(r!=null){for(let o=!1;!o;)if(o=i.type.is(r),!i.nextSibling())return s}for(;;){if(n!=null&&i.type.is(n))return s;if(i.type.is(t)&&s.push(i.node),!i.nextSibling())return n==null?s:[]}}function D3(e,t,r=t.length-1){for(let n=e;r>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(t[r]&&t[r]!=n.name)return!1;r--}}return!0}class wQ{constructor(t,r,n,i){this.parent=t,this.buffer=r,this.index=n,this.start=i}}class Fo extends GI{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,r,n){super(),this.context=t,this._parent=r,this.index=n,this.type=t.buffer.set.types[t.buffer.buffer[n]]}child(t,r,n){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t,r-this.context.start,n);return s<0?null:new Fo(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,r,n=0){if(n&Lr.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],r>0?1:-1,t-this.context.start,r);return s<0?null:new Fo(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,r=t.buffer[this.index+3];return r<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new Fo(this.context,this._parent,r):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,r=this._parent?this._parent.index+4:0;return this.index==r?this.externalSibling(-1):new Fo(this.context,this._parent,t.findChild(r,this.index,-1,0,4))}get tree(){return null}toTree(){let t=[],r=[],{buffer:n}=this.context,i=this.index+4,s=n.buffer[this.index+3];if(s>i){let o=n.buffer[this.index+1];t.push(n.slice(i,s,o)),r.push(0)}return new dr(this.type,t,r,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function KI(e){if(!e.length)return null;let t=0,r=e[0];for(let s=1;s<e.length;s++){let o=e[s];(o.from>r.from||o.to<r.to)&&(r=o,t=s)}let n=r instanceof Pn&&r.index<0?null:r.parent,i=e.slice();return n?i[t]=n:i.splice(t,1),new kQ(i,r)}class kQ{constructor(t,r){this.heads=t,this.node=r}get next(){return KI(this.heads)}}function CQ(e,t,r){let n=e.resolveInner(t,r),i=null;for(let s=n instanceof Pn?n:n.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[n])).push(o.resolve(t,r)),s=o}else{let o=_m.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=t&&o.overlay[o.overlay.length-1].to>=t){let a=new Pn(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[n])).push(Mm(a,t,r,!1))}}return i?KI(i):n}class Ib{get name(){return this.type.name}constructor(t,r=0){if(this.mode=r,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof Pn)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let n=t._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,r){this.index=t;let{start:n,buffer:i}=this.buffer;return this.type=r||i.set.types[i.buffer[t]],this.from=n+i.buffer[t+1],this.to=n+i.buffer[t+2],!0}yield(t){return t?t instanceof Pn?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,r,n){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,r,n,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],t,r-this.buffer.start,n);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,r,n=this.mode){return this.buffer?n&Lr.ExcludeBuffers?!1:this.enterChild(1,t,r):this.yield(this._tree.enter(t,r,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Lr.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&Lr.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:r}=this.buffer,n=this.stack.length-1;if(t<0){let i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(r.findChild(i,this.index,-1,0,4))}else{let i=r.buffer[this.index+3];if(i<(n<0?r.buffer.length:r.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let r,n,{buffer:i}=this;if(i){if(t>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:r,parent:n}=i)}else({index:r,_parent:n}=this._tree);for(;n;{index:r,_parent:n}=n)if(r>-1)for(let s=r+t,o=t<0?-1:n._tree.children.length;s!=o;s+=t){let a=n._tree.children[s];if(this.mode&Lr.IncludeAnonymous||a instanceof ic||!a.type.isAnonymous||i7(a))return!1}return!0}move(t,r){if(r&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,r=0){for(;(this.from==this.to||(r<1?this.from>=t:this.from>t)||(r>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,r););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,r=null,n=0;if(t&&t.context==this.buffer)t:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=t;o;o=o._parent)if(o.index==i){if(i==this.index)return o;r=o,n=s+1;break t}i=this.stack[--s]}for(let i=n;i<this.stack.length;i++)r=new Fo(this.buffer,r,this.stack[i]);return this.bufferNode=new Fo(this.buffer,r,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,r){for(let n=0;;){let i=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&r&&r(this),i=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,i=!0}}}matchContext(t){if(!this.buffer)return D3(this.node.parent,t);let{buffer:r}=this.buffer,{types:n}=r.set;for(let i=t.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return D3(this._tree,t,i);let o=n[r.buffer[this.stack[s]]];if(!o.isAnonymous){if(t[i]&&t[i]!=o.name)return!1;i--}}return!0}}function i7(e){return e.children.some(t=>t instanceof ic||!t.type.isAnonymous||i7(t))}function SQ(e){var t;let{buffer:r,nodeSet:n,maxBufferLength:i=bQ,reused:s=[],minRepeatType:o=n.types.length}=e,a=Array.isArray(r)?new n7(r,r.length):r,l=n.types,c=0,h=0;function u(S,w,_,I,N,L){let{id:D,start:P,end:K,size:z}=a,$=h,H=c;if(z<0)if(a.next(),z==-1){let dt=s[D];_.push(dt),I.push(P-S);return}else if(z==-3){c=D;return}else if(z==-4){h=D;return}else throw new RangeError(`Unrecognized record size: ${z}`);let U=l[D],q,rt,E=P-S;if(K-P<=i&&(rt=g(a.pos-w,N))){let dt=new Uint16Array(rt.size-rt.skip),Tt=a.pos-rt.size,O=dt.length;for(;a.pos>Tt;)O=y(rt.start,dt,O);q=new ic(dt,K-rt.start,n),E=rt.start-S}else{let dt=a.pos-z;a.next();let Tt=[],O=[],te=D>=o?D:-1,Ht=0,Lt=K;for(;a.pos>dt;)te>=0&&a.id==te&&a.size>=0?(a.end<=Lt-i&&(p(Tt,O,P,Ht,a.end,Lt,te,$,H),Ht=Tt.length,Lt=a.end),a.next()):L>2500?f(P,dt,Tt,O):u(P,dt,Tt,O,te,L+1);if(te>=0&&Ht>0&&Ht<Tt.length&&p(Tt,O,P,Ht,P,Lt,te,$,H),Tt.reverse(),O.reverse(),te>-1&&Ht>0){let Xt=d(U,H);q=s7(U,Tt,O,0,Tt.length,0,K-P,Xt,Xt)}else q=m(U,Tt,O,K-P,$-K,H)}_.push(q),I.push(E)}function f(S,w,_,I){let N=[],L=0,D=-1;for(;a.pos>w;){let{id:P,start:K,end:z,size:$}=a;if($>4)a.next();else{if(D>-1&&K<D)break;D<0&&(D=z-i),N.push(P,K,z),L++,a.next()}}if(L){let P=new Uint16Array(L*4),K=N[N.length-2];for(let z=N.length-3,$=0;z>=0;z-=3)P[$++]=N[z],P[$++]=N[z+1]-K,P[$++]=N[z+2]-K,P[$++]=$;_.push(new ic(P,N[2]-K,n)),I.push(K-S)}}function d(S,w){return(_,I,N)=>{let L=0,D=_.length-1,P,K;if(D>=0&&(P=_[D])instanceof dr){if(!D&&P.type==S&&P.length==N)return P;(K=P.prop(De.lookAhead))&&(L=I[D]+P.length+K)}return m(S,_,I,N,L,w)}}function p(S,w,_,I,N,L,D,P,K){let z=[],$=[];for(;S.length>I;)z.push(S.pop()),$.push(w.pop()+_-N);S.push(m(n.types[D],z,$,L-N,P-L,K)),w.push(N-_)}function m(S,w,_,I,N,L,D){if(L){let P=[De.contextHash,L];D=D?[P].concat(D):[P]}if(N>25){let P=[De.lookAhead,N];D=D?[P].concat(D):[P]}return new dr(S,w,_,I,D)}function g(S,w){let _=a.fork(),I=0,N=0,L=0,D=_.end-i,P={size:0,start:0,skip:0};t:for(let K=_.pos-S;_.pos>K;){let z=_.size;if(_.id==w&&z>=0){P.size=I,P.start=N,P.skip=L,L+=4,I+=4,_.next();continue}let $=_.pos-z;if(z<0||$<K||_.start<D)break;let H=_.id>=o?4:0,U=_.start;for(_.next();_.pos>$;){if(_.size<0)if(_.size==-3)H+=4;else break t;else _.id>=o&&(H+=4);_.next()}N=U,I+=z,L+=H}return(w<0||I==S)&&(P.size=I,P.start=N,P.skip=L),P.size>4?P:void 0}function y(S,w,_){let{id:I,start:N,end:L,size:D}=a;if(a.next(),D>=0&&I<o){let P=_;if(D>4){let K=a.pos-(D-4);for(;a.pos>K;)_=y(S,w,_)}w[--_]=P,w[--_]=L-S,w[--_]=N-S,w[--_]=I}else D==-3?c=I:D==-4&&(h=I);return _}let b=[],x=[];for(;a.pos>0;)u(e.start||0,e.bufferStart||0,b,x,-1,0);let T=(t=e.length)!==null&&t!==void 0?t:b.length?x[0]+b[0].length:0;return new dr(l[e.topID],b.reverse(),x.reverse(),T)}const g_=new WeakMap;function h2(e,t){if(!e.isAnonymous||t instanceof ic||t.type!=e)return 1;let r=g_.get(t);if(r==null){r=1;for(let n of t.children){if(n.type!=e||!(n instanceof dr)){r=1;break}r+=h2(e,n)}g_.set(t,r)}return r}function s7(e,t,r,n,i,s,o,a,l){let c=0;for(let p=n;p<i;p++)c+=h2(e,t[p]);let h=Math.ceil(c*1.5/8),u=[],f=[];function d(p,m,g,y,b){for(let x=g;x<y;){let T=x,S=m[x],w=h2(e,p[x]);for(x++;x<y;x++){let _=h2(e,p[x]);if(w+_>=h)break;w+=_}if(x==T+1){if(w>h){let _=p[T];d(_.children,_.positions,0,_.children.length,m[T]+b);continue}u.push(p[T])}else{let _=m[x-1]+p[x-1].length-S;u.push(s7(e,p,m,T,x,S,_,null,l))}f.push(S+b-s)}}return d(t,r,n,i,0),(a||l)(u,f,o)}class DEt{constructor(){this.map=new WeakMap}setBuffer(t,r,n){let i=this.map.get(t);i||this.map.set(t,i=new Map),i.set(r,n)}getBuffer(t,r){let n=this.map.get(t);return n&&n.get(r)}set(t,r){t instanceof Fo?this.setBuffer(t.context.buffer,t.index,r):t instanceof Pn&&this.map.set(t.tree,r)}get(t){return t instanceof Fo?this.getBuffer(t.context.buffer,t.index):t instanceof Pn?this.map.get(t.tree):void 0}cursorSet(t,r){t.buffer?this.setBuffer(t.buffer.buffer,t.index,r):this.map.set(t.tree,r)}cursorGet(t){return t.buffer?this.getBuffer(t.buffer.buffer,t.index):this.map.get(t.tree)}}class Wa{constructor(t,r,n,i,s=!1,o=!1){this.from=t,this.to=r,this.tree=n,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,r=[],n=!1){let i=[new Wa(0,t.length,t,0,!1,n)];for(let s of r)s.to>t.length&&i.push(s);return i}static applyChanges(t,r,n=128){if(!r.length)return t;let i=[],s=1,o=t.length?t[0]:null;for(let a=0,l=0,c=0;;a++){let h=a<r.length?r[a]:null,u=h?h.fromA:1e9;if(u-l>=n)for(;o&&o.from<u;){let f=o;if(l>=f.from||u<=f.to||c){let d=Math.max(f.from,l)-c,p=Math.min(f.to,u)-c;f=d>=p?null:new Wa(d,p,f.tree,f.offset+c,a>0,!!h)}if(f&&i.push(f),o.to>u)break;o=s<t.length?t[s++]:null}if(!h)break;l=h.toA,c=h.toA-h.toB}return i}}let YI=class{startParse(t,r,n){return typeof t=="string"&&(t=new TQ(t)),n=n?n.length?n.map(i=>new ys(i.from,i.to)):[new ys(0,0)]:[new ys(0,t.length)],this.createParse(t,r||[],n)}parse(t,r,n){let i=this.startParse(t,r,n);for(;;){let s=i.advance();if(s)return s}}};class TQ{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,r){return this.string.slice(t,r)}}function BEt(e){return(t,r,n,i)=>new MQ(t,e,r,n,i)}class y_{constructor(t,r,n,i,s){this.parser=t,this.parse=r,this.overlay=n,this.target=i,this.from=s}}function b_(e){if(!e.length||e.some(t=>t.from>=t.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(e))}class _Q{constructor(t,r,n,i,s,o,a){this.parser=t,this.predicate=r,this.mounts=n,this.index=i,this.start=s,this.target=o,this.prev=a,this.depth=0,this.ranges=[]}}const I3=new De({perNode:!0});class MQ{constructor(t,r,n,i,s){this.nest=r,this.input=n,this.fragments=i,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=t}advance(){if(this.baseParse){let n=this.baseParse.advance();if(!n)return null;if(this.baseParse=null,this.baseTree=n,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let n=this.baseTree;return this.stoppedAt!=null&&(n=new dr(n.type,n.children,n.positions,n.length,n.propValues.concat([[I3,this.stoppedAt]]))),n}let t=this.inner[this.innerDone],r=t.parse.advance();if(r){this.innerDone++;let n=Object.assign(Object.create(null),t.target.props);n[De.mounted.id]=new _m(r,t.overlay,t.parser),t.target.props=n}return null}get parsedPos(){if(this.baseParse)return 0;let t=this.input.length;for(let r=this.innerDone;r<this.inner.length;r++)this.inner[r].from<t&&(t=Math.min(t,this.inner[r].parse.parsedPos));return t}stopAt(t){if(this.stoppedAt=t,this.baseParse)this.baseParse.stopAt(t);else for(let r=this.innerDone;r<this.inner.length;r++)this.inner[r].parse.stopAt(t)}startInner(){let t=new LQ(this.fragments),r=null,n=null,i=new Ib(new Pn(this.baseTree,this.ranges[0].from,0,null),Lr.IncludeAnonymous|Lr.IgnoreMounts);t:for(let s,o;;){let a=!0,l;if(this.stoppedAt!=null&&i.from>=this.stoppedAt)a=!1;else if(t.hasNode(i)){if(r){let c=r.mounts.find(h=>h.frag.from<=i.from&&h.frag.to>=i.to&&h.mount.overlay);if(c)for(let h of c.mount.overlay){let u=h.from+c.pos,f=h.to+c.pos;u>=i.from&&f<=i.to&&!r.ranges.some(d=>d.from<f&&d.to>u)&&r.ranges.push({from:u,to:f})}}a=!1}else if(n&&(o=AQ(n.ranges,i.from,i.to)))a=o!=2;else if(!i.type.isAnonymous&&(s=this.nest(i,this.input))&&(i.from<i.to||!s.overlay)){i.tree||(EQ(i),r&&r.depth++,n&&n.depth++);let c=t.findMounts(i.from,s.parser);if(typeof s.overlay=="function")r=new _Q(s.parser,s.overlay,c,this.inner.length,i.from,i.tree,r);else{let h=w_(this.ranges,s.overlay||(i.from<i.to?[new ys(i.from,i.to)]:[]));h.length&&b_(h),(h.length||!s.overlay)&&this.inner.push(new y_(s.parser,h.length?s.parser.startParse(this.input,k_(c,h),h):s.parser.startParse(""),s.overlay?s.overlay.map(u=>new ys(u.from-i.from,u.to-i.from)):null,i.tree,h.length?h[0].from:i.from)),s.overlay?h.length&&(n={ranges:h,depth:0,prev:n}):a=!1}}else if(r&&(l=r.predicate(i))&&(l===!0&&(l=new ys(i.from,i.to)),l.from<l.to)){let c=r.ranges.length-1;c>=0&&r.ranges[c].to==l.from?r.ranges[c]={from:r.ranges[c].from,to:l.to}:r.ranges.push(l)}if(a&&i.firstChild())r&&r.depth++,n&&n.depth++;else for(;!i.nextSibling();){if(!i.parent())break t;if(r&&!--r.depth){let c=w_(this.ranges,r.ranges);c.length&&(b_(c),this.inner.splice(r.index,0,new y_(r.parser,r.parser.startParse(this.input,k_(r.mounts,c),c),r.ranges.map(h=>new ys(h.from-r.start,h.to-r.start)),r.target,c[0].from))),r=r.prev}n&&!--n.depth&&(n=n.prev)}}}}function AQ(e,t,r){for(let n of e){if(n.from>=r)break;if(n.to>t)return n.from<=t&&n.to>=r?2:1}return 0}function x_(e,t,r,n,i,s){if(t<r){let o=e.buffer[t+1];n.push(e.slice(t,r,o)),i.push(o-s)}}function EQ(e){let{node:t}=e,r=[],n=t.context.buffer;do r.push(e.index),e.parent();while(!e.tree);let i=e.tree,s=i.children.indexOf(n),o=i.children[s],a=o.buffer,l=[s];function c(h,u,f,d,p,m){let g=r[m],y=[],b=[];x_(o,h,g,y,b,d);let x=a[g+1],T=a[g+2];l.push(y.length);let S=m?c(g+4,a[g+3],o.set.types[a[g]],x,T-x,m-1):t.toTree();return y.push(S),b.push(x-d),x_(o,a[g+3],u,y,b,d),new dr(f,y,b,p)}i.children[s]=c(0,a.length,ns.none,0,o.length,r.length-1);for(let h of l){let u=e.tree.children[h],f=e.tree.positions[h];e.yield(new Pn(u,f+e.from,h,e._tree))}}class v_{constructor(t,r){this.offset=r,this.done=!1,this.cursor=t.cursor(Lr.IncludeAnonymous|Lr.IgnoreMounts)}moveTo(t){let{cursor:r}=this,n=t-this.offset;for(;!this.done&&r.from<n;)r.to>=t&&r.enter(n,1,Lr.IgnoreOverlays|Lr.ExcludeBuffers)||r.next(!1)||(this.done=!0)}hasNode(t){if(this.moveTo(t.from),!this.done&&this.cursor.from+this.offset==t.from&&this.cursor.tree)for(let r=this.cursor.tree;;){if(r==t.tree)return!0;if(r.children.length&&r.positions[0]==0&&r.children[0]instanceof dr)r=r.children[0];else break}return!1}}class LQ{constructor(t){var r;if(this.fragments=t,this.curTo=0,this.fragI=0,t.length){let n=this.curFrag=t[0];this.curTo=(r=n.tree.prop(I3))!==null&&r!==void 0?r:n.to,this.inner=new v_(n.tree,-n.offset)}else this.curFrag=this.inner=null}hasNode(t){for(;this.curFrag&&t.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=t.from&&this.curTo>=t.to&&this.inner.hasNode(t)}nextFrag(){var t;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let r=this.curFrag=this.fragments[this.fragI];this.curTo=(t=r.tree.prop(I3))!==null&&t!==void 0?t:r.to,this.inner=new v_(r.tree,-r.offset)}}findMounts(t,r){var n;let i=[];if(this.inner){this.inner.cursor.moveTo(t,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(n=s.tree)===null||n===void 0?void 0:n.prop(De.mounted);if(o&&o.parser==r)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=s.to)break;l.tree==this.curFrag.tree&&i.push({frag:l,pos:s.from-l.offset,mount:o})}}}return i}}function w_(e,t){let r=null,n=t;for(let i=1,s=0;i<e.length;i++){let o=e[i-1].to,a=e[i].from;for(;s<n.length;s++){let l=n[s];if(l.from>=a)break;l.to<=o||(r||(n=r=t.slice()),l.from<o?(r[s]=new ys(l.from,o),l.to>a&&r.splice(s+1,0,new ys(a,l.to))):l.to>a?r[s--]=new ys(a,l.to):r.splice(s--,1))}}return n}function OQ(e,t,r,n){let i=0,s=0,o=!1,a=!1,l=-1e9,c=[];for(;;){let h=i==e.length?1e9:o?e[i].to:e[i].from,u=s==t.length?1e9:a?t[s].to:t[s].from;if(o!=a){let f=Math.max(l,r),d=Math.min(h,u,n);f<d&&c.push(new ys(f,d))}if(l=Math.min(h,u),l==1e9)break;h==l&&(o?(o=!1,i++):o=!0),u==l&&(a?(a=!1,s++):a=!0)}return c}function k_(e,t){let r=[];for(let{pos:n,mount:i,frag:s}of e){let o=n+(i.overlay?i.overlay[0].from:0),a=o+i.tree.length,l=Math.max(s.from,o),c=Math.min(s.to,a);if(i.overlay){let h=i.overlay.map(f=>new ys(f.from+n,f.to+n)),u=OQ(t,h,l,c);for(let f=0,d=l;;f++){let p=f==u.length,m=p?c:u[f].from;if(m>d&&r.push(new Wa(d,m,i.tree,-o,s.from>=d||s.openStart,s.to<=m||s.openEnd)),p)break;d=u[f].to}}else r.push(new Wa(l,c,i.tree,-o,s.from>=o||s.openStart,s.to<=a||s.openEnd))}return r}let B3=[],XI=[];(()=>{let e="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=0,r=0;t<e.length;t++)(t%2?XI:B3).push(r=r+e[t])})();function DQ(e){if(e<768)return!1;for(let t=0,r=B3.length;;){let n=t+r>>1;if(e<B3[n])r=n;else if(e>=XI[n])t=n+1;else return!0;if(t==r)return!1}}function C_(e){return e>=127462&&e<=127487}const S_=8205;function IQ(e,t,r=!0,n=!0){return(r?JI:BQ)(e,t,n)}function JI(e,t,r){if(t==e.length)return t;t&&ZI(e.charCodeAt(t))&&QI(e.charCodeAt(t-1))&&t--;let n=yw(e,t);for(t+=T_(n);t<e.length;){let i=yw(e,t);if(n==S_||i==S_||r&&DQ(i))t+=T_(i),n=i;else if(C_(i)){let s=0,o=t-2;for(;o>=0&&C_(yw(e,o));)s++,o-=2;if(s%2==0)break;t+=2}else break}return t}function BQ(e,t,r){for(;t>0;){let n=JI(e,t-2,r);if(n<t)return n;t--}return 0}function yw(e,t){let r=e.charCodeAt(t);if(!QI(r)||t+1==e.length)return r;let n=e.charCodeAt(t+1);return ZI(n)?(r-55296<<10)+(n-56320)+65536:r}function ZI(e){return e>=56320&&e<57344}function QI(e){return e>=55296&&e<56320}function T_(e){return e<65536?1:2}let Ve=class tB{lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,r,n){[t,r]=ld(this,t,r);let i=[];return this.decompose(0,t,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(r,this.length,i,1),u2.from(i,this.length-(r-t)+n.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,r=this.length){[t,r]=ld(this,t,r);let n=[];return this.decompose(t,r,n,0),u2.from(n,r-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let r=this.scanIdentical(t,1),n=this.length-this.scanIdentical(t,-1),i=new Fp(this),s=new Fp(t);for(let o=r,a=r;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=n)return!0}}iter(t=1){return new Fp(this,t)}iterRange(t,r=this.length){return new eB(this,t,r)}iterLines(t,r){let n;if(t==null)n=this.iter();else{r==null&&(r=this.lines+1);let i=this.line(t).from;n=this.iterRange(i,Math.max(i,r==this.lines+1?this.length:r<=1?0:this.line(r-1).to))}return new rB(n)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}constructor(){}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?tB.empty:t.length<=32?new Pr(t):u2.from(Pr.split(t,[]))}};class Pr extends Ve{constructor(t,r=RQ(t)){super(),this.text=t,this.length=r}get lines(){return this.text.length}get children(){return null}lineInner(t,r,n,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((r?n:a)>=t)return new PQ(i,a,n,o);i=a+1,n++}}decompose(t,r,n,i){let s=t<=0&&r>=this.length?this:new Pr(__(this.text,t,r),Math.min(r,this.length)-Math.max(0,t));if(i&1){let o=n.pop(),a=f2(s.text,o.text.slice(),0,s.length);if(a.length<=32)n.push(new Pr(a,o.length+s.length));else{let l=a.length>>1;n.push(new Pr(a.slice(0,l)),new Pr(a.slice(l)))}}else n.push(s)}replace(t,r,n){if(!(n instanceof Pr))return super.replace(t,r,n);[t,r]=ld(this,t,r);let i=f2(this.text,f2(n.text,__(this.text,0,t)),r),s=this.length+n.length-(r-t);return i.length<=32?new Pr(i,s):u2.from(Pr.split(i,[]),s)}sliceString(t,r=this.length,n=`
`){[t,r]=ld(this,t,r);let i="";for(let s=0,o=0;s<=r&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>t&&o&&(i+=n),t<l&&r>s&&(i+=a.slice(Math.max(0,t-s),r-s)),s=l+1}return i}flatten(t){for(let r of this.text)t.push(r)}scanIdentical(){return 0}static split(t,r){let n=[],i=-1;for(let s of t)n.push(s),i+=s.length+1,n.length==32&&(r.push(new Pr(n,i)),n=[],i=-1);return i>-1&&r.push(new Pr(n,i)),r}}let u2=class zu extends Ve{constructor(t,r){super(),this.children=t,this.length=r,this.lines=0;for(let n of t)this.lines+=n.lines}lineInner(t,r,n,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=n+o.lines-1;if((r?l:a)>=t)return o.lineInner(t,r,n,i);i=a+1,n=l+1}}decompose(t,r,n,i){for(let s=0,o=0;o<=r&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(t<=l&&r>=o){let c=i&((o<=t?1:0)|(l>=r?2:0));o>=t&&l<=r&&!c?n.push(a):a.decompose(t-o,r-o,n,c)}o=l+1}}replace(t,r,n){if([t,r]=ld(this,t,r),n.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(t>=s&&r<=a){let l=o.replace(t-s,r-s,n),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let h=this.children.slice();return h[i]=l,new zu(h,this.length-(r-t)+n.length)}return super.replace(s,a,l)}s=a+1}return super.replace(t,r,n)}sliceString(t,r=this.length,n=`
`){[t,r]=ld(this,t,r);let i="";for(let s=0,o=0;s<this.children.length&&o<=r;s++){let a=this.children[s],l=o+a.length;o>t&&s&&(i+=n),t<l&&r>o&&(i+=a.sliceString(t-o,r-o,n)),o=l+1}return i}flatten(t){for(let r of this.children)r.flatten(t)}scanIdentical(t,r){if(!(t instanceof zu))return 0;let n=0,[i,s,o,a]=r>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;i+=r,s+=r){if(i==o||s==a)return n;let l=this.children[i],c=t.children[s];if(l!=c)return n+l.scanIdentical(c,r);n+=l.length+1}}static from(t,r=t.reduce((n,i)=>n+i.length+1,-1)){let n=0;for(let d of t)n+=d.lines;if(n<32){let d=[];for(let p of t)p.flatten(d);return new Pr(d,r)}let i=Math.max(32,n>>5),s=i<<1,o=i>>1,a=[],l=0,c=-1,h=[];function u(d){let p;if(d.lines>s&&d instanceof zu)for(let m of d.children)u(m);else d.lines>o&&(l>o||!l)?(f(),a.push(d)):d instanceof Pr&&l&&(p=h[h.length-1])instanceof Pr&&d.lines+p.lines<=32?(l+=d.lines,c+=d.length+1,h[h.length-1]=new Pr(p.text.concat(d.text),p.length+1+d.length)):(l+d.lines>i&&f(),l+=d.lines,c+=d.length+1,h.push(d))}function f(){l!=0&&(a.push(h.length==1?h[0]:zu.from(h,c)),c=-1,l=h.length=0)}for(let d of t)u(d);return f(),a.length==1?a[0]:new zu(a,r)}};Ve.empty=new Pr([""],0);function RQ(e){let t=-1;for(let r of e)t+=r.length+1;return t}function f2(e,t,r=0,n=1e9){for(let i=0,s=0,o=!0;s<e.length&&i<=n;s++){let a=e[s],l=i+a.length;l>=r&&(l>n&&(a=a.slice(0,n-i)),i<r&&(a=a.slice(r-i)),o?(t[t.length-1]+=a,o=!1):t.push(a)),i=l+1}return t}function __(e,t,r){return f2(e,[""],t,r)}class Fp{constructor(t,r=1){this.dir=r,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[r>0?1:(t instanceof Pr?t.text.length:t.children.length)<<1]}nextInner(t,r){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],s=this.offsets[n],o=s>>1,a=i instanceof Pr?i.text.length:i.children.length;if(o==(r>0?a:0)){if(n==0)return this.done=!0,this.value="",this;r>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(r>0?0:1)){if(this.offsets[n]+=r,t==0)return this.lineBreak=!0,this.value=`
`,this;t--}else if(i instanceof Pr){let l=i.text[o+(r<0?-1:0)];if(this.offsets[n]+=r,l.length>Math.max(0,t))return this.value=t==0?l:r>0?l.slice(t):l.slice(0,l.length-t),this;t-=l.length}else{let l=i.children[o+(r<0?-1:0)];t>l.length?(t-=l.length,this.offsets[n]+=r):(r<0&&this.offsets[n]--,this.nodes.push(l),this.offsets.push(r>0?1:(l instanceof Pr?l.text.length:l.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class eB{constructor(t,r,n){this.value="",this.done=!1,this.cursor=new Fp(t,r>n?-1:1),this.pos=r>n?t.length:0,this.from=Math.min(r,n),this.to=Math.max(r,n)}nextInner(t,r){if(r<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,r<0?this.pos-this.to:this.from-this.pos);let n=r<0?this.pos-this.from:this.to-this.pos;t>n&&(t=n),n-=t;let{value:i}=this.cursor.next(t);return this.pos+=(i.length+t)*r,this.value=i.length<=n?i:r<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class rB{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:r,lineBreak:n,value:i}=this.inner.next(t);return r&&this.afterBreak?(this.value="",this.afterBreak=!1):r?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ve.prototype[Symbol.iterator]=function(){return this.iter()},Fp.prototype[Symbol.iterator]=eB.prototype[Symbol.iterator]=rB.prototype[Symbol.iterator]=function(){return this});class PQ{constructor(t,r,n,i){this.from=t,this.to=r,this.number=n,this.text=i}get length(){return this.to-this.from}}function ld(e,t,r){return t=Math.max(0,Math.min(e.length,t)),[t,Math.max(t,Math.min(e.length,r))]}function wn(e,t,r=!0,n=!0){return IQ(e,t,r,n)}function NQ(e){return e>=56320&&e<57344}function FQ(e){return e>=55296&&e<56320}function Ci(e,t){let r=e.charCodeAt(t);if(!FQ(r)||t+1==e.length)return r;let n=e.charCodeAt(t+1);return NQ(n)?(r-55296<<10)+(n-56320)+65536:r}function o7(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}function Ro(e){return e<65536?1:2}const R3=/\r\n?|\n/;var vn=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(vn||(vn={}));class Wo{constructor(t){this.sections=t}get length(){let t=0;for(let r=0;r<this.sections.length;r+=2)t+=this.sections[r];return t}get newLength(){let t=0;for(let r=0;r<this.sections.length;r+=2){let n=this.sections[r+1];t+=n<0?this.sections[r]:n}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let r=0,n=0,i=0;r<this.sections.length;){let s=this.sections[r++],o=this.sections[r++];o<0?(t(n,i,s),i+=s):i+=o,n+=s}}iterChangedRanges(t,r=!1){P3(this,t,r)}get invertedDesc(){let t=[];for(let r=0;r<this.sections.length;){let n=this.sections[r++],i=this.sections[r++];i<0?t.push(n,i):t.push(i,n)}return new Wo(t)}composeDesc(t){return this.empty?t:t.empty?this:nB(this,t)}mapDesc(t,r=!1){return t.empty?this:N3(this,t,r)}mapPos(t,r=-1,n=vn.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=i+a;if(l<0){if(c>t)return s+(t-i);s+=a}else{if(n!=vn.Simple&&c>=t&&(n==vn.TrackDel&&i<t&&c>t||n==vn.TrackBefore&&i<t||n==vn.TrackAfter&&c>t))return null;if(c>t||c==t&&r<0&&!a)return t==i||r<0?s:s+l;s+=l}i=c}if(t>i)throw new RangeError(`Position ${t} is out of range for changeset of length ${i}`);return s}touchesRange(t,r=t){for(let n=0,i=0;n<this.sections.length&&i<=r;){let s=this.sections[n++],o=this.sections[n++],a=i+s;if(o>=0&&i<=r&&a>=t)return i<t&&a>r?"cover":!0;i=a}return!1}toString(){let t="";for(let r=0;r<this.sections.length;){let n=this.sections[r++],i=this.sections[r++];t+=(t?" ":"")+n+(i>=0?":"+i:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(r=>typeof r!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Wo(t)}static create(t){return new Wo(t)}}class Jr extends Wo{constructor(t,r){super(t),this.inserted=r}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return P3(this,(r,n,i,s,o)=>t=t.replace(i,i+(n-r),o),!1),t}mapDesc(t,r=!1){return N3(this,t,r,!0)}invert(t){let r=this.sections.slice(),n=[];for(let i=0,s=0;i<r.length;i+=2){let o=r[i],a=r[i+1];if(a>=0){r[i]=a,r[i+1]=o;let l=i>>1;for(;n.length<l;)n.push(Ve.empty);n.push(o?t.slice(s,s+o):Ve.empty)}s+=o}return new Jr(r,n)}compose(t){return this.empty?t:t.empty?this:nB(this,t,!0)}map(t,r=!1){return t.empty?this:N3(this,t,r,!0)}iterChanges(t,r=!1){P3(this,t,r)}get desc(){return Wo.create(this.sections)}filter(t){let r=[],n=[],i=[],s=new Am(this);t:for(let o=0,a=0;;){let l=o==t.length?1e9:t[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break t;let h=Math.min(s.len,l-a);On(i,h,-1);let u=s.ins==-1?-1:s.off==0?s.ins:0;On(r,h,u),u>0&&jl(n,r,s.text),s.forward(h),a+=h}let c=t[o++];for(;a<c;){if(s.done)break t;let h=Math.min(s.len,c-a);On(r,h,-1),On(i,h,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(h),a+=h}}return{changes:new Jr(r,n),filtered:Wo.create(i)}}toJSON(){let t=[];for(let r=0;r<this.sections.length;r+=2){let n=this.sections[r],i=this.sections[r+1];i<0?t.push(n):i==0?t.push([n]):t.push([n].concat(this.inserted[r>>1].toJSON()))}return t}static of(t,r,n){let i=[],s=[],o=0,a=null;function l(h=!1){if(!h&&!i.length)return;o<r&&On(i,r-o,-1);let u=new Jr(i,s);a=a?a.compose(u.map(a)):u,i=[],s=[],o=0}function c(h){if(Array.isArray(h))for(let u of h)c(u);else if(h instanceof Jr){if(h.length!=r)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${r})`);l(),a=a?a.compose(h.map(a)):h}else{let{from:u,to:f=u,insert:d}=h;if(u>f||u<0||f>r)throw new RangeError(`Invalid change range ${u} to ${f} (in doc of length ${r})`);let p=d?typeof d=="string"?Ve.of(d.split(n||R3)):d:Ve.empty,m=p.length;if(u==f&&m==0)return;u<o&&l(),u>o&&On(i,u-o,-1),On(i,f-u,m),jl(s,i,p),o=f}}return c(t),l(!a),a}static empty(t){return new Jr(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let r=[],n=[];for(let i=0;i<t.length;i++){let s=t[i];if(typeof s=="number")r.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)r.push(s[0],0);else{for(;n.length<i;)n.push(Ve.empty);n[i]=Ve.of(s.slice(1)),r.push(s[0],n[i].length)}}}return new Jr(r,n)}static createSet(t,r){return new Jr(t,r)}}function On(e,t,r,n=!1){if(t==0&&r<=0)return;let i=e.length-2;i>=0&&r<=0&&r==e[i+1]?e[i]+=t:i>=0&&t==0&&e[i]==0?e[i+1]+=r:n?(e[i]+=t,e[i+1]+=r):e.push(t,r)}function jl(e,t,r){if(r.length==0)return;let n=t.length-2>>1;if(n<e.length)e[e.length-1]=e[e.length-1].append(r);else{for(;e.length<n;)e.push(Ve.empty);e.push(r)}}function P3(e,t,r){let n=e.inserted;for(let i=0,s=0,o=0;o<e.sections.length;){let a=e.sections[o++],l=e.sections[o++];if(l<0)i+=a,s+=a;else{let c=i,h=s,u=Ve.empty;for(;c+=a,h+=l,l&&n&&(u=u.append(n[o-2>>1])),!(r||o==e.sections.length||e.sections[o+1]<0);)a=e.sections[o++],l=e.sections[o++];t(i,c,s,h,u),i=c,s=h}}}function N3(e,t,r,n=!1){let i=[],s=n?[]:null,o=new Am(e),a=new Am(t);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);On(i,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!r))){let c=a.len;for(On(i,a.ins,-1);c;){let h=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=h&&(On(i,0,o.ins),s&&jl(s,i,o.text),l=o.i),o.forward(h),c-=h}a.next()}else if(o.ins>=0){let c=0,h=o.len;for(;h;)if(a.ins==-1){let u=Math.min(h,a.len);c+=u,h-=u,a.forward(u)}else if(a.ins==0&&a.len<h)h-=a.len,a.next();else break;On(i,c,l<o.i?o.ins:0),s&&l<o.i&&jl(s,i,o.text),l=o.i,o.forward(o.len-h)}else{if(o.done&&a.done)return s?Jr.createSet(i,s):Wo.create(i);throw new Error("Mismatched change set lengths")}}}function nB(e,t,r=!1){let n=[],i=r?[]:null,s=new Am(e),o=new Am(t);for(let a=!1;;){if(s.done&&o.done)return i?Jr.createSet(n,i):Wo.create(n);if(s.ins==0)On(n,s.len,0,a),s.next();else if(o.len==0&&!o.done)On(n,0,o.ins,a),i&&jl(i,n,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=n.length;if(s.ins==-1){let h=o.ins==-1?-1:o.off?0:o.ins;On(n,l,h,a),i&&h&&jl(i,n,o.text)}else o.ins==-1?(On(n,s.off?0:s.len,l,a),i&&jl(i,n,s.textBit(l))):(On(n,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&jl(i,n,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||n.length>c),s.forward2(l),o.forward(l)}}}}class Am{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length?Ve.empty:t[r]}textBit(t){let{inserted:r}=this.set,n=this.i-2>>1;return n>=r.length&&!t?Ve.empty:r[n].slice(this.off,t==null?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){this.ins==-1?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}let ty=class F3{constructor(t,r,n){this.from=t,this.to=r,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let t=this.flags&7;return t==7?null:t}get goalColumn(){let t=this.flags>>6;return t==16777215?void 0:t}map(t,r=-1){let n,i;return this.empty?n=i=t.mapPos(this.from,r):(n=t.mapPos(this.from,1),i=t.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new F3(n,i,this.flags)}extend(t,r=t){if(t<=this.anchor&&r>=this.anchor)return ot.range(t,r);let n=Math.abs(t-this.anchor)>Math.abs(r-this.anchor)?t:r;return ot.range(this.anchor,n)}eq(t,r=!1){return this.anchor==t.anchor&&this.head==t.head&&(!r||!this.empty||this.assoc==t.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ot.range(t.anchor,t.head)}static create(t,r,n){return new F3(t,r,n)}};class ot{constructor(t,r){this.ranges=t,this.mainIndex=r}map(t,r=-1){return t.empty?this:ot.create(this.ranges.map(n=>n.map(t,r)),this.mainIndex)}eq(t,r=!1){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(t.ranges[n],r))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ot([this.main],0)}addRange(t,r=!0){return ot.create([t].concat(this.ranges),r?0:this.mainIndex+1)}replaceRange(t,r=this.mainIndex){let n=this.ranges.slice();return n[r]=t,ot.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ot(t.ranges.map(r=>ty.fromJSON(r)),t.main)}static single(t,r=t){return new ot([ot.range(t,r)],0)}static create(t,r=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<t.length;i++){let s=t[i];if(s.empty?s.from<=n:s.from<n)return ot.normalized(t.slice(),r);n=s.to}return new ot(t,r)}static cursor(t,r=0,n,i){return ty.create(t,t,(r==0?0:r<0?8:16)|(n==null?7:Math.min(6,n))|(i??16777215)<<6)}static range(t,r,n,i){let s=(n??16777215)<<6|(i==null?7:Math.min(6,i));return r<t?ty.create(r,t,48|s):ty.create(t,r,(r>t?8:0)|s)}static normalized(t,r=0){let n=t[r];t.sort((i,s)=>i.from-s.from),r=t.indexOf(n);for(let i=1;i<t.length;i++){let s=t[i],o=t[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=r&&r--,t.splice(--i,2,s.anchor>s.head?ot.range(l,a):ot.range(a,l))}}return new ot(t,r)}}function iB(e,t){for(let r of e.ranges)if(r.to>t)throw new RangeError("Selection points outside of document")}let a7=0;class Nt{constructor(t,r,n,i,s){this.combine=t,this.compareInput=r,this.compare=n,this.isStatic=i,this.id=a7++,this.default=t([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(t={}){return new Nt(t.combine||(r=>r),t.compareInput||((r,n)=>r===n),t.compare||(t.combine?(r,n)=>r===n:l7),!!t.static,t.enables)}of(t){return new d2([],this,0,t)}compute(t,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new d2(t,this,1,r)}computeN(t,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new d2(t,this,2,r)}from(t,r){return r||(r=n=>n),this.compute([t],n=>r(n.field(t)))}}function l7(e,t){return e==t||e.length==t.length&&e.every((r,n)=>r===t[n])}class d2{constructor(t,r,n,i){this.dependencies=t,this.facet=r,this.type=n,this.value=i,this.id=a7++}dynamicSlot(t){var r;let n=this.value,i=this.facet.compareInput,s=this.id,o=t[s]>>1,a=this.type==2,l=!1,c=!1,h=[];for(let u of this.dependencies)u=="doc"?l=!0:u=="selection"?c=!0:((r=t[u.id])!==null&&r!==void 0?r:1)&1||h.push(t[u.id]);return{create(u){return u.values[o]=n(u),1},update(u,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||$3(u,h)){let d=n(u);if(a?!M_(d,u.values[o],i):!i(d,u.values[o]))return u.values[o]=d,1}return 0},reconfigure:(u,f)=>{let d,p=f.config.address[s];if(p!=null){let m=Bb(f,p);if(this.dependencies.every(g=>g instanceof Nt?f.facet(g)===u.facet(g):g instanceof hn?f.field(g,!1)==u.field(g,!1):!0)||(a?M_(d=n(u),m,i):i(d=n(u),m)))return u.values[o]=m,0}else d=n(u);return u.values[o]=d,1}}}}function M_(e,t,r){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1;return!0}function $3(e,t){let r=!1;for(let n of t)$p(e,n)&1&&(r=!0);return r}function $Q(e,t,r){let n=r.map(l=>e[l.id]),i=r.map(l=>l.type),s=n.filter(l=>!(l&1)),o=e[t.id]>>1;function a(l){let c=[];for(let h=0;h<n.length;h++){let u=Bb(l,n[h]);if(i[h]==2)for(let f of u)c.push(f);else c.push(u)}return t.combine(c)}return{create(l){for(let c of n)$p(l,c);return l.values[o]=a(l),1},update(l,c){if(!$3(l,s))return 0;let h=a(l);return t.compare(h,l.values[o])?0:(l.values[o]=h,1)},reconfigure(l,c){let h=$3(l,n),u=c.config.facets[t.id],f=c.facet(t);if(u&&!h&&l7(r,u))return l.values[o]=f,0;let d=a(l);return t.compare(d,f)?(l.values[o]=f,0):(l.values[o]=d,1)}}}const ey=Nt.define({static:!0});class hn{constructor(t,r,n,i,s){this.id=t,this.createF=r,this.updateF=n,this.compareF=i,this.spec=s,this.provides=void 0}static define(t){let r=new hn(a7++,t.create,t.update,t.compare||((n,i)=>n===i),t);return t.provide&&(r.provides=t.provide(r)),r}create(t){let r=t.facet(ey).find(n=>n.field==this);return((r==null?void 0:r.create)||this.createF)(t)}slot(t){let r=t[this.id]>>1;return{create:n=>(n.values[r]=this.create(n),1),update:(n,i)=>{let s=n.values[r],o=this.updateF(s,i);return this.compareF(s,o)?0:(n.values[r]=o,1)},reconfigure:(n,i)=>{let s=n.facet(ey),o=i.facet(ey),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(n.values[r]=a.create(n),1):i.config.address[this.id]!=null?(n.values[r]=i.field(this),0):(n.values[r]=this.create(n),1)}}}init(t){return[this,ey.of({field:this,create:t})]}get extension(){return this}}const sh={lowest:4,low:3,default:2,high:1,highest:0};function w0(e){return t=>new sB(t,e)}const Cc={highest:w0(sh.highest),high:w0(sh.high),default:w0(sh.default),low:w0(sh.low),lowest:w0(sh.lowest)};class sB{constructor(t,r){this.inner=t,this.prec=r}}class cd{of(t){return new z3(this,t)}reconfigure(t){return cd.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class z3{constructor(t,r){this.compartment=t,this.inner=r}}let A_=class oB{constructor(t,r,n,i,s,o){for(this.base=t,this.compartments=r,this.dynamicSlots=n,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(t){let r=this.address[t.id];return r==null?t.default:this.staticValues[r>>1]}static resolve(t,r,n){let i=[],s=Object.create(null),o=new Map;for(let f of zQ(t,r,o))f instanceof hn?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of i)a[f.id]=c.length<<1,c.push(d=>f.slot(d));let h=n==null?void 0:n.config.facets;for(let f in s){let d=s[f],p=d[0].facet,m=h&&h[f]||[];if(d.every(g=>g.type==0))if(a[p.id]=l.length<<1|1,l7(m,d))l.push(n.facet(p));else{let g=p.combine(d.map(y=>y.value));l.push(n&&p.compare(g,n.facet(p))?n.facet(p):g)}else{for(let g of d)g.type==0?(a[g.id]=l.length<<1|1,l.push(g.value)):(a[g.id]=c.length<<1,c.push(y=>g.dynamicSlot(y)));a[p.id]=c.length<<1,c.push(g=>$Q(g,p,d))}}let u=c.map(f=>f(a));return new oB(t,o,u,a,l,s)}};function zQ(e,t,r){let n=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let c=n[l].indexOf(o);c>-1&&n[l].splice(c,1),o instanceof z3&&r.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof z3){if(r.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=t.get(o.compartment)||o.inner;r.set(o.compartment,c),s(c,a)}else if(o instanceof sB)s(o.inner,o.prec);else if(o instanceof hn)n[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof d2)n[a].push(o),o.facet.extensions&&s(o.facet.extensions,sh.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(e,sh.default),n.reduce((o,a)=>o.concat(a))}function $p(e,t){if(t&1)return 2;let r=t>>1,n=e.status[r];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;e.status[r]=4;let i=e.computeSlot(e,e.config.dynamicSlots[r]);return e.status[r]=2|i}function Bb(e,t){return t&1?e.config.staticValues[t>>1]:e.values[t>>1]}const aB=Nt.define(),H3=Nt.define({combine:e=>e.some(t=>t),static:!0}),lB=Nt.define({combine:e=>e.length?e[0]:void 0,static:!0}),cB=Nt.define(),hB=Nt.define(),uB=Nt.define(),fB=Nt.define({combine:e=>e.length?e[0]:!1});class fl{constructor(t,r){this.type=t,this.value=r}static define(){return new HQ}}class HQ{of(t){return new fl(this,t)}}class qQ{constructor(t){this.map=t}of(t){return new ke(this,t)}}class ke{constructor(t,r){this.type=t,this.value=r}map(t){let r=this.type.map(this.value,t);return r===void 0?void 0:r==this.value?this:new ke(this.type,r)}is(t){return this.type==t}static define(t={}){return new qQ(t.map||(r=>r))}static mapEffects(t,r){if(!t.length)return t;let n=[];for(let i of t){let s=i.map(r);s&&n.push(s)}return n}}ke.reconfigure=ke.define();ke.appendConfig=ke.define();let si=class V0{constructor(t,r,n,i,s,o){this.startState=t,this.changes=r,this.selection=n,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,n&&iB(n,r.newLength),s.some(a=>a.type==V0.time)||(this.annotations=s.concat(V0.time.of(Date.now())))}static create(t,r,n,i,s,o){return new V0(t,r,n,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let r of this.annotations)if(r.type==t)return r.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let r=this.annotation(V0.userEvent);return!!(r&&(r==t||r.length>t.length&&r.slice(0,t.length)==t&&r[t.length]=="."))}};si.time=fl.define();si.userEvent=fl.define();si.addToHistory=fl.define();si.remote=fl.define();function VQ(e,t){let r=[];for(let n=0,i=0;;){let s,o;if(n<e.length&&(i==t.length||t[i]>=e[n]))s=e[n++],o=e[n++];else if(i<t.length)s=t[i++],o=t[i++];else return r;!r.length||r[r.length-1]<s?r.push(s,o):r[r.length-1]<o&&(r[r.length-1]=o)}}function dB(e,t,r){var n;let i,s,o;return r?(i=t.changes,s=Jr.empty(t.changes.length),o=e.changes.compose(t.changes)):(i=t.changes.map(e.changes),s=e.changes.mapDesc(t.changes,!0),o=e.changes.compose(i)),{changes:o,selection:t.selection?t.selection.map(s):(n=e.selection)===null||n===void 0?void 0:n.map(i),effects:ke.mapEffects(e.effects,i).concat(ke.mapEffects(t.effects,s)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function q3(e,t,r){let n=t.selection,i=lf(t.annotations);return t.userEvent&&(i=i.concat(si.userEvent.of(t.userEvent))),{changes:t.changes instanceof Jr?t.changes:Jr.of(t.changes||[],r,e.facet(lB)),selection:n&&(n instanceof ot?n:ot.single(n.anchor,n.head)),effects:lf(t.effects),annotations:i,scrollIntoView:!!t.scrollIntoView}}function pB(e,t,r){let n=q3(e,t.length?t[0]:{},e.doc.length);t.length&&t[0].filter===!1&&(r=!1);for(let s=1;s<t.length;s++){t[s].filter===!1&&(r=!1);let o=!!t[s].sequential;n=dB(n,q3(e,t[s],o?n.changes.newLength:e.doc.length),o)}let i=si.create(e,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return jQ(r?WQ(i):i)}function WQ(e){let t=e.startState,r=!0;for(let i of t.facet(cB)){let s=i(e);if(s===!1){r=!1;break}Array.isArray(s)&&(r=r===!0?s:VQ(r,s))}if(r!==!0){let i,s;if(r===!1)s=e.changes.invertedDesc,i=Jr.empty(t.doc.length);else{let o=e.changes.filter(r);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}e=si.create(t,i,e.selection&&e.selection.map(s),ke.mapEffects(e.effects,s),e.annotations,e.scrollIntoView)}let n=t.facet(hB);for(let i=n.length-1;i>=0;i--){let s=n[i](e);s instanceof si?e=s:Array.isArray(s)&&s.length==1&&s[0]instanceof si?e=s[0]:e=pB(t,lf(s),!1)}return e}function jQ(e){let t=e.startState,r=t.facet(uB),n=e;for(let i=r.length-1;i>=0;i--){let s=r[i](e);s&&Object.keys(s).length&&(n=dB(n,q3(t,s,e.changes.newLength),!0))}return n==e?e:si.create(t,e.changes,e.selection,n.effects,n.annotations,n.scrollIntoView)}const UQ=[];function lf(e){return e==null?UQ:Array.isArray(e)?e:[e]}var Cr=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(Cr||(Cr={}));const GQ=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let V3;try{V3=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function KQ(e){if(V3)return V3.test(e);for(let t=0;t<e.length;t++){let r=e[t];if(/\w/.test(r)||r>""&&(r.toUpperCase()!=r.toLowerCase()||GQ.test(r)))return!0}return!1}function YQ(e){return t=>{if(!/\S/.test(t))return Cr.Space;if(KQ(t))return Cr.Word;for(let r=0;r<e.length;r++)if(t.indexOf(e[r])>-1)return Cr.Word;return Cr.Other}}let Sr=class Rs{constructor(t,r,n,i,s,o){this.config=t,this.doc=r,this.selection=n,this.values=i,this.status=t.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)$p(this,a<<1);this.computeSlot=null}field(t,r=!0){let n=this.config.address[t.id];if(n==null){if(r)throw new RangeError("Field is not present in this state");return}return $p(this,n),Bb(this,n)}update(...t){return pB(this,t,!0)}applyTransaction(t){let r=this.config,{base:n,compartments:i}=r;for(let a of t.effects)a.is(cd.reconfigure)?(r&&(i=new Map,r.compartments.forEach((l,c)=>i.set(c,l)),r=null),i.set(a.value.compartment,a.value.extension)):a.is(ke.reconfigure)?(r=null,n=a.value):a.is(ke.appendConfig)&&(r=null,n=lf(n).concat(a.value));let s;r?s=t.startState.values.slice():(r=A_.resolve(n,i,this),s=new Rs(r,this.doc,this.selection,r.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=t.startState.facet(H3)?t.newSelection:t.newSelection.asSingle();new Rs(r,t.newDoc,o,s,(a,l)=>l.update(a,t),t)}replaceSelection(t){return typeof t=="string"&&(t=this.toText(t)),this.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:t},range:ot.cursor(r.from+t.length)}))}changeByRange(t){let r=this.selection,n=t(r.ranges[0]),i=this.changes(n.changes),s=[n.range],o=lf(n.effects);for(let a=1;a<r.ranges.length;a++){let l=t(r.ranges[a]),c=this.changes(l.changes),h=c.map(i);for(let f=0;f<a;f++)s[f]=s[f].map(h);let u=i.mapDesc(c,!0);s.push(l.range.map(u)),i=i.compose(h),o=ke.mapEffects(o,h).concat(ke.mapEffects(lf(l.effects),u))}return{changes:i,selection:ot.create(s,r.mainIndex),effects:o}}changes(t=[]){return t instanceof Jr?t:Jr.of(t,this.doc.length,this.facet(Rs.lineSeparator))}toText(t){return Ve.of(t.split(this.facet(Rs.lineSeparator)||R3))}sliceDoc(t=0,r=this.doc.length){return this.doc.sliceString(t,r,this.lineBreak)}facet(t){let r=this.config.address[t.id];return r==null?t.default:($p(this,r),Bb(this,r))}toJSON(t){let r={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let n in t){let i=t[n];i instanceof hn&&this.config.address[i.id]!=null&&(r[n]=i.spec.toJSON(this.field(t[n]),this))}return r}static fromJSON(t,r={},n){if(!t||typeof t.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n){for(let s in n)if(Object.prototype.hasOwnProperty.call(t,s)){let o=n[s],a=t[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Rs.create({doc:t.doc,selection:ot.fromJSON(t.selection),extensions:r.extensions?i.concat([r.extensions]):i})}static create(t={}){let r=A_.resolve(t.extensions||[],new Map),n=t.doc instanceof Ve?t.doc:Ve.of((t.doc||"").split(r.staticFacet(Rs.lineSeparator)||R3)),i=t.selection?t.selection instanceof ot?t.selection:ot.single(t.selection.anchor,t.selection.head):ot.single(0);return iB(i,n.length),r.staticFacet(H3)||(i=i.asSingle()),new Rs(r,n,i,r.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Rs.tabSize)}get lineBreak(){return this.facet(Rs.lineSeparator)||`
`}get readOnly(){return this.facet(fB)}phrase(t,...r){for(let n of this.facet(Rs.phrases))if(Object.prototype.hasOwnProperty.call(n,t)){t=n[t];break}return r.length&&(t=t.replace(/\$(\$|\d*)/g,(n,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>r.length?n:r[s-1]})),t}languageDataAt(t,r,n=-1){let i=[];for(let s of this.facet(aB))for(let o of s(this,r,n))Object.prototype.hasOwnProperty.call(o,t)&&i.push(o[t]);return i}charCategorizer(t){return YQ(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:r,from:n,length:i}=this.doc.lineAt(t),s=this.charCategorizer(t),o=t-n,a=t-n;for(;o>0;){let l=wn(r,o,!1);if(s(r.slice(l,o))!=Cr.Word)break;o=l}for(;a<i;){let l=wn(r,a);if(s(r.slice(a,l))!=Cr.Word)break;a=l}return o==a?null:ot.range(o+n,a+n)}};Sr.allowMultipleSelections=H3;Sr.tabSize=Nt.define({combine:e=>e.length?e[0]:4});Sr.lineSeparator=lB;Sr.readOnly=fB;Sr.phrases=Nt.define({compare(e,t){let r=Object.keys(e),n=Object.keys(t);return r.length==n.length&&r.every(i=>e[i]==t[i])}});Sr.languageData=aB;Sr.changeFilter=cB;Sr.transactionFilter=hB;Sr.transactionExtender=uB;cd.reconfigure=ke.define();function ra(e,t,r={}){let n={};for(let i of e)for(let s of Object.keys(i)){let o=i[s],a=n[s];if(a===void 0)n[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(r,s))n[s]=r[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in t)n[i]===void 0&&(n[i]=t[i]);return n}class Yh{eq(t){return this==t}range(t,r=t){return Em.create(t,r,this)}}Yh.prototype.startSide=Yh.prototype.endSide=0;Yh.prototype.point=!1;Yh.prototype.mapMode=vn.TrackDel;class Em{constructor(t,r,n){this.from=t,this.to=r,this.value=n}static create(t,r,n){return new Em(t,r,n)}}function W3(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class c7{constructor(t,r,n,i){this.from=t,this.to=r,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(t,r,n,i=0){let s=n?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-t||(n?this.value[l].endSide:this.value[l].startSide)-r;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(t,r,n,i){for(let s=this.findIndex(r,-1e9,!0),o=this.findIndex(n,1e9,!1,s);s<o;s++)if(i(this.from[s]+t,this.to[s]+t,this.value[s])===!1)return!1}map(t,r){let n=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],h=this.from[l]+t,u=this.to[l]+t,f,d;if(h==u){let p=r.mapPos(h,c.startSide,c.mapMode);if(p==null||(f=d=p,c.startSide!=c.endSide&&(d=r.mapPos(h,c.endSide),d<f)))continue}else if(f=r.mapPos(h,c.startSide),d=r.mapPos(u,c.endSide),f>d||f==d&&c.startSide>0&&c.endSide<=0)continue;(d-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,d-f)),n.push(c),i.push(f-o),s.push(d-o))}return{mapped:n.length?new c7(i,s,n,a):null,pos:o}}}class ze{constructor(t,r,n,i){this.chunkPos=t,this.chunk=r,this.nextLayer=n,this.maxPoint=i}static create(t,r,n,i){return new ze(t,r,n,i)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let r of this.chunk)t+=r.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:r=[],sort:n=!1,filterFrom:i=0,filterTo:s=this.length}=t,o=t.filter;if(r.length==0&&!o)return this;if(n&&(r=r.slice().sort(W3)),this.isEmpty)return r.length?ze.of(r):this;let a=new mB(this,null,-1).goto(0),l=0,c=[],h=new Za;for(;a.value||l<r.length;)if(l<r.length&&(a.from-r[l].from||a.startSide-r[l].value.startSide)>=0){let u=r[l++];h.addInner(u.from,u.to,u.value)||c.push(u)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==r.length||this.chunkEnd(a.chunkIndex)<r[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&h.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(h.addInner(a.from,a.to,a.value)||c.push(Em.create(a.from,a.to,a.value))),a.next());return h.finishInner(this.nextLayer.isEmpty&&!c.length?ze.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:s}))}map(t){if(t.empty||this.isEmpty)return this;let r=[],n=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=t.touchesRange(a,a+l.length);if(c===!1)i=Math.max(i,l.maxPoint),r.push(l),n.push(t.mapPos(a));else if(c===!0){let{mapped:h,pos:u}=l.map(a,t);h&&(i=Math.max(i,h.maxPoint),r.push(h),n.push(u))}}let s=this.nextLayer.map(t);return r.length==0?s:new ze(n,r,s||ze.empty,i)}between(t,r,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(r>=s&&t<=s+o.length&&o.between(s,t-s,r-s,n)===!1)return}this.nextLayer.between(t,r,n)}}iter(t=0){return Lm.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,r=0){return Lm.from(t).goto(r)}static compare(t,r,n,i,s=-1){let o=t.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),a=r.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),l=E_(o,a,n),c=new k0(o,l,s),h=new k0(a,l,s);n.iterGaps((u,f,d)=>L_(c,u,h,f,d,i)),n.empty&&n.length==0&&L_(c,0,h,0,0,i)}static eq(t,r,n=0,i){i==null&&(i=999999999);let s=t.filter(h=>!h.isEmpty&&r.indexOf(h)<0),o=r.filter(h=>!h.isEmpty&&t.indexOf(h)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=E_(s,o),l=new k0(s,a,0).goto(n),c=new k0(o,a,0).goto(n);for(;;){if(l.to!=c.to||!j3(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(t,r,n,i,s=-1){let o=new k0(t,null,s).goto(r),a=r,l=o.openStart;for(;;){let c=Math.min(o.to,n);if(o.point){let h=o.activeForPoint(o.to),u=o.pointFrom<r?h.length+1:o.point.startSide<0?h.length:Math.min(h.length,l);i.point(a,c,o.point,h,u,o.pointRank),l=Math.min(o.openEnd(c),h.length)}else c>a&&(i.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>n)return l+(o.point&&o.to>n?1:0);a=o.to,o.next()}}static of(t,r=!1){let n=new Za;for(let i of t instanceof Em?[t]:r?XQ(t):t)n.add(i.from,i.to,i.value);return n.finish()}static join(t){if(!t.length)return ze.empty;let r=t[t.length-1];for(let n=t.length-2;n>=0;n--)for(let i=t[n];i!=ze.empty;i=i.nextLayer)r=new ze(i.chunkPos,i.chunk,r,Math.max(i.maxPoint,r.maxPoint));return r}}ze.empty=new ze([],[],null,-1);function XQ(e){if(e.length>1)for(let t=e[0],r=1;r<e.length;r++){let n=e[r];if(W3(t,n)>0)return e.slice().sort(W3);t=n}return e}ze.empty.nextLayer=ze.empty;class Za{finishChunk(t){this.chunks.push(new c7(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(t,r,n){this.addInner(t,r,n)||(this.nextLayer||(this.nextLayer=new Za)).add(t,r,n)}addInner(t,r,n){let i=t-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(t-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(r-this.chunkStart),this.last=n,this.lastFrom=t,this.lastTo=r,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,r-t)),!0)}addChunk(t,r){if((t-this.lastTo||r.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,r.maxPoint),this.chunks.push(r),this.chunkPos.push(t);let n=r.value.length-1;return this.last=r.value[n],this.lastFrom=r.from[n]+t,this.lastTo=r.to[n]+t,!0}finish(){return this.finishInner(ze.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let r=ze.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,r}}function E_(e,t,r){let n=new Map;for(let s of e)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&n.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of t)for(let o=0;o<s.chunk.length;o++){let a=n.get(s.chunk[o]);a!=null&&(r?r.mapPos(a):a)==s.chunkPos[o]&&!(r!=null&&r.touchesRange(a,a+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class mB{constructor(t,r,n,i=0){this.layer=t,this.skip=r,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,r=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,r,!1),this}gotoInner(t,r,n){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<t||i.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],r,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(t,r){(this.to-t||this.endSide-r)<0&&this.gotoInner(t,r,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let t=this.layer.chunkPos[this.chunkIndex],r=this.layer.chunk[this.chunkIndex],n=t+r.from[this.rangeIndex];if(this.from=n,this.to=t+r.to[this.rangeIndex],this.value=r.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class Lm{constructor(t){this.heap=t}static from(t,r=null,n=-1){let i=[];for(let s=0;s<t.length;s++)for(let o=t[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&i.push(new mB(o,r,n,s));return i.length==1?i[0]:new Lm(i)}get startSide(){return this.value?this.value.startSide:0}goto(t,r=-1e9){for(let n of this.heap)n.goto(t,r);for(let n=this.heap.length>>1;n>=0;n--)bw(this.heap,n);return this.next(),this}forward(t,r){for(let n of this.heap)n.forward(t,r);for(let n=this.heap.length>>1;n>=0;n--)bw(this.heap,n);(this.to-t||this.value.endSide-r)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),bw(this.heap,0)}}}function bw(e,t){for(let r=e[t];;){let n=(t<<1)+1;if(n>=e.length)break;let i=e[n];if(n+1<e.length&&i.compare(e[n+1])>=0&&(i=e[n+1],n++),r.compare(i)<0)break;e[n]=r,e[t]=i,t=n}}class k0{constructor(t,r,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Lm.from(t,r,n)}goto(t,r=-1e9){return this.cursor.goto(t,r),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=r,this.openStart=-1,this.next(),this}forward(t,r){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-r)<0;)this.removeActive(this.minActive);this.cursor.forward(t,r)}removeActive(t){ry(this.active,t),ry(this.activeTo,t),ry(this.activeRank,t),this.minActive=O_(this.active,this.activeTo)}addActive(t){let r=0,{value:n,to:i,rank:s}=this.cursor;for(;r<this.activeRank.length&&(s-this.activeRank[r]||i-this.activeTo[r])>0;)r++;ny(this.active,r,n),ny(this.activeTo,r,i),ny(this.activeRank,r,s),t&&ny(t,r,this.cursor.from),this.minActive=O_(this.active,this.activeTo)}next(){let t=this.to,r=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>t){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&ry(n,i)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(n),this.cursor.next();else if(r&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let i=n.length-1;i>=0&&n[i]<t;i--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let r=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>t||this.activeTo[n]==t&&this.active[n].endSide>=this.point.endSide)&&r.push(this.active[n]);return r.reverse()}openEnd(t){let r=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>t;n--)r++;return r}}function L_(e,t,r,n,i,s){e.goto(t),r.goto(n);let o=n+i,a=n,l=n-t;for(;;){let c=e.to+l-r.to,h=c||e.endSide-r.endSide,u=h<0?e.to+l:r.to,f=Math.min(u,o);if(e.point||r.point?e.point&&r.point&&(e.point==r.point||e.point.eq(r.point))&&j3(e.activeForPoint(e.to),r.activeForPoint(r.to))||s.comparePoint(a,f,e.point,r.point):f>a&&!j3(e.active,r.active)&&s.compareRange(a,f,e.active,r.active),u>o)break;(c||e.openEnd!=r.openEnd)&&s.boundChange&&s.boundChange(u),a=u,h<=0&&e.next(),h>=0&&r.next()}}function j3(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!=t[r]&&!e[r].eq(t[r]))return!1;return!0}function ry(e,t){for(let r=t,n=e.length-1;r<n;r++)e[r]=e[r+1];e.pop()}function ny(e,t,r){for(let n=e.length-1;n>=t;n--)e[n+1]=e[n];e[t]=r}function O_(e,t){let r=-1,n=1e9;for(let i=0;i<t.length;i++)(t[i]-n||e[i].endSide-e[r].endSide)<0&&(r=i,n=t[i]);return r}function $d(e,t,r=e.length){let n=0;for(let i=0;i<r&&i<e.length;)e.charCodeAt(i)==9?(n+=t-n%t,i++):(n++,i=wn(e,i));return n}function U3(e,t,r,n){for(let i=0,s=0;;){if(s>=t)return i;if(i==e.length)break;s+=e.charCodeAt(i)==9?r-s%r:1,i=wn(e,i)}return n===!0?-1:e.length}const G3="",D_=typeof Symbol>"u"?"__"+G3:Symbol.for(G3),K3=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),I_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class sc{constructor(t,r){this.rules=[];let{finish:n}=r||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let h=[],u=/^@(\w+)\b/.exec(o[0]),f=u&&u[1]=="keyframes";if(u&&a==null)return l.push(o[0]+";");for(let d in a){let p=a[d];if(/&/.test(d))s(d.split(/,\s*/).map(m=>o.map(g=>m.replace(/&/,g))).reduce((m,g)=>m.concat(g)),p,l);else if(p&&typeof p=="object"){if(!u)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),p,h,f)}else p!=null&&h.push(d.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(h.length||f)&&l.push((n&&!u&&!c?o.map(n):o).join(", ")+" {"+h.join(" ")+"}")}for(let o in t)s(i(o),t[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let t=I_[D_]||1;return I_[D_]=t+1,G3+t.toString(36)}static mount(t,r,n){let i=t[K3],s=n&&n.nonce;i?s&&i.setNonce(s):i=new JQ(t,s),i.mount(Array.isArray(r)?r:[r],t)}}let B_=new Map;class JQ{constructor(t,r){let n=t.ownerDocument||t,i=n.defaultView;if(!t.head&&t.adoptedStyleSheets&&i.CSSStyleSheet){let s=B_.get(n);if(s)return t[K3]=s;this.sheet=new i.CSSStyleSheet,B_.set(n,this)}else this.styleTag=n.createElement("style"),r&&this.styleTag.setAttribute("nonce",r);this.modules=[],t[K3]=this}mount(t,r){let n=this.sheet,i=0,s=0;for(let o=0;o<t.length;o++){let a=t[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),n)for(let c=0;c<a.rules.length;c++)n.insertRule(a.rules[c],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(n)r.adoptedStyleSheets.indexOf(this.sheet)<0&&(r.adoptedStyleSheets=[this.sheet,...r.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=r.head||r;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(t){this.styleTag&&this.styleTag.getAttribute("nonce")!=t&&this.styleTag.setAttribute("nonce",t)}}var Qa={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Om={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ZQ=typeof navigator<"u"&&/Mac/.test(navigator.platform),QQ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var yn=0;yn<10;yn++)Qa[48+yn]=Qa[96+yn]=String(yn);for(var yn=1;yn<=24;yn++)Qa[yn+111]="F"+yn;for(var yn=65;yn<=90;yn++)Qa[yn]=String.fromCharCode(yn+32),Om[yn]=String.fromCharCode(yn);for(var xw in Qa)Om.hasOwnProperty(xw)||(Om[xw]=Qa[xw]);function gB(e){var t=ZQ&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||QQ&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",r=!t&&e.key||(e.shiftKey?Om:Qa)[e.keyCode]||e.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}function ir(){var e=arguments[0];typeof e=="string"&&(e=document.createElement(e));var t=1,r=arguments[1];if(r&&typeof r=="object"&&r.nodeType==null&&!Array.isArray(r)){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var i=r[n];typeof i=="string"?e.setAttribute(n,i):i!=null&&(e[n]=i)}t++}for(;t<arguments.length;t++)yB(e,arguments[t]);return e}function yB(e,t){if(typeof t=="string")e.appendChild(document.createTextNode(t));else if(t!=null)if(t.nodeType!=null)e.appendChild(t);else if(Array.isArray(t))for(var r=0;r<t.length;r++)yB(e,t[r]);else throw new RangeError("Unsupported child node: "+t)}let Jn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Y3=typeof document<"u"?document:{documentElement:{style:{}}};const X3=/Edge\/(\d+)/.exec(Jn.userAgent),bB=/MSIE \d/.test(Jn.userAgent),J3=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Jn.userAgent),kv=!!(bB||J3||X3),R_=!kv&&/gecko\/(\d+)/i.test(Jn.userAgent),vw=!kv&&/Chrome\/(\d+)/.exec(Jn.userAgent),ttt="webkitFontSmoothing"in Y3.documentElement.style,Z3=!kv&&/Apple Computer/.test(Jn.vendor),P_=Z3&&(/Mobile\/\w+/.test(Jn.userAgent)||Jn.maxTouchPoints>2);var It={mac:P_||/Mac/.test(Jn.platform),windows:/Win/.test(Jn.platform),linux:/Linux|X11/.test(Jn.platform),ie:kv,ie_version:bB?Y3.documentMode||6:J3?+J3[1]:X3?+X3[1]:0,gecko:R_,gecko_version:R_?+(/Firefox\/(\d+)/.exec(Jn.userAgent)||[0,0])[1]:0,chrome:!!vw,chrome_version:vw?+vw[1]:0,ios:P_,android:/Android\b/.test(Jn.userAgent),webkit_version:ttt?+(/\bAppleWebKit\/(\d+)/.exec(Jn.userAgent)||[0,0])[1]:0,safari:Z3,safari_version:Z3?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Jn.userAgent)||[0,0])[1]:0,tabSize:Y3.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Dm(e){let t;return e.nodeType==11?t=e.getSelection?e:e.ownerDocument:t=e,t.getSelection()}function Q3(e,t){return t?e==t||e.contains(t.nodeType!=1?t.parentNode:t):!1}function p2(e,t){if(!t.anchorNode)return!1;try{return Q3(e,t.anchorNode)}catch{return!1}}function Im(e){return e.nodeType==3?Jh(e,0,e.nodeValue.length).getClientRects():e.nodeType==1?e.getClientRects():[]}function zp(e,t,r,n){return r?N_(e,t,r,n,-1)||N_(e,t,r,n,1):!1}function Xh(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t}function Rb(e){return e.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function N_(e,t,r,n,i){for(;;){if(e==r&&t==n)return!0;if(t==(i<0?0:Yo(e))){if(e.nodeName=="DIV")return!1;let s=e.parentNode;if(!s||s.nodeType!=1)return!1;t=Xh(e)+(i<0?0:1),e=s}else if(e.nodeType==1){if(e=e.childNodes[t+(i<0?-1:0)],e.nodeType==1&&e.contentEditable=="false")return!1;t=i<0?Yo(e):0}else return!1}}function Yo(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Cv(e,t){let r=t?e.left:e.right;return{left:r,right:r,top:e.top,bottom:e.bottom}}function ett(e){let t=e.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function xB(e,t){let r=t.width/e.offsetWidth,n=t.height/e.offsetHeight;return(r>.995&&r<1.005||!isFinite(r)||Math.abs(t.width-e.offsetWidth)<1)&&(r=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(t.height-e.offsetHeight)<1)&&(n=1),{scaleX:r,scaleY:n}}function rtt(e,t,r,n,i,s,o,a){let l=e.ownerDocument,c=l.defaultView||window;for(let h=e,u=!1;h&&!u;)if(h.nodeType==1){let f,d=h==l.body,p=1,m=1;if(d)f=ett(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(u=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let b=h.getBoundingClientRect();({scaleX:p,scaleY:m}=xB(h,b)),f={left:b.left,right:b.left+h.clientWidth*p,top:b.top,bottom:b.top+h.clientHeight*m}}let g=0,y=0;if(i=="nearest")t.top<f.top?(y=t.top-(f.top+o),r>0&&t.bottom>f.bottom+y&&(y=t.bottom-f.bottom+o)):t.bottom>f.bottom&&(y=t.bottom-f.bottom+o,r<0&&t.top-y<f.top&&(y=t.top-(f.top+o)));else{let b=t.bottom-t.top,x=f.bottom-f.top;y=(i=="center"&&b<=x?t.top+b/2-x/2:i=="start"||i=="center"&&r<0?t.top-o:t.bottom-x+o)-f.top}if(n=="nearest"?t.left<f.left?(g=t.left-(f.left+s),r>0&&t.right>f.right+g&&(g=t.right-f.right+s)):t.right>f.right&&(g=t.right-f.right+s,r<0&&t.left<f.left+g&&(g=t.left-(f.left+s))):g=(n=="center"?t.left+(t.right-t.left)/2-(f.right-f.left)/2:n=="start"==a?t.left-s:t.right-(f.right-f.left)+s)-f.left,g||y)if(d)c.scrollBy(g,y);else{let b=0,x=0;if(y){let T=h.scrollTop;h.scrollTop+=y/m,x=(h.scrollTop-T)*m}if(g){let T=h.scrollLeft;h.scrollLeft+=g/p,b=(h.scrollLeft-T)*p}t={left:t.left-b,top:t.top-x,right:t.right-b,bottom:t.bottom-x},b&&Math.abs(b-g)<1&&(n="nearest"),x&&Math.abs(x-y)<1&&(i="nearest")}if(d)break;(t.top<f.top||t.bottom>f.bottom||t.left<f.left||t.right>f.right)&&(t={left:Math.max(t.left,f.left),right:Math.min(t.right,f.right),top:Math.max(t.top,f.top),bottom:Math.min(t.bottom,f.bottom)}),h=h.assignedSlot||h.parentNode}else if(h.nodeType==11)h=h.host;else break}function ntt(e){let t=e.ownerDocument,r,n;for(let i=e.parentNode;i&&!(i==t.body||r&&n);)if(i.nodeType==1)!n&&i.scrollHeight>i.clientHeight&&(n=i),!r&&i.scrollWidth>i.clientWidth&&(r=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:r,y:n}}class itt{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:r,focusNode:n}=t;this.set(r,Math.min(t.anchorOffset,r?Yo(r):0),n,Math.min(t.focusOffset,n?Yo(n):0))}set(t,r,n,i){this.anchorNode=t,this.anchorOffset=r,this.focusNode=n,this.focusOffset=i}}let Xc=null;It.safari&&It.safari_version>=26&&(Xc=!1);function vB(e){if(e.setActive)return e.setActive();if(Xc)return e.focus(Xc);let t=[];for(let r=e;r&&(t.push(r,r.scrollTop,r.scrollLeft),r!=r.ownerDocument);r=r.parentNode);if(e.focus(Xc==null?{get preventScroll(){return Xc={preventScroll:!0},!0}}:void 0),!Xc){Xc=!1;for(let r=0;r<t.length;){let n=t[r++],i=t[r++],s=t[r++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=s&&(n.scrollLeft=s)}}}let F_;function Jh(e,t,r=t){let n=F_||(F_=document.createRange());return n.setEnd(e,r),n.setStart(e,t),n}function cf(e,t,r,n){let i={key:t,code:t,keyCode:r,which:r,cancelable:!0};n&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=n);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,e.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,e.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function stt(e){for(;e;){if(e&&(e.nodeType==9||e.nodeType==11&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}function wB(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function ott(e,t){let r=t.focusNode,n=t.focusOffset;if(!r||t.anchorNode!=r||t.anchorOffset!=n)return!1;for(n=Math.min(n,Yo(r));;)if(n){if(r.nodeType!=1)return!1;let i=r.childNodes[n-1];i.contentEditable=="false"?n--:(r=i,n=Yo(r))}else{if(r==e)return!0;n=Xh(r),r=r.parentNode}}function kB(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function CB(e,t){for(let r=e,n=t;;){if(r.nodeType==3&&n>0)return{node:r,offset:n};if(r.nodeType==1&&n>0){if(r.contentEditable=="false")return null;r=r.childNodes[n-1],n=Yo(r)}else if(r.parentNode&&!Rb(r))n=Xh(r),r=r.parentNode;else return null}}function SB(e,t){for(let r=e,n=t;;){if(r.nodeType==3&&n<r.nodeValue.length)return{node:r,offset:n};if(r.nodeType==1&&n<r.childNodes.length){if(r.contentEditable=="false")return null;r=r.childNodes[n],n=0}else if(r.parentNode&&!Rb(r))n=Xh(r)+1,r=r.parentNode;else return null}}class Bn{constructor(t,r,n=!0){this.node=t,this.offset=r,this.precise=n}static before(t,r){return new Bn(t.parentNode,Xh(t),r)}static after(t,r){return new Bn(t.parentNode,Xh(t)+1,r)}}const h7=[];class rr{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let r=this.posAtStart;for(let n of this.children){if(n==t)return r;r+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}sync(t,r){if(this.flags&2){let n=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:n.firstChild)){let a=rr.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(t,r),o.flags&=-8}if(s=i?i.nextSibling:n.firstChild,r&&!r.written&&r.node==n&&s!=o.dom&&(r.written=!0),o.dom.parentNode==n)for(;s&&s!=o.dom;)s=$_(s);else n.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:n.firstChild,s&&r&&r.node==n&&(r.written=!0);s;)s=$_(s)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(t,r),n.flags&=-8)}reuseDOM(t){}localPosFromDOM(t,r){let n;if(t==this.dom)n=this.dom.childNodes[r];else{let i=Yo(t)==0?0:r==0?-1:1;for(;;){let s=t.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(t==s.firstChild?i=-1:i=1),t=s}i<0?n=t:n=t.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!rr.get(n);)n=n.nextSibling;if(!n)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==n)return s;s+=o.length+o.breakAfter}}domBoundsAround(t,r,n=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,c=n,h=n;l<this.children.length;l++){let u=this.children[l],f=c+u.length;if(c<t&&f>r)return u.domBoundsAround(t,r,c);if(f>=t&&i==-1&&(i=l,s=c),c>r&&u.dom.parentNode==this.dom){o=l,a=h;break}h=f,c=f+u.breakAfter}return{from:s,to:a<0?n+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(t=!1){this.flags|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let r=this.parent;r;r=r.parent){if(t&&(r.flags|=2),r.flags&1)return;r.flags|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.flags&7&&this.markParentsDirty(!0))}setDOM(t){this.dom!=t&&(this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this)}get rootView(){for(let t=this;;){let r=t.parent;if(!r)return t;t=r}}replaceChildren(t,r,n=h7){this.markDirty();for(let i=t;i<r;i++){let s=this.children[i];s.parent==this&&n.indexOf(s)<0&&s.destroy()}n.length<250?this.children.splice(t,r-t,...n):this.children=[].concat(this.children.slice(0,t),n,this.children.slice(r));for(let i=0;i<n.length;i++)n[i].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new TB(this.children,t,this.children.length)}childPos(t,r=1){return this.childCursor().findPos(t,r)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+(t=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(t,r,n,i,s,o){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor&&!((this.flags|t.flags)&8)}getSide(){return 0}destroy(){for(let t of this.children)t.parent==this&&t.destroy();this.parent=null}}rr.prototype.breakAfter=0;function $_(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class TB{constructor(t,r,n){this.children=t,this.pos=r,this.i=n,this.off=0}findPos(t,r=1){for(;;){if(t>this.pos||t==this.pos&&(r>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function _B(e,t,r,n,i,s,o,a,l){let{children:c}=e,h=c.length?c[t]:null,u=s.length?s[s.length-1]:null,f=u?u.breakAfter:o;if(!(t==n&&h&&!o&&!f&&s.length<2&&h.merge(r,i,s.length?u:null,r==0,a,l))){if(n<c.length){let d=c[n];d&&(i<d.length||d.breakAfter&&(u!=null&&u.breakAfter))?(t==n&&(d=d.split(i),i=0),!f&&u&&d.merge(0,i,u,!0,0,l)?s[s.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,l),s.push(d))):d!=null&&d.breakAfter&&(u?u.breakAfter=1:o=1),n++}for(h&&(h.breakAfter=o,r>0&&(!o&&s.length&&h.merge(r,h.length,s[0],!1,a,0)?h.breakAfter=s.shift().breakAfter:(r<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(r,h.length,null,!1,a,0),t++));t<n&&s.length;)if(c[n-1].become(s[s.length-1]))n--,s.pop(),l=s.length?0:a;else if(c[t].become(s[0]))t++,s.shift(),a=s.length?0:l;else break;!s.length&&t&&n<c.length&&!c[t-1].breakAfter&&c[n].merge(0,0,c[t-1],!1,a,l)&&t--,(t<n||s.length)&&e.replaceChildren(t,n,s)}}function MB(e,t,r,n,i,s){let o=e.childCursor(),{i:a,off:l}=o.findPos(r,1),{i:c,off:h}=o.findPos(t,-1),u=t-r;for(let f of n)u+=f.length;e.length+=u,_B(e,c,h,a,l,n,0,i,s)}const att=256;class ro extends rr{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,r){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(r&&r.node==this.dom&&(r.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){t.nodeType==3&&this.createDOM(t)}merge(t,r,n){return this.flags&8||n&&(!(n instanceof ro)||this.length-(r-t)+n.length>att||n.flags&8)?!1:(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(r),this.markDirty(),!0)}split(t){let r=new ro(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),r.flags|=this.flags&8,r}localPosFromDOM(t,r){return t==this.dom?r:r?this.text.length:0}domAtPos(t){return new Bn(this.dom,t)}domBoundsAround(t,r,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,r){return ltt(this.dom,t,r)}}class tl extends rr{constructor(t,r=[],n=0){super(),this.mark=t,this.children=r,this.length=n;for(let i of r)i.setParent(this)}setAttrs(t){if(wB(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let r in this.mark.attrs)t.setAttribute(r,this.mark.attrs[r]);return t}canReuseDOM(t){return super.canReuseDOM(t)&&!((this.flags|t.flags)&8)}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.flags|=6)}sync(t,r){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,r)}merge(t,r,n,i,s,o){return n&&(!(n instanceof tl&&n.mark.eq(this.mark))||t&&s<=0||r<this.length&&o<=0)?!1:(MB(this,t,r,n?n.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(t){let r=[],n=0,i=-1,s=0;for(let a of this.children){let l=n+a.length;l>t&&r.push(n<t?a.split(t-n):a),i<0&&n>=t&&(i=s),n=l,s++}let o=this.length-t;return this.length=t,i>-1&&(this.children.length=i,this.markDirty()),new tl(this.mark,r,o)}domAtPos(t){return AB(this,t)}coordsAt(t,r){return LB(this,t,r)}}function ltt(e,t,r){let n=e.nodeValue.length;t>n&&(t=n);let i=t,s=t,o=0;t==0&&r<0||t==n&&r>=0?It.chrome||It.gecko||(t?(i--,o=1):s<n&&(s++,o=-1)):r<0?i--:s<n&&s++;let a=Jh(e,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:r>=0)?0:a.length-1];return It.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?Cv(l,o<0):l||null}class $a extends rr{static create(t,r,n){return new $a(t,r,n)}constructor(t,r,n){super(),this.widget=t,this.length=r,this.side=n,this.prevWidget=null}split(t){let r=$a.create(this.widget,this.length-t,this.side);return this.length-=t,r}sync(t){(!this.dom||!this.widget.updateDOM(this.dom,t))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(t,r,n,i,s,o){return n&&(!(n instanceof $a)||!this.widget.compare(n.widget)||t>0&&s<=0||r<this.length&&o<=0)?!1:(this.length=t+(n?n.length:0)+(this.length-r),!0)}become(t){return t instanceof $a&&t.side==this.side&&this.widget.constructor==t.widget.constructor?(this.widget.compare(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(this.length==0)return Ve.empty;let t=this;for(;t.parent;)t=t.parent;let{view:r}=t,n=r&&r.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):Ve.empty}domAtPos(t){return(this.length?t==0:this.side>0)?Bn.before(this.dom):Bn.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,r){let n=this.widget.coordsAt(this.dom,t,r);if(n)return n;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:t>0;for(let a=o?i.length-1:0;s=i[a],!(t>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return Cv(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class hd extends rr{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof hd&&t.side==this.side}split(){return new hd(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return this.side>0?Bn.before(this.dom):Bn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ve.empty}get isHidden(){return!0}}ro.prototype.children=$a.prototype.children=hd.prototype.children=h7;function AB(e,t){let r=e.dom,{children:n}=e,i=0;for(let s=0;i<n.length;i++){let o=n[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(t>s&&t<a&&o.dom.parentNode==r)return o.domAtPos(t-s);if(t<=s)break;s=a}}for(let s=i;s>0;s--){let o=n[s-1];if(o.dom.parentNode==r)return o.domAtPos(o.length)}for(let s=i;s<n.length;s++){let o=n[s];if(o.dom.parentNode==r)return o.domAtPos(0)}return new Bn(r,0)}function EB(e,t,r){let n,{children:i}=e;r>0&&t instanceof tl&&i.length&&(n=i[i.length-1])instanceof tl&&n.mark.eq(t.mark)?EB(n,t.children[0],r-1):(i.push(t),t.setParent(e)),e.length+=t.length}function LB(e,t,r){let n=null,i=-1,s=null,o=-1;function a(c,h){for(let u=0,f=0;u<c.children.length&&f<=h;u++){let d=c.children[u],p=f+d.length;p>=h&&(d.children.length?a(d,h-f):(!s||s.isHidden&&(r>0||htt(s,d)))&&(p>h||f==p&&d.getSide()>0)?(s=d,o=h-f):(f<h||f==p&&d.getSide()<0&&!d.isHidden)&&(n=d,i=h-f)),f=p}}a(e,t);let l=(r<0?n:s)||n||s;return l?l.coordsAt(Math.max(0,l==n?i:o),r):ctt(e)}function ctt(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let r=Im(t);return r[r.length-1]||null}function htt(e,t){let r=e.coordsAt(0,1),n=t.coordsAt(0,1);return r&&n&&n.top<r.bottom}function tk(e,t){for(let r in e)r=="class"&&t.class?t.class+=" "+e.class:r=="style"&&t.style?t.style+=";"+e.style:t[r]=e[r];return t}const z_=Object.create(null);function Pb(e,t,r){if(e==t)return!0;e||(e=z_),t||(t=z_);let n=Object.keys(e),i=Object.keys(t);if(n.length-(r&&n.indexOf(r)>-1?1:0)!=i.length-(r&&i.indexOf(r)>-1?1:0))return!1;for(let s of n)if(s!=r&&(i.indexOf(s)==-1||e[s]!==t[s]))return!1;return!0}function ek(e,t,r){let n=!1;if(t)for(let i in t)r&&i in r||(n=!0,i=="style"?e.style.cssText="":e.removeAttribute(i));if(r)for(let i in r)t&&t[i]==r[i]||(n=!0,i=="style"?e.style.cssText=r[i]:e.setAttribute(i,r[i]));return n}function utt(e){let t=Object.create(null);for(let r=0;r<e.attributes.length;r++){let n=e.attributes[r];t[n.name]=n.value}return t}let dl=class{eq(t){return!1}updateDOM(t,r){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,r,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}};var oi=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(oi||(oi={}));let le=class extends Yh{constructor(t,r,n,i){super(),this.startSide=t,this.endSide=r,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(t){return new t1(t)}static widget(t){let r=Math.max(-1e4,Math.min(1e4,t.side||0)),n=!!t.block;return r+=n&&!t.inlineOrder?r>0?3e8:-4e8:r>0?1e8:-1e8,new oc(t,r,r,n,t.widget||null,!1)}static replace(t){let r=!!t.block,n,i;if(t.isBlockGap)n=-5e8,i=4e8;else{let{start:s,end:o}=OB(t,r);n=(s?r?-3e8:-1:5e8)-1,i=(o?r?2e8:1:-6e8)+1}return new oc(t,n,i,r,t.widget||null,!0)}static line(t){return new e1(t)}static set(t,r=!1){return ze.of(t,r)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};le.none=ze.empty;class t1 extends le{constructor(t){let{start:r,end:n}=OB(t);super(r?-1:5e8,n?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){var r,n;return this==t||t instanceof t1&&this.tagName==t.tagName&&(this.class||((r=this.attrs)===null||r===void 0?void 0:r.class))==(t.class||((n=t.attrs)===null||n===void 0?void 0:n.class))&&Pb(this.attrs,t.attrs,"class")}range(t,r=t){if(t>=r)throw new RangeError("Mark decorations may not be empty");return super.range(t,r)}}t1.prototype.point=!1;class e1 extends le{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof e1&&this.spec.class==t.spec.class&&Pb(this.spec.attributes,t.spec.attributes)}range(t,r=t){if(r!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,r)}}e1.prototype.mapMode=vn.TrackBefore;e1.prototype.point=!0;class oc extends le{constructor(t,r,n,i,s,o){super(r,n,s,t),this.block=i,this.isReplace=o,this.mapMode=i?r<=0?vn.TrackBefore:vn.TrackAfter:vn.TrackDel}get type(){return this.startSide!=this.endSide?oi.WidgetRange:this.startSide<=0?oi.WidgetBefore:oi.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof oc&&ftt(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,r=t){if(this.isReplace&&(t>r||t==r&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&r!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,r)}}oc.prototype.point=!0;function OB(e,t=!1){let{inclusiveStart:r,inclusiveEnd:n}=e;return r==null&&(r=e.inclusive),n==null&&(n=e.inclusive),{start:r??t,end:n??t}}function ftt(e,t){return e==t||!!(e&&t&&e.compare(t))}function m2(e,t,r,n=0){let i=r.length-1;i>=0&&r[i]+n>=e?r[i]=Math.max(r[i],t):r.push(e,t)}class qr extends rr{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,r,n,i,s,o){if(n){if(!(n instanceof qr))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),MB(this,t,r,n?n.children.slice():[],s,o),!0}split(t){let r=new qr;if(r.breakAfter=this.breakAfter,this.length==0)return r;let{i:n,off:i}=this.childPos(t);i&&(r.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let s=n;s<this.children.length;s++)r.append(this.children[s],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=t,r}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){Pb(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,r){EB(this,t,r)}addLineDeco(t){let r=t.spec.attributes,n=t.spec.class;r&&(this.attrs=tk(r,this.attrs||{})),n&&(this.attrs=tk({class:n},this.attrs||{}))}domAtPos(t){return AB(this,t)}reuseDOM(t){t.nodeName=="DIV"&&(this.setDOM(t),this.flags|=6)}sync(t,r){var n;this.dom?this.flags&4&&(wB(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(ek(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,r);let i=this.dom.lastChild;for(;i&&rr.get(i)instanceof tl;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((n=rr.get(i))===null||n===void 0?void 0:n.isEditable)==!1&&(!It.ios||!this.children.some(s=>s instanceof ro))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let t=0,r;for(let n of this.children){if(!(n instanceof ro)||/[^ -~]/.test(n.text))return null;let i=Im(n.dom);if(i.length!=1)return null;t+=i[0].width,r=i[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:r}:null}coordsAt(t,r){let n=LB(this,t,r);if(!this.children.length&&n&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=n.bottom-n.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:n.top+o,bottom:n.bottom-o,left:n.left,right:n.left}}}return n}become(t){return t instanceof qr&&this.children.length==0&&t.children.length==0&&Pb(this.attrs,t.attrs)&&this.breakAfter==t.breakAfter}covers(){return!0}static find(t,r){for(let n=0,i=0;n<t.children.length;n++){let s=t.children[n],o=i+s.length;if(o>=r){if(s instanceof qr)return s;if(o>r)break}i=o+s.breakAfter}return null}}class ja extends rr{constructor(t,r,n){super(),this.widget=t,this.length=r,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(t,r,n,i,s,o){return n&&(!(n instanceof ja)||!this.widget.compare(n.widget)||t>0&&s<=0||r<this.length&&o<=0)?!1:(this.length=t+(n?n.length:0)+(this.length-r),!0)}domAtPos(t){return t==0?Bn.before(this.dom):Bn.after(this.dom,t==this.length)}split(t){let r=this.length-t;this.length=t;let n=new ja(this.widget,r,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return h7}sync(t){(!this.dom||!this.widget.updateDOM(this.dom,t))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ve.empty}domBoundsAround(){return null}become(t){return t instanceof ja&&t.widget.constructor==this.widget.constructor?(t.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.deco=t.deco,this.breakAfter=t.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(t,r){let n=this.widget.coordsAt(this.dom,t,r);return n||(this.widget instanceof rk?null:Cv(this.dom.getBoundingClientRect(),this.length?t==0:r<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(t){let{startSide:r,endSide:n}=this.deco;return r==n?!1:t<0?r<0:n>0}}class rk extends dl{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Hp{constructor(t,r,n,i){this.doc=t,this.pos=r,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=r}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof ja&&t.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new qr),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(iy(new hd(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(t&&this.content.length&&this.content[this.content.length-1]instanceof ja)&&this.getLine()}buildText(t,r,n){for(;t>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:a,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}else this.text=o,this.textOff=0}let i=Math.min(this.text.length-this.textOff,t),s=Math.min(i,512);this.flushBuffer(r.slice(r.length-n)),this.getLine().append(iy(new ro(this.text.slice(this.textOff,this.textOff+s)),r),n),this.atCursorPos=!0,this.textOff+=s,t-=s,n=i<=s?0:r.length}}span(t,r,n,i){this.buildText(r-t,n,i),this.pos=r,this.openStart<0&&(this.openStart=i)}point(t,r,n,i,s,o){if(this.disallowBlockEffectsFor[o]&&n instanceof oc){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(r>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=r-t;if(n instanceof oc)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ja(n.widget||ud.block,a,n));else{let l=$a.create(n.widget||ud.inline,a,a?0:n.startSide),c=this.atCursorPos&&!l.isEditable&&s<=i.length&&(t<r||n.startSide>0),h=!l.isEditable&&(t<r||s>i.length||n.startSide<=0),u=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(u.append(iy(new hd(1),i),s),s=i.length+Math.max(0,s-i.length)),u.append(iy(l,i),s),this.atCursorPos=h,this.pendingBuffer=h?t<r||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=r),this.openStart<0&&(this.openStart=s)}static build(t,r,n,i,s){let o=new Hp(t,r,n,s);return o.openEnd=ze.spans(i,r,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function iy(e,t){for(let r of t)e=new tl(r,[e],e.length);return e}class ud extends dl{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}ud.inline=new ud("span");ud.block=new ud("div");var br=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(br||(br={}));const Zh=br.LTR,u7=br.RTL;function DB(e){let t=[];for(let r=0;r<e.length;r++)t.push(1<<+e[r]);return t}const dtt=DB("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ptt=DB("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),nk=Object.create(null),xo=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),r=e.charCodeAt(1);nk[t]=r,nk[r]=-t}function IB(e){return e<=247?dtt[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?ptt[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}const mtt=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ul{get dir(){return this.level%2?u7:Zh}constructor(t,r,n){this.from=t,this.to=r,this.level=n}side(t,r){return this.dir==r==t?this.to:this.from}forward(t,r){return t==(this.dir==r)}static find(t,r,n,i){let s=-1;for(let o=0;o<t.length;o++){let a=t[o];if(a.from<=r&&a.to>=r){if(a.level==n)return o;(s<0||(i!=0?i<0?a.from<r:a.to>r:t[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function BB(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let n=e[r],i=t[r];if(n.from!=i.from||n.to!=i.to||n.direction!=i.direction||!BB(n.inner,i.inner))return!1}return!0}const sr=[];function gtt(e,t,r,n,i){for(let s=0;s<=n.length;s++){let o=s?n[s-1].to:t,a=s<n.length?n[s].from:r,l=s?256:i;for(let c=o,h=l,u=l;c<a;c++){let f=IB(e.charCodeAt(c));f==512?f=h:f==8&&u==4&&(f=16),sr[c]=f==4?2:f,f&7&&(u=f),h=f}for(let c=o,h=l,u=l;c<a;c++){let f=sr[c];if(f==128)c<a-1&&h==sr[c+1]&&h&24?f=sr[c]=h:sr[c]=256;else if(f==64){let d=c+1;for(;d<a&&sr[d]==64;)d++;let p=c&&h==8||d<r&&sr[d]==8?u==1?1:8:256;for(let m=c;m<d;m++)sr[m]=p;c=d-1}else f==8&&u==1&&(sr[c]=1);h=f,f&7&&(u=f)}}}function ytt(e,t,r,n,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=n.length;o++){let c=o?n[o-1].to:t,h=o<n.length?n[o].from:r;for(let u=c,f,d,p;u<h;u++)if(d=nk[f=e.charCodeAt(u)])if(d<0){for(let m=a-3;m>=0;m-=3)if(xo[m+1]==-d){let g=xo[m+2],y=g&2?i:g&4?g&1?s:i:0;y&&(sr[u]=sr[xo[m]]=y),a=m;break}}else{if(xo.length==189)break;xo[a++]=u,xo[a++]=f,xo[a++]=l}else if((p=sr[u])==2||p==1){let m=p==i;l=m?0:1;for(let g=a-3;g>=0;g-=3){let y=xo[g+2];if(y&2)break;if(m)xo[g+2]|=2;else{if(y&4)break;xo[g+2]|=4}}}}}function btt(e,t,r,n){for(let i=0,s=n;i<=r.length;i++){let o=i?r[i-1].to:e,a=i<r.length?r[i].from:t;for(let l=o;l<a;){let c=sr[l];if(c==256){let h=l+1;for(;;)if(h==a){if(i==r.length)break;h=r[i++].to,a=i<r.length?r[i].from:t}else if(sr[h]==256)h++;else break;let u=s==1,f=(h<t?sr[h]:n)==1,d=u==f?u?1:2:n;for(let p=h,m=i,g=m?r[m-1].to:e;p>l;)p==g&&(p=r[--m].from,g=m?r[m-1].to:e),sr[--p]=d;l=h}else s=c,l++}}}function ik(e,t,r,n,i,s,o){let a=n%2?2:1;if(n%2==i%2)for(let l=t,c=0;l<r;){let h=!0,u=!1;if(c==s.length||l<s[c].from){let m=sr[l];m!=a&&(h=!1,u=m==16)}let f=!h&&a==1?[]:null,d=h?n:n+1,p=l;t:for(;;)if(c<s.length&&p==s[c].from){if(u)break t;let m=s[c];if(!h)for(let g=m.to,y=c+1;;){if(g==r)break t;if(y<s.length&&s[y].from==g)g=s[y++].to;else{if(sr[g]==a)break t;break}}if(c++,f)f.push(m);else{m.from>l&&o.push(new Ul(l,m.from,d));let g=m.direction==Zh!=!(d%2);sk(e,g?n+1:n,i,m.inner,m.from,m.to,o),l=m.to}p=m.to}else{if(p==r||(h?sr[p]!=a:sr[p]==a))break;p++}f?ik(e,l,p,n+1,i,f,o):l<p&&o.push(new Ul(l,p,d)),l=p}else for(let l=r,c=s.length;l>t;){let h=!0,u=!1;if(!c||l>s[c-1].to){let m=sr[l-1];m!=a&&(h=!1,u=m==16)}let f=!h&&a==1?[]:null,d=h?n:n+1,p=l;t:for(;;)if(c&&p==s[c-1].to){if(u)break t;let m=s[--c];if(!h)for(let g=m.from,y=c;;){if(g==t)break t;if(y&&s[y-1].to==g)g=s[--y].from;else{if(sr[g-1]==a)break t;break}}if(f)f.push(m);else{m.to<l&&o.push(new Ul(m.to,l,d));let g=m.direction==Zh!=!(d%2);sk(e,g?n+1:n,i,m.inner,m.from,m.to,o),l=m.from}p=m.from}else{if(p==t||(h?sr[p-1]!=a:sr[p-1]==a))break;p--}f?ik(e,p,l,n+1,i,f,o):p<l&&o.push(new Ul(p,l,d)),l=p}}function sk(e,t,r,n,i,s,o){let a=t%2?2:1;gtt(e,i,s,n,a),ytt(e,i,s,n,a),btt(i,s,n,a),ik(e,i,s,t,r,n,o)}function xtt(e,t,r){if(!e)return[new Ul(0,0,t==u7?1:0)];if(t==Zh&&!r.length&&!mtt.test(e))return RB(e.length);if(r.length)for(;e.length>sr.length;)sr[sr.length]=256;let n=[],i=t==Zh?0:1;return sk(e,i,i,r,0,e.length,n),n}function RB(e){return[new Ul(0,e,0)]}let PB="";function vtt(e,t,r,n,i){var s;let o=n.head-e.from,a=Ul.find(t,o,(s=n.bidiLevel)!==null&&s!==void 0?s:-1,n.assoc),l=t[a],c=l.side(i,r);if(o==c){let f=a+=i?1:-1;if(f<0||f>=t.length)return null;l=t[a=f],o=l.side(!i,r),c=l.side(i,r)}let h=wn(e.text,o,l.forward(i,r));(h<l.from||h>l.to)&&(h=c),PB=e.text.slice(Math.min(o,h),Math.max(o,h));let u=a==(i?t.length-1:0)?null:t[a+(i?1:-1)];return u&&h==c&&u.level+(i?0:1)<l.level?ot.cursor(u.side(!i,r)+e.from,u.forward(i,r)?1:-1,u.level):ot.cursor(h+e.from,l.forward(i,r)?-1:1,l.level)}function wtt(e,t,r){for(let n=t;n<r;n++){let i=IB(e.charCodeAt(n));if(i==1)return Zh;if(i==2||i==4)return u7}return Zh}const NB=Nt.define(),FB=Nt.define(),$B=Nt.define(),zB=Nt.define(),ok=Nt.define(),HB=Nt.define(),qB=Nt.define(),f7=Nt.define(),d7=Nt.define(),VB=Nt.define({combine:e=>e.some(t=>t)}),WB=Nt.define({combine:e=>e.some(t=>t)}),jB=Nt.define();class hf{constructor(t,r="nearest",n="nearest",i=5,s=5,o=!1){this.range=t,this.y=r,this.x=n,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(t){return t.empty?this:new hf(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new hf(ot.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const sy=ke.define({map:(e,t)=>e.map(t)}),UB=ke.define();function Mi(e,t,r){let n=e.facet(zB);n.length?n[0](t):window.onerror&&window.onerror(String(t),r,void 0,void 0,t)||(r?console.error(r+":",t):console.error(t))}const Na=Nt.define({combine:e=>e.length?e[0]:!0});let ktt=0;const nf=Nt.define({combine(e){return e.filter((t,r)=>{for(let n=0;n<r;n++)if(e[n].plugin==t.plugin)return!1;return!0})}});class Ur{constructor(t,r,n,i,s){this.id=t,this.create=r,this.domEventHandlers=n,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(nf.of({plugin:this,arg:void 0}))}of(t){return this.baseExtensions.concat(nf.of({plugin:this,arg:t}))}static define(t,r){const{eventHandlers:n,eventObservers:i,provide:s,decorations:o}=r||{};return new Ur(ktt++,t,n,i,a=>{let l=[];return o&&l.push(Bm.of(c=>{let h=c.plugin(a);return h?o(h):le.none})),s&&l.push(s(a)),l})}static fromClass(t,r){return Ur.define((n,i)=>new t(n,i),r)}}class ww{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(t){if(this.value){if(this.mustUpdate){let r=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(r)}catch(n){if(Mi(r.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(t,this.spec.arg)}catch(r){Mi(t.state,r,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var r;if(!((r=this.value)===null||r===void 0)&&r.destroy)try{this.value.destroy()}catch(n){Mi(t.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const GB=Nt.define(),p7=Nt.define(),Bm=Nt.define(),KB=Nt.define(),r1=Nt.define(),YB=Nt.define();function H_(e,t){let r=e.state.facet(YB);if(!r.length)return r;let n=r.map(s=>s instanceof Function?s(e):s),i=[];return ze.spans(n,t.from,t.to,{point(){},span(s,o,a,l){let c=s-t.from,h=o-t.from,u=i;for(let f=a.length-1;f>=0;f--,l--){let d=a[f].spec.bidiIsolate,p;if(d==null&&(d=wtt(t.text,c,h)),l>0&&u.length&&(p=u[u.length-1]).to==c&&p.direction==d)p.to=h,u=p.inner;else{let m={from:c,to:h,direction:d,inner:[]};u.push(m),u=m.inner}}}}),i}const XB=Nt.define();function m7(e){let t=0,r=0,n=0,i=0;for(let s of e.state.facet(XB)){let o=s(e);o&&(o.left!=null&&(t=Math.max(t,o.left)),o.right!=null&&(r=Math.max(r,o.right)),o.top!=null&&(n=Math.max(n,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:t,right:r,top:n,bottom:i}}const W0=Nt.define();class ks{constructor(t,r,n,i){this.fromA=t,this.toA=r,this.fromB=n,this.toB=i}join(t){return new ks(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let r=t.length,n=this;for(;r>0;r--){let i=t[r-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),t.splice(r-1,1)}}return t.splice(r,0,n),t}static extendWithRanges(t,r){if(r.length==0)return t;let n=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==t.length?null:t[i],c=o-a,h=l?l.fromB:1e9;for(;s<r.length&&r[s]<h;){let u=r[s],f=r[s+1],d=Math.max(a,u),p=Math.min(h,f);if(d<=p&&new ks(d+c,p+c,d,p).addToSet(n),f>h)break;s+=2}if(!l)return n;new ks(l.fromA,l.toA,l.fromB,l.toB).addToSet(n),o=l.toA,a=l.toB}}}class Nb{constructor(t,r,n){this.view=t,this.state=r,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=Jr.empty(this.startState.doc.length);for(let s of n)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new ks(s,o,a,l))),this.changedRanges=i}static create(t,r,n){return new Nb(t,r,n)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class q_ extends rr{get length(){return this.view.state.doc.length}constructor(t){super(),this.view=t,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=le.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new qr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ks(0,0,0,t.state.doc.length)],0,null)}update(t){var r;let n=t.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:c,toA:h})=>h<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((r=this.domChanged)===null||r===void 0)&&r.newSel?i=this.domChanged.newSel.head:!Ett(t.changes,this.hasComposition)&&!t.selectionSet&&(i=t.state.selection.main.head));let s=i>-1?Stt(this.view,t.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:h}=this.hasComposition;n=new ks(c,h,t.changes.mapPos(c,-1),t.changes.mapPos(h,1)).addToSet(n.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(It.ie||It.chrome)&&!s&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=Mtt(o,a,t.changes);return n=ks.extendWithRanges(n,l),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,t.startState.doc.length,s),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,r,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,r,n);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=It.chrome||It.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof ja&&o.widget instanceof rk&&s.push(o.dom);i.updateGaps(s)}updateChildren(t,r,n){let i=n?n.range.addToSet(t.slice()):t,s=this.childCursor(r);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:h,toB:u}=a,f,d,p,m;if(n&&n.range.fromB<u&&n.range.toB>h){let T=Hp.build(this.view.state.doc,h,n.range.fromB,this.decorations,this.dynamicDecorationMap),S=Hp.build(this.view.state.doc,n.range.toB,u,this.decorations,this.dynamicDecorationMap);d=T.breakAtStart,p=T.openStart,m=S.openEnd;let w=this.compositionView(n);S.breakAtStart?w.breakAfter=1:S.content.length&&w.merge(w.length,w.length,S.content[0],!1,S.openStart,0)&&(w.breakAfter=S.content[0].breakAfter,S.content.shift()),T.content.length&&w.merge(0,0,T.content[T.content.length-1],!0,0,T.openEnd)&&T.content.pop(),f=T.content.concat(w).concat(S.content)}else({content:f,breakAtStart:d,openStart:p,openEnd:m}=Hp.build(this.view.state.doc,h,u,this.decorations,this.dynamicDecorationMap));let{i:g,off:y}=s.findPos(c,1),{i:b,off:x}=s.findPos(l,-1);_B(this,b,x,g,y,f,d,p,m)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let r of t.transactions)for(let n of r.effects)n.is(UB)&&(this.editContextFormatting=n.value)}compositionView(t){let r=new ro(t.text.nodeValue);r.flags|=8;for(let{deco:i}of t.marks)r=new tl(i,[r],r.length);let n=new qr;return n.append(r,0),n}fixCompositionDOM(t){let r=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=rr.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},n=this.childPos(t.range.fromB,1),i=this.children[n.i];r(t.line,i);for(let s=t.marks.length-1;s>=-1;s--)n=i.childPos(n.off,1),i=i.children[n.i],r(s>=0?t.marks[s].node:t.text,i)}updateSelection(t=!1,r=!1){(t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,s=!i&&!(this.view.state.facet(Na)||this.dom.tabIndex>-1)&&p2(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||r||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(It.gecko&&a.empty&&!this.hasComposition&&Ctt(l)){let u=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(u,l.node.childNodes[l.offset]||null)),l=c=new Bn(u,0),o=!0}let h=this.view.observer.selectionRange;(o||!h.focusNode||(!zp(l.node,l.offset,h.anchorNode,h.anchorOffset)||!zp(c.node,c.offset,h.focusNode,h.focusOffset))&&!this.suppressWidgetCursorChange(h,a))&&(this.view.observer.ignore(()=>{It.android&&It.chrome&&this.dom.contains(h.focusNode)&&Att(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let u=Dm(this.view.root);if(u)if(a.empty){if(It.gecko){let f=Ttt(l.node,l.offset);if(f&&f!=3){let d=(f==1?CB:SB)(l.node,l.offset);d&&(l=new Bn(d.node,d.offset))}}u.collapse(l.node,l.offset),a.bidiLevel!=null&&u.caretBidiLevel!==void 0&&(u.caretBidiLevel=a.bidiLevel)}else if(u.extend){u.collapse(l.node,l.offset);try{u.extend(c.node,c.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),f.setEnd(c.node,c.offset),f.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new Bn(h.anchorNode,h.anchorOffset),this.impreciseHead=c.precise?null:new Bn(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(t,r){return this.hasComposition&&r.empty&&zp(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==r.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,r=t.state.selection.main,n=Dm(t.root),{anchorNode:i,anchorOffset:s}=t.observer.selectionRange;if(!n||!r.empty||!r.assoc||!n.modify)return;let o=qr.find(this,r.head);if(!o)return;let a=o.posAtStart;if(r.head==a||r.head==a+o.length)return;let l=this.coordsAt(r.head,-1),c=this.coordsAt(r.head,1);if(!l||!c||l.bottom>c.top)return;let h=this.domAtPos(r.head+r.assoc);n.collapse(h.node,h.offset),n.modify("move",r.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let u=t.observer.selectionRange;t.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=r.from&&n.collapse(i,s)}moveToLine(t){let r=this.dom,n;if(t.node!=r)return t;for(let i=t.offset;!n&&i<r.childNodes.length;i++){let s=rr.get(r.childNodes[i]);s instanceof qr&&(n=s.domAtPos(0))}for(let i=t.offset-1;!n&&i>=0;i--){let s=rr.get(r.childNodes[i]);s instanceof qr&&(n=s.domAtPos(s.length))}return n?new Bn(n.node,n.offset,!0):t}nearest(t){for(let r=t;r;){let n=rr.get(r);if(n&&n.rootView==this)return n;r=r.parentNode}return null}posFromDOM(t,r){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,r)+n.posAtStart}domAtPos(t){let{i:r,off:n}=this.childCursor().findPos(t,-1);for(;r<this.children.length-1;){let i=this.children[r];if(n<i.length||i instanceof qr)break;r++,n=0}return this.children[r].domAtPos(n)}coordsAt(t,r){let n=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<t)break;if(c<=t&&(c<t||a.covers(-1))&&(l>t||a.covers(1))&&(!n||a instanceof qr&&!(n instanceof qr&&r>=0)))n=a,i=c;else if(n&&c==t&&l==t&&a instanceof ja&&Math.abs(r)<2){if(a.deco.startSide<0)break;o&&(n=null)}s=c}return n?n.coordsAt(t-i,r):null}coordsForChar(t){let{i:r,off:n}=this.childPos(t,1),i=this.children[r];if(!(i instanceof qr))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(n,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}n=l}if(!(i instanceof ro))return null;let s=wn(i.text,n);if(s==n)return null;let o=Jh(i.dom,n,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(t){let r=[],{from:n,to:i}=t,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==br.LTR;for(let c=0,h=0;h<this.children.length;h++){let u=this.children[h],f=c+u.length;if(f>i)break;if(c>=n){let d=u.dom.getBoundingClientRect();if(r.push(d.height),o){let p=u.dom.lastChild,m=p?Im(p):[];if(m.length){let g=m[m.length-1],y=l?g.right-d.left:d.right-g.left;y>a&&(a=y,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+u.breakAfter}return r}textDirectionAt(t){let{i:r}=this.childPos(t,1);return getComputedStyle(this.children[r].dom).direction=="rtl"?br.RTL:br.LTR}measureTextSize(){for(let s of this.children)if(s instanceof qr){let o=s.measureTextSize();if(o)return o}let t=document.createElement("div"),r,n,i;return t.className="cm-line",t.style.width="99999px",t.style.position="absolute",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(t);let s=Im(t.firstChild)[0];r=t.getBoundingClientRect().height,n=s?s.width/27:7,i=s?s.height:r,t.remove()}),{lineHeight:r,charWidth:n,textHeight:i}}childCursor(t=this.length){let r=this.children.length;return r&&(t-=this.children[--r].length),new TB(this.children,t,r)}computeBlockGapDeco(){let t=[],r=this.view.viewState;for(let n=0,i=0;;i++){let s=i==r.viewports.length?null:r.viewports[i],o=s?s.from-1:this.length;if(o>n){let a=(r.lineBlockAt(o).bottom-r.lineBlockAt(n).top)/this.view.scaleY;t.push(le.replace({widget:new rk(a),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!s)break;n=s.to+1}return le.set(t)}updateDeco(){let t=1,r=this.view.state.facet(Bm).map(s=>(this.dynamicDecorationMap[t++]=typeof s=="function")?s(this.view):s),n=!1,i=this.view.state.facet(KB).map((s,o)=>{let a=typeof s=="function";return a&&(n=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[t++]=n,r.push(ze.join(i))),this.decorations=[this.editContextFormatting,...r,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;return this.decorations}scrollIntoView(t){if(t.isSnapshot){let c=this.view.viewState.lineBlockAt(t.range.head);this.view.scrollDOM.scrollTop=c.top-t.yMargin,this.view.scrollDOM.scrollLeft=t.xMargin;return}for(let c of this.view.state.facet(jB))try{if(c(this.view,t.range,t))return!0}catch(h){Mi(this.view.state,h,"scroll handler")}let{range:r}=t,n=this.coordsAt(r.head,r.empty?r.assoc:r.head>r.anchor?-1:1),i;if(!n)return;!r.empty&&(i=this.coordsAt(r.anchor,r.anchor>r.head?-1:1))&&(n={left:Math.min(n.left,i.left),top:Math.min(n.top,i.top),right:Math.max(n.right,i.right),bottom:Math.max(n.bottom,i.bottom)});let s=m7(this.view),o={left:n.left-s.left,top:n.top-s.top,right:n.right+s.right,bottom:n.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;rtt(this.view.scrollDOM,o,r.head<r.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,a),-a),Math.max(Math.min(t.yMargin,l),-l),this.view.textDirection==br.LTR)}lineHasWidget(t){let{i:r}=this.childCursor().findPos(t);if(r==this.children.length)return!1;let n=i=>i instanceof $a||i.children.some(n);return n(this.children[r])}}function Ctt(e){return e.node.nodeType==1&&e.node.firstChild&&(e.offset==0||e.node.childNodes[e.offset-1].contentEditable=="false")&&(e.offset==e.node.childNodes.length||e.node.childNodes[e.offset].contentEditable=="false")}function JB(e,t){let r=e.observer.selectionRange;if(!r.focusNode)return null;let n=CB(r.focusNode,r.focusOffset),i=SB(r.focusNode,r.focusOffset),s=n||i;if(i&&n&&i.node!=n.node){let a=rr.get(i.node);if(!a||a instanceof ro&&a.text!=i.node.nodeValue)s=i;else if(e.docView.lastCompositionAfterCursor){let l=rr.get(n.node);!l||l instanceof ro&&l.text!=n.node.nodeValue||(s=i)}}if(e.docView.lastCompositionAfterCursor=s!=n,!s)return null;let o=t-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function Stt(e,t,r){let n=JB(e,r);if(!n)return null;let{node:i,from:s,to:o}=n,a=i.nodeValue;if(/[\n\r]/.test(a)||e.state.doc.sliceString(n.from,n.to)!=a)return null;let l=t.invertedDesc,c=new ks(l.mapPos(s),l.mapPos(o),s,o),h=[];for(let u=i.parentNode;;u=u.parentNode){let f=rr.get(u);if(f instanceof tl)h.push({node:u,deco:f.mark});else{if(f instanceof qr||u.nodeName=="DIV"&&u.parentNode==e.contentDOM)return{range:c,text:i,marks:h,line:u};if(u!=e.contentDOM)h.push({node:u,deco:new t1({inclusive:!0,attributes:utt(u),tagName:u.tagName.toLowerCase()})});else return null}}}function Ttt(e,t){return e.nodeType!=1?0:(t&&e.childNodes[t-1].contentEditable=="false"?1:0)|(t<e.childNodes.length&&e.childNodes[t].contentEditable=="false"?2:0)}let _tt=class{constructor(){this.changes=[]}compareRange(t,r){m2(t,r,this.changes)}comparePoint(t,r){m2(t,r,this.changes)}boundChange(t){m2(t,t,this.changes)}};function Mtt(e,t,r){let n=new _tt;return ze.compare(e,t,r,n),n.changes}function Att(e,t){for(let r=e;r&&r!=t;r=r.assignedSlot||r.parentNode)if(r.nodeType==1&&r.contentEditable=="false")return!0;return!1}function Ett(e,t){let r=!1;return t&&e.iterChangedRanges((n,i)=>{n<t.to&&i>t.from&&(r=!0)}),r}function Ltt(e,t,r=1){let n=e.charCategorizer(t),i=e.doc.lineAt(t),s=t-i.from;if(i.length==0)return ot.cursor(t);s==0?r=1:s==i.length&&(r=-1);let o=s,a=s;r<0?o=wn(i.text,s,!1):a=wn(i.text,s);let l=n(i.text.slice(o,a));for(;o>0;){let c=wn(i.text,o,!1);if(n(i.text.slice(c,o))!=l)break;o=c}for(;a<i.length;){let c=wn(i.text,a);if(n(i.text.slice(a,c))!=l)break;a=c}return ot.range(o+i.from,a+i.from)}function Ott(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function Dtt(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function kw(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function V_(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function W_(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function ak(e,t,r){let n,i,s,o,a=!1,l,c,h,u;for(let p=e.firstChild;p;p=p.nextSibling){let m=Im(p);for(let g=0;g<m.length;g++){let y=m[g];i&&kw(i,y)&&(y=V_(W_(y,i.bottom),i.top));let b=Ott(t,y),x=Dtt(r,y);if(b==0&&x==0)return p.nodeType==3?j_(p,t,r):ak(p,t,r);(!n||o>x||o==x&&s>b)&&(n=p,i=y,s=b,o=x,a=b?t<y.left?g>0:g<m.length-1:!0),b==0?r>y.bottom&&(!h||h.bottom<y.bottom)?(l=p,h=y):r<y.top&&(!u||u.top>y.top)&&(c=p,u=y):h&&kw(h,y)?h=W_(h,y.bottom):u&&kw(u,y)&&(u=V_(u,y.top))}}if(h&&h.bottom>=r?(n=l,i=h):u&&u.top<=r&&(n=c,i=u),!n)return{node:e,offset:0};let f=Math.max(i.left,Math.min(i.right,t));if(n.nodeType==3)return j_(n,f,r);if(a&&n.contentEditable!="false")return ak(n,f,r);let d=Array.prototype.indexOf.call(e.childNodes,n)+(t>=(i.left+i.right)/2?1:0);return{node:e,offset:d}}function j_(e,t,r){let n=e.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<n;a++){let l=Jh(e,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let h=l[c];if(h.top==h.bottom)continue;o||(o=t-h.left);let u=(h.top>r?h.top-r:r-h.bottom)-1;if(h.left-1<=t&&h.right+1>=t&&u<s){let f=t>=(h.left+h.right)/2,d=f;if(It.chrome||It.gecko){let p=Jh(e,a).getBoundingClientRect();Math.abs(p.left-h.right)<.1&&(d=!f)}if(u<=0)return{node:e,offset:a+(d?1:0)};i=a+(d?1:0),s=u}}}return{node:e,offset:i>-1?i:o>0?e.nodeValue.length:0}}function ZB(e,t,r,n=-1){var i,s;let o=e.contentDOM.getBoundingClientRect(),a=o.top+e.viewState.paddingTop,l,{docHeight:c}=e.viewState,{x:h,y:u}=t,f=u-a;if(f<0)return 0;if(f>c)return e.state.doc.length;for(let T=e.viewState.heightOracle.textHeight/2,S=!1;l=e.elementAtHeight(f),l.type!=oi.Text;)for(;f=n>0?l.bottom+T:l.top-T,!(f>=0&&f<=c);){if(S)return r?null:0;S=!0,n=-n}u=a+f;let d=l.from;if(d<e.viewport.from)return e.viewport.from==0?0:r?null:U_(e,o,l,h,u);if(d>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:r?null:U_(e,o,l,h,u);let p=e.dom.ownerDocument,m=e.root.elementFromPoint?e.root:p,g=m.elementFromPoint(h,u);g&&!e.contentDOM.contains(g)&&(g=null),g||(h=Math.max(o.left+1,Math.min(o.right-1,h)),g=m.elementFromPoint(h,u),g&&!e.contentDOM.contains(g)&&(g=null));let y,b=-1;if(g&&((i=e.docView.nearest(g))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let T=p.caretPositionFromPoint(h,u);T&&({offsetNode:y,offset:b}=T)}else if(p.caretRangeFromPoint){let T=p.caretRangeFromPoint(h,u);T&&({startContainer:y,startOffset:b}=T)}y&&(!e.contentDOM.contains(y)||It.safari&&Itt(y,b,h)||It.chrome&&Btt(y,b,h))&&(y=void 0),y&&(b=Math.min(Yo(y),b))}if(!y||!e.docView.dom.contains(y)){let T=qr.find(e.docView,d);if(!T)return f>l.top+l.height/2?l.to:l.from;({node:y,offset:b}=ak(T.dom,h,u))}let x=e.docView.nearest(y);if(!x)return null;if(x.isWidget&&((s=x.dom)===null||s===void 0?void 0:s.nodeType)==1){let T=x.dom.getBoundingClientRect();return t.y<T.top||t.y<=T.bottom&&t.x<=(T.left+T.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(y,b)+x.posAtStart}function U_(e,t,r,n,i){let s=Math.round((n-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&r.height>e.defaultLineHeight*1.5){let a=e.viewState.heightOracle.textHeight,l=Math.floor((i-r.top-(e.defaultLineHeight-a)*.5)/a);s+=l*e.viewState.heightOracle.lineLength}let o=e.state.sliceDoc(r.from,r.to);return r.from+U3(o,s,e.state.tabSize)}function QB(e,t,r){let n,i=e;if(e.nodeType!=3||t!=(n=e.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=i.parentNode;if(!o||o.nodeName=="DIV")break;i=o}}return Jh(e,n-1,n).getBoundingClientRect().right>r}function Itt(e,t,r){return QB(e,t,r)}function Btt(e,t,r){if(t!=0)return QB(e,t,r);for(let i=e;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let n=e.nodeType==1?e.getBoundingClientRect():Jh(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return r-n.left>5}function lk(e,t,r){let n=e.lineBlockAt(t);if(Array.isArray(n.type)){let i;for(let s of n.type){if(s.from>t)break;if(!(s.to<t)){if(s.from<t&&s.to>t)return s;(!i||s.type==oi.Text&&(i.type!=s.type||(r<0?s.from<t:s.to>t)))&&(i=s)}}return i||n}return n}function Rtt(e,t,r,n){let i=lk(e,t.head,t.assoc||-1),s=!n||i.type!=oi.Text||!(e.lineWrapping||i.widgetLineBreaks)?null:e.coordsAtPos(t.assoc<0&&t.head>i.from?t.head-1:t.head);if(s){let o=e.dom.getBoundingClientRect(),a=e.textDirectionAt(i.from),l=e.posAtCoords({x:r==(a==br.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return ot.cursor(l,r?-1:1)}return ot.cursor(r?i.to:i.from,r?-1:1)}function G_(e,t,r,n){let i=e.state.doc.lineAt(t.head),s=e.bidiSpans(i),o=e.textDirectionAt(i.from);for(let a=t,l=null;;){let c=vtt(i,s,o,a,r),h=PB;if(!c){if(i.number==(r?e.state.doc.lines:1))return a;h=`
`,i=e.state.doc.line(i.number+(r?1:-1)),s=e.bidiSpans(i),c=e.visualLineSide(i,!r)}if(l){if(!l(h))return a}else{if(!n)return c;l=n(h)}a=c}}function Ptt(e,t,r){let n=e.state.charCategorizer(t),i=n(r);return s=>{let o=n(s);return i==Cr.Space&&(i=o),i==o}}function Ntt(e,t,r,n){let i=t.head,s=r?1:-1;if(i==(r?e.state.doc.length:0))return ot.cursor(i,t.assoc);let o=t.goalColumn,a,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(i,t.assoc||-1),h=e.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let d=e.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,e.defaultCharacterWidth*(i-d.from))),a=(s<0?d.top:d.bottom)+h}let u=l.left+o,f=n??e.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let p=a+(f+d)*s,m=ZB(e,{x:u,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?m<i:m>i)){let g=e.docView.coordsForChar(m),y=!g||p<g.top?-1:1;return ot.cursor(m,y,void 0,o)}}}function qp(e,t,r){for(;;){let n=0;for(let i of e)i.between(t-1,t+1,(s,o,a)=>{if(t>s&&t<o){let l=n||r||(t-s<o-t?-1:1);t=l<0?s:o,n=l}});if(!n)return t}}function tR(e,t){let r=null;for(let n=0;n<t.ranges.length;n++){let i=t.ranges[n],s=null;if(i.empty){let o=qp(e,i.from,0);o!=i.from&&(s=ot.cursor(o,-1))}else{let o=qp(e,i.from,-1),a=qp(e,i.to,1);(o!=i.from||a!=i.to)&&(s=ot.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(r||(r=t.ranges.slice()),r[n]=s)}return r?ot.create(r,t.mainIndex):t}function Cw(e,t,r){let n=qp(e.state.facet(r1).map(i=>i(e)),r.from,t.head>r.from?-1:1);return n==r.from?r:ot.cursor(n,n<r.from?1:-1)}const j0="";class Ftt{constructor(t,r){this.points=t,this.text="",this.lineSeparator=r.facet(Sr.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=j0}readRange(t,r){if(!t)return this;let n=t.parentNode;for(let i=t;;){this.findPointBefore(n,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==r)break;let a=rr.get(i),l=rr.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:Rb(i))||Rb(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&!ztt(o,r)&&this.lineBreak(),i=o}return this.findPointBefore(n,r),this}readTextNode(t){let r=t.nodeValue;for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,r.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=r.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(a=i.exec(r))&&(s=a.index,o=a[0].length),this.append(r.slice(n,s<0?r.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==t&&l.pos>this.text.length&&(l.pos-=o-1);n=s+o}}readNode(t){if(t.cmIgnore)return;let r=rr.get(t),n=r&&r.overrideDOMText;if(n!=null){this.findPointInside(t,n.length);for(let i=n.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,r){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==r&&(n.pos=this.text.length)}findPointInside(t,r){for(let n of this.points)(t.nodeType==3?n.node==t:t.contains(n.node))&&(n.pos=this.text.length+($tt(t,n.node,n.offset)?r:0))}}function $tt(e,t,r){for(;;){if(!t||r<Yo(t))return!1;if(t==e)return!0;r=Xh(t)+1,t=t.parentNode}}function ztt(e,t){let r;for(;!(e==t||!e);e=e.nextSibling){let n=rr.get(e);if(!(n!=null&&n.isWidget||e.cmIgnore))return!1;n&&(r||(r=[])).push(n)}if(r)for(let n of r){let i=n.overrideDOMText;if(i!=null&&i.length)return!1}return!0}class K_{constructor(t,r){this.node=t,this.offset=r,this.pos=-1}}class Htt{constructor(t,r,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=r>-1;let{impreciseHead:s,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&r>-1)this.newSel=null;else if(r>-1&&(this.bounds=t.docView.domBoundsAround(r,n,0))){let a=s||o?[]:Vtt(t),l=new Ftt(a,t.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=Wtt(a,this.bounds.from)}else{let a=t.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!Q3(t.contentDOM,a.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!Q3(t.contentDOM,a.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(a.anchorNode,a.anchorOffset),h=t.viewport;if((It.ios||It.chrome)&&t.state.selection.main.empty&&l!=c&&(h.from>0||h.to<t.state.doc.length)){let u=Math.min(l,c),f=Math.max(l,c),d=h.from-u,p=h.to-f;(d==0||d==1||u==0)&&(p==0||p==-1||f==t.state.doc.length)&&(l=0,c=t.state.doc.length)}t.inputState.composing>-1&&t.state.selection.ranges.length>1?this.newSel=t.state.selection.replaceRange(ot.range(c,l)):this.newSel=ot.single(c,l)}}}function eR(e,t){let r,{newSel:n}=t,i=e.state.selection.main,s=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:o,to:a}=t.bounds,l=i.from,c=null;(s===8||It.android&&t.text.length<a-o)&&(l=i.to,c="end");let h=rR(e.state.doc.sliceString(o,a,j0),t.text,l-o,c);h&&(It.chrome&&s==13&&h.toB==h.from+2&&t.text.slice(h.from,h.toB)==j0+j0&&h.toB--,r={from:o+h.from,to:o+h.toA,insert:Ve.of(t.text.slice(h.from,h.toB).split(j0))})}else n&&(!e.hasFocus&&e.state.facet(Na)||n.main.eq(i))&&(n=null);if(!r&&!n)return!1;if(!r&&t.typeOver&&!i.empty&&n&&n.main.empty?r={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,i.to)}:(It.mac||It.android)&&r&&r.from==r.to&&r.from==i.head-1&&/^\. ?$/.test(r.insert.toString())&&e.contentDOM.getAttribute("autocorrect")=="off"?(n&&r.insert.length==2&&(n=ot.single(n.main.anchor-1,n.main.head-1)),r={from:r.from,to:r.to,insert:Ve.of([r.insert.toString().replace("."," ")])}):r&&r.from>=i.from&&r.to<=i.to&&(r.from!=i.from||r.to!=i.to)&&i.to-i.from-(r.to-r.from)<=4?r={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,r.from).append(r.insert).append(e.state.doc.slice(r.to,i.to))}:e.state.doc.lineAt(i.from).to<i.to&&e.docView.lineHasWidget(i.to)&&e.inputState.insertingTextAt>Date.now()-50?r={from:i.from,to:i.to,insert:e.state.toText(e.inputState.insertingText)}:It.chrome&&r&&r.from==r.to&&r.from==i.head&&r.insert.toString()==`
 `&&e.lineWrapping&&(n&&(n=ot.single(n.main.anchor-1,n.main.head-1)),r={from:i.from,to:i.to,insert:Ve.of([" "])}),r)return g7(e,r,n,s);if(n&&!n.main.eq(i)){let o=!1,a="select";return e.inputState.lastSelectionTime>Date.now()-50&&(e.inputState.lastSelectionOrigin=="select"&&(o=!0),a=e.inputState.lastSelectionOrigin,a=="select.pointer"&&(n=tR(e.state.facet(r1).map(l=>l(e)),n))),e.dispatch({selection:n,scrollIntoView:o,userEvent:a}),!0}else return!1}function g7(e,t,r,n=-1){if(It.ios&&e.inputState.flushIOSKey(t))return!0;let i=e.state.selection.main;if(It.android&&(t.to==i.to&&(t.from==i.from||t.from==i.from-1&&e.state.sliceDoc(t.from,i.from)==" ")&&t.insert.length==1&&t.insert.lines==2&&cf(e.contentDOM,"Enter",13)||(t.from==i.from-1&&t.to==i.to&&t.insert.length==0||n==8&&t.insert.length<t.to-t.from&&t.to>i.head)&&cf(e.contentDOM,"Backspace",8)||t.from==i.from&&t.to==i.to+1&&t.insert.length==0&&cf(e.contentDOM,"Delete",46)))return!0;let s=t.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let o,a=()=>o||(o=qtt(e,t,r));return e.state.facet(HB).some(l=>l(e,t.from,t.to,s,a))||e.dispatch(a()),!0}function qtt(e,t,r){let n,i=e.state,s=i.selection.main,o=-1;if(t.from==t.to&&t.from<s.from||t.from>s.to){let l=t.from<s.from?-1:1,c=l<0?s.from:s.to,h=qp(i.facet(r1).map(u=>u(e)),c,l);t.from==h&&(o=h)}if(o>-1)n={changes:t,selection:ot.cursor(t.from+t.insert.length,-1)};else if(t.from>=s.from&&t.to<=s.to&&t.to-t.from>=(s.to-s.from)/3&&(!r||r.main.empty&&r.main.from==t.from+t.insert.length)&&e.inputState.composing<0){let l=s.from<t.from?i.sliceDoc(s.from,t.from):"",c=s.to>t.to?i.sliceDoc(t.to,s.to):"";n=i.replaceSelection(e.state.toText(l+t.insert.sliceString(0,void 0,e.state.lineBreak)+c))}else{let l=i.changes(t),c=r&&r.main.to<=l.newLength?r.main:void 0;if(i.selection.ranges.length>1&&(e.inputState.composing>=0||e.inputState.compositionPendingChange)&&t.to<=s.to+10&&t.to>=s.to-10){let h=e.state.sliceDoc(t.from,t.to),u,f=r&&JB(e,r.main.head);if(f){let p=t.insert.length-(t.to-t.from);u={from:f.from,to:f.to-p}}else u=e.state.doc.lineAt(s.head);let d=s.to-t.to;n=i.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:l,range:c||p.map(l)};let m=p.to-d,g=m-h.length;if(e.state.sliceDoc(g,m)!=h||m>=u.from&&g<=u.to)return{range:p};let y=i.changes({from:g,to:m,insert:t.insert}),b=p.to-s.to;return{changes:y,range:c?ot.range(Math.max(0,c.anchor+b),Math.max(0,c.head+b)):p.map(y)}})}else n={changes:l,selection:c&&i.selection.replaceRange(c)}}let a="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,a+=".compose",e.inputState.compositionFirstChange&&(a+=".start",e.inputState.compositionFirstChange=!1)),i.update(n,{userEvent:a,scrollIntoView:!0})}function rR(e,t,r,n){let i=Math.min(e.length,t.length),s=0;for(;s<i&&e.charCodeAt(s)==t.charCodeAt(s);)s++;if(s==i&&e.length==t.length)return null;let o=e.length,a=t.length;for(;o>0&&a>0&&e.charCodeAt(o-1)==t.charCodeAt(a-1);)o--,a--;if(n=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&e.length<t.length){let l=r<=s&&r>=o?s-r:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function Vtt(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}=e.observer.selectionRange;return r&&(t.push(new K_(r,n)),(i!=r||s!=n)&&t.push(new K_(i,s))),t}function Wtt(e,t){if(e.length==0)return null;let r=e[0].pos,n=e.length==2?e[1].pos:r;return r>-1&&n>-1?ot.single(r+t,n+t):null}let jtt=class{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,It.safari&&t.contentDOM.addEventListener("input",()=>null),It.gecko&&aet(t.contentDOM.ownerDocument)}handleEvent(t){!Qtt(this.view,t)||this.ignoreDuringComposition(t)||t.type=="keydown"&&this.keydown(t)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(t.type,t)):this.runHandlers(t.type,t))}runHandlers(t,r){let n=this.handlers[t];if(n){for(let i of n.observers)i(this.view,r);for(let i of n.handlers){if(r.defaultPrevented)break;if(i(this.view,r)){r.preventDefault();break}}}}ensureHandlers(t){let r=Utt(t),n=this.handlers,i=this.view.contentDOM;for(let s in r)if(s!="scroll"){let o=!r[s].handlers.length,a=n[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in n)s!="scroll"&&!r[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=r}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&t.keyCode!=27&&iR.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),It.android&&It.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let r;return It.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((r=nR.find(n=>n.keyCode==t.keyCode))&&!t.ctrlKey||Gtt.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=r||t,setTimeout(()=>this.flushIOSKey(),250),!0):(t.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(t){let r=this.pendingIOSKey;return!r||r.key=="Enter"&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString())?!1:(this.pendingIOSKey=void 0,cf(this.view.contentDOM,r.key,r.keyCode,r instanceof KeyboardEvent?r:void 0))}ignoreDuringComposition(t){return!/^key/.test(t.type)||t.synthetic?!1:this.composing>0?!0:It.safari&&!It.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function Y_(e,t){return(r,n)=>{try{return t.call(e,n,r)}catch(i){Mi(r.state,i)}}}function Utt(e){let t=Object.create(null);function r(n){return t[n]||(t[n]={observers:[],handlers:[]})}for(let n of e){let i=n.spec,s=i&&i.plugin.domEventHandlers,o=i&&i.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&r(a).handlers.push(Y_(n.value,l))}if(o)for(let a in o){let l=o[a];l&&r(a).observers.push(Y_(n.value,l))}}for(let n in no)r(n).handlers.push(no[n]);for(let n in Ts)r(n).observers.push(Ts[n]);return t}const nR=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Gtt="dthko",iR=[16,17,18,20,91,92,224,225],oy=6;function ay(e){return Math.max(0,e)*.7+8}function Ktt(e,t){return Math.max(Math.abs(e.clientX-t.clientX),Math.abs(e.clientY-t.clientY))}class Ytt{constructor(t,r,n,i){this.view=t,this.startEvent=r,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=r,this.scrollParents=ntt(t.contentDOM),this.atoms=t.state.facet(r1).map(o=>o(t));let s=t.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=r.shiftKey,this.multiple=t.state.facet(Sr.allowMultipleSelections)&&Xtt(t,r),this.dragging=Ztt(t,r)&&aR(r)==1?null:!1}start(t){this.dragging===!1&&this.select(t)}move(t){if(t.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Ktt(this.startEvent,t)<10)return;this.select(this.lastEvent=t);let r=0,n=0,i=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=m7(this.view);t.clientX-l.left<=i+oy?r=-ay(i-t.clientX):t.clientX+l.right>=o-oy&&(r=ay(t.clientX-o)),t.clientY-l.top<=s+oy?n=-ay(s-t.clientY):t.clientY+l.bottom>=a-oy&&(n=ay(t.clientY-a)),this.setScrollSpeed(r,n)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,r){this.scrollSpeed={x:t,y:r},t||r?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:r}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),r&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=r,r=0),(t||r)&&this.view.win.scrollBy(t,r),this.dragging===!1&&this.select(this.lastEvent)}select(t){let{view:r}=this,n=tR(this.atoms,this.style.get(t,this.extend,this.multiple));(this.mustSelect||!n.eq(r.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some(r=>r.isUserEvent("input.type"))?this.destroy():this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Xtt(e,t){let r=e.state.facet(NB);return r.length?r[0](t):It.mac?t.metaKey:t.ctrlKey}function Jtt(e,t){let r=e.state.facet(FB);return r.length?r[0](t):It.mac?!t.altKey:!t.ctrlKey}function Ztt(e,t){let{main:r}=e.state.selection;if(r.empty)return!1;let n=Dm(e.root);if(!n||n.rangeCount==0)return!0;let i=n.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=t.clientX&&o.right>=t.clientX&&o.top<=t.clientY&&o.bottom>=t.clientY)return!0}return!1}function Qtt(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let r=t.target,n;r!=e.contentDOM;r=r.parentNode)if(!r||r.nodeType==11||(n=rr.get(r))&&n.ignoreEvent(t))return!1;return!0}const no=Object.create(null),Ts=Object.create(null),sR=It.ie&&It.ie_version<15||It.ios&&It.webkit_version<604;function tet(e){let t=e.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{e.focus(),r.remove(),oR(e,r.value)},50)}function Sv(e,t,r){for(let n of e.facet(t))r=n(r,e);return r}function oR(e,t){t=Sv(e.state,f7,t);let{state:r}=e,n,i=1,s=r.toText(t),o=s.lines==r.selection.ranges.length;if(ck!=null&&r.selection.ranges.every(l=>l.empty)&&ck==s.toString()){let l=-1;n=r.changeByRange(c=>{let h=r.doc.lineAt(c.from);if(h.from==l)return{range:c};l=h.from;let u=r.toText((o?s.line(i++).text:t)+r.lineBreak);return{changes:{from:h.from,insert:u},range:ot.cursor(c.from+u.length)}})}else o?n=r.changeByRange(l=>{let c=s.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:ot.cursor(l.from+c.length)}}):n=r.replaceSelection(s);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}Ts.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft};no.keydown=(e,t)=>(e.inputState.setSelectionOrigin("select"),t.keyCode==27&&e.inputState.tabFocusMode!=0&&(e.inputState.tabFocusMode=Date.now()+2e3),!1);Ts.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")};Ts.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")};no.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let r=null;for(let n of e.state.facet($B))if(r=n(e,t),r)break;if(!r&&t.button==0&&(r=net(e,t)),r){let n=!e.hasFocus;e.inputState.startMouseSelection(new Ytt(e,t,r,n)),n&&e.observer.ignore(()=>{vB(e.contentDOM);let s=e.root.activeElement;s&&!s.contains(e.contentDOM)&&s.blur()});let i=e.inputState.mouseSelection;if(i)return i.start(t),i.dragging===!1}else e.inputState.setSelectionOrigin("select.pointer");return!1};function X_(e,t,r,n){if(n==1)return ot.cursor(t,r);if(n==2)return Ltt(e.state,t,r);{let i=qr.find(e.docView,t),s=e.state.doc.lineAt(i?i.posAtEnd:t),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<e.state.doc.length&&a==s.to&&a++,ot.range(o,a)}}let J_=(e,t,r)=>t>=r.top&&t<=r.bottom&&e>=r.left&&e<=r.right;function eet(e,t,r,n){let i=qr.find(e.docView,t);if(!i)return 1;let s=t-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&J_(r,n,o))return-1;let a=i.coordsAt(s,1);return a&&J_(r,n,a)?1:o&&o.bottom>=n?-1:1}function Z_(e,t){let r=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:r,bias:eet(e,r,t.clientX,t.clientY)}}const ret=It.ie&&It.ie_version<=11;let Q_=null,tM=0,eM=0;function aR(e){if(!ret)return e.detail;let t=Q_,r=eM;return Q_=e,eM=Date.now(),tM=!t||r>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(tM+1)%3:1}function net(e,t){let r=Z_(e,t),n=aR(t),i=e.state.selection;return{update(s){s.docChanged&&(r.pos=s.changes.mapPos(r.pos),i=i.map(s.changes))},get(s,o,a){let l=Z_(e,s),c,h=X_(e,l.pos,l.bias,n);if(r.pos!=l.pos&&!o){let u=X_(e,r.pos,r.bias,n),f=Math.min(u.from,h.from),d=Math.max(u.to,h.to);h=f<h.from?ot.range(f,d):ot.range(d,f)}return o?i.replaceRange(i.main.extend(h.from,h.to)):a&&n==1&&i.ranges.length>1&&(c=iet(i,l.pos))?c:a?i.addRange(h):ot.create([h])}}}function iet(e,t){for(let r=0;r<e.ranges.length;r++){let{from:n,to:i}=e.ranges[r];if(n<=t&&i>=t)return ot.create(e.ranges.slice(0,r).concat(e.ranges.slice(r+1)),e.mainIndex==r?0:e.mainIndex-(e.mainIndex>r?1:0))}return null}no.dragstart=(e,t)=>{let{selection:{main:r}}=e.state;if(t.target.draggable){let i=e.docView.nearest(t.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=r.to||o<=r.from)&&(r=ot.range(s,o))}}let{inputState:n}=e;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=r,t.dataTransfer&&(t.dataTransfer.setData("Text",Sv(e.state,d7,e.state.sliceDoc(r.from,r.to))),t.dataTransfer.effectAllowed="copyMove"),!1};no.dragend=e=>(e.inputState.draggedContent=null,!1);function rM(e,t,r,n){if(r=Sv(e.state,f7,r),!r)return;let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:s}=e.inputState,o=n&&s&&Jtt(e,t)?{from:s.from,to:s.to}:null,a={from:i,insert:r},l=e.state.changes(o?[o,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),e.inputState.draggedContent=null}no.drop=(e,t)=>{if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;let r=t.dataTransfer.files;if(r&&r.length){let n=Array(r.length),i=0,s=()=>{++i==r.length&&rM(e,t,n.filter(o=>o!=null).join(e.state.lineBreak),!1)};for(let o=0;o<r.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(n[o]=a.result),s()},a.readAsText(r[o])}return!0}else{let n=t.dataTransfer.getData("Text");if(n)return rM(e,t,n,!0),!0}return!1};no.paste=(e,t)=>{if(e.state.readOnly)return!0;e.observer.flush();let r=sR?null:t.clipboardData;return r?(oR(e,r.getData("text/plain")||r.getData("text/uri-list")),!0):(tet(e),!1)};function set(e,t){let r=e.dom.parentNode;if(!r)return;let n=r.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=t,n.focus(),n.selectionEnd=t.length,n.selectionStart=0,setTimeout(()=>{n.remove(),e.focus()},50)}function oet(e){let t=[],r=[],n=!1;for(let i of e.selection.ranges)i.empty||(t.push(e.sliceDoc(i.from,i.to)),r.push(i));if(!t.length){let i=-1;for(let{from:s}of e.selection.ranges){let o=e.doc.lineAt(s);o.number>i&&(t.push(o.text),r.push({from:o.from,to:Math.min(e.doc.length,o.to+1)})),i=o.number}n=!0}return{text:Sv(e,d7,t.join(e.lineBreak)),ranges:r,linewise:n}}let ck=null;no.copy=no.cut=(e,t)=>{let{text:r,ranges:n,linewise:i}=oet(e.state);if(!r&&!i)return!1;ck=i?r:null,t.type=="cut"&&!e.state.readOnly&&e.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let s=sR?null:t.clipboardData;return s?(s.clearData(),s.setData("text/plain",r),!0):(set(e,r),!1)};const lR=fl.define();function cR(e,t){let r=[];for(let n of e.facet(qB)){let i=n(e,t);i&&r.push(i)}return r.length?e.update({effects:r,annotations:lR.of(!0)}):null}function hR(e){setTimeout(()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let r=cR(e.state,t);r?e.dispatch(r):e.update([])}},10)}Ts.focus=e=>{e.inputState.lastFocusTime=Date.now(),!e.scrollDOM.scrollTop&&(e.inputState.lastScrollTop||e.inputState.lastScrollLeft)&&(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),hR(e)};Ts.blur=e=>{e.observer.clearSelectionRange(),hR(e)};Ts.compositionstart=Ts.compositionupdate=e=>{e.observer.editContext||(e.inputState.compositionFirstChange==null&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))};Ts.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,It.chrome&&It.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then(()=>e.observer.flush()):setTimeout(()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])},50))};Ts.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()};no.beforeinput=(e,t)=>{var r,n;if((t.inputType=="insertText"||t.inputType=="insertCompositionText")&&(e.inputState.insertingText=t.data,e.inputState.insertingTextAt=Date.now()),t.inputType=="insertReplacementText"&&e.observer.editContext){let s=(r=t.dataTransfer)===null||r===void 0?void 0:r.getData("text/plain"),o=t.getTargetRanges();if(s&&o.length){let a=o[0],l=e.posAtDOM(a.startContainer,a.startOffset),c=e.posAtDOM(a.endContainer,a.endOffset);return g7(e,{from:l,to:c,insert:e.state.toText(s)},null),!0}}let i;if(It.chrome&&It.android&&(i=nR.find(s=>s.inputType==t.inputType))&&(e.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())},100)}return It.ios&&t.inputType=="deleteContentForward"&&e.observer.flushSoon(),It.safari&&t.inputType=="insertText"&&e.inputState.composing>=0&&setTimeout(()=>Ts.compositionend(e,t),20),!1};const nM=new Set;function aet(e){nM.has(e)||(nM.add(e),e.addEventListener("copy",()=>{}),e.addEventListener("cut",()=>{}))}const iM=["pre-wrap","normal","pre-line","break-spaces"];let fd=!1;function sM(){fd=!1}class cet{constructor(t){this.lineWrapping=t,this.doc=Ve.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,r){let n=this.doc.lineAt(r).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((r-t-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return iM.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let r=!1;for(let n=0;n<t.length;n++){let i=t[n];i<0?n++:this.heightSamples[Math.floor(i*10)]||(r=!0,this.heightSamples[Math.floor(i*10)]=!0)}return r}refresh(t,r,n,i,s,o){let a=iM.indexOf(t)>-1,l=Math.round(r)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=r,this.charWidth=n,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let h=o[c];h<0?c++:this.heightSamples[Math.floor(h*10)]=!0}}return l}}class het{constructor(t,r){this.from=t,this.heights=r,this.index=0}get more(){return this.index<this.heights.length}}class Po{constructor(t,r,n,i,s){this.from=t,this.length=r,this.top=n,this.height=i,this._content=s}get type(){return typeof this._content=="number"?oi.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof oc?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(t){let r=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new Po(this.from,this.length+t.length,this.top,this.height+t.height,r)}}var yr=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(yr||(yr={}));const g2=.001;class ai{constructor(t,r,n=2){this.length=t,this.height=r,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>g2&&(fd=!0),this.height=t)}replace(t,r,n){return ai.of(n)}decomposeLeft(t,r){r.push(this)}decomposeRight(t,r){r.push(this)}applyChanges(t,r,n,i){let s=this,o=n.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:h,toB:u}=i[a],f=s.lineAt(l,yr.ByPosNoHeight,n.setDoc(r),0,0),d=f.to>=c?f:s.lineAt(c,yr.ByPosNoHeight,n,0,0);for(u+=d.to-c,c=d.to;a>0&&f.from<=i[a-1].toA;)l=i[a-1].fromA,h=i[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,yr.ByPosNoHeight,n,0,0));h+=f.from-l,l=f.from;let p=y7.build(n.setDoc(o),t,h,u);s=Fb(s,s.replace(l,c,p))}return s.updateHeight(n,0)}static empty(){return new Gi(0,0)}static of(t){if(t.length==1)return t[0];let r=0,n=t.length,i=0,s=0;for(;;)if(r==n)if(i>s*2){let a=t[r-1];a.break?t.splice(--r,1,a.left,null,a.right):t.splice(--r,1,a.left,a.right),n+=1+a.break,i-=a.size}else if(s>i*2){let a=t[n];a.break?t.splice(n,1,a.left,null,a.right):t.splice(n,1,a.left,a.right),n+=2+a.break,s-=a.size}else break;else if(i<s){let a=t[r++];a&&(i+=a.size)}else{let a=t[--n];a&&(s+=a.size)}let o=0;return t[r-1]==null?(o=1,r--):t[r]==null&&(o=1,n++),new uet(ai.of(t.slice(0,r)),o,ai.of(t.slice(n)))}}function Fb(e,t){return e==t?e:(e.constructor!=t.constructor&&(fd=!0),t)}ai.prototype.size=1;class uR extends ai{constructor(t,r,n){super(t,r),this.deco=n}blockAt(t,r,n,i){return new Po(i,this.length,n,this.height,this.deco||0)}lineAt(t,r,n,i,s){return this.blockAt(0,n,i,s)}forEachLine(t,r,n,i,s,o){t<=s+this.length&&r>=s&&o(this.blockAt(0,n,i,s))}updateHeight(t,r=0,n=!1,i){return i&&i.from<=r&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Gi extends uR{constructor(t,r){super(t,r,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(t,r,n,i){return new Po(i,this.length,n,this.height,this.breaks)}replace(t,r,n){let i=n[0];return n.length==1&&(i instanceof Gi||i instanceof gn&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof gn?i=new Gi(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):ai.of(n)}updateHeight(t,r=0,n=!1,i){return i&&i.from<=r&&i.more?this.setHeight(i.heights[i.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class gn extends ai{constructor(t){super(t,0)}heightMetrics(t,r){let n=t.doc.lineAt(r).number,i=t.doc.lineAt(r+this.length).number,s=i-n+1,o,a=0;if(t.lineWrapping){let l=Math.min(this.height,t.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:n,lastLine:i,perLine:o,perChar:a}}blockAt(t,r,n,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(r,i);if(r.lineWrapping){let c=i+(t<r.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-n)/this.height))*this.length)),h=r.doc.lineAt(c),u=a+h.length*l,f=Math.max(n,t-u/2);return new Po(h.from,h.length,f,u,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((t-n)/a))),{from:h,length:u}=r.doc.line(s+c);return new Po(h,u,n+a*c,a,0)}}lineAt(t,r,n,i,s){if(r==yr.ByHeight)return this.blockAt(t,n,i,s);if(r==yr.ByPosNoHeight){let{from:d,to:p}=n.doc.lineAt(t);return new Po(d,p-d,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(n,s),c=n.doc.lineAt(t),h=a+c.length*l,u=c.number-o,f=i+a*u+l*(c.from-s-u);return new Po(c.from,c.length,Math.max(i,Math.min(f,i+this.height-h)),h,0)}forEachLine(t,r,n,i,s,o){t=Math.max(t,s),r=Math.min(r,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(n,s);for(let h=t,u=i;h<=r;){let f=n.doc.lineAt(h);if(h==t){let p=f.number-a;u+=l*p+c*(t-s-p)}let d=l+c*f.length;o(new Po(f.from,f.length,u,d,0)),u+=d,h=f.to+1}}replace(t,r,n){let i=this.length-r;if(i>0){let s=n[n.length-1];s instanceof gn?n[n.length-1]=new gn(s.length+i):n.push(null,new gn(i-1))}if(t>0){let s=n[0];s instanceof gn?n[0]=new gn(t+s.length):n.unshift(new gn(t-1),null)}return ai.of(n)}decomposeLeft(t,r){r.push(new gn(t-1),null)}decomposeRight(t,r){r.push(null,new gn(this.length-t-1))}updateHeight(t,r=0,n=!1,i){let s=r+this.length;if(i&&i.from<=r+this.length&&i.more){let o=[],a=Math.max(r,i.from),l=-1;for(i.from>r&&o.push(new gn(i.from-r-1).updateHeight(t,r));a<=s&&i.more;){let h=t.doc.lineAt(a).length;o.length&&o.push(null);let u=i.heights[i.index++];l==-1?l=u:Math.abs(u-l)>=g2&&(l=-2);let f=new Gi(h,u);f.outdated=!1,o.push(f),a+=h+1}a<=s&&o.push(null,new gn(s-a).updateHeight(t,a));let c=ai.of(o);return(l<0||Math.abs(c.height-this.height)>=g2||Math.abs(l-this.heightMetrics(t,r).perLine)>=g2)&&(fd=!0),Fb(this,c)}else(n||this.outdated)&&(this.setHeight(t.heightForGap(r,r+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class uet extends ai{constructor(t,r,n){super(t.length+r+n.length,t.height+n.height,r|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return this.flags&1}blockAt(t,r,n,i){let s=n+this.left.height;return t<s?this.left.blockAt(t,r,n,i):this.right.blockAt(t,r,s,i+this.left.length+this.break)}lineAt(t,r,n,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=r==yr.ByHeight?t<o:t<a,c=l?this.left.lineAt(t,r,n,i,s):this.right.lineAt(t,r,n,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let h=r==yr.ByPosNoHeight?yr.ByPosNoHeight:yr.ByPos;return l?c.join(this.right.lineAt(a,h,n,o,a)):this.left.lineAt(a,h,n,i,s).join(c)}forEachLine(t,r,n,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)t<l&&this.left.forEachLine(t,r,n,i,s,o),r>=l&&this.right.forEachLine(t,r,n,a,l,o);else{let c=this.lineAt(l,yr.ByPos,n,i,s);t<c.from&&this.left.forEachLine(t,c.from-1,n,i,s,o),c.to>=t&&c.from<=r&&o(c),r>c.to&&this.right.forEachLine(c.to+1,r,n,a,l,o)}}replace(t,r,n){let i=this.left.length+this.break;if(r<i)return this.balanced(this.left.replace(t,r,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-i,r-i,n));let s=[];t>0&&this.decomposeLeft(t,s);let o=s.length;for(let a of n)s.push(a);if(t>0&&oM(s,o-1),r<this.length){let a=s.length;this.decomposeRight(r,s),oM(s,a)}return ai.of(s)}decomposeLeft(t,r){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,r);r.push(this.left),this.break&&(n++,t>=n&&r.push(null)),t>n&&this.right.decomposeLeft(t-n,r)}decomposeRight(t,r){let n=this.left.length,i=n+this.break;if(t>=i)return this.right.decomposeRight(t-i,r);t<n&&this.left.decomposeRight(t,r),this.break&&t<i&&r.push(null),r.push(this.right)}balanced(t,r){return t.size>2*r.size||r.size>2*t.size?ai.of(this.break?[t,null,r]:[t,r]):(this.left=Fb(this.left,t),this.right=Fb(this.right,r),this.setHeight(t.height+r.height),this.outdated=t.outdated||r.outdated,this.size=t.size+r.size,this.length=t.length+this.break+r.length,this)}updateHeight(t,r=0,n=!1,i){let{left:s,right:o}=this,a=r+s.length+this.break,l=null;return i&&i.from<=r+s.length&&i.more?l=s=s.updateHeight(t,r,n,i):s.updateHeight(t,r,n),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(t,a,n,i):o.updateHeight(t,a,n),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function oM(e,t){let r,n;e[t]==null&&(r=e[t-1])instanceof gn&&(n=e[t+1])instanceof gn&&e.splice(t-1,3,new gn(r.length+1+n.length))}const fet=5;class y7{constructor(t,r){this.pos=t,this.oracle=r,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,r){if(this.lineStart>-1){let n=Math.min(r,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Gi?i.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new Gi(n-this.pos,-1)),this.writtenTo=n,r>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=r}point(t,r,n){if(t<r||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,s=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=r-t;n.block?this.addBlock(new uR(o,i,n)):(o||s||i>=fet)&&this.addLineDeco(i,s,o)}else r>t&&this.span(t,r);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:r}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=r,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Gi(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,r){let n=new gn(r-t);return this.oracle.doc.lineAt(t).to==r&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Gi)return t;let r=new Gi(0,-1);return this.nodes.push(r),r}addBlock(t){this.enterLine();let r=t.deco;r&&r.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,r&&r.endSide>0&&(this.covering=t)}addLineDeco(t,r,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,t),i.breaks+=r,this.writtenTo=this.pos=this.pos+n}finish(t){let r=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(r instanceof Gi)&&!this.isCovered?this.nodes.push(new Gi(0,-1)):(this.writtenTo<this.pos||r==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=t;for(let i of this.nodes)i instanceof Gi&&i.updateHeight(this.oracle,n),n+=i?i.length:1;return this.nodes}static build(t,r,n,i){let s=new y7(n,t);return ze.spans(r,n,i,s,0),s.finish(n)}}function det(e,t,r){let n=new pet;return ze.compare(e,t,r,n,0),n.changes}class pet{constructor(){this.changes=[]}compareRange(){}comparePoint(t,r,n,i){(t<r||n&&n.heightRelevant||i&&i.heightRelevant)&&m2(t,r,this.changes,5)}}function met(e,t){let r=e.getBoundingClientRect(),n=e.ownerDocument,i=n.defaultView||window,s=Math.max(0,r.left),o=Math.min(i.innerWidth,r.right),a=Math.max(0,r.top),l=Math.min(i.innerHeight,r.bottom);for(let c=e.parentNode;c&&c!=n.body;)if(c.nodeType==1){let h=c,u=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&u.overflow!="visible"){let f=h.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=Math.min(c==e.parentNode?i.innerHeight:l,f.bottom)}c=u.position=="absolute"||u.position=="fixed"?h.offsetParent:h.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-r.left,right:Math.max(s,o)-r.left,top:a-(r.top+t),bottom:Math.max(a,l)-(r.top+t)}}function get(e){let t=e.getBoundingClientRect(),r=e.ownerDocument.defaultView||window;return t.left<r.innerWidth&&t.right>0&&t.top<r.innerHeight&&t.bottom>0}function yet(e,t){let r=e.getBoundingClientRect();return{left:0,right:r.right-r.left,top:t,bottom:r.bottom-(r.top+t)}}class Sw{constructor(t,r,n,i){this.from=t,this.to=r,this.size=n,this.displaySize=i}static same(t,r){if(t.length!=r.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],s=r[n];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(t,r){return le.replace({widget:new bet(this.displaySize*(r?t.scaleY:t.scaleX),r)}).range(this.from,this.to)}}class bet extends dl{constructor(t,r){super(),this.size=t,this.vertical=r}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class aM{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=lM,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=br.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let r=t.facet(p7).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new cet(r),this.stateDeco=t.facet(Bm).filter(n=>typeof n!="function"),this.heightMap=ai.empty().applyChanges(this.stateDeco,Ve.empty,this.heightOracle.setDoc(t.doc),[new ks(0,0,0,t.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=le.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:r}=this.state.selection;for(let n=0;n<=1;n++){let i=n?r.head:r.anchor;if(!t.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);t.push(new ly(s,o))}}return this.viewports=t.sort((n,i)=>n.from-i.from),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?lM:new b7(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,t=>{this.viewportLines.push(U0(t,this.scaler))})}update(t,r=null){this.state=t.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Bm).filter(h=>typeof h!="function");let i=t.changedRanges,s=ks.extendWithRanges(i,det(n,this.stateDeco,t?t.changes:Jr.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);sM(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||fd)&&(t.flags|=2),a?(this.scrollAnchorPos=t.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,t.changes):this.viewport;(r&&(r.range.head<l.from||r.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,r));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,t.flags|=this.updateForViewport(),(c||!t.changes.empty||t.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),r&&(this.scrollTarget=r),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(WB)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let r=t.contentDOM,n=window.getComputedStyle(r),i=this.heightOracle,s=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?br.RTL:br.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=r.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,h=0;if(a.width&&a.height){let{scaleX:T,scaleY:S}=xB(r,a);(T>.005&&Math.abs(this.scaleX-T)>.005||S>.005&&Math.abs(this.scaleY-S)>.005)&&(this.scaleX=T,this.scaleY=S,c|=16,o=l=!0)}let u=(parseInt(n.paddingTop)||0)*this.scaleY,f=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=u||this.paddingBottom!=f)&&(this.paddingTop=u,this.paddingBottom=f,c|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=t.scrollDOM.clientWidth,c|=16);let d=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=kB(t.scrollDOM);let p=(this.printing?yet:met)(r,this.paddingTop),m=p.top-this.pixelViewport.top,g=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(l=!0)),!this.inView&&!this.scrollTarget&&!get(t.dom))return 0;let b=a.width;if((this.contentDOMWidth!=b||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=t.scrollDOM.clientHeight,c|=16),l){let T=t.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(T)&&(o=!0),o||i.lineWrapping&&Math.abs(b-this.contentDOMWidth)>i.charWidth){let{lineHeight:S,charWidth:w,textHeight:_}=t.docView.measureTextSize();o=S>0&&i.refresh(s,S,w,_,Math.max(5,b/w),T),o&&(t.docView.minWidth=0,c|=16)}m>0&&g>0?h=Math.max(m,g):m<0&&g<0&&(h=Math.min(m,g)),sM();for(let S of this.viewports){let w=S.from==this.viewport.from?T:t.docView.measureVisibleLineHeights(S);this.heightMap=(o?ai.empty().applyChanges(this.stateDeco,Ve.empty,this.heightOracle,[new ks(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new het(S.from,w))}fd&&(c|=2)}let x=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(h,this.scrollTarget),c|=this.updateForViewport()),(c&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,t)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,r){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new ly(i.lineAt(o-n*1e3,yr.ByHeight,s,0,0).from,i.lineAt(a+(1-n)*1e3,yr.ByHeight,s,0,0).to);if(r){let{head:c}=r.range;if(c<l.from||c>l.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=i.lineAt(c,yr.ByPos,s,0,0),f;r.y=="center"?f=(u.top+u.bottom)/2-h/2:r.y=="start"||r.y=="nearest"&&c<l.from?f=u.top:f=u.bottom-h,l=new ly(i.lineAt(f-1e3/2,yr.ByHeight,s,0,0).from,i.lineAt(f+h+1e3/2,yr.ByHeight,s,0,0).to)}}return l}mapViewport(t,r){let n=r.mapPos(t.from,-1),i=r.mapPos(t.to,1);return new ly(this.heightMap.lineAt(n,yr.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,yr.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:r},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(t,yr.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(r,yr.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(t==0||i<=o-Math.max(10,Math.min(-n,250)))&&(r==this.state.doc.length||s>=a+Math.max(10,Math.min(n,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(t,r){if(!t.length||r.empty)return t;let n=[];for(let i of t)r.touchesRange(i.from,i.to)||n.push(new Sw(r.mapPos(i.from),r.mapPos(i.to),i.size,i.displaySize));return n}ensureLineGaps(t,r){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=br.LTR&&!n)return[];let a=[],l=(h,u,f,d)=>{if(u-h<s)return;let p=this.state.selection.main,m=[p.from];p.empty||m.push(p.to);for(let y of m)if(y>h&&y<u){l(h,y-10,f,d),l(y+10,u,f,d);return}let g=vet(t,y=>y.from>=f.from&&y.to<=f.to&&Math.abs(y.from-h)<s&&Math.abs(y.to-u)<s&&!m.some(b=>y.from<b&&y.to>b));if(!g){if(u<f.to&&r&&n&&r.visibleRanges.some(x=>x.from<=u&&x.to>=u)){let x=r.moveToLineBoundary(ot.cursor(u),!1,!0).head;x>h&&(u=x)}let y=this.gapSize(f,h,u,d),b=n||y<2e6?y:2e6;g=new Sw(h,u,y,b)}a.push(g)},c=h=>{if(h.length<o||h.type!=oi.Text)return;let u=xet(h.from,h.to,this.stateDeco);if(u.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(n){let m=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,y;if(f!=null){let b=hy(u,f),x=((this.visibleBottom-this.visibleTop)/2+m)/h.height;g=b-x,y=b+x}else g=(this.visibleTop-h.top-m)/h.height,y=(this.visibleBottom-h.top+m)/h.height;d=cy(u,g),p=cy(u,y)}else{let m=u.total*this.heightOracle.charWidth,g=i*this.heightOracle.charWidth,y=0;if(m>2e6)for(let w of t)w.from>=h.from&&w.from<h.to&&w.size!=w.displaySize&&w.from*this.heightOracle.charWidth+y<this.pixelViewport.left&&(y=w.size-w.displaySize);let b=this.pixelViewport.left+y,x=this.pixelViewport.right+y,T,S;if(f!=null){let w=hy(u,f),_=((x-b)/2+g)/m;T=w-_,S=w+_}else T=(b-g)/m,S=(x+g)/m;d=cy(u,T),p=cy(u,S)}d>h.from&&l(h.from,d,h,u),p<h.to&&l(p,h.to,h,u)};for(let h of this.viewportLines)Array.isArray(h.type)?h.type.forEach(c):c(h);return a}gapSize(t,r,n,i){let s=hy(i,n)-hy(i,r);return this.heightOracle.lineWrapping?t.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(t){Sw.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=le.set(t.map(r=>r.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(t){let r=this.stateDeco;this.lineGaps.length&&(r=r.concat(this.lineGapDeco));let n=[];ze.spans(r,this.viewport.from,this.viewport.to,{span(s,o){n.push({from:s,to:o})},point(){}},20);let i=0;if(n.length!=this.visibleRanges.length)i=12;else for(let s=0;s<n.length&&!(i&8);s++){let o=this.visibleRanges[s],a=n[s];(o.from!=a.from||o.to!=a.to)&&(i|=4,t&&t.mapPos(o.from,-1)==a.from&&t.mapPos(o.to,1)==a.to||(i|=8))}return this.visibleRanges=n,i}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(r=>r.from<=t&&r.to>=t)||U0(this.heightMap.lineAt(t,yr.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(r=>r.top<=t&&r.bottom>=t)||U0(this.heightMap.lineAt(this.scaler.fromDOM(t),yr.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let r=this.lineBlockAtHeight(t+8);return r.from>=this.viewport.from||this.viewportLines[0].top-t>200?r:this.viewportLines[0]}elementAtHeight(t){return U0(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ly{constructor(t,r){this.from=t,this.to=r}}function xet(e,t,r){let n=[],i=e,s=0;return ze.spans(r,e,t,{span(){},point(o,a){o>i&&(n.push({from:i,to:o}),s+=o-i),i=a}},20),i<t&&(n.push({from:i,to:t}),s+=t-i),{total:s,ranges:n}}function cy({total:e,ranges:t},r){if(r<=0)return t[0].from;if(r>=1)return t[t.length-1].to;let n=Math.floor(e*r);for(let i=0;;i++){let{from:s,to:o}=t[i],a=o-s;if(n<=a)return s+n;n-=a}}function hy(e,t){let r=0;for(let{from:n,to:i}of e.ranges){if(t<=i){r+=t-n;break}r+=i-n}return r/e.total}function vet(e,t){for(let r of e)if(t(r))return r}const lM={toDOM(e){return e},fromDOM(e){return e},scale:1,eq(e){return e==this}};class b7{constructor(t,r,n){let i=0,s=0,o=0;this.viewports=n.map(({from:a,to:l})=>{let c=r.lineAt(a,yr.ByPos,t,0,0).top,h=r.lineAt(l,yr.ByPos,t,0,0).bottom;return i+=h-c,{from:a,to:l,top:c,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(r.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(t){for(let r=0,n=0,i=0;;r++){let s=r<this.viewports.length?this.viewports[r]:null;if(!s||t<s.top)return i+(t-n)*this.scale;if(t<=s.bottom)return s.domTop+(t-s.top);n=s.bottom,i=s.domBottom}}fromDOM(t){for(let r=0,n=0,i=0;;r++){let s=r<this.viewports.length?this.viewports[r]:null;if(!s||t<s.domTop)return n+(t-i)/this.scale;if(t<=s.domBottom)return s.top+(t-s.domTop);n=s.bottom,i=s.domBottom}}eq(t){return t instanceof b7?this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every((r,n)=>r.from==t.viewports[n].from&&r.to==t.viewports[n].to):!1}}function U0(e,t){if(t.scale==1)return e;let r=t.toDOM(e.top),n=t.toDOM(e.bottom);return new Po(e.from,e.length,r,n-r,Array.isArray(e._content)?e._content.map(i=>U0(i,t)):e._content)}const uy=Nt.define({combine:e=>e.join(" ")}),hk=Nt.define({combine:e=>e.indexOf(!0)>-1}),uk=sc.newName(),fR=sc.newName(),dR=sc.newName(),pR={"&light":"."+fR,"&dark":"."+dR};function fk(e,t,r){return new sc(t,{finish(n){return/&/.test(n)?n.replace(/&\w*/,i=>{if(i=="&")return e;if(!r||!r[i])throw new RangeError(`Unsupported selector: ${i}`);return r[i]}):e+" "+n}})}const wet=fk("."+uk,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},pR),ket={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Tw=It.ie&&It.ie_version<=11;let Cet=class{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new itt,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(r=>{for(let n of r)this.queue.push(n);(It.ie&&It.ie_version<=11||It.ios&&t.composing)&&r.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&It.android&&t.constructor.EDIT_CONTEXT!==!1&&!(It.chrome&&It.chrome_version<126)&&(this.editContext=new _et(t),t.state.facet(Na)&&(t.contentDOM.editContext=this.editContext.editContext)),Tw&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var r;((r=this.view.docView)===null||r===void 0?void 0:r.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(r=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),r.length>0&&r[r.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(r=>{r.length>0&&r[r.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(t){(t.type=="change"||!t.type)&&!t.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((r,n)=>r!=t[n]))){this.gapIntersection.disconnect();for(let r of t)this.gapIntersection.observe(r);this.gaps=t}}onSelectionChange(t){let r=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(Na)?n.root.activeElement!=this.dom:!p2(this.dom,i))return;let s=i.anchorNode&&n.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(t)){r||(this.selectionChanged=!1);return}(It.ie&&It.ie_version<=11||It.android&&It.chrome)&&!n.state.selection.main.empty&&i.focusNode&&zp(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,r=Dm(t.root);if(!r)return!1;let n=It.safari&&t.root.nodeType==11&&t.root.activeElement==this.dom&&Tet(this.view,r)||r;if(!n||this.selectionRange.eq(n))return!1;let i=p2(this.dom,n);return i&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&ott(this.dom,n)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(t,r){this.selectionRange.set(t.node,t.offset,r.node,r.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,r=null;for(let n=this.dom;n;)if(n.nodeType==1)!r&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:r||(r=this.scrollTargets.slice(0,t)),r&&r.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(t<this.scrollTargets.length&&!r&&(r=this.scrollTargets.slice(0,t)),r){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=r)n.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,ket),Tw&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Tw&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,r){var n;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&cf(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:r,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let r=-1,n=-1,i=!1;for(let s of t){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),r==-1?{from:r,to:n}=o:(r=Math.min(o.from,r),n=Math.max(o.to,n)))}return{from:r,to:n,typeOver:i}}readChange(){let{from:t,to:r,typeOver:n}=this.processRecords(),i=this.selectionChanged&&p2(this.dom,this.selectionRange);if(t<0&&!i)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new Htt(this.view,t,r,n);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let r=this.readChange();if(!r)return this.view.requestMeasure(),!1;let n=this.view.state,i=eR(this.view,r);return this.view.state==n&&(r.domChanged||r.newSel&&!r.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(t){let r=this.view.docView.nearest(t.target);if(!r||r.ignoreMutation(t))return null;if(r.markDirty(t.type=="attributes"),t.type=="attributes"&&(r.flags|=4),t.type=="childList"){let n=cM(r,t.previousSibling||t.target.previousSibling,-1),i=cM(r,t.nextSibling||t.target.nextSibling,1);return{from:n?r.posAfter(n):r.posAtStart,to:i?r.posBefore(i):r.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(Na)!=t.state.facet(Na)&&(t.view.contentDOM.editContext=t.state.facet(Na)?this.editContext.editContext:null))}destroy(){var t,r,n;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(r=this.gapIntersection)===null||r===void 0||r.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};function cM(e,t,r){for(;t;){let n=rr.get(t);if(n&&n.parent==e)return n;let i=t.parentNode;t=i!=e.dom?i:r>0?t.nextSibling:t.previousSibling}return null}function hM(e,t){let r=t.startContainer,n=t.startOffset,i=t.endContainer,s=t.endOffset,o=e.docView.domAtPos(e.state.selection.main.anchor);return zp(o.node,o.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function Tet(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return hM(e,i)}let r=null;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",n,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",n,!0),r?hM(e,r):null}class _et{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let r=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=n=>{let i=t.state.selection.main,{anchor:s,head:o}=i,a=this.toEditorPos(n.updateRangeStart),l=this.toEditorPos(n.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:n.updateRangeStart,editorBase:a,drifted:!1});let c=l-a>n.text.length;a==this.from&&s<this.from?a=s:l==this.to&&s>this.to&&(l=s);let h=rR(t.state.sliceDoc(a,l),n.text,(c?i.from:i.to)-a,c?"end":null);if(!h){let f=ot.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd));f.main.eq(i)||t.dispatch({selection:f,userEvent:"select"});return}let u={from:h.from+a,to:h.toA+a,insert:Ve.of(n.text.slice(h.from,h.toB).split(`
`))};if((It.mac||It.android)&&u.from==o-1&&/^\. ?$/.test(n.text)&&t.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:a,to:l,insert:Ve.of([n.text.replace("."," ")])}),this.pendingContextChange=u,!t.state.readOnly){let f=this.to-this.from+(u.to-u.from+u.insert.length);g7(t,u,ot.single(this.toEditorPos(n.selectionStart,f),this.toEditorPos(n.selectionEnd,f)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state)),u.from<u.to&&!u.insert.length&&t.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(r.text.slice(Math.max(0,n.updateRangeStart-1),Math.min(r.text.length,n.updateRangeStart+1)))&&this.handlers.compositionend(n)},this.handlers.characterboundsupdate=n=>{let i=[],s=null;for(let o=this.toEditorPos(n.rangeStart),a=this.toEditorPos(n.rangeEnd);o<a;o++){let l=t.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,i.push(s)}r.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=n=>{let i=[];for(let s of n.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(a)){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let h=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;i.push(le.mark({attributes:{style:h}}).range(l,c))}}}t.dispatch({effects:UB.of(le.set(i))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:n}=this.composing;this.composing=null,n&&this.reset(t.state)}};for(let n in this.handlers)r.addEventListener(n,this.handlers[n]);this.measureReq={read:n=>{this.editContext.updateControlBounds(n.contentDOM.getBoundingClientRect());let i=Dm(n.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let r=0,n=!1,i=this.pendingContextChange;return t.changes.iterChanges((s,o,a,l,c)=>{if(n)return;let h=c.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(c)){i=this.pendingContextChange=null,r+=h,this.to+=h;return}else i=null,this.revertPending(t.state);if(s+=r,o+=r,o<=this.from)this.from+=h,this.to+=h;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=h}r+=h}),i&&!n&&this.revertPending(t.state),!n}update(t){let r=this.pendingContextChange,n=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(n.from,n.to)&&t.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):!this.applyEdits(t)||!this.rangeIsValid(t.state)?(this.pendingContextChange=null,this.reset(t.state)):(t.docChanged||t.selectionSet||r)&&this.setSelection(t.state),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:r}=t.selection.main;this.from=Math.max(0,r-1e4),this.to=Math.min(t.doc.length,r+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let r=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(r.from),this.toContextPos(r.from+r.insert.length),t.doc.sliceString(r.from,r.to))}setSelection(t){let{main:r}=t.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,r.anchor))),i=this.toContextPos(r.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(n,i)}rangeIsValid(t){let{head:r}=t.selection.main;return!(this.from>0&&r-this.from<500||this.to<t.doc.length&&this.to-r<500||this.to-this.from>1e4*3)}toEditorPos(t,r=this.to-this.from){t=Math.min(t,r);let n=this.composing;return n&&n.drifted?n.editorBase+(t-n.contextBase):t+this.from}toContextPos(t){let r=this.composing;return r&&r.drifted?r.contextBase+(t-r.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}}let $t=class dk{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var r;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:n}=t;this.dispatchTransactions=t.dispatchTransactions||n&&(i=>i.forEach(s=>n(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=t.root||stt(t.parent)||document,this.viewState=new aM(t.state||Sr.create(t)),t.scrollTo&&t.scrollTo.is(sy)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(nf).map(i=>new ww(i));for(let i of this.plugins)i.update(this);this.observer=new Cet(this),this.inputState=new jtt(this),this.inputState.ensureHandlers(this.plugins),this.docView=new q_(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((r=document.fonts)===null||r===void 0)&&r.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...t){let r=t.length==1&&t[0]instanceof si?t:t.length==1&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(r,this)}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let r=!1,n=!1,i,s=this.state;for(let f of t){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;t.some(f=>f.annotation(lR))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=cR(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,h=null;if(c?(this.observer.clearDelayedAndroidKey(),h=this.observer.readChange(),(h&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(h=null)):this.observer.clear(),s.facet(Sr.phrases)!=this.state.facet(Sr.phrases))return this.setState(s);i=Nb.create(this,s,t),i.flags|=a;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let f of t){if(u&&(u=u.map(f.changes)),f.scrollIntoView){let{main:d}=f.state.selection;u=new hf(d.empty?d:ot.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of f.effects)d.is(sy)&&(u=d.value.clip(this.state))}this.viewState.update(i,u),this.bidiCache=$b.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),r=this.docView.update(i),this.state.facet(W0)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(r,t.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(uy)!=i.state.facet(uy)&&(this.viewState.mustMeasureContent=!0),(r||n||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),r&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(ok))try{f(i)}catch(d){Mi(this.state,d,"update listener")}(l||h)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),h&&!eR(this,h)&&c.force&&cf(this.contentDOM,c.key,c.keyCode)})}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let r=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new aM(t),this.plugins=t.facet(nf).map(n=>new ww(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new q_(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}r&&this.focus(),this.requestMeasure()}updatePlugins(t){let r=t.startState.facet(nf),n=t.state.facet(nf);if(r!=n){let i=[];for(let s of n){let o=r.indexOf(s);if(o<0)i.push(new ww(s));else{let a=this.plugins[o];a.mustUpdate=t,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=t&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=t;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);r!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let r=t.value;if(r&&r.docViewUpdate)try{r.docViewUpdate(this)}catch(n){Mi(this.state,n,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,t&&this.observer.forceFlush();let r=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(kB(n))s=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);s=d.from,o=d.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let h=c.map(d=>{try{return d.read(this)}catch(p){return Mi(this.state,p),uM}}),u=Nb.create(this,this.state,[]),f=!1;u.flags|=l,r?r.flags|=l:r=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),f=this.docView.update(u),f&&this.docViewUpdate());for(let d=0;d<c.length;d++)if(h[d]!=uM)try{let p=c[d];p.write&&p.write(h[d],this)}catch(p){Mi(this.state,p)}if(f&&this.docView.updateSelection(!0),!u.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){i=i+p,n.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(r&&!r.empty)for(let a of this.state.facet(ok))a(r)}get themeClasses(){return uk+" "+(this.state.facet(hk)?dR:fR)+" "+this.state.facet(uy)}updateAttrs(){let t=fM(this,GB,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),r={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Na)?"true":"false",class:"cm-content",style:`${It.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(r["aria-readonly"]="true"),fM(this,p7,r);let n=this.observer.ignore(()=>{let i=ek(this.contentDOM,this.contentAttrs,r),s=ek(this.dom,this.editorAttrs,t);return i||s});return this.editorAttrs=t,this.contentAttrs=r,n}showAnnouncements(t){let r=!0;for(let n of t)for(let i of n.effects)if(i.is(dk.announce)){r&&(this.announceDOM.textContent=""),r=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(W0);let t=this.state.facet(dk.cspNonce);sc.mount(this.root,this.styleModules.concat(wet).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(t.key!=null){for(let r=0;r<this.measureRequests.length;r++)if(this.measureRequests[r].key===t.key){this.measureRequests[r]=t;return}}this.measureRequests.push(t)}}plugin(t){let r=this.pluginMap.get(t);return(r===void 0||r&&r.plugin!=t)&&this.pluginMap.set(t,r=this.plugins.find(n=>n.plugin==t)||null),r&&r.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,r,n){return Cw(this,t,G_(this,t,r,n))}moveByGroup(t,r){return Cw(this,t,G_(this,t,r,n=>Ptt(this,t.head,n)))}visualLineSide(t,r){let n=this.bidiSpans(t),i=this.textDirectionAt(t.from),s=n[r?n.length-1:0];return ot.cursor(s.side(r,i)+t.from,s.forward(!r,i)?1:-1)}moveToLineBoundary(t,r,n=!0){return Rtt(this,t,r,n)}moveVertically(t,r,n){return Cw(this,t,Ntt(this,t,r,n))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,r=0){return this.docView.posFromDOM(t,r)}posAtCoords(t,r=!0){return this.readMeasured(),ZB(this,t,r)}coordsAtPos(t,r=1){this.readMeasured();let n=this.docView.coordsAt(t,r);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(t),s=this.bidiSpans(i),o=s[Ul.find(s,t-i.from,-1,r)];return Cv(n,o.dir==br.LTR==r>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(VB)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>Met)return RB(t.length);let r=this.textDirectionAt(t.from),n;for(let s of this.bidiCache)if(s.from==t.from&&s.dir==r&&(s.fresh||BB(s.isolates,n=H_(this,t))))return s.order;n||(n=H_(this,t));let i=xtt(t.text,r,n);return this.bidiCache.push(new $b(t.from,t.to,r,n,!0,i)),i}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||It.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{vB(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,r={}){return sy.of(new hf(typeof t=="number"?ot.cursor(t):t,r.y,r.x,r.yMargin,r.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:r}=this.scrollDOM,n=this.viewState.scrollAnchorAt(t);return sy.of(new hf(ot.cursor(n.from),"start","start",n.top-t,r,!0))}setTabFocusMode(t){t==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof t=="boolean"?this.inputState.tabFocusMode=t?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return Ur.define(()=>({}),{eventHandlers:t})}static domEventObservers(t){return Ur.define(()=>({}),{eventObservers:t})}static theme(t,r){let n=sc.newName(),i=[uy.of(n),W0.of(fk(`.${n}`,t))];return r&&r.dark&&i.push(hk.of(!0)),i}static baseTheme(t){return Cc.lowest(W0.of(fk("."+uk,t,pR)))}static findFromDOM(t){var r;let n=t.querySelector(".cm-content"),i=n&&rr.get(n)||rr.get(t);return((r=i==null?void 0:i.rootView)===null||r===void 0?void 0:r.view)||null}};$t.styleModule=W0;$t.inputHandler=HB;$t.clipboardInputFilter=f7;$t.clipboardOutputFilter=d7;$t.scrollHandler=jB;$t.focusChangeEffect=qB;$t.perLineTextDirection=VB;$t.exceptionSink=zB;$t.updateListener=ok;$t.editable=Na;$t.mouseSelectionStyle=$B;$t.dragMovesSelection=FB;$t.clickAddsSelectionRange=NB;$t.decorations=Bm;$t.outerDecorations=KB;$t.atomicRanges=r1;$t.bidiIsolatedRanges=YB;$t.scrollMargins=XB;$t.darkTheme=hk;$t.cspNonce=Nt.define({combine:e=>e.length?e[0]:""});$t.contentAttributes=p7;$t.editorAttributes=GB;$t.lineWrapping=$t.contentAttributes.of({class:"cm-lineWrapping"});$t.announce=ke.define();const Met=4096,uM={};class $b{constructor(t,r,n,i,s,o){this.from=t,this.to=r,this.dir=n,this.isolates=i,this.fresh=s,this.order=o}static update(t,r){if(r.empty&&!t.some(s=>s.fresh))return t;let n=[],i=t.length?t[t.length-1].dir:br.LTR;for(let s=Math.max(0,t.length-10);s<t.length;s++){let o=t[s];o.dir==i&&!r.touchesRange(o.from,o.to)&&n.push(new $b(r.mapPos(o.from,1),r.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function fM(e,t,r){for(let n=e.state.facet(t),i=n.length-1;i>=0;i--){let s=n[i],o=typeof s=="function"?s(e):s;o&&tk(o,r)}return r}const Aet=It.mac?"mac":It.windows?"win":It.linux?"linux":"key";function Eet(e,t){const r=e.split(/-(?!$)/);let n=r[r.length-1];n=="Space"&&(n=" ");let i,s,o,a;for(let l=0;l<r.length-1;++l){const c=r[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))t=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(n="Alt-"+n),s&&(n="Ctrl-"+n),a&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function fy(e,t,r){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),r!==!1&&t.shiftKey&&(e="Shift-"+e),e}const Let=Cc.default($t.domEventHandlers({keydown(e,t){return gR(mR(t.state),e,t,"editor")}})),zd=Nt.define({enables:Let}),dM=new WeakMap;function mR(e){let t=e.facet(zd),r=dM.get(t);return r||dM.set(t,r=Iet(t.reduce((n,i)=>n.concat(i),[]))),r}function Oet(e,t,r){return gR(mR(e.state),t,e,r)}let Fl=null;const Det=4e3;function Iet(e,t=Aet){let r=Object.create(null),n=Object.create(null),i=(o,a)=>{let l=n[o];if(l==null)n[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,h)=>{var u,f;let d=r[o]||(r[o]=Object.create(null)),p=a.split(/ (?!$)/).map(y=>Eet(y,t));for(let y=1;y<p.length;y++){let b=p.slice(0,y).join(" ");i(b,!0),d[b]||(d[b]={preventDefault:!0,stopPropagation:!1,run:[x=>{let T=Fl={view:x,prefix:b,scope:o};return setTimeout(()=>{Fl==T&&(Fl=null)},Det),!0}]})}let m=p.join(" ");i(m,!1);let g=d[m]||(d[m]={preventDefault:!1,stopPropagation:!1,run:((f=(u=d._any)===null||u===void 0?void 0:u.run)===null||f===void 0?void 0:f.slice())||[]});l&&g.run.push(l),c&&(g.preventDefault=!0),h&&(g.stopPropagation=!0)};for(let o of e){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let h=r[c]||(r[c]=Object.create(null));h._any||(h._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:u}=o;for(let f in h)h[f].run.push(d=>u(d,pk))}let l=o[t]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return r}let pk=null;function gR(e,t,r,n){pk=t;let i=gB(t),s=Ci(i,0),o=Ro(s)==i.length&&i!=" ",a="",l=!1,c=!1,h=!1;Fl&&Fl.view==r&&Fl.scope==n&&(a=Fl.prefix+" ",iR.indexOf(t.keyCode)<0&&(c=!0,Fl=null));let u=new Set,f=g=>{if(g){for(let y of g.run)if(!u.has(y)&&(u.add(y),y(r)))return g.stopPropagation&&(h=!0),!0;g.preventDefault&&(g.stopPropagation&&(h=!0),c=!0)}return!1},d=e[n],p,m;return d&&(f(d[a+fy(i,t,!o)])?l=!0:o&&(t.altKey||t.metaKey||t.ctrlKey)&&!(It.windows&&t.ctrlKey&&t.altKey)&&!(It.mac&&t.altKey&&!(t.ctrlKey||t.metaKey))&&(p=Qa[t.keyCode])&&p!=i?(f(d[a+fy(p,t,!0)])||t.shiftKey&&(m=Om[t.keyCode])!=i&&m!=p&&f(d[a+fy(m,t,!1)]))&&(l=!0):o&&t.shiftKey&&f(d[a+fy(i,t,!0)])&&(l=!0),!l&&f(d._any)&&(l=!0)),c&&(l=!0),l&&h&&t.stopPropagation(),pk=null,l}class n1{constructor(t,r,n,i,s){this.className=t,this.left=r,this.top=n,this.width=i,this.height=s}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,r){return r.className!=this.className?!1:(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width!=null&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,r,n){if(n.empty){let i=t.coordsAtPos(n.head,n.assoc||1);if(!i)return[];let s=yR(t);return[new n1(r,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return Bet(t,r,n)}}function yR(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==br.LTR?t.left:t.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:t.top-e.scrollDOM.scrollTop*e.scaleY}}function pM(e,t,r,n){let i=e.coordsAtPos(t,r*2);if(!i)return n;let s=e.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=e.posAtCoords({x:s.left+1,y:o}),l=e.posAtCoords({x:s.right-1,y:o});return a==null||l==null?n:{from:Math.max(n.from,Math.min(a,l)),to:Math.min(n.to,Math.max(a,l))}}function Bet(e,t,r){if(r.to<=e.viewport.from||r.from>=e.viewport.to)return[];let n=Math.max(r.from,e.viewport.from),i=Math.min(r.to,e.viewport.to),s=e.textDirection==br.LTR,o=e.contentDOM,a=o.getBoundingClientRect(),l=yR(e),c=o.querySelector(".cm-line"),h=c&&window.getComputedStyle(c),u=a.left+(h?parseInt(h.paddingLeft)+Math.min(0,parseInt(h.textIndent)):0),f=a.right-(h?parseInt(h.paddingRight):0),d=lk(e,n,1),p=lk(e,i,-1),m=d.type==oi.Text?d:null,g=p.type==oi.Text?p:null;if(m&&(e.lineWrapping||d.widgetLineBreaks)&&(m=pM(e,n,1,m)),g&&(e.lineWrapping||p.widgetLineBreaks)&&(g=pM(e,i,-1,g)),m&&g&&m.from==g.from&&m.to==g.to)return b(x(r.from,r.to,m));{let S=m?x(r.from,null,m):T(d,!1),w=g?x(null,r.to,g):T(p,!0),_=[];return(m||d).to<(g||p).from-(m&&g?1:0)||d.widgetLineBreaks>1&&S.bottom+e.defaultLineHeight/2<w.top?_.push(y(u,S.bottom,f,w.top)):S.bottom<w.top&&e.elementAtHeight((S.bottom+w.top)/2).type==oi.Text&&(S.bottom=w.top=(S.bottom+w.top)/2),b(S).concat(_).concat(b(w))}function y(S,w,_,I){return new n1(t,S-l.left,w-l.top,_-S,I-w)}function b({top:S,bottom:w,horizontal:_}){let I=[];for(let N=0;N<_.length;N+=2)I.push(y(_[N],S,_[N+1],w));return I}function x(S,w,_){let I=1e9,N=-1e9,L=[];function D(z,$,H,U,q){let rt=e.coordsAtPos(z,z==_.to?-2:2),E=e.coordsAtPos(H,H==_.from?2:-2);!rt||!E||(I=Math.min(rt.top,E.top,I),N=Math.max(rt.bottom,E.bottom,N),q==br.LTR?L.push(s&&$?u:rt.left,s&&U?f:E.right):L.push(!s&&U?u:E.left,!s&&$?f:rt.right))}let P=S??_.from,K=w??_.to;for(let z of e.visibleRanges)if(z.to>P&&z.from<K)for(let $=Math.max(z.from,P),H=Math.min(z.to,K);;){let U=e.state.doc.lineAt($);for(let q of e.bidiSpans(U)){let rt=q.from+U.from,E=q.to+U.from;if(rt>=H)break;E>$&&D(Math.max(rt,$),S==null&&rt<=P,Math.min(E,H),w==null&&E>=K,q.dir)}if($=U.to+1,$>=H)break}return L.length==0&&D(P,S==null,K,w==null,e.textDirection),{top:I,bottom:N,horizontal:L}}function T(S,w){let _=a.top+(w?S.top:S.bottom);return{top:_,bottom:_,horizontal:[]}}}function Ret(e,t){return e.constructor==t.constructor&&e.eq(t)}class Pet{constructor(t,r){this.view=t,this.layer=r,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),r.above&&this.dom.classList.add("cm-layer-above"),r.class&&this.dom.classList.add(r.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),r.mount&&r.mount(this.dom,t)}update(t){t.startState.facet(y2)!=t.state.facet(y2)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&(this.scale(),t.view.requestMeasure(this.measureReq))}docViewUpdate(t){this.layer.updateOnDocViewUpdate!==!1&&t.requestMeasure(this.measureReq)}setOrder(t){let r=0,n=t.facet(y2);for(;r<n.length&&n[r]!=this.layer;)r++;this.dom.style.zIndex=String((this.layer.above?150:-1)-r)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:t,scaleY:r}=this.view;(t!=this.scaleX||r!=this.scaleY)&&(this.scaleX=t,this.scaleY=r,this.dom.style.transform=`scale(${1/t}, ${1/r})`)}draw(t){if(t.length!=this.drawn.length||t.some((r,n)=>!Ret(r,this.drawn[n]))){let r=this.dom.firstChild,n=0;for(let i of t)i.update&&r&&i.constructor&&this.drawn[n].constructor&&i.update(r,this.drawn[n])?(r=r.nextSibling,n++):this.dom.insertBefore(i.draw(),r);for(;r;){let i=r.nextSibling;r.remove(),r=i}this.drawn=t,It.safari&&It.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const y2=Nt.define();function bR(e){return[Ur.define(t=>new Pet(t,e)),y2.of(e)]}const Rm=Nt.define({combine(e){return ra(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,r)=>Math.min(t,r),drawRangeCursor:(t,r)=>t||r})}});function xR(e={}){return[Rm.of(e),Net,Fet,$et,WB.of(!0)]}function vR(e){return e.startState.facet(Rm)!=e.state.facet(Rm)}const Net=bR({above:!0,markers(e){let{state:t}=e,r=t.facet(Rm),n=[];for(let i of t.selection.ranges){let s=i==t.selection.main;if(i.empty||r.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:ot.cursor(i.head,i.head>i.anchor?-1:1);for(let l of n1.forRange(e,o,a))n.push(l)}}return n},update(e,t){e.transactions.some(n=>n.selection)&&(t.style.animationName=t.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let r=vR(e);return r&&mM(e.state,t),e.docChanged||e.selectionSet||r},mount(e,t){mM(t.state,e)},class:"cm-cursorLayer"});function mM(e,t){t.style.animationDuration=e.facet(Rm).cursorBlinkRate+"ms"}const Fet=bR({above:!1,markers(e){return e.state.selection.ranges.map(t=>t.empty?[]:n1.forRange(e,"cm-selectionBackground",t)).reduce((t,r)=>t.concat(r))},update(e,t){return e.docChanged||e.selectionSet||e.viewportChanged||vR(e)},class:"cm-selectionLayer"}),$et=Cc.highest($t.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),wR=ke.define({map(e,t){return e==null?null:t.mapPos(e)}}),G0=hn.define({create(){return null},update(e,t){return e!=null&&(e=t.changes.mapPos(e)),t.effects.reduce((r,n)=>n.is(wR)?n.value:r,e)}}),zet=Ur.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let r=e.state.field(G0);r==null?this.cursor!=null&&((t=this.cursor)===null||t===void 0||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(G0)!=r||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:e}=this,t=e.state.field(G0),r=t!=null&&e.coordsAtPos(t);if(!r)return null;let n=e.scrollDOM.getBoundingClientRect();return{left:r.left-n.left+e.scrollDOM.scrollLeft*e.scaleX,top:r.top-n.top+e.scrollDOM.scrollTop*e.scaleY,height:r.bottom-r.top}}drawCursor(e){if(this.cursor){let{scaleX:t,scaleY:r}=this.view;e?(this.cursor.style.left=e.left/t+"px",this.cursor.style.top=e.top/r+"px",this.cursor.style.height=e.height/r+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(G0)!=e&&this.view.dispatch({effects:wR.of(e)})}},{eventObservers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){(e.target==this.view.contentDOM||!this.view.contentDOM.contains(e.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Het(){return[G0,zet]}function gM(e,t,r,n,i){t.lastIndex=0;for(let s=e.iterRange(r,n),o=r,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=t.exec(s.value);)i(o+a.index,a)}function qet(e,t){let r=e.visibleRanges;if(r.length==1&&r[0].from==e.viewport.from&&r[0].to==e.viewport.to)return r;let n=[];for(let{from:i,to:s}of r)i=Math.max(e.state.doc.lineAt(i).from,i-t),s=Math.min(e.state.doc.lineAt(s).to,s+t),n.length&&n[n.length-1].to>=i?n[n.length-1].to=s:n.push({from:i,to:s});return n}class Vet{constructor(t){const{regexp:r,decoration:n,decorate:i,boundary:s,maxLength:o=1e3}=t;if(!r.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=r,i)this.addMatch=(a,l,c,h)=>i(h,c,c+a[0].length,a,l);else if(typeof n=="function")this.addMatch=(a,l,c,h)=>{let u=n(a,l,c);u&&h(c,c+a[0].length,u)};else if(n)this.addMatch=(a,l,c,h)=>h(c,c+a[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(t){let r=new Za,n=r.add.bind(r);for(let{from:i,to:s}of qet(t,this.maxLength))gM(t.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,t,o,n));return r.finish()}updateDeco(t,r){let n=1e9,i=-1;return t.docChanged&&t.changes.iterChanges((s,o,a,l)=>{l>=t.view.viewport.from&&a<=t.view.viewport.to&&(n=Math.min(a,n),i=Math.max(l,i))}),t.viewportMoved||i-n>1e3?this.createDeco(t.view):i>-1?this.updateRange(t.view,r.map(t.changes),n,i):r}updateRange(t,r,n,i){for(let s of t.visibleRanges){let o=Math.max(s.from,n),a=Math.min(s.to,i);if(a>=o){let l=t.state.doc.lineAt(o),c=l.to<a?t.state.doc.lineAt(a):l,h=Math.max(s.from,l.from),u=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){h=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){u=a;break}}let f=[],d,p=(m,g,y)=>f.push(y.range(m,g));if(l==c)for(this.regexp.lastIndex=h-l.from;(d=this.regexp.exec(l.text))&&d.index<u-l.from;)this.addMatch(d,t,d.index+l.from,p);else gM(t.state.doc,this.regexp,h,u,(m,g)=>this.addMatch(g,t,m,p));r=r.update({filterFrom:h,filterTo:u,filter:(m,g)=>m<h||g>u,add:f})}}return r}}const mk=/x/.unicode!=null?"gu":"g",Wet=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,mk),jet={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _w=null;function Uet(){var e;if(_w==null&&typeof document<"u"&&document.body){let t=document.body.style;_w=((e=t.tabSize)!==null&&e!==void 0?e:t.MozTabSize)!=null}return _w||!1}const b2=Nt.define({combine(e){let t=ra(e,{render:null,specialChars:Wet,addSpecialChars:null});return(t.replaceTabs=!Uet())&&(t.specialChars=new RegExp("	|"+t.specialChars.source,mk)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,mk)),t}});function Get(e={}){return[b2.of(e),Ket()]}let yM=null;function Ket(){return yM||(yM=Ur.fromClass(class{constructor(e){this.view=e,this.decorations=le.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(b2)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new Vet({regexp:e.specialChars,decoration:(t,r,n)=>{let{doc:i}=r.state,s=Ci(t[0],0);if(s==9){let o=i.lineAt(n),a=r.state.tabSize,l=$d(o.text,a,n-o.from);return le.replace({widget:new Zet((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=le.replace({widget:new Jet(e,s)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(b2);e.startState.facet(b2)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))}const Yet="";function Xet(e){return e>=32?Yet:e==10?"":String.fromCharCode(9216+e)}class Jet extends dl{constructor(t,r){super(),this.options=t,this.code=r}eq(t){return t.code==this.code}toDOM(t){let r=Xet(this.code),n=t.state.phrase("Control character")+" "+(jet[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,r);if(i)return i;let s=document.createElement("span");return s.textContent=r,s.title=n,s.setAttribute("aria-label",n),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Zet extends dl{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="	",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}function Qet(){return ert}const trt=le.line({class:"cm-activeLine"}),ert=Ur.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,r=[];for(let n of e.state.selection.ranges){let i=e.lineBlockAt(n.head);i.from>t&&(r.push(trt.range(i.from)),t=i.from)}return le.set(r)}},{decorations:e=>e.decorations}),gk=2e3;function rrt(e,t,r){let n=Math.min(t.line,r.line),i=Math.max(t.line,r.line),s=[];if(t.off>gk||r.off>gk||t.col<0||r.col<0){let o=Math.min(t.off,r.off),a=Math.max(t.off,r.off);for(let l=n;l<=i;l++){let c=e.doc.line(l);c.length<=a&&s.push(ot.range(c.from+o,c.to+a))}}else{let o=Math.min(t.col,r.col),a=Math.max(t.col,r.col);for(let l=n;l<=i;l++){let c=e.doc.line(l),h=U3(c.text,o,e.tabSize,!0);if(h<0)s.push(ot.cursor(c.to));else{let u=U3(c.text,a,e.tabSize);s.push(ot.range(c.from+h,c.from+u))}}}return s}function nrt(e,t){let r=e.coordsAtPos(e.viewport.from);return r?Math.round(Math.abs((r.left-t)/e.defaultCharacterWidth)):-1}function bM(e,t){let r=e.posAtCoords({x:t.clientX,y:t.clientY},!1),n=e.state.doc.lineAt(r),i=r-n.from,s=i>gk?-1:i==n.length?nrt(e,t.clientX):$d(n.text,e.state.tabSize,r-n.from);return{line:n.number,col:s,off:i}}function irt(e,t){let r=bM(e,t),n=e.state.selection;return r?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(r.line).from),o=i.state.doc.lineAt(s);r={line:o.number,col:r.col,off:Math.min(r.off,o.length)},n=n.map(i.changes)}},get(i,s,o){let a=bM(e,i);if(!a)return n;let l=rrt(e.state,r,a);return l.length?o?ot.create(l.concat(n.ranges)):ot.create(l):n}}:null}function srt(e){let t=r=>r.altKey&&r.button==0;return $t.mouseSelectionStyle.of((r,n)=>t(n)?irt(r,n):null)}const ort={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},art={style:"cursor: crosshair"};function lrt(e={}){let[t,r]=ort[e.key||"Alt"],n=Ur.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==t||r(i))},keyup(i){(i.keyCode==t||!r(i))&&this.set(!1)},mousemove(i){this.set(r(i))}}});return[n,$t.contentAttributes.of(i=>{var s;return!((s=i.plugin(n))===null||s===void 0)&&s.isDown?art:null})]}const dy="-10000px";class kR{constructor(t,r,n,i){this.facet=r,this.createTooltipView=n,this.removeTooltipView=i,this.input=t.state.facet(r),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=n(o,s))}update(t,r){var n;let i=t.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(t);return!1}let o=[],a=r?[]:null;for(let l=0;l<s.length;l++){let c=s[l],h=-1;if(c){for(let u=0;u<this.tooltips.length;u++){let f=this.tooltips[u];f&&f.create==c.create&&(h=u)}if(h<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let u=o[l]=this.tooltipViews[h];a&&(a[l]=r[h]),u.update&&u.update(t)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(n=l.destroy)===null||n===void 0||n.call(l));return r&&(a.forEach((l,c)=>r[c]=l),r.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function crt(e){let t=e.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:t.clientHeight,right:t.clientWidth}}const Mw=Nt.define({combine:e=>{var t,r,n;return{position:It.ios?"absolute":((t=e.find(i=>i.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((r=e.find(i=>i.parent))===null||r===void 0?void 0:r.parent)||null,tooltipSpace:((n=e.find(i=>i.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||crt}}}),xM=new WeakMap,x7=Ur.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(Mw);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new kR(e,v7,(r,n)=>this.createTooltip(r,n),r=>{this.resizeObserver&&this.resizeObserver.unobserve(r.dom),r.dom.remove()}),this.above=this.manager.tooltips.map(r=>!!r.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(r=>{Date.now()>this.lastTransaction-50&&r.length>0&&r[r.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e,this.above);t&&this.observeIntersection();let r=t||e.geometryChanged,n=e.state.facet(Mw);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;r=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);r=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);r&&this.maybeMeasure()}createTooltip(e,t){let r=e.create(this.view),n=t?t.dom:null;if(r.dom.classList.add("cm-tooltip"),e.arrow&&!r.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",r.dom.appendChild(i)}return r.dom.style.position=this.position,r.dom.style.top=dy,r.dom.style.left="0px",this.container.insertBefore(r.dom,n),r.mount&&r.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(r.dom),r}destroy(){var e,t,r;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(e=n.destroy)===null||e===void 0||e.call(n);this.parent&&this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(r=this.intersectionObserver)===null||r===void 0||r.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=1,t=1,r=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(It.safari){let o=s.getBoundingClientRect();r=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}else r=!!s.offsetParent&&s.offsetParent!=this.container.ownerDocument.body}if(r||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(e=s.width/this.parent.offsetWidth,t=s.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);let n=this.view.scrollDOM.getBoundingClientRect(),i=m7(this.view);return{visible:{left:n.left+i.left,top:n.top+i.top,right:n.right-i.right,bottom:n.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Mw).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:r}}writeMeasure(e){var t;if(e.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:r,space:n,scaleX:i,scaleY:s}=e,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:h}=c,u=e.pos[a],f=e.size[a];if(!u||l.clip!==!1&&(u.bottom<=Math.max(r.top,n.top)||u.top>=Math.min(r.bottom,n.bottom)||u.right<Math.max(r.left,n.left)-.1||u.left>Math.min(r.right,n.right)+.1)){h.style.top=dy;continue}let d=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=d?7:0,m=f.right-f.left,g=(t=xM.get(c))!==null&&t!==void 0?t:f.bottom-f.top,y=c.offset||urt,b=this.view.textDirection==br.LTR,x=f.width>n.right-n.left?b?n.left:n.right-f.width:b?Math.max(n.left,Math.min(u.left-(d?14:0)+y.x,n.right-m)):Math.min(Math.max(n.left,u.left-m+(d?14:0)-y.x),n.right-m),T=this.above[a];!l.strictSide&&(T?u.top-g-p-y.y<n.top:u.bottom+g+p+y.y>n.bottom)&&T==n.bottom-u.bottom>u.top-n.top&&(T=this.above[a]=!T);let S=(T?u.top-n.top:n.bottom-u.bottom)-p;if(S<g&&c.resize!==!1){if(S<this.view.defaultLineHeight){h.style.top=dy;continue}xM.set(c,g),h.style.height=(g=S)/s+"px"}else h.style.height&&(h.style.height="");let w=T?u.top-g-p-y.y:u.bottom+p+y.y,_=x+m;if(c.overlap!==!0)for(let I of o)I.left<_&&I.right>x&&I.top<w+g&&I.bottom>w&&(w=T?I.top-g-2-p:I.bottom+p+2);if(this.position=="absolute"?(h.style.top=(w-e.parent.top)/s+"px",vM(h,(x-e.parent.left)/i)):(h.style.top=w/s+"px",vM(h,x/i)),d){let I=u.left+(b?y.x:-y.x)-(x+14-7);d.style.left=I/i+"px"}c.overlap!==!0&&o.push({left:x,top:w,right:_,bottom:w+g}),h.classList.toggle("cm-tooltip-above",T),h.classList.toggle("cm-tooltip-below",!T),c.positioned&&c.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=dy}},{eventObservers:{scroll(){this.maybeMeasure()}}});function vM(e,t){let r=parseInt(e.style.left,10);(isNaN(r)||Math.abs(t-r)>1)&&(e.style.left=t+"px")}const hrt=$t.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),urt={x:0,y:0},v7=Nt.define({enables:[x7,hrt]}),zb=Nt.define({combine:e=>e.reduce((t,r)=>t.concat(r),[])});class Tv{static create(t){return new Tv(t)}constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new kR(t,zb,(r,n)=>this.createHostedView(r,n),r=>r.dom.remove())}createHostedView(t,r){let n=t.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,r?r.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(t){for(let r of this.manager.tooltipViews)r.mount&&r.mount(t);this.mounted=!0}positioned(t){for(let r of this.manager.tooltipViews)r.positioned&&r.positioned(t)}update(t){this.manager.update(t)}destroy(){var t;for(let r of this.manager.tooltipViews)(t=r.destroy)===null||t===void 0||t.call(r)}passProp(t){let r;for(let n of this.manager.tooltipViews){let i=n[t];if(i!==void 0){if(r===void 0)r=i;else if(r!==i)return}}return r}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const frt=v7.compute([zb],e=>{let t=e.facet(zb);return t.length===0?null:{pos:Math.min(...t.map(r=>r.pos)),end:Math.max(...t.map(r=>{var n;return(n=r.end)!==null&&n!==void 0?n:r.pos})),create:Tv.create,above:t[0].above,arrow:t.some(r=>r.arrow)}});class drt{constructor(t,r,n,i,s){this.view=t,this.source=r,this.field=n,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:t,lastMove:r}=this,n=t.docView.nearest(r.target);if(!n)return;let i,s=1;if(n instanceof $a)i=n.posAtStart;else{if(i=t.posAtCoords(r),i==null)return;let a=t.coordsAtPos(i);if(!a||r.y<a.top||r.y>a.bottom||r.x<a.left-t.defaultCharacterWidth||r.x>a.right+t.defaultCharacterWidth)return;let l=t.bidiSpans(t.state.doc.lineAt(i)).find(h=>h.from<=i&&h.to>=i),c=l&&l.dir==br.RTL?-1:1;s=r.x<a.left?-c:c}let o=this.source(t,i,s);if(o!=null&&o.then){let a=this.pending={pos:i};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Mi(t.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let t=this.view.plugin(x7),r=t?t.manager.tooltips.findIndex(n=>n.create==Tv.create):-1;return r>-1?t.manager.tooltipViews[r]:null}mousemove(t){var r,n;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!prt(s.dom,t)||this.pending){let{pos:o}=i[0]||this.pending,a=(n=(r=i[0])===null||r===void 0?void 0:r.end)!==null&&n!==void 0?n:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!mrt(this.view,o,a,t.clientX,t.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:r}=this;if(r.length){let{tooltip:n}=this;n&&n.dom.contains(t.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(t){let r=n=>{t.removeEventListener("mouseleave",r),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};t.addEventListener("mouseleave",r)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const py=4;function prt(e,t){let{left:r,right:n,top:i,bottom:s}=e.getBoundingClientRect(),o;if(o=e.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();i=Math.min(a.top,i),s=Math.max(a.bottom,s)}return t.clientX>=r-py&&t.clientX<=n+py&&t.clientY>=i-py&&t.clientY<=s+py}function mrt(e,t,r,n,i,s){let o=e.scrollDOM.getBoundingClientRect(),a=e.documentTop+e.documentPadding.top+e.contentHeight;if(o.left>n||o.right<n||o.top>i||Math.min(o.bottom,a)<i)return!1;let l=e.posAtCoords({x:n,y:i},!1);return l>=t&&l<=r}function grt(e,t={}){let r=ke.define(),n=hn.define({create(){return[]},update(i,s){if(i.length&&(t.hideOnChange&&(s.docChanged||s.selection)?i=[]:t.hideOn&&(i=i.filter(o=>!t.hideOn(s,o))),s.docChanged)){let o=[];for(let a of i){let l=s.changes.mapPos(a.pos,-1,vn.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}i=o}for(let o of s.effects)o.is(r)&&(i=o.value),o.is(yrt)&&(i=[]);return i},provide:i=>zb.from(i)});return{active:n,extension:[n,Ur.define(i=>new drt(i,e,n,r,t.hoverTime||300)),frt]}}function CR(e,t){let r=e.plugin(x7);if(!r)return null;let n=r.manager.tooltips.indexOf(t);return n<0?null:r.manager.tooltipViews[n]}const yrt=ke.define(),wM=Nt.define({combine(e){let t,r;for(let n of e)t=t||n.topContainer,r=r||n.bottomContainer;return{topContainer:t,bottomContainer:r}}});function Pm(e,t){let r=e.plugin(SR),n=r?r.specs.indexOf(t):-1;return n>-1?r.panels[n]:null}const SR=Ur.fromClass(class{constructor(e){this.input=e.state.facet(Nm),this.specs=this.input.filter(r=>r),this.panels=this.specs.map(r=>r(e));let t=e.state.facet(wM);this.top=new my(e,!0,t.topContainer),this.bottom=new my(e,!1,t.bottomContainer),this.top.sync(this.panels.filter(r=>r.top)),this.bottom.sync(this.panels.filter(r=>!r.top));for(let r of this.panels)r.dom.classList.add("cm-panel"),r.mount&&r.mount()}update(e){let t=e.state.facet(wM);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new my(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new my(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let r=e.state.facet(Nm);if(r!=this.input){let n=r.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of n){let c=this.specs.indexOf(l),h;c<0?(h=l(e.view),a.push(h)):(h=this.panels[c],h.update&&h.update(e)),i.push(h),(h.top?s:o).push(h)}this.specs=n,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let n of this.panels)n.update&&n.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>$t.scrollMargins.of(t=>{let r=t.plugin(e);return r&&{top:r.top.scrollMargin(),bottom:r.bottom.scrollMargin()}})});class my{constructor(t,r,n){this.view=t,this.top=r,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let r of this.panels)r.destroy&&t.indexOf(r)<0&&r.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let r=this.container||this.view.dom;r.insertBefore(this.dom,this.top?r.firstChild:null)}let t=this.dom.firstChild;for(let r of this.panels)if(r.dom.parentNode==this.dom){for(;t!=r.dom;)t=kM(t);t=t.nextSibling}else this.dom.insertBefore(r.dom,t);for(;t;)t=kM(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function kM(e){let t=e.nextSibling;return e.remove(),t}const Nm=Nt.define({enables:SR});class el extends Yh{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}el.prototype.elementClass="";el.prototype.toDOM=void 0;el.prototype.mapMode=vn.TrackBefore;el.prototype.startSide=el.prototype.endSide=-1;el.prototype.point=!0;const x2=Nt.define(),brt=Nt.define(),xrt={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ze.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Vp=Nt.define();function vrt(e){return[TR(),Vp.of({...xrt,...e})]}const CM=Nt.define({combine:e=>e.some(t=>t)});function TR(e){return[wrt]}const wrt=Ur.fromClass(class{constructor(e){this.view=e,this.domAfter=null,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(Vp).map(t=>new TM(e,t)),this.fixed=!e.state.facet(CM);for(let t of this.gutters)t.config.side=="after"?this.getDOMAfter().appendChild(t.dom):this.dom.appendChild(t.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(e){if(this.updateGutters(e)){let t=this.prevViewport,r=e.view.viewport,n=Math.min(t.to,r.to)-Math.max(t.from,r.from);this.syncGutters(n<(r.to-r.from)*.8)}if(e.geometryChanged){let t=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=t,this.domAfter&&(this.domAfter.style.minHeight=t)}this.view.state.facet(CM)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let r=ze.iter(this.view.state.facet(x2),this.view.viewport.from),n=[],i=this.gutters.map(s=>new krt(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==oi.Text&&o){yk(r,n,a.from);for(let l of i)l.line(this.view,a,n);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==oi.Text){yk(r,n,s.from);for(let o of i)o.line(this.view,s,n)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();e&&(this.view.scrollDOM.insertBefore(this.dom,t),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(e){let t=e.startState.facet(Vp),r=e.state.facet(Vp),n=e.docChanged||e.heightChanged||e.viewportChanged||!ze.eq(e.startState.facet(x2),e.state.facet(x2),e.view.viewport.from,e.view.viewport.to);if(t==r)for(let i of this.gutters)i.update(e)&&(n=!0);else{n=!0;let i=[];for(let s of r){let o=t.indexOf(s);o<0?i.push(new TM(this.view,s)):(this.gutters[o].update(e),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return n}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:e=>$t.scrollMargins.of(t=>{let r=t.plugin(e);if(!r||r.gutters.length==0||!r.fixed)return null;let n=r.dom.offsetWidth*t.scaleX,i=r.domAfter?r.domAfter.offsetWidth*t.scaleX:0;return t.textDirection==br.LTR?{left:n,right:i}:{right:n,left:i}})});function SM(e){return Array.isArray(e)?e:[e]}function yk(e,t,r){for(;e.value&&e.from<=r;)e.from==r&&t.push(e.value),e.next()}class krt{constructor(t,r,n){this.gutter=t,this.height=n,this.i=0,this.cursor=ze.iter(t.markers,r.from)}addElement(t,r,n){let{gutter:i}=this,s=(r.top-this.height)/t.scaleY,o=r.height/t.scaleY;if(this.i==i.elements.length){let a=new _R(t,o,s,n);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(t,o,s,n);this.height=r.bottom,this.i++}line(t,r,n){let i=[];yk(this.cursor,i,r.from),n.length&&(i=i.concat(n));let s=this.gutter.config.lineMarker(t,r,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(t,r,i)}widget(t,r){let n=this.gutter.config.widgetMarker(t,r.widget,r),i=n?[n]:null;for(let s of t.state.facet(brt)){let o=s(t,r.widget,r);o&&(i||(i=[])).push(o)}i&&this.addElement(t,r,i)}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let r=t.elements.pop();t.dom.removeChild(r.dom),r.destroy()}}}class TM{constructor(t,r){this.view=t,this.config=r,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in r.domEventHandlers)this.dom.addEventListener(n,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=t.lineBlockAtHeight(o-t.documentTop);r.domEventHandlers[n](t,a,i)&&i.preventDefault()});this.markers=SM(r.markers(t)),r.initialSpacer&&(this.spacer=new _R(t,0,0,[r.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let r=this.markers;if(this.markers=SM(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],t);i!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[i])}let n=t.view.viewport;return!ze.eq(this.markers,r,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(t):!1)}destroy(){for(let t of this.elements)t.destroy()}}class _R{constructor(t,r,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,r,n,i)}update(t,r,n,i){this.height!=r&&(this.height=r,this.dom.style.height=r+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),Crt(this.markers,i)||this.setMarkers(t,i)}setMarkers(t,r){let n="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<r.length?r[s++]:null,c=!1;if(l){let h=l.elementClass;h&&(n+=" "+h);for(let u=o;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,c=!0;break}}else a=this.markers.length;for(;o<a;){let h=this.markers[o++];if(h.toDOM){h.destroy(i);let u=i.nextSibling;i.remove(),i=u}}if(!l)break;l.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(l.toDOM(t),i)),c&&o++}this.dom.className=n,this.markers=r}destroy(){this.setMarkers(null,[])}}function Crt(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].compare(t[r]))return!1;return!0}const Srt=Nt.define(),Trt=Nt.define(),sf=Nt.define({combine(e){return ra(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,r){let n=Object.assign({},t);for(let i in r){let s=n[i],o=r[i];n[i]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return n}})}});class Aw extends el{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function Ew(e,t){return e.state.facet(sf).formatNumber(t,e.state)}const _rt=Vp.compute([sf],e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(Srt)},lineMarker(t,r,n){return n.some(i=>i.toDOM)?null:new Aw(Ew(t,t.state.doc.lineAt(r.from).number))},widgetMarker:(t,r,n)=>{for(let i of t.state.facet(Trt)){let s=i(t,r,n);if(s)return s}return null},lineMarkerChange:t=>t.startState.facet(sf)!=t.state.facet(sf),initialSpacer(t){return new Aw(Ew(t,_M(t.state.doc.lines)))},updateSpacer(t,r){let n=Ew(r.view,_M(r.view.state.doc.lines));return n==t.number?t:new Aw(n)},domEventHandlers:e.facet(sf).domEventHandlers,side:"before"}));function Mrt(e={}){return[sf.of(e),TR(),_rt]}function _M(e){let t=9;for(;t<e;)t=t*10+9;return t}const Art=new class extends el{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Ert=x2.compute(["selection"],e=>{let t=[],r=-1;for(let n of e.selection.ranges){let i=e.doc.lineAt(n.head).from;i>r&&(r=i,t.push(Art.range(i)))}return ze.of(t)});function Lrt(){return Ert}let Ort=0;class ps{constructor(t,r,n,i){this.name=t,this.set=r,this.base=n,this.modified=i,this.id=Ort++}toString(){let{name:t}=this;for(let r of this.modified)r.name&&(t=`${r.name}(${t})`);return t}static define(t,r){let n=typeof t=="string"?t:"?";if(t instanceof ps&&(r=t),r!=null&&r.base)throw new Error("Can not derive from a modified tag");let i=new ps(n,[],null,[]);if(i.set.push(i),r)for(let s of r.set)i.set.push(s);return i}static defineModifier(t){let r=new Hb(t);return n=>n.modified.indexOf(r)>-1?n:Hb.get(n.base||n,n.modified.concat(r).sort((i,s)=>i.id-s.id))}}let Drt=0;class Hb{constructor(t){this.name=t,this.instances=[],this.id=Drt++}static get(t,r){if(!r.length)return t;let n=r[0].instances.find(a=>a.base==t&&Irt(r,a.modified));if(n)return n;let i=[],s=new ps(t.name,i,t,r);for(let a of r)a.instances.push(s);let o=Brt(r);for(let a of t.set)if(!a.modified.length)for(let l of o)i.push(Hb.get(a,l));return s}}function Irt(e,t){return e.length==t.length&&e.every((r,n)=>r==t[n])}function Brt(e){let t=[[]];for(let r=0;r<e.length;r++)for(let n=0,i=t.length;n<i;n++)t.push(t[n].concat(e[r]));return t.sort((r,n)=>n.length-r.length)}function Rrt(e){let t=Object.create(null);for(let r in e){let n=e[r];Array.isArray(n)||(n=[n]);for(let i of r.split(" "))if(i){let s=[],o=2,a=i;for(let u=0;;){if(a=="..."&&u>0&&u+3==i.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),u+=f[0].length,u==i.length)break;let d=i[u++];if(u==i.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);a=i.slice(u)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+i);let h=new Fm(n,o,l>0?s.slice(0,l):null);t[c]=h.sort(t[c])}}return MR.add(t)}const MR=new De({combine(e,t){let r,n,i;for(;e||t;){if(!e||t&&e.depth>=t.depth?(i=t,t=t.next):(i=e,e=e.next),r&&r.mode==i.mode&&!i.context&&!r.context)continue;let s=new Fm(i.tags,i.mode,i.context);r?r.next=s:n=s,r=s}return n}});class Fm{constructor(t,r,n,i){this.tags=t,this.mode=r,this.context=n,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}Fm.empty=new Fm([],2,null);function AR(e,t){let r=Object.create(null);for(let s of e)if(!Array.isArray(s.tag))r[s.tag.id]=s.class;else for(let o of s.tag)r[o.id]=s.class;let{scope:n,all:i=null}=t||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let c=r[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:n}}function Prt(e,t){let r=null;for(let n of e){let i=n.style(t);i&&(r=r?r+" "+i:i)}return r}function Nrt(e,t,r,n=0,i=e.length){let s=new Frt(n,Array.isArray(t)?t:[t],r);s.highlightRange(e.cursor(),n,i,"",s.highlighters),s.flush(i)}class Frt{constructor(t,r,n){this.at=t,this.highlighters=r,this.span=n,this.class=""}startSpan(t,r){r!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=r)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,r,n,i,s){let{type:o,from:a,to:l}=t;if(a>=n||l<=r)return;o.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(o)));let c=i,h=$rt(t)||Fm.empty,u=Prt(s,h.tags);if(u&&(c&&(c+=" "),c+=u,h.mode==1&&(i+=(i?" ":"")+u)),this.startSpan(Math.max(r,a),c),h.opaque)return;let f=t.tree&&t.tree.prop(De.mounted);if(f&&f.overlay){let d=t.node.enter(f.overlay[0].from+a,1),p=this.highlighters.filter(g=>!g.scope||g.scope(f.tree.type)),m=t.firstChild();for(let g=0,y=a;;g++){let b=g<f.overlay.length?f.overlay[g]:null,x=b?b.from+a:l,T=Math.max(r,y),S=Math.min(n,x);if(T<S&&m)for(;t.from<S&&(this.highlightRange(t,T,S,i,s),this.startSpan(Math.min(S,t.to),c),!(t.to>=x||!t.nextSibling())););if(!b||x>n)break;y=b.to+a,y>r&&(this.highlightRange(d.cursor(),Math.max(r,b.from+a),Math.min(n,y),"",p),this.startSpan(Math.min(n,y),c))}m&&t.parent()}else if(t.firstChild()){f&&(i="");do if(!(t.to<=r)){if(t.from>=n)break;this.highlightRange(t,r,n,i,s),this.startSpan(Math.min(n,t.to),c)}while(t.nextSibling());t.parent()}}}function $rt(e){let t=e.type.prop(MR);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}const At=ps.define,gy=At(),Ll=At(),MM=At(Ll),AM=At(Ll),Ol=At(),yy=At(Ol),Lw=At(Ol),So=At(),Nc=At(So),vo=At(),wo=At(),bk=At(),C0=At(bk),by=At(),it={comment:gy,lineComment:At(gy),blockComment:At(gy),docComment:At(gy),name:Ll,variableName:At(Ll),typeName:MM,tagName:At(MM),propertyName:AM,attributeName:At(AM),className:At(Ll),labelName:At(Ll),namespace:At(Ll),macroName:At(Ll),literal:Ol,string:yy,docString:At(yy),character:At(yy),attributeValue:At(yy),number:Lw,integer:At(Lw),float:At(Lw),bool:At(Ol),regexp:At(Ol),escape:At(Ol),color:At(Ol),url:At(Ol),keyword:vo,self:At(vo),null:At(vo),atom:At(vo),unit:At(vo),modifier:At(vo),operatorKeyword:At(vo),controlKeyword:At(vo),definitionKeyword:At(vo),moduleKeyword:At(vo),operator:wo,derefOperator:At(wo),arithmeticOperator:At(wo),logicOperator:At(wo),bitwiseOperator:At(wo),compareOperator:At(wo),updateOperator:At(wo),definitionOperator:At(wo),typeOperator:At(wo),controlOperator:At(wo),punctuation:bk,separator:At(bk),bracket:C0,angleBracket:At(C0),squareBracket:At(C0),paren:At(C0),brace:At(C0),content:So,heading:Nc,heading1:At(Nc),heading2:At(Nc),heading3:At(Nc),heading4:At(Nc),heading5:At(Nc),heading6:At(Nc),contentSeparator:At(So),list:At(So),quote:At(So),emphasis:At(So),strong:At(So),link:At(So),monospace:At(So),strikethrough:At(So),inserted:At(),deleted:At(),changed:At(),invalid:At(),meta:by,documentMeta:At(by),annotation:At(by),processingInstruction:At(by),definition:ps.defineModifier("definition"),constant:ps.defineModifier("constant"),function:ps.defineModifier("function"),standard:ps.defineModifier("standard"),local:ps.defineModifier("local"),special:ps.defineModifier("special")};for(let e in it){let t=it[e];t instanceof ps&&(t.name=e)}AR([{tag:it.link,class:"tok-link"},{tag:it.heading,class:"tok-heading"},{tag:it.emphasis,class:"tok-emphasis"},{tag:it.strong,class:"tok-strong"},{tag:it.keyword,class:"tok-keyword"},{tag:it.atom,class:"tok-atom"},{tag:it.bool,class:"tok-bool"},{tag:it.url,class:"tok-url"},{tag:it.labelName,class:"tok-labelName"},{tag:it.inserted,class:"tok-inserted"},{tag:it.deleted,class:"tok-deleted"},{tag:it.literal,class:"tok-literal"},{tag:it.string,class:"tok-string"},{tag:it.number,class:"tok-number"},{tag:[it.regexp,it.escape,it.special(it.string)],class:"tok-string2"},{tag:it.variableName,class:"tok-variableName"},{tag:it.local(it.variableName),class:"tok-variableName tok-local"},{tag:it.definition(it.variableName),class:"tok-variableName tok-definition"},{tag:it.special(it.variableName),class:"tok-variableName2"},{tag:it.definition(it.propertyName),class:"tok-propertyName tok-definition"},{tag:it.typeName,class:"tok-typeName"},{tag:it.namespace,class:"tok-namespace"},{tag:it.className,class:"tok-className"},{tag:it.macroName,class:"tok-macroName"},{tag:it.propertyName,class:"tok-propertyName"},{tag:it.operator,class:"tok-operator"},{tag:it.comment,class:"tok-comment"},{tag:it.meta,class:"tok-meta"},{tag:it.invalid,class:"tok-invalid"},{tag:it.punctuation,class:"tok-punctuation"}]);var Ow;const ch=new De;function ER(e){return Nt.define({combine:e?t=>t.concat(e):void 0})}const zrt=new De;class bs{constructor(t,r,n=[],i=""){this.data=t,this.name=i,Sr.prototype.hasOwnProperty("tree")||Object.defineProperty(Sr.prototype,"tree",{get(){return kn(this)}}),this.parser=r,this.extension=[ac.of(this),Sr.languageData.of((s,o,a)=>{let l=EM(s,o,a),c=l.type.prop(ch);if(!c)return[];let h=s.facet(c),u=l.type.prop(zrt);if(u){let f=l.resolve(o-l.from,a);for(let d of u)if(d.test(f,s)){let p=s.facet(d.facet);return d.type=="replace"?p:p.concat(h)}}return h})].concat(n)}isActiveAt(t,r,n=-1){return EM(t,r,n).type.prop(ch)==this.data}findRegions(t){let r=t.facet(ac);if((r==null?void 0:r.data)==this.data)return[{from:0,to:t.doc.length}];if(!r||!r.allowsNesting)return[];let n=[],i=(s,o)=>{if(s.prop(ch)==this.data){n.push({from:o,to:o+s.length});return}let a=s.prop(De.mounted);if(a){if(a.tree.prop(ch)==this.data){if(a.overlay)for(let l of a.overlay)n.push({from:l.from+o,to:l.to+o});else n.push({from:o,to:o+s.length});return}else if(a.overlay){let l=n.length;if(i(a.tree,a.overlay[0].from+o),n.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof dr&&i(c,s.positions[l]+o)}};return i(kn(t),0),n}get allowsNesting(){return!0}}bs.setState=ke.define();function EM(e,t,r){let n=e.facet(ac),i=kn(e).topNode;if(!n||n.allowsNesting)for(let s=i;s;s=s.enter(t,r,Lr.ExcludeBuffers))s.type.isTop&&(i=s);return i}class xk extends bs{constructor(t,r,n){super(t,r,[],n),this.parser=r}static define(t){let r=ER(t.languageData);return new xk(r,t.parser.configure({props:[ch.add(n=>n.isTop?r:void 0)]}),t.name)}configure(t,r){return new xk(this.data,this.parser.configure(t),r||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function kn(e){let t=e.field(bs.state,!1);return t?t.tree:dr.empty}class Hrt{constructor(t){this.doc=t,this.cursorPos=0,this.string="",this.cursor=t.iter()}get length(){return this.doc.length}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,r){let n=this.cursorPos-this.string.length;return t<n||r>=this.cursorPos?this.doc.sliceString(t,r):this.string.slice(t-n,r-n)}}let S0=null,vk=class wk{constructor(t,r,n=[],i,s,o,a,l){this.parser=t,this.state=r,this.fragments=n,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(t,r,n){return new wk(t,r,[],dr.empty,0,n,[],null)}startParse(){return this.parser.startParse(new Hrt(this.state.doc),this.fragments)}work(t,r){return r!=null&&r>=this.state.doc.length&&(r=void 0),this.tree!=dr.empty&&this.isDone(r??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof t=="number"){let i=Date.now()+t;t=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),r!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>r)&&r<this.state.doc.length&&this.parse.stopAt(r);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Wa.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(r??this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,r;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(r=this.parse.advance()););}),this.treeLen=t,this.tree=r,this.fragments=this.withoutTempSkipped(Wa.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let r=S0;S0=this;try{return t()}finally{S0=r}}withoutTempSkipped(t){for(let r;r=this.tempSkipped.pop();)t=LM(t,r.from,r.to);return t}changes(t,r){let{fragments:n,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!t.empty){let l=[];if(t.iterChangedRanges((c,h,u,f)=>l.push({fromA:c,toA:h,fromB:u,toB:f})),n=Wa.applyChanges(n,l),i=dr.empty,s=0,o={from:t.mapPos(o.from,-1),to:t.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let h=t.mapPos(c.from,1),u=t.mapPos(c.to,-1);h<u&&a.push({from:h,to:u})}}}return new wk(this.parser,r,n,i,s,o,a,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let r=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:i,to:s}=this.skipped[n];i<t.to&&s>t.from&&(this.fragments=LM(this.fragments,i,s),this.skipped.splice(n--,1))}return this.skipped.length>=r?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,r){this.skipped.push({from:t,to:r})}static getSkippingParser(t){return new class extends YI{createParse(r,n,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=S0;if(l){for(let c of i)l.tempSkipped.push(c);t&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,t]):t)}return this.parsedPos=o,new dr(ns.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let r=this.fragments;return this.treeLen>=t&&r.length&&r[0].from==0&&r[0].to>=t}static get(){return S0}};function LM(e,t,r){return Wa.applyChanges(e,[{fromA:t,toA:r,fromB:t,toB:r}])}class dd{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let r=this.context.changes(t.changes,t.state),n=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),r.viewport.to);return r.work(20,n)||r.takeTree(),new dd(r)}static init(t){let r=Math.min(3e3,t.doc.length),n=vk.create(t.facet(ac).parser,t,{from:0,to:r});return n.work(20,r)||n.takeTree(),new dd(n)}}bs.state=hn.define({create:dd.init,update(e,t){for(let r of t.effects)if(r.is(bs.setState))return r.value;return t.startState.facet(ac)!=t.state.facet(ac)?dd.init(t.state):e.apply(t)}});let LR=e=>{let t=setTimeout(()=>e(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(LR=e=>{let t=-1,r=setTimeout(()=>{t=requestIdleCallback(e,{timeout:400})},100);return()=>t<0?clearTimeout(r):cancelIdleCallback(t)});const Dw=typeof navigator<"u"&&(!((Ow=navigator.scheduling)===null||Ow===void 0)&&Ow.isInputPending)?()=>navigator.scheduling.isInputPending():null,qrt=Ur.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let r=this.view.state.field(bs.state).context;(r.updateViewport(t.view.viewport)||this.view.viewport.to>r.treeLen)&&this.scheduleWork(),(t.docChanged||t.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(r)}scheduleWork(){if(this.working)return;let{state:t}=this.view,r=t.field(bs.state);(r.tree!=r.context.tree||!r.context.isDone(t.doc.length))&&(this.working=LR(this.work))}work(t){this.working=null;let r=Date.now();if(this.chunkEnd<r&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=r+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,s=n.field(bs.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,t&&!Dw?Math.max(25,t.timeRemaining()-5):1e9),a=s.context.treeLen<i&&n.doc.length>i+1e3,l=s.context.work(()=>Dw&&Dw()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-r,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:bs.setState.of(new dd(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then(()=>this.scheduleWork()).catch(r=>Mi(this.view.state,r)).then(()=>this.workScheduled--),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ac=Nt.define({combine(e){return e.length?e[0]:null},enables:e=>[bs.state,qrt,$t.contentAttributes.compute([e],t=>{let r=t.facet(e);return r&&r.name?{"data-language":r.name}:{}})]});class Vrt{constructor(t,r=[]){this.language=t,this.support=r,this.extension=[t,r]}}class Q{constructor(t,r,n,i,s,o=void 0){this.name=t,this.alias=r,this.extensions=n,this.filename=i,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(t=>this.support=t,t=>{throw this.loading=null,t}))}static of(t){let{load:r,support:n}=t;if(!r){if(!n)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");r=()=>Promise.resolve(n)}return new Q(t.name,(t.alias||[]).concat(t.name).map(i=>i.toLowerCase()),t.extensions||[],t.filename,r,n)}static matchFilename(t,r){for(let i of t)if(i.filename&&i.filename.test(r))return i;let n=/\.([^.]+)$/.exec(r);if(n){for(let i of t)if(i.extensions.indexOf(n[1])>-1)return i}return null}static matchLanguageName(t,r,n=!0){r=r.toLowerCase();for(let i of t)if(i.alias.some(s=>s==r))return i;if(n)for(let i of t)for(let s of i.alias){let o=r.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(r[o-1])&&!/\w/.test(r[o+s.length])))return i}return null}}const Wrt=Nt.define(),_v=Nt.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some(r=>r!=t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function Qh(e){let t=e.facet(_v);return t.charCodeAt(0)==9?e.tabSize*t.length:t.length}function $m(e,t){let r="",n=e.tabSize,i=e.facet(_v)[0];if(i=="	"){for(;t>=n;)r+="	",t-=n;i=" "}for(let s=0;s<t;s++)r+=i;return r}function w7(e,t){e instanceof Sr&&(e=new Mv(e));for(let n of e.state.facet(Wrt)){let i=n(e,t);if(i!==void 0)return i}let r=kn(e.state);return r.length>=t?jrt(e,r,t):null}class Mv{constructor(t,r={}){this.state=t,this.options=r,this.unit=Qh(t)}lineAt(t,r=1){let n=this.state.doc.lineAt(t),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=n.from&&i<=n.to?s&&i==t?{text:"",from:t}:(r<0?i<t:i<=t)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n}textAfterPos(t,r=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:n,from:i}=this.lineAt(t,r);return n.slice(t-i,Math.min(n.length,t+100-i))}column(t,r=1){let{text:n,from:i}=this.lineAt(t,r),s=this.countColumn(n,t-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(n,n.search(/\S|$/))),s}countColumn(t,r=t.length){return $d(t,this.state.tabSize,r)}lineIndent(t,r=1){let{text:n,from:i}=this.lineAt(t,r),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const OR=new De;function jrt(e,t,r){let n=t.resolveStack(r),i=t.resolveInner(r,-1).resolve(r,0).enterUnfinishedNodesBefore(r);if(i!=n.node){let s=[];for(let o=i;o&&!(o.from<n.node.from||o.to>n.node.to||o.from==n.node.from&&o.type==n.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)n={node:s[o],next:n}}return DR(n,e,r)}function DR(e,t,r){for(let n=e;n;n=n.next){let i=Grt(n.node);if(i)return i(k7.create(t,r,n))}return 0}function Urt(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}function Grt(e){let t=e.type.prop(OR);if(t)return t;let r=e.firstChild,n;if(r&&(n=r.type.prop(De.closedBy))){let i=e.lastChild,s=i&&n.indexOf(i.name)>-1;return o=>IR(o,!0,1,void 0,s&&!Urt(o)?i.from:void 0)}return e.parent==null?Krt:null}function Krt(){return 0}class k7 extends Mv{constructor(t,r,n){super(t.state,t.options),this.base=t,this.pos=r,this.context=n}get node(){return this.context.node}static create(t,r,n){return new k7(t,r,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(t){let r=this.state.doc.lineAt(t.from);for(;;){let n=t.resolve(r.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(Yrt(n,t))break;r=this.state.doc.lineAt(n.from)}return this.lineIndent(r.from)}continue(){return DR(this.context.next,this.base,this.pos)}}function Yrt(e,t){for(let r=t;r;r=r.parent)if(e==r)return!0;return!1}function Xrt(e){let t=e.node,r=t.childAfter(t.from),n=t.lastChild;if(!r)return null;let i=e.options.simulateBreak,s=e.state.doc.lineAt(r.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=r.to;;){let l=t.childAfter(a);if(!l||l==n)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(s.text.slice(r.to-s.from))[0].length;return{from:r.from,to:r.to+c}}a=l.to}}function HEt({closing:e,align:t=!0,units:r=1}){return n=>IR(n,t,r,e)}function IR(e,t,r,n,i){let s=e.textAfter,o=s.match(/^\s*/)[0].length,a=n&&s.slice(o,o+n.length)==n||i==e.pos+o,l=t?Xrt(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*r)}const qEt=e=>e.baseIndent;function VEt({except:e,units:t=1}={}){return r=>{let n=e&&e.test(r.textAfter);return r.baseIndent+(n?0:t*r.unit)}}const Jrt=200;function Zrt(){return Sr.transactionFilter.of(e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let r=e.newDoc,{head:n}=e.newSelection.main,i=r.lineAt(n);if(n>i.from+Jrt)return e;let s=r.sliceString(i.from,n);if(!t.some(c=>c.test(s)))return e;let{state:o}=e,a=-1,l=[];for(let{head:c}of o.selection.ranges){let h=o.doc.lineAt(c);if(h.from==a)continue;a=h.from;let u=w7(o,h.from);if(u==null)continue;let f=/^\s*/.exec(h.text)[0],d=$m(o,u);f!=d&&l.push({from:h.from,to:h.from+f.length,insert:d})}return l.length?[e,{changes:l,sequential:!0}]:e})}const Qrt=Nt.define(),tnt=new De;function WEt(e){let t=e.firstChild,r=e.lastChild;return t&&t.to<r.from?{from:t.to,to:r.type.isError?e.to:r.from}:null}function ent(e,t,r){let n=kn(e);if(n.length<r)return null;let i=n.resolveStack(r,1),s=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=r||a.from>r)continue;if(s&&a.from<t)break;let l=a.type.prop(tnt);if(l&&(a.to<n.length-50||n.length==e.doc.length||!rnt(a))){let c=l(a,e);c&&c.from<=r&&c.from>=t&&c.to>r&&(s=c)}}return s}function rnt(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function qb(e,t,r){for(let n of e.facet(Qrt)){let i=n(e,t,r);if(i)return i}return ent(e,t,r)}function BR(e,t){let r=t.mapPos(e.from,1),n=t.mapPos(e.to,-1);return r>=n?void 0:{from:r,to:n}}const Av=ke.define({map:BR}),i1=ke.define({map:BR});function RR(e){let t=[];for(let{head:r}of e.state.selection.ranges)t.some(n=>n.from<=r&&n.to>=r)||t.push(e.lineBlockAt(r));return t}const tu=hn.define({create(){return le.none},update(e,t){t.isUserEvent("delete")&&t.changes.iterChangedRanges((r,n)=>e=OM(e,r,n)),e=e.map(t.changes);for(let r of t.effects)if(r.is(Av)&&!nnt(e,r.value.from,r.value.to)){let{preparePlaceholder:n}=t.state.facet(FR),i=n?le.replace({widget:new hnt(n(t.state,r.value))}):DM;e=e.update({add:[i.range(r.value.from,r.value.to)]})}else r.is(i1)&&(e=e.update({filter:(n,i)=>r.value.from!=n||r.value.to!=i,filterFrom:r.value.from,filterTo:r.value.to}));return t.selection&&(e=OM(e,t.selection.main.head)),e},provide:e=>$t.decorations.from(e),toJSON(e,t){let r=[];return e.between(0,t.doc.length,(n,i)=>{r.push(n,i)}),r},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let r=0;r<e.length;){let n=e[r++],i=e[r++];if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");t.push(DM.range(n,i))}return le.set(t,!0)}});function OM(e,t,r=t){let n=!1;return e.between(t,r,(i,s)=>{i<r&&s>t&&(n=!0)}),n?e.update({filterFrom:t,filterTo:r,filter:(i,s)=>i>=r||s<=t}):e}function Vb(e,t,r){var n;let i=null;return(n=e.field(tu,!1))===null||n===void 0||n.between(t,r,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function nnt(e,t,r){let n=!1;return e.between(t,t,(i,s)=>{i==t&&s==r&&(n=!0)}),n}function PR(e,t){return e.field(tu,!1)?t:t.concat(ke.appendConfig.of($R()))}const int=e=>{for(let t of RR(e)){let r=qb(e.state,t.from,t.to);if(r)return e.dispatch({effects:PR(e.state,[Av.of(r),NR(e,r)])}),!0}return!1},snt=e=>{if(!e.state.field(tu,!1))return!1;let t=[];for(let r of RR(e)){let n=Vb(e.state,r.from,r.to);n&&t.push(i1.of(n),NR(e,n,!1))}return t.length&&e.dispatch({effects:t}),t.length>0};function NR(e,t,r=!0){let n=e.state.doc.lineAt(t.from).number,i=e.state.doc.lineAt(t.to).number;return $t.announce.of(`${e.state.phrase(r?"Folded lines":"Unfolded lines")} ${n} ${e.state.phrase("to")} ${i}.`)}const ont=e=>{let{state:t}=e,r=[];for(let n=0;n<t.doc.length;){let i=e.lineBlockAt(n),s=qb(t,i.from,i.to);s&&r.push(Av.of(s)),n=(s?e.lineBlockAt(s.to):i).to+1}return r.length&&e.dispatch({effects:PR(e.state,r)}),!!r.length},ant=e=>{let t=e.state.field(tu,!1);if(!t||!t.size)return!1;let r=[];return t.between(0,e.state.doc.length,(n,i)=>{r.push(i1.of({from:n,to:i}))}),e.dispatch({effects:r}),!0},lnt=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:int},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:snt},{key:"Ctrl-Alt-[",run:ont},{key:"Ctrl-Alt-]",run:ant}],cnt={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},FR=Nt.define({combine(e){return ra(e,cnt)}});function $R(e){return[tu,dnt]}function zR(e,t){let{state:r}=e,n=r.facet(FR),i=o=>{let a=e.lineBlockAt(e.posAtDOM(o.target)),l=Vb(e.state,a.from,a.to);l&&e.dispatch({effects:i1.of(l)}),o.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(e,i,t);let s=document.createElement("span");return s.textContent=n.placeholderText,s.setAttribute("aria-label",r.phrase("folded code")),s.title=r.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const DM=le.replace({widget:new class extends dl{toDOM(e){return zR(e,null)}}});class hnt extends dl{constructor(t){super(),this.value=t}eq(t){return this.value==t.value}toDOM(t){return zR(t,this.value)}}const unt={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Iw extends el{constructor(t,r){super(),this.config=t,this.open=r}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let r=document.createElement("span");return r.textContent=this.open?this.config.openText:this.config.closedText,r.title=t.state.phrase(this.open?"Fold line":"Unfold line"),r}}function fnt(e={}){let t={...unt,...e},r=new Iw(t,!0),n=new Iw(t,!1),i=Ur.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(ac)!=o.state.facet(ac)||o.startState.field(tu,!1)!=o.state.field(tu,!1)||kn(o.startState)!=kn(o.state)||t.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new Za;for(let l of o.viewportLineBlocks){let c=Vb(o.state,l.from,l.to)?n:qb(o.state,l.from,l.to)?r:null;c&&a.add(l.from,l.from,c)}return a.finish()}}),{domEventHandlers:s}=t;return[i,vrt({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||ze.empty},initialSpacer(){return new Iw(t,!1)},domEventHandlers:{...s,click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let c=Vb(o.state,a.from,a.to);if(c)return o.dispatch({effects:i1.of(c)}),!0;let h=qb(o.state,a.from,a.to);return h?(o.dispatch({effects:Av.of(h)}),!0):!1}}}),$R()]}const dnt=$t.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class s1{constructor(t,r){this.specs=t;let n;function i(a){let l=sc.newName();return(n||(n=Object.create(null)))["."+l]=a,l}const s=typeof r.all=="string"?r.all:r.all?i(r.all):void 0,o=r.scope;this.scope=o instanceof bs?a=>a.prop(ch)==o.data:o?a=>a==o:void 0,this.style=AR(t.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=n?new sc(n):null,this.themeType=r.themeType}static define(t,r){return new s1(t,r||{})}}const kk=Nt.define(),HR=Nt.define({combine(e){return e.length?[e[0]]:null}});function Bw(e){let t=e.facet(kk);return t.length?t:e.facet(HR)}function qR(e,t){let r=[mnt],n;return e instanceof s1&&(e.module&&r.push($t.styleModule.of(e.module)),n=e.themeType),t!=null&&t.fallback?r.push(HR.of(e)):n?r.push(kk.computeN([$t.darkTheme],i=>i.facet($t.darkTheme)==(n=="dark")?[e]:[])):r.push(kk.of(e)),r}class pnt{constructor(t){this.markCache=Object.create(null),this.tree=kn(t.state),this.decorations=this.buildDeco(t,Bw(t.state)),this.decoratedTo=t.viewport.to}update(t){let r=kn(t.state),n=Bw(t.state),i=n!=Bw(t.startState),{viewport:s}=t.view,o=t.changes.mapPos(this.decoratedTo,1);r.length<s.to&&!i&&r.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(t.changes),this.decoratedTo=o):(r!=this.tree||t.viewportChanged||i)&&(this.tree=r,this.decorations=this.buildDeco(t.view,n),this.decoratedTo=s.to)}buildDeco(t,r){if(!r||!this.tree.length)return le.none;let n=new Za;for(let{from:i,to:s}of t.visibleRanges)Nrt(this.tree,r,(o,a,l)=>{n.add(o,a,this.markCache[l]||(this.markCache[l]=le.mark({class:l})))},i,s);return n.finish()}}const mnt=Cc.high(Ur.fromClass(pnt,{decorations:e=>e.decorations})),gnt=s1.define([{tag:it.meta,color:"#404740"},{tag:it.link,textDecoration:"underline"},{tag:it.heading,textDecoration:"underline",fontWeight:"bold"},{tag:it.emphasis,fontStyle:"italic"},{tag:it.strong,fontWeight:"bold"},{tag:it.strikethrough,textDecoration:"line-through"},{tag:it.keyword,color:"#708"},{tag:[it.atom,it.bool,it.url,it.contentSeparator,it.labelName],color:"#219"},{tag:[it.literal,it.inserted],color:"#164"},{tag:[it.string,it.deleted],color:"#a11"},{tag:[it.regexp,it.escape,it.special(it.string)],color:"#e40"},{tag:it.definition(it.variableName),color:"#00f"},{tag:it.local(it.variableName),color:"#30a"},{tag:[it.typeName,it.namespace],color:"#085"},{tag:it.className,color:"#167"},{tag:[it.special(it.variableName),it.macroName],color:"#256"},{tag:it.definition(it.propertyName),color:"#00c"},{tag:it.comment,color:"#940"},{tag:it.invalid,color:"#f00"}]),ynt=$t.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),VR=1e4,WR="()[]{}",jR=Nt.define({combine(e){return ra(e,{afterCursor:!0,brackets:WR,maxScanDistance:VR,renderMatch:vnt})}}),bnt=le.mark({class:"cm-matchingBracket"}),xnt=le.mark({class:"cm-nonmatchingBracket"});function vnt(e){let t=[],r=e.matched?bnt:xnt;return t.push(r.range(e.start.from,e.start.to)),e.end&&t.push(r.range(e.end.from,e.end.to)),t}const wnt=hn.define({create(){return le.none},update(e,t){if(!t.docChanged&&!t.selection)return e;let r=[],n=t.state.facet(jR);for(let i of t.state.selection.ranges){if(!i.empty)continue;let s=$o(t.state,i.head,-1,n)||i.head>0&&$o(t.state,i.head-1,1,n)||n.afterCursor&&($o(t.state,i.head,1,n)||i.head<t.state.doc.length&&$o(t.state,i.head+1,-1,n));s&&(r=r.concat(n.renderMatch(s,t.state)))}return le.set(r,!0)},provide:e=>$t.decorations.from(e)}),knt=[wnt,ynt];function Cnt(e={}){return[jR.of(e),knt]}const Snt=new De;function Ck(e,t,r){let n=e.prop(t<0?De.openedBy:De.closedBy);if(n)return n;if(e.name.length==1){let i=r.indexOf(e.name);if(i>-1&&i%2==(t<0?1:0))return[r[i+t]]}return null}function Sk(e){let t=e.type.prop(Snt);return t?t(e.node):e}function $o(e,t,r,n={}){let i=n.maxScanDistance||VR,s=n.brackets||WR,o=kn(e),a=o.resolveInner(t,r);for(let l=a;l;l=l.parent){let c=Ck(l.type,r,s);if(c&&l.from<l.to){let h=Sk(l);if(h&&(r>0?t>=h.from&&t<h.to:t>h.from&&t<=h.to))return Tnt(e,t,r,l,h,c,s)}}return _nt(e,t,r,o,a.type,i,s)}function Tnt(e,t,r,n,i,s,o){let a=n.parent,l={from:i.from,to:i.to},c=0,h=a==null?void 0:a.cursor();if(h&&(r<0?h.childBefore(n.from):h.childAfter(n.to)))do if(r<0?h.to<=n.from:h.from>=n.to){if(c==0&&s.indexOf(h.type.name)>-1&&h.from<h.to){let u=Sk(h);return{start:l,end:u?{from:u.from,to:u.to}:void 0,matched:!0}}else if(Ck(h.type,r,o))c++;else if(Ck(h.type,-r,o)){if(c==0){let u=Sk(h);return{start:l,end:u&&u.from<u.to?{from:u.from,to:u.to}:void 0,matched:!1}}c--}}while(r<0?h.prevSibling():h.nextSibling());return{start:l,matched:!1}}function _nt(e,t,r,n,i,s,o){let a=r<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=o.indexOf(a);if(l<0||l%2==0!=r>0)return null;let c={from:r<0?t-1:t,to:r>0?t+1:t},h=e.doc.iterRange(t,r>0?e.doc.length:0),u=0;for(let f=0;!h.next().done&&f<=s;){let d=h.value;r<0&&(f+=d.length);let p=t+f*r;for(let m=r>0?0:d.length-1,g=r>0?d.length:-1;m!=g;m+=r){let y=o.indexOf(d[m]);if(!(y<0||n.resolveInner(p+m,1).type!=i))if(y%2==0==r>0)u++;else{if(u==1)return{start:c,end:{from:p+m,to:p+m+1},matched:y>>1==l>>1};u--}}r>0&&(f+=d.length)}return h.done?{start:c,matched:!1}:null}function IM(e,t,r,n=0,i=0){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));let s=i;for(let o=n;o<t;o++)e.charCodeAt(o)==9?s+=r-s%r:s++;return s}class UR{constructor(t,r,n,i){this.string=t,this.tabSize=r,this.indentUnit=n,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(t){let r=this.string.charAt(this.pos),n;if(typeof t=="string"?n=r==t:n=r&&(t instanceof RegExp?t.test(r):t(r)),n)return++this.pos,r}eatWhile(t){let r=this.pos;for(;this.eat(t););return this.pos>r}eatSpace(){let t=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t}skipToEnd(){this.pos=this.string.length}skipTo(t){let r=this.string.indexOf(t,this.pos);if(r>-1)return this.pos=r,!0}backUp(t){this.pos-=t}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=IM(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var t;return(t=this.overrideIndent)!==null&&t!==void 0?t:IM(this.string,null,this.tabSize)}match(t,r,n){if(typeof t=="string"){let i=o=>n?o.toLowerCase():o,s=this.string.substr(this.pos,t.length);return i(s)==i(t)?(r!==!1&&(this.pos+=t.length),!0):null}else{let i=this.string.slice(this.pos).match(t);return i&&i.index>0?null:(i&&r!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function Mnt(e){return{name:e.name||"",token:e.token,blankLine:e.blankLine||(()=>{}),startState:e.startState||(()=>!0),copyState:e.copyState||Ant,indent:e.indent||(()=>null),languageData:e.languageData||{},tokenTable:e.tokenTable||T7,mergeTokens:e.mergeTokens!==!1}}function Ant(e){if(typeof e!="object")return e;let t={};for(let r in e){let n=e[r];t[r]=n instanceof Array?n.slice():n}return t}const BM=new WeakMap;class C7 extends bs{constructor(t){let r=ER(t.languageData),n=Mnt(t),i,s=new class extends YI{createParse(o,a,l){return new Lnt(i,o,a,l)}};super(r,s,[],t.name),this.topNode=Int(r,this),i=this,this.streamParser=n,this.stateAfter=new De({perNode:!0}),this.tokenTable=t.tokenTable?new XR(n.tokenTable):Dnt}static define(t){return new C7(t)}getIndent(t){let r,{overrideIndentation:n}=t.options;n&&(r=BM.get(t.state),r!=null&&r<t.pos-1e4&&(r=void 0));let i=S7(this,t.node.tree,t.node.from,t.node.from,r??t.pos),s,o;if(i?(o=i.state,s=i.pos+1):(o=this.streamParser.startState(t.unit),s=t.node.from),t.pos-s>1e4)return null;for(;s<t.pos;){let l=t.state.doc.lineAt(s),c=Math.min(t.pos,l.to);if(l.length){let h=n?n(l.from):-1,u=new UR(l.text,t.state.tabSize,t.unit,h<0?void 0:h);for(;u.pos<c-l.from;)KR(this.streamParser.token,u,o)}else this.streamParser.blankLine(o,t.unit);if(c==t.pos)break;s=l.to+1}let a=t.lineAt(t.pos);return n&&r==null&&BM.set(t.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],t)}get allowsNesting(){return!1}}function S7(e,t,r,n,i){let s=r>=n&&r+t.length<=i&&t.prop(e.stateAfter);if(s)return{state:e.streamParser.copyState(s),pos:r+t.length};for(let o=t.children.length-1;o>=0;o--){let a=t.children[o],l=r+t.positions[o],c=a instanceof dr&&l<i&&S7(e,a,l,n,i);if(c)return c}return null}function GR(e,t,r,n,i){if(i&&r<=0&&n>=t.length)return t;!i&&r==0&&t.type==e.topNode&&(i=!0);for(let s=t.children.length-1;s>=0;s--){let o=t.positions[s],a=t.children[s],l;if(o<n&&a instanceof dr){if(!(l=GR(e,a,r-o,n-o,i)))break;return i?new dr(t.type,t.children.slice(0,s).concat(l),t.positions.slice(0,s+1),o+l.length):l}}return null}function Ent(e,t,r,n,i){for(let s of t){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=r&&a>r&&S7(e,s.tree,0-s.offset,r,a),c;if(l&&l.pos<=n&&(c=GR(e,s.tree,r+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:c}}return{state:e.streamParser.startState(i?Qh(i):4),tree:dr.empty}}class Lnt{constructor(t,r,n,i){this.lang=t,this.input=r,this.fragments=n,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=vk.get(),o=i[0].from,{state:a,tree:l}=Ent(t,n,o,this.to,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(c=>c.from<=s.viewport.from&&c.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Qh(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let t=vk.get(),r=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),n=Math.min(r,this.chunkStart+512);for(t&&(n=Math.min(n,t.viewport.to));this.parsedPos<n;)this.parseLine(t);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=r?this.finish():t&&this.parsedPos>=t.viewport.to?(t.skipUntilInView(this.parsedPos,r),this.finish()):null}stopAt(t){this.stoppedAt=t}lineAfter(t){let r=this.input.chunk(t);if(this.input.lineChunks)r==`
`&&(r="");else{let n=r.indexOf(`
`);n>-1&&(r=r.slice(0,n))}return t+r.length<=this.to?r:r.slice(0,this.to-t)}nextLine(){let t=this.parsedPos,r=this.lineAfter(t),n=t+r.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=n||(r=r.slice(0,s-(n-r.length)),i++,i==this.ranges.length))break;let o=this.ranges[i].from,a=this.lineAfter(o);r+=a,n=o+a.length}return{line:r,end:n}}skipGapsTo(t,r,n){for(;;){let i=this.ranges[this.rangeIndex].to,s=t+r;if(n>0?i>s:i>=s)break;let o=this.ranges[++this.rangeIndex].from;r+=o-i}return r}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(t,r,n,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(r,i,1),r+=i;let a=this.chunk.length;i=this.skipGapsTo(n,i,-1),n+=i,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==t&&this.chunk[o+2]==r?this.chunk[o+2]=n:this.chunk.push(t,r,n,s),i}parseLine(t){let{line:r,end:n}=this.nextLine(),i=0,{streamParser:s}=this.lang,o=new UR(r,t?t.state.tabSize:4,t?Qh(t.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=KR(s.token,o,this.state);if(a&&(i=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,i)),o.start>1e4)break}this.parsedPos=n,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let t=dr.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Ont,topID:0,maxBufferLength:512,reused:this.chunkReused});t=new dr(t.type,t.children,t.positions,t.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(t),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new dr(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function KR(e,t,r){t.start=t.pos;for(let n=0;n<10;n++){let i=e(t,r);if(t.pos>t.start)return i}throw new Error("Stream parser failed to advance stream.")}const T7=Object.create(null),zm=[ns.none],Ont=new r7(zm),RM=[],PM=Object.create(null),YR=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])YR[e]=JR(T7,t);class XR{constructor(t){this.extra=t,this.table=Object.assign(Object.create(null),YR)}resolve(t){return t?this.table[t]||(this.table[t]=JR(this.extra,t)):0}}const Dnt=new XR(T7);function Rw(e,t){RM.indexOf(e)>-1||(RM.push(e),console.warn(t))}function JR(e,t){let r=[];for(let a of t.split(" ")){let l=[];for(let c of a.split(".")){let h=e[c]||it[c];h?typeof h=="function"?l.length?l=l.map(h):Rw(c,`Modifier ${c} used at start of tag`):l.length?Rw(c,`Tag ${c} used as modifier`):l=Array.isArray(h)?h:[h]:Rw(c,`Unknown highlighting tag ${c}`)}for(let c of l)r.push(c)}if(!r.length)return 0;let n=t.replace(/ /g,"_"),i=n+" "+r.map(a=>a.id),s=PM[i];if(s)return s.id;let o=PM[i]=ns.define({id:zm.length,name:n,props:[Rrt({[n]:r})]});return zm.push(o),o.id}function Int(e,t){let r=ns.define({id:zm.length,name:"Document",props:[ch.add(()=>e),OR.add(()=>n=>t.getIndent(n))],top:!0});return zm.push(r),r}br.RTL,br.LTR;function ft(e){return new Vrt(C7.define(e))}function vl(e){return X(()=>import("./index-BwesHr4O.js"),__vite__mapDeps([0,1,2])).then(t=>t.sql({dialect:t[e]}))}const Bnt=[Q.of({name:"C",extensions:["c","h","ino"],load(){return X(()=>import("./index-QcSfTM8v.js"),__vite__mapDeps([3,1,2])).then(e=>e.cpp())}}),Q.of({name:"C++",alias:["cpp"],extensions:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],load(){return X(()=>import("./index-QcSfTM8v.js"),__vite__mapDeps([3,1,2])).then(e=>e.cpp())}}),Q.of({name:"CQL",alias:["cassandra"],extensions:["cql"],load(){return vl("Cassandra")}}),Q.of({name:"CSS",extensions:["css"],load(){return X(()=>import("./index-B-gsjejv.js"),__vite__mapDeps([4,1,2])).then(e=>e.css())}}),Q.of({name:"Go",extensions:["go"],load(){return X(()=>import("./index-CrOGm4BG.js"),__vite__mapDeps([5,1,2])).then(e=>e.go())}}),Q.of({name:"HTML",alias:["xhtml"],extensions:["html","htm","handlebars","hbs"],load(){return X(()=>import("./index-CV_iIolA.js"),__vite__mapDeps([6,1,4,2,7])).then(e=>e.html())}}),Q.of({name:"Java",extensions:["java"],load(){return X(()=>import("./index-Cb1y2V-j.js"),__vite__mapDeps([8,1,2])).then(e=>e.java())}}),Q.of({name:"JavaScript",alias:["ecmascript","js","node"],extensions:["js","mjs","cjs"],load(){return X(()=>import("./index-DqPEs79x.js"),__vite__mapDeps([7,1,2])).then(e=>e.javascript())}}),Q.of({name:"Jinja",extensions:["j2","jinja","jinja2"],load(){return X(()=>import("./index-BKZD2ikC.js"),__vite__mapDeps([9,6,1,4,2,7])).then(e=>e.jinja())}}),Q.of({name:"JSON",alias:["json5"],extensions:["json","map"],load(){return X(()=>import("./index-DP82TZam.js"),__vite__mapDeps([10,1,2])).then(e=>e.json())}}),Q.of({name:"JSX",extensions:["jsx"],load(){return X(()=>import("./index-DqPEs79x.js"),__vite__mapDeps([7,1,2])).then(e=>e.javascript({jsx:!0}))}}),Q.of({name:"LESS",extensions:["less"],load(){return X(()=>import("./index-DQnQfd0u.js"),__vite__mapDeps([11,4,1,2])).then(e=>e.less())}}),Q.of({name:"Liquid",extensions:["liquid"],load(){return X(()=>import("./index-Cbfbx2ak.js"),__vite__mapDeps([12,6,1,4,2,7])).then(e=>e.liquid())}}),Q.of({name:"MariaDB SQL",load(){return vl("MariaSQL")}}),Q.of({name:"Markdown",extensions:["md","markdown","mkd"],load(){return X(()=>import("./index-DlOmBEmt.js"),__vite__mapDeps([13,6,1,4,2,7])).then(e=>e.markdown())}}),Q.of({name:"MS SQL",load(){return vl("MSSQL")}}),Q.of({name:"MySQL",load(){return vl("MySQL")}}),Q.of({name:"PHP",extensions:["php","php3","php4","php5","php7","phtml"],load(){return X(()=>import("./index-Df1pjS5C.js"),__vite__mapDeps([14,1,6,4,2,7])).then(e=>e.php())}}),Q.of({name:"PLSQL",extensions:["pls"],load(){return vl("PLSQL")}}),Q.of({name:"PostgreSQL",load(){return vl("PostgreSQL")}}),Q.of({name:"Python",extensions:["BUILD","bzl","py","pyw"],filename:/^(BUCK|BUILD)$/,load(){return X(()=>import("./index-BsAmYUPp.js"),__vite__mapDeps([15,1,2])).then(e=>e.python())}}),Q.of({name:"Rust",extensions:["rs"],load(){return X(()=>import("./index-BRGUa4BS.js"),__vite__mapDeps([16,1,2])).then(e=>e.rust())}}),Q.of({name:"Sass",extensions:["sass"],load(){return X(()=>import("./index-DjR-TzRU.js"),__vite__mapDeps([17,1,4,2])).then(e=>e.sass({indented:!0}))}}),Q.of({name:"SCSS",extensions:["scss"],load(){return X(()=>import("./index-DjR-TzRU.js"),__vite__mapDeps([17,1,4,2])).then(e=>e.sass())}}),Q.of({name:"SQL",extensions:["sql"],load(){return vl("StandardSQL")}}),Q.of({name:"SQLite",load(){return vl("SQLite")}}),Q.of({name:"TSX",extensions:["tsx"],load(){return X(()=>import("./index-DqPEs79x.js"),__vite__mapDeps([7,1,2])).then(e=>e.javascript({jsx:!0,typescript:!0}))}}),Q.of({name:"TypeScript",alias:["ts"],extensions:["ts","mts","cts"],load(){return X(()=>import("./index-DqPEs79x.js"),__vite__mapDeps([7,1,2])).then(e=>e.javascript({typescript:!0}))}}),Q.of({name:"WebAssembly",extensions:["wat","wast"],load(){return X(()=>import("./index-BlHEbwzV.js"),__vite__mapDeps([18,1,2])).then(e=>e.wast())}}),Q.of({name:"XML",alias:["rss","wsdl","xsd"],extensions:["xml","xsl","xsd","svg"],load(){return X(()=>import("./index-Bp93_Vzd.js"),__vite__mapDeps([19,1,2])).then(e=>e.xml())}}),Q.of({name:"YAML",alias:["yml"],extensions:["yaml","yml"],load(){return X(()=>import("./index-ioLf5GGK.js"),__vite__mapDeps([20,1,2])).then(e=>e.yaml())}}),Q.of({name:"APL",extensions:["dyalog","apl"],load(){return X(()=>import("./apl-B4CMkyY2.js"),[]).then(e=>ft(e.apl))}}),Q.of({name:"PGP",alias:["asciiarmor"],extensions:["asc","pgp","sig"],load(){return X(()=>import("./asciiarmor-Df11BRmG.js"),[]).then(e=>ft(e.asciiArmor))}}),Q.of({name:"ASN.1",extensions:["asn","asn1"],load(){return X(()=>import("./asn1-EdZsLKOL.js"),[]).then(e=>ft(e.asn1({})))}}),Q.of({name:"Asterisk",filename:/^extensions\.conf$/i,load(){return X(()=>import("./asterisk-B-8jnY81.js"),[]).then(e=>ft(e.asterisk))}}),Q.of({name:"Brainfuck",extensions:["b","bf"],load(){return X(()=>import("./brainfuck-C4LP7Hcl.js"),[]).then(e=>ft(e.brainfuck))}}),Q.of({name:"Cobol",extensions:["cob","cpy"],load(){return X(()=>import("./cobol-CWcv1MsR.js"),[]).then(e=>ft(e.cobol))}}),Q.of({name:"C#",alias:["csharp","cs"],extensions:["cs"],load(){return X(()=>import("./clike-B9uivgTg.js"),[]).then(e=>ft(e.csharp))}}),Q.of({name:"Clojure",extensions:["clj","cljc","cljx"],load(){return X(()=>import("./clojure-BMjYHr_A.js"),[]).then(e=>ft(e.clojure))}}),Q.of({name:"ClojureScript",extensions:["cljs"],load(){return X(()=>import("./clojure-BMjYHr_A.js"),[]).then(e=>ft(e.clojure))}}),Q.of({name:"Closure Stylesheets (GSS)",extensions:["gss"],load(){return X(()=>import("./css-BnMrqG3P.js"),[]).then(e=>ft(e.gss))}}),Q.of({name:"CMake",extensions:["cmake","cmake.in"],filename:/^CMakeLists\.txt$/,load(){return X(()=>import("./cmake-BQqOBYOt.js"),[]).then(e=>ft(e.cmake))}}),Q.of({name:"CoffeeScript",alias:["coffee","coffee-script"],extensions:["coffee"],load(){return X(()=>import("./coffeescript-S37ZYGWr.js"),[]).then(e=>ft(e.coffeeScript))}}),Q.of({name:"Common Lisp",alias:["lisp"],extensions:["cl","lisp","el"],load(){return X(()=>import("./commonlisp-DBKNyK5s.js"),[]).then(e=>ft(e.commonLisp))}}),Q.of({name:"Cypher",extensions:["cyp","cypher"],load(){return X(()=>import("./cypher-C_CwsFkJ.js"),[]).then(e=>ft(e.cypher))}}),Q.of({name:"Cython",extensions:["pyx","pxd","pxi"],load(){return X(()=>import("./python-BuPzkPfP.js"),[]).then(e=>ft(e.cython))}}),Q.of({name:"Crystal",extensions:["cr"],load(){return X(()=>import("./crystal-SjHAIU92.js"),[]).then(e=>ft(e.crystal))}}),Q.of({name:"D",extensions:["d"],load(){return X(()=>import("./d-pRatUO7H.js"),[]).then(e=>ft(e.d))}}),Q.of({name:"Dart",extensions:["dart"],load(){return X(()=>import("./clike-B9uivgTg.js"),[]).then(e=>ft(e.dart))}}),Q.of({name:"diff",extensions:["diff","patch"],load(){return X(()=>import("./diff-DbItnlRl.js"),[]).then(e=>ft(e.diff))}}),Q.of({name:"Dockerfile",filename:/^Dockerfile$/,load(){return X(()=>import("./dockerfile-BKs6k2Af.js"),__vite__mapDeps([21,22])).then(e=>ft(e.dockerFile))}}),Q.of({name:"DTD",extensions:["dtd"],load(){return X(()=>import("./dtd-DF_7sFjM.js"),[]).then(e=>ft(e.dtd))}}),Q.of({name:"Dylan",extensions:["dylan","dyl","intr"],load(){return X(()=>import("./dylan-DwRh75JA.js"),[]).then(e=>ft(e.dylan))}}),Q.of({name:"EBNF",load(){return X(()=>import("./ebnf-CDyGwa7X.js"),[]).then(e=>ft(e.ebnf))}}),Q.of({name:"ECL",extensions:["ecl"],load(){return X(()=>import("./ecl-Cabwm37j.js"),[]).then(e=>ft(e.ecl))}}),Q.of({name:"edn",extensions:["edn"],load(){return X(()=>import("./clojure-BMjYHr_A.js"),[]).then(e=>ft(e.clojure))}}),Q.of({name:"Eiffel",extensions:["e"],load(){return X(()=>import("./eiffel-CnydiIhH.js"),[]).then(e=>ft(e.eiffel))}}),Q.of({name:"Elm",extensions:["elm"],load(){return X(()=>import("./elm-vLlmbW-K.js"),[]).then(e=>ft(e.elm))}}),Q.of({name:"Erlang",extensions:["erl"],load(){return X(()=>import("./erlang-BNw1qcRV.js"),[]).then(e=>ft(e.erlang))}}),Q.of({name:"Esper",load(){return X(()=>import("./sql-D0XecflT.js"),[]).then(e=>ft(e.esper))}}),Q.of({name:"Factor",extensions:["factor"],load(){return X(()=>import("./factor-kuTfRLto.js"),__vite__mapDeps([23,22])).then(e=>ft(e.factor))}}),Q.of({name:"FCL",load(){return X(()=>import("./fcl-Kvtd6kyn.js"),[]).then(e=>ft(e.fcl))}}),Q.of({name:"Forth",extensions:["forth","fth","4th"],load(){return X(()=>import("./forth-Ffai-XNe.js"),[]).then(e=>ft(e.forth))}}),Q.of({name:"Fortran",extensions:["f","for","f77","f90","f95"],load(){return X(()=>import("./fortran-DYz_wnZ1.js"),[]).then(e=>ft(e.fortran))}}),Q.of({name:"F#",alias:["fsharp"],extensions:["fs"],load(){return X(()=>import("./mllike-CXdrOF99.js"),[]).then(e=>ft(e.fSharp))}}),Q.of({name:"Gas",extensions:["s"],load(){return X(()=>import("./gas-Bneqetm1.js"),[]).then(e=>ft(e.gas))}}),Q.of({name:"Gherkin",extensions:["feature"],load(){return X(()=>import("./gherkin-heZmZLOM.js"),[]).then(e=>ft(e.gherkin))}}),Q.of({name:"Groovy",extensions:["groovy","gradle"],filename:/^Jenkinsfile$/,load(){return X(()=>import("./groovy-D9Dt4D0W.js"),[]).then(e=>ft(e.groovy))}}),Q.of({name:"Haskell",extensions:["hs"],load(){return X(()=>import("./haskell-BWDZoCOh.js"),[]).then(e=>ft(e.haskell))}}),Q.of({name:"Haxe",extensions:["hx"],load(){return X(()=>import("./haxe-H-WmDvRZ.js"),[]).then(e=>ft(e.haxe))}}),Q.of({name:"HXML",extensions:["hxml"],load(){return X(()=>import("./haxe-H-WmDvRZ.js"),[]).then(e=>ft(e.hxml))}}),Q.of({name:"HTTP",load(){return X(()=>import("./http-DBlCnlav.js"),[]).then(e=>ft(e.http))}}),Q.of({name:"IDL",extensions:["pro"],load(){return X(()=>import("./idl-BEugSyMb.js"),[]).then(e=>ft(e.idl))}}),Q.of({name:"JSON-LD",alias:["jsonld"],extensions:["jsonld"],load(){return X(()=>import("./javascript-qCveANmP.js"),[]).then(e=>ft(e.jsonld))}}),Q.of({name:"Julia",extensions:["jl"],load(){return X(()=>import("./julia-DuME0IfC.js"),[]).then(e=>ft(e.julia))}}),Q.of({name:"Kotlin",extensions:["kt","kts"],load(){return X(()=>import("./clike-B9uivgTg.js"),[]).then(e=>ft(e.kotlin))}}),Q.of({name:"LiveScript",alias:["ls"],extensions:["ls"],load(){return X(()=>import("./livescript-BwQOo05w.js"),[]).then(e=>ft(e.liveScript))}}),Q.of({name:"Lua",extensions:["lua"],load(){return X(()=>import("./lua-BgMRiT3U.js"),[]).then(e=>ft(e.lua))}}),Q.of({name:"mIRC",extensions:["mrc"],load(){return X(()=>import("./mirc-CjQqDB4T.js"),[]).then(e=>ft(e.mirc))}}),Q.of({name:"Mathematica",extensions:["m","nb","wl","wls"],load(){return X(()=>import("./mathematica-DTrFuWx2.js"),[]).then(e=>ft(e.mathematica))}}),Q.of({name:"Modelica",extensions:["mo"],load(){return X(()=>import("./modelica-Dc1JOy9r.js"),[]).then(e=>ft(e.modelica))}}),Q.of({name:"MUMPS",extensions:["mps"],load(){return X(()=>import("./mumps-BT43cFF4.js"),[]).then(e=>ft(e.mumps))}}),Q.of({name:"Mbox",extensions:["mbox"],load(){return X(()=>import("./mbox-CNhZ1qSd.js"),[]).then(e=>ft(e.mbox))}}),Q.of({name:"Nginx",filename:/nginx.*\.conf$/i,load(){return X(()=>import("./nginx-DdIZxoE0.js"),[]).then(e=>ft(e.nginx))}}),Q.of({name:"NSIS",extensions:["nsh","nsi"],load(){return X(()=>import("./nsis-LdVXkNf5.js"),__vite__mapDeps([24,22])).then(e=>ft(e.nsis))}}),Q.of({name:"NTriples",extensions:["nt","nq"],load(){return X(()=>import("./ntriples-BfvgReVJ.js"),[]).then(e=>ft(e.ntriples))}}),Q.of({name:"Objective-C",alias:["objective-c","objc"],extensions:["m"],load(){return X(()=>import("./clike-B9uivgTg.js"),[]).then(e=>ft(e.objectiveC))}}),Q.of({name:"Objective-C++",alias:["objective-c++","objc++"],extensions:["mm"],load(){return X(()=>import("./clike-B9uivgTg.js"),[]).then(e=>ft(e.objectiveCpp))}}),Q.of({name:"OCaml",extensions:["ml","mli","mll","mly"],load(){return X(()=>import("./mllike-CXdrOF99.js"),[]).then(e=>ft(e.oCaml))}}),Q.of({name:"Octave",extensions:["m"],load(){return X(()=>import("./octave-Ck1zUtKM.js"),[]).then(e=>ft(e.octave))}}),Q.of({name:"Oz",extensions:["oz"],load(){return X(()=>import("./oz-BzwKVEFT.js"),[]).then(e=>ft(e.oz))}}),Q.of({name:"Pascal",extensions:["p","pas"],load(){return X(()=>import("./pascal--L3eBynH.js"),[]).then(e=>ft(e.pascal))}}),Q.of({name:"Perl",extensions:["pl","pm"],load(){return X(()=>import("./perl-CdXCOZ3F.js"),[]).then(e=>ft(e.perl))}}),Q.of({name:"Pig",extensions:["pig"],load(){return X(()=>import("./pig-CevX1Tat.js"),[]).then(e=>ft(e.pig))}}),Q.of({name:"PowerShell",extensions:["ps1","psd1","psm1"],load(){return X(()=>import("./powershell-CFHJl5sT.js"),[]).then(e=>ft(e.powerShell))}}),Q.of({name:"Properties files",alias:["ini","properties"],extensions:["properties","ini","in"],load(){return X(()=>import("./properties-C78fOPTZ.js"),[]).then(e=>ft(e.properties))}}),Q.of({name:"ProtoBuf",extensions:["proto"],load(){return X(()=>import("./protobuf-ChK-085T.js"),[]).then(e=>ft(e.protobuf))}}),Q.of({name:"Pug",alias:["jade"],extensions:["pug","jade"],load(){return X(()=>import("./pug-DukmZTjD.js"),__vite__mapDeps([25,26])).then(e=>ft(e.pug))}}),Q.of({name:"Puppet",extensions:["pp"],load(){return X(()=>import("./puppet-DMA9R1ak.js"),[]).then(e=>ft(e.puppet))}}),Q.of({name:"Q",extensions:["q"],load(){return X(()=>import("./q-pXgVlZs6.js"),[]).then(e=>ft(e.q))}}),Q.of({name:"R",alias:["rscript"],extensions:["r","R"],load(){return X(()=>import("./r-DUYO_cvP.js"),[]).then(e=>ft(e.r))}}),Q.of({name:"RPM Changes",load(){return X(()=>import("./rpm-CTu-6PCP.js"),[]).then(e=>ft(e.rpmChanges))}}),Q.of({name:"RPM Spec",extensions:["spec"],load(){return X(()=>import("./rpm-CTu-6PCP.js"),[]).then(e=>ft(e.rpmSpec))}}),Q.of({name:"Ruby",alias:["jruby","macruby","rake","rb","rbx"],extensions:["rb"],filename:/^(Gemfile|Rakefile)$/,load(){return X(()=>import("./ruby-B2Rjki9n.js"),[]).then(e=>ft(e.ruby))}}),Q.of({name:"SAS",extensions:["sas"],load(){return X(()=>import("./sas-B4kiWyti.js"),[]).then(e=>ft(e.sas))}}),Q.of({name:"Scala",extensions:["scala"],load(){return X(()=>import("./clike-B9uivgTg.js"),[]).then(e=>ft(e.scala))}}),Q.of({name:"Scheme",extensions:["scm","ss"],load(){return X(()=>import("./scheme-C41bIUwD.js"),[]).then(e=>ft(e.scheme))}}),Q.of({name:"Shell",alias:["bash","sh","zsh"],extensions:["sh","ksh","bash"],filename:/^PKGBUILD$/,load(){return X(()=>import("./shell-CjFT_Tl9.js"),[]).then(e=>ft(e.shell))}}),Q.of({name:"Sieve",extensions:["siv","sieve"],load(){return X(()=>import("./sieve-C3Gn_uJK.js"),[]).then(e=>ft(e.sieve))}}),Q.of({name:"Smalltalk",extensions:["st"],load(){return X(()=>import("./smalltalk-CnHTOXQT.js"),[]).then(e=>ft(e.smalltalk))}}),Q.of({name:"Solr",load(){return X(()=>import("./solr-DehyRSwq.js"),[]).then(e=>ft(e.solr))}}),Q.of({name:"SML",extensions:["sml","sig","fun","smackspec"],load(){return X(()=>import("./mllike-CXdrOF99.js"),[]).then(e=>ft(e.sml))}}),Q.of({name:"SPARQL",alias:["sparul"],extensions:["rq","sparql"],load(){return X(()=>import("./sparql-DkYu6x3z.js"),[]).then(e=>ft(e.sparql))}}),Q.of({name:"Spreadsheet",alias:["excel","formula"],load(){return X(()=>import("./spreadsheet-BCZA_wO0.js"),[]).then(e=>ft(e.spreadsheet))}}),Q.of({name:"Squirrel",extensions:["nut"],load(){return X(()=>import("./clike-B9uivgTg.js"),[]).then(e=>ft(e.squirrel))}}),Q.of({name:"Stylus",extensions:["styl"],load(){return X(()=>import("./stylus-B533Al4x.js"),[]).then(e=>ft(e.stylus))}}),Q.of({name:"Swift",extensions:["swift"],load(){return X(()=>import("./swift-BzpIVaGY.js"),[]).then(e=>ft(e.swift))}}),Q.of({name:"sTeX",load(){return X(()=>import("./stex-C3f8Ysf7.js"),[]).then(e=>ft(e.stex))}}),Q.of({name:"LaTeX",alias:["tex"],extensions:["text","ltx","tex"],load(){return X(()=>import("./stex-C3f8Ysf7.js"),[]).then(e=>ft(e.stex))}}),Q.of({name:"SystemVerilog",extensions:["v","sv","svh"],load(){return X(()=>import("./verilog-C6RDOZhf.js"),[]).then(e=>ft(e.verilog))}}),Q.of({name:"Tcl",extensions:["tcl"],load(){return X(()=>import("./tcl-DVfN8rqt.js"),[]).then(e=>ft(e.tcl))}}),Q.of({name:"Textile",extensions:["textile"],load(){return X(()=>import("./textile-CnDTJFAw.js"),[]).then(e=>ft(e.textile))}}),Q.of({name:"TiddlyWiki",load(){return X(()=>import("./tiddlywiki-DO-Gjzrf.js"),[]).then(e=>ft(e.tiddlyWiki))}}),Q.of({name:"Tiki wiki",load(){return X(()=>import("./tiki-DGYXhP31.js"),[]).then(e=>ft(e.tiki))}}),Q.of({name:"TOML",extensions:["toml"],load(){return X(()=>import("./toml-Bm5Em-hy.js"),[]).then(e=>ft(e.toml))}}),Q.of({name:"Troff",extensions:["1","2","3","4","5","6","7","8","9"],load(){return X(()=>import("./troff-wAsdV37c.js"),[]).then(e=>ft(e.troff))}}),Q.of({name:"TTCN",extensions:["ttcn","ttcn3","ttcnpp"],load(){return X(()=>import("./ttcn-CfJYG6tj.js"),[]).then(e=>ft(e.ttcn))}}),Q.of({name:"TTCN_CFG",extensions:["cfg"],load(){return X(()=>import("./ttcn-cfg-B9xdYoR4.js"),[]).then(e=>ft(e.ttcnCfg))}}),Q.of({name:"Turtle",extensions:["ttl"],load(){return X(()=>import("./turtle-B1tBg_DP.js"),[]).then(e=>ft(e.turtle))}}),Q.of({name:"Web IDL",extensions:["webidl"],load(){return X(()=>import("./webidl-ZXfAyPTL.js"),[]).then(e=>ft(e.webIDL))}}),Q.of({name:"VB.NET",extensions:["vb"],load(){return X(()=>import("./vb-CmGdzxic.js"),[]).then(e=>ft(e.vb))}}),Q.of({name:"VBScript",extensions:["vbs"],load(){return X(()=>import("./vbscript-BuJXcnF6.js"),[]).then(e=>ft(e.vbScript))}}),Q.of({name:"Velocity",extensions:["vtl"],load(){return X(()=>import("./velocity-D8B20fx6.js"),[]).then(e=>ft(e.velocity))}}),Q.of({name:"Verilog",extensions:["v"],load(){return X(()=>import("./verilog-C6RDOZhf.js"),[]).then(e=>ft(e.verilog))}}),Q.of({name:"VHDL",extensions:["vhd","vhdl"],load(){return X(()=>import("./vhdl-lSbBsy5d.js"),[]).then(e=>ft(e.vhdl))}}),Q.of({name:"XQuery",extensions:["xy","xquery","xq","xqm","xqy"],load(){return X(()=>import("./xquery-CQfU5ijd.js"),[]).then(e=>ft(e.xQuery))}}),Q.of({name:"Yacas",extensions:["ys"],load(){return X(()=>import("./yacas-BJ4BC0dw.js"),[]).then(e=>ft(e.yacas))}}),Q.of({name:"Z80",extensions:["z80"],load(){return X(()=>import("./z80-Hz9HOZM7.js"),[]).then(e=>ft(e.z80))}}),Q.of({name:"MscGen",extensions:["mscgen","mscin","msc"],load(){return X(()=>import("./mscgen-BA5vi2Kp.js"),[]).then(e=>ft(e.mscgen))}}),Q.of({name:"X",extensions:["xu"],load(){return X(()=>import("./mscgen-BA5vi2Kp.js"),[]).then(e=>ft(e.xu))}}),Q.of({name:"MsGenny",extensions:["msgenny"],load(){return X(()=>import("./mscgen-BA5vi2Kp.js"),[]).then(e=>ft(e.msgenny))}}),Q.of({name:"Vue",extensions:["vue"],load(){return X(()=>import("./index-Cm-lUucx.js"),__vite__mapDeps([27,6,1,4,2,7])).then(e=>e.vue())}}),Q.of({name:"Angular Template",load(){return X(()=>import("./index-DfbwBfhL.js"),__vite__mapDeps([28,6,1,4,2,7])).then(e=>e.angular())}})],Rnt="#e5c07b",NM="#e06c75",Pnt="#56b6c2",Nnt="#ffffff",v2="#abb2bf",Tk="#7d8799",Fnt="#61afef",$nt="#98c379",FM="#d19a66",znt="#c678dd",Hnt="#21252b",$M="#2c313a",zM="#282c34",Pw="#353a42",qnt="#3E4451",HM="#528bff",Vnt=$t.theme({"&":{color:v2,backgroundColor:zM},".cm-content":{caretColor:HM},".cm-cursor, .cm-dropCursor":{borderLeftColor:HM},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:qnt},".cm-panels":{backgroundColor:Hnt,color:v2},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:zM,color:Tk,border:"none"},".cm-activeLineGutter":{backgroundColor:$M},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Pw},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Pw,borderBottomColor:Pw},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:$M,color:v2}}},{dark:!0}),Wnt=s1.define([{tag:it.keyword,color:znt},{tag:[it.name,it.deleted,it.character,it.propertyName,it.macroName],color:NM},{tag:[it.function(it.variableName),it.labelName],color:Fnt},{tag:[it.color,it.constant(it.name),it.standard(it.name)],color:FM},{tag:[it.definition(it.name),it.separator],color:v2},{tag:[it.typeName,it.className,it.number,it.changed,it.annotation,it.modifier,it.self,it.namespace],color:Rnt},{tag:[it.operator,it.operatorKeyword,it.url,it.escape,it.regexp,it.link,it.special(it.string)],color:Pnt},{tag:[it.meta,it.comment],color:Tk},{tag:it.strong,fontWeight:"bold"},{tag:it.emphasis,fontStyle:"italic"},{tag:it.strikethrough,textDecoration:"line-through"},{tag:it.link,color:Tk,textDecoration:"underline"},{tag:it.heading,fontWeight:"bold",color:NM},{tag:[it.atom,it.bool,it.special(it.variableName)],color:FM},{tag:[it.processingInstruction,it.string,it.inserted],color:$nt},{tag:it.invalid,color:Nnt}]),jnt=[Vnt,qR(Wnt)];function pn(e){this.content=e}pn.prototype={constructor:pn,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,r){var n=r&&r!=e?this.remove(r):this,i=n.find(e),s=n.content.slice();return i==-1?s.push(r||e,t):(s[i+1]=t,r&&(s[i]=r)),new pn(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var r=this.content.slice();return r.splice(t,2),new pn(r)},addToStart:function(e,t){return new pn([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var r=this.remove(e).content.slice();return r.push(e,t),new pn(r)},addBefore:function(e,t,r){var n=this.remove(t),i=n.content.slice(),s=n.find(e);return i.splice(s==-1?i.length:s,0,t,r),new pn(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=pn.from(e),e.size?new pn(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=pn.from(e),e.size?new pn(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=pn.from(e);for(var r=0;r<e.content.length;r+=2)t=t.remove(e.content[r]);return t},toObject:function(){var e={};return this.forEach(function(t,r){e[t]=r}),e},get size(){return this.content.length>>1}};pn.from=function(e){if(e instanceof pn)return e;var t=[];if(e)for(var r in e)t.push(r,e[r]);return new pn(t)};function ZR(e,t,r){for(let n=0;;n++){if(n==e.childCount||n==t.childCount)return e.childCount==t.childCount?null:r;let i=e.child(n),s=t.child(n);if(i==s){r+=i.nodeSize;continue}if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)r++;return r}if(i.content.size||s.content.size){let o=ZR(i.content,s.content,r+1);if(o!=null)return o}r+=i.nodeSize}}function QR(e,t,r,n){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:r,b:n};let o=e.child(--i),a=t.child(--s),l=o.nodeSize;if(o==a){r-=l,n-=l;continue}if(!o.sameMarkup(a))return{a:r,b:n};if(o.isText&&o.text!=a.text){let c=0,h=Math.min(o.text.length,a.text.length);for(;c<h&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,r--,n--;return{a:r,b:n}}if(o.content.size||a.content.size){let c=QR(o.content,a.content,r-1,n-1);if(c)return c}r-=l,n-=l}}let Ct=class Yn{constructor(t,r){if(this.content=t,this.size=r||0,r==null)for(let n=0;n<t.length;n++)this.size+=t[n].nodeSize}nodesBetween(t,r,n,i=0,s){for(let o=0,a=0;a<r;o++){let l=this.content[o],c=a+l.nodeSize;if(c>t&&n(l,i+a,s||null,o)!==!1&&l.content.size){let h=a+1;l.nodesBetween(Math.max(0,t-h),Math.min(l.content.size,r-h),n,i+h)}a=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,r,n,i){let s="",o=!0;return this.nodesBetween(t,r,(a,l)=>{let c=a.isText?a.text.slice(Math.max(t,l)-l,r-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&n&&(o?o=!1:s+=n),s+=c},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let r=this.lastChild,n=t.firstChild,i=this.content.slice(),s=0;for(r.isText&&r.sameMarkup(n)&&(i[i.length-1]=r.withText(r.text+n.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new Yn(i,this.size+t.size)}cut(t,r=this.size){if(t==0&&r==this.size)return this;let n=[],i=0;if(r>t)for(let s=0,o=0;o<r;s++){let a=this.content[s],l=o+a.nodeSize;l>t&&((o<t||l>r)&&(a.isText?a=a.cut(Math.max(0,t-o),Math.min(a.text.length,r-o)):a=a.cut(Math.max(0,t-o-1),Math.min(a.content.size,r-o-1))),n.push(a),i+=a.nodeSize),o=l}return new Yn(n,i)}cutByIndex(t,r){return t==r?Yn.empty:t==0&&r==this.content.length?this:new Yn(this.content.slice(t,r))}replaceChild(t,r){let n=this.content[t];if(n==r)return this;let i=this.content.slice(),s=this.size+r.nodeSize-n.nodeSize;return i[t]=r,new Yn(i,s)}addToStart(t){return new Yn([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new Yn(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(t.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let r=this.content[t];if(!r)throw new RangeError("Index "+t+" out of range for "+this);return r}maybeChild(t){return this.content[t]||null}forEach(t){for(let r=0,n=0;r<this.content.length;r++){let i=this.content[r];t(i,n,r),n+=i.nodeSize}}findDiffStart(t,r=0){return ZR(this,t,r)}findDiffEnd(t,r=this.size,n=t.size){return QR(this,t,r,n)}findIndex(t){if(t==0)return xy(0,t);if(t==this.size)return xy(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let r=0,n=0;;r++){let i=this.child(r),s=n+i.nodeSize;if(s>=t)return s==t?xy(r+1,s):xy(r,n);n=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,r){if(!r)return Yn.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new Yn(r.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return Yn.empty;let r,n=0;for(let i=0;i<t.length;i++){let s=t[i];n+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(r||(r=t.slice(0,i)),r[r.length-1]=s.withText(r[r.length-1].text+s.text)):r&&r.push(s)}return new Yn(r||t,n)}static from(t){if(!t)return Yn.empty;if(t instanceof Yn)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new Yn([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Ct.empty=new Ct([],0);const Nw={index:0,offset:0};function xy(e,t){return Nw.index=e,Nw.offset=t,Nw}function Wb(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let r=Array.isArray(e);if(Array.isArray(t)!=r)return!1;if(r){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!Wb(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!Wb(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class Me{constructor(t,r){this.type=t,this.attrs=r}addToSet(t){let r,n=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))r||(r=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!n&&s.type.rank>this.type.rank&&(r||(r=t.slice(0,i)),r.push(this),n=!0),r&&r.push(s)}}return r||(r=t.slice()),n||r.push(this),r}removeFromSet(t){for(let r=0;r<t.length;r++)if(this.eq(t[r]))return t.slice(0,r).concat(t.slice(r+1));return t}isInSet(t){for(let r=0;r<t.length;r++)if(this.eq(t[r]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Wb(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let r in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=t.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let i=n.create(r.attrs);return n.checkAttrs(i.attrs),i}static sameSet(t,r){if(t==r)return!0;if(t.length!=r.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].eq(r[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return Me.none;if(t instanceof Me)return[t];let r=t.slice();return r.sort((n,i)=>n.type.rank-i.type.rank),r}}Me.none=[];class jb extends Error{}let Bt=class Hu{constructor(t,r,n){this.content=t,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,r){let n=eP(this.content,t+this.openStart,r);return n&&new Hu(n,this.openStart,this.openEnd)}removeBetween(t,r){return new Hu(tP(this.content,t+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,r){if(!r)return Hu.empty;let n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Hu(Ct.fromJSON(t,r.content),n,i)}static maxOpen(t,r=!0){let n=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.firstChild)n++;for(let s=t.lastChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.lastChild)i++;return new Hu(t,n,i)}};Bt.empty=new Bt(Ct.empty,0,0);function tP(e,t,r){let{index:n,offset:i}=e.findIndex(t),s=e.maybeChild(n),{index:o,offset:a}=e.findIndex(r);if(i==t||s.isText){if(a!=r&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(n,s.copy(tP(s.content,t-i-1,r-i-1)))}function eP(e,t,r,n){let{index:i,offset:s}=e.findIndex(t),o=e.maybeChild(i);if(s==t||o.isText)return n&&!n.canReplace(i,i,r)?null:e.cut(0,t).append(r).append(e.cut(t));let a=eP(o.content,t-s-1,r,o);return a&&e.replaceChild(i,o.copy(a))}function Unt(e,t,r){if(r.openStart>e.depth)throw new jb("Inserted content deeper than insertion position");if(e.depth-r.openStart!=t.depth-r.openEnd)throw new jb("Inconsistent open depths");return rP(e,t,r,0)}function rP(e,t,r,n){let i=e.index(n),s=e.node(n);if(i==t.index(n)&&n<e.depth-r.openStart){let o=rP(e,t,r,n+1);return s.copy(s.content.replaceChild(i,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&e.depth==n&&t.depth==n){let o=e.parent,a=o.content;return Rh(o,a.cut(0,e.parentOffset).append(r.content).append(a.cut(t.parentOffset)))}else{let{start:o,end:a}=Gnt(r,e);return Rh(s,iP(e,o,a,t,n))}else return Rh(s,Ub(e,t,n))}function nP(e,t){if(!t.type.compatibleContent(e.type))throw new jb("Cannot join "+t.type.name+" onto "+e.type.name)}function _k(e,t,r){let n=e.node(r);return nP(n,t.node(r)),n}function Bh(e,t){let r=t.length-1;r>=0&&e.isText&&e.sameMarkup(t[r])?t[r]=e.withText(t[r].text+e.text):t.push(e)}function Wp(e,t,r,n){let i=(t||e).node(r),s=0,o=t?t.index(r):i.childCount;e&&(s=e.index(r),e.depth>r?s++:e.textOffset&&(Bh(e.nodeAfter,n),s++));for(let a=s;a<o;a++)Bh(i.child(a),n);t&&t.depth==r&&t.textOffset&&Bh(t.nodeBefore,n)}function Rh(e,t){return e.type.checkContent(t),e.copy(t)}function iP(e,t,r,n,i){let s=e.depth>i&&_k(e,t,i+1),o=n.depth>i&&_k(r,n,i+1),a=[];return Wp(null,e,i,a),s&&o&&t.index(i)==r.index(i)?(nP(s,o),Bh(Rh(s,iP(e,t,r,n,i+1)),a)):(s&&Bh(Rh(s,Ub(e,t,i+1)),a),Wp(t,r,i,a),o&&Bh(Rh(o,Ub(r,n,i+1)),a)),Wp(n,null,i,a),new Ct(a)}function Ub(e,t,r){let n=[];if(Wp(null,e,r,n),e.depth>r){let i=_k(e,t,r+1);Bh(Rh(i,Ub(e,t,r+1)),n)}return Wp(t,null,r,n),new Ct(n)}function Gnt(e,t){let r=t.depth-e.openStart,i=t.node(r).copy(e.content);for(let s=r-1;s>=0;s--)i=t.node(s).copy(Ct.from(i));return{start:i.resolveNoCache(e.openStart+r),end:i.resolveNoCache(i.content.size-e.openEnd-r)}}class Hm{constructor(t,r,n){this.pos=t,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,r=this.index(this.depth);if(r==t.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=t.child(r);return n?t.child(r).cut(n):i}get nodeBefore(){let t=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(t).cut(0,r):t==0?null:this.parent.child(t-1)}posAtIndex(t,r){r=this.resolveDepth(r);let n=this.path[r*3],i=r==0?0:this.path[r*3-1]+1;for(let s=0;s<t;s++)i+=n.child(s).nodeSize;return i}marks(){let t=this.parent,r=this.index();if(t.content.size==0)return Me.none;if(this.textOffset)return t.child(r).marks;let n=t.maybeChild(r-1),i=t.maybeChild(r);if(!n){let a=n;n=i,i=a}let s=n.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(t){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,i=t.parent.maybeChild(t.index());for(var s=0;s<n.length;s++)n[s].type.spec.inclusive===!1&&(!i||!n[s].isInSet(i.marks))&&(n=n[s--].removeFromSet(n));return n}sharedDepth(t){for(let r=this.depth;r>0;r--)if(this.start(r)<=t&&this.end(r)>=t)return r;return 0}blockRange(t=this,r){if(t.pos<this.pos)return t.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!r||r(this.node(n))))return new sP(this,t,n);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let r=1;r<=this.depth;r++)t+=(t?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return t+":"+this.parentOffset}static resolve(t,r){if(!(r>=0&&r<=t.content.size))throw new RangeError("Position "+r+" out of range");let n=[],i=0,s=r;for(let o=t;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(n.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new Hm(r,n,s)}static resolveCached(t,r){let n=qM.get(t);if(n)for(let s=0;s<n.elts.length;s++){let o=n.elts[s];if(o.pos==r)return o}else qM.set(t,n=new Knt);let i=n.elts[n.i]=Hm.resolve(t,r);return n.i=(n.i+1)%Ynt,i}}class Knt{constructor(){this.elts=[],this.i=0}}const Ynt=12,qM=new WeakMap;class sP{constructor(t,r,n){this.$from=t,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Xnt=Object.create(null);let Ua=class Mk{constructor(t,r,n,i=Me.none){this.type=t,this.attrs=r,this.marks=i,this.content=n||Ct.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,r,n,i=0){this.content.nodesBetween(t,r,n,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,r,n,i){return this.content.textBetween(t,r,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,r,n){return this.type==t&&Wb(this.attrs,r||t.defaultAttrs||Xnt)&&Me.sameSet(this.marks,n||Me.none)}copy(t=null){return t==this.content?this:new Mk(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new Mk(this.type,this.attrs,this.content,t)}cut(t,r=this.content.size){return t==0&&r==this.content.size?this:this.copy(this.content.cut(t,r))}slice(t,r=this.content.size,n=!1){if(t==r)return Bt.empty;let i=this.resolve(t),s=this.resolve(r),o=n?0:i.sharedDepth(r),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new Bt(c,i.depth-o,s.depth-o)}replace(t,r,n){return Unt(this.resolve(t),this.resolve(r),n)}nodeAt(t){for(let r=this;;){let{index:n,offset:i}=r.content.findIndex(t);if(r=r.maybeChild(n),!r)return null;if(i==t||r.isText)return r;t-=i+1}}childAfter(t){let{index:r,offset:n}=this.content.findIndex(t);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(t);if(n<t)return{node:this.content.child(r),index:r,offset:n};let i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}}resolve(t){return Hm.resolveCached(this,t)}resolveNoCache(t){return Hm.resolve(this,t)}rangeHasMark(t,r,n){let i=!1;return r>t&&this.nodesBetween(t,r,s=>(n.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),oP(this.marks,t)}contentMatchAt(t){let r=this.type.contentMatch.matchFragment(this.content,0,t);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(t,r,n=Ct.empty,i=0,s=n.childCount){let o=this.contentMatchAt(t).matchFragment(n,i,s),a=o&&o.matchFragment(this.content,r);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(t,r,n,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(t).matchType(n),o=s&&s.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Me.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),t=n.addToSet(t)}if(!Me.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let t={type:this.type.name};for(let r in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(r=>r.toJSON())),t}static fromJSON(t,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(t.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(r.text,n)}let i=Ct.fromJSON(t,r.content),s=t.nodeType(r.type).create(r.attrs,i,n);return s.type.checkAttrs(s.attrs),s}};Ua.prototype.text=void 0;let Jnt=class Ak extends Ua{constructor(t,r,n,i){if(super(t,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):oP(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,r){return this.text.slice(t,r)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Ak(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Ak(this.type,this.attrs,t,this.marks)}cut(t=0,r=this.text.length){return t==0&&r==this.text.length?this:this.withText(this.text.slice(t,r))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}};function oP(e,t){for(let r=e.length-1;r>=0;r--)t=e[r].type.name+"("+t+")";return t}class eu{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,r){let n=new Znt(t,r);if(n.next==null)return eu.empty;let i=aP(n);n.next&&n.err("Unexpected trailing text");let s=sit(iit(i));return oit(s,n),s}matchType(t){for(let r=0;r<this.next.length;r++)if(this.next[r].type==t)return this.next[r].next;return null}matchFragment(t,r=0,n=t.childCount){let i=this;for(let s=r;i&&s<n;s++)i=i.matchType(t.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:r}=this.next[t];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(t){for(let r=0;r<this.next.length;r++)for(let n=0;n<t.next.length;n++)if(this.next[r].type==t.next[n].type)return!0;return!1}fillBefore(t,r=!1,n=0){let i=[this];function s(o,a){let l=o.matchFragment(t,n);if(l&&(!r||l.validEnd))return Ct.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:h,next:u}=o.next[c];if(!(h.isText||h.hasRequiredAttrs())&&i.indexOf(u)==-1){i.push(u);let f=s(u,a.concat(h));if(f)return f}}return null}return s(this,[])}findWrapping(t){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==t)return this.wrapCache[n+1];let r=this.computeWrapping(t);return this.wrapCache.push(t,r),r}computeWrapping(t){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),s=i.match;if(s.matchType(t)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in r)&&(!i.type||l.validEnd)&&(n.push({match:a.contentMatch,type:a,via:i}),r[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function r(n){t.push(n);for(let i=0;i<n.next.length;i++)t.indexOf(n.next[i].next)==-1&&r(n.next[i].next)}return r(this),t.map((n,i)=>{let s=i+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)s+=(o?", ":"")+n.next[o].type.name+"->"+t.indexOf(n.next[o].next);return s}).join(`
`)}}eu.empty=new eu(!0);class Znt{constructor(t,r){this.string=t,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function aP(e){let t=[];do t.push(Qnt(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function Qnt(e){let t=[];do t.push(tit(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function tit(e){let t=nit(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=eit(e,t);else break;return t}function VM(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function eit(e,t){let r=VM(e),n=r;return e.eat(",")&&(e.next!="}"?n=VM(e):n=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:t}}function rit(e,t){let r=e.nodeTypes,n=r[t];if(n)return[n];let i=[];for(let s in r){let o=r[s];o.isInGroup(t)&&i.push(o)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function nit(e){if(e.eat("(")){let t=aP(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=rit(e,e.next).map(r=>(e.inline==null?e.inline=r.isInline:e.inline!=r.isInline&&e.err("Mixing inline and block content"),{type:"name",value:r}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function iit(e){let t=[[]];return i(s(e,0),r()),t;function r(){return t.push([])-1}function n(o,a,l){let c={term:l,to:a};return t[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=r())}else if(o.type=="star"){let l=r();return n(a,l),i(s(o.expr,l),l),[n(l)]}else if(o.type=="plus"){let l=r();return i(s(o.expr,a),l),i(s(o.expr,l),l),[n(l)]}else{if(o.type=="opt")return[n(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let h=r();i(s(o.expr,l),h),l=h}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let h=r();n(l,h),i(s(o.expr,l),h),l=h}return[n(l)]}else{if(o.type=="name")return[n(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function lP(e,t){return t-e}function WM(e,t){let r=[];return n(t),r.sort(lP);function n(i){let s=e[i];if(s.length==1&&!s[0].term)return n(s[0].to);r.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&r.indexOf(l)==-1&&n(l)}}}function sit(e){let t=Object.create(null);return r(WM(e,0));function r(n){let i=[];n.forEach(o=>{e[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let h=0;h<i.length;h++)i[h][0]==a&&(c=i[h][1]);WM(e,l).forEach(h=>{c||i.push([a,c=[]]),c.indexOf(h)==-1&&c.push(h)})})});let s=t[n.join(",")]=new eu(n.indexOf(e.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(lP);s.next.push({type:i[o][0],next:t[a.join(",")]||r(a)})}return s}}function oit(e,t){for(let r=0,n=[e];r<n.length;r++){let i=n[r],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),n.indexOf(c)==-1&&n.push(c)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function cP(e){let t=Object.create(null);for(let r in e){let n=e[r];if(!n.hasDefault)return null;t[r]=n.default}return t}function hP(e,t){let r=Object.create(null);for(let n in e){let i=t&&t[n];if(i===void 0){let s=e[n];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function uP(e,t,r,n){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let i in e){let s=e[i];s.validate&&s.validate(t[i])}}function fP(e,t){let r=Object.create(null);if(t)for(let n in t)r[n]=new lit(e,n,t[n]);return r}let Gb=class dP{constructor(t,r,n){this.name=t,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=fP(t,n.attrs),this.defaultAttrs=cP(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==eu.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:hP(this.attrs,t)}create(t=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ua(this,this.computeAttrs(t),Ct.from(r),Me.setFrom(n))}createChecked(t=null,r,n){return r=Ct.from(r),this.checkContent(r),new Ua(this,this.computeAttrs(t),r,Me.setFrom(n))}createAndFill(t=null,r,n){if(t=this.computeAttrs(t),r=Ct.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let i=this.contentMatch.matchFragment(r),s=i&&i.fillBefore(Ct.empty,!0);return s?new Ua(this,t,r.append(s),Me.setFrom(n)):null}validContent(t){let r=this.contentMatch.matchFragment(t);if(!r||!r.validEnd)return!1;for(let n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){uP(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let r=0;r<t.length;r++)if(!this.allowsMarkType(t[r].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let r;for(let n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?r&&r.push(t[n]):r||(r=t.slice(0,n));return r?r.length?r:Me.none:t}static compile(t,r){let n=Object.create(null);t.forEach((s,o)=>n[s]=new dP(s,r,o));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let s in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function ait(e,t,r){let n=r.split("|");return i=>{let s=i===null?"null":typeof i;if(n.indexOf(s)<0)throw new RangeError(`Expected value of type ${n} for attribute ${t} on type ${e}, got ${s}`)}}class lit{constructor(t,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?ait(t,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class Ev{constructor(t,r,n,i){this.name=t,this.rank=r,this.schema=n,this.spec=i,this.attrs=fP(t,i.attrs),this.excluded=null;let s=cP(this.attrs);this.instance=s?new Me(this,s):null}create(t=null){return!t&&this.instance?this.instance:new Me(this,hP(this.attrs,t))}static compile(t,r){let n=Object.create(null),i=0;return t.forEach((s,o)=>n[s]=new Ev(s,i++,r,o)),n}removeFromSet(t){for(var r=0;r<t.length;r++)t[r].type==this&&(t=t.slice(0,r).concat(t.slice(r+1)),r--);return t}isInSet(t){for(let r=0;r<t.length;r++)if(t[r].type==this)return t[r]}checkAttrs(t){uP(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class pP{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let i in t)r[i]=t[i];r.nodes=pn.from(t.nodes),r.marks=pn.from(t.marks||{}),this.nodes=Gb.compile(this.spec.nodes,this),this.marks=Ev.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=n[o]||(n[o]=eu.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?jM(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:jM(this,o.split(" "))}this.nodeFromJSON=i=>Ua.fromJSON(this,i),this.markFromJSON=i=>Me.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,r=null,n,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof Gb){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(r,n,i)}text(t,r){let n=this.nodes.text;return new Jnt(n,n.defaultAttrs,t,Me.setFrom(r))}mark(t,r){return typeof t=="string"&&(t=this.marks[t]),t.create(r)}nodeType(t){let r=this.nodes[t];if(!r)throw new RangeError("Unknown node type: "+t);return r}}function jM(e,t){let r=[];for(let n=0;n<t.length;n++){let i=t[n],s=e.marks[i],o=s;if(s)r.push(s);else for(let a in e.marks){let l=e.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&r.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[n]+"'")}return r}function cit(e){return e.tag!=null}function hit(e){return e.style!=null}class ru{constructor(t,r){this.schema=t,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(i=>{if(cit(i))this.tags.push(i);else if(hit(i)){let s=/[^=]*/.exec(i.style)[0];n.indexOf(s)<0&&n.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=t.nodes[i.node];return s.contentMatch.matchType(s)})}parse(t,r={}){let n=new GM(this,r,!1);return n.addAll(t,Me.none,r.from,r.to),n.finish()}parseSlice(t,r={}){let n=new GM(this,r,!0);return n.addAll(t,Me.none,r.from,r.to),Bt.maxOpen(n.finish())}matchTag(t,r,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(dit(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||r.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,r,n,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(t)!=0||o.context&&!n.matchesContext(o.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=r))){if(o.getAttrs){let l=o.getAttrs(r);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(t){let r=[];function n(i){let s=i.priority==null?50:i.priority,o=0;for(;o<r.length;o++){let a=r[o];if((a.priority==null?50:a.priority)<s)break}r.splice(o,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(o=>{n(o=KM(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(o=>{n(o=KM(o)),o.node||o.ignore||o.mark||(o.node=i)})}return r}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new ru(t,ru.schemaRules(t)))}}const mP={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},uit={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},gP={ol:!0,ul:!0},qm=1,Ek=2,jp=4;function UM(e,t,r){return t!=null?(t?qm:0)|(t==="full"?Ek:0):e&&e.whitespace=="pre"?qm|Ek:r&~jp}class vy{constructor(t,r,n,i,s,o){this.type=t,this.attrs=r,this.marks=n,this.solid=i,this.options=o,this.content=[],this.activeMarks=Me.none,this.match=s||(o&jp?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(Ct.from(t));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(t.type))?(this.match=n,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&qm)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let s=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let r=Ct.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(Ct.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!mP.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class GM{constructor(t,r,n){this.parser=t,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let i=r.topNode,s,o=UM(null,r.preserveWhitespace,0)|(n?jp:0);i?s=new vy(i.type,i.attrs,Me.none,!0,r.topMatch||i.type.contentMatch,o):n?s=new vy(null,null,Me.none,!0,null,o):s=new vy(t.schema.topNodeType,null,Me.none,!0,null,o),this.nodes=[s],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,r){t.nodeType==3?this.addTextNode(t,r):t.nodeType==1&&this.addElement(t,r)}addTextNode(t,r){let n=t.nodeValue,i=this.top,s=i.options&Ek?"full":this.localPreserveWS||(i.options&qm)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(n)){if(s)if(s==="full")n=n.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=n.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),r,!0),a[l]&&this.insertNode(o.text(a[l]),r,!/\S/.test(a[l]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=t.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(n=n.slice(1))}n&&this.insertNode(o.text(n),r,!/\S/.test(n)),this.findInText(t)}else this.findInside(t)}addElement(t,r,n){let i=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),a;gP.hasOwnProperty(o)&&this.parser.normalizeLists&&fit(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(a=this.parser.matchTag(t,this,n));t:if(l?l.ignore:uit.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,r);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let c,h=this.needsBlock;if(mP.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,r);break t}let u=l&&l.skip?r:this.readStyles(t,r);u&&this.addAll(t,u),c&&this.sync(s),this.needsBlock=h}else{let c=this.readStyles(t,r);c&&this.addElementByRule(t,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(t,r){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),r)}ignoreFallback(t,r){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(t,r){let n=t.style;if(n&&n.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=n.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?r=r.filter(c=>!l.clearMark(c)):r=r.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return r}addElementByRule(t,r,n,i){let s,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,t.nodeName=="BR")||this.leafFallback(t,n);else{let l=this.enter(o,r.attrs||null,n,r.preserveWhitespace);l&&(s=!0,n=l)}else{let l=this.parser.schema.marks[r.mark];n=n.concat(l.create(r.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(i)this.addElement(t,n,i);else if(r.getContent)this.findInside(t),r.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,n,!1));else{let l=t;typeof r.contentElement=="string"?l=t.querySelector(r.contentElement):typeof r.contentElement=="function"?l=r.contentElement(t):r.contentElement&&(l=r.contentElement),this.findAround(t,l,!0),this.addAll(l,n),this.findAround(t,l,!1)}s&&this.sync(a)&&this.open--}addAll(t,r,n,i){let s=n||0;for(let o=n?t.childNodes[n]:t.firstChild,a=i==null?null:t.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(o,r);this.findAtPoint(t,s)}findPlace(t,r,n){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(t);if(c&&(!i||i.length>c.length+a)&&(i=c,s=l,!c.length))break;if(l.solid){if(n)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)r=this.enterInner(i[o],null,r,!1);return r}insertNode(t,r,n){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(r=this.enterInner(s,null,r))}let i=this.findPlace(t,r,n);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let o=Me.none;for(let a of i.concat(t.marks))(s.type?s.type.allowsMarkType(a.type):YM(a.type,t.type))&&(o=a.addToSet(o));return s.content.push(t.mark(o)),!0}return!1}enter(t,r,n,i){let s=this.findPlace(t.create(r),n,!1);return s&&(s=this.enterInner(t,r,n,!0,i)),s}enterInner(t,r,n,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let a=UM(t,s,o.options);o.options&jp&&o.content.length==0&&(a|=jp);let l=Me.none;return n=n.filter(c=>(o.type?o.type.allowsMarkType(c.type):YM(c.type,t))?(l=c.addToSet(l),!1):!0),this.nodes.push(new vy(t,r,l,i,null,a)),this.open++,n}closeExtra(t=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let r=this.open;r>=0;r--){if(this.nodes[r]==t)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=qm)}return!1}get currentPos(){this.closeExtra();let t=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let i=n.length-1;i>=0;i--)t+=n[i].nodeSize;r&&t++}return t}findAtPoint(t,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&t.nodeType==1&&t.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(t,r,n){if(t!=r&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&r.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&(this.find[r].pos=this.currentPos-(t.nodeValue.length-this.find[r].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let r=t.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),s=-(n?n.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=r[a];if(c==""){if(a==r.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let h=l>0||l==0&&i?this.nodes[l].type:n&&l>=s?n.node(l-s).type:null;if(!h||h.name!=c&&!h.isInGroup(c))return!1;l--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let r=t.depth;r>=0;r--){let n=t.node(r).contentMatchAt(t.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function fit(e){for(let t=e.firstChild,r=null;t;t=t.nextSibling){let n=t.nodeType==1?t.nodeName.toLowerCase():null;n&&gP.hasOwnProperty(n)&&r?(r.appendChild(t),t=r):n=="li"?r=t:n&&(r=null)}}function dit(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function KM(e){let t={};for(let r in e)t[r]=e[r];return t}function YM(e,t){let r=t.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(e))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:h}=a.edge(l);if(c==t||s.indexOf(h)<0&&o(h))return!0}};if(o(i.contentMatch))return!0}}class xu{constructor(t,r){this.nodes=t,this.marks=r}serializeFragment(t,r={},n){n||(n=Fw(r).createDocumentFragment());let i=n,s=[];return t.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],h=this.serializeMark(c,o.isInline,r);h&&(s.push([c,i]),i.appendChild(h.dom),i=h.contentDOM||h.dom)}}i.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(t,r){let{dom:n,contentDOM:i}=w2(Fw(r),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,r,i)}return n}serializeNode(t,r={}){let n=this.serializeNodeInner(t,r);for(let i=t.marks.length-1;i>=0;i--){let s=this.serializeMark(t.marks[i],t.isInline,r);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n}serializeMark(t,r,n={}){let i=this.marks[t.type.name];return i&&w2(Fw(n),i(t,r),null,t.attrs)}static renderSpec(t,r,n=null,i){return w2(t,r,n,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new xu(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let r=XM(t.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(t){return XM(t.marks)}}function XM(e){let t={};for(let r in e){let n=e[r].spec.toDOM;n&&(t[r]=n)}return t}function Fw(e){return e.document||window.document}const JM=new WeakMap;function pit(e){let t=JM.get(e);return t===void 0&&JM.set(e,t=mit(e)),t}function mit(e){let t=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")t||(t=[]),t.push(n);else for(let i=0;i<n.length;i++)r(n[i]);else for(let i in n)r(n[i])}return r(e),t}function w2(e,t,r,n){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(s=pit(n))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let a,l=r?e.createElementNS(r,i):e.createElement(i),c=t[1],h=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){h=2;for(let u in c)if(c[u]!=null){let f=u.indexOf(" ");f>0?l.setAttributeNS(u.slice(0,f),u.slice(f+1),c[u]):u=="style"&&l.style?l.style.cssText=c[u]:l.setAttribute(u,c[u])}}for(let u=h;u<t.length;u++){let f=t[u];if(f===0){if(u<t.length-1||u>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:d,contentDOM:p}=w2(e,f,r,n);if(l.appendChild(d),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const yP=65535,bP=Math.pow(2,16);function git(e,t){return e+t*bP}function ZM(e){return e&yP}function yit(e){return(e-(e&yP))/bP}const xP=1,vP=2,k2=4,wP=8;class Lk{constructor(t,r,n){this.pos=t,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&wP)>0}get deletedBefore(){return(this.delInfo&(xP|k2))>0}get deletedAfter(){return(this.delInfo&(vP|k2))>0}get deletedAcross(){return(this.delInfo&k2)>0}}class Ki{constructor(t,r=!1){if(this.ranges=t,this.inverted=r,!t.length&&Ki.empty)return Ki.empty}recover(t){let r=0,n=ZM(t);if(!this.inverted)for(let i=0;i<n;i++)r+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+r+yit(t)}mapResult(t,r=1){return this._map(t,r,!1)}map(t,r=1){return this._map(t,r,!0)}_map(t,r,n){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>t)break;let c=this.ranges[a+s],h=this.ranges[a+o],u=l+c;if(t<=u){let f=c?t==l?-1:t==u?1:r:r,d=l+i+(f<0?0:h);if(n)return d;let p=t==(r<0?l:u)?null:git(a/3,t-l),m=t==l?vP:t==u?xP:k2;return(r<0?t!=l:t!=u)&&(m|=wP),new Lk(d,m,p)}i+=h-c}return n?t+i:new Lk(t+i,0,null)}touches(t,r){let n=0,i=ZM(r),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>t)break;let c=this.ranges[a+s],h=l+c;if(t<=h&&a==i*3)return!0;n+=this.ranges[a+o]-c}return!1}forEach(t){let r=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+r],h=this.ranges[i+n];t(a,a+c,l,l+h),s+=h-c}}invert(){return new Ki(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?Ki.empty:new Ki(t<0?[0,-t,0]:[0,0,t])}}Ki.empty=new Ki([]);class Vm{constructor(t,r,n=0,i=t?t.length:0){this.mirror=r,this.from=n,this.to=i,this._maps=t||[],this.ownData=!(t||r)}get maps(){return this._maps}slice(t=0,r=this.maps.length){return new Vm(this._maps,this.mirror,t,r)}appendMap(t,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(t){for(let r=0,n=this._maps.length;r<t._maps.length;r++){let i=t.getMirror(r);this.appendMap(t._maps[r],i!=null&&i<r?n+i:void 0)}}getMirror(t){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==t)return this.mirror[r+(r%2?-1:1)]}}setMirror(t,r){this.mirror||(this.mirror=[]),this.mirror.push(t,r)}appendMappingInverted(t){for(let r=t.maps.length-1,n=this._maps.length+t._maps.length;r>=0;r--){let i=t.getMirror(r);this.appendMap(t._maps[r].invert(),i!=null&&i>r?n-i-1:void 0)}}invert(){let t=new Vm;return t.appendMappingInverted(this),t}map(t,r=1){if(this.mirror)return this._map(t,r,!0);for(let n=this.from;n<this.to;n++)t=this._maps[n].map(t,r);return t}mapResult(t,r=1){return this._map(t,r,!1)}_map(t,r,n){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(t,r);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,t=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,t=a.pos}return n?t:new Lk(t,i,null)}}const $w=Object.create(null);let Vn=class{getMap(){return Ki.empty}merge(t){return null}static fromJSON(t,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=$w[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(t,r)}static jsonID(t,r){if(t in $w)throw new RangeError("Duplicate use of step JSON ID "+t);return $w[t]=r,r.prototype.jsonID=t,r}};class Wr{constructor(t,r){this.doc=t,this.failed=r}static ok(t){return new Wr(t,null)}static fail(t){return new Wr(null,t)}static fromReplace(t,r,n,i){try{return Wr.ok(t.replace(r,n,i))}catch(s){if(s instanceof jb)return Wr.fail(s.message);throw s}}}function _7(e,t,r){let n=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(_7(s.content,t,s))),s.isInline&&(s=t(s,r,i)),n.push(s)}return Ct.fromArray(n)}class za extends Vn{constructor(t,r,n){super(),this.from=t,this.to=r,this.mark=n}apply(t){let r=t.slice(this.from,this.to),n=t.resolve(this.from),i=n.node(n.sharedDepth(this.to)),s=new Bt(_7(r.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),r.openStart,r.openEnd);return Wr.fromReplace(t,this.from,this.to,s)}invert(){return new zo(this.from,this.to,this.mark)}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new za(r.pos,n.pos,this.mark)}merge(t){return t instanceof za&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new za(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new za(r.from,r.to,t.markFromJSON(r.mark))}}Vn.jsonID("addMark",za);class zo extends Vn{constructor(t,r,n){super(),this.from=t,this.to=r,this.mark=n}apply(t){let r=t.slice(this.from,this.to),n=new Bt(_7(r.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),r.openStart,r.openEnd);return Wr.fromReplace(t,this.from,this.to,n)}invert(){return new za(this.from,this.to,this.mark)}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new zo(r.pos,n.pos,this.mark)}merge(t){return t instanceof zo&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new zo(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new zo(r.from,r.to,t.markFromJSON(r.mark))}}Vn.jsonID("removeMark",zo);class Gl extends Vn{constructor(t,r){super(),this.pos=t,this.mark=r}apply(t){let r=t.nodeAt(this.pos);if(!r)return Wr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return Wr.fromReplace(t,this.pos,this.pos+1,new Bt(Ct.from(n),0,r.isLeaf?0:1))}invert(t){let r=t.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let i=0;i<r.marks.length;i++)if(!r.marks[i].isInSet(n))return new Gl(this.pos,r.marks[i]);return new Gl(this.pos,this.mark)}}return new nu(this.pos,this.mark)}map(t){let r=t.mapResult(this.pos,1);return r.deletedAfter?null:new Gl(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Gl(r.pos,t.markFromJSON(r.mark))}}Vn.jsonID("addNodeMark",Gl);class nu extends Vn{constructor(t,r){super(),this.pos=t,this.mark=r}apply(t){let r=t.nodeAt(this.pos);if(!r)return Wr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return Wr.fromReplace(t,this.pos,this.pos+1,new Bt(Ct.from(n),0,r.isLeaf?0:1))}invert(t){let r=t.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new Gl(this.pos,this.mark)}map(t){let r=t.mapResult(this.pos,1);return r.deletedAfter?null:new nu(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new nu(r.pos,t.markFromJSON(r.mark))}}Vn.jsonID("removeNodeMark",nu);class sn extends Vn{constructor(t,r,n,i=!1){super(),this.from=t,this.to=r,this.slice=n,this.structure=i}apply(t){return this.structure&&Ok(t,this.from,this.to)?Wr.fail("Structure replace would overwrite content"):Wr.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new Ki([this.from,this.to-this.from,this.slice.size])}invert(t){return new sn(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new sn(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(t){if(!(t instanceof sn)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let r=this.slice.size+t.slice.size==0?Bt.empty:new Bt(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new sn(this.from,this.to+(t.to-t.from),r,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let r=this.slice.size+t.slice.size==0?Bt.empty:new Bt(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new sn(t.from,this.to,r,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new sn(r.from,r.to,Bt.fromJSON(t,r.slice),!!r.structure)}}Vn.jsonID("replace",sn);class Nn extends Vn{constructor(t,r,n,i,s,o,a=!1){super(),this.from=t,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(t){if(this.structure&&(Ok(t,this.from,this.gapFrom)||Ok(t,this.gapTo,this.to)))return Wr.fail("Structure gap-replace would overwrite content");let r=t.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return Wr.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?Wr.fromReplace(t,this.from,this.to,n):Wr.fail("Content does not fit in gap")}getMap(){return new Ki([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let r=this.gapTo-this.gapFrom;return new Nn(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),i=this.from==this.gapFrom?r.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?n.pos:t.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||i<r.pos||s>n.pos?null:new Nn(r.pos,n.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Nn(r.from,r.to,r.gapFrom,r.gapTo,Bt.fromJSON(t,r.slice),r.insert,!!r.structure)}}Vn.jsonID("replaceAround",Nn);function Ok(e,t,r){let n=e.resolve(t),i=r-t,s=n.depth;for(;i>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,i--;if(i>0){let o=n.node(s).maybeChild(n.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function bit(e,t,r,n){let i=[],s=[],o,a;e.doc.nodesBetween(t,r,(l,c,h)=>{if(!l.isInline)return;let u=l.marks;if(!n.isInSet(u)&&h.type.allowsMarkType(n.type)){let f=Math.max(c,t),d=Math.min(c+l.nodeSize,r),p=n.addToSet(u);for(let m=0;m<u.length;m++)u[m].isInSet(p)||(o&&o.to==f&&o.mark.eq(u[m])?o.to=d:i.push(o=new zo(f,d,u[m])));a&&a.to==f?a.to=d:s.push(a=new za(f,d,n))}}),i.forEach(l=>e.step(l)),s.forEach(l=>e.step(l))}function xit(e,t,r,n){let i=[],s=0;e.doc.nodesBetween(t,r,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(n instanceof Ev){let c=o.marks,h;for(;h=n.isInSet(c);)(l||(l=[])).push(h),c=h.removeFromSet(c)}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,r);for(let h=0;h<l.length;h++){let u=l[h],f;for(let d=0;d<i.length;d++){let p=i[d];p.step==s-1&&u.eq(i[d].style)&&(f=p)}f?(f.to=c,f.step=s):i.push({style:u,from:Math.max(a,t),to:c,step:s})}}}),i.forEach(o=>e.step(new zo(o.from,o.to,o.style)))}function M7(e,t,r,n=r.contentMatch,i=!0){let s=e.doc.nodeAt(t),o=[],a=t+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),h=a+c.nodeSize,u=n.matchType(c.type);if(!u)o.push(new sn(a,h,Bt.empty));else{n=u;for(let f=0;f<c.marks.length;f++)r.allowsMarkType(c.marks[f].type)||e.step(new zo(a,h,c.marks[f]));if(i&&c.isText&&r.whitespace!="pre"){let f,d=/\r?\n|\r/g,p;for(;f=d.exec(c.text);)p||(p=new Bt(Ct.from(r.schema.text(" ",r.allowedMarks(c.marks))),0,0)),o.push(new sn(a+f.index,a+f.index+f[0].length,p))}}a=h}if(!n.validEnd){let l=n.fillBefore(Ct.empty,!0);e.replace(a,a,new Bt(l,0,0))}for(let l=o.length-1;l>=0;l--)e.step(o[l])}function vit(e,t,r){return(t==0||e.canReplace(t,e.childCount))&&(r==e.childCount||e.canReplace(0,r))}function Lv(e){let r=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth,i=0,s=0;;--n){let o=e.$from.node(n),a=e.$from.index(n)+i,l=e.$to.indexAfter(n)-s;if(n<e.depth&&o.canReplace(a,l,r))return n;if(n==0||o.type.spec.isolating||!vit(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function wit(e,t,r){let{$from:n,$to:i,depth:s}=t,o=n.before(s+1),a=i.after(s+1),l=o,c=a,h=Ct.empty,u=0;for(let p=s,m=!1;p>r;p--)m||n.index(p)>0?(m=!0,h=Ct.from(n.node(p).copy(h)),u++):l--;let f=Ct.empty,d=0;for(let p=s,m=!1;p>r;p--)m||i.after(p+1)<i.end(p)?(m=!0,f=Ct.from(i.node(p).copy(f)),d++):c++;e.step(new Nn(l,c,o,a,new Bt(h.append(f),u,d),h.size-u,!0))}function A7(e,t,r=null,n=e){let i=kit(e,t),s=i&&Cit(n,t);return s?i.map(QM).concat({type:t,attrs:r}).concat(s.map(QM)):null}function QM(e){return{type:e,attrs:null}}function kit(e,t){let{parent:r,startIndex:n,endIndex:i}=e,s=r.contentMatchAt(n).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return r.canReplaceWith(n,i,o)?s:null}function Cit(e,t){let{parent:r,startIndex:n,endIndex:i}=e,s=r.child(n),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:t).contentMatch;for(let c=n;l&&c<i;c++)l=l.matchType(r.child(c).type);return!l||!l.validEnd?null:o}function Sit(e,t,r){let n=Ct.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let a=r[o].type.contentMatch.matchFragment(n);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=Ct.from(r[o].type.create(r[o].attrs,n))}let i=t.start,s=t.end;e.step(new Nn(i,s,i,s,new Bt(n,0,0),r.length,!0))}function Tit(e,t,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,r,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(n,l)&&_it(e.doc,e.mapping.slice(s).map(a),n)){let c=null;if(n.schema.linebreakReplacement){let d=n.whitespace=="pre",p=!!n.contentMatch.matchType(n.schema.linebreakReplacement);d&&!p?c=!1:!d&&p&&(c=!0)}c===!1&&CP(e,o,a,s),M7(e,e.mapping.slice(s).map(a,1),n,void 0,c===null);let h=e.mapping.slice(s),u=h.map(a,1),f=h.map(a+o.nodeSize,1);return e.step(new Nn(u,f,u+1,f-1,new Bt(Ct.from(n.create(l,null,o.marks)),0,0),1,!0)),c===!0&&kP(e,o,a,s),!1}})}function kP(e,t,r,n){t.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=e.mapping.slice(n).map(r+1+s+o.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function CP(e,t,r,n){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=e.mapping.slice(n).map(r+1+s);e.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function _it(e,t,r){let n=e.resolve(t),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function Mit(e,t,r,n,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");r||(r=s.type);let o=r.create(n,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,o);if(!r.validContent(s.content))throw new RangeError("Invalid content for node type "+r.name);e.step(new Nn(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new Bt(Ct.from(o),0,0),1,!0))}function Up(e,t,r=1,n){let i=e.resolve(t),s=i.depth-r,o=n&&n[n.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,h=r-2;c>s;c--,h--){let u=i.node(c),f=i.index(c);if(u.type.spec.isolating)return!1;let d=u.content.cutByIndex(f,u.childCount),p=n&&n[h+1];p&&(d=d.replaceChild(0,p.type.create(p.attrs)));let m=n&&n[h]||u;if(!u.canReplace(f+1,u.childCount)||!m.type.validContent(d))return!1}let a=i.indexAfter(s),l=n&&n[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function Ait(e,t,r=1,n){let i=e.doc.resolve(t),s=Ct.empty,o=Ct.empty;for(let a=i.depth,l=i.depth-r,c=r-1;a>l;a--,c--){s=Ct.from(i.node(a).copy(s));let h=n&&n[c];o=Ct.from(h?h.type.create(h.attrs,o):i.node(a).copy(o))}e.step(new sn(t,t,new Bt(s.append(o),r,r),!0))}function Ov(e,t){let r=e.resolve(t),n=r.index();return Lit(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function Eit(e,t){t.content.size||e.type.compatibleContent(t.type);let r=e.contentMatchAt(e.childCount),{linebreakReplacement:n}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),o=s.type==n?e.type.schema.nodes.text:s.type;if(r=r.matchType(o),!r||!e.type.allowsMarks(s.marks))return!1}return r.validEnd}function Lit(e,t){return!!(e&&t&&!e.isLeaf&&Eit(e,t))}function Oit(e,t,r){let n=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-r),o=s.node().type;if(i&&o.inlineContent){let h=o.whitespace=="pre",u=!!o.contentMatch.matchType(i);h&&!u?n=!1:!h&&u&&(n=!0)}let a=e.steps.length;if(n===!1){let h=e.doc.resolve(t+r);CP(e,h.node(),h.before(),a)}o.inlineContent&&M7(e,t+r-1,o,s.node().contentMatchAt(s.index()),n==null);let l=e.mapping.slice(a),c=l.map(t-r);if(e.step(new sn(c,l.map(t+r,-1),Bt.empty,!0)),n===!0){let h=e.doc.resolve(c);kP(e,h.node(),h.before(),e.steps.length)}return e}function Dit(e,t,r){let n=e.resolve(t);if(n.parent.canReplaceWith(n.index(),n.index(),r))return t;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let s=n.index(i);if(n.node(i).canReplaceWith(s,s,r))return n.before(i+1);if(s>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let s=n.indexAfter(i);if(n.node(i).canReplaceWith(s,s,r))return n.after(i+1);if(s<n.node(i).childCount)return null}return null}function Iit(e,t,r){let n=e.resolve(t);if(!r.content.size)return t;let i=r.content;for(let s=0;s<r.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(r.openStart==0&&r.size?2:1);s++)for(let o=n.depth;o>=0;o--){let a=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,l=n.index(o)+(a>0?1:0),c=n.node(o),h=!1;if(s==1)h=c.canReplace(l,l,i);else{let u=c.contentMatchAt(l).findWrapping(i.firstChild.type);h=u&&c.canReplaceWith(l,l,u[0])}if(h)return a==0?n.pos:a<0?n.before(o+1):n.after(o+1)}return null}function Dv(e,t,r=t,n=Bt.empty){if(t==r&&!n.size)return null;let i=e.resolve(t),s=e.resolve(r);return SP(i,s,n)?new sn(t,r,n):new Bit(i,s,n).fit()}function SP(e,t,r){return!r.openStart&&!r.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),r.content)}class Bit{constructor(t,r,n){this.$from=t,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=Ct.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=Ct.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(t<0?this.$to:n.doc.resolve(t));if(!i)return null;let s=this.placed,o=n.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new Bt(s,o,a);return t>-1?new Nn(n.pos,t,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new sn(n.pos,i.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<t;n++){let s=r.firstChild;if(r.childCount>1&&(i=0),s.type.spec.isolating&&i<=n){t=n;break}r=s.content}for(let r=1;r<=2;r++)for(let n=r==1?t:this.unplaced.openStart;n>=0;n--){let i,s=null;n?(s=zw(this.unplaced.content,n-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],h,u=null;if(r==1&&(o?c.matchType(o.type)||(u=c.fillBefore(Ct.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:n,frontierDepth:a,parent:s,inject:u};if(r==2&&o&&(h=c.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:a,parent:s,wrap:h};if(s&&c.matchType(s.type))break}}}openMore(){let{content:t,openStart:r,openEnd:n}=this.unplaced,i=zw(t,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Bt(t,r+1,Math.max(n,i.size+r>=t.size-n?r+1:0)),!0)}dropNode(){let{content:t,openStart:r,openEnd:n}=this.unplaced,i=zw(t,r);if(i.childCount<=1&&r>0){let s=t.size-r<=r+i.size;this.unplaced=new Bt(K0(t,r-1,1),r-1,s?r-1:n)}else this.unplaced=new Bt(K0(t,r,1),r,n)}placeNodes({sliceDepth:t,frontierDepth:r,parent:n,inject:i,wrap:s}){for(;this.depth>r;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,a=n?n.content:o.content,l=o.openStart-t,c=0,h=[],{match:u,type:f}=this.frontier[r];if(i){for(let m=0;m<i.childCount;m++)h.push(i.child(m));u=u.matchFragment(i)}let d=a.size+t-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),g=u.matchType(m.type);if(!g)break;c++,(c>1||l==0||m.content.size)&&(u=g,h.push(TP(m.mark(f.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?d:-1)))}let p=c==a.childCount;p||(d=-1),this.placed=Y0(this.placed,r,Ct.from(h)),this.frontier[r].match=u,p&&d<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<d;m++){let y=g.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),g=y.content}this.unplaced=p?t==0?Bt.empty:new Bt(K0(o.content,t-1,1),t-1,d<0?o.openEnd:t-1):new Bt(K0(o.content,t,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],r;if(!t.type.isTextblock||!Hw(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(t){t:for(let r=Math.min(this.depth,t.depth);r>=0;r--){let{match:n,type:i}=this.frontier[r],s=r<t.depth&&t.end(r+1)==t.pos+(t.depth-(r+1)),o=Hw(t,r,i,n,s);if(o){for(let a=r-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],h=Hw(t,a,c,l,!0);if(!h||h.childCount)continue t}return{depth:r,fit:o,move:s?t.doc.resolve(t.after(r+1)):t}}}}close(t){let r=this.findCloseLevel(t);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=Y0(this.placed,r.depth,r.fit)),t=r.move;for(let n=r.depth+1;n<=t.depth;n++){let i=t.node(n),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(n));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,r=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=Y0(this.placed,this.depth,Ct.from(t.create(r,n))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(Ct.empty,!0);r.childCount&&(this.placed=Y0(this.placed,this.frontier.length,r))}}function K0(e,t,r){return t==0?e.cutByIndex(r,e.childCount):e.replaceChild(0,e.firstChild.copy(K0(e.firstChild.content,t-1,r)))}function Y0(e,t,r){return t==0?e.append(r):e.replaceChild(e.childCount-1,e.lastChild.copy(Y0(e.lastChild.content,t-1,r)))}function zw(e,t){for(let r=0;r<t;r++)e=e.firstChild.content;return e}function TP(e,t,r){if(t<=0)return e;let n=e.content;return t>1&&(n=n.replaceChild(0,TP(n.firstChild,t-1,n.childCount==1?r-1:0))),t>0&&(n=e.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(e.type.contentMatch.matchFragment(n).fillBefore(Ct.empty,!0)))),e.copy(n)}function Hw(e,t,r,n,i){let s=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==s.childCount&&!r.compatibleContent(s.type))return null;let a=n.fillBefore(s.content,!0,o);return a&&!Rit(r,s.content,o)?a:null}function Rit(e,t,r){for(let n=r;n<t.childCount;n++)if(!e.allowsMarks(t.child(n).marks))return!0;return!1}function Pit(e){return e.spec.defining||e.spec.definingForContent}function Nit(e,t,r,n){if(!n.size)return e.deleteRange(t,r);let i=e.doc.resolve(t),s=e.doc.resolve(r);if(SP(i,s,n))return e.step(new sn(t,r,n));let o=MP(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,d=i.pos-1;f>0;f--,d--){let p=i.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==d&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],h=n.openStart;for(let f=n.content,d=0;;d++){let p=f.firstChild;if(c.push(p),d==n.openStart)break;f=p.content}for(let f=h-1;f>=0;f--){let d=c[f],p=Pit(d.type);if(p&&!d.sameMarkup(i.node(Math.abs(a)-1)))h=f;else if(p||!d.type.isTextblock)break}for(let f=n.openStart;f>=0;f--){let d=(f+h+1)%(n.openStart+1),p=c[d];if(p)for(let m=0;m<o.length;m++){let g=o[(m+l)%o.length],y=!0;g<0&&(y=!1,g=-g);let b=i.node(g-1),x=i.index(g-1);if(b.canReplaceWith(x,x,p.type,p.marks))return e.replace(i.before(g),y?s.after(g):r,new Bt(_P(n.content,0,n.openStart,d),d,n.openEnd))}}let u=e.steps.length;for(let f=o.length-1;f>=0&&(e.replace(t,r,n),!(e.steps.length>u));f--){let d=o[f];d<0||(t=i.before(d),r=s.after(d))}}function _P(e,t,r,n,i){if(t<r){let s=e.firstChild;e=e.replaceChild(0,s.copy(_P(s.content,t+1,r,n,s)))}if(t>n){let s=i.contentMatchAt(0),o=s.fillBefore(e).append(e);e=o.append(s.matchFragment(o).fillBefore(Ct.empty,!0))}return e}function Fit(e,t,r,n){if(!n.isInline&&t==r&&e.doc.resolve(t).parent.content.size){let i=Dit(e.doc,t,n.type);i!=null&&(t=r=i)}e.replaceRange(t,r,new Bt(Ct.from(n),0,0))}function $it(e,t,r){let n=e.doc.resolve(t),i=e.doc.resolve(r),s=MP(n,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||n.node(a).type.contentMatch.validEnd)return e.delete(n.start(a),i.end(a));if(a>0&&(l||n.node(a-1).canReplace(n.index(a-1),i.indexAfter(a-1))))return e.delete(n.before(a),i.after(a))}for(let o=1;o<=n.depth&&o<=i.depth;o++)if(t-n.start(o)==n.depth-o&&r>n.end(o)&&i.end(o)-r!=i.depth-o&&n.start(o-1)==i.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),i.index(o-1)))return e.delete(n.before(o),r);e.delete(t,r)}function MP(e,t){let r=[],n=Math.min(e.depth,t.depth);for(let i=n;i>=0;i--){let s=e.start(i);if(s<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(s==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==s-1)&&r.push(i)}return r}class uf extends Vn{constructor(t,r,n){super(),this.pos=t,this.attr=r,this.value=n}apply(t){let r=t.nodeAt(this.pos);if(!r)return Wr.fail("No node at attribute step's position");let n=Object.create(null);for(let s in r.attrs)n[s]=r.attrs[s];n[this.attr]=this.value;let i=r.type.create(n,null,r.marks);return Wr.fromReplace(t,this.pos,this.pos+1,new Bt(Ct.from(i),0,r.isLeaf?0:1))}getMap(){return Ki.empty}invert(t){return new uf(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let r=t.mapResult(this.pos,1);return r.deletedAfter?null:new uf(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new uf(r.pos,r.attr,r.value)}}Vn.jsonID("attr",uf);class Wm extends Vn{constructor(t,r){super(),this.attr=t,this.value=r}apply(t){let r=Object.create(null);for(let i in t.attrs)r[i]=t.attrs[i];r[this.attr]=this.value;let n=t.type.create(r,t.content,t.marks);return Wr.ok(n)}getMap(){return Ki.empty}invert(t){return new Wm(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Wm(r.attr,r.value)}}Vn.jsonID("docAttr",Wm);let pd=class extends Error{};pd=function e(t){let r=Error.call(this,t);return r.__proto__=e.prototype,r};pd.prototype=Object.create(Error.prototype);pd.prototype.constructor=pd;pd.prototype.name="TransformError";let AP=class{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Vm}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let r=this.maybeStep(t);if(r.failed)throw new pd(r.failed);return this}maybeStep(t){let r=t.apply(this.doc);return r.failed||this.addStep(t,r.doc),r}get docChanged(){return this.steps.length>0}addStep(t,r){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=r}replace(t,r=t,n=Bt.empty){let i=Dv(this.doc,t,r,n);return i&&this.step(i),this}replaceWith(t,r,n){return this.replace(t,r,new Bt(Ct.from(n),0,0))}delete(t,r){return this.replace(t,r,Bt.empty)}insert(t,r){return this.replaceWith(t,t,r)}replaceRange(t,r,n){return Nit(this,t,r,n),this}replaceRangeWith(t,r,n){return Fit(this,t,r,n),this}deleteRange(t,r){return $it(this,t,r),this}lift(t,r){return wit(this,t,r),this}join(t,r=1){return Oit(this,t,r),this}wrap(t,r){return Sit(this,t,r),this}setBlockType(t,r=t,n,i=null){return Tit(this,t,r,n,i),this}setNodeMarkup(t,r,n=null,i){return Mit(this,t,r,n,i),this}setNodeAttribute(t,r,n){return this.step(new uf(t,r,n)),this}setDocAttribute(t,r){return this.step(new Wm(t,r)),this}addNodeMark(t,r){return this.step(new Gl(t,r)),this}removeNodeMark(t,r){let n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(r instanceof Me)r.isInSet(n.marks)&&this.step(new nu(t,r));else{let i=n.marks,s,o=[];for(;s=r.isInSet(i);)o.push(new nu(t,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(t,r=1,n){return Ait(this,t,r,n),this}addMark(t,r,n){return bit(this,t,r,n),this}removeMark(t,r,n){return xit(this,t,r,n),this}clearIncompatible(t,r,n){return M7(this,t,r,n),this}};const qw=Object.create(null);let we=class{constructor(t,r,n){this.$anchor=t,this.$head=r,this.ranges=n||[new EP(t.min(r),t.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let r=0;r<t.length;r++)if(t[r].$from.pos!=t[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,r=Bt.empty){let n=r.content.lastChild,i=null;for(let a=0;a<r.openEnd;a++)i=n,n=n.lastChild;let s=t.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],h=t.mapping.slice(s);t.replaceRange(h.map(l.pos),h.map(c.pos),a?Bt.empty:r),a==0&&rA(t,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,r){let n=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=t.mapping.slice(n),c=l.map(o.pos),h=l.map(a.pos);s?t.deleteRange(c,h):(t.replaceRangeWith(c,h,r),rA(t,n,r.isInline?-1:1))}}static findFrom(t,r,n=!1){let i=t.parent.inlineContent?new Gt(t):qu(t.node(0),t.parent,t.pos,t.index(),r,n);if(i)return i;for(let s=t.depth-1;s>=0;s--){let o=r<0?qu(t.node(0),t.node(s),t.before(s+1),t.index(s),r,n):qu(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,r,n);if(o)return o}return null}static near(t,r=1){return this.findFrom(t,r)||this.findFrom(t,-r)||new Oi(t.node(0))}static atStart(t){return qu(t,t,0,0,1)||new Oi(t)}static atEnd(t){return qu(t,t,t.content.size,t.childCount,-1)||new Oi(t)}static fromJSON(t,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=qw[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(t,r)}static jsonID(t,r){if(t in qw)throw new RangeError("Duplicate use of selection JSON ID "+t);return qw[t]=r,r.prototype.jsonID=t,r}getBookmark(){return Gt.between(this.$anchor,this.$head).getBookmark()}};we.prototype.visible=!0;class EP{constructor(t,r){this.$from=t,this.$to=r}}let tA=!1;function eA(e){!tA&&!e.parent.inlineContent&&(tA=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Gt extends we{constructor(t,r=t){eA(t),eA(r),super(t,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,r){let n=t.resolve(r.map(this.head));if(!n.parent.inlineContent)return we.near(n);let i=t.resolve(r.map(this.anchor));return new Gt(i.parent.inlineContent?i:n,n)}replace(t,r=Bt.empty){if(super.replace(t,r),r==Bt.empty){let n=this.$from.marksAcross(this.$to);n&&t.ensureMarks(n)}}eq(t){return t instanceof Gt&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Iv(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Gt(t.resolve(r.anchor),t.resolve(r.head))}static create(t,r,n=r){let i=t.resolve(r);return new this(i,n==r?i:t.resolve(n))}static between(t,r,n){let i=t.pos-r.pos;if((!n||i)&&(n=i>=0?1:-1),!r.parent.inlineContent){let s=we.findFrom(r,n,!0)||we.findFrom(r,-n,!0);if(s)r=s.$head;else return we.near(r,n)}return t.parent.inlineContent||(i==0?t=r:(t=(we.findFrom(t,-n,!0)||we.findFrom(t,n,!0)).$anchor,t.pos<r.pos!=i<0&&(t=r))),new Gt(t,r)}}we.jsonID("text",Gt);class Iv{constructor(t,r){this.anchor=t,this.head=r}map(t){return new Iv(t.map(this.anchor),t.map(this.head))}resolve(t){return Gt.between(t.resolve(this.anchor),t.resolve(this.head))}}class ie extends we{constructor(t){let r=t.nodeAfter,n=t.node(0).resolve(t.pos+r.nodeSize);super(t,n),this.node=r}map(t,r){let{deleted:n,pos:i}=r.mapResult(this.anchor),s=t.resolve(i);return n?we.near(s):new ie(s)}content(){return new Bt(Ct.from(this.node),0,0)}eq(t){return t instanceof ie&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new E7(this.anchor)}static fromJSON(t,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ie(t.resolve(r.anchor))}static create(t,r){return new ie(t.resolve(r))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}ie.prototype.visible=!1;we.jsonID("node",ie);class E7{constructor(t){this.anchor=t}map(t){let{deleted:r,pos:n}=t.mapResult(this.anchor);return r?new Iv(n,n):new E7(n)}resolve(t){let r=t.resolve(this.anchor),n=r.nodeAfter;return n&&ie.isSelectable(n)?new ie(r):we.near(r)}}class Oi extends we{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,r=Bt.empty){if(r==Bt.empty){t.delete(0,t.doc.content.size);let n=we.atStart(t.doc);n.eq(t.selection)||t.setSelection(n)}else super.replace(t,r)}toJSON(){return{type:"all"}}static fromJSON(t){return new Oi(t)}map(t){return new Oi(t)}eq(t){return t instanceof Oi}getBookmark(){return zit}}we.jsonID("all",Oi);const zit={map(){return this},resolve(e){return new Oi(e)}};function qu(e,t,r,n,i,s=!1){if(t.inlineContent)return Gt.create(e,r);for(let o=n-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let a=t.child(o);if(a.isAtom){if(!s&&ie.isSelectable(a))return ie.create(e,r-(i<0?a.nodeSize:0))}else{let l=qu(e,a,r+i,i<0?a.childCount:0,i,s);if(l)return l}r+=a.nodeSize*i}return null}function rA(e,t,r){let n=e.steps.length-1;if(n<t)return;let i=e.steps[n];if(!(i instanceof sn||i instanceof Nn))return;let s=e.mapping.maps[n],o;s.forEach((a,l,c,h)=>{o==null&&(o=h)}),e.setSelection(we.near(e.doc.resolve(o),r))}const nA=1,wy=2,iA=4;class Hit extends AP{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|nA)&~wy,this.storedMarks=null,this}get selectionSet(){return(this.updated&nA)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=wy,this}ensureMarks(t){return Me.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&wy)>0}addStep(t,r){super.addStep(t,r),this.updated=this.updated&~wy,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,r=!0){let n=this.selection;return r&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Me.none))),n.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,r,n){let i=this.doc.type.schema;if(r==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(n==null&&(n=r),!t)return this.deleteRange(r,n);let s=this.storedMarks;if(!s){let o=this.doc.resolve(r);s=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(t,s)),!this.selection.empty&&this.selection.to==r+t.length&&this.setSelection(we.near(this.selection.$to)),this}}setMeta(t,r){return this.meta[typeof t=="string"?t:t.key]=r,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=iA,this}get scrolledIntoView(){return(this.updated&iA)>0}}function sA(e,t){return!t||!e?e:e.bind(t)}class X0{constructor(t,r,n){this.name=t,this.init=sA(r.init,n),this.apply=sA(r.apply,n)}}const qit=[new X0("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new X0("selection",{init(e,t){return e.selection||we.atStart(t.doc)},apply(e){return e.selection}}),new X0("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,r,n){return n.selection.$cursor?e.storedMarks:null}}),new X0("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class Vw{constructor(t,r){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=qit.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new X0(n.key,n.spec.state,n))})}}class hh{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let r=[t],n=this.applyInner(t),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,h=l<r.length&&a.spec.appendTransaction.call(a,l?r.slice(l):r,c,n);if(h&&n.filterTransaction(h,o)){if(h.setMeta("appendedTransaction",t),!i){i=[];for(let u=0;u<this.config.plugins.length;u++)i.push(u<o?{state:n,n:r.length}:{state:this,n:0})}r.push(h),n=n.applyInner(h),s=!0}i&&(i[o]={state:n,n:r.length})}}if(!s)return{state:n,transactions:r}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new hh(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let s=n[i];r[s.name]=s.apply(t,this[s.name],this,r)}return r}get tr(){return new Hit(this)}static create(t){let r=new Vw(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new hh(r);for(let i=0;i<r.fields.length;i++)n[r.fields[i].name]=r.fields[i].init(t,n);return n}reconfigure(t){let r=new Vw(this.schema,t.plugins),n=r.fields,i=new hh(r);for(let s=0;s<n.length;s++){let o=n[s].name;i[o]=this.hasOwnProperty(o)?this[o]:n[s].init(t,i)}return i}toJSON(t){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),t&&typeof t=="object")for(let n in t){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[n],s=i.spec.state;s&&s.toJSON&&(r[n]=s.toJSON.call(i,this[i.key]))}return r}static fromJSON(t,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new Vw(t.schema,t.plugins),s=new hh(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Ua.fromJSON(t.schema,r.doc);else if(o.name=="selection")s.selection=we.fromJSON(s.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(s.storedMarks=r.storedMarks.map(t.schema.markFromJSON));else{if(n)for(let a in n){let l=n[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(r,a)){s[o.name]=c.fromJSON.call(l,t,r[a],s);return}}s[o.name]=o.init(t,s)}}),s}}function LP(e,t,r){for(let n in e){let i=e[n];i instanceof Function?i=i.bind(t):n=="handleDOMEvents"&&(i=LP(i,t,{})),r[n]=i}return r}class xr{constructor(t){this.spec=t,this.props={},t.props&&LP(t.props,this,this.props),this.key=t.key?t.key.key:OP("plugin")}getState(t){return t[this.key]}}const Ww=Object.create(null);function OP(e){return e in Ww?e+"$"+ ++Ww[e]:(Ww[e]=0,e+"$")}class vr{constructor(t="key"){this.key=OP(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}class Ii{constructor(t,r,n={}){this.match=t,this.match=t,this.handler=typeof r=="string"?Vit(r):r,this.undoable=n.undoable!==!1,this.inCode=n.inCode||!1,this.inCodeMark=n.inCodeMark!==!1}}function Vit(e){return function(t,r,n,i){let s=e;if(r[1]){let o=r[0].lastIndexOf(r[1]);s+=r[0].slice(o+r[1].length),n+=o;let a=n-i;a>0&&(s=r[0].slice(o-a,o)+s,n=i)}return t.tr.insertText(s,n,i)}}const Wit=(e,t)=>{let r=e.plugins;for(let n=0;n<r.length;n++){let i=r[n],s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){let o=e.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l--)o.step(a.steps[l].invert(a.docs[l]));if(s.text){let l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,e.schema.text(s.text,l))}else o.delete(s.from,s.to);t(o)}return!0}}return!1};new Ii(/--$/,"",{inCodeMark:!1});new Ii(/\.\.\.$/,"",{inCodeMark:!1});new Ii(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"",{inCodeMark:!1});new Ii(/"$/,"",{inCodeMark:!1});new Ii(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"",{inCodeMark:!1});new Ii(/'$/,"",{inCodeMark:!1});function L7(e,t,r=null,n){return new Ii(e,(i,s,o,a)=>{let l=r instanceof Function?r(s):r,c=i.tr.delete(o,a),h=c.doc.resolve(o),u=h.blockRange(),f=u&&A7(u,t,l);if(!f)return null;c.wrap(u,f);let d=c.doc.resolve(o-1).nodeBefore;return d&&d.type==t&&Ov(c.doc,o-1)&&(!n||n(s,d))&&c.join(o-1),c})}function O7(e,t,r=null){return new Ii(e,(n,i,s,o)=>{let a=n.doc.resolve(s),l=r instanceof Function?r(i):r;return a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),t)?n.tr.delete(s,o).setBlockType(s,s,t,l):null})}var Bi=(e=>(e.docTypeError="docTypeError",e.contextNotFound="contextNotFound",e.timerNotFound="timerNotFound",e.ctxCallOutOfScope="ctxCallOutOfScope",e.createNodeInParserFail="createNodeInParserFail",e.stackOverFlow="stackOverFlow",e.parserMatchError="parserMatchError",e.serializerMatchError="serializerMatchError",e.getAtomFromSchemaFail="getAtomFromSchemaFail",e.expectDomTypeError="expectDomTypeError",e.callCommandBeforeEditorView="callCommandBeforeEditorView",e.missingRootElement="missingRootElement",e.missingNodeInSchema="missingNodeInSchema",e.missingMarkInSchema="missingMarkInSchema",e.ctxNotBind="ctxNotBind",e.missingYjsDoc="missingYjsDoc",e))(Bi||{});class ss extends Error{constructor(t,r){super(r),this.name="MilkdownError",this.code=t}}const jit=(e,t)=>typeof t=="function"?"[Function]":t,Bv=e=>JSON.stringify(e,jit);function Uit(e){return new ss(Bi.docTypeError,`Doc type error, unsupported type: ${Bv(e)}`)}function Git(e){return new ss(Bi.contextNotFound,`Context "${e}" not found, do you forget to inject it?`)}function Kit(e){return new ss(Bi.timerNotFound,`Timer "${e}" not found, do you forget to record it?`)}function Rv(){return new ss(Bi.ctxCallOutOfScope,"Should not call a context out of the plugin.")}function Yit(e,t,r){const i=`Cannot create node for ${"name"in e?e.name:e}`,s=h=>{if(h==null)return"null";if(Array.isArray(h))return`[${h.map(s).join(", ")}]`;if(typeof h=="object")return"toJSON"in h&&typeof h.toJSON=="function"?JSON.stringify(h.toJSON()):"spec"in h?JSON.stringify(h.spec):JSON.stringify(h);if(typeof h=="string"||typeof h=="number"||typeof h=="boolean")return JSON.stringify(h);if(typeof h=="function")return`[Function: ${h.name||"anonymous"}]`;try{return String(h)}catch{return"[Unserializable]"}},o=["[Description]",i],a=["[Attributes]",t],l=["[Content]",(r??[]).map(h=>h?typeof h=="object"&&"type"in h?`${h}`:s(h):"null")],c=[o,a,l].reduce((h,[u,f])=>{const d=`${u}: ${s(f)}.`;return h.concat(d)},[]);return new ss(Bi.createNodeInParserFail,c.join(`
`))}function DP(){return new ss(Bi.stackOverFlow,"Stack over flow, cannot pop on an empty stack.")}function Xit(e){return new ss(Bi.parserMatchError,`Cannot match target parser for node: ${Bv(e)}.`)}function Jit(e){return new ss(Bi.serializerMatchError,`Cannot match target serializer for node: ${Bv(e)}.`)}function Zit(e,t){return new ss(Bi.getAtomFromSchemaFail,`Cannot get ${e}: ${t} from schema.`)}function co(e){return new ss(Bi.expectDomTypeError,`Expect to be a dom, but get: ${Bv(e)}.`)}function jw(){return new ss(Bi.callCommandBeforeEditorView,"You're trying to call a command before editor view initialized, make sure to get commandManager from ctx after editor view has been initialized")}function Qit(e){return new ss(Bi.missingNodeInSchema,`Missing node in schema, milkdown cannot find "${e}" in schema.`)}function tst(e){return new ss(Bi.missingMarkInSchema,`Missing mark in schema, milkdown cannot find "${e}" in schema.`)}const lc=typeof navigator<"u"?navigator:null,oA=typeof document<"u"?document:null,Sc=lc&&lc.userAgent||"",Dk=/Edge\/(\d+)/.exec(Sc),IP=/MSIE \d/.exec(Sc),Ik=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Sc),Pv=!!(IP||Ik||Dk),est=IP?document.documentMode:Ik?+Ik[1]:Dk?+Dk[1]:0,BP=!Pv&&/gecko\/(\d+)/i.test(Sc),rst=BP&&+(/Firefox\/(\d+)/.exec(Sc)||[0,0])[1],Bk=!Pv&&/Chrome\/(\d+)/.exec(Sc),nst=!!Bk,ist=Bk?+Bk[1]:0,RP=!Pv&&!!lc&&/Apple Computer/.test(lc.vendor),PP=RP&&(/Mobile\/\w+/.test(Sc)||!!lc&&lc.maxTouchPoints>2),sst=PP||(lc?/Mac/.test(lc.platform):!1),ost=/Android \d/.test(Sc),NP=!!oA&&"webkitFontSmoothing"in oA.documentElement.style,ast=NP?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;var ky=Object.freeze({__proto__:null,android:ost,chrome:nst,chrome_version:ist,gecko:BP,gecko_version:rst,ie:Pv,ie_version:est,ios:PP,mac:sst,safari:RP,webkit:NP,webkit_version:ast});function Uw(e,t,r,n,i,s){if(e.composing)return!1;const o=e.state,a=o.doc.resolve(t);if(a.parent.type.spec.code)return!1;const l=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,void 0,"")+n;for(let c of i){const h=c,u=h.match.exec(l),f=u&&u[0]&&h.handler(o,u,t-(u[0].length-n.length),r);if(f)return h.undoable!==!1&&f.setMeta(s,{transform:f,from:t,to:r,text:n}),e.dispatch(f),!0}return!1}const lst=new vr("MILKDOWN_CUSTOM_INPUTRULES");function cst({rules:e}){const t=new xr({key:lst,isInputRules:!0,state:{init(){return null},apply(r,n){const i=r.getMeta(this);return i||(r.selectionSet||r.docChanged?null:n)}},props:{handleTextInput(r,n,i,s){return Uw(r,n,i,s,e,t)},handleDOMEvents:{compositionend:r=>(setTimeout(()=>{const{$cursor:n}=r.state.selection;n&&Uw(r,n.pos,n.pos,"",e,t)}),!1)},handleKeyDown(r,n){if(n.key!=="Enter")return!1;const{$cursor:i}=r.state.selection;return i?Uw(r,i.pos,i.pos,`
`,e,t):!1}}});return t}function o1(e,t,r={}){return new Ii(e,(n,i,s,o)=>{var a,l,c,h;const{tr:u}=n,f=i.length;let d=i[f-1],p=i[0],m=[],g=o;const y={group:d,fullMatch:p,start:s,end:o},b=(a=r.updateCaptured)==null?void 0:a.call(r,y);if(Object.assign(y,b),{group:d,fullMatch:p,start:s,end:o}=y,p===null||(d==null?void 0:d.trim())==="")return null;if(d){const x=p.search(/\S/),T=s+p.indexOf(d),S=T+d.length;m=(l=u.storedMarks)!=null?l:[],S<o&&u.delete(S,o),T>s&&u.delete(s+x,T),g=s+x+d.length;const w=(c=r.getAttr)==null?void 0:c.call(r,i);u.addMark(s,g,t.create(w)),u.setStoredMarks(m),(h=r.beforeDispatch)==null||h.call(r,{match:i,start:s,end:o,tr:u})}return u})}function hst(e,t,r={}){return new Ii(e,(n,i,s,o)=>{var a,l,c;const{tr:h}=n;let u=i[1],f=i[0];const d={group:u,fullMatch:f,start:s,end:o},p=(a=r.updateCaptured)==null?void 0:a.call(r,d);if(Object.assign(d,p),{group:u,fullMatch:f,start:s,end:o}=d,f===null||!u||u.trim()==="")return null;const m=(l=r.getAttr)==null?void 0:l.call(r,i),g=t.createAndFill(m);return g&&(h.replaceRangeWith(t.isBlock?h.doc.resolve(s).before():s,o,g),(c=r.beforeDispatch)==null||c.call(r,{match:[f,u??""],start:s,end:o,tr:h})),h})}var ust=Object.defineProperty,fst=Object.defineProperties,dst=Object.getOwnPropertyDescriptors,aA=Object.getOwnPropertySymbols,pst=Object.prototype.hasOwnProperty,mst=Object.prototype.propertyIsEnumerable,lA=(e,t,r)=>t in e?ust(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gst=(e,t)=>{for(var r in t||(t={}))pst.call(t,r)&&lA(e,r,t[r]);if(aA)for(var r of aA(t))mst.call(t,r)&&lA(e,r,t[r]);return e},yst=(e,t)=>fst(e,dst(t));function cA(e=0,t=0,r=0){return Math.min(Math.max(e,t),r)}function Nv(e,t,r){const i=e.state.doc.content.size,s=cA(t,0,i),o=cA(r,0,i),a=e.coordsAtPos(s),l=e.coordsAtPos(o,-1),c=Math.min(a.top,l.top),h=Math.max(a.bottom,l.bottom),u=Math.min(a.left,l.left),f=Math.max(a.right,l.right),d=f-u,p=h-c,y={top:c,bottom:h,left:u,right:f,width:d,height:p,x:u,y:c};return yst(gst({},y),{toJSON:()=>y})}function FP(e){return Object.assign(Object.create(e),e).setTime(Date.now())}function bst(e,t){return Array.isArray(e)&&e.includes(t.type)||t.type===e}function xst(e){if(e.content.childCount===1){const t=e.content.firstChild;if((t==null?void 0:t.type.name)==="text"&&t.marks.length===0)return t;if((t==null?void 0:t.type.name)==="paragraph"&&t.childCount===1){const r=t.firstChild;if((r==null?void 0:r.type.name)==="text"&&r.marks.length===0)return r}}return!1}function jo(e){return t=>{for(let r=t.depth;r>0;r-=1){const n=t.node(r);if(e(n)){const i=t.before(r),s=t.after(r);return{from:i,to:s,node:n}}}}}function vst(e,t){return jo(r=>r.type===t)(e)}function wst(e,t){const r=t.nodes[e];if(!r)throw Zit("node",e);return r}function $P(e){return t=>{for(let r=t.depth;r>0;r--){const n=t.node(r);if(e(n))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:n}}}}function kst(e){return t=>$P(e)(t.$from)}function Cst(e,t){if(!(e instanceof ie))return;const{node:r,$from:n}=e;if(bst(t,r))return{node:r,pos:n.pos,start:n.start(n.depth),depth:n.depth}}const zP=(e,t)=>{const{selection:r,doc:n}=e;if(r instanceof ie)return{hasNode:r.node.type===t,pos:r.from,target:r.node};const{from:i,to:s}=r;let o=!1,a=-1,l=null;return n.nodesBetween(i,s,(c,h)=>l?!1:c.type===t?(o=!0,a=h,l=c,!1):!0),{hasNode:o,pos:a,target:l}};class HP{constructor(){this.sliceMap=new Map,this.get=t=>{const r=typeof t=="string"?[...this.sliceMap.values()].find(n=>n.type.name===t):this.sliceMap.get(t.id);if(!r){const n=typeof t=="string"?t:t.name;throw Git(n)}return r},this.remove=t=>{const r=typeof t=="string"?[...this.sliceMap.values()].find(n=>n.type.name===t):this.sliceMap.get(t.id);r&&this.sliceMap.delete(r.type.id)},this.has=t=>typeof t=="string"?[...this.sliceMap.values()].some(r=>r.type.name===t):this.sliceMap.has(t.id)}}var Fs,La,_f;class Sst{constructor(t,r,n){kt(this,Fs);kt(this,La);kt(this,_f);nt(this,Fs,[]),nt(this,_f,()=>{V(this,Fs).forEach(i=>i(V(this,La)))}),this.set=i=>{nt(this,La,i),V(this,_f).call(this)},this.get=()=>V(this,La),this.update=i=>{nt(this,La,i(V(this,La))),V(this,_f).call(this)},this.type=n,nt(this,La,r),t.set(n.id,this)}on(t){return V(this,Fs).push(t),()=>{nt(this,Fs,V(this,Fs).filter(r=>r!==t))}}once(t){const r=this.on(n=>{t(n),r()});return r}off(t){nt(this,Fs,V(this,Fs).filter(r=>r!==t))}offAll(){nt(this,Fs,[])}}Fs=new WeakMap,La=new WeakMap,_f=new WeakMap;class Tst{constructor(t,r){this.id=Symbol(`Context-${r}`),this.name=r,this._defaultValue=t,this._typeInfo=()=>{throw Rv()}}create(t,r=this._defaultValue){return new Sst(t,r,this)}}const Ie=(e,t)=>new Tst(e,t);var Mg,Ag,Eg,wh,Mf,ql,Af,Ef,Lf;class _st{constructor(t,r,n){kt(this,Mg);kt(this,Ag);kt(this,Eg);kt(this,wh);kt(this,Mf);kt(this,ql);kt(this,Af);kt(this,Ef);kt(this,Lf);nt(this,wh,new Set),nt(this,Mf,new Set),nt(this,ql,new Map),nt(this,Af,new Map),this.read=()=>({metadata:V(this,Mg),injectedSlices:[...V(this,wh)].map(i=>({name:typeof i=="string"?i:i.name,value:V(this,Ef).call(this,i)})),consumedSlices:[...V(this,Mf)].map(i=>({name:typeof i=="string"?i:i.name,value:V(this,Ef).call(this,i)})),recordedTimers:[...V(this,ql)].map(([i,{duration:s}])=>({name:i.name,duration:s,status:V(this,Lf).call(this,i)})),waitTimers:[...V(this,Af)].map(([i,{duration:s}])=>({name:i.name,duration:s,status:V(this,Lf).call(this,i)}))}),this.onRecord=i=>{V(this,ql).set(i,{start:Date.now(),duration:0})},this.onClear=i=>{V(this,ql).delete(i)},this.onDone=i=>{const s=V(this,ql).get(i);s&&(s.duration=Date.now()-s.start)},this.onWait=(i,s)=>{const o=Date.now();s.finally(()=>{V(this,Af).set(i,{duration:Date.now()-o})}).catch(console.error)},this.onInject=i=>{V(this,wh).add(i)},this.onRemove=i=>{V(this,wh).delete(i)},this.onUse=i=>{V(this,Mf).add(i)},nt(this,Ef,i=>V(this,Ag).get(i).get()),nt(this,Lf,i=>V(this,Eg).get(i).status),nt(this,Ag,t),nt(this,Eg,r),nt(this,Mg,n)}}Mg=new WeakMap,Ag=new WeakMap,Eg=new WeakMap,wh=new WeakMap,Mf=new WeakMap,ql=new WeakMap,Af=new WeakMap,Ef=new WeakMap,Lf=new WeakMap;var Oa,Da,Lg,us;const RT=class RT{constructor(t,r,n){kt(this,Oa);kt(this,Da);kt(this,Lg);kt(this,us);this.produce=i=>i&&Object.keys(i).length?new RT(V(this,Oa),V(this,Da),{...i}):this,this.inject=(i,s)=>{var a;const o=i.create(V(this,Oa).sliceMap);return s!=null&&o.set(s),(a=V(this,us))==null||a.onInject(i),this},this.remove=i=>{var s;return V(this,Oa).remove(i),(s=V(this,us))==null||s.onRemove(i),this},this.record=i=>{var s;return i.create(V(this,Da).store),(s=V(this,us))==null||s.onRecord(i),this},this.clearTimer=i=>{var s;return V(this,Da).remove(i),(s=V(this,us))==null||s.onClear(i),this},this.isInjected=i=>V(this,Oa).has(i),this.isRecorded=i=>V(this,Da).has(i),this.use=i=>{var s;return(s=V(this,us))==null||s.onUse(i),V(this,Oa).get(i)},this.get=i=>this.use(i).get(),this.set=(i,s)=>this.use(i).set(s),this.update=(i,s)=>this.use(i).update(s),this.timer=i=>V(this,Da).get(i),this.done=i=>{var s;this.timer(i).done(),(s=V(this,us))==null||s.onDone(i)},this.wait=i=>{var o;const s=this.timer(i).start();return(o=V(this,us))==null||o.onWait(i,s),s},this.waitTimers=async i=>{await Promise.all(this.get(i).map(s=>this.wait(s)))},nt(this,Oa,t),nt(this,Da,r),nt(this,Lg,n),n&&nt(this,us,new _st(t,r,n))}get meta(){return V(this,Lg)}get inspector(){return V(this,us)}};Oa=new WeakMap,Da=new WeakMap,Lg=new WeakMap,us=new WeakMap;let Rk=RT;class Mst{constructor(){this.store=new Map,this.get=t=>{const r=this.store.get(t.id);if(!r)throw Kit(t.name);return r},this.remove=t=>{this.store.delete(t.id)},this.has=t=>this.store.has(t.id)}}var Of,Vl,Df,Ia,If,Og,MI;let Ast=(MI=class{constructor(t,r){kt(this,Of);kt(this,Vl);kt(this,Df);kt(this,Ia);kt(this,If);kt(this,Og);nt(this,Of,null),nt(this,Vl,null),nt(this,Ia,"pending"),this.start=()=>(V(this,Of)??nt(this,Of,new Promise((n,i)=>{nt(this,Vl,s=>{s instanceof CustomEvent&&s.detail.id===V(this,Df)&&(nt(this,Ia,"resolved"),V(this,If).call(this),s.stopImmediatePropagation(),n())}),V(this,Og).call(this,()=>{V(this,Ia)==="pending"&&nt(this,Ia,"rejected"),V(this,If).call(this),i(new Error(`Timing ${this.type.name} timeout.`))}),nt(this,Ia,"pending"),addEventListener(this.type.name,V(this,Vl))})),V(this,Of)),this.done=()=>{const n=new CustomEvent(this.type.name,{detail:{id:V(this,Df)}});dispatchEvent(n)},nt(this,If,()=>{V(this,Vl)&&removeEventListener(this.type.name,V(this,Vl))}),nt(this,Og,n=>{setTimeout(()=>{n()},this.type.timeout)}),nt(this,Df,Symbol(r.name)),this.type=r,t.set(r.id,this)}get status(){return V(this,Ia)}},Of=new WeakMap,Vl=new WeakMap,Df=new WeakMap,Ia=new WeakMap,If=new WeakMap,Og=new WeakMap,MI);class Est{constructor(t,r=3e3){this.create=n=>new Ast(n,this),this.id=Symbol(`Timer-${t}`),this.name=t,this.timeout=r}}const na=(e,t=3e3)=>new Est(e,t),Lst={};function D7(e,t){const r=Lst,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,i=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return qP(e,n,i)}function qP(e,t,r){if(Ost(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return hA(e.children,t,r)}return Array.isArray(e)?hA(e,t,r):""}function hA(e,t,r){const n=[];let i=-1;for(;++i<e.length;)n[i]=qP(e[i],t,r);return n.join("")}function Ost(e){return!!(e&&typeof e=="object")}const uA=document.createElement("i");function I7(e){const t="&"+e+";";uA.innerHTML=t;const r=uA.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}function Zi(e,t,r,n){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,r=r>0?r:0,n.length<1e4)o=Array.from(n),o.unshift(t,r),e.splice(...o);else for(r&&e.splice(t,r);s<n.length;)o=n.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function ms(e,t){return e.length>0?(Zi(e,e.length,0,t),e):t}const fA={}.hasOwnProperty;function VP(e){const t={};let r=-1;for(;++r<e.length;)Dst(t,e[r]);return t}function Dst(e,t){let r;for(r in t){const i=(fA.call(e,r)?e[r]:void 0)||(e[r]={}),s=t[r];let o;if(s)for(o in s){fA.call(i,o)||(i[o]=[]);const a=s[o];Ist(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Ist(e,t){let r=-1;const n=[];for(;++r<t.length;)(t[r].add==="after"?e:n).push(t[r]);Zi(e,0,0,n)}function WP(e,t){const r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"":String.fromCodePoint(r)}function Ys(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Qn=Tc(/[A-Za-z]/),Ai=Tc(/[\dA-Za-z]/),Bst=Tc(/[#-'*+\--9=?A-Z^-~]/);function Kb(e){return e!==null&&(e<32||e===127)}const Pk=Tc(/\d/),Rst=Tc(/[\dA-Fa-f]/),Pst=Tc(/[!-/:-@[-`{-~]/);function Jt(e){return e!==null&&e<-2}function ar(e){return e!==null&&(e<0||e===32)}function Re(e){return e===-2||e===-1||e===32}const Fv=Tc(new RegExp("\\p{P}|\\p{S}","u")),iu=Tc(/\s/);function Tc(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function Oe(e,t,r,n){const i=n?n-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Re(l)?(e.enter(r),a(l)):t(l)}function a(l){return Re(l)&&s++<i?(e.consume(l),a):(e.exit(r),t(l))}}const Nst={tokenize:Fst};function Fst(e){const t=e.attempt(this.parser.constructs.contentInitial,n,i);let r;return t;function n(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Oe(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const l=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=l),r=l,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Jt(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const $st={tokenize:zst},dA={tokenize:Hst};function zst(e){const t=this,r=[];let n=0,i,s,o;return a;function a(x){if(n<r.length){const T=r[n];return t.containerState=T[1],e.attempt(T[0].continuation,l,c)(x)}return c(x)}function l(x){if(n++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&b();const T=t.events.length;let S=T,w;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){w=t.events[S][1].end;break}y(n);let _=T;for(;_<t.events.length;)t.events[_][1].end={...w},_++;return Zi(t.events,S+1,0,t.events.slice(T)),t.events.length=_,c(x)}return a(x)}function c(x){if(n===r.length){if(!i)return f(x);if(i.currentConstruct&&i.currentConstruct.concrete)return p(x);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(dA,h,u)(x)}function h(x){return i&&b(),y(n),f(x)}function u(x){return t.parser.lazy[t.now().line]=n!==r.length,o=t.now().offset,p(x)}function f(x){return t.containerState={},e.attempt(dA,d,p)(x)}function d(x){return n++,r.push([t.currentConstruct,t.containerState]),f(x)}function p(x){if(x===null){i&&b(),y(0),e.consume(x);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),m(x)}function m(x){if(x===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(x);return}return Jt(x)?(e.consume(x),g(e.exit("chunkFlow")),n=0,t.interrupt=void 0,a):(e.consume(x),m)}function g(x,T){const S=t.sliceStream(x);if(T&&S.push(null),x.previous=s,s&&(s.next=x),s=x,i.defineSkip(x.start),i.write(S),t.parser.lazy[x.start.line]){let w=i.events.length;for(;w--;)if(i.events[w][1].start.offset<o&&(!i.events[w][1].end||i.events[w][1].end.offset>o))return;const _=t.events.length;let I=_,N,L;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){if(N){L=t.events[I][1].end;break}N=!0}for(y(n),w=_;w<t.events.length;)t.events[w][1].end={...L},w++;Zi(t.events,I+1,0,t.events.slice(_)),t.events.length=w}}function y(x){let T=r.length;for(;T-- >x;){const S=r[T];t.containerState=S[1],S[0].exit.call(t,e)}r.length=x}function b(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Hst(e,t,r){return Oe(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function md(e){if(e===null||ar(e)||iu(e))return 1;if(Fv(e))return 2}function $v(e,t,r){const n=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!n.includes(s)&&(t=s(t,r),n.push(s))}return t}const Nk={name:"attention",resolveAll:qst,tokenize:Vst};function qst(e,t){let r=-1,n,i,s,o,a,l,c,h;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(n=r;n--;)if(e[n][0]==="exit"&&e[n][1].type==="attentionSequence"&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[n][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;l=e[n][1].end.offset-e[n][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const u={...e[n][1].end},f={...e[r][1].start};pA(u,-l),pA(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:u,end:{...e[n][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:f},s={type:l>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[r][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},e[n][1].end={...o.start},e[r][1].start={...a.end},c=[],e[n][1].end.offset-e[n][1].start.offset&&(c=ms(c,[["enter",e[n][1],t],["exit",e[n][1],t]])),c=ms(c,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),c=ms(c,$v(t.parser.constructs.insideSpan.null,e.slice(n+1,r),t)),c=ms(c,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[r][1].end.offset-e[r][1].start.offset?(h=2,c=ms(c,[["enter",e[r][1],t],["exit",e[r][1],t]])):h=0,Zi(e,n-1,r-n+3,c),r=n+c.length-h-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function Vst(e,t){const r=this.parser.constructs.attentionMarkers.null,n=this.previous,i=md(n);let s;return o;function o(l){return s=l,e.enter("attentionSequence"),a(l)}function a(l){if(l===s)return e.consume(l),a;const c=e.exit("attentionSequence"),h=md(l),u=!h||h===2&&i||r.includes(l),f=!i||i===2&&h||r.includes(n);return c._open=!!(s===42?u:u&&(i||!f)),c._close=!!(s===42?f:f&&(h||!u)),t(l)}}function pA(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Wst={name:"autolink",tokenize:jst};function jst(e,t,r){let n=0;return i;function i(d){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(d){return Qn(d)?(e.consume(d),o):d===64?r(d):c(d)}function o(d){return d===43||d===45||d===46||Ai(d)?(n=1,a(d)):c(d)}function a(d){return d===58?(e.consume(d),n=0,l):(d===43||d===45||d===46||Ai(d))&&n++<32?(e.consume(d),a):(n=0,c(d))}function l(d){return d===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.exit("autolink"),t):d===null||d===32||d===60||Kb(d)?r(d):(e.consume(d),l)}function c(d){return d===64?(e.consume(d),h):Bst(d)?(e.consume(d),c):r(d)}function h(d){return Ai(d)?u(d):r(d)}function u(d){return d===46?(e.consume(d),n=0,h):d===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.exit("autolink"),t):f(d)}function f(d){if((d===45||Ai(d))&&n++<63){const p=d===45?f:u;return e.consume(d),p}return r(d)}}const a1={partial:!0,tokenize:Ust};function Ust(e,t,r){return n;function n(s){return Re(s)?Oe(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Jt(s)?t(s):r(s)}}const jP={continuation:{tokenize:Kst},exit:Yst,name:"blockQuote",tokenize:Gst};function Gst(e,t,r){const n=this;return i;function i(o){if(o===62){const a=n.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return r(o)}function s(o){return Re(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Kst(e,t,r){const n=this;return i;function i(o){return Re(o)?Oe(e,s,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(jP,t,r)(o)}}function Yst(e){e.exit("blockQuote")}const UP={name:"characterEscape",tokenize:Xst};function Xst(e,t,r){return n;function n(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return Pst(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(s)}}const GP={name:"characterReference",tokenize:Jst};function Jst(e,t,r){const n=this;let i=0,s,o;return a;function a(u){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(u),e.exit("characterReferenceMarker"),l}function l(u){return u===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(u),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),s=31,o=Ai,h(u))}function c(u){return u===88||u===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(u),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=Rst,h):(e.enter("characterReferenceValue"),s=7,o=Pk,h(u))}function h(u){if(u===59&&i){const f=e.exit("characterReferenceValue");return o===Ai&&!I7(n.sliceSerialize(f))?r(u):(e.enter("characterReferenceMarker"),e.consume(u),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(u)&&i++<s?(e.consume(u),h):r(u)}}const mA={partial:!0,tokenize:Qst},gA={concrete:!0,name:"codeFenced",tokenize:Zst};function Zst(e,t,r){const n=this,i={partial:!0,tokenize:S};let s=0,o=0,a;return l;function l(w){return c(w)}function c(w){const _=n.events[n.events.length-1];return s=_&&_[1].type==="linePrefix"?_[2].sliceSerialize(_[1],!0).length:0,a=w,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),h(w)}function h(w){return w===a?(o++,e.consume(w),h):o<3?r(w):(e.exit("codeFencedFenceSequence"),Re(w)?Oe(e,u,"whitespace")(w):u(w))}function u(w){return w===null||Jt(w)?(e.exit("codeFencedFence"),n.interrupt?t(w):e.check(mA,m,T)(w)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(w))}function f(w){return w===null||Jt(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),u(w)):Re(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Oe(e,d,"whitespace")(w)):w===96&&w===a?r(w):(e.consume(w),f)}function d(w){return w===null||Jt(w)?u(w):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(w))}function p(w){return w===null||Jt(w)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),u(w)):w===96&&w===a?r(w):(e.consume(w),p)}function m(w){return e.attempt(i,T,g)(w)}function g(w){return e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),y}function y(w){return s>0&&Re(w)?Oe(e,b,"linePrefix",s+1)(w):b(w)}function b(w){return w===null||Jt(w)?e.check(mA,m,T)(w):(e.enter("codeFlowValue"),x(w))}function x(w){return w===null||Jt(w)?(e.exit("codeFlowValue"),b(w)):(e.consume(w),x)}function T(w){return e.exit("codeFenced"),t(w)}function S(w,_,I){let N=0;return L;function L($){return w.enter("lineEnding"),w.consume($),w.exit("lineEnding"),D}function D($){return w.enter("codeFencedFence"),Re($)?Oe(w,P,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):P($)}function P($){return $===a?(w.enter("codeFencedFenceSequence"),K($)):I($)}function K($){return $===a?(N++,w.consume($),K):N>=o?(w.exit("codeFencedFenceSequence"),Re($)?Oe(w,z,"whitespace")($):z($)):I($)}function z($){return $===null||Jt($)?(w.exit("codeFencedFence"),_($)):I($)}}}function Qst(e,t,r){const n=this;return i;function i(o){return o===null?r(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return n.parser.lazy[n.now().line]?r(o):t(o)}}const Gw={name:"codeIndented",tokenize:eot},tot={partial:!0,tokenize:rot};function eot(e,t,r){const n=this;return i;function i(c){return e.enter("codeIndented"),Oe(e,s,"linePrefix",5)(c)}function s(c){const h=n.events[n.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?o(c):r(c)}function o(c){return c===null?l(c):Jt(c)?e.attempt(tot,o,l)(c):(e.enter("codeFlowValue"),a(c))}function a(c){return c===null||Jt(c)?(e.exit("codeFlowValue"),o(c)):(e.consume(c),a)}function l(c){return e.exit("codeIndented"),t(c)}}function rot(e,t,r){const n=this;return i;function i(o){return n.parser.lazy[n.now().line]?r(o):Jt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Oe(e,s,"linePrefix",5)(o)}function s(o){const a=n.events[n.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Jt(o)?i(o):r(o)}}const not={name:"codeText",previous:sot,resolve:iot,tokenize:oot};function iot(e){let t=e.length-4,r=3,n,i;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(n=r;++n<t;)if(e[n][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(n=r-1,t++;++n<=t;)i===void 0?n!==t&&e[n][1].type!=="lineEnding"&&(i=n):(n===t||e[n][1].type==="lineEnding")&&(e[i][1].type="codeTextData",n!==i+2&&(e[i][1].end=e[n-1][1].end,e.splice(i+2,n-i-2),t-=n-i-2,n=i+2),i=void 0);return e}function sot(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function oot(e,t,r){let n=0,i,s;return o;function o(u){return e.enter("codeText"),e.enter("codeTextSequence"),a(u)}function a(u){return u===96?(e.consume(u),n++,a):(e.exit("codeTextSequence"),l(u))}function l(u){return u===null?r(u):u===32?(e.enter("space"),e.consume(u),e.exit("space"),l):u===96?(s=e.enter("codeTextSequence"),i=0,h(u)):Jt(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),l):(e.enter("codeTextData"),c(u))}function c(u){return u===null||u===32||u===96||Jt(u)?(e.exit("codeTextData"),l(u)):(e.consume(u),c)}function h(u){return u===96?(e.consume(u),i++,h):i===n?(e.exit("codeTextSequence"),e.exit("codeText"),t(u)):(s.type="codeTextData",c(u))}}class aot{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,r){const n=r??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(t,n):t>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(t,r,n){const i=r||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return n&&T0(this.left,n),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),T0(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),T0(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const r=this.left.splice(t,Number.POSITIVE_INFINITY);T0(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);T0(this.left,r.reverse())}}}function T0(e,t){let r=0;if(t.length<1e4)e.push(...t);else for(;r<t.length;)e.push(...t.slice(r,r+1e4)),r+=1e4}function KP(e){const t={};let r=-1,n,i,s,o,a,l,c;const h=new aot(e);for(;++r<h.length;){for(;r in t;)r=t[r];if(n=h.get(r),r&&n[1].type==="chunkFlow"&&h.get(r-1)[1].type==="listItemPrefix"&&(l=n[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(n[0]==="enter")n[1].contentType&&(Object.assign(t,lot(h,r)),r=t[r],c=!0);else if(n[1]._container){for(s=r,i=void 0;s--;)if(o=h.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(h.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(n[1].end={...h.get(i)[1].start},a=h.slice(i,r),a.unshift(n),h.splice(i,r-i+1,a))}}return Zi(e,0,Number.POSITIVE_INFINITY,h.slice(0)),!c}function lot(e,t){const r=e.get(t)[1],n=e.get(t)[2];let i=t-1;const s=[];let o=r._tokenizer;o||(o=n.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let h,u,f=-1,d=r,p=0,m=0;const g=[m];for(;d;){for(;e.get(++i)[1]!==d;);s.push(i),d._tokenizer||(h=n.sliceStream(d),d.next||h.push(null),u&&o.defineSkip(d.start),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(h),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),u=d,d=d.next}for(d=r;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(m=f+1,g.push(m),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(o.events=[],d?(d._tokenizer=void 0,d.previous=void 0):g.pop(),f=g.length;f--;){const y=a.slice(g[f],g[f+1]),b=s.pop();l.push([b,b+y.length-1]),e.splice(b,2,y)}for(l.reverse(),f=-1;++f<l.length;)c[p+l[f][0]]=p+l[f][1],p+=l[f][1]-l[f][0]-1;return c}const cot={resolve:uot,tokenize:fot},hot={partial:!0,tokenize:dot};function uot(e){return KP(e),e}function fot(e,t){let r;return n;function n(a){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Jt(a)?e.check(hot,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,i}}function dot(e,t,r){const n=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Oe(e,s,"linePrefix")}function s(o){if(o===null||Jt(o))return r(o);const a=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(n.parser.constructs.flow,r,t)(o)}}function YP(e,t,r,n,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let h=0;return u;function u(y){return y===60?(e.enter(n),e.enter(i),e.enter(s),e.consume(y),e.exit(s),f):y===null||y===32||y===41||Kb(y)?r(y):(e.enter(n),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function f(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(n),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),d(y))}function d(y){return y===62?(e.exit("chunkString"),e.exit(a),f(y)):y===null||y===60||Jt(y)?r(y):(e.consume(y),y===92?p:d)}function p(y){return y===60||y===62||y===92?(e.consume(y),d):d(y)}function m(y){return!h&&(y===null||y===41||ar(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(n),t(y)):h<c&&y===40?(e.consume(y),h++,m):y===41?(e.consume(y),h--,m):y===null||y===32||y===40||Kb(y)?r(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function XP(e,t,r,n,i,s){const o=this;let a=0,l;return c;function c(d){return e.enter(n),e.enter(i),e.consume(d),e.exit(i),e.enter(s),h}function h(d){return a>999||d===null||d===91||d===93&&!l||d===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?r(d):d===93?(e.exit(s),e.enter(i),e.consume(d),e.exit(i),e.exit(n),t):Jt(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),u(d))}function u(d){return d===null||d===91||d===93||Jt(d)||a++>999?(e.exit("chunkString"),h(d)):(e.consume(d),l||(l=!Re(d)),d===92?f:u)}function f(d){return d===91||d===92||d===93?(e.consume(d),a++,u):u(d)}}function JP(e,t,r,n,i,s){let o;return a;function a(f){return f===34||f===39||f===40?(e.enter(n),e.enter(i),e.consume(f),e.exit(i),o=f===40?41:f,l):r(f)}function l(f){return f===o?(e.enter(i),e.consume(f),e.exit(i),e.exit(n),t):(e.enter(s),c(f))}function c(f){return f===o?(e.exit(s),l(o)):f===null?r(f):Jt(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),Oe(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===o||f===null||Jt(f)?(e.exit("chunkString"),c(f)):(e.consume(f),f===92?u:h)}function u(f){return f===o||f===92?(e.consume(f),h):h(f)}}function Gp(e,t){let r;return n;function n(i){return Jt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),r=!0,n):Re(i)?Oe(e,n,r?"linePrefix":"lineSuffix")(i):t(i)}}const pot={name:"definition",tokenize:got},mot={partial:!0,tokenize:yot};function got(e,t,r){const n=this;let i;return s;function s(d){return e.enter("definition"),o(d)}function o(d){return XP.call(n,e,a,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(d)}function a(d){return i=Ys(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),d===58?(e.enter("definitionMarker"),e.consume(d),e.exit("definitionMarker"),l):r(d)}function l(d){return ar(d)?Gp(e,c)(d):c(d)}function c(d){return YP(e,h,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(d)}function h(d){return e.attempt(mot,u,u)(d)}function u(d){return Re(d)?Oe(e,f,"whitespace")(d):f(d)}function f(d){return d===null||Jt(d)?(e.exit("definition"),n.parser.defined.push(i),t(d)):r(d)}}function yot(e,t,r){return n;function n(a){return ar(a)?Gp(e,i)(a):r(a)}function i(a){return JP(e,s,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Re(a)?Oe(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Jt(a)?t(a):r(a)}}const bot={name:"hardBreakEscape",tokenize:xot};function xot(e,t,r){return n;function n(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Jt(s)?(e.exit("hardBreakEscape"),t(s)):r(s)}}const vot={name:"headingAtx",resolve:wot,tokenize:kot};function wot(e,t){let r=e.length-2,n=3,i,s;return e[n][1].type==="whitespace"&&(n+=2),r-2>n&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(n===r-1||r-4>n&&e[r-2][1].type==="whitespace")&&(r-=n+1===r?2:4),r>n&&(i={type:"atxHeadingText",start:e[n][1].start,end:e[r][1].end},s={type:"chunkText",start:e[n][1].start,end:e[r][1].end,contentType:"text"},Zi(e,n,r-n+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function kot(e,t,r){let n=0;return i;function i(h){return e.enter("atxHeading"),s(h)}function s(h){return e.enter("atxHeadingSequence"),o(h)}function o(h){return h===35&&n++<6?(e.consume(h),o):h===null||ar(h)?(e.exit("atxHeadingSequence"),a(h)):r(h)}function a(h){return h===35?(e.enter("atxHeadingSequence"),l(h)):h===null||Jt(h)?(e.exit("atxHeading"),t(h)):Re(h)?Oe(e,a,"whitespace")(h):(e.enter("atxHeadingText"),c(h))}function l(h){return h===35?(e.consume(h),l):(e.exit("atxHeadingSequence"),a(h))}function c(h){return h===null||h===35||ar(h)?(e.exit("atxHeadingText"),a(h)):(e.consume(h),c)}}const Cot=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],yA=["pre","script","style","textarea"],Sot={concrete:!0,name:"htmlFlow",resolveTo:Mot,tokenize:Aot},Tot={partial:!0,tokenize:Lot},_ot={partial:!0,tokenize:Eot};function Mot(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Aot(e,t,r){const n=this;let i,s,o,a,l;return c;function c(O){return h(O)}function h(O){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(O),u}function u(O){return O===33?(e.consume(O),f):O===47?(e.consume(O),s=!0,m):O===63?(e.consume(O),i=3,n.interrupt?t:E):Qn(O)?(e.consume(O),o=String.fromCharCode(O),g):r(O)}function f(O){return O===45?(e.consume(O),i=2,d):O===91?(e.consume(O),i=5,a=0,p):Qn(O)?(e.consume(O),i=4,n.interrupt?t:E):r(O)}function d(O){return O===45?(e.consume(O),n.interrupt?t:E):r(O)}function p(O){const te="CDATA[";return O===te.charCodeAt(a++)?(e.consume(O),a===te.length?n.interrupt?t:P:p):r(O)}function m(O){return Qn(O)?(e.consume(O),o=String.fromCharCode(O),g):r(O)}function g(O){if(O===null||O===47||O===62||ar(O)){const te=O===47,Ht=o.toLowerCase();return!te&&!s&&yA.includes(Ht)?(i=1,n.interrupt?t(O):P(O)):Cot.includes(o.toLowerCase())?(i=6,te?(e.consume(O),y):n.interrupt?t(O):P(O)):(i=7,n.interrupt&&!n.parser.lazy[n.now().line]?r(O):s?b(O):x(O))}return O===45||Ai(O)?(e.consume(O),o+=String.fromCharCode(O),g):r(O)}function y(O){return O===62?(e.consume(O),n.interrupt?t:P):r(O)}function b(O){return Re(O)?(e.consume(O),b):L(O)}function x(O){return O===47?(e.consume(O),L):O===58||O===95||Qn(O)?(e.consume(O),T):Re(O)?(e.consume(O),x):L(O)}function T(O){return O===45||O===46||O===58||O===95||Ai(O)?(e.consume(O),T):S(O)}function S(O){return O===61?(e.consume(O),w):Re(O)?(e.consume(O),S):x(O)}function w(O){return O===null||O===60||O===61||O===62||O===96?r(O):O===34||O===39?(e.consume(O),l=O,_):Re(O)?(e.consume(O),w):I(O)}function _(O){return O===l?(e.consume(O),l=null,N):O===null||Jt(O)?r(O):(e.consume(O),_)}function I(O){return O===null||O===34||O===39||O===47||O===60||O===61||O===62||O===96||ar(O)?S(O):(e.consume(O),I)}function N(O){return O===47||O===62||Re(O)?x(O):r(O)}function L(O){return O===62?(e.consume(O),D):r(O)}function D(O){return O===null||Jt(O)?P(O):Re(O)?(e.consume(O),D):r(O)}function P(O){return O===45&&i===2?(e.consume(O),H):O===60&&i===1?(e.consume(O),U):O===62&&i===4?(e.consume(O),dt):O===63&&i===3?(e.consume(O),E):O===93&&i===5?(e.consume(O),rt):Jt(O)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Tot,Tt,K)(O)):O===null||Jt(O)?(e.exit("htmlFlowData"),K(O)):(e.consume(O),P)}function K(O){return e.check(_ot,z,Tt)(O)}function z(O){return e.enter("lineEnding"),e.consume(O),e.exit("lineEnding"),$}function $(O){return O===null||Jt(O)?K(O):(e.enter("htmlFlowData"),P(O))}function H(O){return O===45?(e.consume(O),E):P(O)}function U(O){return O===47?(e.consume(O),o="",q):P(O)}function q(O){if(O===62){const te=o.toLowerCase();return yA.includes(te)?(e.consume(O),dt):P(O)}return Qn(O)&&o.length<8?(e.consume(O),o+=String.fromCharCode(O),q):P(O)}function rt(O){return O===93?(e.consume(O),E):P(O)}function E(O){return O===62?(e.consume(O),dt):O===45&&i===2?(e.consume(O),E):P(O)}function dt(O){return O===null||Jt(O)?(e.exit("htmlFlowData"),Tt(O)):(e.consume(O),dt)}function Tt(O){return e.exit("htmlFlow"),t(O)}}function Eot(e,t,r){const n=this;return i;function i(o){return Jt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):r(o)}function s(o){return n.parser.lazy[n.now().line]?r(o):t(o)}}function Lot(e,t,r){return n;function n(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(a1,t,r)}}const Oot={name:"htmlText",tokenize:Dot};function Dot(e,t,r){const n=this;let i,s,o;return a;function a(E){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(E),l}function l(E){return E===33?(e.consume(E),c):E===47?(e.consume(E),S):E===63?(e.consume(E),x):Qn(E)?(e.consume(E),I):r(E)}function c(E){return E===45?(e.consume(E),h):E===91?(e.consume(E),s=0,p):Qn(E)?(e.consume(E),b):r(E)}function h(E){return E===45?(e.consume(E),d):r(E)}function u(E){return E===null?r(E):E===45?(e.consume(E),f):Jt(E)?(o=u,U(E)):(e.consume(E),u)}function f(E){return E===45?(e.consume(E),d):u(E)}function d(E){return E===62?H(E):E===45?f(E):u(E)}function p(E){const dt="CDATA[";return E===dt.charCodeAt(s++)?(e.consume(E),s===dt.length?m:p):r(E)}function m(E){return E===null?r(E):E===93?(e.consume(E),g):Jt(E)?(o=m,U(E)):(e.consume(E),m)}function g(E){return E===93?(e.consume(E),y):m(E)}function y(E){return E===62?H(E):E===93?(e.consume(E),y):m(E)}function b(E){return E===null||E===62?H(E):Jt(E)?(o=b,U(E)):(e.consume(E),b)}function x(E){return E===null?r(E):E===63?(e.consume(E),T):Jt(E)?(o=x,U(E)):(e.consume(E),x)}function T(E){return E===62?H(E):x(E)}function S(E){return Qn(E)?(e.consume(E),w):r(E)}function w(E){return E===45||Ai(E)?(e.consume(E),w):_(E)}function _(E){return Jt(E)?(o=_,U(E)):Re(E)?(e.consume(E),_):H(E)}function I(E){return E===45||Ai(E)?(e.consume(E),I):E===47||E===62||ar(E)?N(E):r(E)}function N(E){return E===47?(e.consume(E),H):E===58||E===95||Qn(E)?(e.consume(E),L):Jt(E)?(o=N,U(E)):Re(E)?(e.consume(E),N):H(E)}function L(E){return E===45||E===46||E===58||E===95||Ai(E)?(e.consume(E),L):D(E)}function D(E){return E===61?(e.consume(E),P):Jt(E)?(o=D,U(E)):Re(E)?(e.consume(E),D):N(E)}function P(E){return E===null||E===60||E===61||E===62||E===96?r(E):E===34||E===39?(e.consume(E),i=E,K):Jt(E)?(o=P,U(E)):Re(E)?(e.consume(E),P):(e.consume(E),z)}function K(E){return E===i?(e.consume(E),i=void 0,$):E===null?r(E):Jt(E)?(o=K,U(E)):(e.consume(E),K)}function z(E){return E===null||E===34||E===39||E===60||E===61||E===96?r(E):E===47||E===62||ar(E)?N(E):(e.consume(E),z)}function $(E){return E===47||E===62||ar(E)?N(E):r(E)}function H(E){return E===62?(e.consume(E),e.exit("htmlTextData"),e.exit("htmlText"),t):r(E)}function U(E){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(E),e.exit("lineEnding"),q}function q(E){return Re(E)?Oe(e,rt,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(E):rt(E)}function rt(E){return e.enter("htmlTextData"),o(E)}}const B7={name:"labelEnd",resolveAll:Pot,resolveTo:Not,tokenize:Fot},Iot={tokenize:$ot},Bot={tokenize:zot},Rot={tokenize:Hot};function Pot(e){let t=-1;const r=[];for(;++t<e.length;){const n=e[t][1];if(r.push(e[t]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const i=n.type==="labelImage"?4:2;n.type="data",t+=i}}return e.length!==r.length&&Zi(e,0,e.length,r),e}function Not(e,t){let r=e.length,n=0,i,s,o,a;for(;r--;)if(i=e[r][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[r][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[r][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=r,i.type!=="labelLink")){n=2;break}}else i.type==="labelEnd"&&(o=r);const l={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[s][1].start},end:{...e[o][1].end}},h={type:"labelText",start:{...e[s+n+2][1].end},end:{...e[o-2][1].start}};return a=[["enter",l,t],["enter",c,t]],a=ms(a,e.slice(s+1,s+n+3)),a=ms(a,[["enter",h,t]]),a=ms(a,$v(t.parser.constructs.insideSpan.null,e.slice(s+n+4,o-3),t)),a=ms(a,[["exit",h,t],e[o-2],e[o-1],["exit",c,t]]),a=ms(a,e.slice(o+1)),a=ms(a,[["exit",l,t]]),Zi(e,s,e.length,a),e}function Fot(e,t,r){const n=this;let i=n.events.length,s,o;for(;i--;)if((n.events[i][1].type==="labelImage"||n.events[i][1].type==="labelLink")&&!n.events[i][1]._balanced){s=n.events[i][1];break}return a;function a(f){return s?s._inactive?u(f):(o=n.parser.defined.includes(Ys(n.sliceSerialize({start:s.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),l):r(f)}function l(f){return f===40?e.attempt(Iot,h,o?h:u)(f):f===91?e.attempt(Bot,h,o?c:u)(f):o?h(f):u(f)}function c(f){return e.attempt(Rot,h,u)(f)}function h(f){return t(f)}function u(f){return s._balanced=!0,r(f)}}function $ot(e,t,r){return n;function n(u){return e.enter("resource"),e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),i}function i(u){return ar(u)?Gp(e,s)(u):s(u)}function s(u){return u===41?h(u):YP(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(u)}function o(u){return ar(u)?Gp(e,l)(u):h(u)}function a(u){return r(u)}function l(u){return u===34||u===39||u===40?JP(e,c,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(u):h(u)}function c(u){return ar(u)?Gp(e,h)(u):h(u)}function h(u){return u===41?(e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),e.exit("resource"),t):r(u)}}function zot(e,t,r){const n=this;return i;function i(a){return XP.call(n,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return n.parser.defined.includes(Ys(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(a):r(a)}function o(a){return r(a)}}function Hot(e,t,r){return n;function n(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):r(s)}}const qot={name:"labelStartImage",resolveAll:B7.resolveAll,tokenize:Vot};function Vot(e,t,r){const n=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):r(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(a):t(a)}}const Wot={name:"labelStartLink",resolveAll:B7.resolveAll,tokenize:jot};function jot(e,t,r){const n=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(o):t(o)}}const Kw={name:"lineEnding",tokenize:Uot};function Uot(e,t){return r;function r(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Oe(e,t,"linePrefix")}}const C2={name:"thematicBreak",tokenize:Got};function Got(e,t,r){let n=0,i;return s;function s(c){return e.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(e.enter("thematicBreakSequence"),l(c)):n>=3&&(c===null||Jt(c))?(e.exit("thematicBreak"),t(c)):r(c)}function l(c){return c===i?(e.consume(c),n++,l):(e.exit("thematicBreakSequence"),Re(c)?Oe(e,a,"whitespace")(c):a(c))}}const gi={continuation:{tokenize:Jot},exit:Qot,name:"list",tokenize:Xot},Kot={partial:!0,tokenize:tat},Yot={partial:!0,tokenize:Zot};function Xot(e,t,r){const n=this,i=n.events[n.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(d){const p=n.containerState.type||(d===42||d===43||d===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!n.containerState.marker||d===n.containerState.marker:Pk(d)){if(n.containerState.type||(n.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),d===42||d===45?e.check(C2,r,c)(d):c(d);if(!n.interrupt||d===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(d)}return r(d)}function l(d){return Pk(d)&&++o<10?(e.consume(d),l):(!n.interrupt||o<2)&&(n.containerState.marker?d===n.containerState.marker:d===41||d===46)?(e.exit("listItemValue"),c(d)):r(d)}function c(d){return e.enter("listItemMarker"),e.consume(d),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||d,e.check(a1,n.interrupt?r:h,e.attempt(Kot,f,u))}function h(d){return n.containerState.initialBlankLine=!0,s++,f(d)}function u(d){return Re(d)?(e.enter("listItemPrefixWhitespace"),e.consume(d),e.exit("listItemPrefixWhitespace"),f):r(d)}function f(d){return n.containerState.size=s+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(d)}}function Jot(e,t,r){const n=this;return n.containerState._closeFlow=void 0,e.check(a1,i,s);function i(a){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,Oe(e,t,"listItemIndent",n.containerState.size+1)(a)}function s(a){return n.containerState.furtherBlankLines||!Re(a)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,o(a)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(Yot,t,o)(a))}function o(a){return n.containerState._closeFlow=!0,n.interrupt=void 0,Oe(e,e.attempt(gi,t,r),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Zot(e,t,r){const n=this;return Oe(e,i,"listItemIndent",n.containerState.size+1);function i(s){const o=n.events[n.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===n.containerState.size?t(s):r(s)}}function Qot(e){e.exit(this.containerState.type)}function tat(e,t,r){const n=this;return Oe(e,i,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=n.events[n.events.length-1];return!Re(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):r(s)}}const bA={name:"setextUnderline",resolveTo:eat,tokenize:rat};function eat(e,t){let r=e.length,n,i,s;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){n=r;break}e[r][1].type==="paragraph"&&(i=r)}else e[r][1].type==="content"&&e.splice(r,1),!s&&e[r][1].type==="definition"&&(s=r);const o={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[n][1],t]),e[n][1].end={...e[s][1].end}):e[n][1]=o,e.push(["exit",o,t]),e}function rat(e,t,r){const n=this;let i;return s;function s(c){let h=n.events.length,u;for(;h--;)if(n.events[h][1].type!=="lineEnding"&&n.events[h][1].type!=="linePrefix"&&n.events[h][1].type!=="content"){u=n.events[h][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||u)?(e.enter("setextHeadingLine"),i=c,o(c)):r(c)}function o(c){return e.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(e.consume(c),a):(e.exit("setextHeadingLineSequence"),Re(c)?Oe(e,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Jt(c)?(e.exit("setextHeadingLine"),t(c)):r(c)}}const nat={tokenize:iat};function iat(e){const t=this,r=e.attempt(a1,n,e.attempt(this.parser.constructs.flowInitial,i,Oe(e,e.attempt(this.parser.constructs.flow,i,e.attempt(cot,i)),"linePrefix")));return r;function n(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,r}}const sat={resolveAll:QP()},oat=ZP("string"),aat=ZP("text");function ZP(e){return{resolveAll:QP(e==="text"?lat:void 0),tokenize:t};function t(r){const n=this,i=this.parser.constructs[e],s=r.attempt(i,o,a);return o;function o(h){return c(h)?s(h):a(h)}function a(h){if(h===null){r.consume(h);return}return r.enter("data"),r.consume(h),l}function l(h){return c(h)?(r.exit("data"),s(h)):(r.consume(h),l)}function c(h){if(h===null)return!0;const u=i[h];let f=-1;if(u)for(;++f<u.length;){const d=u[f];if(!d.previous||d.previous.call(n,n.previous))return!0}return!1}}}function QP(e){return t;function t(r,n){let i=-1,s;for(;++i<=r.length;)s===void 0?r[i]&&r[i][1].type==="data"&&(s=i,i++):(!r[i]||r[i][1].type!=="data")&&(i!==s+2&&(r[s][1].end=r[i-1][1].end,r.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(r,n):r}}function lat(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const n=e[r-1][1],i=t.sliceStream(n);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(t._contentTypeTextTrailing&&r===e.length&&(a=0),a){const c={type:r===e.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:n.start._bufferIndex+o,_index:n.start._index+s,line:n.end.line,column:n.end.column-a,offset:n.end.offset-a},end:{...n.end}};n.end={...c.start},n.start.offset===n.end.offset?Object.assign(n,c):(e.splice(r,0,["enter",c,t],["exit",c,t]),r+=2)}r++}return e}const cat={42:gi,43:gi,45:gi,48:gi,49:gi,50:gi,51:gi,52:gi,53:gi,54:gi,55:gi,56:gi,57:gi,62:jP},hat={91:pot},uat={[-2]:Gw,[-1]:Gw,32:Gw},fat={35:vot,42:C2,45:[bA,C2],60:Sot,61:bA,95:C2,96:gA,126:gA},dat={38:GP,92:UP},pat={[-5]:Kw,[-4]:Kw,[-3]:Kw,33:qot,38:GP,42:Nk,60:[Wst,Oot],91:Wot,92:[bot,UP],93:B7,95:Nk,96:not},mat={null:[Nk,sat]},gat={null:[42,95]},yat={null:[]},bat=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:gat,contentInitial:hat,disable:yat,document:cat,flow:fat,flowInitial:uat,insideSpan:mat,string:dat,text:pat},Symbol.toStringTag,{value:"Module"}));function xat(e,t,r){let n={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:_(S),check:_(w),consume:b,enter:x,exit:T,interrupt:_(w,{interrupt:!0})},c={code:null,containerState:{},defineSkip:m,events:[],now:p,parser:e,previous:null,sliceSerialize:f,sliceStream:d,write:u};let h=t.tokenize.call(c,l);return t.resolveAll&&s.push(t),c;function u(D){return o=ms(o,D),g(),o[o.length-1]!==null?[]:(I(t,0),c.events=$v(s,c.events,c),c.events)}function f(D,P){return wat(d(D),P)}function d(D){return vat(o,D)}function p(){const{_bufferIndex:D,_index:P,line:K,column:z,offset:$}=n;return{_bufferIndex:D,_index:P,line:K,column:z,offset:$}}function m(D){i[D.line]=D.column,L()}function g(){let D;for(;n._index<o.length;){const P=o[n._index];if(typeof P=="string")for(D=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===D&&n._bufferIndex<P.length;)y(P.charCodeAt(n._bufferIndex));else y(P)}}function y(D){h=h(D)}function b(D){Jt(D)?(n.line++,n.column=1,n.offset+=D===-3?2:1,L()):D!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===o[n._index].length&&(n._bufferIndex=-1,n._index++)),c.previous=D}function x(D,P){const K=P||{};return K.type=D,K.start=p(),c.events.push(["enter",K,c]),a.push(K),K}function T(D){const P=a.pop();return P.end=p(),c.events.push(["exit",P,c]),P}function S(D,P){I(D,P.from)}function w(D,P){P.restore()}function _(D,P){return K;function K(z,$,H){let U,q,rt,E;return Array.isArray(z)?Tt(z):"tokenize"in z?Tt([z]):dt(z);function dt(Lt){return Xt;function Xt(de){const Ce=de!==null&&Lt[de],xe=de!==null&&Lt.null,Ue=[...Array.isArray(Ce)?Ce:Ce?[Ce]:[],...Array.isArray(xe)?xe:xe?[xe]:[]];return Tt(Ue)(de)}}function Tt(Lt){return U=Lt,q=0,Lt.length===0?H:O(Lt[q])}function O(Lt){return Xt;function Xt(de){return E=N(),rt=Lt,Lt.partial||(c.currentConstruct=Lt),Lt.name&&c.parser.constructs.disable.null.includes(Lt.name)?Ht():Lt.tokenize.call(P?Object.assign(Object.create(c),P):c,l,te,Ht)(de)}}function te(Lt){return D(rt,E),$}function Ht(Lt){return E.restore(),++q<U.length?O(U[q]):H}}}function I(D,P){D.resolveAll&&!s.includes(D)&&s.push(D),D.resolve&&Zi(c.events,P,c.events.length-P,D.resolve(c.events.slice(P),c)),D.resolveTo&&(c.events=D.resolveTo(c.events,c))}function N(){const D=p(),P=c.previous,K=c.currentConstruct,z=c.events.length,$=Array.from(a);return{from:z,restore:H};function H(){n=D,c.previous=P,c.currentConstruct=K,c.events.length=z,a=$,L()}}function L(){n.line in i&&n.column<2&&(n.column=i[n.line],n.offset+=i[n.line]-1)}}function vat(e,t){const r=t.start._index,n=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(r===i)o=[e[r].slice(n,s)];else{if(o=e.slice(r,i),n>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(n):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function wat(e,t){let r=-1;const n=[];let i;for(;++r<e.length;){const s=e[r];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,n.push(o)}return n.join("")}function kat(e){const n={constructs:VP([bat,...(e||{}).extensions||[]]),content:i(Nst),defined:[],document:i($st),flow:i(nat),lazy:{},string:i(oat),text:i(aat)};return n;function i(s){return o;function o(a){return xat(n,s,a)}}}function Cat(e){for(;!KP(e););return e}const xA=/[\0\t\n\r]/g;function Sat(){let e=1,t="",r=!0,n;return i;function i(s,o,a){const l=[];let c,h,u,f,d;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),u=0,t="",r&&(s.charCodeAt(0)===65279&&u++,r=void 0);u<s.length;){if(xA.lastIndex=u,c=xA.exec(s),f=c&&c.index!==void 0?c.index:s.length,d=s.charCodeAt(f),!c){t=s.slice(u);break}if(d===10&&u===f&&n)l.push(-3),n=void 0;else switch(n&&(l.push(-5),n=void 0),u<f&&(l.push(s.slice(u,f)),e+=f-u),d){case 0:{l.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,l.push(-2);e++<h;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:n=!0,e=1}u=f+1}return a&&(n&&l.push(-5),t&&l.push(t),l.push(null)),l}}const Tat=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function tN(e){return e.replace(Tat,_at)}function _at(e,t,r){if(t)return t;if(r.charCodeAt(0)===35){const i=r.charCodeAt(1),s=i===120||i===88;return WP(r.slice(s?2:1),s?16:10)}return I7(r)||e}function Kp(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?vA(e.position):"start"in e||"end"in e?vA(e):"line"in e||"column"in e?Fk(e):""}function Fk(e){return wA(e&&e.line)+":"+wA(e&&e.column)}function vA(e){return Fk(e&&e.start)+"-"+Fk(e&&e.end)}function wA(e){return e&&typeof e=="number"?e:1}const eN={}.hasOwnProperty;function Mat(e,t,r){return typeof t!="string"&&(r=t,t=void 0),Aat(r)(Cat(kat(r).document().write(Sat()(e,t,!0))))}function Aat(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(bt),autolinkProtocol:N,autolinkEmail:N,atxHeading:s(ut),blockQuote:s(xe),characterEscape:N,characterReference:N,codeFenced:s(Ue),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ue,o),codeText:s(R,o),codeTextData:N,data:N,codeFlowValue:N,definition:s(W),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(tt),hardBreakEscape:s(lt),hardBreakTrailing:s(lt),htmlFlow:s(ct,o),htmlFlowData:N,htmlText:s(ct,o),htmlTextData:N,image:s(St),label:o,link:s(bt),listItem:s(pt),listItemValue:f,listOrdered:s(xt,u),listUnordered:s(xt),paragraph:s(Zt),reference:O,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(ut),strong:s(Ot),thematicBreak:s(re)},exit:{atxHeading:l(),atxHeadingSequence:S,autolink:l(),autolinkEmail:Ce,autolinkProtocol:de,blockQuote:l(),characterEscapeValue:L,characterReferenceMarkerHexadecimal:Ht,characterReferenceMarkerNumeric:Ht,characterReferenceValue:Lt,characterReference:Xt,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:d,codeFencedFenceMeta:p,codeFlowValue:L,codeIndented:l(y),codeText:l($),codeTextData:L,data:L,definition:l(),definitionDestinationString:T,definitionLabelString:b,definitionTitleString:x,emphasis:l(),hardBreakEscape:l(P),hardBreakTrailing:l(P),htmlFlow:l(K),htmlFlowData:L,htmlText:l(z),htmlTextData:L,image:l(U),label:rt,labelText:q,lineEnding:D,link:l(H),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:te,resourceDestinationString:E,resourceTitleString:dt,resource:Tt,setextHeading:l(I),setextHeadingLineSequence:_,setextHeadingText:w,strong:l(),thematicBreak:l()}};rN(t,(e||{}).mdastExtensions||[]);const r={};return n;function n(J){let at={type:"root",children:[]};const Mt={stack:[at],tokenStack:[],config:t,enter:a,exit:c,buffer:o,resume:h,data:r},ne=[];let ge=-1;for(;++ge<J.length;)if(J[ge][1].type==="listOrdered"||J[ge][1].type==="listUnordered")if(J[ge][0]==="enter")ne.push(ge);else{const tr=ne.pop();ge=i(J,tr,ge)}for(ge=-1;++ge<J.length;){const tr=t[J[ge][0]];eN.call(tr,J[ge][1].type)&&tr[J[ge][1].type].call(Object.assign({sliceSerialize:J[ge][2].sliceSerialize},Mt),J[ge][1])}if(Mt.tokenStack.length>0){const tr=Mt.tokenStack[Mt.tokenStack.length-1];(tr[1]||kA).call(Mt,void 0,tr[0])}for(at.position={start:wl(J.length>0?J[0][1].start:{line:1,column:1,offset:0}),end:wl(J.length>0?J[J.length-2][1].end:{line:1,column:1,offset:0})},ge=-1;++ge<t.transforms.length;)at=t.transforms[ge](at)||at;return at}function i(J,at,Mt){let ne=at-1,ge=-1,tr=!1,wr,_r,Tn,qe;for(;++ne<=Mt;){const Ne=J[ne];switch(Ne[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ne[0]==="enter"?ge++:ge--,qe=void 0;break}case"lineEndingBlank":{Ne[0]==="enter"&&(wr&&!qe&&!ge&&!Tn&&(Tn=ne),qe=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:qe=void 0}if(!ge&&Ne[0]==="enter"&&Ne[1].type==="listItemPrefix"||ge===-1&&Ne[0]==="exit"&&(Ne[1].type==="listUnordered"||Ne[1].type==="listOrdered")){if(wr){let _n=ne;for(_r=void 0;_n--;){const Yr=J[_n];if(Yr[1].type==="lineEnding"||Yr[1].type==="lineEndingBlank"){if(Yr[0]==="exit")continue;_r&&(J[_r][1].type="lineEndingBlank",tr=!0),Yr[1].type="lineEnding",_r=_n}else if(!(Yr[1].type==="linePrefix"||Yr[1].type==="blockQuotePrefix"||Yr[1].type==="blockQuotePrefixWhitespace"||Yr[1].type==="blockQuoteMarker"||Yr[1].type==="listItemIndent"))break}Tn&&(!_r||Tn<_r)&&(wr._spread=!0),wr.end=Object.assign({},_r?J[_r][1].start:Ne[1].end),J.splice(_r||ne,0,["exit",wr,Ne[2]]),ne++,Mt++}if(Ne[1].type==="listItemPrefix"){const _n={type:"listItem",_spread:!1,start:Object.assign({},Ne[1].start),end:void 0};wr=_n,J.splice(ne,0,["enter",_n,Ne[2]]),ne++,Mt++,Tn=void 0,qe=!0}}}return J[at][1]._spread=tr,Mt}function s(J,at){return Mt;function Mt(ne){a.call(this,J(ne),ne),at&&at.call(this,ne)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(J,at,Mt){this.stack[this.stack.length-1].children.push(J),this.stack.push(J),this.tokenStack.push([at,Mt||void 0]),J.position={start:wl(at.start),end:void 0}}function l(J){return at;function at(Mt){J&&J.call(this,Mt),c.call(this,Mt)}}function c(J,at){const Mt=this.stack.pop(),ne=this.tokenStack.pop();if(ne)ne[0].type!==J.type&&(at?at.call(this,J,ne[0]):(ne[1]||kA).call(this,J,ne[0]));else throw new Error("Cannot close `"+J.type+"` ("+Kp({start:J.start,end:J.end})+"): its not open");Mt.position.end=wl(J.end)}function h(){return D7(this.stack.pop())}function u(){this.data.expectingFirstListItemValue=!0}function f(J){if(this.data.expectingFirstListItemValue){const at=this.stack[this.stack.length-2];at.start=Number.parseInt(this.sliceSerialize(J),10),this.data.expectingFirstListItemValue=void 0}}function d(){const J=this.resume(),at=this.stack[this.stack.length-1];at.lang=J}function p(){const J=this.resume(),at=this.stack[this.stack.length-1];at.meta=J}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const J=this.resume(),at=this.stack[this.stack.length-1];at.value=J.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const J=this.resume(),at=this.stack[this.stack.length-1];at.value=J.replace(/(\r?\n|\r)$/g,"")}function b(J){const at=this.resume(),Mt=this.stack[this.stack.length-1];Mt.label=at,Mt.identifier=Ys(this.sliceSerialize(J)).toLowerCase()}function x(){const J=this.resume(),at=this.stack[this.stack.length-1];at.title=J}function T(){const J=this.resume(),at=this.stack[this.stack.length-1];at.url=J}function S(J){const at=this.stack[this.stack.length-1];if(!at.depth){const Mt=this.sliceSerialize(J).length;at.depth=Mt}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function _(J){const at=this.stack[this.stack.length-1];at.depth=this.sliceSerialize(J).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function N(J){const Mt=this.stack[this.stack.length-1].children;let ne=Mt[Mt.length-1];(!ne||ne.type!=="text")&&(ne=Yt(),ne.position={start:wl(J.start),end:void 0},Mt.push(ne)),this.stack.push(ne)}function L(J){const at=this.stack.pop();at.value+=this.sliceSerialize(J),at.position.end=wl(J.end)}function D(J){const at=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Mt=at.children[at.children.length-1];Mt.position.end=wl(J.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(at.type)&&(N.call(this,J),L.call(this,J))}function P(){this.data.atHardBreak=!0}function K(){const J=this.resume(),at=this.stack[this.stack.length-1];at.value=J}function z(){const J=this.resume(),at=this.stack[this.stack.length-1];at.value=J}function $(){const J=this.resume(),at=this.stack[this.stack.length-1];at.value=J}function H(){const J=this.stack[this.stack.length-1];if(this.data.inReference){const at=this.data.referenceType||"shortcut";J.type+="Reference",J.referenceType=at,delete J.url,delete J.title}else delete J.identifier,delete J.label;this.data.referenceType=void 0}function U(){const J=this.stack[this.stack.length-1];if(this.data.inReference){const at=this.data.referenceType||"shortcut";J.type+="Reference",J.referenceType=at,delete J.url,delete J.title}else delete J.identifier,delete J.label;this.data.referenceType=void 0}function q(J){const at=this.sliceSerialize(J),Mt=this.stack[this.stack.length-2];Mt.label=tN(at),Mt.identifier=Ys(at).toLowerCase()}function rt(){const J=this.stack[this.stack.length-1],at=this.resume(),Mt=this.stack[this.stack.length-1];if(this.data.inReference=!0,Mt.type==="link"){const ne=J.children;Mt.children=ne}else Mt.alt=at}function E(){const J=this.resume(),at=this.stack[this.stack.length-1];at.url=J}function dt(){const J=this.resume(),at=this.stack[this.stack.length-1];at.title=J}function Tt(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function te(J){const at=this.resume(),Mt=this.stack[this.stack.length-1];Mt.label=at,Mt.identifier=Ys(this.sliceSerialize(J)).toLowerCase(),this.data.referenceType="full"}function Ht(J){this.data.characterReferenceType=J.type}function Lt(J){const at=this.sliceSerialize(J),Mt=this.data.characterReferenceType;let ne;Mt?(ne=WP(at,Mt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ne=I7(at);const ge=this.stack[this.stack.length-1];ge.value+=ne}function Xt(J){const at=this.stack.pop();at.position.end=wl(J.end)}function de(J){L.call(this,J);const at=this.stack[this.stack.length-1];at.url=this.sliceSerialize(J)}function Ce(J){L.call(this,J);const at=this.stack[this.stack.length-1];at.url="mailto:"+this.sliceSerialize(J)}function xe(){return{type:"blockquote",children:[]}}function Ue(){return{type:"code",lang:null,meta:null,value:""}}function R(){return{type:"inlineCode",value:""}}function W(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function tt(){return{type:"emphasis",children:[]}}function ut(){return{type:"heading",depth:0,children:[]}}function lt(){return{type:"break"}}function ct(){return{type:"html",value:""}}function St(){return{type:"image",title:null,url:"",alt:null}}function bt(){return{type:"link",title:null,url:"",children:[]}}function xt(J){return{type:"list",ordered:J.type==="listOrdered",start:null,spread:J._spread,children:[]}}function pt(J){return{type:"listItem",spread:J._spread,checked:null,children:[]}}function Zt(){return{type:"paragraph",children:[]}}function Ot(){return{type:"strong",children:[]}}function Yt(){return{type:"text",value:""}}function re(){return{type:"thematicBreak"}}}function wl(e){return{line:e.line,column:e.column,offset:e.offset}}function rN(e,t){let r=-1;for(;++r<t.length;){const n=t[r];Array.isArray(n)?rN(e,n):Eat(e,n)}}function Eat(e,t){let r;for(r in t)if(eN.call(t,r))switch(r){case"canContainEols":{const n=t[r];n&&e[r].push(...n);break}case"transforms":{const n=t[r];n&&e[r].push(...n);break}case"enter":case"exit":{const n=t[r];n&&Object.assign(e[r],n);break}}}function kA(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Kp({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Kp({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Kp({start:t.start,end:t.end})+") is still open")}function $k(e){const t=this;t.parser=r;function r(n){return Mat(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}const CA={}.hasOwnProperty;function Lat(e,t){const r=t||{};function n(i,...s){let o=n.invalid;const a=n.handlers;if(i&&CA.call(i,e)){const l=String(i[e]);o=CA.call(a,l)?a[l]:n.unknown}if(o)return o.call(this,i,...s)}return n.handlers=r.handlers||{},n.invalid=r.invalid,n.unknown=r.unknown,n}const Oat={}.hasOwnProperty;function nN(e,t){let r=-1,n;if(t.extensions)for(;++r<t.extensions.length;)nN(e,t.extensions[r]);for(n in t)if(Oat.call(t,n))switch(n){case"extensions":break;case"unsafe":{SA(e[n],t[n]);break}case"join":{SA(e[n],t[n]);break}case"handlers":{Dat(e[n],t[n]);break}default:e.options[n]=t[n]}return e}function SA(e,t){t&&e.push(...t)}function Dat(e,t){t&&Object.assign(e,t)}function Iat(e,t,r,n){const i=r.enter("blockquote"),s=r.createTracker(n);s.move("> "),s.shift(2);const o=r.indentLines(r.containerFlow(e,s.current()),Bat);return i(),o}function Bat(e,t,r){return">"+(r?"":" ")+e}function iN(e,t){return TA(e,t.inConstruct,!0)&&!TA(e,t.notInConstruct,!1)}function TA(e,t,r){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return r;let n=-1;for(;++n<t.length;)if(e.includes(t[n]))return!0;return!1}function _A(e,t,r,n){let i=-1;for(;++i<r.unsafe.length;)if(r.unsafe[i].character===`
`&&iN(r.stack,r.unsafe[i]))return/[ \t]/.test(n.before)?"":" ";return`\\
`}function sN(e,t){const r=String(e);let n=r.indexOf(t),i=n,s=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;n!==-1;)n===i?++s>o&&(o=s):s=1,i=n+t.length,n=r.indexOf(t,i);return o}function zk(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function Rat(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function Pat(e,t,r,n){const i=Rat(r),s=e.value||"",o=i==="`"?"GraveAccent":"Tilde";if(zk(e,r)){const u=r.enter("codeIndented"),f=r.indentLines(s,Nat);return u(),f}const a=r.createTracker(n),l=i.repeat(Math.max(sN(s,i)+1,3)),c=r.enter("codeFenced");let h=a.move(l);if(e.lang){const u=r.enter(`codeFencedLang${o}`);h+=a.move(r.safe(e.lang,{before:h,after:" ",encode:["`"],...a.current()})),u()}if(e.lang&&e.meta){const u=r.enter(`codeFencedMeta${o}`);h+=a.move(" "),h+=a.move(r.safe(e.meta,{before:h,after:`
`,encode:["`"],...a.current()})),u()}return h+=a.move(`
`),s&&(h+=a.move(s+`
`)),h+=a.move(l),c(),h}function Nat(e,t,r){return(r?"":"    ")+e}function R7(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Fat(e,t,r,n){const i=R7(r),s=i==='"'?"Quote":"Apostrophe",o=r.enter("definition");let a=r.enter("label");const l=r.createTracker(n);let c=l.move("[");return c+=l.move(r.safe(r.associationId(e),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=r.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(r.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=r.enter("destinationRaw"),c+=l.move(r.safe(e.url,{before:c,after:e.title?" ":`
`,...l.current()}))),a(),e.title&&(a=r.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(r.safe(e.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),o(),c}function $at(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function cc(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Yb(e,t,r){const n=md(e),i=md(t);return n===void 0?i===void 0?r==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:n===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}oN.peek=zat;function oN(e,t,r,n){const i=$at(r),s=r.enter("emphasis"),o=r.createTracker(n),a=o.move(i);let l=o.move(r.containerPhrasing(e,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),h=Yb(n.before.charCodeAt(n.before.length-1),c,i);h.inside&&(l=cc(c)+l.slice(1));const u=l.charCodeAt(l.length-1),f=Yb(n.after.charCodeAt(0),u,i);f.inside&&(l=l.slice(0,-1)+cc(u));const d=o.move(i);return s(),r.attentionEncodeSurroundingInfo={after:f.outside,before:h.outside},a+l+d}function zat(e,t,r){return r.options.emphasis||"*"}const zv=function(e){if(e==null)return Wat;if(typeof e=="function")return Hv(e);if(typeof e=="object")return Array.isArray(e)?Hat(e):qat(e);if(typeof e=="string")return Vat(e);throw new Error("Expected function, string, or object as test")};function Hat(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=zv(e[r]);return Hv(n);function n(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function qat(e){const t=e;return Hv(r);function r(n){const i=n;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Vat(e){return Hv(t);function t(r){return r&&r.type===e}}function Hv(e){return t;function t(r,n,i){return!!(jat(r)&&e.call(this,r,typeof n=="number"?n:void 0,i||void 0))}}function Wat(){return!0}function jat(e){return e!==null&&typeof e=="object"&&"type"in e}const aN=[],Uat=!0,Hk=!1,qk="skip";function P7(e,t,r,n){let i;typeof t=="function"&&typeof r!="function"?(n=r,r=t):i=t;const s=zv(i),o=n?-1:1;a(e,void 0,[])();function a(l,c,h){const u=l&&typeof l=="object"?l:{};if(typeof u.type=="string"){const d=typeof u.tagName=="string"?u.tagName:typeof u.name=="string"?u.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(d?"<"+d+">":""))+")"})}return f;function f(){let d=aN,p,m,g;if((!t||s(l,c,h[h.length-1]||void 0))&&(d=Gat(r(l,h)),d[0]===Hk))return d;if("children"in l&&l.children){const y=l;if(y.children&&d[0]!==qk)for(m=(n?y.children.length:-1)+o,g=h.concat(y);m>-1&&m<y.children.length;){const b=y.children[m];if(p=a(b,m,g)(),p[0]===Hk)return p;m=typeof p[1]=="number"?p[1]:m+o}}return d}}}function Gat(e){return Array.isArray(e)?e:typeof e=="number"?[Uat,e]:e==null?aN:[e]}function _c(e,t,r,n){let i,s,o;typeof t=="function"&&typeof r!="function"?(s=void 0,o=t,i=r):(s=t,o=r,i=n),P7(e,s,a,i);function a(l,c){const h=c[c.length-1],u=h?h.children.indexOf(l):void 0;return o(l,u,h)}}function lN(e,t){let r=!1;return _c(e,function(n){if("value"in n&&/\r?\n|\r/.test(n.value)||n.type==="break")return r=!0,Hk}),!!((!e.depth||e.depth<3)&&D7(e)&&(t.options.setext||r))}function Kat(e,t,r,n){const i=Math.max(Math.min(6,e.depth||1),1),s=r.createTracker(n);if(lN(e,r)){const h=r.enter("headingSetext"),u=r.enter("phrasing"),f=r.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return u(),h(),f+`
`+(i===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=r.enter("headingAtx"),l=r.enter("phrasing");s.move(o+" ");let c=r.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=cc(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,r.options.closeAtx&&(c+=" "+o),l(),a(),c}cN.peek=Yat;function cN(e){return e.value||""}function Yat(){return"<"}hN.peek=Xat;function hN(e,t,r,n){const i=R7(r),s=i==='"'?"Quote":"Apostrophe",o=r.enter("image");let a=r.enter("label");const l=r.createTracker(n);let c=l.move("![");return c+=l.move(r.safe(e.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=r.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(r.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=r.enter("destinationRaw"),c+=l.move(r.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),a(),e.title&&(a=r.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(r.safe(e.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),o(),c}function Xat(){return"!"}uN.peek=Jat;function uN(e,t,r,n){const i=e.referenceType,s=r.enter("imageReference");let o=r.enter("label");const a=r.createTracker(n);let l=a.move("![");const c=r.safe(e.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const h=r.stack;r.stack=[],o=r.enter("reference");const u=r.safe(r.associationId(e),{before:l,after:"]",...a.current()});return o(),r.stack=h,s(),i==="full"||!c||c!==u?l+=a.move(u+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function Jat(){return"!"}fN.peek=Zat;function fN(e,t,r){let n=e.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(n);)i+="`";for(/[^ \r\n]/.test(n)&&(/^[ \r\n]/.test(n)&&/[ \r\n]$/.test(n)||/^`|`$/.test(n))&&(n=" "+n+" ");++s<r.unsafe.length;){const o=r.unsafe[s],a=r.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(n);){let c=l.index;n.charCodeAt(c)===10&&n.charCodeAt(c-1)===13&&c--,n=n.slice(0,c)+" "+n.slice(l.index+1)}}return i+n+i}function Zat(){return"`"}function dN(e,t){const r=D7(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(r===e.url||"mailto:"+r===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}pN.peek=Qat;function pN(e,t,r,n){const i=R7(r),s=i==='"'?"Quote":"Apostrophe",o=r.createTracker(n);let a,l;if(dN(e,r)){const h=r.stack;r.stack=[],a=r.enter("autolink");let u=o.move("<");return u+=o.move(r.containerPhrasing(e,{before:u,after:">",...o.current()})),u+=o.move(">"),a(),r.stack=h,u}a=r.enter("link"),l=r.enter("label");let c=o.move("[");return c+=o.move(r.containerPhrasing(e,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=r.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(r.safe(e.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=r.enter("destinationRaw"),c+=o.move(r.safe(e.url,{before:c,after:e.title?" ":")",...o.current()}))),l(),e.title&&(l=r.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(r.safe(e.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),a(),c}function Qat(e,t,r){return dN(e,r)?"<":"["}mN.peek=tlt;function mN(e,t,r,n){const i=e.referenceType,s=r.enter("linkReference");let o=r.enter("label");const a=r.createTracker(n);let l=a.move("[");const c=r.containerPhrasing(e,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const h=r.stack;r.stack=[],o=r.enter("reference");const u=r.safe(r.associationId(e),{before:l,after:"]",...a.current()});return o(),r.stack=h,s(),i==="full"||!c||c!==u?l+=a.move(u+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function tlt(){return"["}function N7(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function elt(e){const t=N7(e),r=e.options.bulletOther;if(!r)return t==="*"?"-":"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+r+"`) to be different");return r}function rlt(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function gN(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function nlt(e,t,r,n){const i=r.enter("list"),s=r.bulletCurrent;let o=e.ordered?rlt(r):N7(r);const a=e.ordered?o==="."?")":".":elt(r);let l=t&&r.bulletLastUsed?o===r.bulletLastUsed:!1;if(!e.ordered){const h=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&h&&(!h.children||!h.children[0])&&r.stack[r.stack.length-1]==="list"&&r.stack[r.stack.length-2]==="listItem"&&r.stack[r.stack.length-3]==="list"&&r.stack[r.stack.length-4]==="listItem"&&r.indexStack[r.indexStack.length-1]===0&&r.indexStack[r.indexStack.length-2]===0&&r.indexStack[r.indexStack.length-3]===0&&(l=!0),gN(r)===o&&h){let u=-1;for(;++u<e.children.length;){const f=e.children[u];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),r.bulletCurrent=o;const c=r.containerFlow(e,n);return r.bulletLastUsed=o,r.bulletCurrent=s,i(),c}function ilt(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function slt(e,t,r,n){const i=ilt(r);let s=r.bulletCurrent||N7(r);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(r.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const a=r.createTracker(n);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=r.enter("listItem"),c=r.indentLines(r.containerFlow(e,a.current()),h);return l(),c;function h(u,f,d){return f?(d?"":" ".repeat(o))+u:(d?s:s+" ".repeat(o-s.length))+u}}function olt(e,t,r,n){const i=r.enter("paragraph"),s=r.enter("phrasing"),o=r.containerPhrasing(e,n);return s(),i(),o}const alt=zv(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function llt(e,t,r,n){return(e.children.some(function(o){return alt(o)})?r.containerPhrasing:r.containerFlow).call(r,e,n)}function clt(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}yN.peek=hlt;function yN(e,t,r,n){const i=clt(r),s=r.enter("strong"),o=r.createTracker(n),a=o.move(i+i);let l=o.move(r.containerPhrasing(e,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),h=Yb(n.before.charCodeAt(n.before.length-1),c,i);h.inside&&(l=cc(c)+l.slice(1));const u=l.charCodeAt(l.length-1),f=Yb(n.after.charCodeAt(0),u,i);f.inside&&(l=l.slice(0,-1)+cc(u));const d=o.move(i+i);return s(),r.attentionEncodeSurroundingInfo={after:f.outside,before:h.outside},a+l+d}function hlt(e,t,r){return r.options.strong||"*"}function ult(e,t,r,n){return r.safe(e.value,n)}function flt(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function dlt(e,t,r){const n=(gN(r)+(r.options.ruleSpaces?" ":"")).repeat(flt(r));return r.options.ruleSpaces?n.slice(0,-1):n}const F7={blockquote:Iat,break:_A,code:Pat,definition:Fat,emphasis:oN,hardBreak:_A,heading:Kat,html:cN,image:hN,imageReference:uN,inlineCode:fN,link:pN,linkReference:mN,list:nlt,listItem:slt,paragraph:olt,root:llt,strong:yN,text:ult,thematicBreak:dlt},plt=[mlt];function mlt(e,t,r,n){if(t.type==="code"&&zk(t,n)&&(e.type==="list"||e.type===t.type&&zk(e,n)))return!1;if("spread"in r&&typeof r.spread=="boolean")return e.type==="paragraph"&&(e.type===t.type||t.type==="definition"||t.type==="heading"&&lN(t,n))?void 0:r.spread?1:0}const Fc=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],glt=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:Fc},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:Fc},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:Fc},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:Fc},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:Fc},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:Fc},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:Fc},{atBreak:!0,character:"~"}];function ylt(e){return e.label||!e.identifier?e.label||"":tN(e.identifier)}function blt(e){if(!e._compiled){const t=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}function xlt(e,t,r){const n=t.indexStack,i=e.children||[],s=[];let o=-1,a=r.before,l;n.push(-1);let c=t.createTracker(r);for(;++o<i.length;){const h=i[o];let u;if(n[n.length-1]=o,o+1<i.length){let p=t.handle.handlers[i[o+1].type];p&&p.peek&&(p=p.peek),u=p?p(i[o+1],e,t,{before:"",after:"",...c.current()}).charAt(0):""}else u=r.after;s.length>0&&(a==="\r"||a===`
`)&&h.type==="html"&&(s[s.length-1]=s[s.length-1].replace(/(\r?\n|\r)$/," "),a=" ",c=t.createTracker(r),c.move(s.join("")));let f=t.handle(h,e,t,{...c.current(),after:u,before:a});l&&l===f.slice(0,1)&&(f=cc(l.charCodeAt(0))+f.slice(1));const d=t.attentionEncodeSurroundingInfo;t.attentionEncodeSurroundingInfo=void 0,l=void 0,d&&(s.length>0&&d.before&&a===s[s.length-1].slice(-1)&&(s[s.length-1]=s[s.length-1].slice(0,-1)+cc(a.charCodeAt(0))),d.after&&(l=u)),c.move(f),s.push(f),a=f.slice(-1)}return n.pop(),s.join("")}function vlt(e,t,r){const n=t.indexStack,i=e.children||[],s=t.createTracker(r),o=[];let a=-1;for(n.push(-1);++a<i.length;){const l=i[a];n[n.length-1]=a,o.push(s.move(t.handle(l,e,t,{before:`
`,after:`
`,...s.current()}))),l.type!=="list"&&(t.bulletLastUsed=void 0),a<i.length-1&&o.push(s.move(wlt(l,i[a+1],e,t)))}return n.pop(),o.join("")}function wlt(e,t,r,n){let i=n.join.length;for(;i--;){const s=n.join[i](e,t,r,n);if(s===!0||s===1)break;if(typeof s=="number")return`
`.repeat(1+s);if(s===!1)return`

<!---->

`}return`

`}const klt=/\r?\n|\r/g;function Clt(e,t){const r=[];let n=0,i=0,s;for(;s=klt.exec(e);)o(e.slice(n,s.index)),r.push(s[0]),n=s.index+s[0].length,i++;return o(e.slice(n)),r.join("");function o(a){r.push(t(a,i,!a))}}function Slt(e,t,r){const n=(r.before||"")+(t||"")+(r.after||""),i=[],s=[],o={};let a=-1;for(;++a<e.unsafe.length;){const h=e.unsafe[a];if(!iN(e.stack,h))continue;const u=e.compilePattern(h);let f;for(;f=u.exec(n);){const d="before"in h||!!h.atBreak,p="after"in h,m=f.index+(d?f[1].length:0);i.includes(m)?(o[m].before&&!d&&(o[m].before=!1),o[m].after&&!p&&(o[m].after=!1)):(i.push(m),o[m]={before:d,after:p})}}i.sort(Tlt);let l=r.before?r.before.length:0;const c=n.length-(r.after?r.after.length:0);for(a=-1;++a<i.length;){const h=i[a];h<l||h>=c||h+1<c&&i[a+1]===h+1&&o[h].after&&!o[h+1].before&&!o[h+1].after||i[a-1]===h-1&&o[h].before&&!o[h-1].before&&!o[h-1].after||(l!==h&&s.push(MA(n.slice(l,h),"\\")),l=h,/[!-/:-@[-`{-~]/.test(n.charAt(h))&&(!r.encode||!r.encode.includes(n.charAt(h)))?s.push("\\"):(s.push(cc(n.charCodeAt(h))),l++))}return s.push(MA(n.slice(l,c),r.after)),s.join("")}function Tlt(e,t){return e-t}function MA(e,t){const r=/\\(?=[!-/:-@[-`{-~])/g,n=[],i=[],s=e+t;let o=-1,a=0,l;for(;l=r.exec(s);)n.push(l.index);for(;++o<n.length;)a!==n[o]&&i.push(e.slice(a,n[o])),i.push("\\"),a=n[o];return i.push(e.slice(a)),i.join("")}function _lt(e){const t=e||{},r=t.now||{};let n=t.lineShift||0,i=r.line||1,s=r.column||1;return{move:l,current:o,shift:a};function o(){return{now:{line:i,column:s},lineShift:n}}function a(c){n+=c}function l(c){const h=c||"",u=h.split(/\r?\n|\r/g),f=u[u.length-1];return i+=u.length-1,s=u.length===1?s+f.length:1+f.length+n,h}}function Mlt(e,t){const r=t||{},n={associationId:ylt,containerPhrasing:Olt,containerFlow:Dlt,createTracker:_lt,compilePattern:blt,enter:s,handlers:{...F7},handle:void 0,indentLines:Clt,indexStack:[],join:[...plt],options:{},safe:Ilt,stack:[],unsafe:[...glt]};nN(n,r),n.options.tightDefinitions&&n.join.push(Llt),n.handle=Lat("type",{invalid:Alt,unknown:Elt,handlers:n.handlers});let i=n.handle(e,void 0,n,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return i&&i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i;function s(o){return n.stack.push(o),a;function a(){n.stack.pop()}}}function Alt(e){throw new Error("Cannot handle value `"+e+"`, expected node")}function Elt(e){const t=e;throw new Error("Cannot handle unknown node `"+t.type+"`")}function Llt(e,t){if(e.type==="definition"&&e.type===t.type)return 0}function Olt(e,t){return xlt(e,this,t)}function Dlt(e,t){return vlt(e,this,t)}function Ilt(e,t){return Slt(this,e,t)}function Vk(e){const t=this;t.compiler=r;function r(n){return Mlt(n,{...t.data("settings"),...e,extensions:t.data("toMarkdownExtensions")||[]})}}function AA(e){if(e)throw e}var Blt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bN(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var S2=Object.prototype.hasOwnProperty,xN=Object.prototype.toString,EA=Object.defineProperty,LA=Object.getOwnPropertyDescriptor,OA=function(t){return typeof Array.isArray=="function"?Array.isArray(t):xN.call(t)==="[object Array]"},DA=function(t){if(!t||xN.call(t)!=="[object Object]")return!1;var r=S2.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&S2.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var i;for(i in t);return typeof i>"u"||S2.call(t,i)},IA=function(t,r){EA&&r.name==="__proto__"?EA(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},BA=function(t,r){if(r==="__proto__")if(S2.call(t,r)){if(LA)return LA(t,r).value}else return;return t[r]},Rlt=function e(){var t,r,n,i,s,o,a=arguments[0],l=1,c=arguments.length,h=!1;for(typeof a=="boolean"&&(h=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(t=arguments[l],t!=null)for(r in t)n=BA(a,r),i=BA(t,r),a!==i&&(h&&i&&(DA(i)||(s=OA(i)))?(s?(s=!1,o=n&&OA(n)?n:[]):o=n&&DA(n)?n:{},IA(a,{name:r,newValue:e(h,o,i)})):typeof i<"u"&&IA(a,{name:r,newValue:i}));return a};const Yw=bN(Rlt);function Wk(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Plt(){const e=[],t={run:r,use:n};return t;function r(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const h=e[++s];let u=-1;if(l){o(l);return}for(;++u<i.length;)(c[u]===null||c[u]===void 0)&&(c[u]=i[u]);i=c,h?Nlt(h,a)(...c):o(null,...c)}}function n(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Nlt(e,t){let r;return n;function n(...o){const a=e.length>o.length;let l;a&&o.push(i);try{l=e.apply(this,o)}catch(c){const h=c;if(a&&r)throw h;return i(h)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){r||(r=!0,t(o,...a))}function s(o){i(null,o)}}class Ri extends Error{constructor(t,r,n){super(),typeof r=="string"&&(n=r,r=void 0);let i="",s={},o=!1;if(r&&("line"in r&&"column"in r?s={place:r}:"start"in r&&"end"in r?s={place:r}:"type"in r?s={ancestors:[r],place:r.position}:s={...r}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof n=="string"){const l=n.indexOf(":");l===-1?s.ruleId=n:(s.source=n.slice(0,l),s.ruleId=n.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=Kp(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ri.prototype.file="";Ri.prototype.name="";Ri.prototype.reason="";Ri.prototype.message="";Ri.prototype.stack="";Ri.prototype.column=void 0;Ri.prototype.line=void 0;Ri.prototype.ancestors=void 0;Ri.prototype.cause=void 0;Ri.prototype.fatal=void 0;Ri.prototype.place=void 0;Ri.prototype.ruleId=void 0;Ri.prototype.source=void 0;const Eo={basename:Flt,dirname:$lt,extname:zlt,join:Hlt,sep:"/"};function Flt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');l1(e);let r=0,n=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){r=i+1;break}}else n<0&&(s=!0,n=i+1);return n<0?"":e.slice(r,n)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){r=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(n=i):(a=-1,n=o));return r===n?n=o:n<0&&(n=e.length),e.slice(r,n)}function $lt(e){if(l1(e),e.length===0)return".";let t=-1,r=e.length,n;for(;--r;)if(e.codePointAt(r)===47){if(n){t=r;break}}else n||(n=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function zlt(e){l1(e);let t=e.length,r=-1,n=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){n=t+1;break}continue}r<0&&(o=!0,r=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||r<0||s===0||s===1&&i===r-1&&i===n+1?"":e.slice(i,r)}function Hlt(...e){let t=-1,r;for(;++t<e.length;)l1(e[t]),e[t]&&(r=r===void 0?e[t]:r+"/"+e[t]);return r===void 0?".":qlt(r)}function qlt(e){l1(e);const t=e.codePointAt(0)===47;let r=Vlt(e,!t);return r.length===0&&!t&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),t?"/"+r:r}function Vlt(e,t){let r="",n=0,i=-1,s=0,o=-1,a,l;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(r.length<2||n!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(l=r.lastIndexOf("/"),l!==r.length-1){l<0?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),i=o,s=0;continue}}else if(r.length>0){r="",n=0,i=o,s=0;continue}}t&&(r=r.length>0?r+"/..":"..",n=2)}else r.length>0?r+="/"+e.slice(i+1,o):r=e.slice(i+1,o),n=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return r}function l1(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Wlt={cwd:jlt};function jlt(){return"/"}function jk(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Ult(e){if(typeof e=="string")e=new URL(e);else if(!jk(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Glt(e)}function Glt(e){if(e.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const t=e.pathname;let r=-1;for(;++r<t.length;)if(t.codePointAt(r)===37&&t.codePointAt(r+1)===50){const n=t.codePointAt(r+2);if(n===70||n===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Xw=["history","path","basename","stem","extname","dirname"];class Klt{constructor(t){let r;t?jk(t)?r={path:t}:typeof t=="string"||Ylt(t)?r={value:t}:r=t:r={},this.cwd="cwd"in r?"":Wlt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<Xw.length;){const s=Xw[n];s in r&&r[s]!==void 0&&r[s]!==null&&(this[s]=s==="history"?[...r[s]]:r[s])}let i;for(i in r)Xw.includes(i)||(this[i]=r[i])}get basename(){return typeof this.path=="string"?Eo.basename(this.path):void 0}set basename(t){Zw(t,"basename"),Jw(t,"basename"),this.path=Eo.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Eo.dirname(this.path):void 0}set dirname(t){RA(this.basename,"dirname"),this.path=Eo.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Eo.extname(this.path):void 0}set extname(t){if(Jw(t,"extname"),RA(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Eo.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){jk(t)&&(t=Ult(t)),Zw(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Eo.basename(this.path,this.extname):void 0}set stem(t){Zw(t,"stem"),Jw(t,"stem"),this.path=Eo.join(this.dirname||"",t+(this.extname||""))}fail(t,r,n){const i=this.message(t,r,n);throw i.fatal=!0,i}info(t,r,n){const i=this.message(t,r,n);return i.fatal=void 0,i}message(t,r,n){const i=new Ri(t,r,n);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Jw(e,t){if(e&&e.includes(Eo.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Eo.sep+"`")}function Zw(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function RA(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Ylt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Xlt=function(e){const n=this.constructor.prototype,i=n[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,n),s},Jlt={}.hasOwnProperty;class $7 extends Xlt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Plt()}copy(){const t=new $7;let r=-1;for(;++r<this.attachers.length;){const n=this.attachers[r];t.use(...n)}return t.data(Yw(!0,{},this.namespace)),t}data(t,r){return typeof t=="string"?arguments.length===2?(e5("data",this.frozen),this.namespace[t]=r,this):Jlt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(e5("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const i=r.call(t,...n);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const r=Cy(t),n=this.parser||this.Parser;return Qw("parse",n),n(String(r),r)}process(t,r){const n=this;return this.freeze(),Qw("process",this.parser||this.Parser),t5("process",this.compiler||this.Compiler),r?i(void 0,r):new Promise(i);function i(s,o){const a=Cy(t),l=n.parse(a);n.run(l,a,function(h,u,f){if(h||!u||!f)return c(h);const d=u,p=n.stringify(d,f);Qlt(p)?f.value=p:f.result=p,c(h,f)});function c(h,u){h||!u?o(h):s?s(u):r(void 0,u)}}}processSync(t){let r=!1,n;return this.freeze(),Qw("processSync",this.parser||this.Parser),t5("processSync",this.compiler||this.Compiler),this.process(t,i),NA("processSync","process",r),n;function i(s,o){r=!0,AA(s),n=o}}run(t,r,n){PA(t),this.freeze();const i=this.transformers;return!n&&typeof r=="function"&&(n=r,r=void 0),n?s(void 0,n):new Promise(s);function s(o,a){const l=Cy(r);i.run(t,l,c);function c(h,u,f){const d=u||t;h?a(h):o?o(d):n(void 0,d,f)}}}runSync(t,r){let n=!1,i;return this.run(t,r,s),NA("runSync","run",n),i;function s(o,a){AA(o),i=a,n=!0}}stringify(t,r){this.freeze();const n=Cy(r),i=this.compiler||this.Compiler;return t5("stringify",i),PA(t),i(t,n)}use(t,...r){const n=this.attachers,i=this.namespace;if(e5("use",this.frozen),t!=null)if(typeof t=="function")l(t,r);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[h,...u]=c;l(h,u)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=Yw(!0,i.settings,c.settings))}function a(c){let h=-1;if(c!=null)if(Array.isArray(c))for(;++h<c.length;){const u=c[h];s(u)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,h){let u=-1,f=-1;for(;++u<n.length;)if(n[u][0]===c){f=u;break}if(f===-1)n.push([c,...h]);else if(h.length>0){let[d,...p]=h;const m=n[f][1];Wk(m)&&Wk(d)&&(d=Yw(!0,m,d)),n[f]=[c,d,...p]}}}}const Uk=new $7().freeze();function Qw(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function t5(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function e5(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function PA(e){if(!Wk(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function NA(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Cy(e){return Zlt(e)?e:new Klt(e)}function Zlt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Qlt(e){return typeof e=="string"||tct(e)}function tct(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}var vN=e=>{throw TypeError(e)},wN=(e,t,r)=>t.has(e)||vN("Cannot "+r),Ee=(e,t,r)=>(wN(e,t,"read from private field"),r?r.call(e):t.get(e)),Hr=(e,t,r)=>t.has(e)?vN("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),gr=(e,t,r,n)=>(wN(e,t,"write to private field"),t.set(e,r),r),To,J0,T2,_2,M2,Z0,Q0,xa,tp,A2,E2,ep,L2,rp,O2,D2,Vu,Jc,I2,np;class kN{}class CN{constructor(){this.elements=[],this.size=()=>this.elements.length,this.top=()=>this.elements.at(-1),this.push=t=>{var r;(r=this.top())==null||r.push(t)},this.open=t=>{this.elements.push(t)},this.close=()=>{const t=this.elements.pop();if(!t)throw DP();return t}}}class z7 extends kN{constructor(t,r,n){super(),this.type=t,this.content=r,this.attrs=n}push(t,...r){this.content.push(t,...r)}pop(){return this.content.pop()}static create(t,r,n){return new z7(t,r,n)}}const Gk=class extends CN{constructor(t){super(),Hr(this,To),Hr(this,J0),Hr(this,T2),Hr(this,_2),Hr(this,M2),Hr(this,Z0),Hr(this,Q0),gr(this,To,Me.none),gr(this,J0,r=>r.isText),gr(this,T2,(r,n)=>{if(Ee(this,J0).call(this,r)&&Ee(this,J0).call(this,n)&&Me.sameSet(r.marks,n.marks))return this.schema.text(r.text+n.text,r.marks)}),gr(this,_2,r=>{const n=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.parseMarkdown.match(r));if(!n)throw Xit(r);return n}),gr(this,M2,r=>{const n=Ee(this,_2).call(this,r);n.spec.parseMarkdown.runner(this,r,n)}),this.injectRoot=(r,n,i)=>(this.openNode(n,i),this.next(r.children),this),this.openNode=(r,n)=>(this.open(z7.create(r,[],n)),this),gr(this,Z0,()=>{gr(this,To,Me.none);const r=this.close();return Ee(this,Q0).call(this,r.type,r.attrs,r.content)}),this.closeNode=()=>{try{Ee(this,Z0).call(this)}catch(r){console.error(r)}return this},gr(this,Q0,(r,n,i)=>{const s=r.createAndFill(n,i,Ee(this,To));if(!s)throw Yit(r,n,i);return this.push(s),s}),this.addNode=(r,n,i)=>{try{Ee(this,Q0).call(this,r,n,i)}catch(s){console.error(s)}return this},this.openMark=(r,n)=>{const i=r.create(n);return gr(this,To,i.addToSet(Ee(this,To))),this},this.closeMark=r=>(gr(this,To,r.removeFromSet(Ee(this,To))),this),this.addText=r=>{try{const n=this.top();if(!n)throw DP();const i=n.pop(),s=this.schema.text(r,Ee(this,To));if(!i)return n.push(s),this;const o=Ee(this,T2).call(this,i,s);return o?(n.push(o),this):(n.push(i,s),this)}catch(n){return console.error(n),this}},this.build=()=>{let r;do r=Ee(this,Z0).call(this);while(this.size());return r},this.next=(r=[])=>([r].flat().forEach(n=>Ee(this,M2).call(this,n)),this),this.toDoc=()=>this.build(),this.run=(r,n)=>{const i=r.runSync(r.parse(n),n);return this.next(i),this},this.schema=t}};To=new WeakMap;J0=new WeakMap;T2=new WeakMap;_2=new WeakMap;M2=new WeakMap;Z0=new WeakMap;Q0=new WeakMap;Gk.create=(e,t)=>{const r=new Gk(e);return n=>(r.run(t,n),r.toDoc())};let ect=Gk;const Kk=class extends kN{constructor(t,r,n,i={}){super(),this.type=t,this.children=r,this.value=n,this.props=i,this.push=(s,...o)=>{this.children||(this.children=[]),this.children.push(s,...o)},this.pop=()=>{var s;return(s=this.children)==null?void 0:s.pop()}}};Kk.create=(e,t,r,n={})=>new Kk(e,t,r,n);let FA=Kk;const rct=e=>Object.prototype.hasOwnProperty.call(e,"size"),Yk=class extends CN{constructor(t){super(),Hr(this,xa),Hr(this,tp),Hr(this,A2),Hr(this,E2),Hr(this,ep),Hr(this,L2),Hr(this,rp),Hr(this,O2),Hr(this,D2),Hr(this,Vu),Hr(this,Jc),Hr(this,I2),Hr(this,np),gr(this,xa,Me.none),gr(this,tp,r=>{const n=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.toMarkdown.match(r));if(!n)throw Jit(r.type);return n}),gr(this,A2,r=>Ee(this,tp).call(this,r).spec.toMarkdown.runner(this,r)),gr(this,E2,(r,n)=>Ee(this,tp).call(this,r).spec.toMarkdown.runner(this,r,n)),gr(this,ep,r=>{const{marks:n}=r,i=a=>a.type.spec.priority??50;[...n].sort((a,l)=>i(a)-i(l)).every(a=>!Ee(this,E2).call(this,a,r))&&Ee(this,A2).call(this,r),n.forEach(a=>Ee(this,np).call(this,a))}),gr(this,L2,(r,n)=>{var l;if(r.type===n||((l=r.children)==null?void 0:l.length)!==1)return r;const i=c=>{var u;if(c.type===n)return c;if(((u=c.children)==null?void 0:u.length)!==1)return null;const[h]=c.children;return h?i(h):null},s=i(r);if(!s)return r;const o=s.children?[...s.children]:void 0,a={...r,children:o};return a.children=o,s.children=[a],s}),gr(this,rp,r=>{const{children:n}=r;return n&&(r.children=n.reduce((i,s,o)=>{if(o===0)return[s];const a=i.at(-1);if(a&&a.isMark&&s.isMark){s=Ee(this,L2).call(this,s,a.type);const{children:l,...c}=s,{children:h,...u}=a;if(s.type===a.type&&l&&h&&JSON.stringify(c)===JSON.stringify(u)){const f={...u,children:[...h,...l]};return i.slice(0,-1).concat(Ee(this,rp).call(this,f))}}return i.concat(s)},[])),r}),gr(this,O2,r=>{const n={...r.props,type:r.type};return r.children&&(n.children=r.children),r.value&&(n.value=r.value),n}),this.openNode=(r,n,i)=>(this.open(FA.create(r,void 0,n,i)),this),gr(this,D2,(r,n)=>{let i="",s="";const o=r.children;let a=-1,l=-1;const c=u=>{u&&u.forEach((f,d)=>{f.type==="text"&&f.value&&(a<0&&(a=d),l=d)})};if(o){c(o);const u=o==null?void 0:o[l],f=o==null?void 0:o[a];if(u&&u.value.endsWith(" ")){const d=u.value,p=d.trimEnd();s=d.slice(p.length),u.value=p}if(f&&f.value.startsWith(" ")){const d=f.value,p=d.trimStart();i=d.slice(0,d.length-p.length),f.value=p}}i.length&&Ee(this,Jc).call(this,"text",void 0,i);const h=n();return s.length&&Ee(this,Jc).call(this,"text",void 0,s),h}),gr(this,Vu,(r=!1)=>{const n=this.close(),i=()=>Ee(this,Jc).call(this,n.type,n.children,n.value,n.props);return r?Ee(this,D2).call(this,n,i):i()}),this.closeNode=()=>(Ee(this,Vu).call(this),this),gr(this,Jc,(r,n,i,s)=>{const o=FA.create(r,n,i,s),a=Ee(this,rp).call(this,Ee(this,O2).call(this,o));return this.push(a),a}),this.addNode=(r,n,i,s)=>(Ee(this,Jc).call(this,r,n,i,s),this),gr(this,I2,(r,n,i,s)=>r.isInSet(Ee(this,xa))?this:(gr(this,xa,r.addToSet(Ee(this,xa))),this.openNode(n,i,{...s,isMark:!0}))),gr(this,np,r=>{r.isInSet(Ee(this,xa))&&(gr(this,xa,r.type.removeFromSet(Ee(this,xa))),Ee(this,Vu).call(this,!0))}),this.withMark=(r,n,i,s)=>(Ee(this,I2).call(this,r,n,i,s),this),this.closeMark=r=>(Ee(this,np).call(this,r),this),this.build=()=>{let r=null;do r=Ee(this,Vu).call(this);while(this.size());return r},this.next=r=>rct(r)?(r.forEach(n=>{Ee(this,ep).call(this,n)}),this):(Ee(this,ep).call(this,r),this),this.toString=r=>r.stringify(this.build()),this.run=r=>(this.next(r),this),this.schema=t}};xa=new WeakMap;tp=new WeakMap;A2=new WeakMap;E2=new WeakMap;ep=new WeakMap;L2=new WeakMap;rp=new WeakMap;O2=new WeakMap;D2=new WeakMap;Vu=new WeakMap;Jc=new WeakMap;I2=new WeakMap;np=new WeakMap;Yk.create=(e,t)=>{const r=new Yk(e);return n=>(r.run(n),r.toString(t))};let nct=Yk;const H7=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function SN(e,t){let{$cursor:r}=e.selection;return!r||(t?!t.endOfTextblock("backward",e):r.parentOffset>0)?null:r}const TN=(e,t,r)=>{let n=SN(e,r);if(!n)return!1;let i=q7(n);if(!i){let o=n.blockRange(),a=o&&Lv(o);return a==null?!1:(t&&t(e.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(EN(e,i,t,-1))return!0;if(n.parent.content.size==0&&(gd(s,"end")||ie.isSelectable(s)))for(let o=n.depth;;o--){let a=Dv(e.doc,n.before(o),n.after(o),Bt.empty);if(a&&a.slice.size<a.to-a.from){if(t){let l=e.tr.step(a);l.setSelection(gd(s,"end")?we.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):ie.create(l.doc,i.pos-s.nodeSize)),t(l.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return s.isAtom&&i.depth==n.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},ict=(e,t,r)=>{let n=SN(e,r);if(!n)return!1;let i=q7(n);return i?sct(e,i,t):!1};function sct(e,t,r){let n=t.nodeBefore,i=n,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let h=i.lastChild;if(!h)return!1;i=h}let o=t.nodeAfter,a=o,l=t.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let h=a.firstChild;if(!h)return!1;a=h}let c=Dv(e.doc,s,l,Bt.empty);if(!c||c.from!=s||c instanceof sn&&c.slice.size>=l-s)return!1;if(r){let h=e.tr.step(c);h.setSelection(Gt.create(h.doc,s)),r(h.scrollIntoView())}return!0}function gd(e,t,r=!1){for(let n=e;n;n=t=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const _N=(e,t,r)=>{let{$head:n,empty:i}=e.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",e):n.parentOffset>0)return!1;s=q7(n)}let o=s&&s.nodeBefore;return!o||!ie.isSelectable(o)?!1:(t&&t(e.tr.setSelection(ie.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function q7(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function oct(e,t){let{$cursor:r}=e.selection;return!r||(t?!t.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)?null:r}const act=(e,t,r)=>{let n=oct(e,r);if(!n)return!1;let i=MN(n);if(!i)return!1;let s=i.nodeAfter;if(EN(e,i,t,1))return!0;if(n.parent.content.size==0&&(gd(s,"start")||ie.isSelectable(s))){let o=Dv(e.doc,n.before(),n.after(),Bt.empty);if(o&&o.slice.size<o.to-o.from){if(t){let a=e.tr.step(o);a.setSelection(gd(s,"start")?we.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):ie.create(a.doc,a.mapping.map(i.pos))),t(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==n.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},lct=(e,t,r)=>{let{$head:n,empty:i}=e.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)return!1;s=MN(n)}let o=s&&s.nodeAfter;return!o||!ie.isSelectable(o)?!1:(t&&t(e.tr.setSelection(ie.create(e.doc,s.pos)).scrollIntoView()),!0)};function MN(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let r=e.node(t);if(e.index(t)+1<r.childCount)return e.doc.resolve(e.after(t+1));if(r.type.spec.isolating)break}return null}const cct=(e,t)=>{let{$head:r,$anchor:n}=e.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function V7(e){for(let t=0;t<e.edgeCount;t++){let{type:r}=e.edge(t);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const AN=(e,t)=>{let{$head:r,$anchor:n}=e.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),s=r.indexAfter(-1),o=V7(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(t){let a=r.after(),l=e.tr.replaceWith(a,a,o.createAndFill());l.setSelection(we.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},hct=(e,t)=>{let r=e.selection,{$from:n,$to:i}=r;if(r instanceof Oi||n.parent.inlineContent||i.parent.inlineContent)return!1;let s=V7(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,a=e.tr.insert(o,s.createAndFill());a.setSelection(Gt.create(a.doc,o+1)),t(a.scrollIntoView())}return!0},uct=(e,t)=>{let{$cursor:r}=e.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let s=r.before();if(Up(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let n=r.blockRange(),i=n&&Lv(n);return i==null?!1:(t&&t(e.tr.lift(n,i).scrollIntoView()),!0)};function fct(e){return(t,r)=>{let{$from:n,$to:i}=t.selection;if(t.selection instanceof ie&&t.selection.node.isBlock)return!n.parentOffset||!Up(t.doc,n.pos)?!1:(r&&r(t.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let d=n.depth;;d--)if(n.node(d).isBlock){l=n.end(d)==n.pos+(n.depth-d),c=n.start(d)==n.pos-(n.depth-d),a=V7(n.node(d-1).contentMatchAt(n.indexAfter(d-1))),s.unshift(l&&a?{type:a}:null),o=d;break}else{if(d==1)return!1;s.unshift(null)}let h=t.tr;(t.selection instanceof Gt||t.selection instanceof Oi)&&h.deleteSelection();let u=h.mapping.map(n.pos),f=Up(h.doc,u,s.length,s);if(f||(s[0]=a?{type:a}:null,f=Up(h.doc,u,s.length,s)),!f)return!1;if(h.split(u,s.length,s),!l&&c&&n.node(o).type!=a){let d=h.mapping.map(n.before(o)),p=h.doc.resolve(d);a&&n.node(o-1).canReplaceWith(p.index(),p.index()+1,a)&&h.setNodeMarkup(h.mapping.map(n.before(o)),a)}return r&&r(h.scrollIntoView()),!0}}const dct=fct(),pct=(e,t)=>(t&&t(e.tr.setSelection(new Oi(e.doc))),!0);function mct(e,t,r){let n=t.nodeBefore,i=t.nodeAfter,s=t.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&t.parent.canReplace(s-1,s)?(r&&r(e.tr.delete(t.pos-n.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||Ov(e.doc,t.pos))?!1:(r&&r(e.tr.join(t.pos).scrollIntoView()),!0)}function EN(e,t,r,n){let i=t.nodeBefore,s=t.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&mct(e,t,r))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(r){let d=t.pos+s.nodeSize,p=Ct.empty;for(let y=o.length-1;y>=0;y--)p=Ct.from(o[y].create(null,p));p=Ct.from(i.copy(p));let m=e.tr.step(new Nn(t.pos-1,d,t.pos,d,new Bt(p,1,0),o.length,!0)),g=m.doc.resolve(d+2*o.length);g.nodeAfter&&g.nodeAfter.type==i.type&&Ov(m.doc,g.pos)&&m.join(g.pos),r(m.scrollIntoView())}return!0}let h=s.type.spec.isolating||n>0&&l?null:we.findFrom(t,1),u=h&&h.$from.blockRange(h.$to),f=u&&Lv(u);if(f!=null&&f>=t.depth)return r&&r(e.tr.lift(u,f).scrollIntoView()),!0;if(c&&gd(s,"start",!0)&&gd(i,"end")){let d=i,p=[];for(;p.push(d),!d.isTextblock;)d=d.lastChild;let m=s,g=1;for(;!m.isTextblock;m=m.firstChild)g++;if(d.canReplace(d.childCount,d.childCount,m.content)){if(r){let y=Ct.empty;for(let x=p.length-1;x>=0;x--)y=Ct.from(p[x].copy(y));let b=e.tr.step(new Nn(t.pos-p.length,t.pos+s.nodeSize,t.pos+g,t.pos+s.nodeSize-g,new Bt(y,p.length,0),0,!0));r(b.scrollIntoView())}return!0}}return!1}function LN(e){return function(t,r){let n=t.selection,i=e<0?n.$from:n.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(r&&r(t.tr.setSelection(Gt.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const gct=LN(-1),yct=LN(1);function W7(e,t=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s),a=o&&A7(o,e,t);return a?(n&&n(r.tr.wrap(o,a).scrollIntoView()),!0):!1}}function jm(e,t=null){return function(r,n){let i=!1;for(let s=0;s<r.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=r.selection.ranges[s];r.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)i=!0;else{let h=r.doc.resolve(c),u=h.index();i=h.parent.canReplaceWith(u,u+1,e)}})}if(!i)return!1;if(n){let s=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=r.selection.ranges[o];s.setBlockType(a,l,e,t)}n(s.scrollIntoView())}return!0}}function bct(e,t,r,n){for(let i=0;i<t.length;i++){let{$from:s,$to:o}=t[i],a=s.depth==0?e.inlineContent&&e.type.allowsMarkType(r):!1;if(e.nodesBetween(s.pos,o.pos,(l,c)=>{if(a)return!1;a=l.inlineContent&&l.type.allowsMarkType(r)}),a)return!0}return!1}function qv(e,t=null,r){return function(n,i){let{empty:s,$cursor:o,ranges:a}=n.selection;if(s&&!o||!bct(n.doc,a,e))return!1;if(i)if(o)e.isInSet(n.storedMarks||o.marks())?i(n.tr.removeStoredMark(e)):i(n.tr.addStoredMark(e.create(t)));else{let l,c=n.tr;l=!a.some(h=>n.doc.rangeHasMark(h.$from.pos,h.$to.pos,e));for(let h=0;h<a.length;h++){let{$from:u,$to:f}=a[h];if(!l)c.removeMark(u.pos,f.pos,e);else{let d=u.pos,p=f.pos,m=u.nodeAfter,g=f.nodeBefore,y=m&&m.isText?/^\s*/.exec(m.text)[0].length:0,b=g&&g.isText?/\s*$/.exec(g.text)[0].length:0;d+y<p&&(d+=y,p-=b),c.addMark(d,p,e.create(t))}}i(c.scrollIntoView())}return!0}}function Hd(...e){return function(t,r,n){for(let i=0;i<e.length;i++)if(e[i](t,r,n))return!0;return!1}}let r5=Hd(H7,TN,_N),$A=Hd(H7,act,lct);const Aa={Enter:Hd(cct,hct,uct,dct),"Mod-Enter":AN,Backspace:r5,"Mod-Backspace":r5,"Shift-Backspace":r5,Delete:$A,"Mod-Delete":$A,"Mod-a":pct},ON={"Ctrl-h":Aa.Backspace,"Alt-Backspace":Aa["Mod-Backspace"],"Ctrl-d":Aa.Delete,"Ctrl-Alt-Backspace":Aa["Mod-Delete"],"Alt-Delete":Aa["Mod-Delete"],"Alt-d":Aa["Mod-Delete"],"Ctrl-a":gct,"Ctrl-e":yct};for(let e in Aa)ON[e]=Aa[e];const xct=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,vct=xct?ON:Aa,wct=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),kct=typeof navigator<"u"&&/Win/.test(navigator.platform);function Cct(e){let t=e.split(/-(?!$)/),r=t[t.length-1];r=="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))wct?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(r="Alt-"+r),i&&(r="Ctrl-"+r),o&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function Sct(e){let t=Object.create(null);for(let r in e)t[Cct(r)]=e[r];return t}function n5(e,t,r=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),r&&t.shiftKey&&(e="Shift-"+e),e}function DN(e){return new xr({props:{handleKeyDown:j7(e)}})}function j7(e){let t=Sct(e);return function(r,n){let i=gB(n),s,o=t[n5(i,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let a=t[n5(i,n,!1)];if(a&&a(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(kct&&n.ctrlKey&&n.altKey)&&(s=Qa[n.keyCode])&&s!=i){let a=t[n5(s,n)];if(a&&a(r.state,r.dispatch,r))return!0}}return!1}}const bn=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},yd=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let Xk=null;const _a=function(e,t,r){let n=Xk||(Xk=document.createRange());return n.setEnd(e,r??e.nodeValue.length),n.setStart(e,t||0),n},Tct=function(){Xk=null},su=function(e,t,r,n){return r&&(zA(e,t,r,n,-1)||zA(e,t,r,n,1))},_ct=/^(img|br|input|textarea|hr)$/i;function zA(e,t,r,n,i){for(var s;;){if(e==r&&t==n)return!0;if(t==(i<0?0:gs(e))){let o=e.parentNode;if(!o||o.nodeType!=1||c1(e)||_ct.test(e.nodeName)||e.contentEditable=="false")return!1;t=bn(e)+(i<0?0:1),e=o}else if(e.nodeType==1){let o=e.childNodes[t+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=i;else return!1;else e=o,t=i<0?gs(e):0}else return!1}}function gs(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Mct(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=gs(e)}else if(e.parentNode&&!c1(e))t=bn(e),e=e.parentNode;else return null}}function Act(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!c1(e))t=bn(e)+1,e=e.parentNode;else return null}}function Ect(e,t,r){for(let n=t==0,i=t==gs(e);n||i;){if(e==r)return!0;let s=bn(e);if(e=e.parentNode,!e)return!1;n=n&&s==0,i=i&&s==gs(e)}}function c1(e){let t;for(let r=e;r&&!(t=r.pmViewDesc);r=r.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const Vv=function(e){return e.focusNode&&su(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function oh(e,t){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=e,r.key=r.code=t,r}function Lct(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function Oct(e,t,r){if(e.caretPositionFromPoint)try{let n=e.caretPositionFromPoint(t,r);if(n)return{node:n.offsetNode,offset:Math.min(gs(n.offsetNode),n.offset)}}catch{}if(e.caretRangeFromPoint){let n=e.caretRangeFromPoint(t,r);if(n)return{node:n.startContainer,offset:Math.min(gs(n.startContainer),n.startOffset)}}}const Xo=typeof navigator<"u"?navigator:null,HA=typeof document<"u"?document:null,Mc=Xo&&Xo.userAgent||"",Jk=/Edge\/(\d+)/.exec(Mc),IN=/MSIE \d/.exec(Mc),Zk=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Mc),Di=!!(IN||Zk||Jk),Zl=IN?document.documentMode:Zk?+Zk[1]:Jk?+Jk[1]:0,Cs=!Di&&/gecko\/(\d+)/i.test(Mc);Cs&&+(/Firefox\/(\d+)/.exec(Mc)||[0,0])[1];const Qk=!Di&&/Chrome\/(\d+)/.exec(Mc),Rn=!!Qk,BN=Qk?+Qk[1]:0,ci=!Di&&!!Xo&&/Apple Computer/.test(Xo.vendor),bd=ci&&(/Mobile\/\w+/.test(Mc)||!!Xo&&Xo.maxTouchPoints>2),ds=bd||(Xo?/Mac/.test(Xo.platform):!1),Dct=Xo?/Win/.test(Xo.platform):!1,Ha=/Android \d/.test(Mc),h1=!!HA&&"webkitFontSmoothing"in HA.documentElement.style,Ict=h1?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Bct(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function da(e,t){return typeof e=="number"?e:e[t]}function Rct(e){let t=e.getBoundingClientRect(),r=t.width/e.offsetWidth||1,n=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*r,top:t.top,bottom:t.top+e.clientHeight*n}}function qA(e,t,r){let n=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let o=r||e.dom;o;){if(o.nodeType!=1){o=yd(o);continue}let a=o,l=a==s.body,c=l?Bct(s):Rct(a),h=0,u=0;if(t.top<c.top+da(n,"top")?u=-(c.top-t.top+da(i,"top")):t.bottom>c.bottom-da(n,"bottom")&&(u=t.bottom-t.top>c.bottom-c.top?t.top+da(i,"top")-c.top:t.bottom-c.bottom+da(i,"bottom")),t.left<c.left+da(n,"left")?h=-(c.left-t.left+da(i,"left")):t.right>c.right-da(n,"right")&&(h=t.right-c.right+da(i,"right")),h||u)if(l)s.defaultView.scrollBy(h,u);else{let d=a.scrollLeft,p=a.scrollTop;u&&(a.scrollTop+=u),h&&(a.scrollLeft+=h);let m=a.scrollLeft-d,g=a.scrollTop-p;t={left:t.left-m,top:t.top-g,right:t.right-m,bottom:t.bottom-g}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:yd(o)}}function Pct(e){let t=e.dom.getBoundingClientRect(),r=Math.max(0,t.top),n,i;for(let s=(t.left+t.right)/2,o=r+1;o<Math.min(innerHeight,t.bottom);o+=5){let a=e.root.elementFromPoint(s,o);if(!a||a==e.dom||!e.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=r-20){n=a,i=l.top;break}}return{refDOM:n,refTop:i,stack:RN(e.dom)}}function RN(e){let t=[],r=e.ownerDocument;for(let n=e;n&&(t.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),e!=r);n=yd(n));return t}function Nct({refDOM:e,refTop:t,stack:r}){let n=e?e.getBoundingClientRect().top:0;PN(r,n==0?0:n-t)}function PN(e,t){for(let r=0;r<e.length;r++){let{dom:n,top:i,left:s}=e[r];n.scrollTop!=i+t&&(n.scrollTop=i+t),n.scrollLeft!=s&&(n.scrollLeft=s)}}let Bu=null;function Fct(e){if(e.setActive)return e.setActive();if(Bu)return e.focus(Bu);let t=RN(e);e.focus(Bu==null?{get preventScroll(){return Bu={preventScroll:!0},!0}}:void 0),Bu||(Bu=!1,PN(t,0))}function NN(e,t){let r,n=2e8,i,s=0,o=t.top,a=t.top,l,c;for(let h=e.firstChild,u=0;h;h=h.nextSibling,u++){let f;if(h.nodeType==1)f=h.getClientRects();else if(h.nodeType==3)f=_a(h).getClientRects();else continue;for(let d=0;d<f.length;d++){let p=f[d];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let m=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(m<n){r=h,n=m,i=m&&r.nodeType==3?{left:p.right<t.left?p.right:p.left,top:t.top}:t,h.nodeType==1&&m&&(s=u+(t.left>=(p.left+p.right)/2?1:0));continue}}else p.top>t.top&&!l&&p.left<=t.left&&p.right>=t.left&&(l=h,c={left:Math.max(p.left,Math.min(p.right,t.left)),top:p.top});!r&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(s=u+1)}}return!r&&l&&(r=l,i=c,n=0),r&&r.nodeType==3?$ct(r,i):!r||n&&r.nodeType==1?{node:e,offset:s}:NN(r,i)}function $ct(e,t){let r=e.nodeValue.length,n=document.createRange();for(let i=0;i<r;i++){n.setEnd(e,i+1),n.setStart(e,i);let s=Tl(n,1);if(s.top!=s.bottom&&U7(t,s))return{node:e,offset:i+(t.left>=(s.left+s.right)/2?1:0)}}return{node:e,offset:0}}function U7(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function zct(e,t){let r=e.parentNode;return r&&/^li$/i.test(r.nodeName)&&t.left<e.getBoundingClientRect().left?r:e}function Hct(e,t,r){let{node:n,offset:i}=NN(t,r),s=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();s=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return e.docView.posFromDOM(n,i,s)}function qct(e,t,r,n){let i=-1;for(let s=t,o=!1;s!=e.dom;){let a=e.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>n.left||l.top>n.top?i=a.posBefore:(!o&&l.right<n.left||l.bottom<n.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,r,-1)}function FN(e,t,r){let n=e.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(t.top-r.top)/(r.bottom-r.top))-2)),s=i;;){let o=e.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(U7(t,c))return FN(o,t,c)}}if((s=(s+1)%n)==i)break}return e}function Vct(e,t){let r=e.dom.ownerDocument,n,i=0,s=Oct(r,t.left,t.top);s&&({node:n,offset:i}=s);let o=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top),a;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=e.dom.getBoundingClientRect();if(!U7(t,c)||(o=FN(e.dom,t,c),!o))return null}if(ci)for(let c=o;n&&c;c=yd(c))c.draggable&&(n=void 0);if(o=zct(o,t),n){if(Cs&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let h=n.childNodes[i],u;h.nodeName=="IMG"&&(u=h.getBoundingClientRect()).right<=t.left&&u.bottom>t.top&&i++}let c;h1&&i&&n.nodeType==1&&(c=n.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=t.top&&i--,n==e.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&t.top>n.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(a=qct(e,n,i,t))}a==null&&(a=Hct(e,o,t));let l=e.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function VA(e){return e.top<e.bottom||e.left<e.right}function Tl(e,t){let r=e.getClientRects();if(r.length){let n=r[t<0?0:r.length-1];if(VA(n))return n}return Array.prototype.find.call(r,VA)||e.getBoundingClientRect()}const Wct=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function $N(e,t,r){let{node:n,offset:i,atom:s}=e.docView.domFromPos(t,r<0?-1:1),o=h1||Cs;if(n.nodeType==3)if(o&&(Wct.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let l=Tl(_a(n,i,i),r);if(Cs&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let c=Tl(_a(n,i-1,i-1),-1);if(c.top==l.top){let h=Tl(_a(n,i,i+1),-1);if(h.top!=l.top)return _0(h,h.left<c.left)}}return l}else{let l=i,c=i,h=r<0?1:-1;return r<0&&!i?(c++,h=-1):r>=0&&i==n.nodeValue.length?(l--,h=1):r<0?l--:c++,_0(Tl(_a(n,l,c),h),h<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&i&&(r<0||i==gs(n))){let l=n.childNodes[i-1];if(l.nodeType==1)return i5(l.getBoundingClientRect(),!1)}if(s==null&&i<gs(n)){let l=n.childNodes[i];if(l.nodeType==1)return i5(l.getBoundingClientRect(),!0)}return i5(n.getBoundingClientRect(),r>=0)}if(s==null&&i&&(r<0||i==gs(n))){let l=n.childNodes[i-1],c=l.nodeType==3?_a(l,gs(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return _0(Tl(c,1),!1)}if(s==null&&i<gs(n)){let l=n.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?_a(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return _0(Tl(c,-1),!0)}return _0(Tl(n.nodeType==3?_a(n):n,-r),r>=0)}function _0(e,t){if(e.width==0)return e;let r=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:r,right:r}}function i5(e,t){if(e.height==0)return e;let r=t?e.top:e.bottom;return{top:r,bottom:r,left:e.left,right:e.right}}function zN(e,t,r){let n=e.state,i=e.root.activeElement;n!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return r()}finally{n!=t&&e.updateState(n),i!=e.dom&&i&&i.focus()}}function jct(e,t,r){let n=t.selection,i=r=="up"?n.$from:n.$to;return zN(e,t,()=>{let{node:s}=e.docView.domFromPos(i.pos,r=="up"?-1:1);for(;;){let a=e.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=$N(e,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=_a(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let h=l[c];if(h.bottom>h.top+1&&(r=="up"?o.top-h.top>(h.bottom-o.top)*2:h.bottom-o.bottom>(o.bottom-h.top)*2))return!1}}return!0})}const Uct=/[\u0590-\u08ac]/;function Gct(e,t,r){let{$head:n}=t.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,s=!i,o=i==n.parent.content.size,a=e.domSelection();return a?!Uct.test(n.parent.textContent)||!a.modify?r=="left"||r=="backward"?s:o:zN(e,t,()=>{let{focusNode:l,focusOffset:c,anchorNode:h,anchorOffset:u}=e.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",r,"character");let d=n.depth?e.docView.domAfterPos(n.before()):e.dom,{focusNode:p,focusOffset:m}=e.domSelectionRange(),g=p&&!d.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(h,u),l&&(l!=h||c!=u)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),g}):n.pos==n.start()||n.pos==n.end()}let WA=null,jA=null,UA=!1;function Kct(e,t,r){return WA==t&&jA==r?UA:(WA=t,jA=r,UA=r=="up"||r=="down"?jct(e,t,r):Gct(e,t,r))}const Ss=0,GA=1,uh=2,Jo=3;class u1{constructor(t,r,n,i){this.parent=t,this.children=r,this.dom=n,this.contentDOM=i,this.dirty=Ss,n.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,r,n){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let r=0;r<this.children.length;r++)t+=this.children[r].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let r=0,n=this.posAtStart;;r++){let i=this.children[r];if(i==t)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,r,n){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(n<0){let s,o;if(t==this.contentDOM)s=t.childNodes[r-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(t==this.contentDOM)s=t.childNodes[r];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=r>bn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&r==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(t,r=!1){for(let n=!0,i=t;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!r||s.node))if(n&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))n=!1;else return s}}getDesc(t){let r=t.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(t,r,n){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,r,n)}return-1}descAt(t){for(let r=0,n=0;r<this.children.length;r++){let i=this.children[r],s=n+i.size;if(n==t&&s!=n){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(t<s)return i.descAt(t-n-i.border);n=s}}domFromPos(t,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let n=0,i=0;for(let s=0;n<this.children.length;n++){let o=this.children[n],a=s+o.size;if(a>t||o instanceof qN){i=t-s;break}s=a}if(i)return this.children[n].domFromPos(i-this.children[n].border,r);for(let s;n&&!(s=this.children[n-1]).size&&s instanceof HN&&s.side>=0;n--);if(r<=0){let s,o=!0;for(;s=n?this.children[n-1]:null,!(!s||s.dom.parentNode==this.contentDOM);n--,o=!1);return s&&r&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,r):{node:this.contentDOM,offset:s?bn(s.dom)+1:0}}else{let s,o=!0;for(;s=n<this.children.length?this.children[n]:null,!(!s||s.dom.parentNode==this.contentDOM);n++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,r):{node:this.contentDOM,offset:s?bn(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=n,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&t<=c){let h=o+l.border;if(t>=h&&r<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,r,h);t=o;for(let u=a;u>0;u--){let f=this.children[u-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=bn(f.dom)+1;break}t-=f.size}i==-1&&(i=0)}if(i>-1&&(c>r||a==this.children.length-1)){r=c;for(let h=a+1;h<this.children.length;h++){let u=this.children[h];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){s=bn(u.dom);break}r+=u.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:t,to:r,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[t<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(t)}domAfterPos(t){let{node:r,offset:n}=this.domFromPos(t,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+t);return r.childNodes[n]}setSelection(t,r,n,i=!1){let s=Math.min(t,r),o=Math.max(t,r);for(let d=0,p=0;d<this.children.length;d++){let m=this.children[d],g=p+m.size;if(s>p&&o<g)return m.setSelection(t-p-m.border,r-p-m.border,n,i);p=g}let a=this.domFromPos(t,t?-1:1),l=r==t?a:this.domFromPos(r,r?-1:1),c=n.root.getSelection(),h=n.domSelectionRange(),u=!1;if((Cs||ci)&&t==r){let{node:d,offset:p}=a;if(d.nodeType==3){if(u=!!(p&&d.nodeValue[p-1]==`
`),u&&p==d.nodeValue.length)for(let m=d,g;m;m=m.parentNode){if(g=m.nextSibling){g.nodeName=="BR"&&(a=l={node:g.parentNode,offset:bn(g)+1});break}let y=m.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let m=d.childNodes[p-1];u=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Cs&&h.focusNode&&h.focusNode!=l.node&&h.focusNode.nodeType==1){let d=h.focusNode.childNodes[h.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||u&&ci)&&su(a.node,a.offset,h.anchorNode,h.anchorOffset)&&su(l.node,l.offset,h.focusNode,h.focusOffset))return;let f=!1;if((c.extend||t==r)&&!(u&&Cs)){c.collapse(a.node,a.offset);try{t!=r&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(t>r){let p=a;a=l,l=p}let d=document.createRange();d.setEnd(l.node,l.offset),d.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(d)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,r){for(let n=0,i=0;i<this.children.length;i++){let s=this.children[i],o=n+s.size;if(n==o?t<=o&&r>=n:t<o&&r>n){let a=n+s.border,l=o-s.border;if(t>=a&&r<=l){this.dirty=t==n||r==o?uh:GA,t==a&&r==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Jo:s.markDirty(t-a,r-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?uh:Jo}n=o}this.dirty=uh}markParentsDirty(){let t=1;for(let r=this.parent;r;r=r.parent,t++){let n=t==1?uh:GA;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class HN extends u1{constructor(t,r,n,i){let s,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!r.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=r,this.widget=r,s=this}matchesWidget(t){return this.dirty==Ss&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let r=this.widget.spec.stopEvent;return r?r(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Yct extends u1{constructor(t,r,n,i){super(t,[],r,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(t,r){return t!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class ou extends u1{constructor(t,r,n,i,s){super(t,[],n,i),this.mark=r,this.spec=s}static create(t,r,n,i){let s=i.nodeViews[r.type.name],o=s&&s(r,i,n);return(!o||!o.dom)&&(o=xu.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new ou(t,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Jo||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=Jo&&this.mark.eq(t)}markDirty(t,r){if(super.markDirty(t,r),this.dirty!=Ss){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Ss}}slice(t,r,n){let i=ou.create(this.parent,this.mark,!0,n),s=this.children,o=this.size;r<o&&(s=eC(s,r,o,n)),t>0&&(s=eC(s,0,t,n));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ql extends u1{constructor(t,r,n,i,s,o,a,l,c){super(t,[],s,o),this.node=r,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=a}static create(t,r,n,i,s,o){let a=s.nodeViews[r.type.name],l,c=a&&a(r,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},n,i),h=c&&c.dom,u=c&&c.contentDOM;if(r.isText){if(!h)h=document.createTextNode(r.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:u}=xu.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!u&&!r.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),r.type.spec.draggable&&(h.draggable=!0));let f=h;return h=jN(h,n,r),c?l=new Xct(t,r,n,i,h,u||null,f,c,s,o+1):r.isText?new Wv(t,r,n,i,h,f,s):new Ql(t,r,n,i,h,u||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){t.contentElement=n.dom.parentNode;break}}t.contentElement||(t.getContent=()=>Ct.empty)}return t}matchesNode(t,r,n){return this.dirty==Ss&&t.eq(this.node)&&Xb(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,r){let n=this.node.inlineContent,i=r,s=t.composing?this.localCompositionInfo(t,r):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new Zct(this,o&&o.node,t);eht(this.node,this.innerDeco,(c,h,u)=>{c.spec.marks?l.syncToMarks(c.spec.marks,n,t):c.type.side>=0&&!u&&l.syncToMarks(h==this.node.childCount?Me.none:this.node.child(h).marks,n,t),l.placeWidget(c,t,i)},(c,h,u,f)=>{l.syncToMarks(c.marks,n,t);let d;l.findNodeMatch(c,h,u,f)||a&&t.state.selection.from>i&&t.state.selection.to<i+c.nodeSize&&(d=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,h,u,d,t)||l.updateNextNode(c,h,u,t,f,i)||l.addNode(c,h,u,t,i),i+=c.nodeSize}),l.syncToMarks([],n,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==uh)&&(o&&this.protectLocalComposition(t,o),VN(this.contentDOM,this.children,t),bd&&rht(this.dom))}localCompositionInfo(t,r){let{from:n,to:i}=t.state.selection;if(!(t.state.selection instanceof Gt)||n<r||i>r+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=nht(this.node.content,o,n-r,i-r);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:r,pos:n,text:i}){if(this.getDesc(r))return;let s=r;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new Yct(this,s,r,i);t.input.compositionNodes.push(o),this.children=eC(this.children,n,n+i.length,t,o)}update(t,r,n,i){return this.dirty==Jo||!t.sameMarkup(this.node)?!1:(this.updateInner(t,r,n,i),!0)}updateInner(t,r,n,i){this.updateOuterDeco(r),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Ss}updateOuterDeco(t){if(Xb(t,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=WN(this.dom,this.nodeDOM,tC(this.outerDeco,this.node,r),tC(t,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function KA(e,t,r,n,i){jN(n,t,e);let s=new Ql(void 0,e,t,r,n,n,n,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Wv extends Ql{constructor(t,r,n,i,s,o,a){super(t,r,n,i,s,null,o,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,r,n,i){return this.dirty==Jo||this.dirty!=Ss&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=Ss||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=Ss,!0)}inParent(){let t=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,r,n){return t==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(t,r,n)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,r,n){let i=this.node.cut(t,r),s=document.createTextNode(i.text);return new Wv(this.parent,i,this.outerDeco,this.innerDeco,s,s,n)}markDirty(t,r){super.markDirty(t,r),this.dom!=this.nodeDOM&&(t==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=Jo)}get domAtom(){return!1}isText(t){return this.node.text==t}}class qN extends u1{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==Ss&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Xct extends Ql{constructor(t,r,n,i,s,o,a,l,c,h){super(t,r,n,i,s,o,a,c,h),this.spec=l}update(t,r,n,i){if(this.dirty==Jo)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,r,n);return s&&this.updateInner(t,r,n,i),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,r,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,r,n,i){this.spec.setSelection?this.spec.setSelection(t,r,n.root):super.setSelection(t,r,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function VN(e,t,r){let n=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let o=t[s],a=o.dom;if(a.parentNode==e){for(;a!=n;)n=YA(n),i=!0;n=n.nextSibling}else i=!0,e.insertBefore(a,n);if(o instanceof ou){let l=n?n.previousSibling:e.lastChild;VN(o.contentDOM,o.children,r),n=l?l.nextSibling:e.firstChild}}for(;n;)n=YA(n),i=!0;i&&r.trackWrites==e&&(r.trackWrites=null)}const Yp=function(e){e&&(this.nodeName=e)};Yp.prototype=Object.create(null);const fh=[new Yp];function tC(e,t,r){if(e.length==0)return fh;let n=r?fh[0]:new Yp,i=[n];for(let s=0;s<e.length;s++){let o=e[s].type.attrs;if(o){o.nodeName&&i.push(n=new Yp(o.nodeName));for(let a in o){let l=o[a];l!=null&&(r&&i.length==1&&i.push(n=new Yp(t.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+l:a=="style"?n.style=(n.style?n.style+";":"")+l:a!="nodeName"&&(n[a]=l))}}}return i}function WN(e,t,r,n){if(r==fh&&n==fh)return t;let i=t;for(let s=0;s<n.length;s++){let o=n[s],a=r[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=e&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=fh[0]),i=l}Jct(i,a||fh[0],o)}return i}function Jct(e,t,r){for(let n in t)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&e.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=t[n]&&e.setAttribute(n,r[n]);if(t.class!=r.class){let n=t.class?t.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let s=0;s<n.length;s++)i.indexOf(n[s])==-1&&e.classList.remove(n[s]);for(let s=0;s<i.length;s++)n.indexOf(i[s])==-1&&e.classList.add(i[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=r.style){if(t.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(t.style);)e.style.removeProperty(i[1])}r.style&&(e.style.cssText+=r.style)}}function jN(e,t,r){return WN(e,e,fh,tC(t,r,e.nodeType!=1))}function Xb(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].type.eq(t[r].type))return!1;return!0}function YA(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class Zct{constructor(t,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=Qct(t.node.content,t)}destroyBetween(t,r){if(t!=r){for(let n=t;n<r;n++)this.top.children[n].destroy();this.top.children.splice(t,r-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,r,n){let i=0,s=this.stack.length>>1,o=Math.min(s,t.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Ss,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(t[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=ou.create(this.top,t[s],r,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(t,r,n,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(t,r,n))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(t,r,n)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,r,n,i,s){let o=this.top.children[i];return o.dirty==Jo&&o.dom==o.contentDOM&&(o.dirty=uh),o.update(t,r,n,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let r=t.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=t.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}t=r}}updateNextNode(t,r,n,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ql){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let h=l.dom,u,f=this.isLocked(h)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=Jo&&Xb(r,l.outerDeco));if(!f&&l.update(t,r,n,i))return this.destroyBetween(this.index,a),l.dom!=h&&(this.changed=!0),this.index++,!0;if(!f&&(u=this.recreateWrapper(l,t,r,n,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=u,u.contentDOM&&(u.dirty=uh,u.updateChildren(i,o+1),u.dirty=Ss),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,r,n,i,s,o){if(t.dirty||r.isAtom||!t.children.length||!t.node.content.eq(r.content)||!Xb(n,t.outerDeco)||!i.eq(t.innerDeco))return null;let a=Ql.create(this.top,r,n,i,s,o);if(a.contentDOM){a.children=t.children,t.children=[];for(let l of a.children)l.parent=a}return t.destroy(),a}addNode(t,r,n,i,s){let o=Ql.create(this.top,t,r,n,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,r,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new HN(this.top,t,r,n);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],r=this.top;for(;t instanceof ou;)r=t,t=r.children[r.children.length-1];(!t||!(t instanceof Wv)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((ci||Rn)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(t,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(t))this.index++;else{let n=document.createElement(t);t=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),t=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new qN(this.top,[],n,null);r!=this.top?r.children.push(i):r.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function Qct(e,t){let r=t,n=r.children.length,i=e.childCount,s=new Map,o=[];t:for(;i>0;){let a;for(;;)if(n){let c=r.children[n-1];if(c instanceof ou)r=c,n=c.children.length;else{a=c,n--;break}}else{if(r==t)break t;n=r.parent.children.indexOf(r),r=r.parent}let l=a.node;if(l){if(l!=e.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function tht(e,t){return e.type.side-t.type.side}function eht(e,t,r,n){let i=t.locals(e),s=0;if(i.length==0){for(let c=0;c<e.childCount;c++){let h=e.child(c);n(h,i,t.forChild(s,h),c),s+=h.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let h,u;for(;o<i.length&&i[o].to==s;){let g=i[o++];g.widget&&(h?(u||(u=[h])).push(g):h=g)}if(h)if(u){u.sort(tht);for(let g=0;g<u.length;g++)r(u[g],c,!!l)}else r(h,c,!!l);let f,d;if(l)d=-1,f=l,l=null;else if(c<e.childCount)d=c,f=e.child(c++);else break;for(let g=0;g<a.length;g++)a[g].to<=s&&a.splice(g--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+f.nodeSize;if(f.isText){let g=p;o<i.length&&i[o].from<g&&(g=i[o].from);for(let y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<p&&(l=f.cut(g-s),f=f.cut(0,g-s),p=g,d=-1)}else for(;o<i.length&&i[o].to<p;)o++;let m=f.isInline&&!f.isLeaf?a.filter(g=>!g.inline):a.slice();n(f,m,t.forChild(s,f),d),s=p}}function rht(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function nht(e,t,r,n){for(let i=0,s=0;i<e.childCount&&s<=n;){let o=e.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<e.childCount;){let c=e.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=r){if(s>=n&&l.slice(n-t.length-a,n-a)==t)return n-t.length;let c=a<n?l.lastIndexOf(t,n-a-1):-1;if(c>=0&&c+t.length+a>=r)return a+c;if(r==n&&l.length>=n+t.length-a&&l.slice(n-a,n-a+t.length)==t)return n}}return-1}function eC(e,t,r,n,i){let s=[];for(let o=0,a=0;o<e.length;o++){let l=e[o],c=a,h=a+=l.size;c>=r||h<=t?s.push(l):(c<t&&s.push(l.slice(0,t-c,n)),i&&(s.push(i),i=void 0),h>r&&s.push(l.slice(r-c,l.size,n)))}return s}function G7(e,t=null){let r=e.domSelectionRange(),n=e.state.doc;if(!r.focusNode)return null;let i=e.docView.nearestDesc(r.focusNode),s=i&&i.size==0,o=e.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let a=n.resolve(o),l,c;if(Vv(r)){for(l=o;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&ie.isSelectable(u)&&i.parent&&!(u.isInline&&Ect(r.focusNode,r.focusOffset,i.dom))){let f=i.posBefore;c=new ie(o==f?a:n.resolve(f))}}else{if(r instanceof e.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let u=o,f=o;for(let d=0;d<r.rangeCount;d++){let p=r.getRangeAt(d);u=Math.min(u,e.docView.posFromDOM(p.startContainer,p.startOffset,1)),f=Math.max(f,e.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(u<0)return null;[l,o]=f==e.state.selection.anchor?[f,u]:[u,f],a=n.resolve(o)}else l=e.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let h=n.resolve(l);if(!c){let u=t=="pointer"||e.state.selection.head<a.pos&&!s?1:-1;c=K7(e,h,a,u)}return c}function UN(e){return e.editable?e.hasFocus():KN(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Ga(e,t=!1){let r=e.state.selection;if(GN(e,r),!!UN(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Rn){let n=e.domSelectionRange(),i=e.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&su(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)sht(e);else{let{anchor:n,head:i}=r,s,o;XA&&!(r instanceof Gt)&&(r.$from.parent.inlineContent||(s=JA(e,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=JA(e,r.to))),e.docView.setSelection(n,i,e,t),XA&&(s&&ZA(s),o&&ZA(o)),r.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&iht(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const XA=ci||Rn&&BN<63;function JA(e,t){let{node:r,offset:n}=e.docView.domFromPos(t,0),i=n<r.childNodes.length?r.childNodes[n]:null,s=n?r.childNodes[n-1]:null;if(ci&&i&&i.contentEditable=="false")return s5(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return s5(i);if(s)return s5(s)}}function s5(e){return e.contentEditable="true",ci&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function ZA(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function iht(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let r=e.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!UN(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function sht(e){let t=e.domSelection();if(!t)return;let r=e.cursorWrapper.dom,n=r.nodeName=="IMG";n?t.collapse(r.parentNode,bn(r)+1):t.collapse(r,0),!n&&!e.state.selection.visible&&Di&&Zl<=11&&(r.disabled=!0,r.disabled=!1)}function GN(e,t){if(t instanceof ie){let r=e.docView.descAt(t.from);r!=e.lastSelectedViewDesc&&(QA(e),r&&r.selectNode(),e.lastSelectedViewDesc=r)}else QA(e)}function QA(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function K7(e,t,r,n){return e.someProp("createSelectionBetween",i=>i(e,t,r))||Gt.between(t,r,n)}function tE(e){return e.editable&&!e.hasFocus()?!1:KN(e)}function KN(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function oht(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),r=e.domSelectionRange();return su(t.node,t.offset,r.anchorNode,r.anchorOffset)}function rC(e,t){let{$anchor:r,$head:n}=e.selection,i=t>0?r.max(n):r.min(n),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&we.findFrom(s,t)}function Dl(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function eE(e,t,r){let n=e.state.selection;if(n instanceof Gt)if(r.indexOf("s")>-1){let{$head:i}=n,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=e.state.doc.resolve(i.pos+s.nodeSize*(t<0?-1:1));return Dl(e,new Gt(n.$anchor,o))}else if(n.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=rC(e.state,t);return i&&i instanceof ie?Dl(e,i):!1}else if(!(ds&&r.indexOf("m")>-1)){let i=n.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=e.docView.descAt(a))&&!o.contentDOM?ie.isSelectable(s)?Dl(e,new ie(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):h1?Dl(e,new Gt(e.state.doc.resolve(t<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(n instanceof ie&&n.node.isInline)return Dl(e,new Gt(t>0?n.$to:n.$from));{let i=rC(e.state,t);return i?Dl(e,i):!1}}}function Jb(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Xp(e,t){let r=e.pmViewDesc;return r&&r.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function Ru(e,t){return t<0?aht(e):lht(e)}function aht(e){let t=e.domSelectionRange(),r=t.focusNode,n=t.focusOffset;if(!r)return;let i,s,o=!1;for(Cs&&r.nodeType==1&&n<Jb(r)&&Xp(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let a=r.childNodes[n-1];if(Xp(a,-1))i=r,s=--n;else if(a.nodeType==3)r=a,n=r.nodeValue.length;else break}}else{if(YN(r))break;{let a=r.previousSibling;for(;a&&Xp(a,-1);)i=r.parentNode,s=bn(a),a=a.previousSibling;if(a)r=a,n=Jb(r);else{if(r=r.parentNode,r==e.dom)break;n=0}}}o?nC(e,r,n):i&&nC(e,i,s)}function lht(e){let t=e.domSelectionRange(),r=t.focusNode,n=t.focusOffset;if(!r)return;let i=Jb(r),s,o;for(;;)if(n<i){if(r.nodeType!=1)break;let a=r.childNodes[n];if(Xp(a,1))s=r,o=++n;else break}else{if(YN(r))break;{let a=r.nextSibling;for(;a&&Xp(a,1);)s=a.parentNode,o=bn(a)+1,a=a.nextSibling;if(a)r=a,n=0,i=Jb(r);else{if(r=r.parentNode,r==e.dom)break;n=i=0}}}s&&nC(e,s,o)}function YN(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function cht(e,t){for(;e&&t==e.childNodes.length&&!c1(e);)t=bn(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let r=e.childNodes[t];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;e=r,t=0}}function hht(e,t){for(;e&&!t&&!c1(e);)t=bn(e),e=e.parentNode;for(;e&&t;){let r=e.childNodes[t-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;e=r,t=e.childNodes.length}}function nC(e,t,r){if(t.nodeType!=3){let s,o;(o=cht(t,r))?(t=o,r=0):(s=hht(t,r))&&(t=s,r=s.nodeValue.length)}let n=e.domSelection();if(!n)return;if(Vv(n)){let s=document.createRange();s.setEnd(t,r),s.setStart(t,r),n.removeAllRanges(),n.addRange(s)}else n.extend&&n.extend(t,r);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Ga(e)},50)}function rE(e,t){let r=e.state.doc.resolve(t);if(!(Rn||Dct)&&r.parent.inlineContent){let i=e.coordsAtPos(t);if(t>r.start()){let s=e.coordsAtPos(t-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(t<r.end()){let s=e.coordsAtPos(t+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function nE(e,t,r){let n=e.state.selection;if(n instanceof Gt&&!n.empty||r.indexOf("s")>-1||ds&&r.indexOf("m")>-1)return!1;let{$from:i,$to:s}=n;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=rC(e.state,t);if(o&&o instanceof ie)return Dl(e,o)}if(!i.parent.inlineContent){let o=t<0?i:s,a=n instanceof Oi?we.near(o,t):we.findFrom(o,t);return a?Dl(e,a):!1}return!1}function iE(e,t){if(!(e.state.selection instanceof Gt))return!0;let{$head:r,$anchor:n,empty:i}=e.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){let o=e.state.tr;return t<0?o.delete(r.pos-s.nodeSize,r.pos):o.delete(r.pos,r.pos+s.nodeSize),e.dispatch(o),!0}return!1}function sE(e,t,r){e.domObserver.stop(),t.contentEditable=r,e.domObserver.start()}function uht(e){if(!ci||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:r}=e.domSelectionRange();if(t&&t.nodeType==1&&r==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let n=t.firstChild;sE(e,n,"true"),setTimeout(()=>sE(e,n,"false"),20)}return!1}function fht(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function dht(e,t){let r=t.keyCode,n=fht(t);if(r==8||ds&&r==72&&n=="c")return iE(e,-1)||Ru(e,-1);if(r==46&&!t.shiftKey||ds&&r==68&&n=="c")return iE(e,1)||Ru(e,1);if(r==13||r==27)return!0;if(r==37||ds&&r==66&&n=="c"){let i=r==37?rE(e,e.state.selection.from)=="ltr"?-1:1:-1;return eE(e,i,n)||Ru(e,i)}else if(r==39||ds&&r==70&&n=="c"){let i=r==39?rE(e,e.state.selection.from)=="ltr"?1:-1:1;return eE(e,i,n)||Ru(e,i)}else{if(r==38||ds&&r==80&&n=="c")return nE(e,-1,n)||Ru(e,-1);if(r==40||ds&&r==78&&n=="c")return uht(e)||nE(e,1,n)||Ru(e,1);if(n==(ds?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function Y7(e,t){e.someProp("transformCopied",d=>{t=d(t,e)});let r=[],{content:n,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,s--;let d=n.firstChild;r.push(d.type.name,d.attrs!=d.type.defaultAttrs?d.attrs:null),n=d.content}let o=e.someProp("clipboardSerializer")||xu.fromSchema(e.state.schema),a=eF(),l=a.createElement("div");l.appendChild(o.serializeFragment(n,{document:a}));let c=l.firstChild,h,u=0;for(;c&&c.nodeType==1&&(h=tF[c.nodeName.toLowerCase()]);){for(let d=h.length-1;d>=0;d--){let p=a.createElement(h[d]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),u++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${u?` -${u}`:""} ${JSON.stringify(r)}`);let f=e.someProp("clipboardTextSerializer",d=>d(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:f,slice:t}}function XN(e,t,r,n,i){let s=i.parent.type.spec.code,o,a;if(!r&&!t)return null;let l=!!t&&(n||s||!r);if(l){if(e.someProp("transformPastedText",f=>{t=f(t,s||n,e)}),s)return a=new Bt(Ct.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",f=>{a=f(a,e,!0)}),a;let u=e.someProp("clipboardTextParser",f=>f(t,i,n,e));if(u)a=u;else{let f=i.marks(),{schema:d}=e.state,p=xu.fromSchema(d);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(d.text(m,f)))})}}else e.someProp("transformPastedHTML",u=>{r=u(r,e)}),o=yht(r),h1&&bht(o);let c=o&&o.querySelector("[data-pm-slice]"),h=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let u=+h[3];u>0;u--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||ru.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||h),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!pht.test(f.parentNode.nodeName)?{ignore:!0}:null}})),h)a=xht(oE(a,+h[1],+h[2]),h[4]);else if(a=Bt.maxOpen(mht(a.content,i),!0),a.openStart||a.openEnd){let u=0,f=0;for(let d=a.content.firstChild;u<a.openStart&&!d.type.spec.isolating;u++,d=d.firstChild);for(let d=a.content.lastChild;f<a.openEnd&&!d.type.spec.isolating;f++,d=d.lastChild);a=oE(a,u,f)}return e.someProp("transformPasted",u=>{a=u(a,e,l)}),a}const pht=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function mht(e,t){if(e.childCount<2)return e;for(let r=t.depth;r>=0;r--){let i=t.node(r).contentMatchAt(t.index(r)),s,o=[];if(e.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&ZN(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=QN(o[o.length-1],s.length));let h=JN(a,l);o.push(h),i=i.matchType(h.type),s=l}}),o)return Ct.from(o)}return e}function JN(e,t,r=0){for(let n=t.length-1;n>=r;n--)e=t[n].create(null,Ct.from(e));return e}function ZN(e,t,r,n,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=ZN(e,t,r,n.lastChild,i+1);if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));if(n.contentMatchAt(n.childCount).matchType(i==e.length-1?r.type:e[i+1]))return n.copy(n.content.append(Ct.from(JN(r,e,i+1))))}}function QN(e,t){if(t==0)return e;let r=e.content.replaceChild(e.childCount-1,QN(e.lastChild,t-1)),n=e.contentMatchAt(e.childCount).fillBefore(Ct.empty,!0);return e.copy(r.append(n))}function iC(e,t,r,n,i,s){let o=t<0?e.firstChild:e.lastChild,a=o.content;return e.childCount>1&&(s=0),i<n-1&&(a=iC(a,t,r,n,i+1,s)),i>=r&&(a=t<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Ct.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(a))}function oE(e,t,r){return t<e.openStart&&(e=new Bt(iC(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),r<e.openEnd&&(e=new Bt(iC(e.content,1,r,e.openEnd,0,0),e.openStart,r)),e}const tF={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let aE=null;function eF(){return aE||(aE=document.implementation.createHTMLDocument("title"))}let o5=null;function ght(e){let t=window.trustedTypes;return t?(o5||(o5=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),o5.createHTML(e)):e}function yht(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let r=eF().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(e),i;if((i=n&&tF[n[1].toLowerCase()])&&(e=i.map(s=>"<"+s+">").join("")+e+i.map(s=>"</"+s+">").reverse().join("")),r.innerHTML=ght(e),i)for(let s=0;s<i.length;s++)r=r.querySelector(i[s])||r;return r}function bht(e){let t=e.querySelectorAll(Rn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<t.length;r++){let n=t[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),n)}}function xht(e,t){if(!e.size)return e;let r=e.content.firstChild.type.schema,n;try{n=JSON.parse(t)}catch{return e}let{content:i,openStart:s,openEnd:o}=e;for(let a=n.length-2;a>=0;a-=2){let l=r.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;i=Ct.from(l.create(n[a+1],i)),s++,o++}return new Bt(i,s,o)}const hi={},ui={},vht={touchstart:!0,touchmove:!0};class wht{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function kht(e){for(let t in hi){let r=hi[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=n=>{Sht(e,n)&&!X7(e,n)&&(e.editable||!(n.type in ui))&&r(e,n)},vht[t]?{passive:!0}:void 0)}ci&&e.dom.addEventListener("input",()=>null),sC(e)}function Kl(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Cht(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function sC(e){e.someProp("handleDOMEvents",t=>{for(let r in t)e.input.eventHandlers[r]||e.dom.addEventListener(r,e.input.eventHandlers[r]=n=>X7(e,n))})}function X7(e,t){return e.someProp("handleDOMEvents",r=>{let n=r[t.type];return n?n(e,t)||t.defaultPrevented:!1})}function Sht(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let r=t.target;r!=e.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(t))return!1;return!0}function Tht(e,t){!X7(e,t)&&hi[t.type]&&(e.editable||!(t.type in ui))&&hi[t.type](e,t)}ui.keydown=(e,t)=>{let r=t;if(e.input.shiftKey=r.keyCode==16||r.shiftKey,!nF(e,r)&&(e.input.lastKeyCode=r.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Ha&&Rn&&r.keyCode==13)))if(r.keyCode!=229&&e.domObserver.forceFlush(),bd&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();e.input.lastIOSEnter=n,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==n&&(e.someProp("handleKeyDown",i=>i(e,oh(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",n=>n(e,r))||dht(e,r)?r.preventDefault():Kl(e,"key")};ui.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};ui.keypress=(e,t)=>{let r=t;if(nF(e,r)||!r.charCode||r.ctrlKey&&!r.altKey||ds&&r.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,r))){r.preventDefault();return}let n=e.state.selection;if(!(n instanceof Gt)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(r.charCode),s=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",o=>o(e,n.$from.pos,n.$to.pos,i,s))&&e.dispatch(s()),r.preventDefault()}};function jv(e){return{left:e.clientX,top:e.clientY}}function _ht(e,t){let r=t.x-e.clientX,n=t.y-e.clientY;return r*r+n*n<100}function J7(e,t,r,n,i){if(n==-1)return!1;let s=e.state.doc.resolve(n);for(let o=s.depth+1;o>0;o--)if(e.someProp(t,a=>o>s.depth?a(e,r,s.nodeAfter,s.before(o),i,!0):a(e,r,s.node(o),s.before(o),i,!1)))return!0;return!1}function ff(e,t,r){if(e.focused||e.focus(),e.state.selection.eq(t))return;let n=e.state.tr.setSelection(t);n.setMeta("pointer",!0),e.dispatch(n)}function Mht(e,t){if(t==-1)return!1;let r=e.state.doc.resolve(t),n=r.nodeAfter;return n&&n.isAtom&&ie.isSelectable(n)?(ff(e,new ie(r)),!0):!1}function Aht(e,t){if(t==-1)return!1;let r=e.state.selection,n,i;r instanceof ie&&(n=r.node);let s=e.state.doc.resolve(t);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(ie.isSelectable(a)){n&&r.$from.depth>0&&o>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?i=s.before(r.$from.depth):i=s.before(o);break}}return i!=null?(ff(e,ie.create(e.state.doc,i)),!0):!1}function Eht(e,t,r,n,i){return J7(e,"handleClickOn",t,r,n)||e.someProp("handleClick",s=>s(e,t,n))||(i?Aht(e,r):Mht(e,r))}function Lht(e,t,r,n){return J7(e,"handleDoubleClickOn",t,r,n)||e.someProp("handleDoubleClick",i=>i(e,t,n))}function Oht(e,t,r,n){return J7(e,"handleTripleClickOn",t,r,n)||e.someProp("handleTripleClick",i=>i(e,t,n))||Dht(e,r,n)}function Dht(e,t,r){if(r.button!=0)return!1;let n=e.state.doc;if(t==-1)return n.inlineContent?(ff(e,Gt.create(n,0,n.content.size)),!0):!1;let i=n.resolve(t);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)ff(e,Gt.create(n,a+1,a+1+o.content.size));else if(ie.isSelectable(o))ff(e,ie.create(n,a));else continue;return!0}}function Z7(e){return Zb(e)}const rF=ds?"metaKey":"ctrlKey";hi.mousedown=(e,t)=>{let r=t;e.input.shiftKey=r.shiftKey;let n=Z7(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&_ht(r,e.input.lastClick)&&!r[rF]&&e.input.lastClick.button==r.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:s,button:r.button};let o=e.posAtCoords(jv(r));o&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new Iht(e,o,r,!!n)):(s=="doubleClick"?Lht:Oht)(e,o.pos,o.inside,r)?r.preventDefault():Kl(e,"pointer"))};class Iht{constructor(t,r,n,i){this.view=t,this.pos=r,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!n[rF],this.allowDefault=n.shiftKey;let s,o;if(r.inside>-1)s=t.state.doc.nodeAt(r.inside),o=r.inside;else{let h=t.state.doc.resolve(r.pos);s=h.parent,o=h.depth?h.before():0}const a=i?null:n.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=t.state;(n.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof ie&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Cs&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Kl(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ga(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(jv(t))),this.updateAllowDefault(t),this.allowDefault||!r?Kl(this.view,"pointer"):Eht(this.view,r.pos,r.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||ci&&this.mightDrag&&!this.mightDrag.node.isAtom||Rn&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(ff(this.view,we.near(this.view.state.doc.resolve(r.pos))),t.preventDefault()):Kl(this.view,"pointer")}move(t){this.updateAllowDefault(t),Kl(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}hi.touchstart=e=>{e.input.lastTouch=Date.now(),Z7(e),Kl(e,"pointer")};hi.touchmove=e=>{e.input.lastTouch=Date.now(),Kl(e,"pointer")};hi.contextmenu=e=>Z7(e);function nF(e,t){return e.composing?!0:ci&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const Bht=Ha?5e3:-1;ui.compositionstart=ui.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,r=t.selection.$to;if(t.selection instanceof Gt&&(t.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||r.marks(),Zb(e,!0),e.markCursor=null;else if(Zb(e,!t.selection.empty),Cs&&t.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=e.domSelectionRange();for(let i=n.focusNode,s=n.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=e.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}e.input.composing=!0}iF(e,Bht)};ui.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,iF(e,20))};function iF(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>Zb(e),t))}function sF(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=Pht());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function Rht(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let r=Mct(t.focusNode,t.focusOffset),n=Act(t.focusNode,t.focusOffset);if(r&&n&&r!=n){let i=n.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(r==s||n==s)return s;if(!i||!i.isText(n.nodeValue))return n;if(e.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function Pht(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function Zb(e,t=!1){if(!(Ha&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),sF(e),t||e.docView&&e.docView.dirty){let r=G7(e),n=e.state.selection;return r&&!r.eq(n)?e.dispatch(e.state.tr.setSelection(r)):(e.markCursor||t)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function Nht(e,t){if(!e.dom.parentNode)return;let r=e.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),e.focus()},50)}const Um=Di&&Zl<15||bd&&Ict<604;hi.copy=ui.cut=(e,t)=>{let r=t,n=e.state.selection,i=r.type=="cut";if(n.empty)return;let s=Um?null:r.clipboardData,o=n.content(),{dom:a,text:l}=Y7(e,o);s?(r.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):Nht(e,a),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Fht(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function $ht(e,t){if(!e.dom.parentNode)return;let r=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,n=e.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),n.parentNode&&n.parentNode.removeChild(n),r?Gm(e,n.value,null,i,t):Gm(e,n.textContent,n.innerHTML,i,t)},50)}function Gm(e,t,r,n,i){let s=XN(e,t,r,n,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,i,s||Bt.empty)))return!0;if(!s)return!1;let o=Fht(s),a=o?e.state.tr.replaceSelectionWith(o,n):e.state.tr.replaceSelection(s);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function oF(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let r=e.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}ui.paste=(e,t)=>{let r=t;if(e.composing&&!Ha)return;let n=Um?null:r.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;n&&Gm(e,oF(n),n.getData("text/html"),i,r)?r.preventDefault():$ht(e,r)};class aF{constructor(t,r,n){this.slice=t,this.move=r,this.node=n}}const zht=ds?"altKey":"ctrlKey";function lF(e,t){let r=e.someProp("dragCopies",n=>!n(t));return r??!t[zht]}hi.dragstart=(e,t)=>{let r=t,n=e.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(jv(r)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof ie?i.to-1:i.to))){if(n&&n.mightDrag)o=ie.create(e.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let u=e.docView.nearestDesc(r.target,!0);u&&u.node.type.spec.draggable&&u!=e.docView&&(o=ie.create(e.state.doc,u.posBefore))}}let a=(o||e.state.selection).content(),{dom:l,text:c,slice:h}=Y7(e,a);(!r.dataTransfer.files.length||!Rn||BN>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(Um?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",Um||r.dataTransfer.setData("text/plain",c),e.dragging=new aF(h,lF(e,r),o)};hi.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};ui.dragover=ui.dragenter=(e,t)=>t.preventDefault();ui.drop=(e,t)=>{let r=t,n=e.dragging;if(e.dragging=null,!r.dataTransfer)return;let i=e.posAtCoords(jv(r));if(!i)return;let s=e.state.doc.resolve(i.pos),o=n&&n.slice;o?e.someProp("transformPasted",p=>{o=p(o,e,!1)}):o=XN(e,oF(r.dataTransfer),Um?null:r.dataTransfer.getData("text/html"),!1,s);let a=!!(n&&lF(e,r));if(e.someProp("handleDrop",p=>p(e,r,o||Bt.empty,a))){r.preventDefault();return}if(!o)return;r.preventDefault();let l=o?Iit(e.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=e.state.tr;if(a){let{node:p}=n;p?p.replace(c):c.deleteSelection()}let h=c.mapping.map(l),u=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=c.doc;if(u?c.replaceRangeWith(h,h,o.content.firstChild):c.replaceRange(h,h,o),c.doc.eq(f))return;let d=c.doc.resolve(h);if(u&&ie.isSelectable(o.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new ie(d));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,y,b)=>p=b),c.setSelection(K7(e,d,c.doc.resolve(p)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))};hi.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Ga(e)},20))};hi.blur=(e,t)=>{let r=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),r.relatedTarget&&e.dom.contains(r.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};hi.beforeinput=(e,t)=>{if(Rn&&Ha&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:n}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=n||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,oh(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in ui)hi[e]=ui[e];function Km(e,t){if(e==t)return!0;for(let r in e)if(e[r]!==t[r])return!1;for(let r in t)if(!(r in e))return!1;return!0}class Qb{constructor(t,r){this.toDOM=t,this.spec=r||Ph,this.side=this.spec.side||0}map(t,r,n,i){let{pos:s,deleted:o}=t.mapResult(r.from+i,this.side<0?-1:1);return o?null:new jr(s-n,s-n,this)}valid(){return!0}eq(t){return this==t||t instanceof Qb&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Km(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class tc{constructor(t,r){this.attrs=t,this.spec=r||Ph}map(t,r,n,i){let s=t.map(r.from+i,this.spec.inclusiveStart?-1:1)-n,o=t.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return s>=o?null:new jr(s,o,this)}valid(t,r){return r.from<r.to}eq(t){return this==t||t instanceof tc&&Km(this.attrs,t.attrs)&&Km(this.spec,t.spec)}static is(t){return t.type instanceof tc}destroy(){}}class Q7{constructor(t,r){this.attrs=t,this.spec=r||Ph}map(t,r,n,i){let s=t.mapResult(r.from+i,1);if(s.deleted)return null;let o=t.mapResult(r.to+i,-1);return o.deleted||o.pos<=s.pos?null:new jr(s.pos-n,o.pos-n,this)}valid(t,r){let{index:n,offset:i}=t.content.findIndex(r.from),s;return i==r.from&&!(s=t.child(n)).isText&&i+s.nodeSize==r.to}eq(t){return this==t||t instanceof Q7&&Km(this.attrs,t.attrs)&&Km(this.spec,t.spec)}destroy(){}}class jr{constructor(t,r,n){this.from=t,this.to=r,this.type=n}copy(t,r){return new jr(t,r,this.type)}eq(t,r=0){return this.type.eq(t.type)&&this.from+r==t.from&&this.to+r==t.to}map(t,r,n){return this.type.map(t,this,r,n)}static widget(t,r,n){return new jr(t,t,new Qb(r,n))}static inline(t,r,n,i){return new jr(t,r,new tc(n,i))}static node(t,r,n,i){return new jr(t,r,new Q7(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof tc}get widget(){return this.type instanceof Qb}}const Wu=[],Ph={};class or{constructor(t,r){this.local=t.length?t:Wu,this.children=r.length?r:Wu}static create(t,r){return r.length?tx(r,t,0,Ph):Ln}find(t,r,n){let i=[];return this.findInner(t??0,r??1e9,i,0,n),i}findInner(t,r,n,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=r&&a.to>=t&&(!s||s(a.spec))&&n.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>t){let a=this.children[o]+1;this.children[o+2].findInner(t-a,r-a,n,i+a,s)}}map(t,r,n){return this==Ln||t.maps.length==0?this:this.mapInner(t,r,0,0,n||Ph)}mapInner(t,r,n,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,n,i);l&&l.type.valid(r,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?Hht(this.children,o||[],t,r,n,i,s):o?new or(o.sort(Nh),Wu):Ln}add(t,r){return r.length?this==Ln?or.create(t,r):this.addInner(t,r,0):this}addInner(t,r,n){let i,s=0;t.forEach((a,l)=>{let c=l+n,h;if(h=hF(r,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,h,c+1):i.splice(s,0,l,l+a.nodeSize,tx(h,a,c+1,Ph)),s+=3}});let o=cF(s?uF(r):r,-n);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||o.splice(a--,1);return new or(o.length?this.local.concat(o).sort(Nh):this.local,i||this.children)}remove(t){return t.length==0||this==Ln?this:this.removeInner(t,0)}removeInner(t,r){let n=this.children,i=this.local;for(let s=0;s<n.length;s+=3){let o,a=n[s]+r,l=n[s+1]+r;for(let h=0,u;h<t.length;h++)(u=t[h])&&u.from>a&&u.to<l&&(t[h]=null,(o||(o=[])).push(u));if(!o)continue;n==this.children&&(n=this.children.slice());let c=n[s+2].removeInner(o,a+1);c!=Ln?n[s+2]=c:(n.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<t.length;s++)if(o=t[s])for(let a=0;a<i.length;a++)i[a].eq(o,r)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new or(i,n):Ln}forChild(t,r){if(this==Ln)return this;if(r.isLeaf)return or.empty;let n,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(n=this.children[a+2]);break}let s=t+1,o=s+r.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof tc){let c=Math.max(s,l.from)-s,h=Math.min(o,l.to)-s;c<h&&(i||(i=[])).push(l.copy(c,h))}}if(i){let a=new or(i.sort(Nh),Wu);return n?new $l([a,n]):a}return n||Ln}eq(t){if(this==t)return!0;if(!(t instanceof or)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(t.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=t.children[r]||this.children[r+1]!=t.children[r+1]||!this.children[r+2].eq(t.children[r+2]))return!1;return!0}locals(t){return tS(this.localsInner(t))}localsInner(t){if(this==Ln)return Wu;if(t.inlineContent||!this.local.some(tc.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof tc||r.push(this.local[n]);return r}forEachSet(t){t(this)}}or.empty=new or([],[]);or.removeOverlap=tS;const Ln=or.empty;class $l{constructor(t){this.members=t}map(t,r){const n=this.members.map(i=>i.map(t,r,Ph));return $l.from(n)}forChild(t,r){if(r.isLeaf)return or.empty;let n=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,r);s!=Ln&&(s instanceof $l?n=n.concat(s.members):n.push(s))}return $l.from(n)}eq(t){if(!(t instanceof $l)||t.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(t.members[r]))return!1;return!0}locals(t){let r,n=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(!r)r=s;else{n&&(r=r.slice(),n=!1);for(let o=0;o<s.length;o++)r.push(s[o])}}return r?tS(n?r:r.sort(Nh)):Wu}static from(t){switch(t.length){case 0:return Ln;case 1:return t[0];default:return new $l(t.every(r=>r instanceof or)?t:t.reduce((r,n)=>r.concat(n instanceof or?n:n.members),[]))}}forEachSet(t){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(t)}}function Hht(e,t,r,n,i,s,o){let a=e.slice();for(let c=0,h=s;c<r.maps.length;c++){let u=0;r.maps[c].forEach((f,d,p,m)=>{let g=m-p-(d-f);for(let y=0;y<a.length;y+=3){let b=a[y+1];if(b<0||f>b+h-u)continue;let x=a[y]+h-u;d>=x?a[y+1]=f<=x?-2:-1:f>=h&&g&&(a[y]+=g,a[y+1]+=g)}u+=g}),h=r.maps[c].map(h,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let h=r.map(e[c]+s),u=h-i;if(u<0||u>=n.content.size){l=!0;continue}let f=r.map(e[c+1]+s,-1),d=f-i,{index:p,offset:m}=n.content.findIndex(u),g=n.maybeChild(p);if(g&&m==u&&m+g.nodeSize==d){let y=a[c+2].mapInner(r,g,h+1,e[c]+s+1,o);y!=Ln?(a[c]=u,a[c+1]=d,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=qht(a,e,t,r,i,s,o),h=tx(c,n,0,o);t=h.local;for(let u=0;u<a.length;u+=3)a[u+1]<0&&(a.splice(u,3),u-=3);for(let u=0,f=0;u<h.children.length;u+=3){let d=h.children[u];for(;f<a.length&&a[f]<d;)f+=3;a.splice(f,0,h.children[u],h.children[u+1],h.children[u+2])}}return new or(t.sort(Nh),a)}function cF(e,t){if(!t||!e.length)return e;let r=[];for(let n=0;n<e.length;n++){let i=e[n];r.push(new jr(i.from+t,i.to+t,i.type))}return r}function qht(e,t,r,n,i,s,o){function a(l,c){for(let h=0;h<l.local.length;h++){let u=l.local[h].map(n,i,c);u?r.push(u):o.onRemove&&o.onRemove(l.local[h].spec)}for(let h=0;h<l.children.length;h+=3)a(l.children[h+2],l.children[h]+c+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&a(e[l+2],t[l]+s+1);return r}function hF(e,t,r){if(t.isLeaf)return null;let n=r+t.nodeSize,i=null;for(let s=0,o;s<e.length;s++)(o=e[s])&&o.from>r&&o.to<n&&((i||(i=[])).push(o),e[s]=null);return i}function uF(e){let t=[];for(let r=0;r<e.length;r++)e[r]!=null&&t.push(e[r]);return t}function tx(e,t,r,n){let i=[],s=!1;t.forEach((a,l)=>{let c=hF(e,a,l+r);if(c){s=!0;let h=tx(c,a,r+l+1,n);h!=Ln&&i.push(l,l+a.nodeSize,h)}});let o=cF(s?uF(e):e,-r).sort(Nh);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||(n.onRemove&&n.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new or(o,i):Ln}function Nh(e,t){return e.from-t.from||e.to-t.to}function tS(e){let t=e;for(let r=0;r<t.length-1;r++){let n=t[r];if(n.from!=n.to)for(let i=r+1;i<t.length;i++){let s=t[i];if(s.from==n.from){s.to!=n.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,n.to),lE(t,i+1,s.copy(n.to,s.to)));continue}else{s.from<n.to&&(t==e&&(t=e.slice()),t[r]=n.copy(n.from,s.from),lE(t,i,n.copy(s.from,n.to)));break}}}return t}function lE(e,t,r){for(;t<e.length&&Nh(r,e[t])>0;)t++;e.splice(t,0,r)}function a5(e){let t=[];return e.someProp("decorations",r=>{let n=r(e.state);n&&n!=Ln&&t.push(n)}),e.cursorWrapper&&t.push(or.create(e.state.doc,[e.cursorWrapper.deco])),$l.from(t)}const Vht={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Wht=Di&&Zl<=11;class jht{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class Uht{constructor(t,r){this.view=t,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new jht,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);Di&&Zl<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Wht&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Vht)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let r=0;r<t.length;r++)this.queue.push(t[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(tE(this.view)){if(this.suppressingSelectionUpdates)return Ga(this.view);if(Di&&Zl<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&su(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let r=new Set,n;for(let s=t.focusNode;s;s=yd(s))r.add(s);for(let s=t.anchorNode;s;s=yd(s))if(r.has(s)){n=s;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&tE(t)&&!this.ignoreSelectionChange(n),s=-1,o=-1,a=!1,l=[];if(t.editable)for(let h=0;h<r.length;h++){let u=this.registerMutation(r[h],l);u&&(s=s<0?u.from:Math.min(u.from,s),o=o<0?u.to:Math.max(u.to,o),u.typeOver&&(a=!0))}if(Cs&&l.length){let h=l.filter(u=>u.nodeName=="BR");if(h.length==2){let[u,f]=h;u.parentNode&&u.parentNode.parentNode==f.parentNode?f.remove():u.remove()}else{let{focusNode:u}=this.currentSelection;for(let f of h){let d=f.parentNode;d&&d.nodeName=="LI"&&(!u||Yht(t,u)!=d)&&f.remove()}}}let c=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&Vv(n)&&(c=G7(t))&&c.eq(we.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Ga(t),this.currentSelection.set(n),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,o),Ght(t)),this.handleDOMChange(s,o,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(n)||Ga(t),this.currentSelection.set(n))}registerMutation(t,r){if(r.indexOf(t.target)>-1)return null;let n=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(n==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!n||n.ignoreMutation(t))return null;if(t.type=="childList"){for(let h=0;h<t.addedNodes.length;h++){let u=t.addedNodes[h];r.push(u),u.nodeType==3&&(this.lastChangedTextNode=u)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};let i=t.previousSibling,s=t.nextSibling;if(Di&&Zl<=11&&t.addedNodes.length)for(let h=0;h<t.addedNodes.length;h++){let{previousSibling:u,nextSibling:f}=t.addedNodes[h];(!u||Array.prototype.indexOf.call(t.addedNodes,u)<0)&&(i=u),(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==t.target?bn(i)+1:0,a=n.localPosFromDOM(t.target,o,-1),l=s&&s.parentNode==t.target?bn(s):t.target.childNodes.length,c=n.localPosFromDOM(t.target,l,1);return{from:a,to:c}}else return t.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=t.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let cE=new WeakMap,hE=!1;function Ght(e){if(!cE.has(e)&&(cE.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=Cs,hE)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),hE=!0}}function uE(e,t){let r=t.startContainer,n=t.startOffset,i=t.endContainer,s=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return su(o.node,o.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function Kht(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return uE(e,i)}let r;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",n,!0),r?uE(e,r):null}function Yht(e,t){for(let r=t.parentNode;r&&r!=e.dom;r=r.parentNode){let n=e.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function Xht(e,t,r){let{node:n,fromOffset:i,toOffset:s,from:o,to:a}=e.docView.parseRange(t,r),l=e.domSelectionRange(),c,h=l.anchorNode;if(h&&e.dom.contains(h.nodeType==1?h:h.parentNode)&&(c=[{node:h,offset:l.anchorOffset}],Vv(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Rn&&e.input.lastKeyCode===8)for(let g=s;g>i;g--){let y=n.childNodes[g-1],b=y.pmViewDesc;if(y.nodeName=="BR"&&!b){s=g;break}if(!b||b.size)break}let u=e.state.doc,f=e.someProp("domParser")||ru.fromSchema(e.state.schema),d=u.resolve(o),p=null,m=f.parse(n,{topNode:d.parent,topMatch:d.parent.contentMatchAt(d.index()),topOpen:!0,from:i,to:s,preserveWhitespace:d.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:Jht,context:d});if(c&&c[0].pos!=null){let g=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=g),p={anchor:g+o,head:y+o}}return{doc:m,sel:p,from:o,to:a}}function Jht(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(ci&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(e.parentNode.lastChild==e||ci&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Zht=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Qht(e,t,r,n,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let _=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,I=G7(e,_);if(I&&!e.state.selection.eq(I)){if(Rn&&Ha&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",L=>L(e,oh(13,"Enter"))))return;let N=e.state.tr.setSelection(I);_=="pointer"?N.setMeta("pointer",!0):_=="key"&&N.scrollIntoView(),s&&N.setMeta("composition",s),e.dispatch(N)}return}let o=e.state.doc.resolve(t),a=o.sharedDepth(r);t=o.before(a+1),r=e.state.doc.resolve(r).after(a+1);let l=e.state.selection,c=Xht(e,t,r),h=e.state.doc,u=h.slice(c.from,c.to),f,d;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(f=e.state.selection.to,d="end"):(f=e.state.selection.from,d="start"),e.input.lastKeyCode=null;let p=rut(u.content,c.doc.content,c.from,f,d);if(p&&e.input.domChangeCount++,(bd&&e.input.lastIOSEnter>Date.now()-225||Ha)&&i.some(_=>_.nodeType==1&&!Zht.test(_.nodeName))&&(!p||p.endA>=p.endB)&&e.someProp("handleKeyDown",_=>_(e,oh(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!p)if(n&&l instanceof Gt&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let _=fE(e,e.state.doc,c.sel);if(_&&!_.eq(e.state.selection)){let I=e.state.tr.setSelection(_);s&&I.setMeta("composition",s),e.dispatch(I)}}return}e.state.selection.from<e.state.selection.to&&p.start==p.endB&&e.state.selection instanceof Gt&&(p.start>e.state.selection.from&&p.start<=e.state.selection.from+2&&e.state.selection.from>=c.from?p.start=e.state.selection.from:p.endA<e.state.selection.to&&p.endA>=e.state.selection.to-2&&e.state.selection.to<=c.to&&(p.endB+=e.state.selection.to-p.endA,p.endA=e.state.selection.to)),Di&&Zl<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),g=c.doc.resolveNoCache(p.endB-c.from),y=h.resolve(p.start),b=m.sameParent(g)&&m.parent.inlineContent&&y.end()>=p.endA;if((bd&&e.input.lastIOSEnter>Date.now()-225&&(!b||i.some(_=>_.nodeName=="DIV"||_.nodeName=="P"))||!b&&m.pos<c.doc.content.size&&(!m.sameParent(g)||!m.parent.inlineContent)&&m.pos<g.pos&&!/\S/.test(c.doc.textBetween(m.pos,g.pos,"","")))&&e.someProp("handleKeyDown",_=>_(e,oh(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>p.start&&eut(h,p.start,p.endA,m,g)&&e.someProp("handleKeyDown",_=>_(e,oh(8,"Backspace")))){Ha&&Rn&&e.domObserver.suppressSelectionUpdates();return}Rn&&p.endB==p.start&&(e.input.lastChromeDelete=Date.now()),Ha&&!b&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,g=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{e.someProp("handleKeyDown",function(_){return _(e,oh(13,"Enter"))})},20));let x=p.start,T=p.endA,S=_=>{let I=_||e.state.tr.replace(x,T,c.doc.slice(p.start-c.from,p.endB-c.from));if(c.sel){let N=fE(e,I.doc,c.sel);N&&!(Rn&&e.composing&&N.empty&&(p.start!=p.endB||e.input.lastChromeDelete<Date.now()-100)&&(N.head==x||N.head==I.mapping.map(T)-1)||Di&&N.empty&&N.head==x)&&I.setSelection(N)}return s&&I.setMeta("composition",s),I.scrollIntoView()},w;if(b)if(m.pos==g.pos){Di&&Zl<=11&&m.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ga(e),20));let _=S(e.state.tr.delete(x,T)),I=h.resolve(p.start).marksAcross(h.resolve(p.endA));I&&_.ensureMarks(I),e.dispatch(_)}else if(p.endA==p.endB&&(w=tut(m.parent.content.cut(m.parentOffset,g.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start())))){let _=S(e.state.tr);w.type=="add"?_.addMark(x,T,w.mark):_.removeMark(x,T,w.mark),e.dispatch(_)}else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let _=m.parent.textBetween(m.parentOffset,g.parentOffset),I=()=>S(e.state.tr.insertText(_,x,T));e.someProp("handleTextInput",N=>N(e,x,T,_,I))||e.dispatch(I())}else e.dispatch(S());else e.dispatch(S())}function fE(e,t,r){return Math.max(r.anchor,r.head)>t.content.size?null:K7(e,t.resolve(r.anchor),t.resolve(r.head))}function tut(e,t){let r=e.firstChild.marks,n=t.firstChild.marks,i=r,s=n,o,a,l;for(let h=0;h<n.length;h++)i=n[h].removeFromSet(i);for(let h=0;h<r.length;h++)s=r[h].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=h=>h.mark(a.addToSet(h.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=h=>h.mark(a.removeFromSet(h.marks));else return null;let c=[];for(let h=0;h<t.childCount;h++)c.push(l(t.child(h)));if(Ct.from(c).eq(e))return{mark:a,type:o}}function eut(e,t,r,n,i){if(r-t<=i.pos-n.pos||l5(n,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!n.parent.isTextblock){let a=s.nodeAfter;return a!=null&&r==t+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=e.resolve(l5(s,!0,!0));return!o.parent.isTextblock||o.pos>r||l5(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function l5(e,t,r){let n=e.depth,i=t?e.end():e.pos;for(;n>0&&(t||e.indexAfter(n)==e.node(n).childCount);)n--,i++,t=!1;if(r){let s=e.node(n).maybeChild(e.indexAfter(n));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function rut(e,t,r,n,i){let s=e.findDiffStart(t,r);if(s==null)return null;let{a:o,b:a}=e.findDiffEnd(t,r+e.size,r+t.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&e.size<t.size){let l=n<=s&&n>=o?s-n:0;s-=l,s&&s<t.size&&dE(t.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,s&&s<e.size&&dE(e.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function dE(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),r=e.charCodeAt(1);return t>=56320&&t<=57343&&r>=55296&&r<=56319}class eS{constructor(t,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new wht,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(bE),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=gE(this),mE(this),this.nodeViews=yE(this),this.docView=KA(this.state.doc,pE(this),a5(this),this.dom,this),this.domObserver=new Uht(this,(n,i,s,o)=>Qht(this,n,i,s,o)),this.domObserver.start(),kht(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let r in t)this._props[r]=t[r];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&sC(this);let r=this._props;this._props=t,t.plugins&&(t.plugins.forEach(bE),this.directPlugins=t.plugins),this.updateStateInner(t.state,r)}setProps(t){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in t)r[n]=t[n];this.update(r)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,r){var n;let i=this.state,s=!1,o=!1;t.storedMarks&&this.composing&&(sF(this),o=!0),this.state=t;let a=i.plugins!=t.plugins||this._props.plugins!=r.plugins;if(a||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let d=yE(this);iut(d,this.nodeViews)&&(this.nodeViews=d,s=!0)}(a||r.handleDOMEvents!=this._props.handleDOMEvents)&&sC(this),this.editable=gE(this),mE(this);let l=a5(this),c=pE(this),h=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",u=s||!this.docView.matchesNode(t.doc,c,l);(u||!t.selection.eq(i.selection))&&(o=!0);let f=h=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Pct(this);if(o){this.domObserver.stop();let d=u&&(Di||Rn)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&nut(i.selection,t.selection);if(u){let p=Rn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Rht(this)),(s||!this.docView.update(t.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=KA(t.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(d=!0)}d||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&oht(this))?Ga(this,d):(GN(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():f&&Nct(f)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof ie){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&qA(this,r.getBoundingClientRect(),t)}else qA(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,t)}}updateDraggedNode(t,r){let n=t.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let s=n.from+(this.state.doc.content.size-r.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==n.node&&(i=s)}this.dragging=new aF(t.slice,t.move,i<0?void 0:ie.create(this.state.doc,i))}someProp(t,r){let n=this._props&&this._props[t],i;if(n!=null&&(i=r?r(n):n))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[t];if(a!=null&&(i=r?r(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[t];if(a!=null&&(i=r?r(a):a))return i}}hasFocus(){if(Di){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Fct(this.dom),Ga(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return t||document}updateRoot(){this._root=null}posAtCoords(t){return Vct(this,t)}coordsAtPos(t,r=1){return $N(this,t,r)}domAtPos(t,r=0){return this.docView.domFromPos(t,r)}nodeDOM(t){let r=this.docView.descAt(t);return r?r.nodeDOM:null}posAtDOM(t,r,n=-1){let i=this.docView.posFromDOM(t,r,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,r){return Kct(this,r||this.state,t)}pasteHTML(t,r){return Gm(this,"",t,!1,r||new ClipboardEvent("paste"))}pasteText(t,r){return Gm(this,t,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(t){return Y7(this,t)}destroy(){this.docView&&(Cht(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],a5(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Tct())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return Tht(this,t)}domSelectionRange(){let t=this.domSelection();return t?ci&&this.root.nodeType===11&&Lct(this.dom.ownerDocument)==this.dom&&Kht(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}eS.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function pE(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(e.state)),r)for(let n in r)n=="class"?t.class+=" "+r[n]:n=="style"?t.style=(t.style?t.style+";":"")+r[n]:!t[n]&&n!="contenteditable"&&n!="nodeName"&&(t[n]=String(r[n]))}),t.translate||(t.translate="no"),[jr.node(0,e.state.doc.content.size,t)]}function mE(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:jr.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function gE(e){return!e.someProp("editable",t=>t(e.state)===!1)}function nut(e,t){let r=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(r)!=t.$anchor.start(r)}function yE(e){let t=Object.create(null);function r(n){for(let i in n)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=n[i])}return e.someProp("nodeViews",r),e.someProp("markViews",r),t}function iut(e,t){let r=0,n=0;for(let i in e){if(e[i]!=t[i])return!0;r++}for(let i in t)n++;return r!=n}function bE(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}function pl(e,t){return e.meta={package:"@milkdown/core",group:"System",...t},e}const fF={text:(e,t,r,n)=>{const i=e.value;return/^[^*_\\]*\s+$/.test(i)?i:r.safe(i,{...n,encode:[]})},strong:(e,t,r,n)=>{const i=e.marker||r.options.strong||"*",s=r.enter("strong"),o=r.createTracker(n);let a=o.move(i+i);return a+=o.move(r.containerPhrasing(e,{before:a,after:i,...o.current()})),a+=o.move(i+i),s(),a},emphasis:(e,t,r,n)=>{const i=e.marker||r.options.emphasis||"*",s=r.enter("emphasis"),o=r.createTracker(n);let a=o.move(i);return a+=o.move(r.containerPhrasing(e,{before:a,after:i,...o.current()})),a+=o.move(i),s(),a}},fr=Ie({},"editorView"),ip=Ie({},"editorState"),c5=Ie([],"initTimer"),oC=Ie({},"editor"),Ym=Ie([],"inputRules"),hc=Ie([],"prosePlugins"),Xm=Ie([],"remarkPlugins"),Jm=Ie([],"nodeView"),Zm=Ie([],"markView"),Fh=Ie(Uk().use($k).use(Vk),"remark"),Jp=Ie({handlers:fF,encode:[]},"remarkStringifyOptions"),B2=na("ConfigReady");function sut(e){const t=r=>(r.record(B2),async()=>(await e(r),r.done(B2),()=>{r.clearTimer(B2)}));return pl(t,{displayName:"Config"}),t}const $h=na("InitReady");function out(e){const t=r=>(r.inject(oC,e).inject(hc,[]).inject(Xm,[]).inject(Ym,[]).inject(Jm,[]).inject(Zm,[]).inject(Jp,{handlers:fF,encode:[]}).inject(Fh,Uk().use($k).use(Vk)).inject(c5,[B2]).record($h),async()=>{await r.waitTimers(c5);const n=r.get(Jp);return r.set(Fh,Uk().use($k).use(Vk,n)),r.done($h),()=>{r.remove(oC).remove(hc).remove(Xm).remove(Ym).remove(Jm).remove(Zm).remove(Jp).remove(Fh).remove(c5).clearTimer($h)}});return pl(t,{displayName:"Init"}),t}const li=na("SchemaReady"),h5=Ie([],"schemaTimer"),Uo=Ie({},"schema"),Zp=Ie([],"nodes"),Qp=Ie([],"marks");function xE(e){var t;return{...e,parseDOM:(t=e.parseDOM)==null?void 0:t.map(r=>({priority:e.priority,...r}))}}const dF=e=>(e.inject(Uo,{}).inject(Zp,[]).inject(Qp,[]).inject(h5,[$h]).record(li),async()=>{await e.waitTimers(h5);const t=e.get(Fh),n=e.get(Xm).reduce((a,l)=>a.use(l.plugin,l.options),t);e.set(Fh,n);const i=Object.fromEntries(e.get(Zp).map(([a,l])=>[a,xE(l)])),s=Object.fromEntries(e.get(Qp).map(([a,l])=>[a,xE(l)])),o=new pP({nodes:i,marks:s});return e.set(Uo,o),e.done(li),()=>{e.remove(Uo).remove(Zp).remove(Qp).remove(h5).clearTimer(li)}});pl(dF,{displayName:"Schema"});var kh,fs;class pF{constructor(){kt(this,kh);kt(this,fs);nt(this,kh,new HP),nt(this,fs,null),this.setCtx=t=>{nt(this,fs,t)},this.chain=()=>{if(V(this,fs)==null)throw jw();const t=V(this,fs),r=[],n=this.get.bind(this),i={run:()=>{const o=Hd(...r),a=t.get(fr);return o(a.state,a.dispatch,a)},inline:o=>(r.push(o),i),pipe:s.bind(this)};function s(o,a){const l=n(o);return r.push(l(a)),i}return i}}get ctx(){return V(this,fs)}create(t,r){const n=t.create(V(this,kh).sliceMap);return n.set(r),n}get(t){return V(this,kh).get(t).get()}remove(t){return V(this,kh).remove(t)}call(t,r){if(V(this,fs)==null)throw jw();const i=this.get(t)(r),s=V(this,fs).get(fr);return i(s.state,s.dispatch,s)}inline(t){if(V(this,fs)==null)throw jw();const r=V(this,fs).get(fr);return t(r.state,r.dispatch,r)}}kh=new WeakMap,fs=new WeakMap;function aut(e="cmdKey"){return Ie(()=>()=>!1,e)}const Dt=Ie(new pF,"commands"),u5=Ie([li],"commandsTimer"),tm=na("CommandsReady"),mF=e=>{const t=new pF;return t.setCtx(e),e.inject(Dt,t).inject(u5,[li]).record(tm),async()=>(await e.waitTimers(u5),e.done(tm),()=>{e.remove(Dt).remove(u5).clearTimer(tm)})};pl(mF,{displayName:"Commands"});function lut(e){const t=Hd(Wit,H7,ict,_N);return e.Backspace=t,e}var Ch,yi;class gF{constructor(){kt(this,Ch);kt(this,yi);nt(this,Ch,null),nt(this,yi,[]),this.setCtx=t=>{nt(this,Ch,t)},this.add=t=>(V(this,yi).push(t),()=>{nt(this,yi,V(this,yi).filter(r=>r!==t))}),this.addObjectKeymap=t=>{const r=[];return Object.entries(t).forEach(([n,i])=>{if(typeof i=="function"){const s={key:n,onRun:()=>i};V(this,yi).push(s),r.push(()=>{nt(this,yi,V(this,yi).filter(o=>o!==s))})}else V(this,yi).push(i),r.push(()=>{nt(this,yi,V(this,yi).filter(s=>s!==i))})}),()=>{r.forEach(n=>n())}},this.addBaseKeymap=()=>{const t=lut(vct);return this.addObjectKeymap(t)},this.build=()=>{const t={};return V(this,yi).forEach(n=>{t[n.key]=[...t[n.key]||[],n]}),Object.fromEntries(Object.entries(t).map(([n,i])=>{const s=i.sort((a,l)=>(l.priority??50)-(a.priority??50));return[n,(a,l,c)=>{const h=V(this,Ch);if(h==null)throw Rv();const u=s.map(d=>d.onRun(h));return Hd(...u)(a,l,c)}]}))}}get ctx(){return V(this,Ch)}}Ch=new WeakMap,yi=new WeakMap;const ex=Ie(new gF,"keymap"),f5=Ie([li],"keymapTimer"),em=na("KeymapReady"),cut=e=>{const t=new gF;return t.setCtx(e),e.inject(ex,t).inject(f5,[li]).record(em),async()=>(await e.waitTimers(f5),e.done(em),()=>{e.remove(ex).remove(f5).clearTimer(em)})},R2=na("ParserReady"),yF=()=>{throw Rv()},rm=Ie(yF,"parser"),d5=Ie([],"parserTimer"),bF=e=>(e.inject(rm,yF).inject(d5,[li]).record(R2),async()=>{await e.waitTimers(d5);const t=e.get(Fh),r=e.get(Uo);return e.set(rm,ect.create(r,t)),e.done(R2),()=>{e.remove(rm).remove(d5).clearTimer(R2)}});pl(bF,{displayName:"Parser"});const nm=na("SerializerReady"),p5=Ie([],"serializerTimer"),xF=()=>{throw Rv()},df=Ie(xF,"serializer"),vF=e=>(e.inject(df,xF).inject(p5,[li]).record(nm),async()=>{await e.waitTimers(p5);const t=e.get(Fh),r=e.get(Uo);return e.set(df,nct.create(r,t)),e.done(nm),()=>{e.remove(df).remove(p5).clearTimer(nm)}});pl(vF,{displayName:"Serializer"});const P2=Ie("","defaultValue"),m5=Ie(e=>e,"stateOptions"),g5=Ie([],"editorStateTimer"),N2=na("EditorStateReady");function hut(e,t,r){if(typeof e=="string")return t(e);if(e.type==="html")return ru.fromSchema(r).parse(e.dom);if(e.type==="json")return Ua.fromJSON(r,e.value);throw Uit(e)}const uut=new vr("MILKDOWN_STATE_TRACKER"),wF=e=>(e.inject(P2,"").inject(ip,{}).inject(m5,t=>t).inject(g5,[R2,nm,tm,em]).record(N2),async()=>{await e.waitTimers(g5);const t=e.get(Uo),r=e.get(rm),n=e.get(Ym),i=e.get(m5),s=e.get(hc),o=e.get(P2),a=hut(o,r,t),l=e.get(ex),c=l.addBaseKeymap(),h=[...s,new xr({key:uut,state:{init:()=>{},apply:(d,p,m,g)=>{e.set(ip,g)}}}),cst({rules:n}),DN(l.build())];e.set(hc,h);const u=i({schema:t,doc:a,plugins:h}),f=hh.create(u);return e.set(ip,f),e.done(N2),()=>{c(),e.remove(P2).remove(ip).remove(m5).remove(g5).clearTimer(N2)}});pl(wF,{displayName:"EditorState"});const Qm=Ie([],"pasteRule"),y5=Ie([li],"pasteRuleTimer"),F2=na("PasteRuleReady"),kF=e=>(e.inject(Qm,[]).inject(y5,[li]).record(F2),async()=>(await e.waitTimers(y5),e.done(F2),()=>{e.remove(Qm).remove(y5).clearTimer(F2)}));pl(kF,{displayName:"PasteRule"});const $2=na("EditorViewReady"),b5=Ie([],"editorViewTimer"),im=Ie({},"editorViewOptions"),z2=Ie(null,"root"),aC=Ie(null,"rootDOM"),lC=Ie({},"rootAttrs");function fut(e,t){const r=document.createElement("div");r.className="milkdown",e.appendChild(r),t.set(aC,r);const n=t.get(lC);return Object.entries(n).forEach(([i,s])=>r.setAttribute(i,s)),r}function dut(e){e.classList.add("editor"),e.setAttribute("role","textbox")}const put=new vr("MILKDOWN_VIEW_CLEAR"),CF=e=>(e.inject(z2,document.body).inject(fr,{}).inject(im,{}).inject(aC,null).inject(lC,{}).inject(b5,[N2,F2]).record($2),async()=>{await e.wait($h);const t=e.get(z2)||document.body,r=typeof t=="string"?document.querySelector(t):t;e.update(hc,l=>[new xr({key:put,view:c=>{const h=r?fut(r,e):void 0;return(()=>{if(h&&r){const f=c.dom;r.replaceChild(h,f),h.appendChild(f)}})(),{destroy:()=>{h!=null&&h.parentNode&&(h==null||h.parentNode.replaceChild(c.dom,h)),h==null||h.remove()}}}}),...l]),await e.waitTimers(b5);const n=e.get(ip),i=e.get(im),s=Object.fromEntries(e.get(Jm)),o=Object.fromEntries(e.get(Zm)),a=new eS(r,{state:n,nodeViews:s,markViews:o,transformPasted:(l,c,h)=>(e.get(Qm).sort((u,f)=>(f.priority??50)-(u.priority??50)).map(u=>u.run).forEach(u=>{l=u(l,c,h)}),l),...i});return dut(a.dom),e.set(fr,a),e.done($2),()=>{a==null||a.destroy(),e.remove(z2).remove(fr).remove(im).remove(aC).remove(lC).remove(b5).clearTimer($2)}});pl(CF,{displayName:"EditorView"});var rx=(e=>(e.Idle="Idle",e.OnCreate="OnCreate",e.Created="Created",e.OnDestroy="OnDestroy",e.Destroyed="Destroyed",e))(rx||{}),Sh,Ui,Ba,Bf,Dg,Ig,bi,Ra,Th,Bg,_h,Rf,Rg,Wl,Pf;const PT=class PT{constructor(){kt(this,Sh);kt(this,Ui);kt(this,Ba);kt(this,Bf);kt(this,Dg);kt(this,Ig);kt(this,bi);kt(this,Ra);kt(this,Th);kt(this,Bg);kt(this,_h);kt(this,Rf);kt(this,Rg);kt(this,Wl);kt(this,Pf);nt(this,Sh,!1),nt(this,Ui,"Idle"),nt(this,Ba,[]),nt(this,Bf,()=>{}),nt(this,Dg,new HP),nt(this,Ig,new Mst),nt(this,bi,new Map),nt(this,Ra,new Map),nt(this,Th,new Rk(V(this,Dg),V(this,Ig))),nt(this,Bg,()=>{const t=sut(async n=>{await Promise.all(V(this,Ba).map(i=>Promise.resolve(i(n))))}),r=[dF,bF,vF,mF,cut,kF,wF,CF,out(this),t];V(this,_h).call(this,r,V(this,Ra))}),nt(this,_h,(t,r)=>{t.forEach(n=>{const i=V(this,Th).produce(V(this,Sh)?n.meta:void 0),s=n(i);r.set(n,{ctx:i,handler:s,cleanup:void 0})})}),nt(this,Rf,(t,r=!1)=>Promise.all([t].flat().map(async n=>{const i=V(this,bi).get(n),s=i==null?void 0:i.cleanup;return r?V(this,bi).delete(n):V(this,bi).set(n,{ctx:void 0,handler:void 0,cleanup:void 0}),typeof s=="function"?s():s}))),nt(this,Rg,async()=>{await Promise.all([...V(this,Ra).entries()].map(async([t,{cleanup:r}])=>typeof r=="function"?r():r)),V(this,Ra).clear()}),nt(this,Wl,t=>{nt(this,Ui,t),V(this,Bf).call(this,t)}),nt(this,Pf,t=>[...t.entries()].map(async([r,n])=>{const{ctx:i,handler:s}=n;if(!s)return;const o=await s();t.set(r,{ctx:i,handler:s,cleanup:o})})),this.enableInspector=(t=!0)=>(nt(this,Sh,t),this),this.onStatusChange=t=>(nt(this,Bf,t),this),this.config=t=>(V(this,Ba).push(t),this),this.removeConfig=t=>(nt(this,Ba,V(this,Ba).filter(r=>r!==t)),this),this.use=t=>{const r=[t].flat();return r.flat().forEach(n=>{V(this,bi).set(n,{ctx:void 0,handler:void 0,cleanup:void 0})}),V(this,Ui)==="Created"&&V(this,_h).call(this,r,V(this,bi)),this},this.remove=async t=>V(this,Ui)==="OnCreate"?(console.warn("[Milkdown]: You are trying to remove plugins when the editor is creating, this is not recommended, please check your code."),new Promise(r=>{setTimeout(()=>{r(this.remove(t))},50)})):(await V(this,Rf).call(this,[t].flat(),!0),this),this.create=async()=>V(this,Ui)==="OnCreate"?this:(V(this,Ui)==="Created"&&await this.destroy(),V(this,Wl).call(this,"OnCreate"),V(this,Bg).call(this),V(this,_h).call(this,[...V(this,bi).keys()],V(this,bi)),await Promise.all([V(this,Pf).call(this,V(this,Ra)),V(this,Pf).call(this,V(this,bi))].flat()),V(this,Wl).call(this,"Created"),this),this.destroy=async(t=!1)=>V(this,Ui)==="Destroyed"||V(this,Ui)==="OnDestroy"?this:V(this,Ui)==="OnCreate"?new Promise(r=>{setTimeout(()=>{r(this.destroy(t))},50)}):(t&&nt(this,Ba,[]),V(this,Wl).call(this,"OnDestroy"),await V(this,Rf).call(this,[...V(this,bi).keys()],t),await V(this,Rg).call(this),V(this,Wl).call(this,"Destroyed"),this),this.action=t=>t(V(this,Th)),this.inspect=()=>V(this,Sh)?[...V(this,Ra).values(),...V(this,bi).values()].map(({ctx:t})=>{var r;return(r=t==null?void 0:t.inspector)==null?void 0:r.read()}).filter(t=>!!t):(console.warn("[Milkdown]: You are trying to collect inspection when inspector is disabled, please enable inspector by `editor.enableInspector()` first."),[])}static make(){return new PT}get ctx(){return V(this,Th)}get status(){return V(this,Ui)}};Sh=new WeakMap,Ui=new WeakMap,Ba=new WeakMap,Bf=new WeakMap,Dg=new WeakMap,Ig=new WeakMap,bi=new WeakMap,Ra=new WeakMap,Th=new WeakMap,Bg=new WeakMap,_h=new WeakMap,Rf=new WeakMap,Rg=new WeakMap,Wl=new WeakMap,Pf=new WeakMap;let cC=PT,mut=e=>crypto.getRandomValues(new Uint8Array(e)),gut=(e,t,r)=>{let n=(2<<Math.log2(e.length-1))-1,i=-~(1.6*n*t/e.length);return(s=t)=>{let o="";for(;;){let a=r(i),l=i|0;for(;l--;)if(o+=e[a[l]&n]||"",o.length>=s)return o}}},rS=(e,t=21)=>gut(e,t|0,mut);rS("abcedfghicklmn",10);function be(e,t){const r=aut(e),n=i=>async()=>{n.key=r,await i.wait(tm);const s=t(i);return i.get(Dt).create(r,s),n.run=o=>i.get(Dt).call(e,o),()=>{i.get(Dt).remove(r)}};return n}function Wn(e){const t=r=>async()=>{await r.wait(li);const n=e(r);return r.update(Ym,i=>[...i,n]),t.inputRule=n,()=>{r.update(Ym,i=>i.filter(s=>s!==n))}};return t}function yut(e){const t=r=>async()=>{await r.wait(li);const n=e(r);return r.update(Qm,i=>[...i,n]),t.pasteRule=n,()=>{r.update(Qm,i=>i.filter(s=>s!==n))}};return t}function but(e,t){const r=n=>async()=>{const i=t(n);return n.update(Qp,s=>[...s.filter(o=>o[0]!==e),[e,i]]),r.id=e,r.schema=i,()=>{n.update(Qp,s=>s.filter(([o])=>o!==e))}};return r.type=n=>{const i=n.get(Uo).marks[e];if(!i)throw tst(e);return i},r}function nS(e,t){const r=n=>async()=>{const i=t(n);return n.update(Zp,s=>[...s.filter(o=>o[0]!==e),[e,i]]),r.id=e,r.schema=i,()=>{n.update(Zp,s=>s.filter(([o])=>o!==e))}};return r.type=n=>{const i=n.get(Uo).nodes[e];if(!i)throw Qit(e);return i},r}function Gr(e){let t;const r=n=>async()=>(await n.wait(li),t=e(n),n.update(hc,i=>[...i,t]),()=>{n.update(hc,i=>i.filter(s=>s!==t))});return r.plugin=()=>t,r.key=()=>t.spec.key,r}function SF(e){const t=r=>async()=>{await r.wait(em);const n=r.get(ex),i=e(r),s=n.addObjectKeymap(i);return t.keymap=i,()=>{s()}};return t}function f1(e,t){const r=n=>async()=>{await n.wait(li);const i=t(n);return e.type(n)instanceof Gb?n.update(Jm,s=>[...s,[e.id,i]]):n.update(Zm,s=>[...s,[e.id,i]]),r.view=i,r.type=e,()=>{e.type(n)instanceof Gb?n.update(Jm,s=>s.filter(o=>o[0]!==e.id)):n.update(Zm,s=>s.filter(o=>o[0]!==e.id))}};return r}function er(e,t){const r=Ie(e,t),n=i=>(i.inject(r),()=>()=>{i.remove(r)});return n.key=r,n}function $r(e,t){const r=er(t,e),n=nS(e,s=>s.get(r.key)(s)),i=[r,n];return i.id=n.id,i.node=n,i.type=s=>n.type(s),i.ctx=r,i.key=r.key,i.extendSchema=s=>{const o=s(t);return $r(e,o)},i}function qd(e,t){const r=er(t,e),n=but(e,s=>s.get(r.key)(s)),i=[r,n];return i.id=n.id,i.mark=n,i.type=s=>n.type(s),i.ctx=r,i.key=r.key,i.extendSchema=s=>{const o=s(t);return qd(e,o)},i}function Pi(e,t){const r=Object.fromEntries(Object.entries(t).map(([o,{shortcuts:a,priority:l}])=>[o,{shortcuts:a,priority:l}])),n=er(r,`${e}Keymap`),i=SF(o=>{const a=o.get(n.key),l=Object.entries(t).flatMap(([c,{command:h}])=>{const u=a[c],f=[u.shortcuts].flat(),d=u.priority;return f.map(p=>[p,{key:p,onRun:h,priority:d}])});return Object.fromEntries(l)}),s=[n,i];return s.ctx=n,s.shortcuts=i,s.key=n.key,s.keymap=i.keymap,s}const ho=(e,t=()=>({}))=>er(t,`${e}Attr`),d1=(e,t=()=>({}))=>er(t,`${e}Attr`);function ia(e,t,r){const n=er({},e),i=o=>async()=>{await o.wait($h);const l={plugin:t(o),options:o.get(n.key)};return o.update(Xm,c=>[...c,l]),()=>{o.update(Xm,c=>c.filter(h=>h!==l))}},s=[n,i];return s.id=e,s.plugin=i,s.options=n,s}function xut(e){return t=>{const r=t.get(fr);return t.get(Uo),t.get(df)(r.state.doc)}}const hC=Math.min,pf=Math.max,nx=Math.round,Go=e=>({x:e,y:e}),vut={left:"right",right:"left",bottom:"top",top:"bottom"},wut={start:"end",end:"start"};function vE(e,t,r){return pf(e,hC(t,r))}function Uv(e,t){return typeof e=="function"?e(t):e}function au(e){return e.split("-")[0]}function Gv(e){return e.split("-")[1]}function TF(e){return e==="x"?"y":"x"}function _F(e){return e==="y"?"height":"width"}const kut=new Set(["top","bottom"]);function Yl(e){return kut.has(au(e))?"y":"x"}function MF(e){return TF(Yl(e))}function Cut(e,t,r){r===void 0&&(r=!1);const n=Gv(e),i=MF(e),s=_F(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=ix(o)),[o,ix(o)]}function Sut(e){const t=ix(e);return[uC(e),t,uC(t)]}function uC(e){return e.replace(/start|end/g,t=>wut[t])}const wE=["left","right"],kE=["right","left"],Tut=["top","bottom"],_ut=["bottom","top"];function Mut(e,t,r){switch(e){case"top":case"bottom":return r?t?kE:wE:t?wE:kE;case"left":case"right":return t?Tut:_ut;default:return[]}}function Aut(e,t,r,n){const i=Gv(e);let s=Mut(au(e),r==="start",n);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(uC)))),s}function ix(e){return e.replace(/left|right|bottom|top/g,t=>vut[t])}function Eut(e){return{top:0,right:0,bottom:0,left:0,...e}}function Lut(e){return typeof e!="number"?Eut(e):{top:e,right:e,bottom:e,left:e}}function sx(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function CE(e,t,r){let{reference:n,floating:i}=e;const s=Yl(t),o=MF(t),a=_F(o),l=au(t),c=s==="y",h=n.x+n.width/2-i.width/2,u=n.y+n.height/2-i.height/2,f=n[a]/2-i[a]/2;let d;switch(l){case"top":d={x:h,y:n.y-i.height};break;case"bottom":d={x:h,y:n.y+n.height};break;case"right":d={x:n.x+n.width,y:u};break;case"left":d={x:n.x-i.width,y:u};break;default:d={x:n.x,y:n.y}}switch(Gv(t)){case"start":d[o]-=f*(r&&c?-1:1);break;case"end":d[o]+=f*(r&&c?-1:1);break}return d}const Out=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=r,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:u}=CE(c,n,l),f=n,d={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:b,y:x,data:T,reset:S}=await y({x:h,y:u,initialPlacement:n,placement:f,strategy:i,middlewareData:d,rects:c,platform:o,elements:{reference:e,floating:t}});h=b??h,u=x??u,d={...d,[g]:{...d[g],...T}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:h,y:u}=CE(c,f,l)),m=-1)}return{x:h,y:u,placement:f,strategy:i,middlewareData:d}};async function AF(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:u="floating",altBoundary:f=!1,padding:d=0}=Uv(t,e),p=Lut(d),g=a[f?u==="floating"?"reference":"floating":u],y=sx(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(g)))==null||r?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:h,strategy:l})),b=u==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),T=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},S=sx(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:x,strategy:l}):b);return{top:(y.top-S.top+p.top)/T.y,bottom:(S.bottom-y.bottom+p.bottom)/T.y,left:(y.left-S.left+p.left)/T.x,right:(S.right-y.right+p.right)/T.x}}const Dut=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:h=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Uv(e,t);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const y=au(i),b=Yl(a),x=au(a)===a,T=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=f||(x||!m?[ix(a)]:Sut(a)),w=p!=="none";!f&&w&&S.push(...Aut(a,m,p,T));const _=[a,...S],I=await AF(t,g),N=[];let L=((n=s.flip)==null?void 0:n.overflows)||[];if(h&&N.push(I[y]),u){const z=Cut(i,o,T);N.push(I[z[0]],I[z[1]])}if(L=[...L,{placement:i,overflows:N}],!N.every(z=>z<=0)){var D,P;const z=(((D=s.flip)==null?void 0:D.index)||0)+1,$=_[z];if($&&(!(u==="alignment"?b!==Yl($):!1)||L.every(q=>Yl(q.placement)===b?q.overflows[0]>0:!0)))return{data:{index:z,overflows:L},reset:{placement:$}};let H=(P=L.filter(U=>U.overflows[0]<=0).sort((U,q)=>U.overflows[1]-q.overflows[1])[0])==null?void 0:P.placement;if(!H)switch(d){case"bestFit":{var K;const U=(K=L.filter(q=>{if(w){const rt=Yl(q.placement);return rt===b||rt==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(rt=>rt>0).reduce((rt,E)=>rt+E,0)]).sort((q,rt)=>q[1]-rt[1])[0])==null?void 0:K[0];U&&(H=U);break}case"initialPlacement":H=a;break}if(i!==H)return{reset:{placement:H}}}return{}}}},Iut=new Set(["left","top"]);async function But(e,t){const{placement:r,platform:n,elements:i}=e,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=au(r),a=Gv(r),l=Yl(r)==="y",c=Iut.has(o)?-1:1,h=s&&l?-1:1,u=Uv(t,e);let{mainAxis:f,crossAxis:d,alignmentAxis:p}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return a&&typeof p=="number"&&(d=a==="end"?p*-1:p),l?{x:d*h,y:f*c}:{x:f*c,y:d*h}}const Rut=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await But(t,e);return o===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},Put=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:b}=g;return{x:y,y:b}}},...l}=Uv(e,t),c={x:r,y:n},h=await AF(t,l),u=Yl(au(i)),f=TF(u);let d=c[f],p=c[u];if(s){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",b=d+h[g],x=d-h[y];d=vE(b,d,x)}if(o){const g=u==="y"?"top":"left",y=u==="y"?"bottom":"right",b=p+h[g],x=p-h[y];p=vE(b,p,x)}const m=a.fn({...t,[f]:d,[u]:p});return{...m,data:{x:m.x-r,y:m.y-n,enabled:{[f]:s,[u]:o}}}}}};function Kv(){return typeof window<"u"}function Vd(e){return EF(e)?(e.nodeName||"").toLowerCase():"#document"}function Qi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ml(e){var t;return(t=(EF(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function EF(e){return Kv()?e instanceof Node||e instanceof Qi(e).Node:!1}function io(e){return Kv()?e instanceof Element||e instanceof Qi(e).Element:!1}function Zo(e){return Kv()?e instanceof HTMLElement||e instanceof Qi(e).HTMLElement:!1}function SE(e){return!Kv()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Qi(e).ShadowRoot}const Nut=new Set(["inline","contents"]);function p1(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=so(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!Nut.has(i)}const Fut=new Set(["table","td","th"]);function $ut(e){return Fut.has(Vd(e))}const zut=[":popover-open",":modal"];function Yv(e){return zut.some(t=>{try{return e.matches(t)}catch{return!1}})}const Hut=["transform","translate","scale","rotate","perspective"],qut=["transform","translate","scale","rotate","perspective","filter"],Vut=["paint","layout","strict","content"];function iS(e){const t=sS(),r=io(e)?so(e):e;return Hut.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||qut.some(n=>(r.willChange||"").includes(n))||Vut.some(n=>(r.contain||"").includes(n))}function Wut(e){let t=uc(e);for(;Zo(t)&&!xd(t);){if(iS(t))return t;if(Yv(t))return null;t=uc(t)}return null}function sS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const jut=new Set(["html","body","#document"]);function xd(e){return jut.has(Vd(e))}function so(e){return Qi(e).getComputedStyle(e)}function Xv(e){return io(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function uc(e){if(Vd(e)==="html")return e;const t=e.assignedSlot||e.parentNode||SE(e)&&e.host||ml(e);return SE(t)?t.host:t}function LF(e){const t=uc(e);return xd(t)?e.ownerDocument?e.ownerDocument.body:e.body:Zo(t)&&p1(t)?t:LF(t)}function OF(e,t,r){var n;t===void 0&&(t=[]);const i=LF(e),s=i===((n=e.ownerDocument)==null?void 0:n.body),o=Qi(i);return s?(fC(o),t.concat(o,o.visualViewport||[],p1(i)?i:[],[])):t.concat(i,OF(i,[]))}function fC(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function DF(e){const t=so(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=Zo(e),s=i?e.offsetWidth:r,o=i?e.offsetHeight:n,a=nx(r)!==s||nx(n)!==o;return a&&(r=s,n=o),{width:r,height:n,$:a}}function IF(e){return io(e)?e:e.contextElement}function mf(e){const t=IF(e);if(!Zo(t))return Go(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:s}=DF(t);let o=(s?nx(r.width):r.width)/n,a=(s?nx(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Uut=Go(0);function BF(e){const t=Qi(e);return!sS()||!t.visualViewport?Uut:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Gut(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Qi(e)?!1:t}function tg(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),s=IF(e);let o=Go(1);t&&(n?io(n)&&(o=mf(n)):o=mf(e));const a=Gut(s,r,n)?BF(s):Go(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,h=i.width/o.x,u=i.height/o.y;if(s){const f=Qi(s),d=n&&io(n)?Qi(n):n;let p=f,m=fC(p);for(;m&&n&&d!==p;){const g=mf(m),y=m.getBoundingClientRect(),b=so(m),x=y.left+(m.clientLeft+parseFloat(b.paddingLeft))*g.x,T=y.top+(m.clientTop+parseFloat(b.paddingTop))*g.y;l*=g.x,c*=g.y,h*=g.x,u*=g.y,l+=x,c+=T,p=Qi(m),m=fC(p)}}return sx({width:h,height:u,x:l,y:c})}function Jv(e,t){const r=Xv(e).scrollLeft;return t?t.left+r:tg(ml(e)).left+r}function RF(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-Jv(e,r),i=r.top+t.scrollTop;return{x:n,y:i}}function Kut(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const s=i==="fixed",o=ml(n),a=t?Yv(t.floating):!1;if(n===o||a&&s)return r;let l={scrollLeft:0,scrollTop:0},c=Go(1);const h=Go(0),u=Zo(n);if((u||!u&&!s)&&((Vd(n)!=="body"||p1(o))&&(l=Xv(n)),Zo(n))){const d=tg(n);c=mf(n),h.x=d.x+n.clientLeft,h.y=d.y+n.clientTop}const f=o&&!u&&!s?RF(o,l):Go(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+h.x+f.x,y:r.y*c.y-l.scrollTop*c.y+h.y+f.y}}function Yut(e){return Array.from(e.getClientRects())}function Xut(e){const t=ml(e),r=Xv(e),n=e.ownerDocument.body,i=pf(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=pf(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Jv(e);const a=-r.scrollTop;return so(n).direction==="rtl"&&(o+=pf(t.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:a}}const TE=25;function Jut(e,t){const r=Qi(e),n=ml(e),i=r.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const h=sS();(!h||h&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const c=Jv(n);if(c<=0){const h=n.ownerDocument,u=h.body,f=getComputedStyle(u),d=h.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,p=Math.abs(n.clientWidth-u.clientWidth-d);p<=TE&&(s-=p)}else c<=TE&&(s+=c);return{width:s,height:o,x:a,y:l}}const Zut=new Set(["absolute","fixed"]);function Qut(e,t){const r=tg(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,s=Zo(e)?mf(e):Go(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,c=n*s.y;return{width:o,height:a,x:l,y:c}}function _E(e,t,r){let n;if(t==="viewport")n=Jut(e,r);else if(t==="document")n=Xut(ml(e));else if(io(t))n=Qut(t,r);else{const i=BF(e);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return sx(n)}function PF(e,t){const r=uc(e);return r===t||!io(r)||xd(r)?!1:so(r).position==="fixed"||PF(r,t)}function tft(e,t){const r=t.get(e);if(r)return r;let n=OF(e,[]).filter(a=>io(a)&&Vd(a)!=="body"),i=null;const s=so(e).position==="fixed";let o=s?uc(e):e;for(;io(o)&&!xd(o);){const a=so(o),l=iS(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&Zut.has(i.position)||p1(o)&&!l&&PF(e,o))?n=n.filter(h=>h!==o):i=a,o=uc(o)}return t.set(e,n),n}function eft(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const o=[...r==="clippingAncestors"?Yv(t)?[]:tft(t,this._c):[].concat(r),n],a=o[0],l=o.reduce((c,h)=>{const u=_E(t,h,i);return c.top=pf(u.top,c.top),c.right=hC(u.right,c.right),c.bottom=hC(u.bottom,c.bottom),c.left=pf(u.left,c.left),c},_E(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function rft(e){const{width:t,height:r}=DF(e);return{width:t,height:r}}function nft(e,t,r){const n=Zo(t),i=ml(t),s=r==="fixed",o=tg(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=Go(0);function c(){l.x=Jv(i)}if(n||!n&&!s)if((Vd(t)!=="body"||p1(i))&&(a=Xv(t)),n){const d=tg(t,!0,s,t);l.x=d.x+t.clientLeft,l.y=d.y+t.clientTop}else i&&c();s&&!n&&i&&c();const h=i&&!n&&!s?RF(i,a):Go(0),u=o.left+a.scrollLeft-l.x-h.x,f=o.top+a.scrollTop-l.y-h.y;return{x:u,y:f,width:o.width,height:o.height}}function x5(e){return so(e).position==="static"}function ME(e,t){if(!Zo(e)||so(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return ml(e)===r&&(r=r.ownerDocument.body),r}function NF(e,t){const r=Qi(e);if(Yv(e))return r;if(!Zo(e)){let i=uc(e);for(;i&&!xd(i);){if(io(i)&&!x5(i))return i;i=uc(i)}return r}let n=ME(e,t);for(;n&&$ut(n)&&x5(n);)n=ME(n,t);return n&&xd(n)&&x5(n)&&!iS(n)?r:n||Wut(e)||r}const ift=async function(e){const t=this.getOffsetParent||NF,r=this.getDimensions,n=await r(e.floating);return{reference:nft(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function sft(e){return so(e).direction==="rtl"}const oft={convertOffsetParentRelativeRectToViewportRelativeRect:Kut,getDocumentElement:ml,getClippingRect:eft,getOffsetParent:NF,getElementRects:ift,getClientRects:Yut,getDimensions:rft,getScale:mf,isElement:io,isRTL:sft},fc=Rut,AE=Put,ox=Dut,oo=(e,t,r)=>{const n=new Map,i={platform:oft,...r},s={...i.platform,_c:n};return Out(e,t,{...i,platform:s})};function m1(e,t){return Object.assign(e,{meta:{package:"@milkdown/plugin-block",...t}}),e}const aft=e=>!jo(r=>r.type.name==="table")(e),Zv=er({filterNodes:aft},"blockConfig");m1(Zv,{displayName:"Ctx<blockConfig>"});function lft(e,t,r){var i;if(!e.dom.parentElement)return null;try{const s=(i=e.posAtCoords({left:t.x,top:t.y}))==null?void 0:i.inside;if(s==null||s<0)return null;let o=e.state.doc.resolve(s),a=e.state.doc.nodeAt(s),l=e.nodeDOM(s);const c=u=>{const f=o.depth>=1&&o.index(o.depth)===0;if(!(u||f))return;const p=o.before(o.depth);a=e.state.doc.nodeAt(p),l=e.nodeDOM(p),o=e.state.doc.resolve(p),r(o,a)||c(!0)},h=r(o,a);return c(!h),!l||!a?null:{node:a,$pos:o,el:l}}catch{return null}}const EE=ky.ie&&ky.ie_version<15||ky.ios&&ky.webkit_version<604,LE=20;var Nf,Pg,Mh,$s,Ff,zs,Va,FF,sp,Ah,Eh,Ng,$f,zf,Hf,Fg,Lh;class cft{constructor(){kt(this,Va);kt(this,Nf);kt(this,Pg);kt(this,Mh);kt(this,$s);kt(this,Ff);kt(this,zs);kt(this,Ah);kt(this,Eh);kt(this,Ng);kt(this,$f);kt(this,zf);kt(this,Hf);kt(this,Fg);kt(this,Lh);nt(this,Pg,()=>{if(!V(this,$s))return null;const t=V(this,$s),r=V(this,Va,sp);if(r&&ie.isSelectable(t.node)){const n=ie.create(r.state.doc,t.$pos.pos);return r.dispatch(r.state.tr.setSelection(n)),r.focus(),nt(this,Mh,n),n}return null}),nt(this,Mh,null),nt(this,$s,null),nt(this,Ff,void 0),nt(this,zs,!1),nt(this,Eh,()=>{var t;(t=V(this,Ah))==null||t.call(this,{type:"hide"}),nt(this,$s,null)}),nt(this,Ng,t=>{var r;nt(this,$s,t),(r=V(this,Ah))==null||r.call(this,{type:"show",active:t})}),this.bind=(t,r)=>{nt(this,Nf,t),nt(this,Ah,r)},this.addEvent=t=>{t.addEventListener("mousedown",V(this,$f)),t.addEventListener("mouseup",V(this,zf)),t.addEventListener("dragstart",V(this,Hf))},this.removeEvent=t=>{t.removeEventListener("mousedown",V(this,$f)),t.removeEventListener("mouseup",V(this,zf)),t.removeEventListener("dragstart",V(this,Hf))},this.unBind=()=>{nt(this,Ah,void 0)},nt(this,$f,()=>{var t;nt(this,Ff,(t=V(this,$s))==null?void 0:t.el.getBoundingClientRect()),V(this,Pg).call(this)}),nt(this,zf,()=>{if(!V(this,zs)){requestAnimationFrame(()=>{var t;V(this,Ff)&&((t=V(this,Va,sp))==null||t.focus())});return}nt(this,zs,!1),nt(this,Mh,null)}),nt(this,Hf,t=>{var i;nt(this,zs,!0);const r=V(this,Va,sp);if(!r)return;r.dom.dataset.dragging="true";const n=V(this,Mh);if(t.dataTransfer&&n){const s=n.content();t.dataTransfer.effectAllowed="copyMove";const{dom:o,text:a}=r.serializeForClipboard(s);t.dataTransfer.clearData(),t.dataTransfer.setData(EE?"Text":"text/html",o.innerHTML),EE||t.dataTransfer.setData("text/plain",a);const l=(i=V(this,$s))==null?void 0:i.el;l&&t.dataTransfer.setDragImage(l,0,0),r.dragging={slice:s,move:!0}}}),this.keydownCallback=t=>(V(this,Eh).call(this),nt(this,zs,!1),t.dom.dataset.dragging="false",!1),nt(this,Fg,wv((t,r)=>{if(!t.editable)return;const n=t.dom.getBoundingClientRect(),i=n.left+n.width/2;if(!(t.root.elementFromPoint(i,r.clientY)instanceof Element)){V(this,Eh).call(this);return}const o=V(this,Va,FF);if(!o)return;const a=lft(t,{x:i,y:r.clientY},o);if(!a){V(this,Eh).call(this);return}V(this,Ng).call(this,a)},200)),this.mousemoveCallback=(t,r)=>(t.composing||!t.editable||V(this,Fg).call(this,t,r),!1),this.dragoverCallback=(t,r)=>{var n;if(V(this,zs)){const i=(n=V(this,Va,sp))==null?void 0:n.dom.parentElement;if(!i)return!1;const s=i.scrollHeight>i.clientHeight,o=i.getBoundingClientRect();if(s){if(i.scrollTop>0&&Math.abs(r.y-o.y)<LE){const c=i.scrollTop>10?i.scrollTop-10:0;return i.scrollTop=c,!1}const a=Math.round(t.dom.getBoundingClientRect().height);if(Math.round(i.scrollTop+o.height)<a&&Math.abs(r.y-(o.height+o.y))<LE){const c=i.scrollTop+10;return i.scrollTop=c,!1}}}return!1},this.dragenterCallback=t=>{t.dragging&&(nt(this,zs,!0),t.dom.dataset.dragging="true")},this.dragleaveCallback=(t,r)=>{const n=r.clientX,i=r.clientY;(n<0||i<0||n>window.innerWidth||i>window.innerHeight)&&(nt(this,$s,null),V(this,Lh).call(this,t))},this.dropCallback=t=>(V(this,Lh).call(this,t),!1),this.dragendCallback=t=>{V(this,Lh).call(this,t)},nt(this,Lh,t=>{nt(this,zs,!1),t.dom.dataset.dragging="false"})}}Nf=new WeakMap,Pg=new WeakMap,Mh=new WeakMap,$s=new WeakMap,Ff=new WeakMap,zs=new WeakMap,Va=new WeakSet,FF=function(){var t;try{return(t=V(this,Nf))==null?void 0:t.get(Zv.key).filterNodes}catch{return}},sp=function(){var t;return(t=V(this,Nf))==null?void 0:t.get(fr)},Ah=new WeakMap,Eh=new WeakMap,Ng=new WeakMap,$f=new WeakMap,zf=new WeakMap,Hf=new WeakMap,Fg=new WeakMap,Lh=new WeakMap;const oS=er(()=>new cft,"blockService"),Qv=er({},"blockServiceInstance");m1(oS,{displayName:"Ctx<blockService>"});m1(Qv,{displayName:"Ctx<blockServiceInstance>"});const t4=er({},"blockSpec");m1(t4,{displayName:"Ctx<blockSpec>"});const aS=Gr(e=>{const t=new vr("MILKDOWN_BLOCK"),n=e.get(oS.key)();e.set(Qv.key,n);const i=e.get(t4.key);return new xr({key:t,...i,props:{...i.props,handleDOMEvents:{drop:s=>n.dropCallback(s),pointermove:(s,o)=>n.mousemoveCallback(s,o),keydown:s=>n.keydownCallback(s),dragover:(s,o)=>n.dragoverCallback(s,o),dragleave:(s,o)=>n.dragleaveCallback(s,o),dragenter:s=>n.dragenterCallback(s),dragend:s=>n.dragendCallback(s)}}})});m1(aS,{displayName:"Prose<block>"});var xi,Pa,Oh,Dh,$g,qf,zg,Hg,Vf,Wf,jf,uv,$F;class hft{constructor(t){kt(this,uv);kt(this,xi);kt(this,Pa);kt(this,Oh);kt(this,Dh);kt(this,$g);kt(this,qf);kt(this,zg);kt(this,Hg);kt(this,Vf);kt(this,Wf);kt(this,jf);nt(this,Dh,null),nt(this,qf,!1),this.update=()=>{requestAnimationFrame(()=>{if(!V(this,qf))try{J1(this,uv,$F).call(this),nt(this,qf,!0)}catch{}})},this.destroy=()=>{var r,n;(r=V(this,Oh))==null||r.unBind(),(n=V(this,Oh))==null||n.removeEvent(V(this,xi)),V(this,xi).remove()},this.show=r=>{const n=r.el,i=V(this,Pa).get(fr).dom,s={ctx:V(this,Pa),active:r,editorDom:i,blockDom:V(this,xi)},o={contextElement:n,getBoundingClientRect:()=>V(this,Wf)?V(this,Wf).call(this,s):n.getBoundingClientRect()},a=[ox()];if(V(this,Vf)){const l=V(this,Vf).call(this,s),c=fc(l);a.push(c)}oo(o,V(this,xi),{placement:V(this,jf)?V(this,jf).call(this,s):"left",middleware:[...a,...V(this,zg)],...V(this,Hg)}).then(({x:l,y:c})=>{Object.assign(V(this,xi).style,{left:`${l}px`,top:`${c}px`}),V(this,xi).dataset.show="true"}).catch(console.error)},this.hide=()=>{V(this,xi).dataset.show="false"},nt(this,Pa,t.ctx),nt(this,xi,t.content),nt(this,Vf,t.getOffset),nt(this,Wf,t.getPosition),nt(this,jf,t.getPlacement),nt(this,zg,t.middleware??[]),nt(this,Hg,t.floatingUIOptions??{}),nt(this,$g,t.root),this.hide()}get active(){return V(this,Dh)}}xi=new WeakMap,Pa=new WeakMap,Oh=new WeakMap,Dh=new WeakMap,$g=new WeakMap,qf=new WeakMap,zg=new WeakMap,Hg=new WeakMap,Vf=new WeakMap,Wf=new WeakMap,jf=new WeakMap,uv=new WeakSet,$F=function(){const t=V(this,Pa).get(fr);(V(this,$g)??t.dom.parentElement??document.body).appendChild(V(this,xi));const n=V(this,Pa).get(Qv.key);n.bind(V(this,Pa),i=>{i.type==="hide"?(this.hide(),nt(this,Dh,null)):i.type==="show"&&(this.show(i.active),nt(this,Dh,i.active))}),nt(this,Oh,n),V(this,Oh).addEvent(V(this,xi)),V(this,xi).draggable=!0};const e4=[t4,Zv,oS,Qv,aS];e4.key=t4.key;e4.pluginKey=aS.key;function uft(e,t){return function(r,n){let{$from:i,$to:s,node:o}=r.selection;if(o&&o.isBlock||i.depth<2||!i.sameParent(s))return!1;let a=i.node(-1);if(a.type!=e)return!1;if(i.parent.content.size==0&&i.node(-1).childCount==i.indexAfter(-1)){if(i.depth==3||i.node(-3).type!=e||i.index(-2)!=i.node(-2).childCount-1)return!1;if(n){let u=Ct.empty,f=i.index(-1)?1:i.index(-2)?2:3;for(let y=i.depth-f;y>=i.depth-3;y--)u=Ct.from(i.node(y).copy(u));let d=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;u=u.append(Ct.from(e.createAndFill()));let p=i.before(i.depth-(f-1)),m=r.tr.replace(p,i.after(-d),new Bt(u,4-f,0)),g=-1;m.doc.nodesBetween(p,m.doc.content.size,(y,b)=>{if(g>-1)return!1;y.isTextblock&&y.content.size==0&&(g=b+1)}),g>-1&&m.setSelection(we.near(m.doc.resolve(g))),n(m.scrollIntoView())}return!0}let l=s.pos==i.end()?a.contentMatchAt(0).defaultType:null,c=r.tr.delete(i.pos,s.pos),h=l?[null,{type:l}]:void 0;return Up(c.doc,i.pos,2,h)?(n&&n(c.split(i.pos,2,h).scrollIntoView()),!0):!1}}function fft(e){return function(t,r){let{$from:n,$to:i}=t.selection,s=n.blockRange(i,o=>o.childCount>0&&o.firstChild.type==e);return s?r?n.node(s.depth-1).type==e?dft(t,r,e,s):pft(t,r,s):!0:!1}}function dft(e,t,r,n){let i=e.tr,s=n.end,o=n.$to.end(n.depth);s<o&&(i.step(new Nn(s-1,o,s,o,new Bt(Ct.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new sP(i.doc.resolve(n.$from.pos),i.doc.resolve(o),n.depth));const a=Lv(n);if(a==null)return!1;i.lift(n,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return Ov(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),t(i.scrollIntoView()),!0}function pft(e,t,r){let n=e.tr,i=r.parent;for(let d=r.end,p=r.endIndex-1,m=r.startIndex;p>m;p--)d-=i.child(p).nodeSize,n.delete(d-1,d+1);let s=n.doc.resolve(r.start),o=s.nodeAfter;if(n.mapping.map(r.end)!=r.start+s.nodeAfter.nodeSize)return!1;let a=r.startIndex==0,l=r.endIndex==i.childCount,c=s.node(-1),h=s.index(-1);if(!c.canReplace(h+(a?0:1),h+1,o.content.append(l?Ct.empty:Ct.from(i))))return!1;let u=s.pos,f=u+o.nodeSize;return n.step(new Nn(u-(a?1:0),f+(l?1:0),u+1,f-1,new Bt((a?Ct.empty:Ct.from(i.copy(Ct.empty))).append(l?Ct.empty:Ct.from(i.copy(Ct.empty))),a?0:1,l?0:1),a?0:1)),t(n.scrollIntoView()),!0}function mft(e){return function(t,r){let{$from:n,$to:i}=t.selection,s=n.blockRange(i,c=>c.childCount>0&&c.firstChild.type==e);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=e)return!1;if(r){let c=l.lastChild&&l.lastChild.type==a.type,h=Ct.from(c?e.create():null),u=new Bt(Ct.from(e.create(null,Ct.from(a.type.create(null,h)))),c?3:1,0),f=s.start,d=s.end;r(t.tr.step(new Nn(f-(c?3:1),d,f,d,u,1,!0)).scrollIntoView())}return!0}}function gft(e){const t=new Map;if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return _c(e,"definition",function(n){const i=OE(n.identifier);i&&!t.get(i)&&t.set(i,n)}),r;function r(n){const i=OE(n);return t.get(i)}}function OE(e){return String(e||"").toUpperCase()}function yft(){return function(e){const t=gft(e);_c(e,function(r,n,i){if(r.type==="definition"&&i!==void 0&&typeof n=="number")return i.children.splice(n,1),[qk,n];if(r.type==="imageReference"||r.type==="linkReference"){const s=t(r.identifier);if(s&&i&&typeof n=="number")return i.children[n]=r.type==="imageReference"?{type:"image",url:s.url,title:s.title,alt:r.alt}:{type:"link",url:s.url,title:s.title,children:r.children},[qk,n]}})}}function zF(e,t){var i;if(!(t.childCount>=1&&((i=t.lastChild)==null?void 0:i.type.name)==="hardbreak")){e.next(t.content);return}const n=[];t.content.forEach((s,o,a)=>{a!==t.childCount-1&&n.push(s)}),e.next(Ct.fromArray(n))}function st(e,t){return Object.assign(e,{meta:{package:"@milkdown/preset-commonmark",...t}}),e}const lS=d1("emphasis");st(lS,{displayName:"Attr<emphasis>",group:"Emphasis"});const vu=qd("emphasis",e=>({attrs:{marker:{default:e.get(Jp).emphasis||"*",validate:"string"}},parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:t=>t==="italic"}],toDOM:t=>["em",e.get(lS.key)(t)],parseMarkdown:{match:t=>t.type==="emphasis",runner:(t,r,n)=>{t.openMark(n,{marker:r.marker}),t.next(r.children),t.closeMark(n)}},toMarkdown:{match:t=>t.type.name==="emphasis",runner:(t,r)=>{t.withMark(r,"emphasis",void 0,{marker:r.attrs.marker})}}}));st(vu.mark,{displayName:"MarkSchema<emphasis>",group:"Emphasis"});st(vu.ctx,{displayName:"MarkSchemaCtx<emphasis>",group:"Emphasis"});const r4=be("ToggleEmphasis",e=>()=>qv(vu.type(e)));st(r4,{displayName:"Command<toggleEmphasisCommand>",group:"Emphasis"});const HF=Wn(e=>o1(/(?:^|[^*])\*([^*]+)\*$/,vu.type(e),{getAttr:()=>({marker:"*"}),updateCaptured:({fullMatch:t,start:r})=>t.startsWith("*")?{}:{fullMatch:t.slice(1),start:r+1}}));st(HF,{displayName:"InputRule<emphasis>|Star",group:"Emphasis"});const qF=Wn(e=>o1(/\b_(?![_\s])(.*?[^_\s])_\b/,vu.type(e),{getAttr:()=>({marker:"_"}),updateCaptured:({fullMatch:t,start:r})=>t.startsWith("_")?{}:{fullMatch:t.slice(1),start:r+1}}));st(qF,{displayName:"InputRule<emphasis>|Underscore",group:"Emphasis"});const cS=Pi("emphasisKeymap",{ToggleEmphasis:{shortcuts:"Mod-i",command:e=>{const t=e.get(Dt);return()=>t.call(r4.key)}}});st(cS.ctx,{displayName:"KeymapCtx<emphasis>",group:"Emphasis"});st(cS.shortcuts,{displayName:"Keymap<emphasis>",group:"Emphasis"});const hS=d1("strong");st(hS,{displayName:"Attr<strong>",group:"Strong"});const Wd=qd("strong",e=>({attrs:{marker:{default:e.get(Jp).strong||"*",validate:"string"}},parseDOM:[{tag:"b",getAttrs:t=>t.style.fontWeight!="normal"&&null},{tag:"strong"},{style:"font-style",getAttrs:t=>t==="bold"},{style:"font-weight=400",clearMark:t=>t.type.name=="strong"},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],toDOM:t=>["strong",e.get(hS.key)(t)],parseMarkdown:{match:t=>t.type==="strong",runner:(t,r,n)=>{t.openMark(n,{marker:r.marker}),t.next(r.children),t.closeMark(n)}},toMarkdown:{match:t=>t.type.name==="strong",runner:(t,r)=>{t.withMark(r,"strong",void 0,{marker:r.attrs.marker})}}}));st(Wd.mark,{displayName:"MarkSchema<strong>",group:"Strong"});st(Wd.ctx,{displayName:"MarkSchemaCtx<strong>",group:"Strong"});const n4=be("ToggleStrong",e=>()=>qv(Wd.type(e)));st(n4,{displayName:"Command<toggleStrongCommand>",group:"Strong"});const VF=Wn(e=>o1(new RegExp("(?<![\\w:/])(?:\\*\\*|__)([^*_]+?)(?:\\*\\*|__)(?![\\w/])$"),Wd.type(e),{getAttr:t=>({marker:t[0].startsWith("*")?"*":"_"})}));st(VF,{displayName:"InputRule<strong>",group:"Strong"});const uS=Pi("strongKeymap",{ToggleBold:{shortcuts:["Mod-b"],command:e=>{const t=e.get(Dt);return()=>t.call(n4.key)}}});st(uS.ctx,{displayName:"KeymapCtx<strong>",group:"Strong"});st(uS.shortcuts,{displayName:"Keymap<strong>",group:"Strong"});const fS=d1("inlineCode");st(fS,{displayName:"Attr<inlineCode>",group:"InlineCode"});const qa=qd("inlineCode",e=>({priority:100,code:!0,parseDOM:[{tag:"code"}],toDOM:t=>["code",e.get(fS.key)(t)],parseMarkdown:{match:t=>t.type==="inlineCode",runner:(t,r,n)=>{t.openMark(n),t.addText(r.value),t.closeMark(n)}},toMarkdown:{match:t=>t.type.name==="inlineCode",runner:(t,r,n)=>{t.withMark(r,"inlineCode",n.text||"")}}}));st(qa.mark,{displayName:"MarkSchema<inlineCode>",group:"InlineCode"});st(qa.ctx,{displayName:"MarkSchemaCtx<inlineCode>",group:"InlineCode"});const i4=be("ToggleInlineCode",e=>()=>(t,r)=>{const{selection:n,tr:i}=t;if(n.empty)return!1;const{from:s,to:o}=n;return t.doc.rangeHasMark(s,o,qa.type(e))?(r==null||r(i.removeMark(s,o,qa.type(e))),!0):(Object.keys(t.schema.marks).filter(c=>c!==qa.type.name).map(c=>t.schema.marks[c]).forEach(c=>{i.removeMark(s,o,c)}),r==null||r(i.addMark(s,o,qa.type(e).create())),!0)});st(i4,{displayName:"Command<toggleInlineCodeCommand>",group:"InlineCode"});const WF=Wn(e=>o1(/(?:`)([^`]+)(?:`)$/,qa.type(e)));st(WF,{displayName:"InputRule<inlineCodeInputRule>",group:"InlineCode"});const dS=Pi("inlineCodeKeymap",{ToggleInlineCode:{shortcuts:"Mod-e",command:e=>{const t=e.get(Dt);return()=>t.call(i4.key)}}});st(dS.ctx,{displayName:"KeymapCtx<inlineCode>",group:"InlineCode"});st(dS.shortcuts,{displayName:"Keymap<inlineCode>",group:"InlineCode"});const pS=d1("link");st(pS,{displayName:"Attr<link>",group:"Link"});const Xs=qd("link",e=>({attrs:{href:{validate:"string"},title:{default:null,validate:"string|null"}},parseDOM:[{tag:"a[href]",getAttrs:t=>{if(!(t instanceof HTMLElement))throw co(t);return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM:t=>["a",{...e.get(pS.key)(t),...t.attrs}],parseMarkdown:{match:t=>t.type==="link",runner:(t,r,n)=>{const i=r.url,s=r.title;t.openMark(n,{href:i,title:s}),t.next(r.children),t.closeMark(n)}},toMarkdown:{match:t=>t.type.name==="link",runner:(t,r)=>{t.withMark(r,"link",void 0,{title:r.attrs.title,url:r.attrs.href})}}}));st(Xs.mark,{displayName:"MarkSchema<link>",group:"Link"});const jF=be("ToggleLink",e=>(t={})=>qv(Xs.type(e),t));st(jF,{displayName:"Command<toggleLinkCommand>",group:"Link"});const UF=be("UpdateLink",e=>(t={})=>(r,n)=>{if(!n)return!1;let i,s=-1;const{selection:o}=r,{from:a,to:l}=o;if(r.doc.nodesBetween(a,a===l?l+1:l,(p,m)=>{if(Xs.type(e).isInSet(p.marks))return i=p,s=m,!1}),!i)return!1;const c=i.marks.find(({type:p})=>p===Xs.type(e));if(!c)return!1;const h=s,u=s+i.nodeSize,{tr:f}=r,d=Xs.type(e).create({...c.attrs,...t});return d?(n(f.removeMark(h,u,c).addMark(h,u,d).setSelection(new Gt(f.selection.$anchor)).scrollIntoView()),!0):!1});st(UF,{displayName:"Command<updateLinkCommand>",group:"Link"});const GF=nS("doc",()=>({content:"block+",parseMarkdown:{match:({type:e})=>e==="root",runner:(e,t,r)=>{e.injectRoot(t,r)}},toMarkdown:{match:e=>e.type.name==="doc",runner:(e,t)=>{e.openNode("root"),e.next(t.content)}}}));st(GF,{displayName:"NodeSchema<doc>",group:"Doc"});function bft(e){return P7(e,t=>{var r;return t.type==="html"&&["<br />","<br>","<br >","<br/>"].includes((r=t.value)==null?void 0:r.trim())},(t,r)=>{if(!r.length)return;const n=r[r.length-1];if(!n)return;const i=n.children.indexOf(t);i!==-1&&n.children.splice(i,1)},!0)}const s4=ia("remark-preserve-empty-line",()=>()=>bft);st(s4.plugin,{displayName:"Remark<remarkPreserveEmptyLine>",group:"Remark"});st(s4.options,{displayName:"RemarkConfig<remarkPreserveEmptyLine>",group:"Remark"});const mS=ho("paragraph");st(mS,{displayName:"Attr<paragraph>",group:"Paragraph"});const uo=$r("paragraph",e=>({content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:t=>["p",e.get(mS.key)(t),0],parseMarkdown:{match:t=>t.type==="paragraph",runner:(t,r,n)=>{t.openNode(n),r.children?t.next(r.children):t.addText(r.value||""),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="paragraph",runner:(t,r)=>{var s;const i=(s=e.get(fr).state)==null?void 0:s.doc.lastChild;t.openNode("paragraph"),(!r.content||r.content.size===0)&&r!==i&&xft(e)?t.addNode("html",void 0,"<br />"):zF(t,r),t.closeNode()}}}));function xft(e){let t=!1;try{e.get(s4.id),t=!0}catch{t=!1}return t}st(uo.node,{displayName:"NodeSchema<paragraph>",group:"Paragraph"});st(uo.ctx,{displayName:"NodeSchemaCtx<paragraph>",group:"Paragraph"});const gS=be("TurnIntoText",e=>()=>jm(uo.type(e)));st(gS,{displayName:"Command<turnIntoTextCommand>",group:"Paragraph"});const yS=Pi("paragraphKeymap",{TurnIntoText:{shortcuts:"Mod-Alt-0",command:e=>{const t=e.get(Dt);return()=>t.call(gS.key)}}});st(yS.ctx,{displayName:"KeymapCtx<paragraph>",group:"Paragraph"});st(yS.shortcuts,{displayName:"Keymap<paragraph>",group:"Paragraph"});const vft=Array(6).fill(0).map((e,t)=>t+1);function wft(e){return e.textContent.toLowerCase().trim().replace(/\s+/g,"-")}const o4=er(wft,"headingIdGenerator");st(o4,{displayName:"Ctx<HeadingIdGenerator>",group:"Heading"});const bS=ho("heading");st(bS,{displayName:"Attr<heading>",group:"Heading"});const Dn=$r("heading",e=>{const t=e.get(o4.key);return{content:"inline*",group:"block",defining:!0,attrs:{id:{default:"",validate:"string"},level:{default:1,validate:"number"}},parseDOM:vft.map(r=>({tag:`h${r}`,getAttrs:n=>{if(!(n instanceof HTMLElement))throw co(n);return{level:r,id:n.id}}})),toDOM:r=>[`h${r.attrs.level}`,{...e.get(bS.key)(r),id:r.attrs.id||t(r)},0],parseMarkdown:{match:({type:r})=>r==="heading",runner:(r,n,i)=>{const s=n.depth;r.openNode(i,{level:s}),r.next(n.children),r.closeNode()}},toMarkdown:{match:r=>r.type.name==="heading",runner:(r,n)=>{r.openNode("heading",void 0,{depth:n.attrs.level}),zF(r,n),r.closeNode()}}}});st(Dn.node,{displayName:"NodeSchema<heading>",group:"Heading"});st(Dn.ctx,{displayName:"NodeSchemaCtx<heading>",group:"Heading"});const KF=Wn(e=>O7(/^(?<hashes>#+)\s$/,Dn.type(e),t=>{var o,a;const r=((a=(o=t.groups)==null?void 0:o.hashes)==null?void 0:a.length)||0,n=e.get(fr),{$from:i}=n.state.selection,s=i.node();if(s.type.name==="heading"){let l=Number(s.attrs.level)+Number(r);return l>6&&(l=6),{level:l}}return{level:r}}));st(KF,{displayName:"InputRule<wrapInHeadingInputRule>",group:"Heading"});const qs=be("WrapInHeading",e=>t=>(t??(t=1),t<1?jm(uo.type(e)):jm(Dn.type(e),{level:t})));st(qs,{displayName:"Command<wrapInHeadingCommand>",group:"Heading"});const xS=be("DowngradeHeading",e=>()=>(t,r,n)=>{const{$from:i}=t.selection,s=i.node();if(s.type!==Dn.type(e)||!t.selection.empty||i.parentOffset!==0)return!1;const o=s.attrs.level-1;return o?(r==null||r(t.tr.setNodeMarkup(t.selection.$from.before(),void 0,{...s.attrs,level:o})),!0):jm(uo.type(e))(t,r,n)});st(xS,{displayName:"Command<downgradeHeadingCommand>",group:"Heading"});const vS=Pi("headingKeymap",{TurnIntoH1:{shortcuts:"Mod-Alt-1",command:e=>{const t=e.get(Dt);return()=>t.call(qs.key,1)}},TurnIntoH2:{shortcuts:"Mod-Alt-2",command:e=>{const t=e.get(Dt);return()=>t.call(qs.key,2)}},TurnIntoH3:{shortcuts:"Mod-Alt-3",command:e=>{const t=e.get(Dt);return()=>t.call(qs.key,3)}},TurnIntoH4:{shortcuts:"Mod-Alt-4",command:e=>{const t=e.get(Dt);return()=>t.call(qs.key,4)}},TurnIntoH5:{shortcuts:"Mod-Alt-5",command:e=>{const t=e.get(Dt);return()=>t.call(qs.key,5)}},TurnIntoH6:{shortcuts:"Mod-Alt-6",command:e=>{const t=e.get(Dt);return()=>t.call(qs.key,6)}},DowngradeHeading:{shortcuts:["Delete","Backspace"],command:e=>{const t=e.get(Dt);return()=>t.call(xS.key)}}});st(vS.ctx,{displayName:"KeymapCtx<heading>",group:"Heading"});st(vS.shortcuts,{displayName:"Keymap<heading>",group:"Heading"});const wS=ho("blockquote");st(wS,{displayName:"Attr<blockquote>",group:"Blockquote"});const wu=$r("blockquote",e=>({content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:t=>["blockquote",e.get(wS.key)(t),0],parseMarkdown:{match:({type:t})=>t==="blockquote",runner:(t,r,n)=>{t.openNode(n).next(r.children).closeNode()}},toMarkdown:{match:t=>t.type.name==="blockquote",runner:(t,r)=>{t.openNode("blockquote").next(r.content).closeNode()}}}));st(wu.node,{displayName:"NodeSchema<blockquote>",group:"Blockquote"});st(wu.ctx,{displayName:"NodeSchemaCtx<blockquote>",group:"Blockquote"});const YF=Wn(e=>L7(/^\s*>\s$/,wu.type(e)));st(YF,{displayName:"InputRule<wrapInBlockquoteInputRule>",group:"Blockquote"});const a4=be("WrapInBlockquote",e=>()=>W7(wu.type(e)));st(a4,{displayName:"Command<wrapInBlockquoteCommand>",group:"Blockquote"});const kS=Pi("blockquoteKeymap",{WrapInBlockquote:{shortcuts:"Mod-Shift-b",command:e=>{const t=e.get(Dt);return()=>t.call(a4.key)}}});st(kS.ctx,{displayName:"KeymapCtx<blockquote>",group:"Blockquote"});st(kS.shortcuts,{displayName:"Keymap<blockquote>",group:"Blockquote"});const CS=ho("codeBlock",()=>({pre:{},code:{}}));st(CS,{displayName:"Attr<codeBlock>",group:"CodeBlock"});const ao=$r("code_block",e=>({content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:"",validate:"string"}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:t=>{if(!(t instanceof HTMLElement))throw co(t);return{language:t.dataset.language}}}],toDOM:t=>{const r=e.get(CS.key)(t),n=t.attrs.language,i=n&&n.length>0?{"data-language":n}:void 0;return["pre",{...r.pre,...i},["code",r.code,0]]},parseMarkdown:{match:({type:t})=>t==="code",runner:(t,r,n)=>{const i=r.lang??"",s=r.value;t.openNode(n,{language:i}),s&&t.addText(s),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="code_block",runner:(t,r)=>{var n;t.addNode("code",void 0,((n=r.content.firstChild)==null?void 0:n.text)||"",{lang:r.attrs.language})}}}));st(ao.node,{displayName:"NodeSchema<codeBlock>",group:"CodeBlock"});st(ao.ctx,{displayName:"NodeSchemaCtx<codeBlock>",group:"CodeBlock"});const XF=Wn(e=>O7(/^```(?<language>[a-z]*)?[\s\n]$/,ao.type(e),t=>{var r;return{language:((r=t.groups)==null?void 0:r.language)??""}}));st(XF,{displayName:"InputRule<createCodeBlockInputRule>",group:"CodeBlock"});const l4=be("CreateCodeBlock",e=>(t="")=>jm(ao.type(e),{language:t}));st(l4,{displayName:"Command<createCodeBlockCommand>",group:"CodeBlock"});const kft=be("UpdateCodeBlockLanguage",()=>({pos:e,language:t}={pos:-1,language:""})=>(r,n)=>e>=0?(n==null||n(r.tr.setNodeAttribute(e,"language",t)),!0):!1);st(kft,{displayName:"Command<updateCodeBlockLanguageCommand>",group:"CodeBlock"});const SS=Pi("codeBlockKeymap",{CreateCodeBlock:{shortcuts:"Mod-Alt-c",command:e=>{const t=e.get(Dt);return()=>t.call(l4.key)}}});st(SS.ctx,{displayName:"KeymapCtx<codeBlock>",group:"CodeBlock"});st(SS.shortcuts,{displayName:"Keymap<codeBlock>",group:"CodeBlock"});const TS=ho("image");st(TS,{displayName:"Attr<image>",group:"Image"});const ku=$r("image",e=>({inline:!0,group:"inline",selectable:!0,draggable:!0,marks:"",atom:!0,defining:!0,isolating:!0,attrs:{src:{default:"",validate:"string"},alt:{default:"",validate:"string"},title:{default:"",validate:"string"}},parseDOM:[{tag:"img[src]",getAttrs:t=>{if(!(t instanceof HTMLElement))throw co(t);return{src:t.getAttribute("src")||"",alt:t.getAttribute("alt")||"",title:t.getAttribute("title")||t.getAttribute("alt")||""}}}],toDOM:t=>["img",{...e.get(TS.key)(t),...t.attrs}],parseMarkdown:{match:({type:t})=>t==="image",runner:(t,r,n)=>{const i=r.url,s=r.alt,o=r.title;t.addNode(n,{src:i,alt:s,title:o})}},toMarkdown:{match:t=>t.type.name==="image",runner:(t,r)=>{t.addNode("image",void 0,void 0,{title:r.attrs.title,url:r.attrs.src,alt:r.attrs.alt})}}}));st(ku.node,{displayName:"NodeSchema<image>",group:"Image"});st(ku.ctx,{displayName:"NodeSchemaCtx<image>",group:"Image"});const JF=be("InsertImage",e=>(t={})=>(r,n)=>{if(!n)return!0;const{src:i="",alt:s="",title:o=""}=t,a=ku.type(e).create({src:i,alt:s,title:o});return a&&n(r.tr.replaceSelectionWith(a).scrollIntoView()),!0});st(JF,{displayName:"Command<insertImageCommand>",group:"Image"});const ZF=be("UpdateImage",e=>(t={})=>(r,n)=>{const i=Cst(r.selection,ku.type(e));if(!i)return!1;const{node:s,pos:o}=i,a={...s.attrs},{src:l,alt:c,title:h}=t;return l!==void 0&&(a.src=l),c!==void 0&&(a.alt=c),h!==void 0&&(a.title=h),n==null||n(r.tr.setNodeMarkup(o,void 0,a).scrollIntoView()),!0});st(ZF,{displayName:"Command<updateImageCommand>",group:"Image"});const Cft=Wn(e=>new Ii(/!\[(?<alt>.*?)]\((?<filename>.*?)\s*(?="|\))"?(?<title>[^"]+)?"?\)/,(t,r,n,i)=>{const[s,o,a="",l]=r;return s?t.tr.replaceWith(n,i,ku.type(e).create({src:a,alt:o,title:l})):null}));st(Cft,{displayName:"InputRule<insertImageInputRule>",group:"Image"});const ax=ho("hardbreak",e=>({"data-type":"hardbreak","data-is-inline":e.attrs.isInline}));st(ax,{displayName:"Attr<hardbreak>",group:"Hardbreak"});const zh=$r("hardbreak",e=>({inline:!0,group:"inline",attrs:{isInline:{default:!1,validate:"boolean"}},selectable:!1,parseDOM:[{tag:"br"},{tag:'span[data-type="hardbreak"]',getAttrs:()=>({isInline:!0})}],toDOM:t=>t.attrs.isInline?["span",e.get(ax.key)(t)," "]:["br",e.get(ax.key)(t)],parseMarkdown:{match:({type:t})=>t==="break",runner:(t,r,n)=>{var i;t.addNode(n,{isInline:!!((i=r.data)!=null&&i.isInline)})}},leafText:()=>`
`,toMarkdown:{match:t=>t.type.name==="hardbreak",runner:(t,r)=>{r.attrs.isInline?t.addNode("text",void 0,`
`):t.addNode("break")}}}));st(zh.node,{displayName:"NodeSchema<hardbreak>",group:"Hardbreak"});st(zh.ctx,{displayName:"NodeSchemaCtx<hardbreak>",group:"Hardbreak"});const _S=be("InsertHardbreak",e=>()=>(t,r)=>{var s;const{selection:n,tr:i}=t;if(!(n instanceof Gt))return!1;if(n.empty){const o=n.$from.node();if(o.childCount>0&&((s=o.lastChild)==null?void 0:s.type.name)==="hardbreak")return r==null||r(i.replaceRangeWith(n.to-1,n.to,t.schema.node("paragraph")).setSelection(we.near(i.doc.resolve(n.to))).scrollIntoView()),!0}return r==null||r(i.setMeta("hardbreak",!0).replaceSelectionWith(zh.type(e).create()).scrollIntoView()),!0});st(_S,{displayName:"Command<insertHardbreakCommand>",group:"Hardbreak"});const MS=Pi("hardbreakKeymap",{InsertHardbreak:{shortcuts:"Shift-Enter",command:e=>{const t=e.get(Dt);return()=>t.call(_S.key)}}});st(MS.ctx,{displayName:"KeymapCtx<hardbreak>",group:"Hardbreak"});st(MS.shortcuts,{displayName:"Keymap<hardbreak>",group:"Hardbreak"});const AS=ho("hr");st(AS,{displayName:"Attr<hr>",group:"Hr"});const jd=$r("hr",e=>({group:"block",parseDOM:[{tag:"hr"}],toDOM:t=>["hr",e.get(AS.key)(t)],parseMarkdown:{match:({type:t})=>t==="thematicBreak",runner:(t,r,n)=>{t.addNode(n)}},toMarkdown:{match:t=>t.type.name==="hr",runner:t=>{t.addNode("thematicBreak")}}}));st(jd.node,{displayName:"NodeSchema<hr>",group:"Hr"});st(jd.ctx,{displayName:"NodeSchemaCtx<hr>",group:"Hr"});const QF=Wn(e=>new Ii(/^(?:---|___\s|\*\*\*\s)$/,(t,r,n,i)=>{const{tr:s}=t;return r[0]&&s.replaceWith(n-1,i,jd.type(e).create()),s}));st(QF,{displayName:"InputRule<insertHrInputRule>",group:"Hr"});const t$=be("InsertHr",e=>()=>(t,r)=>{if(!r)return!0;const n=uo.node.type(e).create(),{tr:i,selection:s}=t,{from:o}=s,a=jd.type(e).create();if(!a)return!0;const l=i.replaceSelectionWith(a).insert(o,n),c=we.findFrom(l.doc.resolve(o),1,!0);return c&&r(l.setSelection(c).scrollIntoView()),!0});st(t$,{displayName:"Command<insertHrCommand>",group:"Hr"});const ES=ho("bulletList");st(ES,{displayName:"Attr<bulletList>",group:"BulletList"});const Cu=$r("bullet_list",e=>({content:"listItem+",group:"block",attrs:{spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ul",getAttrs:t=>{if(!(t instanceof HTMLElement))throw co(t);return{spread:t.dataset.spread==="true"}}}],toDOM:t=>["ul",{...e.get(ES.key)(t),"data-spread":t.attrs.spread},0],parseMarkdown:{match:({type:t,ordered:r})=>t==="list"&&!r,runner:(t,r,n)=>{const i=r.spread!=null?`${r.spread}`:"false";t.openNode(n,{spread:i}).next(r.children).closeNode()}},toMarkdown:{match:t=>t.type.name==="bullet_list",runner:(t,r)=>{t.openNode("list",void 0,{ordered:!1,spread:r.attrs.spread}).next(r.content).closeNode()}}}));st(Cu.node,{displayName:"NodeSchema<bulletList>",group:"BulletList"});st(Cu.ctx,{displayName:"NodeSchemaCtx<bulletList>",group:"BulletList"});const e$=Wn(e=>L7(/^\s*([-+*])\s$/,Cu.type(e)));st(e$,{displayName:"InputRule<wrapInBulletListInputRule>",group:"BulletList"});const LS=be("WrapInBulletList",e=>()=>W7(Cu.type(e)));st(LS,{displayName:"Command<wrapInBulletListCommand>",group:"BulletList"});const OS=Pi("bulletListKeymap",{WrapInBulletList:{shortcuts:"Mod-Alt-8",command:e=>{const t=e.get(Dt);return()=>t.call(LS.key)}}});st(OS.ctx,{displayName:"KeymapCtx<bulletListKeymap>",group:"BulletList"});st(OS.shortcuts,{displayName:"Keymap<bulletListKeymap>",group:"BulletList"});const DS=ho("orderedList");st(DS,{displayName:"Attr<orderedList>",group:"OrderedList"});const Su=$r("ordered_list",e=>({content:"listItem+",group:"block",attrs:{order:{default:1,validate:"number"},spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ol",getAttrs:t=>{if(!(t instanceof HTMLElement))throw co(t);return{spread:t.dataset.spread,order:t.hasAttribute("start")?Number(t.getAttribute("start")):1}}}],toDOM:t=>["ol",{...e.get(DS.key)(t),...t.attrs.order===1?{}:t.attrs.order,"data-spread":t.attrs.spread},0],parseMarkdown:{match:({type:t,ordered:r})=>t==="list"&&!!r,runner:(t,r,n)=>{const i=r.spread!=null?`${r.spread}`:"true";t.openNode(n,{spread:i}).next(r.children).closeNode()}},toMarkdown:{match:t=>t.type.name==="ordered_list",runner:(t,r)=>{t.openNode("list",void 0,{ordered:!0,start:1,spread:r.attrs.spread==="true"}),t.next(r.content),t.closeNode()}}}));st(Su.node,{displayName:"NodeSchema<orderedList>",group:"OrderedList"});st(Su.ctx,{displayName:"NodeSchemaCtx<orderedList>",group:"OrderedList"});const r$=Wn(e=>L7(/^\s*(\d+)\.\s$/,Su.type(e),t=>({order:Number(t[1])}),(t,r)=>r.childCount+r.attrs.order===Number(t[1])));st(r$,{displayName:"InputRule<wrapInOrderedListInputRule>",group:"OrderedList"});const IS=be("WrapInOrderedList",e=>()=>W7(Su.type(e)));st(IS,{displayName:"Command<wrapInOrderedListCommand>",group:"OrderedList"});const BS=Pi("orderedListKeymap",{WrapInOrderedList:{shortcuts:"Mod-Alt-7",command:e=>{const t=e.get(Dt);return()=>t.call(IS.key)}}});st(BS.ctx,{displayName:"KeymapCtx<orderedList>",group:"OrderedList"});st(BS.shortcuts,{displayName:"Keymap<orderedList>",group:"OrderedList"});const RS=ho("listItem");st(RS,{displayName:"Attr<listItem>",group:"ListItem"});const fo=$r("list_item",e=>({group:"listItem",content:"paragraph block*",attrs:{label:{default:"",validate:"string"},listType:{default:"bullet",validate:"string"},spread:{default:!0,validate:"boolean"}},defining:!0,parseDOM:[{tag:"li",getAttrs:t=>{if(!(t instanceof HTMLElement))throw co(t);return{label:t.dataset.label,listType:t.dataset.listType,spread:t.dataset.spread==="true"}}}],toDOM:t=>["li",{...e.get(RS.key)(t),"data-label":t.attrs.label,"data-list-type":t.attrs.listType,"data-spread":t.attrs.spread},0],parseMarkdown:{match:({type:t})=>t==="listItem",runner:(t,r,n)=>{const i=r.label!=null?`${r.label}.`:"",s=r.label!=null?"ordered":"bullet",o=r.spread!=null?`${r.spread}`:"true";t.openNode(n,{label:i,listType:s,spread:o}),t.next(r.children),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="list_item",runner:(t,r)=>{t.openNode("listItem",void 0,{spread:r.attrs.spread}),t.next(r.content),t.closeNode()}}}));st(fo.node,{displayName:"NodeSchema<listItem>",group:"ListItem"});st(fo.ctx,{displayName:"NodeSchemaCtx<listItem>",group:"ListItem"});const PS=be("SinkListItem",e=>()=>mft(fo.type(e)));st(PS,{displayName:"Command<sinkListItemCommand>",group:"ListItem"});const NS=be("LiftListItem",e=>()=>fft(fo.type(e)));st(NS,{displayName:"Command<liftListItemCommand>",group:"ListItem"});const FS=be("SplitListItem",e=>()=>uft(fo.type(e)));st(FS,{displayName:"Command<splitListItemCommand>",group:"ListItem"});function Sft(e){return(t,r,n)=>{const{selection:i}=t;if(!(i instanceof Gt))return!1;const{empty:s,$from:o}=i;return!s||o.parentOffset!==0||o.node(-1).type!==fo.type(e)?!1:TN(t,r,n)}}const $S=be("LiftFirstListItem",e=>()=>Sft(e));st($S,{displayName:"Command<liftFirstListItemCommand>",group:"ListItem"});const zS=Pi("listItemKeymap",{NextListItem:{shortcuts:"Enter",command:e=>{const t=e.get(Dt);return()=>t.call(FS.key)}},SinkListItem:{shortcuts:["Tab","Mod-]"],command:e=>{const t=e.get(Dt);return()=>t.call(PS.key)}},LiftListItem:{shortcuts:["Shift-Tab","Mod-["],command:e=>{const t=e.get(Dt);return()=>t.call(NS.key)}},LiftFirstListItem:{shortcuts:["Backspace","Delete"],command:e=>{const t=e.get(Dt);return()=>t.call($S.key)}}});st(zS.ctx,{displayName:"KeymapCtx<listItem>",group:"ListItem"});st(zS.shortcuts,{displayName:"Keymap<listItem>",group:"ListItem"});const n$=nS("text",()=>({group:"inline",parseMarkdown:{match:({type:e})=>e==="text",runner:(e,t)=>{e.addText(t.value)}},toMarkdown:{match:e=>e.type.name==="text",runner:(e,t)=>{e.addNode("text",void 0,t.text)}}}));st(n$,{displayName:"NodeSchema<text>",group:"Text"});const HS=ho("html");st(HS,{displayName:"Attr<html>",group:"Html"});const qS=$r("html",e=>({atom:!0,group:"inline",inline:!0,attrs:{value:{default:"",validate:"string"}},toDOM:t=>{const r=document.createElement("span"),n={...e.get(HS.key)(t),"data-value":t.attrs.value,"data-type":"html"};return r.textContent=t.attrs.value,["span",n,t.attrs.value]},parseDOM:[{tag:'span[data-type="html"]',getAttrs:t=>({value:t.dataset.value??""})}],parseMarkdown:{match:({type:t})=>t==="html",runner:(t,r,n)=>{t.addNode(n,{value:r.value})}},toMarkdown:{match:t=>t.type.name==="html",runner:(t,r)=>{t.addNode("html",void 0,r.attrs.value)}}}));st(qS.node,{displayName:"NodeSchema<html>",group:"Html"});st(qS.ctx,{displayName:"NodeSchemaCtx<html>",group:"Html"});const Tft=[GF,mS,uo,o4,bS,Dn,ax,zh,wS,wu,CS,ao,AS,jd,TS,ku,ES,Cu,DS,Su,RS,fo,lS,vu,hS,Wd,fS,qa,pS,Xs,HS,qS,n$].flat(),_ft=[YF,e$,r$,XF,QF,KF].flat(),Mft=[HF,qF,WF,VF],ju=be("IsMarkSelected",()=>e=>t=>{if(!e)return!1;const{doc:r,selection:n}=t;return r.rangeHasMark(n.from,n.to,e)}),ah=be("IsNoteSelected",()=>e=>t=>e?zP(t,e).hasNode:!1),fn=be("ClearTextInCurrentBlock",()=>()=>(e,t)=>{let r=e.tr;const{$from:n,$to:i}=r.selection,{pos:s}=n,{pos:o}=i,a=s-n.node().content.size;return a<0?!1:(r=r.deleteRange(a,o),t==null||t(r),!0)}),va=be("SetBlockType",()=>e=>(t,r)=>{const{nodeType:n,attrs:i=null}=e??{};if(!n)return!1;const s=t.tr,{from:o,to:a}=s.selection;try{s.setBlockType(o,a,n,i)}catch{return!1}return r==null||r(s),!0}),op=be("WrapInBlockType",()=>e=>(t,r)=>{const{nodeType:n,attrs:i=null}=e??{};if(!n)return!1;let s=t.tr;try{const{$from:o,$to:a}=s.selection,l=o.blockRange(a),c=l&&A7(l,n,i);if(!c)return!1;s=s.wrap(l,c)}catch{return!1}return r==null||r(s),!0}),ap=be("AddBlockType",()=>e=>(t,r)=>{const{nodeType:n,attrs:i=null}=e??{};if(!n)return!1;const s=t.tr;try{const o=n instanceof Ua?n:n.createAndFill(i);if(!o)return!1;s.replaceSelectionWith(o)}catch{return!1}return r==null||r(s),!0}),i$=be("SelectTextNearPos",()=>e=>(t,r)=>{const{pos:n}=e??{};if(n==null)return!1;const i=(o,a,l)=>Math.min(Math.max(o,a),l),s=t.tr;try{const o=t.doc.resolve(i(n,0,t.doc.content.size));s.setSelection(Gt.near(o))}catch{return!1}return r==null||r(s.scrollIntoView()),!0}),Aft=[gS,a4,qs,xS,l4,_S,t$,JF,ZF,IS,LS,PS,FS,NS,$S,r4,i4,n4,jF,UF,ju,ah,fn,va,op,ap,i$],Eft=[kS,SS,MS,vS,zS,BS,OS,yS,cS,dS,uS].flat(),VS=ia("remarkAddOrderInList",()=>()=>e=>{_c(e,"list",t=>{if(t.ordered){const r=t.start??1;t.children.forEach((n,i)=>{n.label=i+r})}})});st(VS.plugin,{displayName:"Remark<remarkAddOrderInListPlugin>",group:"Remark"});st(VS.options,{displayName:"RemarkConfig<remarkAddOrderInListPlugin>",group:"Remark"});const WS=ia("remarkLineBreak",()=>()=>e=>{const t=/[\t ]*(?:\r?\n|\r)/g;_c(e,"text",(r,n,i)=>{if(!r.value||typeof r.value!="string")return;const s=[];let o=0;t.lastIndex=0;let a=t.exec(r.value);for(;a;){const c=a.index;o!==c&&s.push({type:"text",value:r.value.slice(o,c)}),s.push({type:"break",data:{isInline:!0}}),o=c+a[0].length,a=t.exec(r.value)}if(s.length>0&&i&&typeof n=="number")return o<r.value.length&&s.push({type:"text",value:r.value.slice(o)}),i.children.splice(n,1,...s),n+s.length})});st(WS.plugin,{displayName:"Remark<remarkLineBreak>",group:"Remark"});st(WS.options,{displayName:"RemarkConfig<remarkLineBreak>",group:"Remark"});const jS=ia("remarkInlineLink",()=>yft);st(jS.plugin,{displayName:"Remark<remarkInlineLinkPlugin>",group:"Remark"});st(jS.options,{displayName:"RemarkConfig<remarkInlineLinkPlugin>",group:"Remark"});const Lft=e=>!!e.children,Oft=e=>e.type==="html";function Dft(e,t){return r(e,0,null)[0];function r(n,i,s){if(Lft(n)){const o=[];for(let a=0,l=n.children.length;a<l;a++){const c=n.children[a];if(c){const h=r(c,a,n);if(h)for(let u=0,f=h.length;u<f;u++){const d=h[u];d&&o.push(d)}}}n.children=o}return t(n,i,s)}}const Ift=["root","blockquote","listItem"],US=ia("remarkHTMLTransformer",()=>()=>e=>{Dft(e,(t,r,n)=>Oft(t)?(n&&Ift.includes(n.type)&&(t.children=[{...t}],delete t.value,t.type="paragraph"),[t]):[t])});st(US.plugin,{displayName:"Remark<remarkHtmlTransformer>",group:"Remark"});st(US.options,{displayName:"RemarkConfig<remarkHtmlTransformer>",group:"Remark"});const GS=ia("remarkMarker",()=>()=>(e,t)=>{const r=n=>t.value.charAt(n.position.start.offset);_c(e,n=>["strong","emphasis"].includes(n.type),n=>{n.marker=r(n)})});st(GS.plugin,{displayName:"Remark<remarkMarker>",group:"Remark"});st(GS.options,{displayName:"RemarkConfig<remarkMarker>",group:"Remark"});const s$=Gr(()=>{let e=!1;const t=new vr("MILKDOWN_INLINE_NODES_CURSOR"),r=new xr({key:t,state:{init(){return!1},apply(n){if(!n.selection.empty)return!1;const i=n.selection.$from,s=i.nodeBefore,o=i.nodeAfter;return!!(s&&o&&s.isInline&&!s.isText&&o.isInline&&!o.isText)}},props:{handleDOMEvents:{compositionend:(n,i)=>e?(e=!1,requestAnimationFrame(()=>{if(r.getState(n.state)){const o=n.state.selection.from;i.preventDefault(),n.dispatch(n.state.tr.insertText(i.data||"",o))}}),!0):!1,compositionstart:n=>(r.getState(n.state)&&(e=!0),!1),beforeinput:(n,i)=>{if(r.getState(n.state)&&i instanceof InputEvent&&i.data&&!e){const o=n.state.selection.from;return i.preventDefault(),n.dispatch(n.state.tr.insertText(i.data||"",o)),!0}return!1}},decorations(n){if(r.getState(n)){const o=n.selection.$from.pos,a=document.createElement("span"),l=jr.widget(o,a,{side:-1}),c=document.createElement("span"),h=jr.widget(o,c);return setTimeout(()=>{a.contentEditable="true",c.contentEditable="true"}),or.create(n.doc,[l,h])}return or.empty}}});return r});st(s$,{displayName:"Prose<inlineNodesCursorPlugin>",group:"Prose"});const o$=Gr(e=>new xr({key:new vr("MILKDOWN_HARDBREAK_MARKS"),appendTransaction:(t,r,n)=>{if(!t.length)return;const[i]=t;if(!i)return;const[s]=i.steps;if(i.getMeta("hardbreak")){if(!(s instanceof sn))return;const{from:l}=s;return n.tr.setNodeMarkup(l,zh.type(e),void 0,[])}if(s instanceof za){let l=n.tr;const{from:c,to:h}=s;return n.doc.nodesBetween(c,h,(u,f)=>{u.type===zh.type(e)&&(l=l.setNodeMarkup(f,zh.type(e),void 0,[]))}),l}}}));st(o$,{displayName:"Prose<hardbreakClearMarkPlugin>",group:"Prose"});const KS=er(["table","code_block"],"hardbreakFilterNodes");st(KS,{displayName:"Ctx<hardbreakFilterNodes>",group:"Prose"});const a$=Gr(e=>{const t=e.get(KS.key);return new xr({key:new vr("MILKDOWN_HARDBREAK_FILTER"),filterTransaction:(r,n)=>{const i=r.getMeta("hardbreak"),[s]=r.steps;if(i&&s){const{from:o}=s,a=n.doc.resolve(o);let l=a.depth,c=!0;for(;l>0;)t.includes(a.node(l).type.name)&&(c=!1),l--;return c}return!0}})});st(a$,{displayName:"Prose<hardbreakFilterPlugin>",group:"Prose"});const l$=Gr(e=>{const t=new vr("MILKDOWN_HEADING_ID"),r=n=>{if(n.composing)return;const i=e.get(o4.key),s=n.state.tr.setMeta("addToHistory",!1);let o=!1;const a={};n.state.doc.descendants((l,c)=>{if(l.type===Dn.type(e)){if(l.textContent.trim().length===0)return;const h=l.attrs;let u=i(l);a[u]?(a[u]+=1,u+=`-#${a[u]}`):a[u]=1,h.id!==u&&(o=!0,s.setMeta(t,!0).setNodeMarkup(c,void 0,{...h,id:u}))}}),o&&n.dispatch(s)};return new xr({key:t,view:n=>(r(n),{update:(i,s)=>{i.state.doc.eq(s.doc)||r(i)}})})});st(l$,{displayName:"Prose<syncHeadingIdPlugin>",group:"Prose"});const c$=Gr(e=>{const t=(r,n,i)=>{if(!i.selection||r.some(u=>u.getMeta("addToHistory")===!1||!u.isGeneric))return null;const s=Su.type(e),o=Cu.type(e),a=fo.type(e),l=(u,f)=>{let d=!1;const p=`${f+1}.`;return u.label!==p&&(u.label=p,d=!0),d};let c=i.tr,h=!1;return i.doc.descendants((u,f,d,p)=>{if(u.type===o){const m=u.maybeChild(0);(m==null?void 0:m.type)===a&&m.attrs.listType==="ordered"&&(h=!0,c.setNodeMarkup(f,s,{spread:"true"}),u.descendants((g,y,b,x)=>{if(g.type===a){const T={...g.attrs};l(T,x)&&(c=c.setNodeMarkup(y,void 0,T))}return!1}))}else if(u.type===a&&(d==null?void 0:d.type)===s){const m={...u.attrs};let g=!1;m.listType!=="ordered"&&(m.listType="ordered",g=!0),(d==null?void 0:d.maybeChild(0))&&(g=l(m,p)),g&&(c=c.setNodeMarkup(f,void 0,m),h=!0)}}),h?c.setMeta("addToHistory",!1):null};return new xr({key:new vr("MILKDOWN_KEEP_LIST_ORDER"),appendTransaction:t})});st(c$,{displayName:"Prose<syncListOrderPlugin>",group:"Prose"});const Bft=[o$,KS,a$,s$,VS,jS,WS,US,GS,s4,l$,c$].flat(),Rft=[Tft,_ft,Mft,Aft,Eft,Bft].flat();/**
* @vue/shared v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function YS(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const ur={},sm=[],Js=()=>{},h$=()=>!1,c4=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),XS=e=>e.startsWith("onUpdate:"),qn=Object.assign,JS=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Pft=Object.prototype.hasOwnProperty,Xe=(e,t)=>Pft.call(e,t),Ae=Array.isArray,om=e=>h4(e)==="[object Map]",Nft=e=>h4(e)==="[object Set]",_e=e=>typeof e=="function",ln=e=>typeof e=="string",Ud=e=>typeof e=="symbol",Br=e=>e!==null&&typeof e=="object",u$=e=>(Br(e)||_e(e))&&_e(e.then)&&_e(e.catch),Fft=Object.prototype.toString,h4=e=>Fft.call(e),$ft=e=>h4(e).slice(8,-1),zft=e=>h4(e)==="[object Object]",ZS=e=>ln(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,am=YS(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),u4=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Hft=/-\w/g,dc=u4(e=>e.replace(Hft,t=>t.slice(1).toUpperCase())),qft=/\B([A-Z])/g,Tu=u4(e=>e.replace(qft,"-$1").toLowerCase()),f$=u4(e=>e.charAt(0).toUpperCase()+e.slice(1)),v5=u4(e=>e?`on${f$(e)}`:""),ec=(e,t)=>!Object.is(e,t),w5=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},lx=(e,t,r,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:r})},Vft=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let DE;const Hh=()=>DE||(DE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function QS(e){if(Ae(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=ln(n)?Gft(n):QS(n);if(i)for(const s in i)t[s]=i[s]}return t}else if(ln(e)||Br(e))return e}const Wft=/;(?![^(]*\))/g,jft=/:([^]+)/,Uft=/\/\*[^]*?\*\//g;function Gft(e){const t={};return e.replace(Uft,"").split(Wft).forEach(r=>{if(r){const n=r.split(jft);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function t8(e){let t="";if(ln(e))t=e;else if(Ae(e))for(let r=0;r<e.length;r++){const n=t8(e[r]);n&&(t+=n+" ")}else if(Br(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const Kft="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Yft=YS(Kft);function d$(e){return!!e||e===""}/**
* @vue/reactivity v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vi;class Xft{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=vi,!t&&vi&&(this.index=(vi.scopes||(vi.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=vi;try{return vi=this,t()}finally{vi=r}}}on(){++this._on===1&&(this.prevScope=vi,vi=this)}off(){this._on>0&&--this._on===0&&(vi=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Jft(){return vi}let hr;const k5=new WeakSet;class p${constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,vi&&vi.active&&vi.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,k5.has(this)&&(k5.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||g$(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,IE(this),y$(this);const t=hr,r=Zs;hr=this,Zs=!0;try{return this.fn()}finally{b$(this),hr=t,Zs=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)n8(t);this.deps=this.depsTail=void 0,IE(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?k5.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){dC(this)&&this.run()}get dirty(){return dC(this)}}let m$=0,lm,cm;function g$(e,t=!1){if(e.flags|=8,t){e.next=cm,cm=e;return}e.next=lm,lm=e}function e8(){m$++}function r8(){if(--m$>0)return;if(cm){let t=cm;for(cm=void 0;t;){const r=t.next;t.next=void 0,t.flags&=-9,t=r}}let e;for(;lm;){let t=lm;for(lm=void 0;t;){const r=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=r}}if(e)throw e}function y$(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function b$(e){let t,r=e.depsTail,n=r;for(;n;){const i=n.prevDep;n.version===-1?(n===r&&(r=i),n8(n),Zft(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}e.deps=t,e.depsTail=r}function dC(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(x$(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function x$(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===eg)||(e.globalVersion=eg,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!dC(e))))return;e.flags|=2;const t=e.dep,r=hr,n=Zs;hr=e,Zs=!0;try{y$(e);const i=e.fn(e._value);(t.version===0||ec(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{hr=r,Zs=n,b$(e),e.flags&=-3}}function n8(e,t=!1){const{dep:r,prevSub:n,nextSub:i}=e;if(n&&(n.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=n,e.nextSub=void 0),r.subs===e&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let s=r.computed.deps;s;s=s.nextDep)n8(s,!0)}!t&&!--r.sc&&r.map&&r.map.delete(r.key)}function Zft(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}let Zs=!0;const v$=[];function rl(){v$.push(Zs),Zs=!1}function nl(){const e=v$.pop();Zs=e===void 0?!0:e}function IE(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=hr;hr=void 0;try{t()}finally{hr=r}}}let eg=0;class Qft{constructor(t,r){this.sub=t,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class i8{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!hr||!Zs||hr===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==hr)r=this.activeLink=new Qft(hr,this),hr.deps?(r.prevDep=hr.depsTail,hr.depsTail.nextDep=r,hr.depsTail=r):hr.deps=hr.depsTail=r,w$(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=hr.depsTail,r.nextDep=void 0,hr.depsTail.nextDep=r,hr.depsTail=r,hr.deps===r&&(hr.deps=n)}return r}trigger(t){this.version++,eg++,this.notify(t)}notify(t){e8();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{r8()}}}function w$(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)w$(n)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const pC=new WeakMap,qh=Symbol(""),mC=Symbol(""),rg=Symbol("");function In(e,t,r){if(Zs&&hr){let n=pC.get(e);n||pC.set(e,n=new Map);let i=n.get(r);i||(n.set(r,i=new i8),i.map=n,i.key=r),i.track()}}function Fa(e,t,r,n,i,s){const o=pC.get(e);if(!o){eg++;return}const a=l=>{l&&l.trigger()};if(e8(),t==="clear")o.forEach(a);else{const l=Ae(e),c=l&&ZS(r);if(l&&r==="length"){const h=Number(n);o.forEach((u,f)=>{(f==="length"||f===rg||!Ud(f)&&f>=h)&&a(u)})}else switch((r!==void 0||o.has(void 0))&&a(o.get(r)),c&&a(o.get(rg)),t){case"add":l?c&&a(o.get("length")):(a(o.get(qh)),om(e)&&a(o.get(mC)));break;case"delete":l||(a(o.get(qh)),om(e)&&a(o.get(mC)));break;case"set":om(e)&&a(o.get(qh));break}}r8()}function Pu(e){const t=Ye(e);return t===e?t:(In(t,"iterate",rg),Qs(e)?t:t.map(il))}function s8(e){return In(e=Ye(e),"iterate",rg),e}function Il(e,t){return pc(e)?gf(e)?ng(il(t)):ng(t):il(t)}const tdt={__proto__:null,[Symbol.iterator](){return C5(this,Symbol.iterator,e=>Il(this,e))},concat(...e){return Pu(this).concat(...e.map(t=>Ae(t)?Pu(t):t))},entries(){return C5(this,"entries",e=>(e[1]=Il(this,e[1]),e))},every(e,t){return pa(this,"every",e,t,void 0,arguments)},filter(e,t){return pa(this,"filter",e,t,r=>r.map(n=>Il(this,n)),arguments)},find(e,t){return pa(this,"find",e,t,r=>Il(this,r),arguments)},findIndex(e,t){return pa(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return pa(this,"findLast",e,t,r=>Il(this,r),arguments)},findLastIndex(e,t){return pa(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return pa(this,"forEach",e,t,void 0,arguments)},includes(...e){return S5(this,"includes",e)},indexOf(...e){return S5(this,"indexOf",e)},join(e){return Pu(this).join(e)},lastIndexOf(...e){return S5(this,"lastIndexOf",e)},map(e,t){return pa(this,"map",e,t,void 0,arguments)},pop(){return M0(this,"pop")},push(...e){return M0(this,"push",e)},reduce(e,...t){return BE(this,"reduce",e,t)},reduceRight(e,...t){return BE(this,"reduceRight",e,t)},shift(){return M0(this,"shift")},some(e,t){return pa(this,"some",e,t,void 0,arguments)},splice(...e){return M0(this,"splice",e)},toReversed(){return Pu(this).toReversed()},toSorted(e){return Pu(this).toSorted(e)},toSpliced(...e){return Pu(this).toSpliced(...e)},unshift(...e){return M0(this,"unshift",e)},values(){return C5(this,"values",e=>Il(this,e))}};function C5(e,t,r){const n=s8(e),i=n[t]();return n!==e&&!Qs(e)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.done||(s.value=r(s.value)),s}),i}const edt=Array.prototype;function pa(e,t,r,n,i,s){const o=s8(e),a=o!==e&&!Qs(e),l=o[t];if(l!==edt[t]){const u=l.apply(e,s);return a?il(u):u}let c=r;o!==e&&(a?c=function(u,f){return r.call(this,Il(e,u),f,e)}:r.length>2&&(c=function(u,f){return r.call(this,u,f,e)}));const h=l.call(o,c,n);return a&&i?i(h):h}function BE(e,t,r,n){const i=s8(e);let s=r;return i!==e&&(Qs(e)?r.length>3&&(s=function(o,a,l){return r.call(this,o,a,l,e)}):s=function(o,a,l){return r.call(this,o,Il(e,a),l,e)}),i[t](s,...n)}function S5(e,t,r){const n=Ye(e);In(n,"iterate",rg);const i=n[t](...r);return(i===-1||i===!1)&&c8(r[0])?(r[0]=Ye(r[0]),n[t](...r)):i}function M0(e,t,r=[]){rl(),e8();const n=Ye(e)[t].apply(e,r);return r8(),nl(),n}const rdt=YS("__proto__,__v_isRef,__isVue"),k$=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ud));function ndt(e){Ud(e)||(e=String(e));const t=Ye(this);return In(t,"has",e),t.hasOwnProperty(e)}class C${constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,n){if(r==="__v_skip")return t.__v_skip;const i=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!i;if(r==="__v_isReadonly")return i;if(r==="__v_isShallow")return s;if(r==="__v_raw")return n===(i?s?ddt:M$:s?_$:T$).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=Ae(t);if(!i){let l;if(o&&(l=tdt[r]))return l;if(r==="hasOwnProperty")return ndt}const a=Reflect.get(t,r,Fn(t)?t:n);if((Ud(r)?k$.has(r):rdt(r))||(i||In(t,"get",r),s))return a;if(Fn(a)){const l=o&&ZS(r)?a:a.value;return i&&Br(l)?yC(l):l}return Br(a)?i?yC(a):a8(a):a}}class S$ extends C${constructor(t=!1){super(!1,t)}set(t,r,n,i){let s=t[r];const o=Ae(t)&&ZS(r);if(!this._isShallow){const c=pc(s);if(!Qs(n)&&!pc(n)&&(s=Ye(s),n=Ye(n)),!o&&Fn(s)&&!Fn(n))return c||(s.value=n),!0}const a=o?Number(r)<t.length:Xe(t,r),l=Reflect.set(t,r,n,Fn(t)?t:i);return t===Ye(i)&&(a?ec(n,s)&&Fa(t,"set",r,n):Fa(t,"add",r,n)),l}deleteProperty(t,r){const n=Xe(t,r);t[r];const i=Reflect.deleteProperty(t,r);return i&&n&&Fa(t,"delete",r,void 0),i}has(t,r){const n=Reflect.has(t,r);return(!Ud(r)||!k$.has(r))&&In(t,"has",r),n}ownKeys(t){return In(t,"iterate",Ae(t)?"length":qh),Reflect.ownKeys(t)}}class idt extends C${constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const sdt=new S$,odt=new idt,adt=new S$(!0);const gC=e=>e,Sy=e=>Reflect.getPrototypeOf(e);function ldt(e,t,r){return function(...n){const i=this.__v_raw,s=Ye(i),o=om(s),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=i[e](...n),h=r?gC:t?ng:il;return!t&&In(s,"iterate",l?mC:qh),{next(){const{value:u,done:f}=c.next();return f?{value:u,done:f}:{value:a?[h(u[0]),h(u[1])]:h(u),done:f}},[Symbol.iterator](){return this}}}}function Ty(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function cdt(e,t){const r={get(i){const s=this.__v_raw,o=Ye(s),a=Ye(i);e||(ec(i,a)&&In(o,"get",i),In(o,"get",a));const{has:l}=Sy(o),c=t?gC:e?ng:il;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!e&&In(Ye(i),"iterate",qh),i.size},has(i){const s=this.__v_raw,o=Ye(s),a=Ye(i);return e||(ec(i,a)&&In(o,"has",i),In(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=Ye(a),c=t?gC:e?ng:il;return!e&&In(l,"iterate",qh),a.forEach((h,u)=>i.call(s,c(h),c(u),o))}};return qn(r,e?{add:Ty("add"),set:Ty("set"),delete:Ty("delete"),clear:Ty("clear")}:{add(i){!t&&!Qs(i)&&!pc(i)&&(i=Ye(i));const s=Ye(this);return Sy(s).has.call(s,i)||(s.add(i),Fa(s,"add",i,i)),this},set(i,s){!t&&!Qs(s)&&!pc(s)&&(s=Ye(s));const o=Ye(this),{has:a,get:l}=Sy(o);let c=a.call(o,i);c||(i=Ye(i),c=a.call(o,i));const h=l.call(o,i);return o.set(i,s),c?ec(s,h)&&Fa(o,"set",i,s):Fa(o,"add",i,s),this},delete(i){const s=Ye(this),{has:o,get:a}=Sy(s);let l=o.call(s,i);l||(i=Ye(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&Fa(s,"delete",i,void 0),c},clear(){const i=Ye(this),s=i.size!==0,o=i.clear();return s&&Fa(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{r[i]=ldt(i,e,t)}),r}function o8(e,t){const r=cdt(e,t);return(n,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(Xe(r,i)&&i in n?r:n,i,s)}const hdt={get:o8(!1,!1)},udt={get:o8(!1,!0)},fdt={get:o8(!0,!1)};const T$=new WeakMap,_$=new WeakMap,M$=new WeakMap,ddt=new WeakMap;function pdt(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mdt(e){return e.__v_skip||!Object.isExtensible(e)?0:pdt($ft(e))}function a8(e){return pc(e)?e:l8(e,!1,sdt,hdt,T$)}function gdt(e){return l8(e,!1,adt,udt,_$)}function yC(e){return l8(e,!0,odt,fdt,M$)}function l8(e,t,r,n,i){if(!Br(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=mdt(e);if(s===0)return e;const o=i.get(e);if(o)return o;const a=new Proxy(e,s===2?n:r);return i.set(e,a),a}function gf(e){return pc(e)?gf(e.__v_raw):!!(e&&e.__v_isReactive)}function pc(e){return!!(e&&e.__v_isReadonly)}function Qs(e){return!!(e&&e.__v_isShallow)}function c8(e){return e?!!e.__v_raw:!1}function Ye(e){const t=e&&e.__v_raw;return t?Ye(t):e}function ydt(e){return!Xe(e,"__v_skip")&&Object.isExtensible(e)&&lx(e,"__v_skip",!0),e}const il=e=>Br(e)?a8(e):e,ng=e=>Br(e)?yC(e):e;function Fn(e){return e?e.__v_isRef===!0:!1}function zt(e){return A$(e,!1)}function cx(e){return A$(e,!0)}function A$(e,t){return Fn(e)?e:new bdt(e,t)}class bdt{constructor(t,r){this.dep=new i8,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:Ye(t),this._value=r?t:il(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,n=this.__v_isShallow||Qs(t)||pc(t);t=n?t:Ye(t),ec(t,r)&&(this._rawValue=t,this._value=n?t:il(t),this.dep.trigger())}}function xdt(e){return Fn(e)?e.value:e}const vdt={get:(e,t,r)=>t==="__v_raw"?e:xdt(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return Fn(i)&&!Fn(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function E$(e){return gf(e)?e:new Proxy(e,vdt)}class wdt{constructor(t,r,n){this.fn=t,this.setter=r,this._value=void 0,this.dep=new i8(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=eg-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&hr!==this)return g$(this,!0),!0}get value(){const t=this.dep.track();return x$(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function kdt(e,t,r=!1){let n,i;return _e(e)?n=e:(n=e.get,i=e.set),new wdt(n,i,r)}const _y={},hx=new WeakMap;let Zc;function Cdt(e,t=!1,r=Zc){if(r){let n=hx.get(r);n||hx.set(r,n=[]),n.push(e)}}function Sdt(e,t,r=ur){const{immediate:n,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=r,c=T=>i?T:Qs(T)||i===!1||i===0?zl(T,1):zl(T);let h,u,f,d,p=!1,m=!1;if(Fn(e)?(u=()=>e.value,p=Qs(e)):gf(e)?(u=()=>c(e),p=!0):Ae(e)?(m=!0,p=e.some(T=>gf(T)||Qs(T)),u=()=>e.map(T=>{if(Fn(T))return T.value;if(gf(T))return c(T);if(_e(T))return l?l(T,2):T()})):_e(e)?t?u=l?()=>l(e,2):e:u=()=>{if(f){rl();try{f()}finally{nl()}}const T=Zc;Zc=h;try{return l?l(e,3,[d]):e(d)}finally{Zc=T}}:u=Js,t&&i){const T=u,S=i===!0?1/0:i;u=()=>zl(T(),S)}const g=Jft(),y=()=>{h.stop(),g&&g.active&&JS(g.effects,h)};if(s&&t){const T=t;t=(...S)=>{T(...S),y()}}let b=m?new Array(e.length).fill(_y):_y;const x=T=>{if(!(!(h.flags&1)||!h.dirty&&!T))if(t){const S=h.run();if(i||p||(m?S.some((w,_)=>ec(w,b[_])):ec(S,b))){f&&f();const w=Zc;Zc=h;try{const _=[S,b===_y?void 0:m&&b[0]===_y?[]:b,d];b=S,l?l(t,3,_):t(..._)}finally{Zc=w}}}else h.run()};return a&&a(x),h=new p$(u),h.scheduler=o?()=>o(x,!1):x,d=T=>Cdt(T,!1,h),f=h.onStop=()=>{const T=hx.get(h);if(T){if(l)l(T,4);else for(const S of T)S();hx.delete(h)}},t?n?x(!0):b=h.run():o?o(x.bind(null,!0),!0):h.run(),y.pause=h.pause.bind(h),y.resume=h.resume.bind(h),y.stop=y,y}function zl(e,t=1/0,r){if(t<=0||!Br(e)||e.__v_skip||(r=r||new Map,(r.get(e)||0)>=t))return e;if(r.set(e,t),t--,Fn(e))zl(e.value,t,r);else if(Ae(e))for(let n=0;n<e.length;n++)zl(e[n],t,r);else if(Nft(e)||om(e))e.forEach(n=>{zl(n,t,r)});else if(zft(e)){for(const n in e)zl(e[n],t,r);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&zl(e[n],t,r)}return e}/**
* @vue/runtime-core v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function g1(e,t,r,n){try{return n?e(...n):e()}catch(i){f4(i,t,r)}}function Qo(e,t,r,n){if(_e(e)){const i=g1(e,t,r,n);return i&&u$(i)&&i.catch(s=>{f4(s,t,r)}),i}if(Ae(e)){const i=[];for(let s=0;s<e.length;s++)i.push(Qo(e[s],t,r,n));return i}}function f4(e,t,r,n=!0){const i=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||ur;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;a;){const h=a.ec;if(h){for(let u=0;u<h.length;u++)if(h[u](e,l,c)===!1)return}a=a.parent}if(s){rl(),g1(s,null,10,[e,l,c]),nl();return}}Tdt(e,r,i,n,o)}function Tdt(e,t,r,n=!0,i=!1){if(i)throw e;console.error(e)}const Zn=[];let Lo=-1;const yf=[];let Bl=null,Uu=0;const L$=Promise.resolve();let ux=null;function _dt(e){const t=ux||L$;return e?t.then(this?e.bind(this):e):t}function Mdt(e){let t=Lo+1,r=Zn.length;for(;t<r;){const n=t+r>>>1,i=Zn[n],s=ig(i);s<e||s===e&&i.flags&2?t=n+1:r=n}return t}function h8(e){if(!(e.flags&1)){const t=ig(e),r=Zn[Zn.length-1];!r||!(e.flags&2)&&t>=ig(r)?Zn.push(e):Zn.splice(Mdt(t),0,e),e.flags|=1,O$()}}function O$(){ux||(ux=L$.then(I$))}function Adt(e){Ae(e)?yf.push(...e):Bl&&e.id===-1?Bl.splice(Uu+1,0,e):e.flags&1||(yf.push(e),e.flags|=1),O$()}function RE(e,t,r=Lo+1){for(;r<Zn.length;r++){const n=Zn[r];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;Zn.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function D$(e){if(yf.length){const t=[...new Set(yf)].sort((r,n)=>ig(r)-ig(n));if(yf.length=0,Bl){Bl.push(...t);return}for(Bl=t,Uu=0;Uu<Bl.length;Uu++){const r=Bl[Uu];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Bl=null,Uu=0}}const ig=e=>e.id==null?e.flags&2?-1:1/0:e.id;function I$(e){try{for(Lo=0;Lo<Zn.length;Lo++){const t=Zn[Lo];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),g1(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Lo<Zn.length;Lo++){const t=Zn[Lo];t&&(t.flags&=-2)}Lo=-1,Zn.length=0,D$(),ux=null,(Zn.length||yf.length)&&I$()}}let No,lp=[],bC=!1;function d4(e,...t){No?No.emit(e,...t):bC||lp.push({event:e,args:t})}function B$(e,t){var r,n;No=e,No?(No.enabled=!0,lp.forEach(({event:i,args:s})=>No.emit(i,...s)),lp=[]):typeof window<"u"&&window.HTMLElement&&!((n=(r=window.navigator)==null?void 0:r.userAgent)!=null&&n.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{B$(s,t)}),setTimeout(()=>{No||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,bC=!0,lp=[])},3e3)):(bC=!0,lp=[])}function Edt(e,t){d4("app:init",e,t,{Fragment:xn,Text:x1,Comment:lu,Static:q2})}function Ldt(e){d4("app:unmount",e)}const Odt=u8("component:added"),R$=u8("component:updated"),Ddt=u8("component:removed"),Idt=e=>{No&&typeof No.cleanupBuffer=="function"&&!No.cleanupBuffer(e)&&Ddt(e)};function u8(e){return t=>{d4(e,t.appContext.app,t.uid,t.parent?t.parent.uid:void 0,t)}}function Bdt(e,t,r){d4("component:emit",e.appContext.app,e,t,r)}let Ho=null,P$=null;function fx(e){const t=Ho;return Ho=e,P$=e&&e.type.__scopeId||null,t}function Rdt(e,t=Ho,r){if(!t||e._n)return e;const n=(...i)=>{n._d;const s=fx(t);let o;try{o=e(...i)}finally{fx(s),n._d}return __VUE_PROD_DEVTOOLS__&&R$(t),o};return n._n=!0,n._c=!0,n._d=!0,n}function $c(e,t,r,n){const i=e.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[n];l&&(rl(),Qo(l,r,8,[e.el,a,e,t]),nl())}}const Pdt=Symbol("_vte"),Ndt=e=>e.__isTeleport,Fdt=Symbol("_leaveCb");function f8(e,t){e.shapeFlag&6&&e.component?(e.transition=t,f8(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Sn(e,t){return _e(e)?qn({name:e.name},t,{setup:e}):e}function N$(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const dx=new WeakMap;function hm(e,t,r,n,i=!1){if(Ae(e)){e.forEach((p,m)=>hm(p,t&&(Ae(t)?t[m]:t),r,n,i));return}if(um(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&hm(e,t,r,n.component.subTree);return}const s=n.shapeFlag&4?y8(n.component):n.el,o=i?null:s,{i:a,r:l}=e,c=t&&t.r,h=a.refs===ur?a.refs={}:a.refs,u=a.setupState,f=Ye(u),d=u===ur?h$:p=>Xe(f,p);if(c!=null&&c!==l){if(PE(t),ln(c))h[c]=null,d(c)&&(u[c]=null);else if(Fn(c)){c.value=null;const p=t;p.k&&(h[p.k]=null)}}if(_e(l))g1(l,a,12,[o,h]);else{const p=ln(l),m=Fn(l);if(p||m){const g=()=>{if(e.f){const y=p?d(l)?u[l]:h[l]:l.value;if(i)Ae(y)&&JS(y,s);else if(Ae(y))y.includes(s)||y.push(s);else if(p)h[l]=[s],d(l)&&(u[l]=h[l]);else{const b=[s];l.value=b,e.k&&(h[e.k]=b)}}else p?(h[l]=o,d(l)&&(u[l]=o)):m&&(l.value=o,e.k&&(h[e.k]=o))};if(o){const y=()=>{g(),dx.delete(e)};y.id=-1,dx.set(e,y),ji(y,r)}else PE(e),g()}}}function PE(e){const t=dx.get(e);t&&(t.flags|=8,dx.delete(e))}Hh().requestIdleCallback;Hh().cancelIdleCallback;const um=e=>!!e.type.__asyncLoader,F$=e=>e.type.__isKeepAlive;function $dt(e,t){$$(e,"a",t)}function zdt(e,t){$$(e,"da",t)}function $$(e,t,r=ti){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(p4(t,n,r),r){let i=r.parent;for(;i&&i.parent;)F$(i.parent.vnode)&&Hdt(n,t,r,i),i=i.parent}}function Hdt(e,t,r,n){const i=p4(t,e,n,!0);b1(()=>{JS(n[t],i)},r)}function p4(e,t,r=ti,n=!1){if(r){const i=r[e]||(r[e]=[]),s=t.__weh||(t.__weh=(...o)=>{rl();const a=v1(r),l=Qo(t,r,e,o);return a(),nl(),l});return n?i.unshift(s):i.push(s),s}}const gl=e=>(t,r=ti)=>{(!sg||e==="sp")&&p4(e,(...n)=>t(...n),r)},qdt=gl("bm"),y1=gl("m"),Vdt=gl("bu"),Wdt=gl("u"),jdt=gl("bum"),b1=gl("um"),Udt=gl("sp"),Gdt=gl("rtg"),Kdt=gl("rtc");function Ydt(e,t=ti){p4("ec",e,t)}const Xdt=Symbol.for("v-ndc"),xC=e=>e?nz(e)?y8(e):xC(e.parent):null,fm=qn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>xC(e.parent),$root:e=>xC(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>__VUE_OPTIONS_API__?H$(e):e.type,$forceUpdate:e=>e.f||(e.f=()=>{h8(e.update)}),$nextTick:e=>e.n||(e.n=_dt.bind(e.proxy)),$watch:e=>__VUE_OPTIONS_API__?l0t.bind(e):Js}),T5=(e,t)=>e!==ur&&!e.__isScriptSetup&&Xe(e,t),Jdt={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:n,data:i,props:s,accessCache:o,type:a,appContext:l}=e;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return s[t]}else{if(T5(n,t))return o[t]=1,n[t];if(__VUE_OPTIONS_API__&&i!==ur&&Xe(i,t))return o[t]=2,i[t];if(Xe(s,t))return o[t]=3,s[t];if(r!==ur&&Xe(r,t))return o[t]=4,r[t];(!__VUE_OPTIONS_API__||vC)&&(o[t]=0)}}const c=fm[t];let h,u;if(c)return t==="$attrs"&&In(e.attrs,"get",""),c(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(r!==ur&&Xe(r,t))return o[t]=4,r[t];if(u=l.config.globalProperties,Xe(u,t))return u[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:s}=e;return T5(i,t)?(i[t]=r,!0):__VUE_OPTIONS_API__&&n!==ur&&Xe(n,t)?(n[t]=r,!0):Xe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,props:s,type:o}},a){let l;return!!(r[a]||__VUE_OPTIONS_API__&&e!==ur&&a[0]!=="$"&&Xe(e,a)||T5(t,a)||Xe(s,a)||Xe(n,a)||Xe(fm,a)||Xe(i.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:Xe(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function NE(e){return Ae(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let vC=!0;function Zdt(e){const t=H$(e),r=e.proxy,n=e.ctx;vC=!1,t.beforeCreate&&FE(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:u,mounted:f,beforeUpdate:d,updated:p,activated:m,deactivated:g,beforeDestroy:y,beforeUnmount:b,destroyed:x,unmounted:T,render:S,renderTracked:w,renderTriggered:_,errorCaptured:I,serverPrefetch:N,expose:L,inheritAttrs:D,components:P,directives:K,filters:z}=t;if(c&&Qdt(c,n,null),o)for(const U in o){const q=o[U];_e(q)&&(n[U]=q.bind(r))}if(i){const U=i.call(r,r);Br(U)&&(e.data=a8(U))}if(vC=!0,s)for(const U in s){const q=s[U],rt=_e(q)?q.bind(r,r):_e(q.get)?q.get.bind(r,r):Js,E=!_e(q)&&_e(q.set)?q.set.bind(r):Js,dt=wd({get:rt,set:E});Object.defineProperty(n,U,{enumerable:!0,configurable:!0,get:()=>dt.value,set:Tt=>dt.value=Tt})}if(a)for(const U in a)z$(a[U],n,r,U);if(l){const U=_e(l)?l.call(r):l;Reflect.ownKeys(U).forEach(q=>{s0t(q,U[q])})}h&&FE(h,e,"c");function H(U,q){Ae(q)?q.forEach(rt=>U(rt.bind(r))):q&&U(q.bind(r))}if(H(qdt,u),H(y1,f),H(Vdt,d),H(Wdt,p),H($dt,m),H(zdt,g),H(Ydt,I),H(Kdt,w),H(Gdt,_),H(jdt,b),H(b1,T),H(Udt,N),Ae(L))if(L.length){const U=e.exposed||(e.exposed={});L.forEach(q=>{Object.defineProperty(U,q,{get:()=>r[q],set:rt=>r[q]=rt,enumerable:!0})})}else e.exposed||(e.exposed={});S&&e.render===Js&&(e.render=S),D!=null&&(e.inheritAttrs=D),P&&(e.components=P),K&&(e.directives=K),N&&N$(e)}function Qdt(e,t,r=Js){Ae(e)&&(e=wC(e));for(const n in e){const i=e[n];let s;Br(i)?"default"in i?s=H2(i.from||n,i.default,!0):s=H2(i.from||n):s=H2(i),Fn(s)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[n]=s}}function FE(e,t,r){Qo(Ae(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function z$(e,t,r,n){let i=n.includes(".")?V$(r,n):()=>r[n];if(ln(e)){const s=t[e];_e(s)&&Vh(i,s)}else if(_e(e))Vh(i,e.bind(r));else if(Br(e))if(Ae(e))e.forEach(s=>z$(s,t,r,n));else{const s=_e(e.handler)?e.handler.bind(r):t[e.handler];_e(s)&&Vh(i,s,e)}}function H$(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let l;return a?l=a:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(c=>px(l,c,o,!0)),px(l,t,o)),Br(t)&&s.set(t,l),l}function px(e,t,r,n=!1){const{mixins:i,extends:s}=t;s&&px(e,s,r,!0),i&&i.forEach(o=>px(e,o,r,!0));for(const o in t)if(!(n&&o==="expose")){const a=t0t[o]||r&&r[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const t0t={data:$E,props:zE,emits:zE,methods:cp,computed:cp,beforeCreate:Xn,created:Xn,beforeMount:Xn,mounted:Xn,beforeUpdate:Xn,updated:Xn,beforeDestroy:Xn,beforeUnmount:Xn,destroyed:Xn,unmounted:Xn,activated:Xn,deactivated:Xn,errorCaptured:Xn,serverPrefetch:Xn,components:cp,directives:cp,watch:r0t,provide:$E,inject:e0t};function $E(e,t){return t?e?function(){return qn(_e(e)?e.call(this,this):e,_e(t)?t.call(this,this):t)}:t:e}function e0t(e,t){return cp(wC(e),wC(t))}function wC(e){if(Ae(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Xn(e,t){return e?[...new Set([].concat(e,t))]:t}function cp(e,t){return e?qn(Object.create(null),e,t):t}function zE(e,t){return e?Ae(e)&&Ae(t)?[...new Set([...e,...t])]:qn(Object.create(null),NE(e),NE(t??{})):t}function r0t(e,t){if(!e)return t;if(!t)return e;const r=qn(Object.create(null),e);for(const n in t)r[n]=Xn(e[n],t[n]);return r}function q$(){return{app:null,config:{isNativeTag:h$,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let n0t=0;function i0t(e,t){return function(n,i=null){_e(n)||(n=qn({},n)),i!=null&&!Br(i)&&(i=null);const s=q$(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:n0t++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:GE,get config(){return s.config},set config(h){},use(h,...u){return o.has(h)||(h&&_e(h.install)?(o.add(h),h.install(c,...u)):_e(h)&&(o.add(h),h(c,...u))),c},mixin(h){return __VUE_OPTIONS_API__&&(s.mixins.includes(h)||s.mixins.push(h)),c},component(h,u){return u?(s.components[h]=u,c):s.components[h]},directive(h,u){return u?(s.directives[h]=u,c):s.directives[h]},mount(h,u,f){if(!l){const d=c._ceVNode||Ks(n,i);return d.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),e(d,h,f),l=!0,c._container=h,h.__vue_app__=c,__VUE_PROD_DEVTOOLS__&&(c._instance=d.component,Edt(c,GE)),y8(d.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Qo(a,c._instance,16),e(null,c._container),__VUE_PROD_DEVTOOLS__&&(c._instance=null,Ldt(c)),delete c._container.__vue_app__)},provide(h,u){return s.provides[h]=u,c},runWithContext(h){const u=bf;bf=c;try{return h()}finally{bf=u}}};return c}}let bf=null;function s0t(e,t){if(ti){let r=ti.provides;const n=ti.parent&&ti.parent.provides;n===r&&(r=ti.provides=Object.create(n)),r[e]=t}}function H2(e,t,r=!1){const n=P0t();if(n||bf){let i=bf?bf._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return r&&_e(t)?t.call(n&&n.proxy):t}}const o0t=Symbol.for("v-scx"),a0t=()=>H2(o0t);function Gd(e,t){return d8(e,null,t)}function Vh(e,t,r){return d8(e,t,r)}function d8(e,t,r=ur){const{immediate:n,deep:i,flush:s,once:o}=r,a=qn({},r),l=t&&n||!t&&s!=="post";let c;if(sg){if(s==="sync"){const d=a0t();c=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=Js,d.resume=Js,d.pause=Js,d}}const h=ti;a.call=(d,p,m)=>Qo(d,h,p,m);let u=!1;s==="post"?a.scheduler=d=>{ji(d,h&&h.suspense)}:s!=="sync"&&(u=!0,a.scheduler=(d,p)=>{p?d():h8(d)}),a.augmentJob=d=>{t&&(d.flags|=4),u&&(d.flags|=2,h&&(d.id=h.uid,d.i=h))};const f=Sdt(e,t,a);return sg&&(c?c.push(f):l&&f()),f}function l0t(e,t,r){const n=this.proxy,i=ln(e)?e.includes(".")?V$(n,e):()=>n[e]:e.bind(n,n);let s;_e(t)?s=t:(s=t.handler,r=t);const o=v1(this),a=d8(i,s.bind(n),r);return o(),a}function V$(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}const c0t=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${dc(t)}Modifiers`]||e[`${Tu(t)}Modifiers`];function h0t(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||ur;let i=r;const s=t.startsWith("update:"),o=s&&c0t(n,t.slice(7));o&&(o.trim&&(i=r.map(h=>ln(h)?h.trim():h)),o.number&&(i=r.map(Vft))),__VUE_PROD_DEVTOOLS__&&Bdt(e,t,i);let a,l=n[a=v5(t)]||n[a=v5(dc(t))];!l&&s&&(l=n[a=v5(Tu(t))]),l&&Qo(l,e,6,i);const c=n[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Qo(c,e,6,i)}}const u0t=new WeakMap;function W$(e,t,r=!1){const n=__VUE_OPTIONS_API__&&r?u0t:t.emitsCache,i=n.get(e);if(i!==void 0)return i;const s=e.emits;let o={},a=!1;if(__VUE_OPTIONS_API__&&!_e(e)){const l=c=>{const h=W$(c,t,!0);h&&(a=!0,qn(o,h))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(Br(e)&&n.set(e,null),null):(Ae(s)?s.forEach(l=>o[l]=null):qn(o,s),Br(e)&&n.set(e,o),o)}function m4(e,t){return!e||!c4(t)?!1:(t=t.slice(2).replace(/Once$/,""),Xe(e,t[0].toLowerCase()+t.slice(1))||Xe(e,Tu(t))||Xe(e,t))}function HE(e){const{type:t,vnode:r,proxy:n,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:u,data:f,setupState:d,ctx:p,inheritAttrs:m}=e,g=fx(e);let y,b;try{if(r.shapeFlag&4){const T=i||n,S=T;y=Io(c.call(S,T,h,u,d,f,p)),b=a}else{const T=t;y=Io(T.length>1?T(u,{attrs:a,slots:o,emit:l}):T(u,null)),b=t.props?a:f0t(a)}}catch(T){f4(T,e,1),y=Ks(lu)}let x=y;if(b&&m!==!1){const T=Object.keys(b),{shapeFlag:S}=x;T.length&&S&7&&(s&&T.some(XS)&&(b=d0t(b,s)),x=vd(x,b,!1,!0))}return r.dirs&&(x=vd(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(r.dirs):r.dirs),r.transition&&f8(x,r.transition),y=x,fx(g),y}const f0t=e=>{let t;for(const r in e)(r==="class"||r==="style"||c4(r))&&((t||(t={}))[r]=e[r]);return t},d0t=(e,t)=>{const r={};for(const n in e)(!XS(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function p0t(e,t,r){const{props:n,children:i,component:s}=e,{props:o,children:a,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?qE(n,o,c):!!o;if(l&8){const h=t.dynamicProps;for(let u=0;u<h.length;u++){const f=h[u];if(o[f]!==n[f]&&!m4(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?qE(n,o,c):!0:!!o;return!1}function qE(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(t[s]!==e[s]&&!m4(r,s))return!0}return!1}function m0t({vnode:e,parent:t},r){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=r,t=t.parent;else break}}const j$={},U$=()=>Object.create(j$),G$=e=>Object.getPrototypeOf(e)===j$;function g0t(e,t,r,n=!1){const i={},s=U$();e.propsDefaults=Object.create(null),K$(e,t,i,s);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);r?e.props=n?i:gdt(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function y0t(e,t,r,n){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,a=Ye(i),[l]=e.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let u=0;u<h.length;u++){let f=h[u];if(m4(e.emitsOptions,f))continue;const d=t[f];if(l)if(Xe(s,f))d!==s[f]&&(s[f]=d,c=!0);else{const p=dc(f);i[p]=kC(l,a,p,d,e,!1)}else d!==s[f]&&(s[f]=d,c=!0)}}}else{K$(e,t,i,s)&&(c=!0);let h;for(const u in a)(!t||!Xe(t,u)&&((h=Tu(u))===u||!Xe(t,h)))&&(l?r&&(r[u]!==void 0||r[h]!==void 0)&&(i[u]=kC(l,a,u,void 0,e,!0)):delete i[u]);if(s!==a)for(const u in s)(!t||!Xe(t,u))&&(delete s[u],c=!0)}c&&Fa(e.attrs,"set","")}function K$(e,t,r,n){const[i,s]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(am(l))continue;const c=t[l];let h;i&&Xe(i,h=dc(l))?!s||!s.includes(h)?r[h]=c:(a||(a={}))[h]=c:m4(e.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(s){const l=Ye(r),c=a||ur;for(let h=0;h<s.length;h++){const u=s[h];r[u]=kC(i,l,u,c[u],e,!Xe(c,u))}}return o}function kC(e,t,r,n,i,s){const o=e[r];if(o!=null){const a=Xe(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&_e(l)){const{propsDefaults:c}=i;if(r in c)n=c[r];else{const h=v1(i);n=c[r]=l.call(null,t),h()}}else n=l;i.ce&&i.ce._setProp(r,n)}o[0]&&(s&&!a?n=!1:o[1]&&(n===""||n===Tu(r))&&(n=!0))}return n}const b0t=new WeakMap;function Y$(e,t,r=!1){const n=__VUE_OPTIONS_API__&&r?b0t:t.propsCache,i=n.get(e);if(i)return i;const s=e.props,o={},a=[];let l=!1;if(__VUE_OPTIONS_API__&&!_e(e)){const h=u=>{l=!0;const[f,d]=Y$(u,t,!0);qn(o,f),d&&a.push(...d)};!r&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!s&&!l)return Br(e)&&n.set(e,sm),sm;if(Ae(s))for(let h=0;h<s.length;h++){const u=dc(s[h]);VE(u)&&(o[u]=ur)}else if(s)for(const h in s){const u=dc(h);if(VE(u)){const f=s[h],d=o[u]=Ae(f)||_e(f)?{type:f}:qn({},f),p=d.type;let m=!1,g=!0;if(Ae(p))for(let y=0;y<p.length;++y){const b=p[y],x=_e(b)&&b.name;if(x==="Boolean"){m=!0;break}else x==="String"&&(g=!1)}else m=_e(p)&&p.name==="Boolean";d[0]=m,d[1]=g,(m||Xe(d,"default"))&&a.push(u)}}const c=[o,a];return Br(e)&&n.set(e,c),c}function VE(e){return e[0]!=="$"&&!am(e)}const p8=e=>e==="_"||e==="_ctx"||e==="$stable",m8=e=>Ae(e)?e.map(Io):[Io(e)],x0t=(e,t,r)=>{if(t._n)return t;const n=Rdt((...i)=>m8(t(...i)),r);return n._c=!1,n},X$=(e,t,r)=>{const n=e._ctx;for(const i in e){if(p8(i))continue;const s=e[i];if(_e(s))t[i]=x0t(i,s,n);else if(s!=null){const o=m8(s);t[i]=()=>o}}},J$=(e,t)=>{const r=m8(t);e.slots.default=()=>r},Z$=(e,t,r)=>{for(const n in t)(r||!p8(n))&&(e[n]=t[n])},v0t=(e,t,r)=>{const n=e.slots=U$();if(e.vnode.shapeFlag&32){const i=t._;i?(Z$(n,t,r),r&&lx(n,"_",i,!0)):X$(t,n)}else t&&J$(e,t)},w0t=(e,t,r)=>{const{vnode:n,slots:i}=e;let s=!0,o=ur;if(n.shapeFlag&32){const a=t._;a?r&&a===1?s=!1:Z$(i,t,r):(s=!t.$stable,X$(t,i)),o=t}else t&&(J$(e,t),o={default:1});if(s)for(const a in i)!p8(a)&&o[a]==null&&delete i[a]};function k0t(){typeof __VUE_OPTIONS_API__!="boolean"&&(Hh().__VUE_OPTIONS_API__=!0),typeof __VUE_PROD_DEVTOOLS__!="boolean"&&(Hh().__VUE_PROD_DEVTOOLS__=!1),typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__!="boolean"&&(Hh().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const ji=M0t;function C0t(e){return S0t(e)}function S0t(e,t){k0t();const r=Hh();r.__VUE__=!0,__VUE_PROD_DEVTOOLS__&&B$(r.__VUE_DEVTOOLS_GLOBAL_HOOK__,r);const{insert:n,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:u,nextSibling:f,setScopeId:d=Js,insertStaticContent:p}=e,m=(R,W,tt,ut=null,lt=null,ct=null,St=void 0,bt=null,xt=!!W.dynamicChildren)=>{if(R===W)return;R&&!A0(R,W)&&(ut=Xt(R),Tt(R,lt,ct,!0),R=null),W.patchFlag===-2&&(xt=!1,W.dynamicChildren=null);const{type:pt,ref:Zt,shapeFlag:Ot}=W;switch(pt){case x1:g(R,W,tt,ut);break;case lu:y(R,W,tt,ut);break;case q2:R==null&&b(W,tt,ut,St);break;case xn:P(R,W,tt,ut,lt,ct,St,bt,xt);break;default:Ot&1?S(R,W,tt,ut,lt,ct,St,bt,xt):Ot&6?K(R,W,tt,ut,lt,ct,St,bt,xt):(Ot&64||Ot&128)&&pt.process(R,W,tt,ut,lt,ct,St,bt,xt,xe)}Zt!=null&&lt?hm(Zt,R&&R.ref,ct,W||R,!W):Zt==null&&R&&R.ref!=null&&hm(R.ref,null,ct,R,!0)},g=(R,W,tt,ut)=>{if(R==null)n(W.el=a(W.children),tt,ut);else{const lt=W.el=R.el;W.children!==R.children&&c(lt,W.children)}},y=(R,W,tt,ut)=>{R==null?n(W.el=l(W.children||""),tt,ut):W.el=R.el},b=(R,W,tt,ut)=>{[R.el,R.anchor]=p(R.children,W,tt,ut,R.el,R.anchor)},x=({el:R,anchor:W},tt,ut)=>{let lt;for(;R&&R!==W;)lt=f(R),n(R,tt,ut),R=lt;n(W,tt,ut)},T=({el:R,anchor:W})=>{let tt;for(;R&&R!==W;)tt=f(R),i(R),R=tt;i(W)},S=(R,W,tt,ut,lt,ct,St,bt,xt)=>{if(W.type==="svg"?St="svg":W.type==="math"&&(St="mathml"),R==null)w(W,tt,ut,lt,ct,St,bt,xt);else{const pt=R.el&&R.el._isVueCE?R.el:null;try{pt&&pt._beginPatch(),N(R,W,lt,ct,St,bt,xt)}finally{pt&&pt._endPatch()}}},w=(R,W,tt,ut,lt,ct,St,bt)=>{let xt,pt;const{props:Zt,shapeFlag:Ot,transition:Yt,dirs:re}=R;if(xt=R.el=o(R.type,ct,Zt&&Zt.is,Zt),Ot&8?h(xt,R.children):Ot&16&&I(R.children,xt,null,ut,lt,_5(R,ct),St,bt),re&&$c(R,null,ut,"created"),_(xt,R,R.scopeId,St,ut),Zt){for(const at in Zt)at!=="value"&&!am(at)&&s(xt,at,null,Zt[at],ct,ut);"value"in Zt&&s(xt,"value",null,Zt.value,ct),(pt=Zt.onVnodeBeforeMount)&&ko(pt,ut,R)}__VUE_PROD_DEVTOOLS__&&(lx(xt,"__vnode",R,!0),lx(xt,"__vueParentComponent",ut,!0)),re&&$c(R,null,ut,"beforeMount");const J=T0t(lt,Yt);J&&Yt.beforeEnter(xt),n(xt,W,tt),((pt=Zt&&Zt.onVnodeMounted)||J||re)&&ji(()=>{pt&&ko(pt,ut,R),J&&Yt.enter(xt),re&&$c(R,null,ut,"mounted")},lt)},_=(R,W,tt,ut,lt)=>{if(tt&&d(R,tt),ut)for(let ct=0;ct<ut.length;ct++)d(R,ut[ct]);if(lt){let ct=lt.subTree;if(W===ct||ez(ct.type)&&(ct.ssContent===W||ct.ssFallback===W)){const St=lt.vnode;_(R,St,St.scopeId,St.slotScopeIds,lt.parent)}}},I=(R,W,tt,ut,lt,ct,St,bt,xt=0)=>{for(let pt=xt;pt<R.length;pt++){const Zt=R[pt]=bt?Rl(R[pt]):Io(R[pt]);m(null,Zt,W,tt,ut,lt,ct,St,bt)}},N=(R,W,tt,ut,lt,ct,St)=>{const bt=W.el=R.el;__VUE_PROD_DEVTOOLS__&&(bt.__vnode=W);let{patchFlag:xt,dynamicChildren:pt,dirs:Zt}=W;xt|=R.patchFlag&16;const Ot=R.props||ur,Yt=W.props||ur;let re;if(tt&&zc(tt,!1),(re=Yt.onVnodeBeforeUpdate)&&ko(re,tt,W,R),Zt&&$c(W,R,tt,"beforeUpdate"),tt&&zc(tt,!0),(Ot.innerHTML&&Yt.innerHTML==null||Ot.textContent&&Yt.textContent==null)&&h(bt,""),pt?L(R.dynamicChildren,pt,bt,tt,ut,_5(W,lt),ct):St||q(R,W,bt,null,tt,ut,_5(W,lt),ct,!1),xt>0){if(xt&16)D(bt,Ot,Yt,tt,lt);else if(xt&2&&Ot.class!==Yt.class&&s(bt,"class",null,Yt.class,lt),xt&4&&s(bt,"style",Ot.style,Yt.style,lt),xt&8){const J=W.dynamicProps;for(let at=0;at<J.length;at++){const Mt=J[at],ne=Ot[Mt],ge=Yt[Mt];(ge!==ne||Mt==="value")&&s(bt,Mt,ne,ge,lt,tt)}}xt&1&&R.children!==W.children&&h(bt,W.children)}else!St&&pt==null&&D(bt,Ot,Yt,tt,lt);((re=Yt.onVnodeUpdated)||Zt)&&ji(()=>{re&&ko(re,tt,W,R),Zt&&$c(W,R,tt,"updated")},ut)},L=(R,W,tt,ut,lt,ct,St)=>{for(let bt=0;bt<W.length;bt++){const xt=R[bt],pt=W[bt],Zt=xt.el&&(xt.type===xn||!A0(xt,pt)||xt.shapeFlag&198)?u(xt.el):tt;m(xt,pt,Zt,null,ut,lt,ct,St,!0)}},D=(R,W,tt,ut,lt)=>{if(W!==tt){if(W!==ur)for(const ct in W)!am(ct)&&!(ct in tt)&&s(R,ct,W[ct],null,lt,ut);for(const ct in tt){if(am(ct))continue;const St=tt[ct],bt=W[ct];St!==bt&&ct!=="value"&&s(R,ct,bt,St,lt,ut)}"value"in tt&&s(R,"value",W.value,tt.value,lt)}},P=(R,W,tt,ut,lt,ct,St,bt,xt)=>{const pt=W.el=R?R.el:a(""),Zt=W.anchor=R?R.anchor:a("");let{patchFlag:Ot,dynamicChildren:Yt,slotScopeIds:re}=W;re&&(bt=bt?bt.concat(re):re),R==null?(n(pt,tt,ut),n(Zt,tt,ut),I(W.children||[],tt,Zt,lt,ct,St,bt,xt)):Ot>0&&Ot&64&&Yt&&R.dynamicChildren?(L(R.dynamicChildren,Yt,tt,lt,ct,St,bt),(W.key!=null||lt&&W===lt.subTree)&&Q$(R,W,!0)):q(R,W,tt,Zt,lt,ct,St,bt,xt)},K=(R,W,tt,ut,lt,ct,St,bt,xt)=>{W.slotScopeIds=bt,R==null?W.shapeFlag&512?lt.ctx.activate(W,tt,ut,St,xt):z(W,tt,ut,lt,ct,St,xt):$(R,W,xt)},z=(R,W,tt,ut,lt,ct,St)=>{const bt=R.component=R0t(R,ut,lt);if(F$(R)&&(bt.ctx.renderer=xe),N0t(bt,!1,St),bt.asyncDep){if(lt&&lt.registerDep(bt,H,St),!R.el){const xt=bt.subTree=Ks(lu);y(null,xt,W,tt),R.placeholder=xt.el}}else H(bt,R,W,tt,lt,ct,St)},$=(R,W,tt)=>{const ut=W.component=R.component;if(p0t(R,W,tt))if(ut.asyncDep&&!ut.asyncResolved){U(ut,W,tt);return}else ut.next=W,ut.update();else W.el=R.el,ut.vnode=W},H=(R,W,tt,ut,lt,ct,St)=>{const bt=()=>{if(R.isMounted){let{next:Ot,bu:Yt,u:re,parent:J,vnode:at}=R;{const wr=tz(R);if(wr){Ot&&(Ot.el=at.el,U(R,Ot,St)),wr.asyncDep.then(()=>{R.isUnmounted||bt()});return}}let Mt=Ot,ne;zc(R,!1),Ot?(Ot.el=at.el,U(R,Ot,St)):Ot=at,Yt&&w5(Yt),(ne=Ot.props&&Ot.props.onVnodeBeforeUpdate)&&ko(ne,J,Ot,at),zc(R,!0);const ge=HE(R),tr=R.subTree;R.subTree=ge,m(tr,ge,u(tr.el),Xt(tr),R,lt,ct),Ot.el=ge.el,Mt===null&&m0t(R,ge.el),re&&ji(re,lt),(ne=Ot.props&&Ot.props.onVnodeUpdated)&&ji(()=>ko(ne,J,Ot,at),lt),__VUE_PROD_DEVTOOLS__&&R$(R)}else{let Ot;const{el:Yt,props:re}=W,{bm:J,m:at,parent:Mt,root:ne,type:ge}=R,tr=um(W);zc(R,!1),J&&w5(J),!tr&&(Ot=re&&re.onVnodeBeforeMount)&&ko(Ot,Mt,W),zc(R,!0);{ne.ce&&ne.ce._def.shadowRoot!==!1&&ne.ce._injectChildStyle(ge);const wr=R.subTree=HE(R);m(null,wr,tt,ut,R,lt,ct),W.el=wr.el}if(at&&ji(at,lt),!tr&&(Ot=re&&re.onVnodeMounted)){const wr=W;ji(()=>ko(Ot,Mt,wr),lt)}(W.shapeFlag&256||Mt&&um(Mt.vnode)&&Mt.vnode.shapeFlag&256)&&R.a&&ji(R.a,lt),R.isMounted=!0,__VUE_PROD_DEVTOOLS__&&Odt(R),W=tt=ut=null}};R.scope.on();const xt=R.effect=new p$(bt);R.scope.off();const pt=R.update=xt.run.bind(xt),Zt=R.job=xt.runIfDirty.bind(xt);Zt.i=R,Zt.id=R.uid,xt.scheduler=()=>h8(Zt),zc(R,!0),pt()},U=(R,W,tt)=>{W.component=R;const ut=R.vnode.props;R.vnode=W,R.next=null,y0t(R,W.props,ut,tt),w0t(R,W.children,tt),rl(),RE(R),nl()},q=(R,W,tt,ut,lt,ct,St,bt,xt=!1)=>{const pt=R&&R.children,Zt=R?R.shapeFlag:0,Ot=W.children,{patchFlag:Yt,shapeFlag:re}=W;if(Yt>0){if(Yt&128){E(pt,Ot,tt,ut,lt,ct,St,bt,xt);return}else if(Yt&256){rt(pt,Ot,tt,ut,lt,ct,St,bt,xt);return}}re&8?(Zt&16&&Lt(pt,lt,ct),Ot!==pt&&h(tt,Ot)):Zt&16?re&16?E(pt,Ot,tt,ut,lt,ct,St,bt,xt):Lt(pt,lt,ct,!0):(Zt&8&&h(tt,""),re&16&&I(Ot,tt,ut,lt,ct,St,bt,xt))},rt=(R,W,tt,ut,lt,ct,St,bt,xt)=>{R=R||sm,W=W||sm;const pt=R.length,Zt=W.length,Ot=Math.min(pt,Zt);let Yt;for(Yt=0;Yt<Ot;Yt++){const re=W[Yt]=xt?Rl(W[Yt]):Io(W[Yt]);m(R[Yt],re,tt,null,lt,ct,St,bt,xt)}pt>Zt?Lt(R,lt,ct,!0,!1,Ot):I(W,tt,ut,lt,ct,St,bt,xt,Ot)},E=(R,W,tt,ut,lt,ct,St,bt,xt)=>{let pt=0;const Zt=W.length;let Ot=R.length-1,Yt=Zt-1;for(;pt<=Ot&&pt<=Yt;){const re=R[pt],J=W[pt]=xt?Rl(W[pt]):Io(W[pt]);if(A0(re,J))m(re,J,tt,null,lt,ct,St,bt,xt);else break;pt++}for(;pt<=Ot&&pt<=Yt;){const re=R[Ot],J=W[Yt]=xt?Rl(W[Yt]):Io(W[Yt]);if(A0(re,J))m(re,J,tt,null,lt,ct,St,bt,xt);else break;Ot--,Yt--}if(pt>Ot){if(pt<=Yt){const re=Yt+1,J=re<Zt?W[re].el:ut;for(;pt<=Yt;)m(null,W[pt]=xt?Rl(W[pt]):Io(W[pt]),tt,J,lt,ct,St,bt,xt),pt++}}else if(pt>Yt)for(;pt<=Ot;)Tt(R[pt],lt,ct,!0),pt++;else{const re=pt,J=pt,at=new Map;for(pt=J;pt<=Yt;pt++){const qe=W[pt]=xt?Rl(W[pt]):Io(W[pt]);qe.key!=null&&at.set(qe.key,pt)}let Mt,ne=0;const ge=Yt-J+1;let tr=!1,wr=0;const _r=new Array(ge);for(pt=0;pt<ge;pt++)_r[pt]=0;for(pt=re;pt<=Ot;pt++){const qe=R[pt];if(ne>=ge){Tt(qe,lt,ct,!0);continue}let Ne;if(qe.key!=null)Ne=at.get(qe.key);else for(Mt=J;Mt<=Yt;Mt++)if(_r[Mt-J]===0&&A0(qe,W[Mt])){Ne=Mt;break}Ne===void 0?Tt(qe,lt,ct,!0):(_r[Ne-J]=pt+1,Ne>=wr?wr=Ne:tr=!0,m(qe,W[Ne],tt,null,lt,ct,St,bt,xt),ne++)}const Tn=tr?_0t(_r):sm;for(Mt=Tn.length-1,pt=ge-1;pt>=0;pt--){const qe=J+pt,Ne=W[qe],_n=W[qe+1],Yr=qe+1<Zt?_n.el||_n.placeholder:ut;_r[pt]===0?m(null,Ne,tt,Yr,lt,ct,St,bt,xt):tr&&(Mt<0||pt!==Tn[Mt]?dt(Ne,tt,Yr,2):Mt--)}}},dt=(R,W,tt,ut,lt=null)=>{const{el:ct,type:St,transition:bt,children:xt,shapeFlag:pt}=R;if(pt&6){dt(R.component.subTree,W,tt,ut);return}if(pt&128){R.suspense.move(W,tt,ut);return}if(pt&64){St.move(R,W,tt,xe);return}if(St===xn){n(ct,W,tt);for(let Ot=0;Ot<xt.length;Ot++)dt(xt[Ot],W,tt,ut);n(R.anchor,W,tt);return}if(St===q2){x(R,W,tt);return}if(ut!==2&&pt&1&&bt)if(ut===0)bt.beforeEnter(ct),n(ct,W,tt),ji(()=>bt.enter(ct),lt);else{const{leave:Ot,delayLeave:Yt,afterLeave:re}=bt,J=()=>{R.ctx.isUnmounted?i(ct):n(ct,W,tt)},at=()=>{ct._isLeaving&&ct[Fdt](!0),Ot(ct,()=>{J(),re&&re()})};Yt?Yt(ct,J,at):at()}else n(ct,W,tt)},Tt=(R,W,tt,ut=!1,lt=!1)=>{const{type:ct,props:St,ref:bt,children:xt,dynamicChildren:pt,shapeFlag:Zt,patchFlag:Ot,dirs:Yt,cacheIndex:re}=R;if(Ot===-2&&(lt=!1),bt!=null&&(rl(),hm(bt,null,tt,R,!0),nl()),re!=null&&(W.renderCache[re]=void 0),Zt&256){W.ctx.deactivate(R);return}const J=Zt&1&&Yt,at=!um(R);let Mt;if(at&&(Mt=St&&St.onVnodeBeforeUnmount)&&ko(Mt,W,R),Zt&6)Ht(R.component,tt,ut);else{if(Zt&128){R.suspense.unmount(tt,ut);return}J&&$c(R,null,W,"beforeUnmount"),Zt&64?R.type.remove(R,W,tt,xe,ut):pt&&!pt.hasOnce&&(ct!==xn||Ot>0&&Ot&64)?Lt(pt,W,tt,!1,!0):(ct===xn&&Ot&384||!lt&&Zt&16)&&Lt(xt,W,tt),ut&&O(R)}(at&&(Mt=St&&St.onVnodeUnmounted)||J)&&ji(()=>{Mt&&ko(Mt,W,R),J&&$c(R,null,W,"unmounted")},tt)},O=R=>{const{type:W,el:tt,anchor:ut,transition:lt}=R;if(W===xn){te(tt,ut);return}if(W===q2){T(R);return}const ct=()=>{i(tt),lt&&!lt.persisted&&lt.afterLeave&&lt.afterLeave()};if(R.shapeFlag&1&&lt&&!lt.persisted){const{leave:St,delayLeave:bt}=lt,xt=()=>St(tt,ct);bt?bt(R.el,ct,xt):xt()}else ct()},te=(R,W)=>{let tt;for(;R!==W;)tt=f(R),i(R),R=tt;i(W)},Ht=(R,W,tt)=>{const{bum:ut,scope:lt,job:ct,subTree:St,um:bt,m:xt,a:pt}=R;WE(xt),WE(pt),ut&&w5(ut),lt.stop(),ct&&(ct.flags|=8,Tt(St,R,W,tt)),bt&&ji(bt,W),ji(()=>{R.isUnmounted=!0},W),__VUE_PROD_DEVTOOLS__&&Idt(R)},Lt=(R,W,tt,ut=!1,lt=!1,ct=0)=>{for(let St=ct;St<R.length;St++)Tt(R[St],W,tt,ut,lt)},Xt=R=>{if(R.shapeFlag&6)return Xt(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const W=f(R.anchor||R.el),tt=W&&W[Pdt];return tt?f(tt):W};let de=!1;const Ce=(R,W,tt)=>{R==null?W._vnode&&Tt(W._vnode,null,null,!0):m(W._vnode||null,R,W,null,null,null,tt),W._vnode=R,de||(de=!0,RE(),D$(),de=!1)},xe={p:m,um:Tt,m:dt,r:O,mt:z,mc:I,pc:q,pbc:L,n:Xt,o:e};return{render:Ce,hydrate:void 0,createApp:i0t(Ce)}}function _5({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function zc({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function T0t(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Q$(e,t,r=!1){const n=e.children,i=t.children;if(Ae(n)&&Ae(i))for(let s=0;s<n.length;s++){const o=n[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Rl(i[s]),a.el=o.el),!r&&a.patchFlag!==-2&&Q$(o,a)),a.type===x1&&a.patchFlag!==-1&&(a.el=o.el),a.type===lu&&!a.el&&(a.el=o.el)}}function _0t(e){const t=e.slice(),r=[0];let n,i,s,o,a;const l=e.length;for(n=0;n<l;n++){const c=e[n];if(c!==0){if(i=r[r.length-1],e[i]<c){t[n]=i,r.push(n);continue}for(s=0,o=r.length-1;s<o;)a=s+o>>1,e[r[a]]<c?s=a+1:o=a;c<e[r[s]]&&(s>0&&(t[n]=r[s-1]),r[s]=n)}}for(s=r.length,o=r[s-1];s-- >0;)r[s]=o,o=t[o];return r}function tz(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:tz(t)}function WE(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const ez=e=>e.__isSuspense;function M0t(e,t){t&&t.pendingBranch?Ae(e)?t.effects.push(...e):t.effects.push(e):Adt(e)}const xn=Symbol.for("v-fgt"),x1=Symbol.for("v-txt"),lu=Symbol.for("v-cmt"),q2=Symbol.for("v-stc");function mx(e){return e?e.__v_isVNode===!0:!1}function A0(e,t){return e.type===t.type&&e.key===t.key}const rz=({key:e})=>e??null,V2=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?ln(e)||Fn(e)||_e(e)?{i:Ho,r:e,k:t,f:!!r}:e:null);function A0t(e,t=null,r=null,n=0,i=null,s=e===xn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&rz(t),ref:t&&V2(t),scopeId:P$,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ho};return a?(g8(l,r),s&128&&e.normalize(l)):r&&(l.shapeFlag|=ln(r)?8:16),l}const Ks=E0t;function E0t(e,t=null,r=null,n=0,i=null,s=!1){if((!e||e===Xdt)&&(e=lu),mx(e)){const a=vd(e,t,!0);return r&&g8(a,r),a.patchFlag=-2,a}if(H0t(e)&&(e=e.__vccOpts),t){t=L0t(t);let{class:a,style:l}=t;a&&!ln(a)&&(t.class=t8(a)),Br(l)&&(c8(l)&&!Ae(l)&&(l=qn({},l)),t.style=QS(l))}const o=ln(e)?1:ez(e)?128:Ndt(e)?64:Br(e)?4:_e(e)?2:0;return A0t(e,t,r,n,i,o,s,!0)}function L0t(e){return e?c8(e)||G$(e)?qn({},e):e:null}function vd(e,t,r=!1,n=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=e,c=t?D0t(i||{},t):i,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&rz(c),ref:t&&t.ref?r&&s?Ae(s)?s.concat(V2(t)):[s,V2(t)]:V2(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==xn?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&vd(e.ssContent),ssFallback:e.ssFallback&&vd(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&f8(h,l.clone(h)),h}function O0t(e=" ",t=0){return Ks(x1,null,e,t)}function Io(e){return e==null||typeof e=="boolean"?Ks(lu):Ae(e)?Ks(xn,null,e.slice()):mx(e)?Rl(e):Ks(x1,null,String(e))}function Rl(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:vd(e)}function g8(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(Ae(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),g8(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!G$(t)?t._ctx=Ho:i===3&&Ho&&(Ho.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else _e(t)?(t={default:t,_ctx:Ho},r=32):(t=String(t),n&64?(r=16,t=[O0t(t)]):r=8);e.children=t,e.shapeFlag|=r}function D0t(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=t8([t.class,n.class]));else if(i==="style")t.style=QS([t.style,n.style]);else if(c4(i)){const s=t[i],o=n[i];o&&s!==o&&!(Ae(s)&&s.includes(o))&&(t[i]=s?[].concat(s,o):o)}else i!==""&&(t[i]=n[i])}return t}function ko(e,t,r,n=null){Qo(e,t,7,[r,n])}const I0t=q$();let B0t=0;function R0t(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||I0t,s={uid:B0t++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Xft(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Y$(n,i),emitsOptions:W$(n,i),emit:null,emitted:null,propsDefaults:ur,inheritAttrs:n.inheritAttrs,ctx:ur,data:ur,props:ur,attrs:ur,slots:ur,refs:ur,setupState:ur,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=h0t.bind(null,s),e.ce&&e.ce(s),s}let ti=null;const P0t=()=>ti||Ho;let gx,CC;{const e=Hh(),t=(r,n)=>{let i;return(i=e[r])||(i=e[r]=[]),i.push(n),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};gx=t("__VUE_INSTANCE_SETTERS__",r=>ti=r),CC=t("__VUE_SSR_SETTERS__",r=>sg=r)}const v1=e=>{const t=ti;return gx(e),e.scope.on(),()=>{e.scope.off(),gx(t)}},jE=()=>{ti&&ti.scope.off(),gx(null)};function nz(e){return e.vnode.shapeFlag&4}let sg=!1;function N0t(e,t=!1,r=!1){t&&CC(t);const{props:n,children:i}=e.vnode,s=nz(e);g0t(e,n,s,t),v0t(e,i,r||t);const o=s?F0t(e,t):void 0;return t&&CC(!1),o}function F0t(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Jdt);const{setup:n}=r;if(n){rl();const i=e.setupContext=n.length>1?z0t(e):null,s=v1(e),o=g1(n,e,0,[e.props,i]),a=u$(o);if(nl(),s(),(a||e.sp)&&!um(e)&&N$(e),a){if(o.then(jE,jE),t)return o.then(l=>{UE(e,l)}).catch(l=>{f4(l,e,0)});e.asyncDep=o}else UE(e,o)}else iz(e)}function UE(e,t,r){_e(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Br(t)&&(__VUE_PROD_DEVTOOLS__&&(e.devtoolsRawSetupState=t),e.setupState=E$(t)),iz(e)}function iz(e,t,r){const n=e.type;if(e.render||(e.render=n.render||Js),__VUE_OPTIONS_API__){const i=v1(e);rl();try{Zdt(e)}finally{nl(),i()}}}const $0t={get(e,t){return In(e,"get",""),e[t]}};function z0t(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,$0t),slots:e.slots,emit:e.emit,expose:t}}function y8(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(E$(ydt(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in fm)return fm[r](e)},has(t,r){return r in t||r in fm}})):e.proxy}function H0t(e){return _e(e)&&"__vccOpts"in e}const wd=(e,t)=>kdt(e,t,sg);function et(e,t,r){try{const n=arguments.length;return n===2?Br(t)&&!Ae(t)?mx(t)?Ks(e,null,[t]):Ks(e,t):Ks(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&mx(r)&&(r=[r]),Ks(e,t,r))}finally{}}const GE="3.5.25";/**
* @vue/runtime-dom v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let SC;const KE=typeof window<"u"&&window.trustedTypes;if(KE)try{SC=KE.createPolicy("vue",{createHTML:e=>e})}catch{}const sz=SC?e=>SC.createHTML(e):e=>e,q0t="http://www.w3.org/2000/svg",V0t="http://www.w3.org/1998/Math/MathML",Ma=typeof document<"u"?document:null,YE=Ma&&Ma.createElement("template"),W0t={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t==="svg"?Ma.createElementNS(q0t,e):t==="mathml"?Ma.createElementNS(V0t,e):r?Ma.createElement(e,{is:r}):Ma.createElement(e);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>Ma.createTextNode(e),createComment:e=>Ma.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ma.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,i,s){const o=r?r.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===s||!(i=i.nextSibling)););else{YE.innerHTML=sz(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=YE.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,r)}return[o?o.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},j0t=Symbol("_vtc");function U0t(e,t,r){const n=e[j0t];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const XE=Symbol("_vod"),G0t=Symbol("_vsh"),K0t=Symbol(""),Y0t=/(?:^|;)\s*display\s*:/;function X0t(e,t,r){const n=e.style,i=ln(r);let s=!1;if(r&&!i){if(t)if(ln(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();r[a]==null&&W2(n,a,"")}else for(const o in t)r[o]==null&&W2(n,o,"");for(const o in r)o==="display"&&(s=!0),W2(n,o,r[o])}else if(i){if(t!==r){const o=n[K0t];o&&(r+=";"+o),n.cssText=r,s=Y0t.test(r)}}else t&&e.removeAttribute("style");XE in e&&(e[XE]=s?n.display:"",e[G0t]&&(n.display="none"))}const JE=/\s*!important$/;function W2(e,t,r){if(Ae(r))r.forEach(n=>W2(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=J0t(e,t);JE.test(r)?e.setProperty(Tu(n),r.replace(JE,""),"important"):e[n]=r}}const ZE=["Webkit","Moz","ms"],M5={};function J0t(e,t){const r=M5[t];if(r)return r;let n=dc(t);if(n!=="filter"&&n in e)return M5[t]=n;n=f$(n);for(let i=0;i<ZE.length;i++){const s=ZE[i]+n;if(s in e)return M5[t]=s}return t}const QE="http://www.w3.org/1999/xlink";function tL(e,t,r,n,i,s=Yft(t)){n&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(QE,t.slice(6,t.length)):e.setAttributeNS(QE,t,r):r==null||s&&!d$(r)?e.removeAttribute(t):e.setAttribute(t,s?"":Ud(r)?String(r):r)}function eL(e,t,r,n,i){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?sz(r):r);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?e.getAttribute("value")||"":e.value,l=r==null?e.type==="checkbox"?"on":"":String(r);(a!==l||!("_value"in e))&&(e.value=l),r==null&&e.removeAttribute(t),e._value=r;return}let o=!1;if(r===""||r==null){const a=typeof e[t];a==="boolean"?r=d$(r):r==null&&a==="string"?(r="",o=!0):a==="number"&&(r=0,o=!0)}try{e[t]=r}catch{}o&&e.removeAttribute(i||t)}function Z0t(e,t,r,n){e.addEventListener(t,r,n)}function Q0t(e,t,r,n){e.removeEventListener(t,r,n)}const rL=Symbol("_vei");function tpt(e,t,r,n,i=null){const s=e[rL]||(e[rL]={}),o=s[t];if(n&&o)o.value=n;else{const[a,l]=ept(t);if(n){const c=s[t]=ipt(n,i);Z0t(e,a,c,l)}else o&&(Q0t(e,a,o,l),s[t]=void 0)}}const nL=/(?:Once|Passive|Capture)$/;function ept(e){let t;if(nL.test(e)){t={};let n;for(;n=e.match(nL);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Tu(e.slice(2)),t]}let A5=0;const rpt=Promise.resolve(),npt=()=>A5||(rpt.then(()=>A5=0),A5=Date.now());function ipt(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Qo(spt(n,r.value),t,5,[n])};return r.value=e,r.attached=npt(),r}function spt(e,t){if(Ae(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const iL=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,opt=(e,t,r,n,i,s)=>{const o=i==="svg";t==="class"?U0t(e,n,o):t==="style"?X0t(e,r,n):c4(t)?XS(t)||tpt(e,t,r,n,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):apt(e,t,n,o))?(eL(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&tL(e,t,n,o,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ln(n))?eL(e,dc(t),n,s,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),tL(e,t,n,o))};function apt(e,t,r,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&iL(t)&&_e(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return iL(t)&&ln(r)?!1:t in e}const lpt=qn({patchProp:opt},W0t);let sL;function cpt(){return sL||(sL=C0t(lpt))}const po=(...e)=>{const t=cpt().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=upt(n);if(!i)return;const s=t._component;!_e(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=r(i,!1,hpt(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function hpt(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function upt(e){return ln(e)?document.querySelector(e):e}function fpt(e){const t=er({},`${e}_SLASH_SPEC`),r=Gr(i=>{const s=i.get(t.key);return new xr({key:new vr(`${e}_SLASH`),...s})}),n=[t,r];return n.key=t.key,n.pluginKey=r.key,t.meta={package:"@milkdown/plugin-slash",displayName:`Ctx<slashSpec>|${e}`},r.meta={package:"@milkdown/plugin-slash",displayName:`Prose<slash>|${e}`},n}var Uf,qg,Vg,Wg,jg,Ih,Ug,Gf,Gg,Kg,fv,oz;class dpt{constructor(t){kt(this,fv);kt(this,Uf);kt(this,qg);kt(this,Vg);kt(this,Wg);kt(this,jg);kt(this,Ih);kt(this,Ug);kt(this,Gf);kt(this,Gg);kt(this,Kg);nt(this,Uf,!1),this.onShow=()=>{},this.onHide=()=>{},nt(this,Kg,(r,n)=>{const{state:i,composing:s}=r,{selection:o,doc:a}=i,{ranges:l}=o,c=Math.min(...l.map(d=>d.$from.pos)),h=Math.max(...l.map(d=>d.$to.pos)),u=n&&n.doc.eq(a)&&n.selection.eq(o);if(V(this,Uf)||((V(this,Wg)??r.dom.parentElement??document.body).appendChild(this.element),nt(this,Uf,!0)),s||u)return;if(!V(this,Ug).call(this,r,n)){this.hide();return}oo({getBoundingClientRect:()=>Nv(r,c,h)},this.element,{placement:"bottom-start",middleware:[ox(),fc(V(this,Gg)),...V(this,qg)],...V(this,Vg)}).then(({x:d,y:p})=>{Object.assign(this.element.style,{left:`${d}px`,top:`${p}px`})}).catch(console.error),this.show()}),this.update=(r,n)=>{V(this,Gf).call(this,r,n)},this.getContent=(r,n=i=>i.type.name==="paragraph")=>{const{selection:i}=r.state,{empty:s,$from:o}=i,a=r.state.selection instanceof Gt;if(typeof document>"u")return;const l=this.element.contains(document.activeElement),c=!r.hasFocus()&&!l,h=!r.editable,f=!kst(n)(r.state.selection);if(!(c||h||!s||!a||f))return o.parent.textBetween(Math.max(0,o.parentOffset-500),o.parentOffset,void 0,"")},this.destroy=()=>{V(this,Gf).cancel()},this.show=()=>{this.element.dataset.show="true",this.onShow()},this.hide=()=>{this.element.dataset.show="false",this.onHide()},this.element=t.content,nt(this,jg,t.debounce??200),nt(this,Ug,t.shouldShow??J1(this,fv,oz)),nt(this,Ih,t.trigger??"/"),nt(this,Gg,t.offset),nt(this,qg,t.middleware??[]),nt(this,Vg,t.floatingUIOptions??{}),nt(this,Wg,t.root),nt(this,Gf,xv(V(this,Kg),V(this,jg)))}}Uf=new WeakMap,qg=new WeakMap,Vg=new WeakMap,Wg=new WeakMap,jg=new WeakMap,Ih=new WeakMap,Ug=new WeakMap,Gf=new WeakMap,Gg=new WeakMap,Kg=new WeakMap,fv=new WeakSet,oz=function(t){const r=this.getContent(t);if(!r)return!1;const n=r.at(-1);return n?Array.isArray(V(this,Ih))?V(this,Ih).includes(n):V(this,Ih)===n:!1};function az(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=az(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Cn(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=az(e))&&(n&&(n+=" "),n+=t);return n}/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:lz,setPrototypeOf:oL,isFrozen:ppt,getPrototypeOf:mpt,getOwnPropertyDescriptor:gpt}=Object;let{freeze:fi,seal:_s,create:TC}=Object,{apply:_C,construct:MC}=typeof Reflect<"u"&&Reflect;fi||(fi=function(t){return t});_s||(_s=function(t){return t});_C||(_C=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];return t.apply(r,i)});MC||(MC=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return new t(...n)});const My=di(Array.prototype.forEach),ypt=di(Array.prototype.lastIndexOf),aL=di(Array.prototype.pop),E0=di(Array.prototype.push),bpt=di(Array.prototype.splice),j2=di(String.prototype.toLowerCase),E5=di(String.prototype.toString),L5=di(String.prototype.match),L0=di(String.prototype.replace),xpt=di(String.prototype.indexOf),vpt=di(String.prototype.trim),Ns=di(Object.prototype.hasOwnProperty),Gn=di(RegExp.prototype.test),O0=wpt(TypeError);function di(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return _C(e,t,n)}}function wpt(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return MC(e,r)}}function Be(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:j2;oL&&oL(e,null);let n=t.length;for(;n--;){let i=t[n];if(typeof i=="string"){const s=r(i);s!==i&&(ppt(t)||(t[n]=s),i=s)}e[i]=!0}return e}function kpt(e){for(let t=0;t<e.length;t++)Ns(e,t)||(e[t]=null);return e}function wa(e){const t=TC(null);for(const[r,n]of lz(e))Ns(e,r)&&(Array.isArray(n)?t[r]=kpt(n):n&&typeof n=="object"&&n.constructor===Object?t[r]=wa(n):t[r]=n);return t}function D0(e,t){for(;e!==null;){const n=gpt(e,t);if(n){if(n.get)return di(n.get);if(typeof n.value=="function")return di(n.value)}e=mpt(e)}function r(){return null}return r}const lL=fi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),O5=fi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),D5=fi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Cpt=fi(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),I5=fi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Spt=fi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),cL=fi(["#text"]),hL=fi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),B5=fi(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),uL=fi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ay=fi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Tpt=_s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),_pt=_s(/<%[\w\W]*|[\w\W]*%>/gm),Mpt=_s(/\$\{[\w\W]*/gm),Apt=_s(/^data-[\-\w.\u00B7-\uFFFF]+$/),Ept=_s(/^aria-[\-\w]+$/),cz=_s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Lpt=_s(/^(?:\w+script|data):/i),Opt=_s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),hz=_s(/^html$/i),Dpt=_s(/^[a-z][.\w]*(-[.\w]+)+$/i);var fL=Object.freeze({__proto__:null,ARIA_ATTR:Ept,ATTR_WHITESPACE:Opt,CUSTOM_ELEMENT:Dpt,DATA_ATTR:Apt,DOCTYPE_NAME:hz,ERB_EXPR:_pt,IS_ALLOWED_URI:cz,IS_SCRIPT_OR_DATA:Lpt,MUSTACHE_EXPR:Tpt,TMPLIT_EXPR:Mpt});const I0={element:1,text:3,progressingInstruction:7,comment:8,document:9},Ipt=function(){return typeof window>"u"?null:window},Bpt=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const i="data-tt-policy-suffix";r&&r.hasAttribute(i)&&(n=r.getAttribute(i));const s="dompurify"+(n?"#"+n:"");try{return t.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},dL=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function uz(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ipt();const t=Qt=>uz(Qt);if(t.version="3.3.0",t.removed=[],!e||!e.document||e.document.nodeType!==I0.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const n=r,i=n.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:h=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:u,DOMParser:f,trustedTypes:d}=e,p=l.prototype,m=D0(p,"cloneNode"),g=D0(p,"remove"),y=D0(p,"nextSibling"),b=D0(p,"childNodes"),x=D0(p,"parentNode");if(typeof o=="function"){const Qt=r.createElement("template");Qt.content&&Qt.content.ownerDocument&&(r=Qt.content.ownerDocument)}let T,S="";const{implementation:w,createNodeIterator:_,createDocumentFragment:I,getElementsByTagName:N}=r,{importNode:L}=n;let D=dL();t.isSupported=typeof lz=="function"&&typeof x=="function"&&w&&w.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:P,ERB_EXPR:K,TMPLIT_EXPR:z,DATA_ATTR:$,ARIA_ATTR:H,IS_SCRIPT_OR_DATA:U,ATTR_WHITESPACE:q,CUSTOM_ELEMENT:rt}=fL;let{IS_ALLOWED_URI:E}=fL,dt=null;const Tt=Be({},[...lL,...O5,...D5,...I5,...cL]);let O=null;const te=Be({},[...hL,...B5,...uL,...Ay]);let Ht=Object.seal(TC(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Lt=null,Xt=null;const de=Object.seal(TC(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Ce=!0,xe=!0,Ue=!1,R=!0,W=!1,tt=!0,ut=!1,lt=!1,ct=!1,St=!1,bt=!1,xt=!1,pt=!0,Zt=!1;const Ot="user-content-";let Yt=!0,re=!1,J={},at=null;const Mt=Be({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ne=null;const ge=Be({},["audio","video","img","source","image","track"]);let tr=null;const wr=Be({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),_r="http://www.w3.org/1998/Math/MathML",Tn="http://www.w3.org/2000/svg",qe="http://www.w3.org/1999/xhtml";let Ne=qe,_n=!1,Yr=null;const W1=Be({},[_r,Tn,qe],E5);let Rc=Be({},["mi","mo","mn","ms","mtext"]),Pc=Be({},["annotation-xml"]);const j1=Be({},["title","style","font","a","script"]);let xl=null;const U1=["application/xhtml+xml","text/html"],G1="text/html";let Rr=null,ua=null;const K1=r.createElement("form"),o0=function(j){return j instanceof RegExp||j instanceof Function},Lu=function(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ua&&ua===j)){if((!j||typeof j!="object")&&(j={}),j=wa(j),xl=U1.indexOf(j.PARSER_MEDIA_TYPE)===-1?G1:j.PARSER_MEDIA_TYPE,Rr=xl==="application/xhtml+xml"?E5:j2,dt=Ns(j,"ALLOWED_TAGS")?Be({},j.ALLOWED_TAGS,Rr):Tt,O=Ns(j,"ALLOWED_ATTR")?Be({},j.ALLOWED_ATTR,Rr):te,Yr=Ns(j,"ALLOWED_NAMESPACES")?Be({},j.ALLOWED_NAMESPACES,E5):W1,tr=Ns(j,"ADD_URI_SAFE_ATTR")?Be(wa(wr),j.ADD_URI_SAFE_ATTR,Rr):wr,ne=Ns(j,"ADD_DATA_URI_TAGS")?Be(wa(ge),j.ADD_DATA_URI_TAGS,Rr):ge,at=Ns(j,"FORBID_CONTENTS")?Be({},j.FORBID_CONTENTS,Rr):Mt,Lt=Ns(j,"FORBID_TAGS")?Be({},j.FORBID_TAGS,Rr):wa({}),Xt=Ns(j,"FORBID_ATTR")?Be({},j.FORBID_ATTR,Rr):wa({}),J=Ns(j,"USE_PROFILES")?j.USE_PROFILES:!1,Ce=j.ALLOW_ARIA_ATTR!==!1,xe=j.ALLOW_DATA_ATTR!==!1,Ue=j.ALLOW_UNKNOWN_PROTOCOLS||!1,R=j.ALLOW_SELF_CLOSE_IN_ATTR!==!1,W=j.SAFE_FOR_TEMPLATES||!1,tt=j.SAFE_FOR_XML!==!1,ut=j.WHOLE_DOCUMENT||!1,St=j.RETURN_DOM||!1,bt=j.RETURN_DOM_FRAGMENT||!1,xt=j.RETURN_TRUSTED_TYPE||!1,ct=j.FORCE_BODY||!1,pt=j.SANITIZE_DOM!==!1,Zt=j.SANITIZE_NAMED_PROPS||!1,Yt=j.KEEP_CONTENT!==!1,re=j.IN_PLACE||!1,E=j.ALLOWED_URI_REGEXP||cz,Ne=j.NAMESPACE||qe,Rc=j.MATHML_TEXT_INTEGRATION_POINTS||Rc,Pc=j.HTML_INTEGRATION_POINTS||Pc,Ht=j.CUSTOM_ELEMENT_HANDLING||{},j.CUSTOM_ELEMENT_HANDLING&&o0(j.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ht.tagNameCheck=j.CUSTOM_ELEMENT_HANDLING.tagNameCheck),j.CUSTOM_ELEMENT_HANDLING&&o0(j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ht.attributeNameCheck=j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),j.CUSTOM_ELEMENT_HANDLING&&typeof j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ht.allowCustomizedBuiltInElements=j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),W&&(xe=!1),bt&&(St=!0),J&&(dt=Be({},cL),O=[],J.html===!0&&(Be(dt,lL),Be(O,hL)),J.svg===!0&&(Be(dt,O5),Be(O,B5),Be(O,Ay)),J.svgFilters===!0&&(Be(dt,D5),Be(O,B5),Be(O,Ay)),J.mathMl===!0&&(Be(dt,I5),Be(O,uL),Be(O,Ay))),j.ADD_TAGS&&(typeof j.ADD_TAGS=="function"?de.tagCheck=j.ADD_TAGS:(dt===Tt&&(dt=wa(dt)),Be(dt,j.ADD_TAGS,Rr))),j.ADD_ATTR&&(typeof j.ADD_ATTR=="function"?de.attributeCheck=j.ADD_ATTR:(O===te&&(O=wa(O)),Be(O,j.ADD_ATTR,Rr))),j.ADD_URI_SAFE_ATTR&&Be(tr,j.ADD_URI_SAFE_ATTR,Rr),j.FORBID_CONTENTS&&(at===Mt&&(at=wa(at)),Be(at,j.FORBID_CONTENTS,Rr)),Yt&&(dt["#text"]=!0),ut&&Be(dt,["html","head","body"]),dt.table&&(Be(dt,["tbody"]),delete Lt.tbody),j.TRUSTED_TYPES_POLICY){if(typeof j.TRUSTED_TYPES_POLICY.createHTML!="function")throw O0('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof j.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw O0('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');T=j.TRUSTED_TYPES_POLICY,S=T.createHTML("")}else T===void 0&&(T=Bpt(d,i)),T!==null&&typeof S=="string"&&(S=T.createHTML(""));fi&&fi(j),ua=j}},a0=Be({},[...O5,...D5,...Cpt]),l0=Be({},[...I5,...Spt]),Y1=function(j){let wt=x(j);(!wt||!wt.tagName)&&(wt={namespaceURI:Ne,tagName:"template"});const qt=j2(j.tagName),nr=j2(wt.tagName);return Yr[j.namespaceURI]?j.namespaceURI===Tn?wt.namespaceURI===qe?qt==="svg":wt.namespaceURI===_r?qt==="svg"&&(nr==="annotation-xml"||Rc[nr]):!!a0[qt]:j.namespaceURI===_r?wt.namespaceURI===qe?qt==="math":wt.namespaceURI===Tn?qt==="math"&&Pc[nr]:!!l0[qt]:j.namespaceURI===qe?wt.namespaceURI===Tn&&!Pc[nr]||wt.namespaceURI===_r&&!Rc[nr]?!1:!l0[qt]&&(j1[qt]||!a0[qt]):!!(xl==="application/xhtml+xml"&&Yr[j.namespaceURI]):!1},Fi=function(j){E0(t.removed,{element:j});try{x(j).removeChild(j)}catch{g(j)}},bo=function(j,wt){try{E0(t.removed,{attribute:wt.getAttributeNode(j),from:wt})}catch{E0(t.removed,{attribute:null,from:wt})}if(wt.removeAttribute(j),j==="is")if(St||bt)try{Fi(wt)}catch{}else try{wt.setAttribute(j,"")}catch{}},c0=function(j){let wt=null,qt=null;if(ct)j="<remove></remove>"+j;else{const Mr=L5(j,/^[\r\n\t ]+/);qt=Mr&&Mr[0]}xl==="application/xhtml+xml"&&Ne===qe&&(j='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+j+"</body></html>");const nr=T?T.createHTML(j):j;if(Ne===qe)try{wt=new f().parseFromString(nr,xl)}catch{}if(!wt||!wt.documentElement){wt=w.createDocument(Ne,"template",null);try{wt.documentElement.innerHTML=_n?S:nr}catch{}}const Xr=wt.body||wt.documentElement;return j&&qt&&Xr.insertBefore(r.createTextNode(qt),Xr.childNodes[0]||null),Ne===qe?N.call(wt,ut?"html":"body")[0]:ut?wt.documentElement:Xr},h0=function(j){return _.call(j.ownerDocument||j,j,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Ou=function(j){return j instanceof u&&(typeof j.nodeName!="string"||typeof j.textContent!="string"||typeof j.removeChild!="function"||!(j.attributes instanceof h)||typeof j.removeAttribute!="function"||typeof j.setAttribute!="function"||typeof j.namespaceURI!="string"||typeof j.insertBefore!="function"||typeof j.hasChildNodes!="function")},u0=function(j){return typeof a=="function"&&j instanceof a};function ls(Qt,j,wt){My(Qt,qt=>{qt.call(t,j,wt,ua)})}const f0=function(j){let wt=null;if(ls(D.beforeSanitizeElements,j,null),Ou(j))return Fi(j),!0;const qt=Rr(j.nodeName);if(ls(D.uponSanitizeElement,j,{tagName:qt,allowedTags:dt}),tt&&j.hasChildNodes()&&!u0(j.firstElementChild)&&Gn(/<[/\w!]/g,j.innerHTML)&&Gn(/<[/\w!]/g,j.textContent)||j.nodeType===I0.progressingInstruction||tt&&j.nodeType===I0.comment&&Gn(/<[/\w]/g,j.data))return Fi(j),!0;if(!(de.tagCheck instanceof Function&&de.tagCheck(qt))&&(!dt[qt]||Lt[qt])){if(!Lt[qt]&&p0(qt)&&(Ht.tagNameCheck instanceof RegExp&&Gn(Ht.tagNameCheck,qt)||Ht.tagNameCheck instanceof Function&&Ht.tagNameCheck(qt)))return!1;if(Yt&&!at[qt]){const nr=x(j)||j.parentNode,Xr=b(j)||j.childNodes;if(Xr&&nr){const Mr=Xr.length;for(let un=Mr-1;un>=0;--un){const cs=m(Xr[un],!0);cs.__removalCount=(j.__removalCount||0)+1,nr.insertBefore(cs,y(j))}}}return Fi(j),!0}return j instanceof l&&!Y1(j)||(qt==="noscript"||qt==="noembed"||qt==="noframes")&&Gn(/<\/no(script|embed|frames)/i,j.innerHTML)?(Fi(j),!0):(W&&j.nodeType===I0.text&&(wt=j.textContent,My([P,K,z],nr=>{wt=L0(wt,nr," ")}),j.textContent!==wt&&(E0(t.removed,{element:j.cloneNode()}),j.textContent=wt)),ls(D.afterSanitizeElements,j,null),!1)},d0=function(j,wt,qt){if(pt&&(wt==="id"||wt==="name")&&(qt in r||qt in K1))return!1;if(!(xe&&!Xt[wt]&&Gn($,wt))){if(!(Ce&&Gn(H,wt))){if(!(de.attributeCheck instanceof Function&&de.attributeCheck(wt,j))){if(!O[wt]||Xt[wt]){if(!(p0(j)&&(Ht.tagNameCheck instanceof RegExp&&Gn(Ht.tagNameCheck,j)||Ht.tagNameCheck instanceof Function&&Ht.tagNameCheck(j))&&(Ht.attributeNameCheck instanceof RegExp&&Gn(Ht.attributeNameCheck,wt)||Ht.attributeNameCheck instanceof Function&&Ht.attributeNameCheck(wt,j))||wt==="is"&&Ht.allowCustomizedBuiltInElements&&(Ht.tagNameCheck instanceof RegExp&&Gn(Ht.tagNameCheck,qt)||Ht.tagNameCheck instanceof Function&&Ht.tagNameCheck(qt))))return!1}else if(!tr[wt]){if(!Gn(E,L0(qt,q,""))){if(!((wt==="src"||wt==="xlink:href"||wt==="href")&&j!=="script"&&xpt(qt,"data:")===0&&ne[j])){if(!(Ue&&!Gn(U,L0(qt,q,"")))){if(qt)return!1}}}}}}}return!0},p0=function(j){return j!=="annotation-xml"&&L5(j,rt)},m0=function(j){ls(D.beforeSanitizeAttributes,j,null);const{attributes:wt}=j;if(!wt||Ou(j))return;const qt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:O,forceKeepAttr:void 0};let nr=wt.length;for(;nr--;){const Xr=wt[nr],{name:Mr,namespaceURI:un,value:cs}=Xr,fa=Rr(Mr),Du=cs;let zr=Mr==="value"?Du:vpt(Du);if(qt.attrName=fa,qt.attrValue=zr,qt.keepAttr=!0,qt.forceKeepAttr=void 0,ls(D.uponSanitizeAttribute,j,qt),zr=qt.attrValue,Zt&&(fa==="id"||fa==="name")&&(bo(Mr,j),zr=Ot+zr),tt&&Gn(/((--!?|])>)|<\/(style|title|textarea)/i,zr)){bo(Mr,j);continue}if(fa==="attributename"&&L5(zr,"href")){bo(Mr,j);continue}if(qt.forceKeepAttr)continue;if(!qt.keepAttr){bo(Mr,j);continue}if(!R&&Gn(/\/>/i,zr)){bo(Mr,j);continue}W&&My([P,K,z],y0=>{zr=L0(zr,y0," ")});const g0=Rr(j.nodeName);if(!d0(g0,fa,zr)){bo(Mr,j);continue}if(T&&typeof d=="object"&&typeof d.getAttributeType=="function"&&!un)switch(d.getAttributeType(g0,fa)){case"TrustedHTML":{zr=T.createHTML(zr);break}case"TrustedScriptURL":{zr=T.createScriptURL(zr);break}}if(zr!==Du)try{un?j.setAttributeNS(un,Mr,zr):j.setAttribute(Mr,zr),Ou(j)?Fi(j):aL(t.removed)}catch{bo(Mr,j)}}ls(D.afterSanitizeAttributes,j,null)},X1=function Qt(j){let wt=null;const qt=h0(j);for(ls(D.beforeSanitizeShadowDOM,j,null);wt=qt.nextNode();)ls(D.uponSanitizeShadowNode,wt,null),f0(wt),m0(wt),wt.content instanceof s&&Qt(wt.content);ls(D.afterSanitizeShadowDOM,j,null)};return t.sanitize=function(Qt){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},wt=null,qt=null,nr=null,Xr=null;if(_n=!Qt,_n&&(Qt="<!-->"),typeof Qt!="string"&&!u0(Qt))if(typeof Qt.toString=="function"){if(Qt=Qt.toString(),typeof Qt!="string")throw O0("dirty is not a string, aborting")}else throw O0("toString is not a function");if(!t.isSupported)return Qt;if(lt||Lu(j),t.removed=[],typeof Qt=="string"&&(re=!1),re){if(Qt.nodeName){const cs=Rr(Qt.nodeName);if(!dt[cs]||Lt[cs])throw O0("root node is forbidden and cannot be sanitized in-place")}}else if(Qt instanceof a)wt=c0("<!---->"),qt=wt.ownerDocument.importNode(Qt,!0),qt.nodeType===I0.element&&qt.nodeName==="BODY"||qt.nodeName==="HTML"?wt=qt:wt.appendChild(qt);else{if(!St&&!W&&!ut&&Qt.indexOf("<")===-1)return T&&xt?T.createHTML(Qt):Qt;if(wt=c0(Qt),!wt)return St?null:xt?S:""}wt&&ct&&Fi(wt.firstChild);const Mr=h0(re?Qt:wt);for(;nr=Mr.nextNode();)f0(nr),m0(nr),nr.content instanceof s&&X1(nr.content);if(re)return Qt;if(St){if(bt)for(Xr=I.call(wt.ownerDocument);wt.firstChild;)Xr.appendChild(wt.firstChild);else Xr=wt;return(O.shadowroot||O.shadowrootmode)&&(Xr=L.call(n,Xr,!0)),Xr}let un=ut?wt.outerHTML:wt.innerHTML;return ut&&dt["!doctype"]&&wt.ownerDocument&&wt.ownerDocument.doctype&&wt.ownerDocument.doctype.name&&Gn(hz,wt.ownerDocument.doctype.name)&&(un="<!DOCTYPE "+wt.ownerDocument.doctype.name+`>
`+un),W&&My([P,K,z],cs=>{un=L0(un,cs," ")}),T&&xt?T.createHTML(un):un},t.setConfig=function(){let Qt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Lu(Qt),lt=!0},t.clearConfig=function(){ua=null,lt=!1},t.isValidAttribute=function(Qt,j,wt){ua||Lu({});const qt=Rr(Qt),nr=Rr(j);return d0(qt,nr,wt)},t.addHook=function(Qt,j){typeof j=="function"&&E0(D[Qt],j)},t.removeHook=function(Qt,j){if(j!==void 0){const wt=ypt(D[Qt],j);return wt===-1?void 0:bpt(D[Qt],wt,1)[0]}return aL(D[Qt])},t.removeHooks=function(Qt){D[Qt]=[]},t.removeAllHooks=function(){D=dL()},t}var cn=uz();function kd({icon:e,class:t,onClick:r}){return et("span",{class:Cn("milkdown-icon",t),onPointerdown:r,ref:n=>{n&&e&&(n.innerHTML=cn.sanitize(e.trim()))}})}kd.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};var Rpt=Object.defineProperty,pL=Object.getOwnPropertySymbols,Ppt=Object.prototype.hasOwnProperty,Npt=Object.prototype.propertyIsEnumerable,mL=(e,t,r)=>t in e?Rpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Fpt=(e,t)=>{for(var r in t||(t={}))Ppt.call(t,r)&&mL(e,r,t[r]);if(pL)for(var r of pL(t))Npt.call(t,r)&&mL(e,r,t[r]);return e};function w1(e,t){return Object.assign(e,{meta:Fpt({package:"@milkdown/components"},t)}),e}const $pt={imageIcon:"",captionIcon:"",uploadButton:"Upload file",confirmButton:"Confirm ",uploadPlaceholderText:"or paste the image link ...",captionPlaceholderText:"Image caption",onUpload:e=>Promise.resolve(URL.createObjectURL(e))},g4=er($pt,"imageBlockConfigCtx");w1(g4,{displayName:"Config<image-block>",group:"ImageBlock"});function zpt(e){return _c(e,"paragraph",(t,r,n)=>{var i,s;if(((i=t.children)==null?void 0:i.length)!==1)return;const o=(s=t.children)==null?void 0:s[0];if(!o||o.type!=="image")return;const{url:a,alt:l,title:c}=o,h={type:"image-block",url:a,alt:l,title:c};n.children.splice(r,1,h)})}const b8=ia("remark-image-block",()=>()=>zpt);w1(b8.plugin,{displayName:"Remark<remarkImageBlock>",group:"ImageBlock"});w1(b8.options,{displayName:"RemarkConfig<remarkImageBlock>",group:"ImageBlock"});var Hpt=Object.defineProperty,gL=Object.getOwnPropertySymbols,qpt=Object.prototype.hasOwnProperty,Vpt=Object.prototype.propertyIsEnumerable,yL=(e,t,r)=>t in e?Hpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Wpt=(e,t)=>{for(var r in t||(t={}))qpt.call(t,r)&&yL(e,r,t[r]);if(gL)for(var r of gL(t))Vpt.call(t,r)&&yL(e,r,t[r]);return e};const AC="image-block",y4=$r("image-block",()=>({inline:!1,group:"block",selectable:!0,draggable:!0,isolating:!0,marks:"",atom:!0,priority:100,attrs:{src:{default:"",validate:"string"},caption:{default:"",validate:"string"},ratio:{default:1,validate:"number"}},parseDOM:[{tag:`img[data-type="${AC}"]`,getAttrs:e=>{var t;if(!(e instanceof HTMLElement))throw co(e);return{src:e.getAttribute("src")||"",caption:e.getAttribute("caption")||"",ratio:Number((t=e.getAttribute("ratio"))!=null?t:1)}}}],toDOM:e=>["img",Wpt({"data-type":AC},e.attrs)],parseMarkdown:{match:({type:e})=>e==="image-block",runner:(e,t,r)=>{const n=t.url,i=t.title;let s=Number(t.alt||1);(Number.isNaN(s)||s===0)&&(s=1),e.addNode(r,{src:n,caption:i,ratio:s})}},toMarkdown:{match:e=>e.type.name==="image-block",runner:(e,t)=>{e.openNode("paragraph"),e.addNode("image",void 0,void 0,{title:t.attrs.caption,url:t.attrs.src,alt:`${Number.parseFloat(t.attrs.ratio).toFixed(2)}`}),e.closeNode()}}}));w1(y4.node,{displayName:"NodeSchema<image-block>",group:"ImageBlock"});function dm({icon:e,class:t,onClick:r}){return et("span",{class:Cn("milkdown-icon",t),onPointerdown:r,ref:n=>{n&&e&&(n.innerHTML=cn.sanitize(e.trim()))}})}dm.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const jpt=rS("abcdefg",8),Upt=Sn({props:{src:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setLink:{type:Function,required:!0},imageIcon:{type:String,required:!1},uploadButton:{type:String,required:!1},confirmButton:{type:String,required:!1},uploadPlaceholderText:{type:String,required:!1},onUpload:{type:Function,required:!0}},setup({readonly:e,src:t,setLink:r,onUpload:n,imageIcon:i,uploadButton:s,confirmButton:o,uploadPlaceholderText:a,className:l}){var c,h;const u=zt(!1),f=zt(),d=zt((c=t.value)!=null?c:""),p=zt(jpt()),m=zt(((h=t.value)==null?void 0:h.length)!==0),g=T=>{const w=T.target.value;m.value=w.length!==0,d.value=w},y=T=>{var S,w;T.key==="Enter"&&r((w=(S=f.value)==null?void 0:S.value)!=null?w:"")},b=()=>{var T,S;r((S=(T=f.value)==null?void 0:T.value)!=null?S:"")},x=T=>{var S;const w=(S=T.target.files)==null?void 0:S[0];w&&n(w).then(_=>{_&&(r(_),m.value=!0)}).catch(_=>{console.error("An error occurred while uploading image"),console.error(_)})};return()=>et("div",{class:Cn("image-edit",l)},et(dm,{icon:i,class:"image-icon"}),et("div",{class:Cn("link-importer",u.value&&"focus")},et("input",{ref:f,draggable:"true",onDragstart:T=>{T.preventDefault(),T.stopPropagation()},disabled:e.value,class:"link-input-area",value:d.value,onInput:g,onKeydown:y,onFocus:()=>u.value=!0,onBlur:()=>u.value=!1}),!m.value&&et("div",{class:"placeholder"},et("input",{disabled:e.value,class:"hidden",id:p.value,type:"file",accept:"image/*",onChange:x}),et("label",{class:"uploader",for:p.value},et(dm,{icon:s})),et("span",{class:"text",onClick:()=>{var T;return(T=f.value)==null?void 0:T.focus()}},a))),d.value&&et("div",{class:"confirm",onClick:()=>b()},et(dm,{icon:o})))}}),Gpt=Sn({props:{src:{type:Object,required:!0},caption:{type:Object,required:!0},ratio:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup({src:e,caption:t,ratio:r,readonly:n,setAttr:i,config:s}){var o;const a=zt(),l=zt(),c=zt(!!((o=t.value)!=null&&o.length)),h=zt(0),u=()=>{var b;const x=a.value;if(!x)return;const T=x.closest(".milkdown-image-block");if(!T)return;const S=T.getBoundingClientRect().width;if(!S)return;const w=x.height,_=x.width,I=_<S?w:S*(w/_),N=(I*((b=r.value)!=null?b:1)).toFixed(2);x.dataset.origin=I.toFixed(2),x.dataset.height=N,x.style.height=`${N}px`},f=b=>{b.preventDefault(),b.stopPropagation(),!n.value&&(c.value=!c.value)},d=b=>{const T=b.target.value;h.value&&window.clearTimeout(h.value),h.value=window.setTimeout(()=>{i("caption",T)},1e3)},p=b=>{const T=b.target.value;h.value&&(window.clearTimeout(h.value),h.value=0),i("caption",T)},m=b=>{b.preventDefault();const x=a.value;if(!x)return;const T=x.getBoundingClientRect().top,S=b.clientY-T,w=Number(S<100?100:S).toFixed(2);x.dataset.height=w,x.style.height=`${w}px`},g=()=>{window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",g);const b=a.value;if(!b)return;const x=Number(b.dataset.origin),T=Number(b.dataset.height),S=Number.parseFloat(Number(T/x).toFixed(2));Number.isNaN(S)||i("ratio",S)},y=b=>{n.value||(b.preventDefault(),b.stopPropagation(),window.addEventListener("pointermove",m),window.addEventListener("pointerup",g))};return()=>et(xn,null,et("div",{class:"image-wrapper"},et("div",{class:"operation"},et("div",{class:"operation-item",onPointerdown:f},et(dm,{icon:s.captionIcon}))),et("img",{ref:a,"data-type":AC,onLoad:u,src:e.value,alt:t.value}),et("div",{ref:l,class:"image-resize-handle",onPointerdown:y})),c.value&&et("input",{draggable:"true",onDragstart:b=>{b.preventDefault(),b.stopPropagation()},class:"caption-input",placeholder:s==null?void 0:s.captionPlaceholderText,onInput:d,onBlur:p,value:t.value}))}});var Kpt=Object.defineProperty,bL=Object.getOwnPropertySymbols,Ypt=Object.prototype.hasOwnProperty,Xpt=Object.prototype.propertyIsEnumerable,xL=(e,t,r)=>t in e?Kpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Jpt=(e,t)=>{for(var r in t||(t={}))Ypt.call(t,r)&&xL(e,r,t[r]);if(bL)for(var r of bL(t))Xpt.call(t,r)&&xL(e,r,t[r]);return e};const Zpt=Sn({props:{src:{type:Object,required:!0},caption:{type:Object,required:!0},ratio:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup(e){const{src:t}=e;return()=>{var r;return(r=t.value)!=null&&r.length?et(Gpt,Jpt({},e)):et(Upt,{src:e.src,selected:e.selected,readonly:e.readonly,setLink:n=>e.setAttr("src",n),imageIcon:e.config.imageIcon,uploadButton:e.config.uploadButton,confirmButton:e.config.confirmButton,uploadPlaceholderText:e.config.uploadPlaceholderText,onUpload:e.config.onUpload})}}}),fz=f1(y4.node,e=>(t,r,n)=>{const i=zt(t.attrs.src),s=zt(t.attrs.caption),o=zt(t.attrs.ratio),a=zt(!1),l=zt(!r.editable),c=(g,y)=>{if(!r.editable)return;const b=n();b!=null&&r.dispatch(r.state.tr.setNodeAttribute(b,g,g==="src"?cn.sanitize(y):y))},h=e.get(g4.key),u=po(Zpt,{src:i,caption:s,ratio:o,selected:a,readonly:l,setAttr:c,config:h}),f=document.createElement("div");f.className="milkdown-image-block";const d=Gd(()=>{a.value?f.classList.add("selected"):f.classList.remove("selected")}),p=h.proxyDomURL,m=g=>{if(!p)i.value=g.attrs.src;else{const y=p(g.attrs.src);typeof y=="string"?i.value=y:y.then(b=>{i.value=b}).catch(console.error)}o.value=g.attrs.ratio,s.value=g.attrs.caption,l.value=!r.editable};return m(t),u.mount(f),{dom:f,update:g=>g.type!==t.type?!1:(m(g),!0),stopEvent:g=>g.target instanceof HTMLInputElement,selectNode:()=>{a.value=!0},deselectNode:()=>{a.value=!1},destroy:()=>{d(),u.unmount(),f.remove()}}});w1(fz,{displayName:"NodeView<image-block>",group:"ImageBlock"});const Qpt=[b8,y4,fz,g4].flat();var EC,LC;if(typeof WeakMap<"u"){let e=new WeakMap;EC=t=>e.get(t),LC=(t,r)=>(e.set(t,r),r)}else{const e=[];let r=0;EC=n=>{for(let i=0;i<e.length;i+=2)if(e[i]==n)return e[i+1]},LC=(n,i)=>(r==10&&(r=0),e[r++]=n,e[r++]=i)}var Je=class{constructor(e,t,r,n){this.width=e,this.height=t,this.map=r,this.problems=n}findCell(e){for(let t=0;t<this.map.length;t++){const r=this.map[t];if(r!=e)continue;const n=t%this.width,i=t/this.width|0;let s=n+1,o=i+1;for(let a=1;s<this.width&&this.map[t+a]==r;a++)s++;for(let a=1;o<this.height&&this.map[t+this.width*a]==r;a++)o++;return{left:n,top:i,right:s,bottom:o}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,r){const{left:n,right:i,top:s,bottom:o}=this.findCell(e);return t=="horiz"?(r<0?n==0:i==this.width)?null:this.map[s*this.width+(r<0?n-1:i)]:(r<0?s==0:o==this.height)?null:this.map[n+this.width*(r<0?s-1:o)]}rectBetween(e,t){const{left:r,right:n,top:i,bottom:s}=this.findCell(e),{left:o,right:a,top:l,bottom:c}=this.findCell(t);return{left:Math.min(r,o),top:Math.min(i,l),right:Math.max(n,a),bottom:Math.max(s,c)}}cellsInRect(e){const t=[],r={};for(let n=e.top;n<e.bottom;n++)for(let i=e.left;i<e.right;i++){const s=n*this.width+i,o=this.map[s];r[o]||(r[o]=!0,!(i==e.left&&i&&this.map[s-1]==o||n==e.top&&n&&this.map[s-this.width]==o)&&t.push(o))}return t}positionAt(e,t,r){for(let n=0,i=0;;n++){const s=i+r.child(n).nodeSize;if(n==e){let o=t+e*this.width;const a=(e+1)*this.width;for(;o<a&&this.map[o]<i;)o++;return o==a?s-1:this.map[o]}i=s}}static get(e){return EC(e)||LC(e,tmt(e))}};function tmt(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);const t=emt(e),r=e.childCount,n=[];let i=0,s=null;const o=[];for(let c=0,h=t*r;c<h;c++)n[c]=0;for(let c=0,h=0;c<r;c++){const u=e.child(c);h++;for(let p=0;;p++){for(;i<n.length&&n[i]!=0;)i++;if(p==u.childCount)break;const m=u.child(p),{colspan:g,rowspan:y,colwidth:b}=m.attrs;for(let x=0;x<y;x++){if(x+c>=r){(s||(s=[])).push({type:"overlong_rowspan",pos:h,n:y-x});break}const T=i+x*t;for(let S=0;S<g;S++){n[T+S]==0?n[T+S]=h:(s||(s=[])).push({type:"collision",row:c,pos:h,n:g-S});const w=b&&b[S];if(w){const _=(T+S)%t*2,I=o[_];I==null||I!=w&&o[_+1]==1?(o[_]=w,o[_+1]=1):I==w&&o[_+1]++}}}i+=g,h+=m.nodeSize}const f=(c+1)*t;let d=0;for(;i<f;)n[i++]==0&&d++;d&&(s||(s=[])).push({type:"missing",row:c,n:d}),h++}(t===0||r===0)&&(s||(s=[])).push({type:"zero_sized"});const a=new Je(t,r,n,s);let l=!1;for(let c=0;!l&&c<o.length;c+=2)o[c]!=null&&o[c+1]<r&&(l=!0);return l&&rmt(a,o,e),a}function emt(e){let t=-1,r=!1;for(let n=0;n<e.childCount;n++){const i=e.child(n);let s=0;if(r)for(let o=0;o<n;o++){const a=e.child(o);for(let l=0;l<a.childCount;l++){const c=a.child(l);o+c.attrs.rowspan>n&&(s+=c.attrs.colspan)}}for(let o=0;o<i.childCount;o++){const a=i.child(o);s+=a.attrs.colspan,a.attrs.rowspan>1&&(r=!0)}t==-1?t=s:t!=s&&(t=Math.max(t,s))}return t}function rmt(e,t,r){e.problems||(e.problems=[]);const n={};for(let i=0;i<e.map.length;i++){const s=e.map[i];if(n[s])continue;n[s]=!0;const o=r.nodeAt(s);if(!o)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=o.attrs;for(let c=0;c<l.colspan;c++){const h=(i+c)%e.width,u=t[h*2];u!=null&&(!l.colwidth||l.colwidth[c]!=u)&&((a||(a=nmt(l)))[c]=u)}a&&e.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function nmt(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let r=0;r<e.colspan;r++)t.push(0);return t}function vL(e,t){if(typeof e=="string")return{};const r=e.getAttribute("data-colwidth"),n=r&&/^\d+(,\d+)*$/.test(r)?r.split(",").map(o=>Number(o)):null,i=Number(e.getAttribute("colspan")||1),s={colspan:i,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:n&&n.length==i?n:null};for(const o in t){const a=t[o].getFromDOM,l=a&&a(e);l!=null&&(s[o]=l)}return s}function wL(e,t){const r={};e.attrs.colspan!=1&&(r.colspan=e.attrs.colspan),e.attrs.rowspan!=1&&(r.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(r["data-colwidth"]=e.attrs.colwidth.join(","));for(const n in t){const i=t[n].setDOMAttr;i&&i(e.attrs[n],r)}return r}function imt(e){if(e!==null){if(!Array.isArray(e))throw new TypeError("colwidth must be null or an array");for(const t of e)if(typeof t!="number")throw new TypeError("colwidth must be null or an array of numbers")}}function smt(e){const t=e.cellAttributes||{},r={colspan:{default:1,validate:"number"},rowspan:{default:1,validate:"number"},colwidth:{default:null,validate:imt}};for(const n in t)r[n]={default:t[n].default,validate:t[n].validate};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:e.cellContent,attrs:r,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:n=>vL(n,t)}],toDOM(n){return["td",wL(n,t),0]}},table_header:{content:e.cellContent,attrs:r,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:n=>vL(n,t)}],toDOM(n){return["th",wL(n,t),0]}}}}function Ms(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const r in e.nodes){const n=e.nodes[r],i=n.spec.tableRole;i&&(t[i]=n)}}return t}var Hl=new vr("selectingCells");function k1(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function Ds(e){const t=e.selection.$head;for(let r=t.depth;r>0;r--)if(t.node(r).type.spec.tableRole=="row")return!0;return!1}function b4(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&t.node.type.spec.tableRole=="cell")return t.$anchor;const r=k1(t.$head)||omt(t.$head);if(r)return r;throw new RangeError(`No cell found around position ${t.head}`)}function omt(e){for(let t=e.nodeAfter,r=e.pos;t;t=t.firstChild,r++){const n=t.type.spec.tableRole;if(n=="cell"||n=="header_cell")return e.doc.resolve(r)}for(let t=e.nodeBefore,r=e.pos;t;t=t.lastChild,r--){const n=t.type.spec.tableRole;if(n=="cell"||n=="header_cell")return e.doc.resolve(r-t.nodeSize)}}function OC(e){return e.parent.type.spec.tableRole=="row"&&!!e.nodeAfter}function amt(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function x8(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function dz(e,t,r){const n=e.node(-1),i=Je.get(n),s=e.start(-1),o=i.nextCell(e.pos-s,t,r);return o==null?null:e.node(0).resolve(s+o)}function cu(e,t,r=1){const n={...e,colspan:e.colspan-r};return n.colwidth&&(n.colwidth=n.colwidth.slice(),n.colwidth.splice(t,r),n.colwidth.some(i=>i>0)||(n.colwidth=null)),n}function lmt(e,t,r=1){const n={...e,colspan:e.colspan+r};if(n.colwidth){n.colwidth=n.colwidth.slice();for(let i=0;i<r;i++)n.colwidth.splice(t,0,0)}return n}function cmt(e,t,r){const n=Ms(t.type.schema).header_cell;for(let i=0;i<e.height;i++)if(t.nodeAt(e.map[r+i*e.width]).type!=n)return!1;return!0}var lr=class ka extends we{constructor(t,r=t){const n=t.node(-1),i=Je.get(n),s=t.start(-1),o=i.rectBetween(t.pos-s,r.pos-s),a=t.node(0),l=i.cellsInRect(o).filter(h=>h!=r.pos-s);l.unshift(r.pos-s);const c=l.map(h=>{const u=n.nodeAt(h);if(!u)throw RangeError(`No cell with offset ${h} found`);const f=s+h+1;return new EP(a.resolve(f),a.resolve(f+u.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=t,this.$headCell=r}map(t,r){const n=t.resolve(r.map(this.$anchorCell.pos)),i=t.resolve(r.map(this.$headCell.pos));if(OC(n)&&OC(i)&&x8(n,i)){const s=this.$anchorCell.node(-1)!=n.node(-1);return s&&this.isRowSelection()?ka.rowSelection(n,i):s&&this.isColSelection()?ka.colSelection(n,i):new ka(n,i)}return Gt.between(n,i)}content(){const t=this.$anchorCell.node(-1),r=Je.get(t),n=this.$anchorCell.start(-1),i=r.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),s={},o=[];for(let l=i.top;l<i.bottom;l++){const c=[];for(let h=l*r.width+i.left,u=i.left;u<i.right;u++,h++){const f=r.map[h];if(s[f])continue;s[f]=!0;const d=r.findCell(f);let p=t.nodeAt(f);if(!p)throw RangeError(`No cell with offset ${f} found`);const m=i.left-d.left,g=d.right-i.right;if(m>0||g>0){let y=p.attrs;if(m>0&&(y=cu(y,0,m)),g>0&&(y=cu(y,y.colspan-g,g)),d.left<i.left){if(p=p.type.createAndFill(y),!p)throw RangeError(`Could not create cell with attrs ${JSON.stringify(y)}`)}else p=p.type.create(y,p.content)}if(d.top<i.top||d.bottom>i.bottom){const y={...p.attrs,rowspan:Math.min(d.bottom,i.bottom)-Math.max(d.top,i.top)};d.top<i.top?p=p.type.createAndFill(y):p=p.type.create(y,p.content)}c.push(p)}o.push(t.child(l).copy(Ct.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?t:o;return new Bt(Ct.from(a),1,1)}replace(t,r=Bt.empty){const n=t.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){const{$from:a,$to:l}=i[o],c=t.mapping.slice(n);t.replace(c.map(a.pos),c.map(l.pos),o?Bt.empty:r)}const s=we.findFrom(t.doc.resolve(t.mapping.slice(n).map(this.to)),-1);s&&t.setSelection(s)}replaceWith(t,r){this.replace(t,new Bt(Ct.from(r),0,0))}forEachCell(t){const r=this.$anchorCell.node(-1),n=Je.get(r),i=this.$anchorCell.start(-1),s=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let o=0;o<s.length;o++)t(r.nodeAt(s[o]),i+s[o])}isColSelection(){const t=this.$anchorCell.index(-1),r=this.$headCell.index(-1);if(Math.min(t,r)>0)return!1;const n=t+this.$anchorCell.nodeAfter.attrs.rowspan,i=r+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,i)==this.$headCell.node(-1).childCount}static colSelection(t,r=t){const n=t.node(-1),i=Je.get(n),s=t.start(-1),o=i.findCell(t.pos-s),a=i.findCell(r.pos-s),l=t.node(0);return o.top<=a.top?(o.top>0&&(t=l.resolve(s+i.map[o.left])),a.bottom<i.height&&(r=l.resolve(s+i.map[i.width*(i.height-1)+a.right-1]))):(a.top>0&&(r=l.resolve(s+i.map[a.left])),o.bottom<i.height&&(t=l.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))),new ka(t,r)}isRowSelection(){const t=this.$anchorCell.node(-1),r=Je.get(t),n=this.$anchorCell.start(-1),i=r.colCount(this.$anchorCell.pos-n),s=r.colCount(this.$headCell.pos-n);if(Math.min(i,s)>0)return!1;const o=i+this.$anchorCell.nodeAfter.attrs.colspan,a=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,a)==r.width}eq(t){return t instanceof ka&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,r=t){const n=t.node(-1),i=Je.get(n),s=t.start(-1),o=i.findCell(t.pos-s),a=i.findCell(r.pos-s),l=t.node(0);return o.left<=a.left?(o.left>0&&(t=l.resolve(s+i.map[o.top*i.width])),a.right<i.width&&(r=l.resolve(s+i.map[i.width*(a.top+1)-1]))):(a.left>0&&(r=l.resolve(s+i.map[a.top*i.width])),o.right<i.width&&(t=l.resolve(s+i.map[i.width*(o.top+1)-1]))),new ka(t,r)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,r){return new ka(t.resolve(r.anchor),t.resolve(r.head))}static create(t,r,n=r){return new ka(t.resolve(r),t.resolve(n))}getBookmark(){return new hmt(this.$anchorCell.pos,this.$headCell.pos)}};lr.prototype.visible=!1;we.jsonID("cell",lr);var hmt=class pz{constructor(t,r){this.anchor=t,this.head=r}map(t){return new pz(t.map(this.anchor),t.map(this.head))}resolve(t){const r=t.resolve(this.anchor),n=t.resolve(this.head);return r.parent.type.spec.tableRole=="row"&&n.parent.type.spec.tableRole=="row"&&r.index()<r.parent.childCount&&n.index()<n.parent.childCount&&x8(r,n)?new lr(r,n):we.near(n,1)}};function umt(e){if(!(e.selection instanceof lr))return null;const t=[];return e.selection.forEachCell((r,n)=>{t.push(jr.node(n,n+r.nodeSize,{class:"selectedCell"}))}),or.create(e.doc,t)}function fmt({$from:e,$to:t}){if(e.pos==t.pos||e.pos<t.pos-6)return!1;let r=e.pos,n=t.pos,i=e.depth;for(;i>=0&&!(e.after(i+1)<e.end(i));i--,r++);for(let s=t.depth;s>=0&&!(t.before(s+1)>t.start(s));s--,n--);return r==n&&/row|table/.test(e.node(i).type.spec.tableRole)}function dmt({$from:e,$to:t}){let r,n;for(let i=e.depth;i>0;i--){const s=e.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}for(let i=t.depth;i>0;i--){const s=t.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}return r!==n&&t.parentOffset===0}function pmt(e,t,r){const n=(t||e).selection,i=(t||e).doc;let s,o;if(n instanceof ie&&(o=n.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")s=lr.create(i,n.from);else if(o=="row"){const a=i.resolve(n.from+1);s=lr.rowSelection(a,a)}else if(!r){const a=Je.get(n.node),l=n.from+1,c=l+a.map[a.width*a.height-1];s=lr.create(i,l+1,c)}}else n instanceof Gt&&fmt(n)?s=Gt.create(i,n.from):n instanceof Gt&&dmt(n)&&(s=Gt.create(i,n.$from.start(),n.$from.end()));return s&&(t||(t=e.tr)).setSelection(s),t}var mmt=new vr("fix-tables");function mz(e,t,r,n){const i=e.childCount,s=t.childCount;t:for(let o=0,a=0;o<s;o++){const l=t.child(o);for(let c=a,h=Math.min(i,o+3);c<h;c++)if(e.child(c)==l){a=c+1,r+=l.nodeSize;continue t}n(l,r),a<i&&e.child(a).sameMarkup(l)?mz(e.child(a),l,r+1,n):l.nodesBetween(0,l.content.size,n,r+1),r+=l.nodeSize}}function gmt(e,t){let r;const n=(i,s)=>{i.type.spec.tableRole=="table"&&(r=ymt(e,i,s,r))};return t?t.doc!=e.doc&&mz(t.doc,e.doc,0,n):e.doc.descendants(n),r}function ymt(e,t,r,n){const i=Je.get(t);if(!i.problems)return n;n||(n=e.tr);const s=[];for(let l=0;l<i.height;l++)s.push(0);for(let l=0;l<i.problems.length;l++){const c=i.problems[l];if(c.type=="collision"){const h=t.nodeAt(c.pos);if(!h)continue;const u=h.attrs;for(let f=0;f<u.rowspan;f++)s[c.row+f]+=c.n;n.setNodeMarkup(n.mapping.map(r+1+c.pos),null,cu(u,u.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const h=t.nodeAt(c.pos);if(!h)continue;n.setNodeMarkup(n.mapping.map(r+1+c.pos),null,{...h.attrs,rowspan:h.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const h=t.nodeAt(c.pos);if(!h)continue;n.setNodeMarkup(n.mapping.map(r+1+c.pos),null,{...h.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const h=n.mapping.map(r);n.delete(h,h+t.nodeSize)}}let o,a;for(let l=0;l<s.length;l++)s[l]&&(o==null&&(o=l),a=l);for(let l=0,c=r+1;l<i.height;l++){const h=t.child(l),u=c+h.nodeSize,f=s[l];if(f>0){let d="cell";h.firstChild&&(d=h.firstChild.type.spec.tableRole);const p=[];for(let g=0;g<f;g++){const y=Ms(e.schema)[d].createAndFill();y&&p.push(y)}const m=(l==0||o==l-1)&&a==l?c+1:u-1;n.insert(n.mapping.map(m),p)}c=u}return n.setMeta(mmt,{fixTables:!0})}function gz(e){const t=Je.get(e),r=[],n=t.height,i=t.width;for(let s=0;s<n;s++){const o=[];for(let a=0;a<i;a++){const l=s*i+a,c=t.map[l];if(s>0){const h=l-i,u=t.map[h];if(c===u){o.push(null);continue}}if(a>0){const h=l-1,u=t.map[h];if(c===u){o.push(null);continue}}o.push(e.nodeAt(c))}r.push(o)}return r}function yz(e,t){const r=[],n=Je.get(e),i=n.height,s=n.width;for(let a=0;a<i;a++){const l=e.child(a),c=[];for(let u=0;u<s;u++){const f=t[a][u];if(!f)continue;const d=n.map[a*n.width+u],p=e.nodeAt(d);if(!p)continue;const m=p.type.createChecked(f.attrs,f.content,f.marks);c.push(m)}const h=l.type.createChecked(l.attrs,c,l.marks);r.push(h)}return e.type.createChecked(e.attrs,r,e.marks)}function Kd(e){return bmt(t=>t.type.spec.tableRole==="table",e)}function bmt(e,t){for(let r=t.depth;r>=0;r-=1){const n=t.node(r);if(e(n)){const i=r===0?0:t.before(r),s=t.start(r);return{node:n,pos:i,start:s,depth:r}}}return null}function Gu(e,t){const r=Kd(t.$from);if(!r)return;const n=Je.get(r.node);return e<0||e>n.width-1?void 0:n.cellsInRect({left:e,right:e+1,top:0,bottom:n.height}).map(s=>{const o=r.node.nodeAt(s),a=s+r.start;return{pos:a,start:a+1,node:o,depth:r.depth+2}})}function Ku(e,t){const r=Kd(t.$from);if(!r)return;const n=Je.get(r.node);return e<0||e>n.height-1?void 0:n.cellsInRect({left:0,right:n.width,top:e,bottom:e+1}).map(s=>{const o=r.node.nodeAt(s),a=s+r.start;return{pos:a,start:a+1,node:o,depth:r.depth+2}})}function kL(e,t,r=t){let n=t,i=r;for(let u=t;u>=0;u--){const f=Gu(u,e.selection);f&&f.forEach(d=>{const p=d.node.attrs.colspan+u-1;p>=n&&(n=u),p>i&&(i=p)})}for(let u=t;u<=i;u++){const f=Gu(u,e.selection);f&&f.forEach(d=>{const p=d.node.attrs.colspan+u-1;d.node.attrs.colspan>1&&p>i&&(i=p)})}const s=[];for(let u=n;u<=i;u++){const f=Gu(u,e.selection);f&&f.length>0&&s.push(u)}n=s[0],i=s[s.length-1];const o=Gu(n,e.selection),a=Ku(0,e.selection);if(!o||!a)return;const l=e.doc.resolve(o[o.length-1].pos);let c;for(let u=i;u>=n;u--){const f=Gu(u,e.selection);if(f&&f.length>0){for(let d=a.length-1;d>=0;d--)if(a[d].pos===f[0].pos){c=f[0];break}if(c)break}}if(!c)return;const h=e.doc.resolve(c.pos);return{$anchor:l,$head:h,indexes:s}}function CL(e,t,r=t){let n=t,i=r;for(let u=t;u>=0;u--){const f=Ku(u,e.selection);f&&f.forEach(d=>{const p=d.node.attrs.rowspan+u-1;p>=n&&(n=u),p>i&&(i=p)})}for(let u=t;u<=i;u++){const f=Ku(u,e.selection);f&&f.forEach(d=>{const p=d.node.attrs.rowspan+u-1;d.node.attrs.rowspan>1&&p>i&&(i=p)})}const s=[];for(let u=n;u<=i;u++){const f=Ku(u,e.selection);f&&f.length>0&&s.push(u)}n=s[0],i=s[s.length-1];const o=Ku(n,e.selection),a=Gu(0,e.selection);if(!o||!a)return;const l=e.doc.resolve(o[o.length-1].pos);let c;for(let u=i;u>=n;u--){const f=Ku(u,e.selection);if(f&&f.length>0){for(let d=a.length-1;d>=0;d--)if(a[d].pos===f[0].pos){c=f[0];break}if(c)break}}if(!c)return;const h=e.doc.resolve(c.pos);return{$anchor:l,$head:h,indexes:s}}function bz(e,t,r,n){const i=t[0]>r[0]?-1:1,s=e.splice(t[0],t.length),o=s.length%2===0?1:0;let a;return a=i===-1?r[0]:r[r.length-1]-o,e.splice(a,0,...s),e}function SL(e){return e[0].map((t,r)=>e.map(n=>n[r]))}function xmt(e){var t,r;const{tr:n,originIndex:i,targetIndex:s,select:o,pos:a}=e,l=n.doc.resolve(a),c=Kd(l);if(!c)return!1;const h=(t=kL(n,i))==null?void 0:t.indexes,u=(r=kL(n,s))==null?void 0:r.indexes;if(!h||!u||h.includes(s))return!1;const f=vmt(c.node,h,u);if(n.replaceWith(c.pos,c.pos+c.node.nodeSize,f),!o)return!0;const d=Je.get(f),p=c.start,m=s,g=d.positionAt(d.height-1,m,f),y=n.doc.resolve(p+g),b=d.positionAt(0,m,f),x=n.doc.resolve(p+b);return n.setSelection(lr.colSelection(y,x)),!0}function vmt(e,t,r,n){let i=SL(gz(e));return i=bz(i,t,r),i=SL(i),yz(e,i)}function wmt(e){var t,r;const{tr:n,originIndex:i,targetIndex:s,select:o,pos:a}=e,l=n.doc.resolve(a),c=Kd(l);if(!c)return!1;const h=(t=CL(n,i))==null?void 0:t.indexes,u=(r=CL(n,s))==null?void 0:r.indexes;if(!h||!u||h.includes(s))return!1;const f=kmt(c.node,h,u);if(n.replaceWith(c.pos,c.pos+c.node.nodeSize,f),!o)return!0;const d=Je.get(f),p=c.start,m=s,g=d.positionAt(m,d.width-1,f),y=n.doc.resolve(p+g),b=d.positionAt(m,0,f),x=n.doc.resolve(p+b);return n.setSelection(lr.rowSelection(y,x)),!0}function kmt(e,t,r,n){let i=gz(e);return i=bz(i,t,r),yz(e,i)}function Ac(e){const t=e.selection,r=b4(e),n=r.node(-1),i=r.start(-1),s=Je.get(n);return{...t instanceof lr?s.rectBetween(t.$anchorCell.pos-i,t.$headCell.pos-i):s.findCell(r.pos-i),tableStart:i,map:s,table:n}}function xz(e,{map:t,tableStart:r,table:n},i){let s=i>0?-1:0;cmt(t,n,i+s)&&(s=i==0||i==t.width?null:0);for(let o=0;o<t.height;o++){const a=o*t.width+i;if(i>0&&i<t.width&&t.map[a-1]==t.map[a]){const l=t.map[a],c=n.nodeAt(l);e.setNodeMarkup(e.mapping.map(r+l),null,lmt(c.attrs,i-t.colCount(l))),o+=c.attrs.rowspan-1}else{const l=s==null?Ms(n.type.schema).cell:n.nodeAt(t.map[a+s]).type,c=t.positionAt(o,i,n);e.insert(e.mapping.map(r+c),l.createAndFill())}}return e}function Cmt(e,t){if(!Ds(e))return!1;if(t){const r=Ac(e);t(xz(e.tr,r,r.left))}return!0}function Smt(e,t){if(!Ds(e))return!1;if(t){const r=Ac(e);t(xz(e.tr,r,r.right))}return!0}function Tmt(e,{map:t,table:r,tableStart:n},i){const s=e.mapping.maps.length;for(let o=0;o<t.height;){const a=o*t.width+i,l=t.map[a],c=r.nodeAt(l),h=c.attrs;if(i>0&&t.map[a-1]==l||i<t.width-1&&t.map[a+1]==l)e.setNodeMarkup(e.mapping.slice(s).map(n+l),null,cu(h,i-t.colCount(l)));else{const u=e.mapping.slice(s).map(n+l);e.delete(u,u+c.nodeSize)}o+=h.rowspan}}function _mt(e,t){if(!Ds(e))return!1;if(t){const r=Ac(e),n=e.tr;if(r.left==0&&r.right==r.map.width)return!1;for(let i=r.right-1;Tmt(n,r,i),i!=r.left;i--){const s=r.tableStart?n.doc.nodeAt(r.tableStart-1):n.doc;if(!s)throw RangeError("No table found");r.table=s,r.map=Je.get(s)}t(n)}return!0}function Mmt(e,{map:t,table:r,tableStart:n},i){let s=0;for(let c=0;c<i;c++)s+=r.child(c).nodeSize;const o=s+r.child(i).nodeSize,a=e.mapping.maps.length;e.delete(s+n,o+n);const l=new Set;for(let c=0,h=i*t.width;c<t.width;c++,h++){const u=t.map[h];if(!l.has(u)){if(l.add(u),i>0&&u==t.map[h-t.width]){const f=r.nodeAt(u).attrs;e.setNodeMarkup(e.mapping.slice(a).map(u+n),null,{...f,rowspan:f.rowspan-1}),c+=f.colspan-1}else if(i<t.height&&u==t.map[h+t.width]){const f=r.nodeAt(u),d=f.attrs,p=f.type.create({...d,rowspan:f.attrs.rowspan-1},f.content),m=t.positionAt(i+1,c,r);e.insert(e.mapping.slice(a).map(n+m),p),c+=d.colspan-1}}}}function Amt(e,t){if(!Ds(e))return!1;if(t){const r=Ac(e),n=e.tr;if(r.top==0&&r.bottom==r.map.height)return!1;for(let i=r.bottom-1;Mmt(n,r,i),i!=r.top;i--){const s=r.tableStart?n.doc.nodeAt(r.tableStart-1):n.doc;if(!s)throw RangeError("No table found");r.table=s,r.map=Je.get(r.table)}t(n)}return!0}function Emt(e,t){return function(r,n){if(!Ds(r))return!1;const i=b4(r);if(i.nodeAfter.attrs[e]===t)return!1;if(n){const s=r.tr;r.selection instanceof lr?r.selection.forEachCell((o,a)=>{o.attrs[e]!==t&&s.setNodeMarkup(a,null,{...o.attrs,[e]:t})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[e]:t}),n(s)}return!0}}function Lmt(e){return function(t,r){if(!Ds(t))return!1;if(r){const n=Ms(t.schema),i=Ac(t),s=t.tr,o=i.map.cellsInRect(e=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:e=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),a=o.map(l=>i.table.nodeAt(l));for(let l=0;l<o.length;l++)a[l].type==n.header_cell&&s.setNodeMarkup(i.tableStart+o[l],n.cell,a[l].attrs);if(s.steps.length==0)for(let l=0;l<o.length;l++)s.setNodeMarkup(i.tableStart+o[l],n.header_cell,a[l].attrs);r(s)}return!0}}function TL(e,t,r){const n=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1});for(let i=0;i<n.length;i++){const s=t.table.nodeAt(n[i]);if(s&&s.type!==r.header_cell)return!1}return!0}function v8(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?Lmt(e):function(r,n){if(!Ds(r))return!1;if(n){const i=Ms(r.schema),s=Ac(r),o=r.tr,a=TL("row",s,i),l=TL("column",s,i),h=(e==="column"?a:e==="row"?l:!1)?1:0,u=e=="column"?{left:0,top:h,right:1,bottom:s.map.height}:e=="row"?{left:h,top:0,right:s.map.width,bottom:1}:s,f=e=="column"?l?i.cell:i.header_cell:e=="row"?a?i.cell:i.header_cell:i.cell;s.map.cellsInRect(u).forEach(d=>{const p=d+s.tableStart,m=o.doc.nodeAt(p);m&&o.setNodeMarkup(p,f,m.attrs)}),n(o)}return!0}}v8("row",{useDeprecatedLogic:!0});v8("column",{useDeprecatedLogic:!0});v8("cell",{useDeprecatedLogic:!0});function Omt(e,t){if(t<0){const r=e.nodeBefore;if(r)return e.pos-r.nodeSize;for(let n=e.index(-1)-1,i=e.before();n>=0;n--){const s=e.node(-1).child(n),o=s.lastChild;if(o)return i-1-o.nodeSize;i-=s.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const r=e.node(-1);for(let n=e.indexAfter(-1),i=e.after();n<r.childCount;n++){const s=r.child(n);if(s.childCount)return i+1;i+=s.nodeSize}}return null}function vz(e){return function(t,r){if(!Ds(t))return!1;const n=Omt(b4(t),e);if(n==null)return!1;if(r){const i=t.doc.resolve(n);r(t.tr.setSelection(Gt.between(i,amt(i))).scrollIntoView())}return!0}}function Dmt(e,t){const r=e.selection.$anchor;for(let n=r.depth;n>0;n--)if(r.node(n).type.spec.tableRole=="table")return t&&t(e.tr.delete(r.before(n),r.after(n)).scrollIntoView()),!0;return!1}function Ey(e,t){const r=e.selection;if(!(r instanceof lr))return!1;if(t){const n=e.tr,i=Ms(e.schema).cell.createAndFill().content;r.forEachCell((s,o)=>{s.content.eq(i)||n.replace(n.mapping.map(o+1),n.mapping.map(o+s.nodeSize-1),new Bt(i,0,0))}),n.docChanged&&t(n)}return!0}function Imt(e){return(t,r)=>{const{from:n,to:i,select:s=!0,pos:o=t.selection.from}=e,a=t.tr;return wmt({tr:a,originIndex:n,targetIndex:i,select:s,pos:o})?(r==null||r(a),!0):!1}}function Bmt(e){return(t,r)=>{const{from:n,to:i,select:s=!0,pos:o=t.selection.from}=e,a=t.tr;return xmt({tr:a,originIndex:n,targetIndex:i,select:s,pos:o})?(r==null||r(a),!0):!1}}function Rmt(e){if(!e.size)return null;let{content:t,openStart:r,openEnd:n}=e;for(;t.childCount==1&&(r>0&&n>0||t.child(0).type.spec.tableRole=="table");)r--,n--,t=t.child(0).content;const i=t.child(0),s=i.type.spec.tableRole,o=i.type.schema,a=[];if(s=="row")for(let l=0;l<t.childCount;l++){let c=t.child(l).content;const h=l?0:Math.max(0,r-1),u=l<t.childCount-1?0:Math.max(0,n-1);(h||u)&&(c=DC(Ms(o).row,new Bt(c,h,u)).content),a.push(c)}else if(s=="cell"||s=="header_cell")a.push(r||n?DC(Ms(o).row,new Bt(t,r,n)).content:t);else return null;return Pmt(o,a)}function Pmt(e,t){const r=[];for(let i=0;i<t.length;i++){const s=t[i];for(let o=s.childCount-1;o>=0;o--){const{rowspan:a,colspan:l}=s.child(o).attrs;for(let c=i;c<i+a;c++)r[c]=(r[c]||0)+l}}let n=0;for(let i=0;i<r.length;i++)n=Math.max(n,r[i]);for(let i=0;i<r.length;i++)if(i>=t.length&&t.push(Ct.empty),r[i]<n){const s=Ms(e).cell.createAndFill(),o=[];for(let a=r[i];a<n;a++)o.push(s);t[i]=t[i].append(Ct.from(o))}return{height:t.length,width:n,rows:t}}function DC(e,t){const r=e.createAndFill();return new AP(r).replace(0,r.content.size,t).doc}function Nmt({width:e,height:t,rows:r},n,i){if(e!=n){const s=[],o=[];for(let a=0;a<r.length;a++){const l=r[a],c=[];for(let h=s[a]||0,u=0;h<n;u++){let f=l.child(u%l.childCount);h+f.attrs.colspan>n&&(f=f.type.createChecked(cu(f.attrs,f.attrs.colspan,h+f.attrs.colspan-n),f.content)),c.push(f),h+=f.attrs.colspan;for(let d=1;d<f.attrs.rowspan;d++)s[a+d]=(s[a+d]||0)+f.attrs.colspan}o.push(Ct.from(c))}r=o,e=n}if(t!=i){const s=[];for(let o=0,a=0;o<i;o++,a++){const l=[],c=r[a%t];for(let h=0;h<c.childCount;h++){let u=c.child(h);o+u.attrs.rowspan>i&&(u=u.type.create({...u.attrs,rowspan:Math.max(1,i-u.attrs.rowspan)},u.content)),l.push(u)}s.push(Ct.from(l))}r=s,t=i}return{width:e,height:t,rows:r}}function Fmt(e,t,r,n,i,s,o){const a=e.doc.type.schema,l=Ms(a);let c,h;if(i>t.width)for(let u=0,f=0;u<t.height;u++){const d=r.child(u);f+=d.nodeSize;const p=[];let m;d.lastChild==null||d.lastChild.type==l.cell?m=c||(c=l.cell.createAndFill()):m=h||(h=l.header_cell.createAndFill());for(let g=t.width;g<i;g++)p.push(m);e.insert(e.mapping.slice(o).map(f-1+n),p)}if(s>t.height){const u=[];for(let p=0,m=(t.height-1)*t.width;p<Math.max(t.width,i);p++){const g=p>=t.width?!1:r.nodeAt(t.map[m+p]).type==l.header_cell;u.push(g?h||(h=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const f=l.row.create(null,Ct.from(u)),d=[];for(let p=t.height;p<s;p++)d.push(f);e.insert(e.mapping.slice(o).map(n+r.nodeSize-2),d)}return!!(c||h)}function _L(e,t,r,n,i,s,o,a){if(o==0||o==t.height)return!1;let l=!1;for(let c=i;c<s;c++){const h=o*t.width+c,u=t.map[h];if(t.map[h-t.width]==u){l=!0;const f=r.nodeAt(u),{top:d,left:p}=t.findCell(u);e.setNodeMarkup(e.mapping.slice(a).map(u+n),null,{...f.attrs,rowspan:o-d}),e.insert(e.mapping.slice(a).map(t.positionAt(o,p,r)),f.type.createAndFill({...f.attrs,rowspan:d+f.attrs.rowspan-o})),c+=f.attrs.colspan-1}}return l}function ML(e,t,r,n,i,s,o,a){if(o==0||o==t.width)return!1;let l=!1;for(let c=i;c<s;c++){const h=c*t.width+o,u=t.map[h];if(t.map[h-1]==u){l=!0;const f=r.nodeAt(u),d=t.colCount(u),p=e.mapping.slice(a).map(u+n);e.setNodeMarkup(p,null,cu(f.attrs,o-d,f.attrs.colspan-(o-d))),e.insert(p+f.nodeSize,f.type.createAndFill(cu(f.attrs,0,o-d))),c+=f.attrs.rowspan-1}}return l}function AL(e,t,r,n,i){let s=r?e.doc.nodeAt(r-1):e.doc;if(!s)throw new Error("No table found");let o=Je.get(s);const{top:a,left:l}=n,c=l+i.width,h=a+i.height,u=e.tr;let f=0;function d(){if(s=r?u.doc.nodeAt(r-1):u.doc,!s)throw new Error("No table found");o=Je.get(s),f=u.mapping.maps.length}Fmt(u,o,s,r,c,h,f)&&d(),_L(u,o,s,r,l,c,a,f)&&d(),_L(u,o,s,r,l,c,h,f)&&d(),ML(u,o,s,r,a,h,l,f)&&d(),ML(u,o,s,r,a,h,c,f)&&d();for(let p=a;p<h;p++){const m=o.positionAt(p,l,s),g=o.positionAt(p,c,s);u.replace(u.mapping.slice(f).map(m+r),u.mapping.slice(f).map(g+r),new Bt(i.rows[p-a],0,0))}d(),u.setSelection(new lr(u.doc.resolve(r+o.positionAt(a,l,s)),u.doc.resolve(r+o.positionAt(h-1,c-1,s)))),t(u)}var $mt=j7({ArrowLeft:Ly("horiz",-1),ArrowRight:Ly("horiz",1),ArrowUp:Ly("vert",-1),ArrowDown:Ly("vert",1),"Shift-ArrowLeft":Oy("horiz",-1),"Shift-ArrowRight":Oy("horiz",1),"Shift-ArrowUp":Oy("vert",-1),"Shift-ArrowDown":Oy("vert",1),Backspace:Ey,"Mod-Backspace":Ey,Delete:Ey,"Mod-Delete":Ey});function U2(e,t,r){return r.eq(e.selection)?!1:(t&&t(e.tr.setSelection(r).scrollIntoView()),!0)}function Ly(e,t){return(r,n,i)=>{if(!i)return!1;const s=r.selection;if(s instanceof lr)return U2(r,n,we.near(s.$headCell,t));if(e!="horiz"&&!s.empty)return!1;const o=wz(i,e,t);if(o==null)return!1;if(e=="horiz")return U2(r,n,we.near(r.doc.resolve(s.head+t),t));{const a=r.doc.resolve(o),l=dz(a,e,t);let c;return l?c=we.near(l,1):t<0?c=we.near(r.doc.resolve(a.before(-1)),-1):c=we.near(r.doc.resolve(a.after(-1)),1),U2(r,n,c)}}}function Oy(e,t){return(r,n,i)=>{if(!i)return!1;const s=r.selection;let o;if(s instanceof lr)o=s;else{const l=wz(i,e,t);if(l==null)return!1;o=new lr(r.doc.resolve(l))}const a=dz(o.$headCell,e,t);return a?U2(r,n,new lr(o.$anchorCell,a)):!1}}function zmt(e,t){const r=e.state.doc,n=k1(r.resolve(t));return n?(e.dispatch(e.state.tr.setSelection(new lr(n))),!0):!1}function Hmt(e,t,r){if(!Ds(e.state))return!1;let n=Rmt(r);const i=e.state.selection;if(i instanceof lr){n||(n={width:1,height:1,rows:[Ct.from(DC(Ms(e.state.schema).cell,r))]});const s=i.$anchorCell.node(-1),o=i.$anchorCell.start(-1),a=Je.get(s).rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o);return n=Nmt(n,a.right-a.left,a.bottom-a.top),AL(e.state,e.dispatch,o,a,n),!0}else if(n){const s=b4(e.state),o=s.start(-1);return AL(e.state,e.dispatch,o,Je.get(s.node(-1)).findCell(s.pos-o),n),!0}else return!1}function qmt(e,t){var r;if(t.ctrlKey||t.metaKey)return;const n=EL(e,t.target);let i;if(t.shiftKey&&e.state.selection instanceof lr)s(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&n&&(i=k1(e.state.selection.$anchor))!=null&&((r=R5(e,t))==null?void 0:r.pos)!=i.pos)s(i,t),t.preventDefault();else if(!n)return;function s(l,c){let h=R5(e,c);const u=Hl.getState(e.state)==null;if(!h||!x8(l,h))if(u)h=l;else return;const f=new lr(l,h);if(u||!e.state.selection.eq(f)){const d=e.state.tr.setSelection(f);u&&d.setMeta(Hl,l.pos),e.dispatch(d)}}function o(){e.root.removeEventListener("mouseup",o),e.root.removeEventListener("dragstart",o),e.root.removeEventListener("mousemove",a),Hl.getState(e.state)!=null&&e.dispatch(e.state.tr.setMeta(Hl,-1))}function a(l){const c=l,h=Hl.getState(e.state);let u;if(h!=null)u=e.state.doc.resolve(h);else if(EL(e,c.target)!=n&&(u=R5(e,t),!u))return o();u&&s(u,c)}e.root.addEventListener("mouseup",o),e.root.addEventListener("dragstart",o),e.root.addEventListener("mousemove",a)}function wz(e,t,r){if(!(e.state.selection instanceof Gt))return null;const{$head:n}=e.state.selection;for(let i=n.depth-1;i>=0;i--){const s=n.node(i);if((r<0?n.index(i):n.indexAfter(i))!=(r<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const a=n.before(i),l=t=="vert"?r>0?"down":"up":r>0?"right":"left";return e.endOfTextblock(l)?a:null}}return null}function EL(e,t){for(;t&&t!=e.dom;t=t.parentNode)if(t.nodeName=="TD"||t.nodeName=="TH")return t;return null}function R5(e,t){const r=e.posAtCoords({left:t.clientX,top:t.clientY});return r&&r?k1(e.state.doc.resolve(r.pos)):null}var Vmt=class{constructor(e,t){this.node=e,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${t}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),IC(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,IC(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function IC(e,t,r,n,i,s){var o;let a=0,l=!0,c=t.firstChild;const h=e.firstChild;if(h){for(let u=0,f=0;u<h.childCount;u++){const{colspan:d,colwidth:p}=h.child(u).attrs;for(let m=0;m<d;m++,f++){const g=i==f?s:p&&p[m],y=g?g+"px":"";if(a+=g||n,g||(l=!1),c)c.style.width!=y&&(c.style.width=y),c=c.nextSibling;else{const b=document.createElement("col");b.style.width=y,t.appendChild(b)}}}for(;c;){const u=c.nextSibling;(o=c.parentNode)==null||o.removeChild(c),c=u}l?(r.style.width=a+"px",r.style.minWidth=""):(r.style.width="",r.style.minWidth=a+"px")}}var Yi=new vr("tableColumnResizing");function Wmt({handleWidth:e=5,cellMinWidth:t=25,defaultCellMinWidth:r=100,View:n=Vmt,lastColumnResizable:i=!0}={}){const s=new xr({key:Yi,state:{init(o,a){var l,c;const h=(c=(l=s.spec)==null?void 0:l.props)==null?void 0:c.nodeViews,u=Ms(a.schema).table.name;return n&&h&&(h[u]=(f,d)=>new n(f,r,d)),new jmt(-1,!1)},apply(o,a){return a.apply(o)}},props:{attributes:o=>{const a=Yi.getState(o);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,a)=>{Umt(o,a,e,i)},mouseleave:o=>{Gmt(o)},mousedown:(o,a)=>{Kmt(o,a,t,r)}},decorations:o=>{const a=Yi.getState(o);if(a&&a.activeHandle>-1)return Qmt(o,a.activeHandle)},nodeViews:{}}});return s}var jmt=class G2{constructor(t,r){this.activeHandle=t,this.dragging=r}apply(t){const r=this,n=t.getMeta(Yi);if(n&&n.setHandle!=null)return new G2(n.setHandle,!1);if(n&&n.setDragging!==void 0)return new G2(r.activeHandle,n.setDragging);if(r.activeHandle>-1&&t.docChanged){let i=t.mapping.map(r.activeHandle,-1);return OC(t.doc.resolve(i))||(i=-1),new G2(i,r.dragging)}return r}};function Umt(e,t,r,n){if(!e.editable)return;const i=Yi.getState(e.state);if(i&&!i.dragging){const s=Xmt(t.target);let o=-1;if(s){const{left:a,right:l}=s.getBoundingClientRect();t.clientX-a<=r?o=LL(e,t,"left",r):l-t.clientX<=r&&(o=LL(e,t,"right",r))}if(o!=i.activeHandle){if(!n&&o!==-1){const a=e.state.doc.resolve(o),l=a.node(-1),c=Je.get(l),h=a.start(-1);if(c.colCount(a.pos-h)+a.nodeAfter.attrs.colspan-1==c.width-1)return}kz(e,o)}}}function Gmt(e){if(!e.editable)return;const t=Yi.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&kz(e,-1)}function Kmt(e,t,r,n){var i;if(!e.editable)return!1;const s=(i=e.dom.ownerDocument.defaultView)!=null?i:window,o=Yi.getState(e.state);if(!o||o.activeHandle==-1||o.dragging)return!1;const a=e.state.doc.nodeAt(o.activeHandle),l=Ymt(e,o.activeHandle,a.attrs);e.dispatch(e.state.tr.setMeta(Yi,{setDragging:{startX:t.clientX,startWidth:l}}));function c(u){s.removeEventListener("mouseup",c),s.removeEventListener("mousemove",h);const f=Yi.getState(e.state);f!=null&&f.dragging&&(Jmt(e,f.activeHandle,OL(f.dragging,u,r)),e.dispatch(e.state.tr.setMeta(Yi,{setDragging:null})))}function h(u){if(!u.which)return c(u);const f=Yi.getState(e.state);if(f&&f.dragging){const d=OL(f.dragging,u,r);DL(e,f.activeHandle,d,n)}}return DL(e,o.activeHandle,l,n),s.addEventListener("mouseup",c),s.addEventListener("mousemove",h),t.preventDefault(),!0}function Ymt(e,t,{colspan:r,colwidth:n}){const i=n&&n[n.length-1];if(i)return i;const s=e.domAtPos(t);let a=s.node.childNodes[s.offset].offsetWidth,l=r;if(n)for(let c=0;c<r;c++)n[c]&&(a-=n[c],l--);return a/l}function Xmt(e){for(;e&&e.nodeName!="TD"&&e.nodeName!="TH";)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}function LL(e,t,r,n){const i=r=="right"?-n:n,s=e.posAtCoords({left:t.clientX+i,top:t.clientY});if(!s)return-1;const{pos:o}=s,a=k1(e.state.doc.resolve(o));if(!a)return-1;if(r=="right")return a.pos;const l=Je.get(a.node(-1)),c=a.start(-1),h=l.map.indexOf(a.pos-c);return h%l.width==0?-1:c+l.map[h-1]}function OL(e,t,r){const n=t.clientX-e.startX;return Math.max(r,e.startWidth+n)}function kz(e,t){e.dispatch(e.state.tr.setMeta(Yi,{setHandle:t}))}function Jmt(e,t,r){const n=e.state.doc.resolve(t),i=n.node(-1),s=Je.get(i),o=n.start(-1),a=s.colCount(n.pos-o)+n.nodeAfter.attrs.colspan-1,l=e.state.tr;for(let c=0;c<s.height;c++){const h=c*s.width+a;if(c&&s.map[h]==s.map[h-s.width])continue;const u=s.map[h],f=i.nodeAt(u).attrs,d=f.colspan==1?0:a-s.colCount(u);if(f.colwidth&&f.colwidth[d]==r)continue;const p=f.colwidth?f.colwidth.slice():Zmt(f.colspan);p[d]=r,l.setNodeMarkup(o+u,null,{...f,colwidth:p})}l.docChanged&&e.dispatch(l)}function DL(e,t,r,n){const i=e.state.doc.resolve(t),s=i.node(-1),o=i.start(-1),a=Je.get(s).colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;let l=e.domAtPos(i.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&IC(s,l.firstChild,l,n,a,r)}function Zmt(e){return Array(e).fill(0)}function Qmt(e,t){var r;const n=[],i=e.doc.resolve(t),s=i.node(-1);if(!s)return or.empty;const o=Je.get(s),a=i.start(-1),l=o.colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1;for(let c=0;c<o.height;c++){const h=l+c*o.width;if((l==o.width-1||o.map[h]!=o.map[h+1])&&(c==0||o.map[h]!=o.map[h-o.width])){const u=o.map[h],f=a+u+s.nodeAt(u).nodeSize-1,d=document.createElement("div");d.className="column-resize-handle",(r=Yi.getState(e))!=null&&r.dragging&&n.push(jr.node(a+u,a+u+s.nodeAt(u).nodeSize,{class:"column-resize-dragging"})),n.push(jr.widget(f,d))}}return or.create(e.doc,n)}function tgt({allowTableNodeSelection:e=!1}={}){return new xr({key:Hl,state:{init(){return null},apply(t,r){const n=t.getMeta(Hl);if(n!=null)return n==-1?null:n;if(r==null||!t.docChanged)return r;const{deleted:i,pos:s}=t.mapping.mapResult(r);return i?null:s}},props:{decorations:umt,handleDOMEvents:{mousedown:qmt},createSelectionBetween(t){return Hl.getState(t.state)!=null?t.state.selection:null},handleTripleClick:zmt,handleKeyDown:$mt,handlePaste:Hmt},appendTransaction(t,r,n){return pmt(n,gmt(n,r),e)}})}var yx=typeof navigator<"u"?navigator:null,w8=yx&&yx.userAgent||"",egt=/Edge\/(\d+)/.exec(w8),rgt=/MSIE \d/.exec(w8),ngt=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(w8),igt=!!(rgt||ngt||egt),sgt=!igt&&!!yx&&/Apple Computer/.test(yx.vendor),Cz=new vr("safari-ime-span"),BC=!1,ogt={key:Cz,props:{decorations:agt,handleDOMEvents:{compositionstart:()=>{BC=!0},compositionend:()=>{BC=!1}}}};function agt(e){const{$from:t,$to:r,to:n}=e.selection;if(BC&&t.sameParent(r)){const i=jr.widget(n,lgt,{ignoreSelection:!0,key:"safari-ime-span"});return or.create(e.doc,[i])}}function lgt(e){const t=e.dom.ownerDocument.createElement("span");return t.className="ProseMirror-safari-ime-span",t}var cgt=new xr(sgt?ogt:{key:Cz});function IL(e,t){const r=String(e);if(typeof t!="string")throw new TypeError("Expected character");let n=0,i=r.indexOf(t);for(;i!==-1;)n++,i=r.indexOf(t,i+t.length);return n}function hgt(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function ugt(e,t,r){const i=zv((r||{}).ignore||[]),s=fgt(t);let o=-1;for(;++o<s.length;)P7(e,"text",a);function a(c,h){let u=-1,f;for(;++u<h.length;){const d=h[u],p=f?f.children:void 0;if(i(d,p?p.indexOf(d):void 0,f))return;f=d}if(f)return l(c,h)}function l(c,h){const u=h[h.length-1],f=s[o][0],d=s[o][1];let p=0;const g=u.children.indexOf(c);let y=!1,b=[];f.lastIndex=0;let x=f.exec(c.value);for(;x;){const T=x.index,S={index:x.index,input:x.input,stack:[...h,c]};let w=d(...x,S);if(typeof w=="string"&&(w=w.length>0?{type:"text",value:w}:void 0),w===!1?f.lastIndex=T+1:(p!==T&&b.push({type:"text",value:c.value.slice(p,T)}),Array.isArray(w)?b.push(...w):w&&b.push(w),p=T+x[0].length,y=!0),!f.global)break;x=f.exec(c.value)}return y?(p<c.value.length&&b.push({type:"text",value:c.value.slice(p)}),u.children.splice(g,1,...b)):b=[c],g+b.length}}function fgt(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const r=!e[0]||Array.isArray(e[0])?e:[e];let n=-1;for(;++n<r.length;){const i=r[n];t.push([dgt(i[0]),pgt(i[1])])}return t}function dgt(e){return typeof e=="string"?new RegExp(hgt(e),"g"):e}function pgt(e){return typeof e=="function"?e:function(){return e}}const P5="phrasing",N5=["autolink","link","image","label"];function mgt(){return{transforms:[kgt],enter:{literalAutolink:ygt,literalAutolinkEmail:F5,literalAutolinkHttp:F5,literalAutolinkWww:F5},exit:{literalAutolink:wgt,literalAutolinkEmail:vgt,literalAutolinkHttp:bgt,literalAutolinkWww:xgt}}}function ggt(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:P5,notInConstruct:N5},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:P5,notInConstruct:N5},{character:":",before:"[ps]",after:"\\/",inConstruct:P5,notInConstruct:N5}]}}function ygt(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function F5(e){this.config.enter.autolinkProtocol.call(this,e)}function bgt(e){this.config.exit.autolinkProtocol.call(this,e)}function xgt(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function vgt(e){this.config.exit.autolinkEmail.call(this,e)}function wgt(e){this.exit(e)}function kgt(e){ugt(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Cgt],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Sgt]],{ignore:["link","linkReference"]})}function Cgt(e,t,r,n,i){let s="";if(!Sz(i)||(/^w/i.test(t)&&(r=t+r,t="",s="http://"),!Tgt(r)))return!1;const o=_gt(r+n);if(!o[0])return!1;const a={type:"link",title:null,url:s+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function Sgt(e,t,r,n){return!Sz(n,!0)||/[-\d_]$/.test(r)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+r,children:[{type:"text",value:t+"@"+r}]}}function Tgt(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function _gt(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let r=t[0],n=r.indexOf(")");const i=IL(e,"(");let s=IL(e,")");for(;n!==-1&&i>s;)e+=r.slice(0,n+1),r=r.slice(n+1),n=r.indexOf(")"),s++;return[e,r]}function Sz(e,t){const r=e.input.charCodeAt(e.index-1);return(e.index===0||iu(r)||Fv(r))&&(!t||r!==47)}Tz.peek=Rgt;function Mgt(){this.buffer()}function Agt(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Egt(){this.buffer()}function Lgt(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Ogt(e){const t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=Ys(this.sliceSerialize(e)).toLowerCase(),r.label=t}function Dgt(e){this.exit(e)}function Igt(e){const t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=Ys(this.sliceSerialize(e)).toLowerCase(),r.label=t}function Bgt(e){this.exit(e)}function Rgt(){return"["}function Tz(e,t,r,n){const i=r.createTracker(n);let s=i.move("[^");const o=r.enter("footnoteReference"),a=r.enter("reference");return s+=i.move(r.safe(r.associationId(e),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function Pgt(){return{enter:{gfmFootnoteCallString:Mgt,gfmFootnoteCall:Agt,gfmFootnoteDefinitionLabelString:Egt,gfmFootnoteDefinition:Lgt},exit:{gfmFootnoteCallString:Ogt,gfmFootnoteCall:Dgt,gfmFootnoteDefinitionLabelString:Igt,gfmFootnoteDefinition:Bgt}}}function Ngt(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:r,footnoteReference:Tz},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function r(n,i,s,o){const a=s.createTracker(o);let l=a.move("[^");const c=s.enter("footnoteDefinition"),h=s.enter("label");return l+=a.move(s.safe(s.associationId(n),{before:l,after:"]"})),h(),l+=a.move("]:"),n.children&&n.children.length>0&&(a.shift(4),l+=a.move((t?`
`:" ")+s.indentLines(s.containerFlow(n,a.current()),t?_z:Fgt))),c(),l}}function Fgt(e,t,r){return t===0?e:_z(e,t,r)}function _z(e,t,r){return(r?"":"    ")+e}const $gt=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Mz.peek=Wgt;function zgt(){return{canContainEols:["delete"],enter:{strikethrough:qgt},exit:{strikethrough:Vgt}}}function Hgt(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:$gt}],handlers:{delete:Mz}}}function qgt(e){this.enter({type:"delete",children:[]},e)}function Vgt(e){this.exit(e)}function Mz(e,t,r,n){const i=r.createTracker(n),s=r.enter("strikethrough");let o=i.move("~~");return o+=r.containerPhrasing(e,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function Wgt(){return"~"}function jgt(e){return e.length}function Ugt(e,t){const r=t||{},n=(r.align||[]).concat(),i=r.stringLength||jgt,s=[],o=[],a=[],l=[];let c=0,h=-1;for(;++h<e.length;){const m=[],g=[];let y=-1;for(e[h].length>c&&(c=e[h].length);++y<e[h].length;){const b=Ggt(e[h][y]);if(r.alignDelimiters!==!1){const x=i(b);g[y]=x,(l[y]===void 0||x>l[y])&&(l[y]=x)}m.push(b)}o[h]=m,a[h]=g}let u=-1;if(typeof n=="object"&&"length"in n)for(;++u<c;)s[u]=BL(n[u]);else{const m=BL(n);for(;++u<c;)s[u]=m}u=-1;const f=[],d=[];for(;++u<c;){const m=s[u];let g="",y="";m===99?(g=":",y=":"):m===108?g=":":m===114&&(y=":");let b=r.alignDelimiters===!1?1:Math.max(1,l[u]-g.length-y.length);const x=g+"-".repeat(b)+y;r.alignDelimiters!==!1&&(b=g.length+b+y.length,b>l[u]&&(l[u]=b),d[u]=b),f[u]=x}o.splice(1,0,f),a.splice(1,0,d),h=-1;const p=[];for(;++h<o.length;){const m=o[h],g=a[h];u=-1;const y=[];for(;++u<c;){const b=m[u]||"";let x="",T="";if(r.alignDelimiters!==!1){const S=l[u]-(g[u]||0),w=s[u];w===114?x=" ".repeat(S):w===99?S%2?(x=" ".repeat(S/2+.5),T=" ".repeat(S/2-.5)):(x=" ".repeat(S/2),T=x):T=" ".repeat(S)}r.delimiterStart!==!1&&!u&&y.push("|"),r.padding!==!1&&!(r.alignDelimiters===!1&&b==="")&&(r.delimiterStart!==!1||u)&&y.push(" "),r.alignDelimiters!==!1&&y.push(x),y.push(b),r.alignDelimiters!==!1&&y.push(T),r.padding!==!1&&y.push(" "),(r.delimiterEnd!==!1||u!==c-1)&&y.push("|")}p.push(r.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return p.join(`
`)}function Ggt(e){return e==null?"":String(e)}function BL(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function Kgt(){return{enter:{table:Ygt,tableData:RL,tableHeader:RL,tableRow:Jgt},exit:{codeText:Zgt,table:Xgt,tableData:$5,tableHeader:$5,tableRow:$5}}}function Ygt(e){const t=e._align;this.enter({type:"table",align:t.map(function(r){return r==="none"?null:r}),children:[]},e),this.data.inTable=!0}function Xgt(e){this.exit(e),this.data.inTable=void 0}function Jgt(e){this.enter({type:"tableRow",children:[]},e)}function $5(e){this.exit(e)}function RL(e){this.enter({type:"tableCell",children:[]},e)}function Zgt(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Qgt));const r=this.stack[this.stack.length-1];r.type,r.value=t,this.exit(e)}function Qgt(e,t){return t==="|"?t:e}function t1t(e){const t=e||{},r=t.tableCellPadding,n=t.tablePipeAlign,i=t.stringLength,s=r?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:o,tableCell:l,tableRow:a}};function o(d,p,m,g){return c(h(d,m,g),d.align)}function a(d,p,m,g){const y=u(d,m,g),b=c([y]);return b.slice(0,b.indexOf(`
`))}function l(d,p,m,g){const y=m.enter("tableCell"),b=m.enter("phrasing"),x=m.containerPhrasing(d,{...g,before:s,after:s});return b(),y(),x}function c(d,p){return Ugt(d,{align:p,alignDelimiters:n,padding:r,stringLength:i})}function h(d,p,m){const g=d.children;let y=-1;const b=[],x=p.enter("table");for(;++y<g.length;)b[y]=u(g[y],p,m);return x(),b}function u(d,p,m){const g=d.children;let y=-1;const b=[],x=p.enter("tableRow");for(;++y<g.length;)b[y]=l(g[y],d,p,m);return x(),b}function f(d,p,m){let g=F7.inlineCode(d,p,m);return m.stack.includes("tableCell")&&(g=g.replace(/\|/g,"\\$&")),g}}function e1t(){return{exit:{taskListCheckValueChecked:PL,taskListCheckValueUnchecked:PL,paragraph:n1t}}}function r1t(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:i1t}}}function PL(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function n1t(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const r=this.stack[this.stack.length-1];r.type;const n=r.children[0];if(n&&n.type==="text"){const i=t.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===r&&(n.value=n.value.slice(1),n.value.length===0?r.children.shift():r.position&&n.position&&typeof n.position.start.offset=="number"&&(n.position.start.column++,n.position.start.offset++,r.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function i1t(e,t,r,n){const i=e.children[0],s=typeof e.checked=="boolean"&&i&&i.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",a=r.createTracker(n);s&&a.move(o);let l=F7.listItem(e,t,r,{...n,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(h){return h+o}}function s1t(){return[mgt(),Pgt(),zgt(),Kgt(),e1t()]}function o1t(e){return{extensions:[ggt(),Ngt(e),Hgt(),t1t(e),r1t()]}}const a1t={tokenize:d1t,partial:!0},Az={tokenize:p1t,partial:!0},Ez={tokenize:m1t,partial:!0},Lz={tokenize:g1t,partial:!0},l1t={tokenize:y1t,partial:!0},Oz={name:"wwwAutolink",tokenize:u1t,previous:Iz},Dz={name:"protocolAutolink",tokenize:f1t,previous:Bz},yl={name:"emailAutolink",tokenize:h1t,previous:Rz},sa={};function c1t(){return{text:sa}}let Hc=48;for(;Hc<123;)sa[Hc]=yl,Hc++,Hc===58?Hc=65:Hc===91&&(Hc=97);sa[43]=yl;sa[45]=yl;sa[46]=yl;sa[95]=yl;sa[72]=[yl,Dz];sa[104]=[yl,Dz];sa[87]=[yl,Oz];sa[119]=[yl,Oz];function h1t(e,t,r){const n=this;let i,s;return o;function o(u){return!RC(u)||!Rz.call(n,n.previous)||k8(n.events)?r(u):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(u))}function a(u){return RC(u)?(e.consume(u),a):u===64?(e.consume(u),l):r(u)}function l(u){return u===46?e.check(l1t,h,c)(u):u===45||u===95||Ai(u)?(s=!0,e.consume(u),l):h(u)}function c(u){return e.consume(u),i=!0,l}function h(u){return s&&i&&Qn(n.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(u)):r(u)}}function u1t(e,t,r){const n=this;return i;function i(o){return o!==87&&o!==119||!Iz.call(n,n.previous)||k8(n.events)?r(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(a1t,e.attempt(Az,e.attempt(Ez,s),r),r)(o))}function s(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function f1t(e,t,r){const n=this;let i="",s=!1;return o;function o(u){return(u===72||u===104)&&Bz.call(n,n.previous)&&!k8(n.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(u),e.consume(u),a):r(u)}function a(u){if(Qn(u)&&i.length<5)return i+=String.fromCodePoint(u),e.consume(u),a;if(u===58){const f=i.toLowerCase();if(f==="http"||f==="https")return e.consume(u),l}return r(u)}function l(u){return u===47?(e.consume(u),s?c:(s=!0,l)):r(u)}function c(u){return u===null||Kb(u)||ar(u)||iu(u)||Fv(u)?r(u):e.attempt(Az,e.attempt(Ez,h),r)(u)}function h(u){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(u)}}function d1t(e,t,r){let n=0;return i;function i(o){return(o===87||o===119)&&n<3?(n++,e.consume(o),i):o===46&&n===3?(e.consume(o),s):r(o)}function s(o){return o===null?r(o):t(o)}}function p1t(e,t,r){let n,i,s;return o;function o(c){return c===46||c===95?e.check(Lz,l,a)(c):c===null||ar(c)||iu(c)||c!==45&&Fv(c)?l(c):(s=!0,e.consume(c),o)}function a(c){return c===95?n=!0:(i=n,n=void 0),e.consume(c),o}function l(c){return i||n||!s?r(c):t(c)}}function m1t(e,t){let r=0,n=0;return i;function i(o){return o===40?(r++,e.consume(o),i):o===41&&n<r?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(Lz,t,s)(o):o===null||ar(o)||iu(o)?t(o):(e.consume(o),i)}function s(o){return o===41&&n++,e.consume(o),i}}function g1t(e,t,r){return n;function n(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(e.consume(a),n):a===38?(e.consume(a),s):a===93?(e.consume(a),i):a===60||a===null||ar(a)||iu(a)?t(a):r(a)}function i(a){return a===null||a===40||a===91||ar(a)||iu(a)?t(a):n(a)}function s(a){return Qn(a)?o(a):r(a)}function o(a){return a===59?(e.consume(a),n):Qn(a)?(e.consume(a),o):r(a)}}function y1t(e,t,r){return n;function n(s){return e.consume(s),i}function i(s){return Ai(s)?r(s):t(s)}}function Iz(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||ar(e)}function Bz(e){return!Qn(e)}function Rz(e){return!(e===47||RC(e))}function RC(e){return e===43||e===45||e===46||e===95||Ai(e)}function k8(e){let t=e.length,r=!1;for(;t--;){const n=e[t][1];if((n.type==="labelLink"||n.type==="labelImage")&&!n._balanced){r=!0;break}if(n._gfmAutolinkLiteralWalkedInto){r=!1;break}}return e.length>0&&!r&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),r}const b1t={tokenize:_1t,partial:!0};function x1t(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:C1t,continuation:{tokenize:S1t},exit:T1t}},text:{91:{name:"gfmFootnoteCall",tokenize:k1t},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:v1t,resolveTo:w1t}}}}function v1t(e,t,r){const n=this;let i=n.events.length;const s=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let o;for(;i--;){const l=n.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return r(l);const c=Ys(n.sliceSerialize({start:o.end,end:n.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?r(l):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),t(l))}}function w1t(e,t){let r=e.length;for(;r--;)if(e[r][1].type==="labelImage"&&e[r][0]==="enter"){e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";const n={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[e[r+1],e[r+2],["enter",n,t],e[r+3],e[r+4],["enter",i,t],["exit",i,t],["enter",s,t],["enter",o,t],["exit",o,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",n,t]];return e.splice(r,e.length-r+1,...a),e}function k1t(e,t,r){const n=this,i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let s=0,o;return a;function a(u){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),l}function l(u){return u!==94?r(u):(e.enter("gfmFootnoteCallMarker"),e.consume(u),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(u){if(s>999||u===93&&!o||u===null||u===91||ar(u))return r(u);if(u===93){e.exit("chunkString");const f=e.exit("gfmFootnoteCallString");return i.includes(Ys(n.sliceSerialize(f)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):r(u)}return ar(u)||(o=!0),s++,e.consume(u),u===92?h:c}function h(u){return u===91||u===92||u===93?(e.consume(u),s++,c):c(u)}}function C1t(e,t,r){const n=this,i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(p){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(p){return p===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",h):r(p)}function h(p){if(o>999||p===93&&!a||p===null||p===91||ar(p))return r(p);if(p===93){e.exit("chunkString");const m=e.exit("gfmFootnoteDefinitionLabelString");return s=Ys(n.sliceSerialize(m)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),f}return ar(p)||(a=!0),o++,e.consume(p),p===92?u:h}function u(p){return p===91||p===92||p===93?(e.consume(p),o++,h):h(p)}function f(p){return p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),i.includes(s)||i.push(s),Oe(e,d,"gfmFootnoteDefinitionWhitespace")):r(p)}function d(p){return t(p)}}function S1t(e,t,r){return e.check(a1,t,e.attempt(b1t,t,r))}function T1t(e){e.exit("gfmFootnoteDefinition")}function _1t(e,t,r){const n=this;return Oe(e,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=n.events[n.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(s):r(s)}}function M1t(e){let r=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:s,resolveAll:i};return r==null&&(r=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},u={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},f=[["enter",h,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",u,a]],d=a.parser.constructs.insideSpan.null;d&&Zi(f,f.length,0,$v(d,o.slice(c+1,l),a)),Zi(f,f.length,0,[["exit",u,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",h,a]]),Zi(o,c-1,l-c+3,f),l=c+f.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const c=this.previous,h=this.events;let u=0;return f;function f(p){return c===126&&h[h.length-1][1].type!=="characterEscape"?l(p):(o.enter("strikethroughSequenceTemporary"),d(p))}function d(p){const m=md(c);if(p===126)return u>1?l(p):(o.consume(p),u++,d);if(u<2&&!r)return l(p);const g=o.exit("strikethroughSequenceTemporary"),y=md(p);return g._open=!y||y===2&&!!m,g._close=!m||m===2&&!!y,a(p)}}}class A1t{constructor(){this.map=[]}add(t,r,n){E1t(this,t,r,n)}consume(t){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let r=this.map.length;const n=[];for(;r>0;)r-=1,n.push(t.slice(this.map[r][0]+this.map[r][1]),this.map[r][2]),t.length=this.map[r][0];n.push(t.slice()),t.length=0;let i=n.pop();for(;i;){for(const s of i)t.push(s);i=n.pop()}this.map.length=0}}function E1t(e,t,r,n){let i=0;if(!(r===0&&n.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=r,e.map[i][2].push(...n);return}i+=1}e.map.push([t,r,n])}}function L1t(e,t){let r=!1;const n=[];for(;t<e.length;){const i=e[t];if(r){if(i[0]==="enter")i[1].type==="tableContent"&&n.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=n.length-1;n[s]=n[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(r=!0);t+=1}return n}function O1t(){return{flow:{null:{name:"table",tokenize:D1t,resolveAll:I1t}}}}function D1t(e,t,r){const n=this;let i=0,s=0,o;return a;function a(L){let D=n.events.length-1;for(;D>-1;){const z=n.events[D][1].type;if(z==="lineEnding"||z==="linePrefix")D--;else break}const P=D>-1?n.events[D][1].type:null,K=P==="tableHead"||P==="tableRow"?w:l;return K===w&&n.parser.lazy[n.now().line]?r(L):K(L)}function l(L){return e.enter("tableHead"),e.enter("tableRow"),c(L)}function c(L){return L===124||(o=!0,s+=1),h(L)}function h(L){return L===null?r(L):Jt(L)?s>1?(s=0,n.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),d):r(L):Re(L)?Oe(e,h,"whitespace")(L):(s+=1,o&&(o=!1,i+=1),L===124?(e.enter("tableCellDivider"),e.consume(L),e.exit("tableCellDivider"),o=!0,h):(e.enter("data"),u(L)))}function u(L){return L===null||L===124||ar(L)?(e.exit("data"),h(L)):(e.consume(L),L===92?f:u)}function f(L){return L===92||L===124?(e.consume(L),u):u(L)}function d(L){return n.interrupt=!1,n.parser.lazy[n.now().line]?r(L):(e.enter("tableDelimiterRow"),o=!1,Re(L)?Oe(e,p,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):p(L))}function p(L){return L===45||L===58?g(L):L===124?(o=!0,e.enter("tableCellDivider"),e.consume(L),e.exit("tableCellDivider"),m):S(L)}function m(L){return Re(L)?Oe(e,g,"whitespace")(L):g(L)}function g(L){return L===58?(s+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(L),e.exit("tableDelimiterMarker"),y):L===45?(s+=1,y(L)):L===null||Jt(L)?T(L):S(L)}function y(L){return L===45?(e.enter("tableDelimiterFiller"),b(L)):S(L)}function b(L){return L===45?(e.consume(L),b):L===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(L),e.exit("tableDelimiterMarker"),x):(e.exit("tableDelimiterFiller"),x(L))}function x(L){return Re(L)?Oe(e,T,"whitespace")(L):T(L)}function T(L){return L===124?p(L):L===null||Jt(L)?!o||i!==s?S(L):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(L)):S(L)}function S(L){return r(L)}function w(L){return e.enter("tableRow"),_(L)}function _(L){return L===124?(e.enter("tableCellDivider"),e.consume(L),e.exit("tableCellDivider"),_):L===null||Jt(L)?(e.exit("tableRow"),t(L)):Re(L)?Oe(e,_,"whitespace")(L):(e.enter("data"),I(L))}function I(L){return L===null||L===124||ar(L)?(e.exit("data"),_(L)):(e.consume(L),L===92?N:I)}function N(L){return L===92||L===124?(e.consume(L),I):I(L)}}function I1t(e,t){let r=-1,n=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,h,u;const f=new A1t;for(;++r<e.length;){const d=e[r],p=d[1];d[0]==="enter"?p.type==="tableHead"?(a=!1,l!==0&&(NL(f,t,l,c,h),h=void 0,l=0),c={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},f.add(r,0,[["enter",c,t]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(n=!0,u=void 0,s=[0,0,0,0],o=[0,r+1,0,0],a&&(a=!1,h={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},f.add(r,0,[["enter",h,t]])),i=p.type==="tableDelimiterRow"?2:h?3:1):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(n=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],u=Dy(f,t,s,i,void 0,u),s=[0,0,0,0]),o[2]=r)):p.type==="tableCellDivider"&&(n?n=!1:(s[1]!==0&&(o[0]=o[1],u=Dy(f,t,s,i,void 0,u)),s=o,o=[s[1],r,0,0])):p.type==="tableHead"?(a=!0,l=r):p.type==="tableRow"||p.type==="tableDelimiterRow"?(l=r,s[1]!==0?(o[0]=o[1],u=Dy(f,t,s,i,r,u)):o[1]!==0&&(u=Dy(f,t,o,i,r,u)),i=0):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(o[3]=r)}for(l!==0&&NL(f,t,l,c,h),f.consume(t.events),r=-1;++r<t.events.length;){const d=t.events[r];d[0]==="enter"&&d[1].type==="table"&&(d[1]._align=L1t(t.events,r))}return e}function Dy(e,t,r,n,i,s){const o=n===1?"tableHeader":n===2?"tableDelimiter":"tableData",a="tableContent";r[0]!==0&&(s.end=Object.assign({},Yu(t.events,r[0])),e.add(r[0],0,[["exit",s,t]]));const l=Yu(t.events,r[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},e.add(r[1],0,[["enter",s,t]]),r[2]!==0){const c=Yu(t.events,r[2]),h=Yu(t.events,r[3]),u={type:a,start:Object.assign({},c),end:Object.assign({},h)};if(e.add(r[2],0,[["enter",u,t]]),n!==2){const f=t.events[r[2]],d=t.events[r[3]];if(f[1].end=Object.assign({},d[1].end),f[1].type="chunkText",f[1].contentType="text",r[3]>r[2]+1){const p=r[2]+1,m=r[3]-r[2]-1;e.add(p,m,[])}}e.add(r[3]+1,0,[["exit",u,t]])}return i!==void 0&&(s.end=Object.assign({},Yu(t.events,i)),e.add(i,0,[["exit",s,t]]),s=void 0),s}function NL(e,t,r,n,i){const s=[],o=Yu(t.events,r);i&&(i.end=Object.assign({},o),s.push(["exit",i,t])),n.end=Object.assign({},o),s.push(["exit",n,t]),e.add(r+1,0,s)}function Yu(e,t){const r=e[t],n=r[0]==="enter"?"start":"end";return r[1][n]}const B1t={name:"tasklistCheck",tokenize:P1t};function R1t(){return{text:{91:B1t}}}function P1t(e,t,r){const n=this;return i;function i(l){return n.previous!==null||!n._gfmTasklistFirstContentOfListItem?r(l):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),s)}function s(l){return ar(l)?(e.enter("taskListCheckValueUnchecked"),e.consume(l),e.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(e.enter("taskListCheckValueChecked"),e.consume(l),e.exit("taskListCheckValueChecked"),o):r(l)}function o(l){return l===93?(e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):r(l)}function a(l){return Jt(l)?t(l):Re(l)?e.check({tokenize:N1t},t,r)(l):r(l)}}function N1t(e,t,r){return Oe(e,n,"whitespace");function n(i){return i===null?r(i):t(i)}}function F1t(e){return VP([c1t(),x1t(),M1t(e),O1t(),R1t()])}const $1t={};function z1t(e){const t=this,r=e||$1t,n=t.data(),i=n.micromarkExtensions||(n.micromarkExtensions=[]),s=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),o=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);i.push(F1t(r)),s.push(s1t()),o.push(o1t(r))}function me(e,t){return Object.assign(e,{meta:{package:"@milkdown/preset-gfm",...t}}),e}const C8=d1("strike_through");me(C8,{displayName:"Attr<strikethrough>",group:"Strikethrough"});const Yd=qd("strike_through",e=>({parseDOM:[{tag:"del"},{style:"text-decoration",getAttrs:t=>t==="line-through"}],toDOM:t=>["del",e.get(C8.key)(t)],parseMarkdown:{match:t=>t.type==="delete",runner:(t,r,n)=>{t.openMark(n),t.next(r.children),t.closeMark(n)}},toMarkdown:{match:t=>t.type.name==="strike_through",runner:(t,r)=>{t.withMark(r,"delete")}}}));me(Yd.mark,{displayName:"MarkSchema<strikethrough>",group:"Strikethrough"});me(Yd.ctx,{displayName:"MarkSchemaCtx<strikethrough>",group:"Strikethrough"});const x4=be("ToggleStrikeThrough",e=>()=>qv(Yd.type(e)));me(x4,{displayName:"Command<ToggleStrikethrough>",group:"Strikethrough"});const Pz=Wn(e=>o1(new RegExp("(?<![\\w:/])(~{1,2})(.+?)\\1(?!\\w|\\/)"),Yd.type(e)));me(Pz,{displayName:"InputRule<strikethrough>",group:"Strikethrough"});const S8=Pi("strikeThroughKeymap",{ToggleStrikethrough:{shortcuts:"Mod-Alt-x",command:e=>{const t=e.get(Dt);return()=>t.call(x4.key)}}});me(S8.ctx,{displayName:"KeymapCtx<strikethrough>",group:"Strikethrough"});me(S8.shortcuts,{displayName:"Keymap<strikethrough>",group:"Strikethrough"});const C1=smt({tableGroup:"block",cellContent:"paragraph",cellAttributes:{alignment:{default:"left",getFromDOM:e=>e.style.textAlign||"left",setDOMAttr:(e,t)=>{t.style=`text-align: ${e||"left"}`}}}}),Ec=$r("table",()=>({...C1.table,content:"table_header_row table_row+",disableDropCursor:!0,parseMarkdown:{match:e=>e.type==="table",runner:(e,t,r)=>{const n=t.align,i=t.children.map((s,o)=>({...s,align:n,isHeader:o===0}));e.openNode(r),e.next(i),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="table",runner:(e,t)=>{var i;const r=(i=t.content.firstChild)==null?void 0:i.content;if(!r)return;const n=[];r.forEach(s=>{n.push(s.attrs.alignment)}),e.openNode("table",void 0,{align:n}),e.next(t.content),e.closeNode()}}}));me(Ec.node,{displayName:"NodeSchema<table>",group:"Table"});me(Ec.ctx,{displayName:"NodeSchemaCtx<table>",group:"Table"});const v4=$r("table_header_row",()=>({...C1.table_row,disableDropCursor:!0,content:"(table_header)*",parseDOM:[{tag:"tr[data-is-header]"}],toDOM(){return["tr",{"data-is-header":!0},0]},parseMarkdown:{match:e=>!!(e.type==="tableRow"&&e.isHeader),runner:(e,t,r)=>{const n=t.align,i=t.children.map((s,o)=>({...s,align:n[o],isHeader:t.isHeader}));e.openNode(r),e.next(i),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="table_header_row",runner:(e,t)=>{e.openNode("tableRow",void 0,{isHeader:!0}),e.next(t.content),e.closeNode()}}}));me(v4.node,{displayName:"NodeSchema<tableHeaderRow>",group:"Table"});me(v4.ctx,{displayName:"NodeSchemaCtx<tableHeaderRow>",group:"Table"});const S1=$r("table_row",()=>({...C1.table_row,disableDropCursor:!0,content:"(table_cell)*",parseMarkdown:{match:e=>e.type==="tableRow",runner:(e,t,r)=>{const n=t.align,i=t.children.map((s,o)=>({...s,align:n[o]}));e.openNode(r),e.next(i),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="table_row",runner:(e,t)=>{t.content.size!==0&&(e.openNode("tableRow"),e.next(t.content),e.closeNode())}}}));me(S1.node,{displayName:"NodeSchema<tableRow>",group:"Table"});me(S1.ctx,{displayName:"NodeSchemaCtx<tableRow>",group:"Table"});const T1=$r("table_cell",()=>({...C1.table_cell,disableDropCursor:!0,parseMarkdown:{match:e=>e.type==="tableCell"&&!e.isHeader,runner:(e,t,r)=>{const n=t.align;e.openNode(r,{alignment:n}).openNode(e.schema.nodes.paragraph).next(t.children).closeNode().closeNode()}},toMarkdown:{match:e=>e.type.name==="table_cell",runner:(e,t)=>{e.openNode("tableCell").next(t.content).closeNode()}}}));me(T1.node,{displayName:"NodeSchema<tableCell>",group:"Table"});me(T1.ctx,{displayName:"NodeSchemaCtx<tableCell>",group:"Table"});const _1=$r("table_header",()=>({...C1.table_header,disableDropCursor:!0,parseMarkdown:{match:e=>e.type==="tableCell"&&!!e.isHeader,runner:(e,t,r)=>{const n=t.align;e.openNode(r,{alignment:n}),e.openNode(e.schema.nodes.paragraph),e.next(t.children),e.closeNode(),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="table_header",runner:(e,t)=>{e.openNode("tableCell"),e.next(t.content),e.closeNode()}}}));me(_1.node,{displayName:"NodeSchema<tableHeader>",group:"Table"});me(_1.ctx,{displayName:"NodeSchemaCtx<tableHeader>",group:"Table"});function T8(e,t=3,r=3){const n=Array(r).fill(0).map(()=>T1.type(e).createAndFill()),i=Array(r).fill(0).map(()=>_1.type(e).createAndFill()),s=Array(t).fill(0).map((o,a)=>a===0?v4.type(e).create(null,i):S1.type(e).create(null,n));return Ec.type(e).create(null,s)}function Nz(e){return(t,r)=>n=>{r=r??n.selection.from;const i=n.doc.resolve(r),s=$P(l=>l.type.name==="table")(i),o=s?{node:s.node,from:s.start}:void 0,a=e==="row";if(o){const l=Je.get(o.node);if(t>=0&&t<(a?l.height:l.width)){const c=l.positionAt(a?t:l.height-1,a?l.width-1:t,o.node),h=n.doc.resolve(o.from+c),u=a?lr.rowSelection:lr.colSelection,f=l.positionAt(a?t:0,a?0:t,o.node),d=n.doc.resolve(o.from+f);return FP(n.setSelection(u(h,d)))}}return n}}const H1t=Nz("row"),q1t=Nz("col");function Fz(e,t,{map:r,tableStart:n,table:i},s){const o=Array(s).fill(0).reduce((l,c,h)=>l+i.child(h).nodeSize,n),a=Array(r.width).fill(0).map((l,c)=>{const h=i.nodeAt(r.map[c]);return T1.type(e).createAndFill({alignment:h==null?void 0:h.attrs.alignment})});return t.insert(o,S1.type(e).create(null,a)),t}function V1t(e){const t=Kd(e.$from);if(!t)return;const r=Je.get(t.node);return r.cellsInRect({left:0,right:r.width,top:0,bottom:r.height}).map(i=>{const s=t.node.nodeAt(i),o=i+t.start;return{pos:o,start:o+1,node:s}})}function W1t(e){const t=V1t(e.selection);if(t&&t[0]){const r=e.doc.resolve(t[0].pos),n=t[t.length-1];if(n){const i=e.doc.resolve(n.pos);return FP(e.setSelection(new lr(i,r)))}}return e}const _8=be("GoToPrevTableCell",()=>()=>vz(-1));me(_8,{displayName:"Command<goToPrevTableCellCommand>",group:"Table"});const M8=be("GoToNextTableCell",()=>()=>vz(1));me(M8,{displayName:"Command<goToNextTableCellCommand>",group:"Table"});const A8=be("ExitTable",e=>()=>(t,r)=>{if(!Ds(t))return!1;const{$head:n}=t.selection,i=vst(n,Ec.type(e));if(!i)return!1;const{to:s}=i,o=t.tr.replaceWith(s,s,uo.type(e).createAndFill());return o.setSelection(we.near(o.doc.resolve(s),1)).scrollIntoView(),r==null||r(o),!0});me(A8,{displayName:"Command<breakTableCommand>",group:"Table"});const $z=be("InsertTable",e=>({row:t,col:r}={})=>(n,i)=>{const{selection:s,tr:o}=n,{from:a}=s,l=T8(e,t,r),c=o.replaceSelectionWith(l),h=we.findFrom(c.doc.resolve(a),1,!0);return h&&c.setSelection(h),i==null||i(c),!0});me($z,{displayName:"Command<insertTableCommand>",group:"Table"});const E8=be("MoveRow",()=>({from:e,to:t,pos:r}={})=>Imt({from:e??0,to:t??0,pos:r}));me(E8,{displayName:"Command<moveRowCommand>",group:"Table"});const L8=be("MoveCol",()=>({from:e,to:t,pos:r}={})=>Bmt({from:e??0,to:t??0,pos:r}));me(L8,{displayName:"Command<moveColCommand>",group:"Table"});const dh=be("SelectRow",()=>(e={index:0})=>(t,r)=>{const{tr:n}=t;return!!(r==null?void 0:r(H1t(e.index,e.pos)(n)))});me(dh,{displayName:"Command<selectRowCommand>",group:"Table"});const ph=be("SelectCol",()=>(e={index:0})=>(t,r)=>{const{tr:n}=t;return!!(r==null?void 0:r(q1t(e.index,e.pos)(n)))});me(ph,{displayName:"Command<selectColCommand>",group:"Table"});const zz=be("SelectTable",()=>()=>(e,t)=>{const{tr:r}=e;return!!(t==null?void 0:t(W1t(r)))});me(zz,{displayName:"Command<selectTableCommand>",group:"Table"});const O8=be("DeleteSelectedCells",()=>()=>(e,t)=>{const{selection:r}=e;if(!(r instanceof lr))return!1;const n=r.isRowSelection(),i=r.isColSelection();return n&&i?Dmt(e,t):i?_mt(e,t):Amt(e,t)});me(O8,{displayName:"Command<deleteSelectedCellsCommand>",group:"Table"});const D8=be("AddColBefore",()=>()=>Cmt);me(D8,{displayName:"Command<addColBeforeCommand>",group:"Table"});const I8=be("AddColAfter",()=>()=>Smt);me(I8,{displayName:"Command<addColAfterCommand>",group:"Table"});const B8=be("AddRowBefore",e=>()=>(t,r)=>{if(!Ds(t))return!1;if(r){const n=Ac(t);r(Fz(e,t.tr,n,n.top))}return!0});me(B8,{displayName:"Command<addRowBeforeCommand>",group:"Table"});const R8=be("AddRowAfter",e=>()=>(t,r)=>{if(!Ds(t))return!1;if(r){const n=Ac(t);r(Fz(e,t.tr,n,n.bottom))}return!0});me(R8,{displayName:"Command<addRowAfterCommand>",group:"Table"});const P8=be("SetAlign",()=>(e="left")=>Emt("alignment",e));me(P8,{displayName:"Command<setAlignCommand>",group:"Table"});const Hz=Wn(e=>new Ii(/^\|(?<col>\d+)[xX](?<row>\d+)\|\s$/,(t,r,n,i)=>{var c,h;const s=t.doc.resolve(n);if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),Ec.type(e)))return null;const o=Math.max(Number(((c=r.groups)==null?void 0:c.row)??0),2),a=T8(e,o,Number((h=r.groups)==null?void 0:h.col)),l=t.tr.replaceRangeWith(n,i,a);return l.setSelection(Gt.create(l.doc,n+3)).scrollIntoView()}));me(Hz,{displayName:"InputRule<insertTableInputRule>",group:"Table"});const qz=yut(e=>({run:(t,r,n)=>{if(n)return t;let i=t.content;return t.content.forEach((s,o,a)=>{var g;if((s==null?void 0:s.type)!==Ec.type(e))return;const l=s.childCount,c=((g=s.lastChild)==null?void 0:g.childCount)??0;if(l===0||c===0){i=i.replaceChild(a,uo.type(e).create());return}const h=s.firstChild;if(!(c>0&&h&&h.childCount===0))return;const f=Array(c).fill(0).map(()=>_1.type(e).createAndFill()),d=new Bt(Ct.from(f),0,0),p=h.replace(0,0,d),m=s.replace(0,h.nodeSize,new Bt(Ct.from(p),0,0));i=i.replaceChild(a,m)}),new Bt(Ct.from(i),t.openStart,t.openEnd)}}));me(qz,{displayName:"PasteRule<table>",group:"Table"});const N8=Pi("tableKeymap",{NextCell:{priority:100,shortcuts:["Mod-]","Tab"],command:e=>{const t=e.get(Dt);return()=>t.call(M8.key)}},PrevCell:{shortcuts:["Mod-[","Shift-Tab"],command:e=>{const t=e.get(Dt);return()=>t.call(_8.key)}},ExitTable:{shortcuts:["Mod-Enter","Enter"],command:e=>{const t=e.get(Dt);return()=>t.call(A8.key)}}});me(N8.ctx,{displayName:"KeymapCtx<table>",group:"Table"});me(N8.shortcuts,{displayName:"Keymap<table>",group:"Table"});const z5="footnote_definition",FL="footnoteDefinition",F8=$r("footnote_definition",()=>({group:"block",content:"block+",defining:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`dl[data-type="${z5}"]`,getAttrs:e=>{if(!(e instanceof HTMLElement))throw co(e);return{label:e.dataset.label}},contentElement:"dd"}],toDOM:e=>{const t=e.attrs.label;return["dl",{"data-label":t,"data-type":z5},["dt",t],["dd",0]]},parseMarkdown:{match:({type:e})=>e===FL,runner:(e,t,r)=>{e.openNode(r,{label:t.label}).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name===z5,runner:(e,t)=>{e.openNode(FL,void 0,{label:t.attrs.label,identifier:t.attrs.label}).next(t.content).closeNode()}}}));me(F8.ctx,{displayName:"NodeSchemaCtx<footnodeDef>",group:"footnote"});me(F8.node,{displayName:"NodeSchema<footnodeDef>",group:"footnote"});const H5="footnote_reference",$8=$r("footnote_reference",()=>({group:"inline",inline:!0,atom:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`sup[data-type="${H5}"]`,getAttrs:e=>{if(!(e instanceof HTMLElement))throw co(e);return{label:e.dataset.label}}}],toDOM:e=>{const t=e.attrs.label;return["sup",{"data-label":t,"data-type":H5},t]},parseMarkdown:{match:({type:e})=>e==="footnoteReference",runner:(e,t,r)=>{e.addNode(r,{label:t.label})}},toMarkdown:{match:e=>e.type.name===H5,runner:(e,t)=>{e.addNode("footnoteReference",void 0,void 0,{label:t.attrs.label,identifier:t.attrs.label})}}}));me($8.ctx,{displayName:"NodeSchemaCtx<footnodeRef>",group:"footnote"});me($8.node,{displayName:"NodeSchema<footnodeRef>",group:"footnote"});const z8=fo.extendSchema(e=>t=>{const r=e(t);return{...r,attrs:{...r.attrs,checked:{default:null,validate:"boolean|null"}},parseDOM:[{tag:'li[data-item-type="task"]',getAttrs:n=>{if(!(n instanceof HTMLElement))throw co(n);return{label:n.dataset.label,listType:n.dataset.listType,spread:n.dataset.spread,checked:n.dataset.checked?n.dataset.checked==="true":null}}},...(r==null?void 0:r.parseDOM)||[]],toDOM:n=>r.toDOM&&n.attrs.checked==null?r.toDOM(n):["li",{"data-item-type":"task","data-label":n.attrs.label,"data-list-type":n.attrs.listType,"data-spread":n.attrs.spread,"data-checked":n.attrs.checked},0],parseMarkdown:{match:({type:n})=>n==="listItem",runner:(n,i,s)=>{if(i.checked==null){r.parseMarkdown.runner(n,i,s);return}const o=i.label!=null?`${i.label}.`:"",a=i.checked!=null?!!i.checked:null,l=i.label!=null?"ordered":"bullet",c=i.spread!=null?`${i.spread}`:"true";n.openNode(s,{label:o,listType:l,spread:c,checked:a}),n.next(i.children),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="list_item",runner:(n,i)=>{if(i.attrs.checked==null){r.toMarkdown.runner(n,i);return}const s=i.attrs.label,o=i.attrs.listType,a=i.attrs.spread==="true",l=i.attrs.checked;n.openNode("listItem",void 0,{label:s,listType:o,spread:a,checked:l}),n.next(i.content),n.closeNode()}}}});me(z8.node,{displayName:"NodeSchema<taskListItem>",group:"ListItem"});me(z8.ctx,{displayName:"NodeSchemaCtx<taskListItem>",group:"ListItem"});const Vz=Wn(()=>new Ii(/^\[(?<checked>\s|x)\]\s$/,(e,t,r,n)=>{var h;const i=e.doc.resolve(r);let s=0,o=i.node(s);for(;o&&o.type.name!=="list_item";)s--,o=i.node(s);if(!o||o.attrs.checked!=null)return null;const a=((h=t.groups)==null?void 0:h.checked)==="x",l=i.before(s),c=e.tr;return c.deleteRange(r,n).setNodeMarkup(l,void 0,{...o.attrs,checked:a}),c}));me(Vz,{displayName:"InputRule<wrapInTaskListInputRule>",group:"ListItem"});const j1t=[S8,N8].flat(),U1t=[Hz,Vz],G1t=[Pz],K1t=[qz],Wz=Gr(()=>cgt);me(Wz,{displayName:"Prose<autoInsertSpanPlugin>",group:"Prose"});const Y1t=Gr(()=>Wmt({}));me(Y1t,{displayName:"Prose<columnResizingPlugin>",group:"Prose"});const jz=Gr(()=>tgt({allowTableNodeSelection:!0}));me(jz,{displayName:"Prose<tableEditingPlugin>",group:"Prose"});const H8=ia("remarkGFM",()=>z1t);me(H8.plugin,{displayName:"Remark<remarkGFMPlugin>",group:"Remark"});me(H8.options,{displayName:"RemarkConfig<remarkGFMPlugin>",group:"Remark"});const X1t=new vr("MILKDOWN_KEEP_TABLE_ALIGN_PLUGIN");function J1t(e,t){let r=0;return t.forEach((n,i,s)=>{n===e&&(r=s)}),r}const Uz=Gr(()=>new xr({key:X1t,appendTransaction:(e,t,r)=>{let n;const i=(s,o)=>{if(n||(n=r.tr),s.type.name!=="table_cell")return;const a=r.doc.resolve(o),l=a.node(a.depth),h=a.node(a.depth-1).firstChild;if(!h)return;const u=J1t(s,l),f=h.maybeChild(u);if(!f)return;const d=f.attrs.alignment,p=s.attrs.alignment;d!==p&&n.setNodeMarkup(o,void 0,{...s.attrs,alignment:d})};return t.doc!==r.doc&&r.doc.descendants(i),n}}));me(Uz,{displayName:"Prose<keepTableAlignPlugin>",group:"Prose"});const Z1t=[Uz,Wz,H8,jz].flat(),Q1t=[z8,Ec,v4,S1,_1,T1,F8,$8,C8,Yd].flat(),tyt=[M8,_8,A8,$z,E8,L8,dh,ph,zz,O8,B8,R8,D8,I8,P8,x4],eyt=[Q1t,U1t,K1t,G1t,j1t,tyt,Z1t].flat(),ryt=e=>{let{state:t}=e,r=t.doc.lineAt(t.selection.main.from),n=V8(e.state,r.from);return n.line?nyt(e):n.block?syt(e):!1};function q8(e,t){return({state:r,dispatch:n})=>{if(r.readOnly)return!1;let i=e(t,r);return i?(n(r.update(i)),!0):!1}}const nyt=q8(lyt,0),iyt=q8(Gz,0),syt=q8((e,t)=>Gz(e,t,ayt(t)),0);function V8(e,t){let r=e.languageDataAt("commentTokens",t,1);return r.length?r[0]:{}}const B0=50;function oyt(e,{open:t,close:r},n,i){let s=e.sliceDoc(n-B0,n),o=e.sliceDoc(i,i+B0),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-t.length,c)==t&&o.slice(l,l+r.length)==r)return{open:{pos:n-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let h,u;i-n<=2*B0?h=u=e.sliceDoc(n,i):(h=e.sliceDoc(n,n+B0),u=e.sliceDoc(i-B0,i));let f=/^\s*/.exec(h)[0].length,d=/\s*$/.exec(u)[0].length,p=u.length-d-r.length;return h.slice(f,f+t.length)==t&&u.slice(p,p+r.length)==r?{open:{pos:n+f+t.length,margin:/\s/.test(h.charAt(f+t.length))?1:0},close:{pos:i-d-r.length,margin:/\s/.test(u.charAt(p-1))?1:0}}:null}function ayt(e){let t=[];for(let r of e.selection.ranges){let n=e.doc.lineAt(r.from),i=r.to<=n.to?n:e.doc.lineAt(r.to);i.from>n.from&&i.from==r.to&&(i=r.to==n.to+1?n:e.doc.lineAt(r.to-1));let s=t.length-1;s>=0&&t[s].to>n.from?t[s].to=i.to:t.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:i.to})}return t}function Gz(e,t,r=t.selection.ranges){let n=r.map(s=>V8(t,s.from).block);if(!n.every(s=>s))return null;let i=r.map((s,o)=>oyt(t,n[o],s.from,s.to));if(e!=2&&!i.every(s=>s))return{changes:t.changes(r.map((s,o)=>i[o]?[]:[{from:s.from,insert:n[o].open+" "},{from:s.to,insert:" "+n[o].close}]))};if(e!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=n[o],{open:c,close:h}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:h.pos-h.margin,to:h.pos+l.close.length})}return{changes:s}}return null}function lyt(e,t,r=t.selection.ranges){let n=[],i=-1;for(let{from:s,to:o}of r){let a=n.length,l=1e9,c=V8(t,s).line;if(c){for(let h=s;h<=o;){let u=t.doc.lineAt(h);if(u.from>i&&(s==o||o>u.from)){i=u.from;let f=/^\s*/.exec(u.text)[0].length,d=f==u.length,p=u.text.slice(f,f+c.length)==c?f:-1;f<u.text.length&&f<l&&(l=f),n.push({line:u,comment:p,token:c,indent:f,empty:d,single:!1})}h=u.to+1}if(l<1e9)for(let h=a;h<n.length;h++)n[h].indent<n[h].line.text.length&&(n[h].indent=l);n.length==a+1&&(n[a].single=!0)}}if(e!=2&&n.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:h,single:u}of n)(u||!h)&&s.push({from:a.from+c,insert:l+" "});let o=t.changes(s);return{changes:o,selection:t.selection.map(o,1)}}else if(e!=1&&n.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of n)if(a>=0){let c=o.from+a,h=c+l.length;o.text[h-o.from]==" "&&h++,s.push({from:c,to:h})}return{changes:s}}return null}const PC=fl.define(),cyt=fl.define(),hyt=Nt.define(),Kz=Nt.define({combine(e){return ra(e,{minDepth:100,newGroupDelay:500,joinToEvent:(t,r)=>r},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,r)=>(n,i)=>t(n,i)||r(n,i)})}}),Yz=hn.define({create(){return pm.empty},update(e,t){let r=t.state.facet(Kz),n=t.annotation(PC);if(n){let l=Ei.fromTransaction(t,n.selection),c=n.side,h=c==0?e.undone:e.done;return l?h=bx(h,h.length,r.minDepth,l):h=Zz(h,t.startState.selection),new pm(c==0?n.rest:h,c==0?h:n.rest)}let i=t.annotation(cyt);if((i=="full"||i=="before")&&(e=e.isolate()),t.annotation(si.addToHistory)===!1)return t.changes.empty?e:e.addMapping(t.changes.desc);let s=Ei.fromTransaction(t),o=t.annotation(si.time),a=t.annotation(si.userEvent);return s?e=e.addChanges(s,o,a,r,t):t.selection&&(e=e.addSelection(t.startState.selection,o,a,r.newGroupDelay)),(i=="full"||i=="after")&&(e=e.isolate()),e},toJSON(e){return{done:e.done.map(t=>t.toJSON()),undone:e.undone.map(t=>t.toJSON())}},fromJSON(e){return new pm(e.done.map(Ei.fromJSON),e.undone.map(Ei.fromJSON))}});function uyt(e={}){return[Yz,Kz.of(e),$t.domEventHandlers({beforeinput(t,r){let n=t.inputType=="historyUndo"?Xz:t.inputType=="historyRedo"?NC:null;return n?(t.preventDefault(),n(r)):!1}})]}function w4(e,t){return function({state:r,dispatch:n}){if(!t&&r.readOnly)return!1;let i=r.field(Yz,!1);if(!i)return!1;let s=i.pop(e,r,t);return s?(n(s),!0):!1}}const Xz=w4(0,!1),NC=w4(1,!1),fyt=w4(0,!0),dyt=w4(1,!0);class Ei{constructor(t,r,n,i,s){this.changes=t,this.effects=r,this.mapped=n,this.startSelection=i,this.selectionsAfter=s}setSelAfter(t){return new Ei(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,r,n;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(r=this.mapped)===null||r===void 0?void 0:r.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(t){return new Ei(t.changes&&Jr.fromJSON(t.changes),[],t.mapped&&Wo.fromJSON(t.mapped),t.startSelection&&ot.fromJSON(t.startSelection),t.selectionsAfter.map(ot.fromJSON))}static fromTransaction(t,r){let n=xs;for(let i of t.startState.facet(hyt)){let s=i(t);s.length&&(n=n.concat(s))}return!n.length&&t.changes.empty?null:new Ei(t.changes.invert(t.startState.doc),n,void 0,r||t.startState.selection,xs)}static selection(t){return new Ei(void 0,xs,void 0,void 0,t)}}function bx(e,t,r,n){let i=t+1>r+20?t-r-1:0,s=e.slice(i,t);return s.push(n),s}function pyt(e,t){let r=[],n=!1;return e.iterChangedRanges((i,s)=>r.push(i,s)),t.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<r.length;){let c=r[l++],h=r[l++];a>=c&&o<=h&&(n=!0)}}),n}function myt(e,t){return e.ranges.length==t.ranges.length&&e.ranges.filter((r,n)=>r.empty!=t.ranges[n].empty).length===0}function Jz(e,t){return e.length?t.length?e.concat(t):e:t}const xs=[],gyt=200;function Zz(e,t){if(e.length){let r=e[e.length-1],n=r.selectionsAfter.slice(Math.max(0,r.selectionsAfter.length-gyt));return n.length&&n[n.length-1].eq(t)?e:(n.push(t),bx(e,e.length-1,1e9,r.setSelAfter(n)))}else return[Ei.selection([t])]}function yyt(e){let t=e[e.length-1],r=e.slice();return r[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),r}function q5(e,t){if(!e.length)return e;let r=e.length,n=xs;for(;r;){let i=byt(e[r-1],t,n);if(i.changes&&!i.changes.empty||i.effects.length){let s=e.slice(0,r);return s[r-1]=i,s}else t=i.mapped,r--,n=i.selectionsAfter}return n.length?[Ei.selection(n)]:xs}function byt(e,t,r){let n=Jz(e.selectionsAfter.length?e.selectionsAfter.map(a=>a.map(t)):xs,r);if(!e.changes)return Ei.selection(n);let i=e.changes.map(t),s=t.mapDesc(e.changes,!0),o=e.mapped?e.mapped.composeDesc(s):s;return new Ei(i,ke.mapEffects(e.effects,t),o,e.startSelection.map(s),n)}const xyt=/^(input\.type|delete)($|\.)/;let pm=class hp{constructor(t,r,n=0,i=void 0){this.done=t,this.undone=r,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new hp(this.done,this.undone):this}addChanges(t,r,n,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&t.changes&&(!n||xyt.test(n))&&(!a.selectionsAfter.length&&r-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,pyt(a.changes,t.changes))||n=="input.type.compose")?o=bx(o,o.length-1,i.minDepth,new Ei(t.changes.compose(a.changes),Jz(ke.mapEffects(t.effects,a.changes),a.effects),a.mapped,a.startSelection,xs)):o=bx(o,o.length,i.minDepth,t),new hp(o,xs,r,n)}addSelection(t,r,n,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:xs;return s.length>0&&r-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&myt(s[s.length-1],t)?this:new hp(Zz(this.done,t),this.undone,r,n)}addMapping(t){return new hp(q5(this.done,t),q5(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,r,n){let i=t==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||r.selection;if(n&&s.selectionsAfter.length)return r.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:PC.of({side:t,rest:yyt(i),selection:o}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?xs:i.slice(0,i.length-1);return s.mapped&&(a=q5(a,s.mapped)),r.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:PC.of({side:t,rest:a,selection:o}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}};pm.empty=new pm(xs,xs);const vyt=[{key:"Mod-z",run:Xz,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:NC,preventDefault:!0},{linux:"Ctrl-Shift-z",run:NC,preventDefault:!0},{key:"Mod-u",run:fyt,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:dyt,preventDefault:!0}];function Xd(e,t){return ot.create(e.ranges.map(t),e.mainIndex)}function mo(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function go({state:e,dispatch:t},r){let n=Xd(e.selection,r);return n.eq(e.selection,!0)?!1:(t(mo(e,n)),!0)}function k4(e,t){return ot.cursor(t?e.to:e.from)}function Qz(e,t){return go(e,r=>r.empty?e.moveByChar(r,t):k4(r,t))}function jn(e){return e.textDirectionAt(e.state.selection.main.head)==br.LTR}const tH=e=>Qz(e,!jn(e)),eH=e=>Qz(e,jn(e));function rH(e,t){return go(e,r=>r.empty?e.moveByGroup(r,t):k4(r,t))}const wyt=e=>rH(e,!jn(e)),kyt=e=>rH(e,jn(e));function Cyt(e,t,r){if(t.type.prop(r))return!0;let n=t.to-t.from;return n&&(n>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function C4(e,t,r){let n=kn(e).resolveInner(t.head),i=r?De.closedBy:De.openedBy;for(let l=t.head;;){let c=r?n.childAfter(l):n.childBefore(l);if(!c)break;Cyt(e,c,i)?n=c:l=r?c.to:c.from}let s=n.type.prop(i),o,a;return s&&(o=r?$o(e,n.from,1):$o(e,n.to,-1))&&o.matched?a=r?o.end.to:o.end.from:a=r?n.to:n.from,ot.cursor(a,r?-1:1)}const Syt=e=>go(e,t=>C4(e.state,t,!jn(e))),Tyt=e=>go(e,t=>C4(e.state,t,jn(e)));function nH(e,t){return go(e,r=>{if(!r.empty)return k4(r,t);let n=e.moveVertically(r,t);return n.head!=r.head?n:e.moveToLineBoundary(r,t)})}const iH=e=>nH(e,!1),sH=e=>nH(e,!0);function oH(e){let t=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,r=0,n=0,i;if(t){for(let s of e.state.facet($t.scrollMargins)){let o=s(e);o!=null&&o.top&&(r=Math.max(o==null?void 0:o.top,r)),o!=null&&o.bottom&&(n=Math.max(o==null?void 0:o.bottom,n))}i=e.scrollDOM.clientHeight-r-n}else i=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:n,selfScroll:t,height:Math.max(e.defaultLineHeight,i-5)}}function aH(e,t){let r=oH(e),{state:n}=e,i=Xd(n.selection,o=>o.empty?e.moveVertically(o,t,r.height):k4(o,t));if(i.eq(n.selection))return!1;let s;if(r.selfScroll){let o=e.coordsAtPos(n.selection.main.head),a=e.scrollDOM.getBoundingClientRect(),l=a.top+r.marginTop,c=a.bottom-r.marginBottom;o&&o.top>l&&o.bottom<c&&(s=$t.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return e.dispatch(mo(n,i),{effects:s}),!0}const $L=e=>aH(e,!1),FC=e=>aH(e,!0);function Lc(e,t,r){let n=e.lineBlockAt(t.head),i=e.moveToLineBoundary(t,r);if(i.head==t.head&&i.head!=(r?n.to:n.from)&&(i=e.moveToLineBoundary(t,r,!1)),!r&&i.head==n.from&&n.length){let s=/^\s*/.exec(e.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;s&&t.head!=n.from+s&&(i=ot.cursor(n.from+s))}return i}const _yt=e=>go(e,t=>Lc(e,t,!0)),Myt=e=>go(e,t=>Lc(e,t,!1)),Ayt=e=>go(e,t=>Lc(e,t,!jn(e))),Eyt=e=>go(e,t=>Lc(e,t,jn(e))),Lyt=e=>go(e,t=>ot.cursor(e.lineBlockAt(t.head).from,1)),Oyt=e=>go(e,t=>ot.cursor(e.lineBlockAt(t.head).to,-1));function Dyt(e,t,r){let n=!1,i=Xd(e.selection,s=>{let o=$o(e,s.head,-1)||$o(e,s.head,1)||s.head>0&&$o(e,s.head-1,1)||s.head<e.doc.length&&$o(e,s.head+1,-1);if(!o||!o.end)return s;n=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return ot.cursor(a)});return n?(t(mo(e,i)),!0):!1}const Iyt=({state:e,dispatch:t})=>Dyt(e,t);function Is(e,t){let r=Xd(e.state.selection,n=>{let i=t(n);return ot.range(n.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return r.eq(e.state.selection)?!1:(e.dispatch(mo(e.state,r)),!0)}function lH(e,t){return Is(e,r=>e.moveByChar(r,t))}const cH=e=>lH(e,!jn(e)),hH=e=>lH(e,jn(e));function uH(e,t){return Is(e,r=>e.moveByGroup(r,t))}const Byt=e=>uH(e,!jn(e)),Ryt=e=>uH(e,jn(e)),Pyt=e=>Is(e,t=>C4(e.state,t,!jn(e))),Nyt=e=>Is(e,t=>C4(e.state,t,jn(e)));function fH(e,t){return Is(e,r=>e.moveVertically(r,t))}const dH=e=>fH(e,!1),pH=e=>fH(e,!0);function mH(e,t){return Is(e,r=>e.moveVertically(r,t,oH(e).height))}const zL=e=>mH(e,!1),HL=e=>mH(e,!0),Fyt=e=>Is(e,t=>Lc(e,t,!0)),$yt=e=>Is(e,t=>Lc(e,t,!1)),zyt=e=>Is(e,t=>Lc(e,t,!jn(e))),Hyt=e=>Is(e,t=>Lc(e,t,jn(e))),qyt=e=>Is(e,t=>ot.cursor(e.lineBlockAt(t.head).from)),Vyt=e=>Is(e,t=>ot.cursor(e.lineBlockAt(t.head).to)),qL=({state:e,dispatch:t})=>(t(mo(e,{anchor:0})),!0),VL=({state:e,dispatch:t})=>(t(mo(e,{anchor:e.doc.length})),!0),WL=({state:e,dispatch:t})=>(t(mo(e,{anchor:e.selection.main.anchor,head:0})),!0),jL=({state:e,dispatch:t})=>(t(mo(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0),Wyt=({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0),jyt=({state:e,dispatch:t})=>{let r=S4(e).map(({from:n,to:i})=>ot.range(n,Math.min(i+1,e.doc.length)));return t(e.update({selection:ot.create(r),userEvent:"select"})),!0},Uyt=({state:e,dispatch:t})=>{let r=Xd(e.selection,n=>{let i=kn(e),s=i.resolveStack(n.from,1);if(n.empty){let o=i.resolveStack(n.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<n.from&&a.to>=n.to||a.to>n.to&&a.from<=n.from)&&o.next)return ot.range(a.to,a.from)}return n});return r.eq(e.selection)?!1:(t(mo(e,r)),!0)};function gH(e,t){let{state:r}=e,n=r.selection,i=r.selection.ranges.slice();for(let s of r.selection.ranges){let o=r.doc.lineAt(s.head);if(t?o.to<e.state.doc.length:o.from>0)for(let a=s;;){let l=e.moveVertically(a,t);if(l.head<o.from||l.head>o.to){i.some(c=>c.head==l.head)||i.push(l);break}else{if(l.head==a.head)break;a=l}}}return i.length==n.ranges.length?!1:(e.dispatch(mo(r,ot.create(i,i.length-1))),!0)}const Gyt=e=>gH(e,!1),Kyt=e=>gH(e,!0),Yyt=({state:e,dispatch:t})=>{let r=e.selection,n=null;return r.ranges.length>1?n=ot.create([r.main]):r.main.empty||(n=ot.create([ot.cursor(r.main.head)])),n?(t(mo(e,n)),!0):!1};function M1(e,t){if(e.state.readOnly)return!1;let r="delete.selection",{state:n}=e,i=n.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=t(s);l<o?(r="delete.backward",l=Iy(e,l,!1)):l>o&&(r="delete.forward",l=Iy(e,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Iy(e,o,!1),a=Iy(e,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:ot.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(e.dispatch(n.update(i,{scrollIntoView:!0,userEvent:r,effects:r=="delete.selection"?$t.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function Iy(e,t,r){if(e instanceof $t)for(let n of e.state.facet($t.atomicRanges).map(i=>i(e)))n.between(t,t,(i,s)=>{i<t&&s>t&&(t=r?s:i)});return t}const yH=(e,t,r)=>M1(e,n=>{let i=n.from,{state:s}=e,o=s.doc.lineAt(i),a,l;if(r&&!t&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let c=$d(a,s.tabSize),h=c%Qh(s)||Qh(s);for(let u=0;u<h&&a[a.length-1-u]==" ";u++)i--;l=i}else l=wn(o.text,i-o.from,t,t)+o.from,l==i&&o.number!=(t?s.doc.lines:1)?l+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=wn(o.text,l-o.from,!1,!1)+o.from);return l}),$C=e=>yH(e,!1,!0),bH=e=>yH(e,!0,!1),xH=(e,t)=>M1(e,r=>{let n=r.head,{state:i}=e,s=i.doc.lineAt(n),o=i.charCategorizer(n);for(let a=null;;){if(n==(t?s.to:s.from)){n==r.head&&s.number!=(t?i.doc.lines:1)&&(n+=t?1:-1);break}let l=wn(s.text,n-s.from,t)+s.from,c=s.text.slice(Math.min(n,l)-s.from,Math.max(n,l)-s.from),h=o(c);if(a!=null&&h!=a)break;(c!=" "||n!=r.head)&&(a=h),n=l}return n}),vH=e=>xH(e,!1),Xyt=e=>xH(e,!0),Jyt=e=>M1(e,t=>{let r=e.lineBlockAt(t.head).to;return t.head<r?r:Math.min(e.state.doc.length,t.head+1)}),Zyt=e=>M1(e,t=>{let r=e.moveToLineBoundary(t,!1).head;return t.head>r?r:Math.max(0,t.head-1)}),Qyt=e=>M1(e,t=>{let r=e.moveToLineBoundary(t,!0).head;return t.head<r?r:Math.min(e.state.doc.length,t.head+1)}),t2t=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:Ve.of(["",""])},range:ot.cursor(n.from)}));return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0},e2t=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(n=>{if(!n.empty||n.from==0||n.from==e.doc.length)return{range:n};let i=n.from,s=e.doc.lineAt(i),o=i==s.from?i-1:wn(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:wn(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:e.doc.slice(i,a).append(e.doc.slice(o,i))},range:ot.cursor(a)}});return r.changes.empty?!1:(t(e.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function S4(e){let t=[],r=-1;for(let n of e.selection.ranges){let i=e.doc.lineAt(n.from),s=e.doc.lineAt(n.to);if(!n.empty&&n.to==s.from&&(s=e.doc.lineAt(n.to-1)),r>=i.number){let o=t[t.length-1];o.to=s.to,o.ranges.push(n)}else t.push({from:i.from,to:s.to,ranges:[n]});r=s.number+1}return t}function wH(e,t,r){if(e.readOnly)return!1;let n=[],i=[];for(let s of S4(e)){if(r?s.to==e.doc.length:s.from==0)continue;let o=e.doc.lineAt(r?s.to+1:s.from-1),a=o.length+1;if(r){n.push({from:s.to,to:o.to},{from:s.from,insert:o.text+e.lineBreak});for(let l of s.ranges)i.push(ot.range(Math.min(e.doc.length,l.anchor+a),Math.min(e.doc.length,l.head+a)))}else{n.push({from:o.from,to:s.from},{from:s.to,insert:e.lineBreak+o.text});for(let l of s.ranges)i.push(ot.range(l.anchor-a,l.head-a))}}return n.length?(t(e.update({changes:n,scrollIntoView:!0,selection:ot.create(i,e.selection.mainIndex),userEvent:"move.line"})),!0):!1}const r2t=({state:e,dispatch:t})=>wH(e,t,!1),n2t=({state:e,dispatch:t})=>wH(e,t,!0);function kH(e,t,r){if(e.readOnly)return!1;let n=[];for(let i of S4(e))r?n.push({from:i.from,insert:e.doc.slice(i.from,i.to)+e.lineBreak}):n.push({from:i.to,insert:e.lineBreak+e.doc.slice(i.from,i.to)});return t(e.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const i2t=({state:e,dispatch:t})=>kH(e,t,!1),s2t=({state:e,dispatch:t})=>kH(e,t,!0),o2t=e=>{if(e.state.readOnly)return!1;let{state:t}=e,r=t.changes(S4(t).map(({from:i,to:s})=>(i>0?i--:s<t.doc.length&&s++,{from:i,to:s}))),n=Xd(t.selection,i=>{let s;if(e.lineWrapping){let o=e.lineBlockAt(i.head),a=e.coordsAtPos(i.head,i.assoc||1);a&&(s=o.bottom+e.documentTop-a.bottom+e.defaultLineHeight/2)}return e.moveVertically(i,!0,s)}).map(r);return e.dispatch({changes:r,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function a2t(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let r=kn(e).resolveInner(t),n=r.childBefore(t),i=r.childAfter(t),s;return n&&i&&n.to<=t&&i.from>=t&&(s=n.type.prop(De.closedBy))&&s.indexOf(i.name)>-1&&e.doc.lineAt(n.to).from==e.doc.lineAt(i.from).from&&!/\S/.test(e.sliceDoc(n.to,i.from))?{from:n.to,to:i.from}:null}const UL=CH(!1),l2t=CH(!0);function CH(e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{let{from:s,to:o}=i,a=t.doc.lineAt(s),l=!e&&s==o&&a2t(t,s);e&&(s=o=(o<=a.to?a:t.doc.lineAt(o)).to);let c=new Mv(t,{simulateBreak:s,simulateDoubleBreak:!!l}),h=w7(c,s);for(h==null&&(h=$d(/^\s*/.exec(t.doc.lineAt(s).text)[0],t.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let u=["",$m(t,h)];return l&&u.push($m(t,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Ve.of(u)},range:ot.cursor(s+1+u[1].length)}});return r(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function W8(e,t){let r=-1;return e.changeByRange(n=>{let i=[];for(let o=n.from;o<=n.to;){let a=e.doc.lineAt(o);a.number>r&&(n.empty||n.to>a.from)&&(t(a,i,n),r=a.number),o=a.to+1}let s=e.changes(i);return{changes:i,range:ot.range(s.mapPos(n.anchor,1),s.mapPos(n.head,1))}})}const c2t=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=Object.create(null),n=new Mv(e,{overrideIndentation:s=>{let o=r[s];return o??-1}}),i=W8(e,(s,o,a)=>{let l=w7(n,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let c=/^\s*/.exec(s.text)[0],h=$m(e,l);(c!=h||a.from<s.from+c.length)&&(r[s.from]=l,o.push({from:s.from,to:s.from+c.length,insert:h}))});return i.changes.empty||t(e.update(i,{userEvent:"indent"})),!0},SH=({state:e,dispatch:t})=>e.readOnly?!1:(t(e.update(W8(e,(r,n)=>{n.push({from:r.from,insert:e.facet(_v)})}),{userEvent:"input.indent"})),!0),TH=({state:e,dispatch:t})=>e.readOnly?!1:(t(e.update(W8(e,(r,n)=>{let i=/^\s*/.exec(r.text)[0];if(!i)return;let s=$d(i,e.tabSize),o=0,a=$m(e,Math.max(0,s-Qh(e)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;n.push({from:r.from+o,to:r.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),h2t=e=>(e.setTabFocusMode(),!0),u2t=[{key:"Ctrl-b",run:tH,shift:cH,preventDefault:!0},{key:"Ctrl-f",run:eH,shift:hH},{key:"Ctrl-p",run:iH,shift:dH},{key:"Ctrl-n",run:sH,shift:pH},{key:"Ctrl-a",run:Lyt,shift:qyt},{key:"Ctrl-e",run:Oyt,shift:Vyt},{key:"Ctrl-d",run:bH},{key:"Ctrl-h",run:$C},{key:"Ctrl-k",run:Jyt},{key:"Ctrl-Alt-h",run:vH},{key:"Ctrl-o",run:t2t},{key:"Ctrl-t",run:e2t},{key:"Ctrl-v",run:FC}],f2t=[{key:"ArrowLeft",run:tH,shift:cH,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:wyt,shift:Byt,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Ayt,shift:zyt,preventDefault:!0},{key:"ArrowRight",run:eH,shift:hH,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:kyt,shift:Ryt,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Eyt,shift:Hyt,preventDefault:!0},{key:"ArrowUp",run:iH,shift:dH,preventDefault:!0},{mac:"Cmd-ArrowUp",run:qL,shift:WL},{mac:"Ctrl-ArrowUp",run:$L,shift:zL},{key:"ArrowDown",run:sH,shift:pH,preventDefault:!0},{mac:"Cmd-ArrowDown",run:VL,shift:jL},{mac:"Ctrl-ArrowDown",run:FC,shift:HL},{key:"PageUp",run:$L,shift:zL},{key:"PageDown",run:FC,shift:HL},{key:"Home",run:Myt,shift:$yt,preventDefault:!0},{key:"Mod-Home",run:qL,shift:WL},{key:"End",run:_yt,shift:Fyt,preventDefault:!0},{key:"Mod-End",run:VL,shift:jL},{key:"Enter",run:UL,shift:UL},{key:"Mod-a",run:Wyt},{key:"Backspace",run:$C,shift:$C,preventDefault:!0},{key:"Delete",run:bH,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:vH,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:Xyt,preventDefault:!0},{mac:"Mod-Backspace",run:Zyt,preventDefault:!0},{mac:"Mod-Delete",run:Qyt,preventDefault:!0}].concat(u2t.map(e=>({mac:e.key,run:e.run,shift:e.shift}))),_H=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Syt,shift:Pyt},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Tyt,shift:Nyt},{key:"Alt-ArrowUp",run:r2t},{key:"Shift-Alt-ArrowUp",run:i2t},{key:"Alt-ArrowDown",run:n2t},{key:"Shift-Alt-ArrowDown",run:s2t},{key:"Mod-Alt-ArrowUp",run:Gyt},{key:"Mod-Alt-ArrowDown",run:Kyt},{key:"Escape",run:Yyt},{key:"Mod-Enter",run:l2t},{key:"Alt-l",mac:"Ctrl-l",run:jyt},{key:"Mod-i",run:Uyt,preventDefault:!0},{key:"Mod-[",run:TH},{key:"Mod-]",run:SH},{key:"Mod-Alt-\\",run:c2t},{key:"Shift-Mod-k",run:o2t},{key:"Shift-Mod-\\",run:Iyt},{key:"Mod-/",run:ryt},{key:"Alt-A",run:iyt},{key:"Ctrl-m",mac:"Shift-Alt-m",run:h2t}].concat(f2t),d2t={key:"Tab",run:SH,shift:TH};var xx=200,an=function(){};an.prototype.append=function(t){return t.length?(t=an.from(t),!this.length&&t||t.length<xx&&this.leafAppend(t)||this.length<xx&&t.leafPrepend(this)||this.appendInner(t)):this};an.prototype.prepend=function(t){return t.length?an.from(t).append(this):this};an.prototype.appendInner=function(t){return new p2t(this,t)};an.prototype.slice=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=this.length),t>=r?an.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,r))};an.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};an.prototype.forEach=function(t,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(t,r,n,0):this.forEachInvertedInner(t,r,n,0)};an.prototype.map=function(t,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(s,o){return i.push(t(s,o))},r,n),i};an.from=function(t){return t instanceof an?t:t&&t.length?new MH(t):an.empty};var MH=function(e){function t(n){e.call(this),this.values=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new t(this.values.slice(i,s))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=xx)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=xx)return new t(i.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(t.prototype,r),t}(an);an.empty=new MH([]);var p2t=function(e){function t(r,n){e.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},t.prototype.forEachInner=function(n,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(n,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(n,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},t.prototype.forEachInvertedInner=function(n,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(n,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(n,Math.min(i,a),s,o)===!1)return!1},t.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(n,i):n>=s?this.right.slice(n-s,i-s):this.left.slice(n,s).append(this.right.slice(0,i-s))},t.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new t(i,this.right)},t.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new t(this.left,new t(this.right,n)):new t(this,n)},t}(an);const m2t=500;class js{constructor(t,r){this.items=t,this.eventCount=r}popEvent(t,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,s;r&&(i=this.remapping(n,this.items.length),s=i.maps.length);let o=t.tr,a,l,c=[],h=[];return this.items.forEach((u,f)=>{if(!u.step){i||(i=this.remapping(n,f+1),s=i.maps.length),s--,h.push(u);return}if(i){h.push(new Oo(u.map));let d=u.step.map(i.slice(s)),p;d&&o.maybeStep(d).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new Oo(p,void 0,void 0,c.length+h.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(u.step);if(u.selection)return a=i?u.selection.map(i.slice(s)):u.selection,l=new js(this.items.slice(0,n).append(h.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(t,r,n,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let h=0;h<t.steps.length;h++){let u=t.steps[h].invert(t.docs[h]),f=new Oo(t.mapping.maps[h],u,r),d;(d=l&&l.merge(f))&&(f=d,h?s.pop():a=a.slice(0,a.length-1)),s.push(f),r&&(o++,r=void 0),i||(l=f)}let c=o-n.depth;return c>y2t&&(a=g2t(a,c),o-=c),new js(a.append(s),o)}remapping(t,r){let n=new Vm;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=t?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,o)},t,r),n}addMaps(t){return this.eventCount==0?this:new js(this.items.append(t.map(r=>new Oo(r))),this.eventCount)}rebased(t,r){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-r),s=t.mapping,o=t.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=r;this.items.forEach(f=>{let d=s.getMirror(--l);if(d==null)return;o=Math.min(o,d);let p=s.maps[d];if(f.step){let m=t.steps[d].invert(t.docs[d]),g=f.selection&&f.selection.map(s.slice(l+1,d));g&&a++,n.push(new Oo(p,m,g))}else n.push(new Oo(p))},i);let c=[];for(let f=r;f<o;f++)c.push(new Oo(s.maps[f]));let h=this.items.slice(0,i).append(c).append(n),u=new js(h,a);return u.emptyItemCount()>m2t&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let t=0;return this.items.forEach(r=>{r.step||t++}),t}compress(t=this.items.length){let r=this.remapping(0,t),n=r.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=t)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(r.slice(n)),c=l&&l.getMap();if(n--,c&&r.appendMap(c,n),l){let h=o.selection&&o.selection.map(r.slice(n));h&&s++;let u=new Oo(c.invert(),l,h),f,d=i.length-1;(f=i.length&&i[d].merge(u))?i[d]=f:i.push(u)}}else o.map&&n--},this.items.length,0),new js(an.from(i.reverse()),s)}}js.empty=new js(an.empty,0);function g2t(e,t){let r;return e.forEach((n,i)=>{if(n.selection&&t--==0)return r=i,!1}),e.slice(r)}class Oo{constructor(t,r,n,i){this.map=t,this.step=r,this.selection=n,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let r=t.step.merge(this.step);if(r)return new Oo(r.getMap().invert(),r,this.selection)}}}class Pl{constructor(t,r,n,i,s){this.done=t,this.undone=r,this.prevRanges=n,this.prevTime=i,this.prevComposition=s}}const y2t=20;function b2t(e,t,r,n){let i=r.getMeta(Wh),s;if(i)return i.historyState;r.getMeta(w2t)&&(e=new Pl(e.done,e.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return e;if(o&&o.getMeta(Wh))return o.getMeta(Wh).redo?new Pl(e.done.addTransform(r,void 0,n,K2(t)),e.undone,GL(r.mapping.maps),e.prevTime,e.prevComposition):new Pl(e.done,e.undone.addTransform(r,void 0,n,K2(t)),null,e.prevTime,e.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=r.getMeta("composition"),l=e.prevTime==0||!o&&e.prevComposition!=a&&(e.prevTime<(r.time||0)-n.newGroupDelay||!x2t(r,e.prevRanges)),c=o?V5(e.prevRanges,r.mapping):GL(r.mapping.maps);return new Pl(e.done.addTransform(r,l?t.selection.getBookmark():void 0,n,K2(t)),js.empty,c,r.time,a??e.prevComposition)}else return(s=r.getMeta("rebased"))?new Pl(e.done.rebased(r,s),e.undone.rebased(r,s),V5(e.prevRanges,r.mapping),e.prevTime,e.prevComposition):new Pl(e.done.addMaps(r.mapping.maps),e.undone.addMaps(r.mapping.maps),V5(e.prevRanges,r.mapping),e.prevTime,e.prevComposition)}function x2t(e,t){if(!t)return!1;if(!e.docChanged)return!0;let r=!1;return e.mapping.maps[0].forEach((n,i)=>{for(let s=0;s<t.length;s+=2)n<=t[s+1]&&i>=t[s]&&(r=!0)}),r}function GL(e){let t=[];for(let r=e.length-1;r>=0&&t.length==0;r--)e[r].forEach((n,i,s,o)=>t.push(s,o));return t}function V5(e,t){if(!e)return null;let r=[];for(let n=0;n<e.length;n+=2){let i=t.map(e[n],1),s=t.map(e[n+1],-1);i<=s&&r.push(i,s)}return r}function v2t(e,t,r){let n=K2(t),i=Wh.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,n);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,n),l=new Pl(r?a:s.remaining,r?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Wh,{redo:r,historyState:l})}let W5=!1,KL=null;function K2(e){let t=e.plugins;if(KL!=t){W5=!1,KL=t;for(let r=0;r<t.length;r++)if(t[r].spec.historyPreserveItems){W5=!0;break}}return W5}const Wh=new vr("history"),w2t=new vr("closeHistory");function k2t(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new xr({key:Wh,state:{init(){return new Pl(js.empty,js.empty,null,0,-1)},apply(t,r,n){return b2t(r,n,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,r){let n=r.inputType,i=n=="historyUndo"?T4:n=="historyRedo"?Cd:null;return!i||!t.editable?!1:(r.preventDefault(),i(t.state,t.dispatch))}}}})}function AH(e,t){return(r,n)=>{let i=Wh.getState(r);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(n){let s=v2t(i,r,e);s&&n(t?s.scrollIntoView():s)}return!0}}const T4=AH(!1,!0),Cd=AH(!0,!0);var C2t=Object.defineProperty,YL=Object.getOwnPropertySymbols,S2t=Object.prototype.hasOwnProperty,T2t=Object.prototype.propertyIsEnumerable,XL=(e,t,r)=>t in e?C2t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_2t=(e,t)=>{for(var r in t||(t={}))S2t.call(t,r)&&XL(e,r,t[r]);if(YL)for(var r of YL(t))T2t.call(t,r)&&XL(e,r,t[r]);return e};function EH(e,t){return Object.assign(e,{meta:_2t({package:"@milkdown/components"},t)}),e}const M2t={extensions:[],languages:[],expandIcon:"",searchIcon:"",clearSearchIcon:"",searchPlaceholder:"Search language",noResultText:"No result",copyText:"Copy",copyIcon:"",onCopy:()=>{},renderLanguage:e=>e,renderPreview:()=>null,previewToggleButton:e=>e?"Edit":"Hide",previewLabel:"Preview",previewLoading:"Loading..."},A1=er(M2t,"codeBlockConfigCtx");EH(A1,{displayName:"Config<code-block>",group:"CodeBlock"});class A2t{constructor(t){this.languages=t,this.map={},t.forEach(r=>{r.alias.forEach(n=>{this.map[n]=r})})}getAll(){return this.languages.map(t=>({name:t.name,alias:t.alias}))}load(t){const n=this.map[t.toLowerCase()];return n?n.support?Promise.resolve(n.support):n.load():Promise.resolve(void 0)}}function xf({icon:e,class:t,onClick:r}){return et("span",{class:Cn("milkdown-icon",t),onPointerdown:r,ref:n=>{n&&e&&(n.innerHTML=cn.sanitize(e.trim()))}})}xf.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};var E2t=(e,t,r)=>new Promise((n,i)=>{var s=l=>{try{a(r.next(l))}catch(c){i(c)}},o=l=>{try{a(r.throw(l))}catch(c){i(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,o);a((r=r.apply(e,t)).next())});function L2t(e){return E2t(this,null,function*(){try{return navigator.clipboard.writeText(e)}catch{const r=document.createElement("textarea"),n=document.activeElement;r.value=e,r.setAttribute("readonly",""),r.style.contain="strict",r.style.position="absolute",r.style.left="-9999px",r.style.fontSize="12pt";const i=document.getSelection(),s=i?i.rangeCount>0&&i.getRangeAt(0):null;document.body.appendChild(r),r.select(),r.selectionStart=0,r.selectionEnd=e.length,document.execCommand("copy"),document.body.removeChild(r),s&&(i.removeAllRanges(),i.addRange(s)),n&&n.focus()}})}const O2t=Sn({props:{copyText:{type:String,required:!0},copyIcon:{type:String,required:!0},onCopy:{type:Function,required:!0},text:{type:String,required:!0}},setup(e){const t=()=>{L2t(e.text).then(()=>e.onCopy(e.text)).catch(console.error)};return()=>et(xn,null,et("button",{type:"button",class:"copy-button",onClick:t},et(xf,{icon:e.copyIcon}),e.copyText))}}),D2t=Sn({props:{language:{type:Object,required:!0},getReadOnly:{type:Function,required:!0},config:{type:Object,required:!0},getAllLanguages:{type:Function,required:!0},setLanguage:{type:Function,required:!0}},setup({language:e,config:t,setLanguage:r,getAllLanguages:n,getReadOnly:i}){const s=zt(),o=zt(!1),a=zt(),l=zt(),c=zt("");Vh([o,s,l],()=>{c.value="";const m=s.value,g=l.value;!m||!g||oo(m,g,{placement:"bottom-start"}).then(({x:y,y:b})=>{Object.assign(g.style,{left:`${y}px`,top:`${b}px`})}).catch(console.error)});const h=m=>{if(m.preventDefault(),m.stopPropagation(),i())return;const g=!o.value;o.value=g,g&&setTimeout(()=>{var y;return(y=a.value)==null?void 0:y.focus()},0)},u=m=>{const g=m.target;c.value=g.value},f=m=>{m.key==="Escape"&&(c.value="")},d=wd(()=>{var m;if(!o.value)return[];const g=(m=n())!=null?m:[],y=g.find(x=>x.name.toLowerCase()===e.value.toLowerCase()),b=g.filter(x=>{const T=c.value.toLowerCase();return(x.name.toLowerCase().includes(T)||x.alias.some(S=>S.toLowerCase().includes(T)))&&x!==y});return b.length===0?[]:y?[y,...b]:b}),p=m=>{const g=m.target;if(s.value&&s.value.contains(g))return;const y=l.value,b=s.value;!b||!y||b.dataset.expanded==="true"&&(y.contains(g)||(o.value=!1))};return y1(()=>{window.addEventListener("click",p)}),b1(()=>{window.removeEventListener("click",p)}),()=>et(xn,null,et("button",{type:"button",ref:s,class:"language-button",onClick:h,"data-expanded":String(o.value)},e.value||"Text",et("div",{class:"expand-icon"},et(xf,{icon:t.expandIcon}))),et("div",{ref:l,class:"language-picker"},o.value?et("div",{class:"list-wrapper"},et("div",{class:"search-box"},et("div",{class:"search-icon"},et(xf,{icon:t.searchIcon})),et("input",{ref:a,class:"search-input",placeholder:t.searchPlaceholder,value:c.value,onInput:u,onKeydown:f}),et("div",{class:Cn("clear-icon",c.value.length===0&&"hidden"),onMousedown:m=>{m.preventDefault(),c.value=""}},et(xf,{icon:t.clearSearchIcon}))),et("ul",{class:"language-list",role:"listbox",onKeydown:m=>{if(m.key==="Enter"){const g=document.activeElement;g instanceof HTMLElement&&g.dataset.language&&r(g.dataset.language)}}},d.value.length?d.value.map(m=>et("li",{role:"listitem",tabindex:"0",class:"language-list-item","aria-selected":m.name.toLowerCase()===e.value.toLowerCase(),"data-language":m.name,onClick:()=>{r(m.name),o.value=!1}},t.renderLanguage(m.name,m.name.toLowerCase()===e.value.toLowerCase()))):et("li",{class:"language-list-item no-result"},t.noResultText))):null))}}),I2t=Sn({props:{text:{type:Object,required:!0},language:{type:Object,required:!0},config:{type:Object,required:!0},previewOnlyMode:{type:Object,required:!0},preview:{type:Object,required:!0}},setup(e){const{previewOnlyMode:t,config:r,preview:n}=e,i=zt();return Gd(()=>{const s=i.value;if(!s)return;for(;s.firstChild;)s.removeChild(s.firstChild);const o=n.value;(typeof o=="string"||o instanceof Element)&&(s.innerHTML=cn.sanitize(o))}),()=>n.value?et("div",{class:"preview-panel"},!t.value&&et(xn,null,et("div",{class:"preview-divider"}),et("div",{class:Cn("preview-label",t&&"hidden")},r.previewLabel)),et("div",{ref:i,class:"preview"})):null}}),B2t=Sn({props:{text:{type:Object,required:!0},selected:{type:Object,required:!0},getReadOnly:{type:Function,required:!0},codemirror:{type:Object,required:!0},language:{type:Object,required:!0},getAllLanguages:{type:Function,required:!0},setLanguage:{type:Function,required:!0},config:{type:Object,required:!0}},setup(e){var t;const r=(t=e.config.previewOnlyByDefault)!=null?t:e.getReadOnly(),n=zt(r),i=zt(),s=zt(null);y1(()=>{for(var a;(a=i.value)!=null&&a.firstChild;)i.value.removeChild(i.value.firstChild);i.value&&i.value.appendChild(e.codemirror.dom)}),Vh(()=>[e.text.value,e.language.value],()=>{const a=e.config.renderPreview(e.language.value,e.text.value,c=>s.value=c);a&&(s.value=a),a===void 0&&!s.value&&(s.value=cn.sanitize(e.config.previewLoading)),a===null&&(s.value=null)},{immediate:!0});const o=()=>{};return()=>{var a;return et(xn,null,et("div",{class:"tools"},et(D2t,{language:e.language,config:e.config,setLanguage:e.setLanguage,getAllLanguages:e.getAllLanguages,getReadOnly:e.getReadOnly}),et("div",{class:"tools-button-group"},et(O2t,{copyIcon:e.config.copyIcon,copyText:e.config.copyText,onCopy:(a=e.config.onCopy)!=null?a:o,text:e.text.value}),s.value?et("button",{class:"preview-toggle-button",onClick:()=>n.value=!n.value},et(xf,{icon:e.config.previewToggleButton(n.value)})):null)),et("div",{ref:i,class:Cn("codemirror-host",s.value&&n.value&&"hidden")}),et(I2t,{text:e.text,language:e.language,config:e.config,previewOnlyMode:n,preview:s}))}}});class R2t{constructor(t,r,n,i,s){this.node=t,this.view=r,this.getPos=n,this.loader=i,this.config=s,this.selected=zt(!1),this.language=zt(""),this.text=zt(""),this.updating=!1,this.languageName="",this.forwardUpdate=o=>{var a;if(this.updating||!this.cm.hasFocus)return;let l=((a=this.getPos())!=null?a:0)+1;const{main:c}=o.state.selection,h=l+c.from,u=l+c.to,f=this.view.state.selection;if(o.docChanged||f.from!==h||f.to!==u){const d=this.view.state.tr;o.changes.iterChanges((p,m,g,y,b)=>{b.length?d.replaceWith(l+p,l+m,this.view.state.schema.text(b.toString())):d.delete(l+p,l+m),l+=y-g-(m-p)}),d.setSelection(Gt.create(d.doc,h,u)),this.view.dispatch(d)}},this.createApp=()=>po(B2t,{text:this.text,selected:this.selected,codemirror:this.cm,language:this.language,getAllLanguages:this.getAllLanguages,getReadOnly:()=>!this.view.editable,setLanguage:this.setLanguage,config:this.config}),this.codeMirrorKeymap=()=>{const o=this.view;return[{key:"ArrowUp",run:()=>this.maybeEscape("line",-1)},{key:"ArrowLeft",run:()=>this.maybeEscape("char",-1)},{key:"ArrowDown",run:()=>this.maybeEscape("line",1)},{key:"ArrowRight",run:()=>this.maybeEscape("char",1)},{key:"Mod-Enter",run:()=>AN(o.state,o.dispatch)?(o.focus(),!0):!1},{key:"Mod-z",run:()=>T4(o.state,o.dispatch)},{key:"Shift-Mod-z",run:()=>Cd(o.state,o.dispatch)},{key:"Mod-y",run:()=>Cd(o.state,o.dispatch)},{key:"Backspace",run:()=>{var a;const l=this.cm.state.selection.ranges;if(l.length>1)return!1;const c=l[0];if(c&&(!c.empty||c.anchor>0)||this.cm.state.doc.lines>=2)return!1;const h=this.view.state,u=(a=this.getPos())!=null?a:0,f=h.tr.replaceWith(u,u+this.node.nodeSize,h.schema.nodes.paragraph.createChecked({},this.node.content));return f.setSelection(Gt.near(f.doc.resolve(u))),this.view.dispatch(f),this.view.focus(),!0}}]},this.maybeEscape=(o,a)=>{var l;const{state:c}=this.cm;let h=c.selection.main;if(!h.empty||(o==="line"&&(h=c.doc.lineAt(h.head)),a<0?h.from>0:h.to<c.doc.length))return!1;const u=((l=this.getPos())!=null?l:0)+(a<0?0:this.node.nodeSize),f=Gt.near(this.view.state.doc.resolve(u),a),d=this.view.state.tr.setSelection(f).scrollIntoView();return this.view.dispatch(d),this.view.focus(),!0},this.setLanguage=o=>{var a;this.view.dispatch(this.view.state.tr.setNodeAttribute((a=this.getPos())!=null?a:0,"language",o))},this.getAllLanguages=()=>this.loader.getAll(),this.languageConf=new cd,this.readOnlyConf=new cd,this.cm=new $t({doc:this.node.textContent,root:this.view.root,extensions:[this.readOnlyConf.of(Sr.readOnly.of(!this.view.editable)),xR(),zd.of(this.codeMirrorKeymap()),this.languageConf.of([]),Sr.changeFilter.of(()=>this.view.editable),...s.extensions,$t.updateListener.of(this.forwardUpdate)]}),this.app=this.createApp(),this.dom=this.createDom(this.app),this.disposeSelectedWatcher=Gd(()=>{this.selected.value?this.dom.classList.add("selected"):this.dom.classList.remove("selected")}),this.updateLanguage()}createDom(t){const r=document.createElement("div");return r.className="milkdown-code-block",this.text.value=this.node.textContent,t.mount(r),r}updateLanguage(){const t=this.node.attrs.language;if(t===this.languageName)return;this.language.value=t,this.loader.load(t??"").then(n=>{n&&(this.cm.dispatch({effects:this.languageConf.reconfigure(n)}),this.languageName=t)}).catch(console.error)}setSelection(t,r){this.cm.dom.isConnected&&(this.cm.focus(),this.updating=!0,this.cm.dispatch({selection:{anchor:t,head:r}}),this.updating=!1)}update(t){if(t.type!==this.node.type)return!1;if(this.updating)return!0;this.node=t,this.text.value=t.textContent,this.updateLanguage(),this.view.editable===this.cm.state.readOnly&&this.cm.dispatch({effects:this.readOnlyConf.reconfigure(Sr.readOnly.of(!this.view.editable))});const r=P2t(this.cm.state.doc.toString(),t.textContent);return r&&(this.updating=!0,this.cm.dispatch({changes:{from:r.from,to:r.to,insert:r.text},scrollIntoView:!0}),this.updating=!1),!0}selectNode(){this.selected.value=!0,this.cm.focus()}deselectNode(){this.selected.value=!1}stopEvent(){return!0}destroy(){this.app.unmount(),this.cm.destroy(),this.disposeSelectedWatcher()}}function P2t(e,t){if(e===t)return null;let r=0,n=e.length,i=t.length;for(;r<n&&e.charCodeAt(r)===t.charCodeAt(r);)++r;for(;n>r&&i>r&&e.charCodeAt(n-1)===t.charCodeAt(i-1);)n--,i--;return{from:r,to:n,text:t.slice(r,i)}}const LH=f1(ao.node,e=>{const t=e.get(A1.key),r=new A2t(t.languages);return(n,i,s)=>new R2t(n,i,s,r,t)});EH(LH,{displayName:"NodeView<code-block>",group:"CodeBlock"});const N2t=[LH,A1],JL=typeof String.prototype.normalize=="function"?e=>e.normalize("NFKD"):e=>e;class Sd{constructor(t,r,n=0,i=t.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(n,i),this.bufferStart=n,this.normalize=s?a=>s(JL(a)):JL,this.query=this.normalize(r)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ci(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let r=o7(t),n=this.bufferStart+this.bufferPos;this.bufferPos+=Ro(t);let i=this.normalize(r);if(i.length)for(let s=0,o=n;;s++){let a=i.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(l)return this.value=l,this;break}o==n&&s<r.length&&r.charCodeAt(s)==a&&o++}}}match(t,r,n){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==t&&(o==this.query.length-1?i={from:this.matches[s+1],to:n}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==t&&(this.query.length==1?i={from:r,to:n}:this.matches.push(1,r)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Sd.prototype[Symbol.iterator]=function(){return this});const OH={from:-1,to:-1,match:/.*/.exec("")},j8="gm"+(/x/.unicode==null?"":"u");class DH{constructor(t,r,n,i=0,s=t.length){if(this.text=t,this.to=s,this.curLine="",this.done=!1,this.value=OH,/\\[sWDnr]|\n|\r|\[\^/.test(r))return new IH(t,r,n,i,s);this.re=new RegExp(r,j8+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.iter=t.iter();let o=t.lineAt(i);this.curLineStart=o.from,this.matchPos=vx(t,i),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let r=this.matchPos<=this.to&&this.re.exec(this.curLine);if(r){let n=this.curLineStart+r.index,i=n+r[0].length;if(this.matchPos=vx(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,r)))return this.value={from:n,to:i,match:r},this;t=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),t=0;else return this.done=!0,this}}}const j5=new WeakMap;class vf{constructor(t,r){this.from=t,this.text=r}get to(){return this.from+this.text.length}static get(t,r,n){let i=j5.get(t);if(!i||i.from>=n||i.to<=r){let a=new vf(r,t.sliceString(r,n));return j5.set(t,a),a}if(i.from==r&&i.to==n)return i;let{text:s,from:o}=i;return o>r&&(s=t.sliceString(r,o)+s,o=r),i.to<n&&(s+=t.sliceString(i.to,n)),j5.set(t,new vf(o,s)),new vf(r,s.slice(r-o,n-o))}}class IH{constructor(t,r,n,i,s){this.text=t,this.to=s,this.done=!1,this.value=OH,this.matchPos=vx(t,i),this.re=new RegExp(r,j8+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.flat=vf.get(t,i,this.chunkEnd(i+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,r=this.re.exec(this.flat.text);if(r&&!r[0]&&r.index==t&&(this.re.lastIndex=t+1,r=this.re.exec(this.flat.text)),r){let n=this.flat.from+r.index,i=n+r[0].length;if((this.flat.to>=this.to||r.index+r[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,i,r)))return this.value={from:n,to:i,match:r},this.matchPos=vx(this.text,i+(n==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=vf.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(DH.prototype[Symbol.iterator]=IH.prototype[Symbol.iterator]=function(){return this});function F2t(e){try{return new RegExp(e,j8),!0}catch{return!1}}function vx(e,t){if(t>=e.length)return t;let r=e.lineAt(t),n;for(;t<r.to&&(n=r.text.charCodeAt(t-r.from))>=56320&&n<57344;)t++;return t}function zC(e){let t=String(e.state.doc.lineAt(e.state.selection.main.head).number),r=ir("input",{class:"cm-textfield",name:"line",value:t}),n=ir("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),e.dispatch({effects:mm.of(!1)}),e.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},ir("label",e.state.phrase("Go to line"),": ",r)," ",ir("button",{class:"cm-button",type:"submit"},e.state.phrase("go")),ir("button",{name:"close",onclick:()=>{e.dispatch({effects:mm.of(!1)}),e.focus()},"aria-label":e.state.phrase("close"),type:"button"},[""]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(r.value);if(!s)return;let{state:o}=e,a=o.doc.lineAt(o.selection.main.head),[,l,c,h,u]=s,f=h?+h.slice(1):0,d=c?+c:a.number;if(c&&u){let g=d/100;l&&(g=g*(l=="-"?-1:1)+a.number/o.doc.lines),d=Math.round(o.doc.lines*g)}else c&&l&&(d=d*(l=="-"?-1:1)+a.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,d))),m=ot.cursor(p.from+Math.max(0,Math.min(f,p.length)));e.dispatch({effects:[mm.of(!1),$t.scrollIntoView(m.from,{y:"center"})],selection:m}),e.focus()}return{dom:n}}const mm=ke.define(),ZL=hn.define({create(){return!0},update(e,t){for(let r of t.effects)r.is(mm)&&(e=r.value);return e},provide:e=>Nm.from(e,t=>t?zC:null)}),$2t=e=>{let t=Pm(e,zC);if(!t){let r=[mm.of(!0)];e.state.field(ZL,!1)==null&&r.push(ke.appendConfig.of([ZL,z2t])),e.dispatch({effects:r}),t=Pm(e,zC)}return t&&t.dom.querySelector("input").select(),!0},z2t=$t.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),H2t={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},q2t=Nt.define({combine(e){return ra(e,H2t,{highlightWordAroundCursor:(t,r)=>t||r,minSelectionLength:Math.min,maxMatches:Math.min})}});function V2t(e){return[K2t,G2t]}const W2t=le.mark({class:"cm-selectionMatch"}),j2t=le.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function QL(e,t,r,n){return(r==0||e(t.sliceDoc(r-1,r))!=Cr.Word)&&(n==t.doc.length||e(t.sliceDoc(n,n+1))!=Cr.Word)}function U2t(e,t,r,n){return e(t.sliceDoc(r,r+1))==Cr.Word&&e(t.sliceDoc(n-1,n))==Cr.Word}const G2t=Ur.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(q2t),{state:r}=e,n=r.selection;if(n.ranges.length>1)return le.none;let i=n.main,s,o=null;if(i.empty){if(!t.highlightWordAroundCursor)return le.none;let l=r.wordAt(i.head);if(!l)return le.none;o=r.charCategorizer(i.head),s=r.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<t.minSelectionLength||l>200)return le.none;if(t.wholeWords){if(s=r.sliceDoc(i.from,i.to),o=r.charCategorizer(i.head),!(QL(o,r,i.from,i.to)&&U2t(o,r,i.from,i.to)))return le.none}else if(s=r.sliceDoc(i.from,i.to),!s)return le.none}let a=[];for(let l of e.visibleRanges){let c=new Sd(r.doc,s,l.from,l.to);for(;!c.next().done;){let{from:h,to:u}=c.value;if((!o||QL(o,r,h,u))&&(i.empty&&h<=i.from&&u>=i.to?a.push(j2t.range(h,u)):(h>=i.to||u<=i.from)&&a.push(W2t.range(h,u)),a.length>t.maxMatches))return le.none}}return le.set(a)}},{decorations:e=>e.decorations}),K2t=$t.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Y2t=({state:e,dispatch:t})=>{let{selection:r}=e,n=ot.create(r.ranges.map(i=>e.wordAt(i.head)||ot.cursor(i.head)),r.mainIndex);return n.eq(r)?!1:(t(e.update({selection:n})),!0)};function X2t(e,t){let{main:r,ranges:n}=e.selection,i=e.wordAt(r.head),s=i&&i.from==r.from&&i.to==r.to;for(let o=!1,a=new Sd(e.doc,t,n[n.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Sd(e.doc,t,0,Math.max(0,n[n.length-1].from-1)),o=!0}else{if(o&&n.some(l=>l.from==a.value.from))continue;if(s){let l=e.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const J2t=({state:e,dispatch:t})=>{let{ranges:r}=e.selection;if(r.some(s=>s.from===s.to))return Y2t({state:e,dispatch:t});let n=e.sliceDoc(r[0].from,r[0].to);if(e.selection.ranges.some(s=>e.sliceDoc(s.from,s.to)!=n))return!1;let i=X2t(e,n);return i?(t(e.update({selection:e.selection.addRange(ot.range(i.from,i.to),!1),effects:$t.scrollIntoView(i.to)})),!0):!1},Jd=Nt.define({combine(e){return ra(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:t=>new cbt(t),scrollToMatch:t=>$t.scrollIntoView(t)})}});class BH{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||F2t(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,(r,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new ebt(this):new Q2t(this)}getCursor(t,r=0,n){let i=t.doc?t:Sr.create({doc:t});return n==null&&(n=i.doc.length),this.regexp?Ju(this,i,r,n):Xu(this,i,r,n)}}class RH{constructor(t){this.spec=t}}function Xu(e,t,r,n){return new Sd(t.doc,e.unquoted,r,n,e.caseSensitive?void 0:i=>i.toLowerCase(),e.wholeWord?Z2t(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function Z2t(e,t){return(r,n,i,s)=>((s>r||s+i.length<n)&&(s=Math.max(0,r-2),i=e.sliceString(s,Math.min(e.length,n+2))),(t(wx(i,r-s))!=Cr.Word||t(kx(i,r-s))!=Cr.Word)&&(t(kx(i,n-s))!=Cr.Word||t(wx(i,n-s))!=Cr.Word))}class Q2t extends RH{constructor(t){super(t)}nextMatch(t,r,n){let i=Xu(this.spec,t,n,t.doc.length).nextOverlapping();if(i.done){let s=Math.min(t.doc.length,r+this.spec.unquoted.length);i=Xu(this.spec,t,0,s).nextOverlapping()}return i.done||i.value.from==r&&i.value.to==n?null:i.value}prevMatchInRange(t,r,n){for(let i=n;;){let s=Math.max(r,i-1e4-this.spec.unquoted.length),o=Xu(this.spec,t,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==r)return null;i-=1e4}}prevMatch(t,r,n){let i=this.prevMatchInRange(t,0,r);return i||(i=this.prevMatchInRange(t,Math.max(0,n-this.spec.unquoted.length),t.doc.length)),i&&(i.from!=r||i.to!=n)?i:null}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,r){let n=Xu(this.spec,t,0,t.doc.length),i=[];for(;!n.next().done;){if(i.length>=r)return null;i.push(n.value)}return i}highlight(t,r,n,i){let s=Xu(this.spec,t,Math.max(0,r-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,t.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Ju(e,t,r,n){return new DH(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?tbt(t.charCategorizer(t.selection.main.head)):void 0},r,n)}function wx(e,t){return e.slice(wn(e,t,!1),t)}function kx(e,t){return e.slice(t,wn(e,t))}function tbt(e){return(t,r,n)=>!n[0].length||(e(wx(n.input,n.index))!=Cr.Word||e(kx(n.input,n.index))!=Cr.Word)&&(e(kx(n.input,n.index+n[0].length))!=Cr.Word||e(wx(n.input,n.index+n[0].length))!=Cr.Word)}class ebt extends RH{nextMatch(t,r,n){let i=Ju(this.spec,t,n,t.doc.length).next();return i.done&&(i=Ju(this.spec,t,0,r).next()),i.done?null:i.value}prevMatchInRange(t,r,n){for(let i=1;;i++){let s=Math.max(r,n-i*1e4),o=Ju(this.spec,t,s,n),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==r||a.from>s+10))return a;if(s==r)return null}}prevMatch(t,r,n){return this.prevMatchInRange(t,0,r)||this.prevMatchInRange(t,n,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(r,n)=>{if(n=="&")return t.match[0];if(n=="$")return"$";for(let i=n.length;i>0;i--){let s=+n.slice(0,i);if(s>0&&s<t.match.length)return t.match[s]+n.slice(i)}return r})}matchAll(t,r){let n=Ju(this.spec,t,0,t.doc.length),i=[];for(;!n.next().done;){if(i.length>=r)return null;i.push(n.value)}return i}highlight(t,r,n,i){let s=Ju(this.spec,t,Math.max(0,r-250),Math.min(n+250,t.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const og=ke.define(),U8=ke.define(),rc=hn.define({create(e){return new U5(HC(e).create(),null)},update(e,t){for(let r of t.effects)r.is(og)?e=new U5(r.value.create(),e.panel):r.is(U8)&&(e=new U5(e.query,r.value?G8:null));return e},provide:e=>Nm.from(e,t=>t.panel)});class U5{constructor(t,r){this.query=t,this.panel=r}}const rbt=le.mark({class:"cm-searchMatch"}),nbt=le.mark({class:"cm-searchMatch cm-searchMatch-selected"}),ibt=Ur.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(rc))}update(e){let t=e.state.field(rc);(t!=e.startState.field(rc)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return le.none;let{view:r}=this,n=new Za;for(let i=0,s=r.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;e.highlight(r.state,a,l,(c,h)=>{let u=r.state.selection.ranges.some(f=>f.from==c&&f.to==h);n.add(c,h,u?nbt:rbt)})}return n.finish()}},{decorations:e=>e.decorations});function E1(e){return t=>{let r=t.state.field(rc,!1);return r&&r.query.spec.valid?e(t,r):FH(t)}}const Cx=E1((e,{query:t})=>{let{to:r}=e.state.selection.main,n=t.nextMatch(e.state,r,r);if(!n)return!1;let i=ot.single(n.from,n.to),s=e.state.facet(Jd);return e.dispatch({selection:i,effects:[K8(e,n),s.scrollToMatch(i.main,e)],userEvent:"select.search"}),NH(e),!0}),Sx=E1((e,{query:t})=>{let{state:r}=e,{from:n}=r.selection.main,i=t.prevMatch(r,n,n);if(!i)return!1;let s=ot.single(i.from,i.to),o=e.state.facet(Jd);return e.dispatch({selection:s,effects:[K8(e,i),o.scrollToMatch(s.main,e)],userEvent:"select.search"}),NH(e),!0}),sbt=E1((e,{query:t})=>{let r=t.matchAll(e.state,1e3);return!r||!r.length?!1:(e.dispatch({selection:ot.create(r.map(n=>ot.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),obt=({state:e,dispatch:t})=>{let r=e.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:n,to:i}=r.main,s=[],o=0;for(let a=new Sd(e.doc,e.sliceDoc(n,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==n&&(o=s.length),s.push(ot.range(a.value.from,a.value.to))}return t(e.update({selection:ot.create(s,o),userEvent:"select.search.matches"})),!0},tO=E1((e,{query:t})=>{let{state:r}=e,{from:n,to:i}=r.selection.main;if(r.readOnly)return!1;let s=t.nextMatch(r,n,n);if(!s)return!1;let o=s,a=[],l,c,h=[];o.from==n&&o.to==i&&(c=r.toText(t.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=t.nextMatch(r,o.from,o.to),h.push($t.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(n).number)+".")));let u=e.state.changes(a);return o&&(l=ot.single(o.from,o.to).map(u),h.push(K8(e,o)),h.push(r.facet(Jd).scrollToMatch(l.main,e))),e.dispatch({changes:u,selection:l,effects:h,userEvent:"input.replace"}),!0}),abt=E1((e,{query:t})=>{if(e.state.readOnly)return!1;let r=t.matchAll(e.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:t.getReplacement(i)}});if(!r.length)return!1;let n=e.state.phrase("replaced $ matches",r.length)+".";return e.dispatch({changes:r,effects:$t.announce.of(n),userEvent:"input.replace.all"}),!0});function G8(e){return e.state.facet(Jd).createPanel(e)}function HC(e,t){var r,n,i,s,o;let a=e.selection.main,l=a.empty||a.to>a.from+100?"":e.sliceDoc(a.from,a.to);if(t&&!l)return t;let c=e.facet(Jd);return new BH({search:((r=t==null?void 0:t.literal)!==null&&r!==void 0?r:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(n=t==null?void 0:t.caseSensitive)!==null&&n!==void 0?n:c.caseSensitive,literal:(i=t==null?void 0:t.literal)!==null&&i!==void 0?i:c.literal,regexp:(s=t==null?void 0:t.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=t==null?void 0:t.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function PH(e){let t=Pm(e,G8);return t&&t.dom.querySelector("[main-field]")}function NH(e){let t=PH(e);t&&t==e.root.activeElement&&t.select()}const FH=e=>{let t=e.state.field(rc,!1);if(t&&t.panel){let r=PH(e);if(r&&r!=e.root.activeElement){let n=HC(e.state,t.query.spec);n.valid&&e.dispatch({effects:og.of(n)}),r.focus(),r.select()}}else e.dispatch({effects:[U8.of(!0),t?og.of(HC(e.state,t.query.spec)):ke.appendConfig.of(ubt)]});return!0},$H=e=>{let t=e.state.field(rc,!1);if(!t||!t.panel)return!1;let r=Pm(e,G8);return r&&r.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:U8.of(!1)}),!0},lbt=[{key:"Mod-f",run:FH,scope:"editor search-panel"},{key:"F3",run:Cx,shift:Sx,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Cx,shift:Sx,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:$H,scope:"editor search-panel"},{key:"Mod-Shift-l",run:obt},{key:"Mod-Alt-g",run:$2t},{key:"Mod-d",run:J2t,preventDefault:!0}];class cbt{constructor(t){this.view=t;let r=this.query=t.state.field(rc).query.spec;this.commit=this.commit.bind(this),this.searchField=ir("input",{value:r.search,placeholder:$i(t,"Find"),"aria-label":$i(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ir("input",{value:r.replace,placeholder:$i(t,"Replace"),"aria-label":$i(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ir("input",{type:"checkbox",name:"case",form:"",checked:r.caseSensitive,onchange:this.commit}),this.reField=ir("input",{type:"checkbox",name:"re",form:"",checked:r.regexp,onchange:this.commit}),this.wordField=ir("input",{type:"checkbox",name:"word",form:"",checked:r.wholeWord,onchange:this.commit});function n(i,s,o){return ir("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=ir("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,n("next",()=>Cx(t),[$i(t,"next")]),n("prev",()=>Sx(t),[$i(t,"previous")]),n("select",()=>sbt(t),[$i(t,"all")]),ir("label",null,[this.caseField,$i(t,"match case")]),ir("label",null,[this.reField,$i(t,"regexp")]),ir("label",null,[this.wordField,$i(t,"by word")]),...t.state.readOnly?[]:[ir("br"),this.replaceField,n("replace",()=>tO(t),[$i(t,"replace")]),n("replaceAll",()=>abt(t),[$i(t,"replace all")])],ir("button",{name:"close",onclick:()=>$H(t),"aria-label":$i(t,"close"),type:"button"},[""])])}commit(){let t=new BH({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:og.of(t)}))}keydown(t){Oet(this.view,t,"search-panel")?t.preventDefault():t.keyCode==13&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?Sx:Cx)(this.view)):t.keyCode==13&&t.target==this.replaceField&&(t.preventDefault(),tO(this.view))}update(t){for(let r of t.transactions)for(let n of r.effects)n.is(og)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Jd).top}}function $i(e,t){return e.state.phrase(t)}const By=30,Ry=/[\s\.,:;?!]/;function K8(e,{from:t,to:r}){let n=e.state.doc.lineAt(t),i=e.state.doc.lineAt(r).to,s=Math.max(n.from,t-By),o=Math.min(i,r+By),a=e.state.sliceDoc(s,o);if(s!=n.from){for(let l=0;l<By;l++)if(!Ry.test(a[l+1])&&Ry.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-By;l--)if(!Ry.test(a[l-1])&&Ry.test(a[l])){a=a.slice(0,l);break}}return $t.announce.of(`${e.state.phrase("current match")}. ${a} ${e.state.phrase("on line")} ${n.number}.`)}const hbt=$t.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),ubt=[rc,Cc.low(ibt),hbt];class zH{constructor(t,r,n,i){this.state=t,this.pos=r,this.explicit=n,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(t){let r=kn(this.state).resolveInner(this.pos,-1);for(;r&&t.indexOf(r.name)<0;)r=r.parent;return r?{from:r.from,to:this.pos,text:this.state.sliceDoc(r.from,this.pos),type:r.type}:null}matchBefore(t){let r=this.state.doc.lineAt(this.pos),n=Math.max(r.from,this.pos-250),i=r.text.slice(n-r.from,this.pos-r.from),s=i.search(HH(t,!1));return s<0?null:{from:n+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(t,r,n){t=="abort"&&this.abortListeners&&(this.abortListeners.push(r),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function eO(e){let t=Object.keys(e).join(""),r=/\w/.test(t);return r&&(t=t.replace(/\w/g,"")),`[${r?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function fbt(e){let t=Object.create(null),r=Object.create(null);for(let{label:i}of e){t[i[0]]=!0;for(let s=1;s<i.length;s++)r[i[s]]=!0}let n=eO(t)+eO(r)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function dbt(e){let t=e.map(i=>typeof i=="string"?{label:i}:i),[r,n]=t.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:fbt(t);return i=>{let s=i.matchBefore(n);return s||i.explicit?{from:s?s.from:i.pos,options:t,validFor:r}:null}}function ZEt(e,t){return r=>{for(let n=kn(r.state).resolveInner(r.pos,-1);n;n=n.parent){if(e.indexOf(n.name)>-1)return null;if(n.type.isTop)break}return t(r)}}class rO{constructor(t,r,n,i){this.completion=t,this.source=r,this.match=n,this.score=i}}function jh(e){return e.selection.main.from}function HH(e,t){var r;let{source:n}=e,i=t&&n[0]!="^",s=n[n.length-1]!="$";return!i&&!s?e:new RegExp(`${i?"^":""}(?:${n})${s?"$":""}`,(r=e.flags)!==null&&r!==void 0?r:e.ignoreCase?"i":"")}const Y8=fl.define();function pbt(e,t,r,n){let{main:i}=e.selection,s=r-i.from,o=n-i.from;return{...e.changeByRange(a=>{if(a!=i&&r!=n&&e.sliceDoc(a.from+s,a.from+o)!=e.sliceDoc(r,n))return{range:a};let l=e.toText(t);return{changes:{from:a.from+s,to:n==i.from?a.to:a.from+o,insert:l},range:ot.cursor(a.from+s+l.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const nO=new WeakMap;function mbt(e){if(!Array.isArray(e))return e;let t=nO.get(e);return t||nO.set(e,t=dbt(e)),t}const Tx=ke.define(),ag=ke.define();class gbt{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let r=0;r<t.length;){let n=Ci(t,r),i=Ro(n);this.chars.push(n);let s=t.slice(r,r+i),o=s.toUpperCase();this.folded.push(Ci(o==s?s.toLowerCase():o,0)),r+=i}this.astral=t.length!=this.chars.length}ret(t,r){return this.score=t,this.matched=r,this}match(t){if(this.pattern.length==0)return this.ret(-100,[]);if(t.length<this.pattern.length)return null;let{chars:r,folded:n,any:i,precise:s,byWord:o}=this;if(r.length==1){let b=Ci(t,0),x=Ro(b),T=x==t.length?0:-100;if(b!=r[0])if(b==n[0])T+=-200;else return null;return this.ret(T,[0,x])}let a=t.indexOf(this.pattern);if(a==0)return this.ret(t.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=r.length,c=0;if(a<0){for(let b=0,x=Math.min(t.length,200);b<x&&c<l;){let T=Ci(t,b);(T==r[c]||T==n[c])&&(i[c++]=b),b+=Ro(T)}if(c<l)return null}let h=0,u=0,f=!1,d=0,p=-1,m=-1,g=/[a-z]/.test(t),y=!0;for(let b=0,x=Math.min(t.length,200),T=0;b<x&&u<l;){let S=Ci(t,b);a<0&&(h<l&&S==r[h]&&(s[h++]=b),d<l&&(S==r[d]||S==n[d]?(d==0&&(p=b),m=b+1,d++):d=0));let w,_=S<255?S>=48&&S<=57||S>=97&&S<=122?2:S>=65&&S<=90?1:0:(w=o7(S))!=w.toLowerCase()?1:w!=w.toUpperCase()?2:0;(!b||_==1&&g||T==0&&_!=0)&&(r[u]==S||n[u]==S&&(f=!0)?o[u++]=b:o.length&&(y=!1)),T=_,b+=Ro(S)}return u==l&&o[0]==0&&y?this.result(-100+(f?-200:0),o,t):d==l&&p==0?this.ret(-200-t.length+(m==t.length?0:-100),[0,m]):a>-1?this.ret(-700-t.length,[a,a+this.pattern.length]):d==l?this.ret(-900-t.length,[p,m]):u==l?this.result(-100+(f?-200:0)+-700+(y?0:-1100),o,t):r.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,t)}result(t,r,n){let i=[],s=0;for(let o of r){let a=o+(this.astral?Ro(Ci(n,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(t-n.length,i)}}class ybt{constructor(t){this.pattern=t,this.matched=[],this.score=0,this.folded=t.toLowerCase()}match(t){if(t.length<this.pattern.length)return null;let r=t.slice(0,this.pattern.length),n=r==this.pattern?0:r.toLowerCase()==this.folded?-200:null;return n==null?null:(this.matched=[0,r.length],this.score=n+(t.length==this.pattern.length?0:-100),this)}}const on=Nt.define({combine(e){return ra(e,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:bbt,filterStrict:!1,compareCompletions:(t,r)=>(t.sortText||t.label).localeCompare(r.sortText||r.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(t,r)=>t&&r,closeOnBlur:(t,r)=>t&&r,icons:(t,r)=>t&&r,tooltipClass:(t,r)=>n=>iO(t(n),r(n)),optionClass:(t,r)=>n=>iO(t(n),r(n)),addToOptions:(t,r)=>t.concat(r),filterStrict:(t,r)=>t||r})}});function iO(e,t){return e?t?e+" "+t:e:t}function bbt(e,t,r,n,i,s){let o=e.textDirection==br.RTL,a=o,l=!1,c="top",h,u,f=t.left-i.left,d=i.right-t.right,p=n.right-n.left,m=n.bottom-n.top;if(a&&f<Math.min(p,d)?a=!1:!a&&d<Math.min(p,f)&&(a=!0),p<=(a?f:d))h=Math.max(i.top,Math.min(r.top,i.bottom-m))-t.top,u=Math.min(400,a?f:d);else{l=!0,u=Math.min(400,(o?t.right:i.right-t.left)-30);let b=i.bottom-t.bottom;b>=m||b>t.top?h=r.bottom-t.top:(c="bottom",h=t.bottom-r.top)}let g=(t.bottom-t.top)/s.offsetHeight,y=(t.right-t.left)/s.offsetWidth;return{style:`${c}: ${h/g}px; max-width: ${u/y}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function xbt(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(r){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),r.type&&n.classList.add(...r.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),n.setAttribute("aria-hidden","true"),n},position:20}),t.push({render(r,n,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=r.displayLabel||r.label,l=0;for(let c=0;c<s.length;){let h=s[c++],u=s[c++];h>l&&o.appendChild(document.createTextNode(a.slice(l,h)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(h,u))),f.className="cm-completionMatchedText",l=u}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(r){if(!r.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=r.detail,n},position:80}),t.sort((r,n)=>r.position-n.position).map(r=>r.render)}function G5(e,t,r){if(e<=r)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let i=Math.floor(t/r);return{from:i*r,to:(i+1)*r}}let n=Math.floor((e-t)/r);return{from:e-(n+1)*r,to:e-n*r}}class vbt{constructor(t,r,n){this.view=t,this.stateField=r,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=t.state.field(r),{options:s,selected:o}=i.open,a=t.state.facet(on);this.optionContent=xbt(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=G5(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=t.state.field(r).open;for(let h=l.target,u;h&&h!=this.dom;h=h.parentNode)if(h.nodeName=="LI"&&(u=/-(\d+)$/.exec(h.id))&&+u[1]<c.length){this.applyCompletion(t,c[+u[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=t.state.field(this.stateField,!1);c&&c.tooltip&&t.state.facet(on).closeOnBlur&&l.relatedTarget!=t.contentDOM&&t.dispatch({effects:ag.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(t,r){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t,r,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(t){var r;let n=t.state.field(this.stateField),i=t.startState.field(this.stateField);if(this.updateTooltipClass(t.state),n!=i){let{options:s,selected:o,disabled:a}=n.open;(!i.open||i.open.options!=s)&&(this.range=G5(s.length,o,t.state.facet(on).maxRenderedOptions),this.showOptions(s,n.id)),this.updateSel(),a!=((r=i.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(t){let r=this.tooltipClass(t);if(r!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of r.split(" "))n&&this.dom.classList.add(n);this.currentClass=r}}positioned(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let t=this.view.state.field(this.stateField),r=t.open;(r.selected>-1&&r.selected<this.range.from||r.selected>=this.range.to)&&(this.range=G5(r.options.length,r.selected,this.view.state.facet(on).maxRenderedOptions),this.showOptions(r.options,t.id));let n=this.updateSelectedOption(r.selected);if(n){this.destroyInfo();let{completion:i}=r.options[r.selected],{info:s}=i;if(!s)return;let o=typeof s=="string"?document.createTextNode(s):s(i);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(a,i)}).catch(a=>Mi(this.view.state,a,"completion info")):(this.addInfoPane(o,i),n.setAttribute("aria-describedby",this.info.id))}}addInfoPane(t,r){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",n.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),t.nodeType!=null)n.appendChild(t),this.infoDestroy=null;else{let{dom:i,destroy:s}=t;n.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(t){let r=null;for(let n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)n.nodeName!="LI"||!n.id?i--:i==t?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),r=n):n.hasAttribute("aria-selected")&&(n.removeAttribute("aria-selected"),n.removeAttribute("aria-describedby"));return r&&kbt(this.list,r),r}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let r=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=t.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(s.bottom,r.bottom)-10||i.bottom<Math.max(s.top,r.top)+10?null:this.view.state.facet(on).positionInfo(this.view,r,i,n,s,this.dom)}placeInfo(t){this.info&&(t?(t.style&&(this.info.style.cssText=t.style),this.info.className="cm-tooltip cm-completionInfo "+(t.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(t,r,n){const i=document.createElement("ul");i.id=r,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let s=null;for(let o=n.from;o<n.to;o++){let{completion:a,match:l}=t[o],{section:c}=a;if(c){let f=typeof c=="string"?c:c.name;if(f!=s&&(o>n.from||n.from==0))if(s=f,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let d=i.appendChild(document.createElement("completion-section"));d.textContent=f}}const h=i.appendChild(document.createElement("li"));h.id=r+"-"+o,h.setAttribute("role","option");let u=this.optionClass(a);u&&(h.className=u);for(let f of this.optionContent){let d=f(a,this.view.state,this.view,l);d&&h.appendChild(d)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<t.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function wbt(e,t){return r=>new vbt(r,e,t)}function kbt(e,t){let r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),i=r.height/e.offsetHeight;n.top<r.top?e.scrollTop-=(r.top-n.top)/i:n.bottom>r.bottom&&(e.scrollTop+=(n.bottom-r.bottom)/i)}function sO(e){return(e.boost||0)*100+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}function Cbt(e,t){let r=[],n=null,i=null,s=h=>{r.push(h);let{section:u}=h.completion;if(u){n||(n=[]);let f=typeof u=="string"?u:u.name;n.some(d=>d.name==f)||n.push(typeof u=="string"?{name:f}:u)}},o=t.facet(on);for(let h of e)if(h.hasResult()){let u=h.result.getMatch;if(h.result.filter===!1)for(let f of h.result.options)s(new rO(f,h.source,u?u(f):[],1e9-r.length));else{let f=t.sliceDoc(h.from,h.to),d,p=o.filterStrict?new ybt(f):new gbt(f);for(let m of h.result.options)if(d=p.match(m.label)){let g=m.displayLabel?u?u(m,d.matched):[]:d.matched,y=d.score+(m.boost||0);if(s(new rO(m,h.source,g,y)),typeof m.section=="object"&&m.section.rank==="dynamic"){let{name:b}=m.section;i||(i=Object.create(null)),i[b]=Math.max(y,i[b]||-1e9)}}}}if(n){let h=Object.create(null),u=0,f=(d,p)=>(d.rank==="dynamic"&&p.rank==="dynamic"?i[p.name]-i[d.name]:0)||(typeof d.rank=="number"?d.rank:1e9)-(typeof p.rank=="number"?p.rank:1e9)||(d.name<p.name?-1:1);for(let d of n.sort(f))u-=1e5,h[d.name]=u;for(let d of r){let{section:p}=d.completion;p&&(d.score+=h[typeof p=="string"?p:p.name])}}let a=[],l=null,c=o.compareCompletions;for(let h of r.sort((u,f)=>f.score-u.score||c(u.completion,f.completion))){let u=h.completion;!l||l.label!=u.label||l.detail!=u.detail||l.type!=null&&u.type!=null&&l.type!=u.type||l.apply!=u.apply||l.boost!=u.boost?a.push(h):sO(h.completion)>sO(l)&&(a[a.length-1]=h),l=h.completion}return a}class of{constructor(t,r,n,i,s,o){this.options=t,this.attrs=r,this.tooltip=n,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(t,r){return t==this.selected||t>=this.options.length?this:new of(this.options,oO(r,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,r,n,i,s,o){if(i&&!o&&t.some(c=>c.isPending))return i.setDisabled();let a=Cbt(t,r);if(!a.length)return i&&t.some(c=>c.isPending)?i.setDisabled():null;let l=r.facet(on).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let c=i.options[i.selected].completion;for(let h=0;h<a.length;h++)if(a[h].completion==c){l=h;break}}return new of(a,oO(n,l),{pos:t.reduce((c,h)=>h.hasResult()?Math.min(c,h.from):c,1e8),create:Ebt,above:s.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(t){return new of(this.options,this.attrs,{...this.tooltip,pos:t.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new of(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class _x{constructor(t,r,n){this.active=t,this.id=r,this.open=n}static start(){return new _x(Mbt,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(t){let{state:r}=t,n=r.facet(on),s=(n.override||r.languageDataAt("autocomplete",jh(r)).map(mbt)).map(l=>(this.active.find(h=>h.source==l)||new vs(l,this.active.some(h=>h.state!=0)?1:0)).update(t,n));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open,a=t.effects.some(l=>l.is(X8));o&&t.docChanged&&(o=o.map(t.changes)),t.selection||s.some(l=>l.hasResult()&&t.changes.touchesRange(l.from,l.to))||!Sbt(s,this.active)||a?o=of.build(s,r,this.id,o,n,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new vs(l.source,0):l));for(let l of t.effects)l.is(VH)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new _x(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Tbt:_bt}}function Sbt(e,t){if(e==t)return!0;for(let r=0,n=0;;){for(;r<e.length&&!e[r].hasResult();)r++;for(;n<t.length&&!t[n].hasResult();)n++;let i=r==e.length,s=n==t.length;if(i||s)return i==s;if(e[r++].result!=t[n++].result)return!1}}const Tbt={"aria-autocomplete":"list"},_bt={};function oO(e,t){let r={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(r["aria-activedescendant"]=e+"-"+t),r}const Mbt=[];function qH(e,t){if(e.isUserEvent("input.complete")){let n=e.annotation(Y8);if(n&&t.activateOnCompletion(n))return 12}let r=e.isUserEvent("input.type");return r&&t.activateOnTyping?5:r?1:e.isUserEvent("delete.backward")?2:e.selection?8:e.docChanged?16:0}class vs{constructor(t,r,n=!1){this.source=t,this.state=r,this.explicit=n}hasResult(){return!1}get isPending(){return this.state==1}update(t,r){let n=qH(t,r),i=this;(n&8||n&16&&this.touches(t))&&(i=new vs(i.source,0)),n&4&&i.state==0&&(i=new vs(this.source,1)),i=i.updateFor(t,n);for(let s of t.effects)if(s.is(Tx))i=new vs(i.source,1,s.value);else if(s.is(ag))i=new vs(i.source,0);else if(s.is(X8))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(t,r){return this.map(t.changes)}map(t){return this}touches(t){return t.changes.touchesRange(jh(t.state))}}class wf extends vs{constructor(t,r,n,i,s,o){super(t,3,r),this.limit=n,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(t,r){var n;if(!(r&3))return this.map(t.changes);let i=this.result;i.map&&!t.changes.empty&&(i=i.map(i,t.changes));let s=t.changes.mapPos(this.from),o=t.changes.mapPos(this.to,1),a=jh(t.state);if(a>o||!i||r&2&&(jh(t.startState)==this.from||a<this.limit))return new vs(this.source,r&4?1:0);let l=t.changes.mapPos(this.limit);return Abt(i.validFor,t.state,s,o)?new wf(this.source,this.explicit,l,i,s,o):i.update&&(i=i.update(i,s,o,new zH(t.state,a,!1)))?new wf(this.source,this.explicit,l,i,i.from,(n=i.to)!==null&&n!==void 0?n:jh(t.state)):new vs(this.source,1,this.explicit)}map(t){return t.empty?this:(this.result.map?this.result.map(this.result,t):this.result)?new wf(this.source,this.explicit,t.mapPos(this.limit),this.result,t.mapPos(this.from),t.mapPos(this.to,1)):new vs(this.source,0)}touches(t){return t.changes.touchesRange(this.from,this.to)}}function Abt(e,t,r,n){if(!e)return!1;let i=t.sliceDoc(r,n);return typeof e=="function"?e(i,r,n,t):HH(e,!0).test(i)}const X8=ke.define({map(e,t){return e.map(r=>r.map(t))}}),VH=ke.define(),Si=hn.define({create(){return _x.start()},update(e,t){return e.update(t)},provide:e=>[v7.from(e,t=>t.tooltip),$t.contentAttributes.from(e,t=>t.attrs)]});function J8(e,t){const r=t.completion.apply||t.completion.label;let n=e.state.field(Si).active.find(i=>i.source==t.source);return n instanceof wf?(typeof r=="string"?e.dispatch({...pbt(e.state,r,n.from,n.to),annotations:Y8.of(t.completion)}):r(e,t.completion,n.from,n.to),!0):!1}const Ebt=wbt(Si,J8);function Py(e,t="option"){return r=>{let n=r.state.field(Si,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<r.state.facet(on).interactionDelay)return!1;let i=1,s;t=="page"&&(s=CR(r,n.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=n.open.options,a=n.open.selected>-1?n.open.selected+i*(e?1:-1):e?0:o-1;return a<0?a=t=="page"?0:o-1:a>=o&&(a=t=="page"?o-1:0),r.dispatch({effects:VH.of(a)}),!0}}const Lbt=e=>{let t=e.state.field(Si,!1);return e.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<e.state.facet(on).interactionDelay?!1:J8(e,t.open.options[t.open.selected])},K5=e=>e.state.field(Si,!1)?(e.dispatch({effects:Tx.of(!0)}),!0):!1,Obt=e=>{let t=e.state.field(Si,!1);return!t||!t.active.some(r=>r.state!=0)?!1:(e.dispatch({effects:ag.of(null)}),!0)};class Dbt{constructor(t,r){this.active=t,this.context=r,this.time=Date.now(),this.updates=[],this.done=void 0}}const Ibt=50,Bbt=1e3,Rbt=Ur.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let t of e.state.field(Si).active)t.isPending&&this.startQuery(t)}update(e){let t=e.state.field(Si),r=e.state.facet(on);if(!e.selectionSet&&!e.docChanged&&e.startState.field(Si)==t)return;let n=e.transactions.some(s=>{let o=qH(s,r);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(n||o.context.abortOnDocChange&&e.docChanged||o.updates.length+e.transactions.length>Ibt&&Date.now()-o.time>Bbt){for(let a of o.context.abortListeners)try{a()}catch(l){Mi(this.view.state,l)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some(s=>s.effects.some(o=>o.is(Tx)))&&(this.pendingStart=!0);let i=this.pendingStart?50:r.activateOnTypingDelay;if(this.debounceUpdate=t.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of e.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:e}=this.view,t=e.field(Si);for(let r of t.active)r.isPending&&!this.running.some(n=>n.active.source==r.source)&&this.startQuery(r);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(on).updateSyncTime))}startQuery(e){let{state:t}=this.view,r=jh(t),n=new zH(t,r,e.explicit,this.view),i=new Dbt(e,n);this.running.push(i),Promise.resolve(e.source(n)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:ag.of(null)}),Mi(this.view.state,s)})}scheduleAccept(){this.running.every(e=>e.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(on).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],r=this.view.state.facet(on),n=this.view.state.field(Si);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let a=jh(s.updates.length?s.updates[0].startState:this.view.state),l=Math.min(a,s.done.from+(s.active.explicit?0:1)),c=new wf(s.active.source,s.active.explicit,l,s.done,s.done.from,(e=s.done.to)!==null&&e!==void 0?e:a);for(let h of s.updates)c=c.update(h,r);if(c.hasResult()){t.push(c);continue}}let o=n.active.find(a=>a.source==s.active.source);if(o&&o.isPending)if(s.done==null){let a=new vs(s.active.source,0);for(let l of s.updates)a=a.update(l,r);a.isPending||t.push(a)}else this.startQuery(o)}(t.length||n.open&&n.open.disabled)&&this.view.dispatch({effects:X8.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(Si,!1);if(t&&t.tooltip&&this.view.state.facet(on).closeOnBlur){let r=t.open&&CR(this.view,t.open.tooltip);(!r||!r.dom.contains(e.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:ag.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Tx.of(!1)}),20),this.composing=0}}}),Pbt=typeof navigator=="object"&&/Win/.test(navigator.platform),Nbt=Cc.highest($t.domEventHandlers({keydown(e,t){let r=t.state.field(Si,!1);if(!r||!r.open||r.open.disabled||r.open.selected<0||e.key.length>1||e.ctrlKey&&!(Pbt&&e.altKey)||e.metaKey)return!1;let n=r.open.options[r.open.selected],i=r.active.find(o=>o.source==n.source),s=n.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(e.key)>-1&&J8(t,n),!1}})),WH=$t.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class Fbt{constructor(t,r,n,i){this.field=t,this.line=r,this.from=n,this.to=i}}class Z8{constructor(t,r,n){this.field=t,this.from=r,this.to=n}map(t){let r=t.mapPos(this.from,-1,vn.TrackDel),n=t.mapPos(this.to,1,vn.TrackDel);return r==null||n==null?null:new Z8(this.field,r,n)}}class Q8{constructor(t,r){this.lines=t,this.fieldPositions=r}instantiate(t,r){let n=[],i=[r],s=t.doc.lineAt(r),o=/^\s*/.exec(s.text)[0];for(let l of this.lines){if(n.length){let c=o,h=/^\t*/.exec(l)[0].length;for(let u=0;u<h;u++)c+=t.facet(_v);i.push(r+c.length-h),l=c+l.slice(h)}n.push(l),r+=l.length+1}let a=this.fieldPositions.map(l=>new Z8(l.field,i[l.line]+l.from,i[l.line]+l.to));return{text:n,ranges:a}}static parse(t){let r=[],n=[],i=[],s;for(let o of t.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(o);){let a=s[1]?+s[1]:null,l=s[2]||s[3]||"",c=-1,h=l.replace(/\\[{}]/g,u=>u[1]);for(let u=0;u<r.length;u++)(a!=null?r[u].seq==a:h&&r[u].name==h)&&(c=u);if(c<0){let u=0;for(;u<r.length&&(a==null||r[u].seq!=null&&r[u].seq<a);)u++;r.splice(u,0,{seq:a,name:h}),c=u;for(let f of i)f.field>=c&&f.field++}for(let u of i)if(u.line==n.length&&u.from>s.index){let f=s[2]?3+(s[1]||"").length:2;u.from-=f,u.to-=f}i.push(new Fbt(c,n.length,s.index,s.index+h.length)),o=o.slice(0,s.index)+l+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(a,l,c)=>{for(let h of i)h.line==n.length&&h.from>c&&(h.from--,h.to--);return l}),n.push(o)}return new Q8(n,i)}}let $bt=le.widget({widget:new class extends dl{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),zbt=le.mark({class:"cm-snippetField"});class Zd{constructor(t,r){this.ranges=t,this.active=r,this.deco=le.set(t.map(n=>(n.from==n.to?$bt:zbt).range(n.from,n.to)),!0)}map(t){let r=[];for(let n of this.ranges){let i=n.map(t);if(!i)return null;r.push(i)}return new Zd(r,this.active)}selectionInsideField(t){return t.ranges.every(r=>this.ranges.some(n=>n.field==this.active&&n.from<=r.from&&n.to>=r.to))}}const L1=ke.define({map(e,t){return e&&e.map(t)}}),Hbt=ke.define(),lg=hn.define({create(){return null},update(e,t){for(let r of t.effects){if(r.is(L1))return r.value;if(r.is(Hbt)&&e)return new Zd(e.ranges,r.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>$t.decorations.from(e,t=>t?t.deco:le.none)});function t9(e,t){return ot.create(e.filter(r=>r.field==t).map(r=>ot.range(r.from,r.to)))}function qbt(e){let t=Q8.parse(e);return(r,n,i,s)=>{let{text:o,ranges:a}=t.instantiate(r.state,i),{main:l}=r.state.selection,c={changes:{from:i,to:s==l.from?l.to:s,insert:Ve.of(o)},scrollIntoView:!0,annotations:n?[Y8.of(n),si.userEvent.of("input.complete")]:void 0};if(a.length&&(c.selection=t9(a,0)),a.some(h=>h.field>0)){let h=new Zd(a,0),u=c.effects=[L1.of(h)];r.state.field(lg,!1)===void 0&&u.push(ke.appendConfig.of([lg,Gbt,Kbt,WH]))}r.dispatch(r.state.update(c))}}function jH(e){return({state:t,dispatch:r})=>{let n=t.field(lg,!1);if(!n||e<0&&n.active==0)return!1;let i=n.active+e,s=e>0&&!n.ranges.some(o=>o.field==i+e);return r(t.update({selection:t9(n.ranges,i),effects:L1.of(s?null:new Zd(n.ranges,i)),scrollIntoView:!0})),!0}}const Vbt=({state:e,dispatch:t})=>e.field(lg,!1)?(t(e.update({effects:L1.of(null)})),!0):!1,Wbt=jH(1),jbt=jH(-1),Ubt=[{key:"Tab",run:Wbt,shift:jbt},{key:"Escape",run:Vbt}],aO=Nt.define({combine(e){return e.length?e[0]:Ubt}}),Gbt=Cc.highest(zd.compute([aO],e=>e.facet(aO)));function QEt(e,t){return{...t,apply:qbt(e)}}const Kbt=$t.domEventHandlers({mousedown(e,t){let r=t.state.field(lg,!1),n;if(!r||(n=t.posAtCoords({x:e.clientX,y:e.clientY}))==null)return!1;let i=r.ranges.find(s=>s.from<=n&&s.to>=n);return!i||i.field==r.active?!1:(t.dispatch({selection:t9(r.ranges,i.field),effects:L1.of(r.ranges.some(s=>s.field>i.field)?new Zd(r.ranges,i.field):null),scrollIntoView:!0}),!0)}}),cg={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},mh=ke.define({map(e,t){let r=t.mapPos(e,-1,vn.TrackAfter);return r??void 0}}),e9=new class extends Yh{};e9.startSide=1;e9.endSide=-1;const UH=hn.define({create(){return ze.empty},update(e,t){if(e=e.map(t.changes),t.selection){let r=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:n=>n>=r.from&&n<=r.to})}for(let r of t.effects)r.is(mh)&&(e=e.update({add:[e9.range(r.value,r.value+1)]}));return e}});function Ybt(){return[Jbt,UH]}const Y5="()[]{}<>";function GH(e){for(let t=0;t<Y5.length;t+=2)if(Y5.charCodeAt(t)==e)return Y5.charAt(t+1);return o7(e<128?e:e+1)}function KH(e,t){return e.languageDataAt("closeBrackets",t)[0]||cg}const Xbt=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Jbt=$t.inputHandler.of((e,t,r,n)=>{if((Xbt?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let i=e.state.selection.main;if(n.length>2||n.length==2&&Ro(Ci(n,0))==1||t!=i.from||r!=i.to)return!1;let s=txt(e.state,n);return s?(e.dispatch(s),!0):!1}),Zbt=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=KH(e,e.selection.main.head).brackets||cg.brackets,i=null,s=e.changeByRange(o=>{if(o.empty){let a=ext(e.doc,o.head);for(let l of n)if(l==a&&_4(e.doc,o.head)==GH(Ci(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:ot.cursor(o.head-l.length)}}return{range:i=o}});return i||t(e.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},Qbt=[{key:"Backspace",run:Zbt}];function txt(e,t){let r=KH(e,e.selection.main.head),n=r.brackets||cg.brackets;for(let i of n){let s=GH(Ci(i,0));if(t==i)return s==i?ixt(e,i,n.indexOf(i+i+i)>-1,r):rxt(e,i,s,r.before||cg.before);if(t==s&&YH(e,e.selection.main.from))return nxt(e,i,s)}return null}function YH(e,t){let r=!1;return e.field(UH).between(0,e.doc.length,n=>{n==t&&(r=!0)}),r}function _4(e,t){let r=e.sliceString(t,t+2);return r.slice(0,Ro(Ci(r,0)))}function ext(e,t){let r=e.sliceString(t-2,t);return Ro(Ci(r,0))==r.length?r:r.slice(1)}function rxt(e,t,r,n){let i=null,s=e.changeByRange(o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:r,from:o.to}],effects:mh.of(o.to+t.length),range:ot.range(o.anchor+t.length,o.head+t.length)};let a=_4(e.doc,o.head);return!a||/\s/.test(a)||n.indexOf(a)>-1?{changes:{insert:t+r,from:o.head},effects:mh.of(o.head+t.length),range:ot.cursor(o.head+t.length)}:{range:i=o}});return i?null:e.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function nxt(e,t,r){let n=null,i=e.changeByRange(s=>s.empty&&_4(e.doc,s.head)==r?{changes:{from:s.head,to:s.head+r.length,insert:r},range:ot.cursor(s.head+r.length)}:n={range:s});return n?null:e.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function ixt(e,t,r,n){let i=n.stringPrefixes||cg.stringPrefixes,s=null,o=e.changeByRange(a=>{if(!a.empty)return{changes:[{insert:t,from:a.from},{insert:t,from:a.to}],effects:mh.of(a.to+t.length),range:ot.range(a.anchor+t.length,a.head+t.length)};let l=a.head,c=_4(e.doc,l),h;if(c==t){if(lO(e,l))return{changes:{insert:t+t,from:l},effects:mh.of(l+t.length),range:ot.cursor(l+t.length)};if(YH(e,l)){let f=r&&e.sliceDoc(l,l+t.length*3)==t+t+t?t+t+t:t;return{changes:{from:l,to:l+f.length,insert:f},range:ot.cursor(l+f.length)}}}else{if(r&&e.sliceDoc(l-2*t.length,l)==t+t&&(h=cO(e,l-2*t.length,i))>-1&&lO(e,h))return{changes:{insert:t+t+t+t,from:l},effects:mh.of(l+t.length),range:ot.cursor(l+t.length)};if(e.charCategorizer(l)(c)!=Cr.Word&&cO(e,l,i)>-1&&!sxt(e,l,t,i))return{changes:{insert:t+t,from:l},effects:mh.of(l+t.length),range:ot.cursor(l+t.length)}}return{range:s=a}});return s?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function lO(e,t){let r=kn(e).resolveInner(t+1);return r.parent&&r.from==t}function sxt(e,t,r,n){let i=kn(e).resolveInner(t,-1),s=n.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=e.sliceDoc(i.from,Math.min(i.to,i.from+r.length+s)),l=a.indexOf(r);if(!l||l>-1&&n.indexOf(a.slice(0,l))>-1){let h=i.firstChild;for(;h&&h.from==i.from&&h.to-h.from>r.length+l;){if(e.sliceDoc(h.to-r.length,h.to)==r)return!1;h=h.firstChild}return!0}let c=i.to==t&&i.parent;if(!c)break;i=c}return!1}function cO(e,t,r){let n=e.charCategorizer(t);if(n(e.sliceDoc(t-1,t))!=Cr.Word)return t;for(let i of r){let s=t-i.length;if(e.sliceDoc(s,t)==i&&n(e.sliceDoc(s-1,s))!=Cr.Word)return s}return-1}function oxt(e={}){return[Nbt,Si,on.of(e),Rbt,axt,WH]}const XH=[{key:"Ctrl-Space",run:K5},{mac:"Alt-`",run:K5},{mac:"Alt-i",run:K5},{key:"Escape",run:Obt},{key:"ArrowDown",run:Py(!0)},{key:"ArrowUp",run:Py(!1)},{key:"PageDown",run:Py(!0,"page")},{key:"PageUp",run:Py(!1,"page")},{key:"Enter",run:Lbt}],axt=Cc.highest(zd.computeN([on],e=>e.facet(on).defaultKeymap?[XH]:[]));class hO{constructor(t,r,n){this.from=t,this.to=r,this.diagnostic=n}}class lh{constructor(t,r,n){this.diagnostics=t,this.panel=r,this.selected=n}static init(t,r,n){let i=n.facet(hg).markerFilter;i&&(t=i(t,n));let s=t.slice().sort((d,p)=>d.from-p.from||d.to-p.to),o=new Za,a=[],l=0,c=n.doc.iter(),h=0,u=n.doc.length;for(let d=0;;){let p=d==s.length?null:s[d];if(!p&&!a.length)break;let m,g;if(a.length)m=l,g=a.reduce((x,T)=>Math.min(x,T.to),p&&p.from>m?p.from:1e8);else{if(m=p.from,m>u)break;g=p.to,a.push(p),d++}for(;d<s.length;){let x=s[d];if(x.from==m&&(x.to>x.from||x.to==m))a.push(x),d++,g=Math.min(x.to,g);else{g=Math.min(x.from,g);break}}g=Math.min(g,u);let y=!1;if(a.some(x=>x.from==m&&(x.to==g||g==u))&&(y=m==g,!y&&g-m<10)){let x=m-(h+c.value.length);x>0&&(c.next(x),h=m);for(let T=m;;){if(T>=g){y=!0;break}if(!c.lineBreak&&h+c.value.length>T)break;T=h+c.value.length,h+=c.value.length,c.next()}}let b=vxt(a);if(y)o.add(m,m,le.widget({widget:new gxt(b),diagnostics:a.slice()}));else{let x=a.reduce((T,S)=>S.markClass?T+" "+S.markClass:T,"");o.add(m,g,le.mark({class:"cm-lintRange cm-lintRange-"+b+x,diagnostics:a.slice(),inclusiveEnd:a.some(T=>T.to>g)}))}if(l=g,l==u)break;for(let x=0;x<a.length;x++)a[x].to<=l&&a.splice(x--,1)}let f=o.finish();return new lh(f,r,Td(f))}}function Td(e,t=null,r=0){let n=null;return e.between(r,1e9,(i,s,{spec:o})=>{if(!(t&&o.diagnostics.indexOf(t)<0))if(!n)n=new hO(i,s,t||o.diagnostics[0]);else{if(o.diagnostics.indexOf(n.diagnostic)<0)return!1;n=new hO(n.from,s,n.diagnostic)}}),n}function lxt(e,t){let r=t.pos,n=t.end||r,i=e.state.facet(hg).hideOn(e,r,n);if(i!=null)return i;let s=e.startState.doc.lineAt(t.pos);return!!(e.effects.some(o=>o.is(JH))||e.changes.touchesRange(s.from,Math.max(s.to,n)))}function cxt(e,t){return e.field(Ji,!1)?t:t.concat(ke.appendConfig.of(wxt))}const JH=ke.define(),r9=ke.define(),ZH=ke.define(),Ji=hn.define({create(){return new lh(le.none,null,null)},update(e,t){if(t.docChanged&&e.diagnostics.size){let r=e.diagnostics.map(t.changes),n=null,i=e.panel;if(e.selected){let s=t.changes.mapPos(e.selected.from,1);n=Td(r,e.selected.diagnostic,s)||Td(r,null,s)}!r.size&&i&&t.state.facet(hg).autoPanel&&(i=null),e=new lh(r,i,n)}for(let r of t.effects)if(r.is(JH)){let n=t.state.facet(hg).autoPanel?r.value.length?ug.open:null:e.panel;e=lh.init(r.value,n,t.state)}else r.is(r9)?e=new lh(e.diagnostics,r.value?ug.open:null,e.selected):r.is(ZH)&&(e=new lh(e.diagnostics,e.panel,r.value));return e},provide:e=>[Nm.from(e,t=>t.panel),$t.decorations.from(e,t=>t.diagnostics)]}),hxt=le.mark({class:"cm-lintRange cm-lintRange-active"});function uxt(e,t,r){let{diagnostics:n}=e.state.field(Ji),i,s=-1,o=-1;n.between(t-(r<0?1:0),t+(r>0?1:0),(l,c,{spec:h})=>{if(t>=l&&t<=c&&(l==c||(t>l||r>0)&&(t<c||r<0)))return i=h.diagnostics,s=l,o=c,!1});let a=e.state.facet(hg).tooltipFilter;return i&&a&&(i=a(i,e.state)),i?{pos:s,end:o,above:e.state.doc.lineAt(s).to<o,create(){return{dom:fxt(e,i)}}}:null}function fxt(e,t){return ir("ul",{class:"cm-tooltip-lint"},t.map(r=>tq(e,r,!1)))}const dxt=e=>{let t=e.state.field(Ji,!1);(!t||!t.panel)&&e.dispatch({effects:cxt(e.state,[r9.of(!0)])});let r=Pm(e,ug.open);return r&&r.dom.querySelector(".cm-panel-lint ul").focus(),!0},uO=e=>{let t=e.state.field(Ji,!1);return!t||!t.panel?!1:(e.dispatch({effects:r9.of(!1)}),!0)},pxt=e=>{let t=e.state.field(Ji,!1);if(!t)return!1;let r=e.state.selection.main,n=t.diagnostics.iter(r.to+1);return!n.value&&(n=t.diagnostics.iter(0),!n.value||n.from==r.from&&n.to==r.to)?!1:(e.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},mxt=[{key:"Mod-Shift-m",run:dxt,preventDefault:!0},{key:"F8",run:pxt}],hg=Nt.define({combine(e){return{sources:e.map(t=>t.source).filter(t=>t!=null),...ra(e.map(t=>t.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:fO,tooltipFilter:fO,needsRefresh:(t,r)=>t?r?n=>t(n)||r(n):t:r,hideOn:(t,r)=>t?r?(n,i,s)=>t(n,i,s)||r(n,i,s):t:r,autoPanel:(t,r)=>t||r})}}});function fO(e,t){return e?t?(r,n)=>t(e(r,n),n):e:t}function QH(e){let t=[];if(e)t:for(let{name:r}of e){for(let n=0;n<r.length;n++){let i=r[n];if(/[a-zA-Z]/.test(i)&&!t.some(s=>s.toLowerCase()==i.toLowerCase())){t.push(i);continue t}}t.push("")}return t}function tq(e,t,r){var n;let i=r?QH(t.actions):[];return ir("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},ir("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(e):t.message),(n=t.actions)===null||n===void 0?void 0:n.map((s,o)=>{let a=!1,l=d=>{if(d.preventDefault(),a)return;a=!0;let p=Td(e.state.field(Ji).diagnostics,t);p&&s.apply(e,p.from,p.to)},{name:c}=s,h=i[o]?c.indexOf(i[o]):-1,u=h<0?c:[c.slice(0,h),ir("u",c.slice(h,h+1)),c.slice(h+1)],f=s.markClass?" "+s.markClass:"";return ir("button",{type:"button",class:"cm-diagnosticAction"+f,onclick:l,onmousedown:l,"aria-label":` Action: ${c}${h<0?"":` (access key "${i[o]})"`}.`},u)}),t.source&&ir("div",{class:"cm-diagnosticSource"},t.source))}class gxt extends dl{constructor(t){super(),this.sev=t}eq(t){return t.sev==this.sev}toDOM(){return ir("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class dO{constructor(t,r){this.diagnostic=r,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=tq(t,r,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class ug{constructor(t){this.view=t,this.items=[];let r=i=>{if(i.keyCode==27)uO(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=QH(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=Td(this.view.state.field(Ji).diagnostics,s);l&&s.actions[a].apply(t,l.from,l.to)}}else return;i.preventDefault()},n=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=ir("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:r,onclick:n}),this.dom=ir("div",{class:"cm-panel-lint"},this.list,ir("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>uO(this.view)},"")),this.update()}get selectedIndex(){let t=this.view.state.field(Ji).selected;if(!t)return-1;for(let r=0;r<this.items.length;r++)if(this.items[r].diagnostic==t.diagnostic)return r;return-1}update(){let{diagnostics:t,selected:r}=this.view.state.field(Ji),n=0,i=!1,s=null,o=new Set;for(t.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let h of c.diagnostics){if(o.has(h))continue;o.add(h);let u=-1,f;for(let d=n;d<this.items.length;d++)if(this.items[d].diagnostic==h){u=d;break}u<0?(f=new dO(this.view,h),this.items.splice(n,0,f),i=!0):(f=this.items[u],u>n&&(this.items.splice(n,u-n),i=!0)),r&&f.diagnostic==r.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),s=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),n++}});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new dO(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let t=this.list.firstChild;function r(){let n=t;t=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;t!=n.dom;)r();t=n.dom.nextSibling}else this.list.insertBefore(n.dom,t);for(;t;)r()}moveSelection(t){if(this.selectedIndex<0)return;let r=this.view.state.field(Ji),n=Td(r.diagnostics,this.items[t].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:ZH.of(n)})}static open(t){return new ug(t)}}function yxt(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}function Ny(e){return yxt(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const bxt=$t.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ny("#d11")},".cm-lintRange-warning":{backgroundImage:Ny("orange")},".cm-lintRange-info":{backgroundImage:Ny("#999")},".cm-lintRange-hint":{backgroundImage:Ny("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function xxt(e){return e=="error"?4:e=="warning"?3:e=="info"?2:1}function vxt(e){let t="hint",r=1;for(let n of e){let i=xxt(n.severity);i>r&&(r=i,t=n.severity)}return t}const wxt=[Ji,$t.decorations.compute([Ji],e=>{let{selected:t,panel:r}=e.field(Ji);return!t||!r||t.from==t.to?le.none:le.set([hxt.range(t.from,t.to)])}),grt(uxt,{hideOn:lxt}),bxt],kxt=[Mrt(),Lrt(),Get(),uyt(),fnt(),xR(),Het(),Sr.allowMultipleSelections.of(!0),Zrt(),qR(gnt,{fallback:!0}),Cnt(),Ybt(),oxt(),srt(),lrt(),Qet(),V2t(),zd.of([...Qbt,..._H,...lbt,...vyt,...lnt,...XH,...mxt])],Cxt=1;function Sxt(e){return e.nodeType===Cxt}function Txt(e){return Sxt(e)&&e.namespaceURI==="http://www.w3.org/1999/xhtml"}function _xt(e){let t=[[-1,e.state.doc]],r=[];for(;t.length>0;){const[n,i]=t.pop();if(n>=0){let s=e.nodeDOM(n);if(s&&Txt(s)){let{top:o,bottom:a,left:l,right:c}=s.getBoundingClientRect();r.push([n,[l,o,c,o]],[n+i.nodeSize,[l,a,c,a]])}}if(i.isBlock&&!i.isTextblock){let s=n+1;for(let o of i.children)t.push([s,o]),s+=o.nodeSize}}return r}function Mxt(e,t){let r=[],n,i;const s=()=>{const h=e.dom.getBoundingClientRect(),u=e.state.doc;return r&&n&&i&&h.width===i.width&&h.height===i.height&&h.x===i.x&&h.y===i.y&&n.eq(u)||(i=h,n=u,r=_xt(e)),r},o=(h,u)=>{if(!e.editable||e.isDestroyed)return;const f=(m,g)=>{const[y,b]=m,[x,T]=g;return mO(h,b)-mO(h,T)||y-x};let d=s();d.sort(f),d=d.slice(0,8);const p=d.find(m=>(t==null?void 0:t({view:e,pos:m[0],event:u}))!==!1);if(!(p&&Ext(e,p[0])))return p};let a,l;return(h,u)=>(a&&Axt(a,h)||(a=h,l=o(h,u)),l)}function Axt(e,t){return e[0]===t[0]&&e[1]===t[1]}function pO(e,t){return Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1])}function mO(e,t){return Math.min(pO(e,[t[0],t[1]]),pO(e,[t[2],t[3]]))}function Ext(e,t){const r=e.dragging;if(!r)return;const{move:n}=r;if(!n)return;const i=e.state.selection;if(!(i instanceof ie))return;const{from:s,to:o}=i;return s<=t&&t<=o}function Lxt(e){let t;return new xr({key:new vr("prosekit-drop-indicator"),view:r=>(t=Mxt(r,e.onDrag),Dxt(r,t,e)),props:{handleDrop(r,n,i,s){if(!t)return!1;const o=t([n.clientX,n.clientY],n);if(!o)return!1;n.preventDefault();let a=o[0],l=r.state.tr;if(s){let{node:d}=r.dragging||{};d?d.replace(l):l.deleteSelection()}let c=l.mapping.map(a),h=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,u=l.doc;if(h?l.replaceRangeWith(c,c,i.content.firstChild):l.replaceRange(c,c,i),l.doc.eq(u))return!0;let f=l.doc.resolve(c);if(h&&ie.isSelectable(i.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(i.content.firstChild))l.setSelection(new ie(f));else{let d=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((p,m,g,y)=>d=y),l.setSelection(Oxt(r,f,l.doc.resolve(d)))}return r.focus(),r.dispatch(l.setMeta("uiEvent","drop")),!0}}})}function Oxt(e,t,r,n){return e.someProp("createSelectionBetween",i=>i(e,t,r))||Gt.between(t,r,n)}function Dxt(e,t,r){let n=e.dom,i,s,o,a=!1;const l=()=>{i&&clearTimeout(i),a=!1,i=setTimeout(()=>{var u;a||(u=r.onHide)==null||u.call(r)},30)},c=u=>{var m;a=!0;const{clientX:f,clientY:d}=u;if(s===f&&o===d)return;s=f,o=d;let p=t([f,d],u);if(p){const[g,[y,b,x,T]]=p,S={p1:{x:y,y:b},p2:{x,y:T}};(m=r.onShow)==null||m.call(r,{view:e,pos:g,line:S})}else{l();return}};return n.addEventListener("dragover",c),n.addEventListener("dragend",l),n.addEventListener("drop",l),n.addEventListener("dragleave",l),{destroy:()=>{n.removeEventListener("dragover",c),n.removeEventListener("dragend",l),n.removeEventListener("drop",l),n.removeEventListener("dragleave",l)}}}class Ir extends we{constructor(t){super(t,t)}map(t,r){let n=t.resolve(r.map(this.head));return Ir.valid(n)?new Ir(n):we.near(n)}content(){return Bt.empty}eq(t){return t instanceof Ir&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ir(t.resolve(r.pos))}getBookmark(){return new n9(this.anchor)}static valid(t){let r=t.parent;if(r.isTextblock||!Ixt(t)||!Bxt(t))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let i=r.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,r,n=!1){t:for(;;){if(!n&&Ir.valid(t))return t;let i=t.pos,s=null;for(let o=t.depth;;o--){let a=t.node(o);if(r>0?t.indexAfter(o)<a.childCount:t.index(o)>0){s=a.child(r>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;i+=r;let l=t.doc.resolve(i);if(Ir.valid(l))return l}for(;;){let o=r>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!ie.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*r),n=!1;continue t}break}s=o,i+=r;let a=t.doc.resolve(i);if(Ir.valid(a))return a}return null}}}Ir.prototype.visible=!1;Ir.findFrom=Ir.findGapCursorFrom;we.jsonID("gapcursor",Ir);class n9{constructor(t){this.pos=t}map(t){return new n9(t.map(this.pos))}resolve(t){let r=t.resolve(this.pos);return Ir.valid(r)?new Ir(r):we.near(r)}}function eq(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function Ixt(e){for(let t=e.depth;t>=0;t--){let r=e.index(t),n=e.node(t);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||eq(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Bxt(e){for(let t=e.depth;t>=0;t--){let r=e.indexAfter(t),n=e.node(t);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||eq(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Rxt(){return new xr({props:{decorations:$xt,createSelectionBetween(e,t,r){return t.pos==r.pos&&Ir.valid(r)?new Ir(r):null},handleClick:Nxt,handleKeyDown:Pxt,handleDOMEvents:{beforeinput:Fxt}}})}const Pxt=j7({ArrowLeft:Fy("horiz",-1),ArrowRight:Fy("horiz",1),ArrowUp:Fy("vert",-1),ArrowDown:Fy("vert",1)});function Fy(e,t){const r=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(n,i,s){let o=n.selection,a=t>0?o.$to:o.$from,l=o.empty;if(o instanceof Gt){if(!s.endOfTextblock(r)||a.depth==0)return!1;l=!1,a=n.doc.resolve(t>0?a.after():a.before())}let c=Ir.findGapCursorFrom(a,t,l);return c?(i&&i(n.tr.setSelection(new Ir(c))),!0):!1}}function Nxt(e,t,r){if(!e||!e.editable)return!1;let n=e.state.doc.resolve(t);if(!Ir.valid(n))return!1;let i=e.posAtCoords({left:r.clientX,top:r.clientY});return i&&i.inside>-1&&ie.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new Ir(n))),!0)}function Fxt(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof Ir))return!1;let{$from:r}=e.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(e.state.schema.nodes.text);if(!n)return!1;let i=Ct.empty;for(let o=n.length-1;o>=0;o--)i=Ct.from(n[o].createAndFill(null,i));let s=e.state.tr.replace(r.pos,r.pos,new Bt(i,0,0));return s.setSelection(Gt.near(s.doc.resolve(r.pos+1))),e.dispatch(s),!1}function $xt(e){if(!(e.selection instanceof Ir))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",or.create(e.doc,[jr.widget(e.selection.head,t,{key:"gapcursor"})])}function O1(e,t){return Object.assign(e,{meta:{package:"@milkdown/plugin-cursor",...t}}),e}const fg=er(null,"dropIndicatorState");O1(fg,{displayName:"Ctx<dropIndicatorState>"});const M4=er({width:2,color:!1,class:"milkdown-drop-indicator"},"dropIndicatorConfig");O1(M4,{displayName:"Ctx<dropIndicatorConfig>"});const zxt=new vr("MILKDOWN_DROP_INDICATOR_DOM"),rq=Gr(e=>new xr({key:zxt,view:t=>{var o;const r=e.get(M4.key),n=document.createElement("div");Object.assign(n.style,{position:"fixed",pointerEvents:"none",display:"none",backgroundColor:r.color,top:"0",left:"0"}),n.classList.add(r.class),n.classList.add("milkdown-drop-indicator"),(o=t.dom.parentNode)==null||o.appendChild(n);const i=e.use(fg.key),s=a=>{Hxt(n,a,r)};return i.on(s),{destroy:()=>{i.off(s),n.remove()}}}}));O1(rq,{displayName:"Prose<dropIndicatorDOM>"});function Hxt(e,t,r){if(!t){Object.assign(e.style,{display:"none"});return}const{line:n}=t,{width:i}=r,{p1:{x:s,y:o},p2:{x:a,y:l}}=n,c=o===l;let h,u,f=o,d=s;c?(h=a-s,u=i,f-=i/2):(h=i,u=l-o,d-=i/2),f=Math.round(f),d=Math.round(d),Object.assign(e.style,{display:"block",width:`${h}px`,height:`${u}px`,transform:`translate(${d}px, ${f}px)`})}const nq=Gr(e=>Lxt({onShow:i=>{e.set(fg.key,i)},onHide:()=>{e.set(fg.key,null)},onDrag:()=>!0}));O1(nq,{displayName:"Prose<dropIndicator>"});const iq=Gr(()=>Rxt());O1(iq,{displayName:"Prose<gapCursor>"});const qxt=[iq,M4,fg,rq,nq].flat();function Vxt(e){var t;const r=(t=void 0)!=null?t:!1;let n=typeof document>"u"?null:document.createElement("div");return new xr({key:Wxt,view:i=>{r!==!0&&Kxt(i.state.schema,r||[]);const s=i.dom.ownerDocument;n=n||document.createElement("div");const o=n,a=()=>{Uxt(i,o)};let l;return window.ResizeObserver&&(l=new window.ResizeObserver(()=>a()),l.observe(i.dom)),s.addEventListener("selectionchange",a),{update:()=>{a()},destroy:()=>{s.removeEventListener("selectionchange",a),l&&l.unobserve(i.dom)}}},props:{handleKeyDown:(i,s)=>{var o;const{selection:a}=i.state;if(s.altKey||s.ctrlKey||s.metaKey||s.shiftKey||s.isComposing||!["ArrowLeft","ArrowRight"].includes(s.key)||!qC(a)||!a.empty)return!1;const l=a.$head,[c,h]=sq(l),u=i.state.storedMarks||l.marks();if(c&&h&&!Me.sameSet(c,h)){if(s.key==="ArrowLeft"&&!Me.sameSet(c,u))return i.dispatch(i.state.tr.setStoredMarks(c)),!0;if(s.key==="ArrowRight"&&!Me.sameSet(h,u))return i.dispatch(i.state.tr.setStoredMarks(h)),!0}return s.key==="ArrowLeft"&&l.textOffset===1?(i.dispatch(i.state.tr.setSelection(Gt.create(i.state.doc,l.pos-1)).setStoredMarks(l.marks())),!0):s.key==="ArrowRight"&&l.textOffset+1===((o=l.parent.maybeChild(l.index()))==null?void 0:o.nodeSize)?(i.dispatch(i.state.tr.setSelection(Gt.create(i.state.doc,l.pos+1)).setStoredMarks(l.marks())),!0):!1},decorations:i=>{if(!(!n||!qC(i.selection)||!i.selection.empty))return or.create(i.doc,[jr.widget(0,n,{key:"prosemirror-virtual-cursor"})])},attributes:{class:"virtual-cursor-enabled"}}})}var Wxt=new vr("prosemirror-virtual-cursor");function jxt(e,t){var r;const n=window.getSelection();if(!n||!n.rangeCount)return null;const i=(r=n==null?void 0:n.getRangeAt(0))==null?void 0:r.cloneRange();if(!i)return null;i.collapse(t);const s=i.getClientRects(),o=s!=null&&s.length?s[s.length-1]:null;return o!=null&&o.height?o:e.coordsAtPos(e.state.selection.head)}function sq(e){const t=e.index(),r=e.parent.maybeChild(t);let n=e.textOffset?r:null;return!n&&t>0&&(n=e.parent.maybeChild(t-1)),[n==null?void 0:n.marks,r==null?void 0:r.marks]}function qC(e){return e&&typeof e=="object"&&"$cursor"in e}function Uxt(e,t){if(!e||!e.dom||e.isDestroyed||!t)return;const{state:r,dom:n}=e,{selection:i}=r;if(!qC(i))return;const s=jxt(e,i.$head===i.$from);if(!s)return t;const o=n.getBoundingClientRect();let a="prosemirror-virtual-cursor";const l=r.selection.$head,[c,h]=sq(l),u=r.storedMarks||l.marks();i.$cursor&&c&&h&&u&&!Me.sameSet(c,h)&&(Me.sameSet(c,u)?a+=" prosemirror-virtual-cursor-left":Me.sameSet(h,u)&&(a+=" prosemirror-virtual-cursor-right")),t.className=a,Gxt(t,"prosemirror-virtual-cursor-animation"),t.style.height=`${s.bottom-s.top}px`,t.style.left=`${s.left-o.left}px`,t.style.top=`${s.top-o.top}px`}function Gxt(e,t){e.classList.remove(t),e.offsetWidth,e.classList.add(t)}function Kxt(e,t){for(const[r,n]of Object.entries(e.marks))n.spec.inclusive===!1&&!t.includes(r)&&console.warn(`[prosemirror-virtual-cursor] Virtual cursor does not work well with marks that have inclusive set to false. Please consider removing the inclusive option from the "${r}" mark or adding it to the "skipWarning" option.`)}var Yxt=Object.defineProperty,gO=Object.getOwnPropertySymbols,Xxt=Object.prototype.hasOwnProperty,Jxt=Object.prototype.propertyIsEnumerable,yO=(e,t,r)=>t in e?Yxt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Zxt=(e,t)=>{for(var r in t||(t={}))Xxt.call(t,r)&&yO(e,r,t[r]);if(gO)for(var r of gO(t))Jxt.call(t,r)&&yO(e,r,t[r]);return e};function oq(e,t){return Object.assign(e,{meta:Zxt({package:"@milkdown/components"},t)}),e}const Qxt={imageIcon:"",uploadButton:"Upload",confirmButton:"",uploadPlaceholderText:"/Paste",onUpload:e=>Promise.resolve(URL.createObjectURL(e))},A4=er(Qxt,"inlineImageConfigCtx");oq(A4,{displayName:"Config<image-inline>",group:"ImageInline"});function Y2({icon:e,class:t,onClick:r}){return et("span",{class:Cn("milkdown-icon",t),onPointerdown:r,ref:n=>{n&&e&&(n.innerHTML=cn.sanitize(e.trim()))}})}Y2.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const tvt=rS("abcdefg",8),evt=Sn({props:{src:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setLink:{type:Function,required:!0},imageIcon:{type:String,required:!1},uploadButton:{type:String,required:!1},confirmButton:{type:String,required:!1},uploadPlaceholderText:{type:String,required:!1},onUpload:{type:Function,required:!0}},setup({readonly:e,src:t,setLink:r,onUpload:n,imageIcon:i,uploadButton:s,confirmButton:o,uploadPlaceholderText:a,className:l}){var c,h;const u=zt(!1),f=zt(),d=zt((c=t.value)!=null?c:""),p=zt(tvt()),m=zt(((h=t.value)==null?void 0:h.length)!==0),g=T=>{const w=T.target.value;m.value=w.length!==0,d.value=w},y=T=>{var S,w;T.key==="Enter"&&r((w=(S=f.value)==null?void 0:S.value)!=null?w:"")},b=()=>{var T,S;r((S=(T=f.value)==null?void 0:T.value)!=null?S:"")},x=T=>{var S;const w=(S=T.target.files)==null?void 0:S[0];w&&n(w).then(_=>{_&&(r(_),m.value=!0)}).catch(_=>{console.error("An error occurred while uploading image"),console.error(_)})};return()=>et("div",{class:Cn("image-edit",l)},et(Y2,{icon:i,class:"image-icon"}),et("div",{class:Cn("link-importer",u.value&&"focus")},et("input",{ref:f,draggable:"true",onDragstart:T=>{T.preventDefault(),T.stopPropagation()},disabled:e.value,class:"link-input-area",value:d.value,onInput:g,onKeydown:y,onFocus:()=>u.value=!0,onBlur:()=>u.value=!1}),!m.value&&et("div",{class:"placeholder"},et("input",{disabled:e.value,class:"hidden",id:p.value,type:"file",accept:"image/*",onChange:x}),et("label",{class:"uploader",for:p.value},et(Y2,{icon:s})),et("span",{class:"text",onClick:()=>{var T;return(T=f.value)==null?void 0:T.focus()}},a))),d.value&&et("div",{class:"confirm",onClick:()=>b()},et(Y2,{icon:o})))}}),rvt=Sn({props:{src:{type:Object,required:!0},alt:{type:Object,required:!0},title:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup(e){const{src:t,alt:r,title:n}=e;return()=>{var i;return(i=t.value)!=null&&i.length?et("img",{class:"image-inline",src:t.value,alt:r.value,title:n.value}):et(evt,{src:e.src,selected:e.selected,readonly:e.readonly,setLink:s=>e.setAttr("src",s),imageIcon:e.config.imageIcon,uploadButton:e.config.uploadButton,confirmButton:e.config.confirmButton,uploadPlaceholderText:e.config.uploadPlaceholderText,onUpload:e.config.onUpload,className:"empty-image-inline"})}}}),aq=f1(ku.node,e=>(t,r,n)=>{const i=zt(t.attrs.src),s=zt(t.attrs.alt),o=zt(t.attrs.title),a=zt(!1),l=zt(!r.editable),c=(g,y)=>{if(!r.editable)return;const b=n();b!=null&&r.dispatch(r.state.tr.setNodeAttribute(b,g,g==="src"?cn.sanitize(y):y))},h=e.get(A4.key),u=po(rvt,{src:i,alt:s,title:o,selected:a,readonly:l,setAttr:c,config:h}),f=document.createElement("span");f.className="milkdown-image-inline";const d=Gd(()=>{a.value?f.classList.add("selected"):f.classList.remove("selected")}),p=h.proxyDomURL,m=g=>{if(!p)i.value=g.attrs.src;else{const y=p(g.attrs.src);typeof y=="string"?i.value=y:y.then(b=>{i.value=b}).catch(console.error)}s.value=g.attrs.alt,o.value=g.attrs.title};return m(t),u.mount(f),{dom:f,update:g=>g.type!==t.type?!1:(m(g),!0),stopEvent:g=>g.target instanceof HTMLInputElement,selectNode:()=>{a.value=!0},deselectNode:()=>{a.value=!1},destroy:()=>{d(),u.unmount(),f.remove()}}});oq(aq,{displayName:"NodeView<image-inline>",group:"ImageInline"});const nvt=[A4,aq];class ki{constructor(t,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=r,this.end=n}static range(t,r){return r?!t||!t.loc||!r.loc||t.loc.lexer!==r.loc.lexer?null:new ki(t.loc.lexer,t.loc.start,r.loc.end):t&&t.loc}}class ts{constructor(t,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=r}range(t,r){return new ts(r,ki.range(this,t))}}class vt{constructor(t,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+t,i,s,o=r&&r.loc;if(o&&o.start<=o.end){var a=o.lexer.input;i=o.start,s=o.end,i===a.length?n+=" at end of input: ":n+=" at position "+(i+1)+": ";var l=a.slice(i,s).replace(/[^]/g,"$&"),c;i>15?c=""+a.slice(i-15,i):c=a.slice(0,i);var h;s+15<a.length?h=a.slice(s,s+15)+"":h=a.slice(s),n+=c+l+h}var u=new Error(n);return u.name="ParseError",u.__proto__=vt.prototype,u.position=i,i!=null&&s!=null&&(u.length=s-i),u.rawMessage=t,u}}vt.prototype.__proto__=Error.prototype;var ivt=function(t,r){return t===void 0?r:t},svt=/([A-Z])/g,ovt=function(t){return t.replace(svt,"-$1").toLowerCase()},avt={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},lvt=/[&><"']/g;function cvt(e){return String(e).replace(lvt,t=>avt[t])}var lq=function e(t){return t.type==="ordgroup"||t.type==="color"?t.body.length===1?e(t.body[0]):t:t.type==="font"?e(t.body):t},hvt=function(t){var r=lq(t);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},uvt=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t},fvt=function(t){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},We={deflt:ivt,escape:cvt,hyphenate:ovt,getBaseElem:lq,isCharacterBox:hvt,protocolFromUrl:fvt},gm={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>e==="Infinity"?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};function dvt(e){if(e.default)return e.default;var t=e.type,r=Array.isArray(t)?t[0]:t;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class i9{constructor(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{};for(var r in gm)if(gm.hasOwnProperty(r)){var n=gm[r];this[r]=t[r]!==void 0?n.processor?n.processor(t[r]):t[r]:dvt(n)}}reportNonstrict(t,r,n){var i=this.strict;if(typeof i=="function"&&(i=i(t,r,n)),!(!i||i==="ignore")){if(i===!0||i==="error")throw new vt("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+t+"]"),n);i==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+r+" ["+t+"]"))}}useStrictBehavior(t,r,n){var i=this.strict;if(typeof i=="function")try{i=i(t,r,n)}catch{i="error"}return!i||i==="ignore"?!1:i===!0||i==="error"?!0:i==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+r+" ["+t+"]")),!1)}isTrusted(t){if(t.url&&!t.protocol){var r=We.protocolFromUrl(t.url);if(r==null)return!1;t.protocol=r}var n=typeof this.trust=="function"?this.trust(t):this.trust;return!!n}}class kl{constructor(t,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=r,this.cramped=n}sup(){return Bo[pvt[this.id]]}sub(){return Bo[mvt[this.id]]}fracNum(){return Bo[gvt[this.id]]}fracDen(){return Bo[yvt[this.id]]}cramp(){return Bo[bvt[this.id]]}text(){return Bo[xvt[this.id]]}isTight(){return this.size>=2}}var s9=0,Mx=1,kf=2,Ka=3,dg=4,ws=5,_d=6,ei=7,Bo=[new kl(s9,0,!1),new kl(Mx,0,!0),new kl(kf,1,!1),new kl(Ka,1,!0),new kl(dg,2,!1),new kl(ws,2,!0),new kl(_d,3,!1),new kl(ei,3,!0)],pvt=[dg,ws,dg,ws,_d,ei,_d,ei],mvt=[ws,ws,ws,ws,ei,ei,ei,ei],gvt=[kf,Ka,dg,ws,_d,ei,_d,ei],yvt=[Ka,Ka,ws,ws,ei,ei,ei,ei],bvt=[Mx,Mx,Ka,Ka,ws,ws,ei,ei],xvt=[s9,Mx,kf,Ka,kf,Ka,kf,Ka],ue={DISPLAY:Bo[s9],TEXT:Bo[kf],SCRIPT:Bo[dg],SCRIPTSCRIPT:Bo[_d]},VC=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function vvt(e){for(var t=0;t<VC.length;t++)for(var r=VC[t],n=0;n<r.blocks.length;n++){var i=r.blocks[n];if(e>=i[0]&&e<=i[1])return r.name}return null}var X2=[];VC.forEach(e=>e.blocks.forEach(t=>X2.push(...t)));function cq(e){for(var t=0;t<X2.length;t+=2)if(e>=X2[t]&&e<=X2[t+1])return!0;return!1}var Nu=80,wvt=function(t,r){return"M95,"+(622+t+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+t/2.075+" -"+t+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+t)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},kvt=function(t,r){return"M263,"+(601+t+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+t/2.084+" -"+t+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+t)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},Cvt=function(t,r){return"M983 "+(10+t+r)+`
l`+t/3.13+" -"+t+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+t)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},Svt=function(t,r){return"M424,"+(2398+t+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+t/4.223+" -"+t+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+t)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+t)+" "+r+`
h400000v`+(40+t)+"h-400000z"},Tvt=function(t,r){return"M473,"+(2713+t+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+t/5.298+" -"+t+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+t)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+t)+" "+r+"h400000v"+(40+t)+"H1017.7z"},_vt=function(t){var r=t/2;return"M400000 "+t+" H0 L"+r+" 0 l65 45 L145 "+(t-80)+" H400000z"},Mvt=function(t,r,n){var i=n-54-r-t;return"M702 "+(t+r)+"H400000"+(40+t)+`
H742v`+i+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+t)+"H742z"},Avt=function(t,r,n){r=1e3*r;var i="";switch(t){case"sqrtMain":i=wvt(r,Nu);break;case"sqrtSize1":i=kvt(r,Nu);break;case"sqrtSize2":i=Cvt(r,Nu);break;case"sqrtSize3":i=Svt(r,Nu);break;case"sqrtSize4":i=Tvt(r,Nu);break;case"sqrtTall":i=Mvt(r,Nu,n)}return i},Evt=function(t,r){switch(t){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},bO={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Lvt=function(t,r){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class D1{constructor(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(t){return this.classes.includes(t)}toNode(){for(var t=document.createDocumentFragment(),r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t}toMarkup(){for(var t="",r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t}toText(){var t=r=>r.toText();return this.children.map(t).join("")}}var qo={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},$y={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},xO={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function hq(e,t){qo[e]=t}function o9(e,t,r){if(!qo[t])throw new Error("Font metrics not found for font: "+t+".");var n=e.charCodeAt(0),i=qo[t][n];if(!i&&e[0]in xO&&(n=xO[e[0]].charCodeAt(0),i=qo[t][n]),!i&&r==="text"&&cq(n)&&(i=qo[t][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var X5={};function Ovt(e){var t;if(e>=5?t=0:e>=3?t=1:t=2,!X5[t]){var r=X5[t]={cssEmPerMu:$y.quad[t]/18};for(var n in $y)$y.hasOwnProperty(n)&&(r[n]=$y[n][t])}return X5[t]}var Dvt=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],vO=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],wO=function(t,r){return r.size<2?t:Dvt[t-1][r.size-1]};class Ea{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||Ea.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=vO[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return new Ea(r)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:wO(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:vO[t-1]})}havingBaseStyle(t){t=t||this.style.text();var r=wO(Ea.BASESIZE,t);return this.size===r&&this.textSize===Ea.BASESIZE&&this.style===t?this:this.extend({style:t,size:r})}havingBaseSizing(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Ea.BASESIZE?["sizing","reset-size"+this.size,"size"+Ea.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Ovt(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Ea.BASESIZE=6;var WC={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Ivt={ex:!0,em:!0,mu:!0},uq=function(t){return typeof t!="string"&&(t=t.unit),t in WC||t in Ivt||t==="ex"},Or=function(t,r){var n;if(t.unit in WC)n=WC[t.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(t.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var i;if(r.style.isTight()?i=r.havingStyle(r.style.text()):i=r,t.unit==="ex")n=i.fontMetrics().xHeight;else if(t.unit==="em")n=i.fontMetrics().quad;else throw new vt("Invalid unit: '"+t.unit+"'");i!==r&&(n*=i.sizeMultiplier/r.sizeMultiplier)}return Math.min(t.number*n,r.maxSize)},_t=function(t){return+t.toFixed(4)+"em"},mc=function(t){return t.filter(r=>r).join(" ")},fq=function(t,r,n){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var i=r.getColor();i&&(this.style.color=i)}},dq=function(t){var r=document.createElement(t);r.className=mc(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&r.setAttribute(i,this.attributes[i]);for(var s=0;s<this.children.length;s++)r.appendChild(this.children[s].toNode());return r},Bvt=/[\s"'>/=\x00-\x1f]/,pq=function(t){var r="<"+t;this.classes.length&&(r+=' class="'+We.escape(mc(this.classes))+'"');var n="";for(var i in this.style)this.style.hasOwnProperty(i)&&(n+=We.hyphenate(i)+":"+this.style[i]+";");n&&(r+=' style="'+We.escape(n)+'"');for(var s in this.attributes)if(this.attributes.hasOwnProperty(s)){if(Bvt.test(s))throw new vt("Invalid attribute name '"+s+"'");r+=" "+s+'="'+We.escape(this.attributes[s])+'"'}r+=">";for(var o=0;o<this.children.length;o++)r+=this.children[o].toMarkup();return r+="</"+t+">",r};class I1{constructor(t,r,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,fq.call(this,t,n,i),this.children=r||[]}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return this.classes.includes(t)}toNode(){return dq.call(this,"span")}toMarkup(){return pq.call(this,"span")}}class a9{constructor(t,r,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,fq.call(this,r,i),this.children=n||[],this.setAttribute("href",t)}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return this.classes.includes(t)}toNode(){return dq.call(this,"a")}toMarkup(){return pq.call(this,"a")}}class Rvt{constructor(t,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=t,this.classes=["mord"],this.style=n}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);return t}toMarkup(){var t='<img src="'+We.escape(this.src)+'"'+(' alt="'+We.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=We.hyphenate(n)+":"+this.style[n]+";");return r&&(t+=' style="'+We.escape(r)+'"'),t+="'/>",t}}var Pvt={:"",:"",:"",:""};class As{constructor(t,r,n,i,s,o,a,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=r||0,this.depth=n||0,this.italic=i||0,this.skew=s||0,this.width=o||0,this.classes=a||[],this.style=l||{},this.maxFontSize=0;var c=vvt(this.text.charCodeAt(0));c&&this.classes.push(c+"_fallback"),/[]/.test(this.text)&&(this.text=Pvt[this.text])}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=_t(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=mc(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(t),r):t}toMarkup(){var t=!1,r="<span";this.classes.length&&(t=!0,r+=' class="',r+=We.escape(mc(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var i in this.style)this.style.hasOwnProperty(i)&&(n+=We.hyphenate(i)+":"+this.style[i]+";");n&&(t=!0,r+=' style="'+We.escape(n)+'"');var s=We.escape(this.text);return t?(r+=">",r+=s,r+="</span>",r):s}}class sl{constructor(t,r){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=r||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var i=0;i<this.children.length;i++)r.appendChild(this.children[i].toNode());return r}toMarkup(){var t='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+We.escape(this.attributes[r])+'"');t+=">";for(var n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t+="</svg>",t}}class gc{constructor(t,r){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=r}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",bO[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+We.escape(this.alternate)+'"/>':'<path d="'+We.escape(bO[this.pathName])+'"/>'}}class jC{constructor(t){this.attributes=void 0,this.attributes=t||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var t="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+We.escape(this.attributes[r])+'"');return t+="/>",t}}function kO(e){if(e instanceof As)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}function Nvt(e){if(e instanceof I1)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}var Fvt={bin:1,close:1,inner:1,open:1,punct:1,rel:1},$vt={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},pr={math:{},text:{}};function v(e,t,r,n,i,s){pr[e][i]={font:t,group:r,replace:n},s&&n&&(pr[e][n]=pr[e][i])}var C="math",mt="text",M="main",B="ams",Tr="accent-token",Ft="bin",pi="close",Qd="inner",he="mathord",Kr="op-token",as="open",E4="punct",F="rel",bl="spacing",G="textord";v(C,M,F,"","\\equiv",!0);v(C,M,F,"","\\prec",!0);v(C,M,F,"","\\succ",!0);v(C,M,F,"","\\sim",!0);v(C,M,F,"","\\perp");v(C,M,F,"","\\preceq",!0);v(C,M,F,"","\\succeq",!0);v(C,M,F,"","\\simeq",!0);v(C,M,F,"","\\mid",!0);v(C,M,F,"","\\ll",!0);v(C,M,F,"","\\gg",!0);v(C,M,F,"","\\asymp",!0);v(C,M,F,"","\\parallel");v(C,M,F,"","\\bowtie",!0);v(C,M,F,"","\\smile",!0);v(C,M,F,"","\\sqsubseteq",!0);v(C,M,F,"","\\sqsupseteq",!0);v(C,M,F,"","\\doteq",!0);v(C,M,F,"","\\frown",!0);v(C,M,F,"","\\ni",!0);v(C,M,F,"","\\propto",!0);v(C,M,F,"","\\vdash",!0);v(C,M,F,"","\\dashv",!0);v(C,M,F,"","\\owns");v(C,M,E4,".","\\ldotp");v(C,M,E4,"","\\cdotp");v(C,M,G,"#","\\#");v(mt,M,G,"#","\\#");v(C,M,G,"&","\\&");v(mt,M,G,"&","\\&");v(C,M,G,"","\\aleph",!0);v(C,M,G,"","\\forall",!0);v(C,M,G,"","\\hbar",!0);v(C,M,G,"","\\exists",!0);v(C,M,G,"","\\nabla",!0);v(C,M,G,"","\\flat",!0);v(C,M,G,"","\\ell",!0);v(C,M,G,"","\\natural",!0);v(C,M,G,"","\\clubsuit",!0);v(C,M,G,"","\\wp",!0);v(C,M,G,"","\\sharp",!0);v(C,M,G,"","\\diamondsuit",!0);v(C,M,G,"","\\Re",!0);v(C,M,G,"","\\heartsuit",!0);v(C,M,G,"","\\Im",!0);v(C,M,G,"","\\spadesuit",!0);v(C,M,G,"","\\S",!0);v(mt,M,G,"","\\S");v(C,M,G,"","\\P",!0);v(mt,M,G,"","\\P");v(C,M,G,"","\\dag");v(mt,M,G,"","\\dag");v(mt,M,G,"","\\textdagger");v(C,M,G,"","\\ddag");v(mt,M,G,"","\\ddag");v(mt,M,G,"","\\textdaggerdbl");v(C,M,pi,"","\\rmoustache",!0);v(C,M,as,"","\\lmoustache",!0);v(C,M,pi,"","\\rgroup",!0);v(C,M,as,"","\\lgroup",!0);v(C,M,Ft,"","\\mp",!0);v(C,M,Ft,"","\\ominus",!0);v(C,M,Ft,"","\\uplus",!0);v(C,M,Ft,"","\\sqcap",!0);v(C,M,Ft,"","\\ast");v(C,M,Ft,"","\\sqcup",!0);v(C,M,Ft,"","\\bigcirc",!0);v(C,M,Ft,"","\\bullet",!0);v(C,M,Ft,"","\\ddagger");v(C,M,Ft,"","\\wr",!0);v(C,M,Ft,"","\\amalg");v(C,M,Ft,"&","\\And");v(C,M,F,"","\\longleftarrow",!0);v(C,M,F,"","\\Leftarrow",!0);v(C,M,F,"","\\Longleftarrow",!0);v(C,M,F,"","\\longrightarrow",!0);v(C,M,F,"","\\Rightarrow",!0);v(C,M,F,"","\\Longrightarrow",!0);v(C,M,F,"","\\leftrightarrow",!0);v(C,M,F,"","\\longleftrightarrow",!0);v(C,M,F,"","\\Leftrightarrow",!0);v(C,M,F,"","\\Longleftrightarrow",!0);v(C,M,F,"","\\mapsto",!0);v(C,M,F,"","\\longmapsto",!0);v(C,M,F,"","\\nearrow",!0);v(C,M,F,"","\\hookleftarrow",!0);v(C,M,F,"","\\hookrightarrow",!0);v(C,M,F,"","\\searrow",!0);v(C,M,F,"","\\leftharpoonup",!0);v(C,M,F,"","\\rightharpoonup",!0);v(C,M,F,"","\\swarrow",!0);v(C,M,F,"","\\leftharpoondown",!0);v(C,M,F,"","\\rightharpoondown",!0);v(C,M,F,"","\\nwarrow",!0);v(C,M,F,"","\\rightleftharpoons",!0);v(C,B,F,"","\\nless",!0);v(C,B,F,"","\\@nleqslant");v(C,B,F,"","\\@nleqq");v(C,B,F,"","\\lneq",!0);v(C,B,F,"","\\lneqq",!0);v(C,B,F,"","\\@lvertneqq");v(C,B,F,"","\\lnsim",!0);v(C,B,F,"","\\lnapprox",!0);v(C,B,F,"","\\nprec",!0);v(C,B,F,"","\\npreceq",!0);v(C,B,F,"","\\precnsim",!0);v(C,B,F,"","\\precnapprox",!0);v(C,B,F,"","\\nsim",!0);v(C,B,F,"","\\@nshortmid");v(C,B,F,"","\\nmid",!0);v(C,B,F,"","\\nvdash",!0);v(C,B,F,"","\\nvDash",!0);v(C,B,F,"","\\ntriangleleft");v(C,B,F,"","\\ntrianglelefteq",!0);v(C,B,F,"","\\subsetneq",!0);v(C,B,F,"","\\@varsubsetneq");v(C,B,F,"","\\subsetneqq",!0);v(C,B,F,"","\\@varsubsetneqq");v(C,B,F,"","\\ngtr",!0);v(C,B,F,"","\\@ngeqslant");v(C,B,F,"","\\@ngeqq");v(C,B,F,"","\\gneq",!0);v(C,B,F,"","\\gneqq",!0);v(C,B,F,"","\\@gvertneqq");v(C,B,F,"","\\gnsim",!0);v(C,B,F,"","\\gnapprox",!0);v(C,B,F,"","\\nsucc",!0);v(C,B,F,"","\\nsucceq",!0);v(C,B,F,"","\\succnsim",!0);v(C,B,F,"","\\succnapprox",!0);v(C,B,F,"","\\ncong",!0);v(C,B,F,"","\\@nshortparallel");v(C,B,F,"","\\nparallel",!0);v(C,B,F,"","\\nVDash",!0);v(C,B,F,"","\\ntriangleright");v(C,B,F,"","\\ntrianglerighteq",!0);v(C,B,F,"","\\@nsupseteqq");v(C,B,F,"","\\supsetneq",!0);v(C,B,F,"","\\@varsupsetneq");v(C,B,F,"","\\supsetneqq",!0);v(C,B,F,"","\\@varsupsetneqq");v(C,B,F,"","\\nVdash",!0);v(C,B,F,"","\\precneqq",!0);v(C,B,F,"","\\succneqq",!0);v(C,B,F,"","\\@nsubseteqq");v(C,B,Ft,"","\\unlhd");v(C,B,Ft,"","\\unrhd");v(C,B,F,"","\\nleftarrow",!0);v(C,B,F,"","\\nrightarrow",!0);v(C,B,F,"","\\nLeftarrow",!0);v(C,B,F,"","\\nRightarrow",!0);v(C,B,F,"","\\nleftrightarrow",!0);v(C,B,F,"","\\nLeftrightarrow",!0);v(C,B,F,"","\\vartriangle");v(C,B,G,"","\\hslash");v(C,B,G,"","\\triangledown");v(C,B,G,"","\\lozenge");v(C,B,G,"","\\circledS");v(C,B,G,"","\\circledR");v(mt,B,G,"","\\circledR");v(C,B,G,"","\\measuredangle",!0);v(C,B,G,"","\\nexists");v(C,B,G,"","\\mho");v(C,B,G,"","\\Finv",!0);v(C,B,G,"","\\Game",!0);v(C,B,G,"","\\backprime");v(C,B,G,"","\\blacktriangle");v(C,B,G,"","\\blacktriangledown");v(C,B,G,"","\\blacksquare");v(C,B,G,"","\\blacklozenge");v(C,B,G,"","\\bigstar");v(C,B,G,"","\\sphericalangle",!0);v(C,B,G,"","\\complement",!0);v(C,B,G,"","\\eth",!0);v(mt,M,G,"","");v(C,B,G,"","\\diagup");v(C,B,G,"","\\diagdown");v(C,B,G,"","\\square");v(C,B,G,"","\\Box");v(C,B,G,"","\\Diamond");v(C,B,G,"","\\yen",!0);v(mt,B,G,"","\\yen",!0);v(C,B,G,"","\\checkmark",!0);v(mt,B,G,"","\\checkmark");v(C,B,G,"","\\beth",!0);v(C,B,G,"","\\daleth",!0);v(C,B,G,"","\\gimel",!0);v(C,B,G,"","\\digamma",!0);v(C,B,G,"","\\varkappa");v(C,B,as,"","\\@ulcorner",!0);v(C,B,pi,"","\\@urcorner",!0);v(C,B,as,"","\\@llcorner",!0);v(C,B,pi,"","\\@lrcorner",!0);v(C,B,F,"","\\leqq",!0);v(C,B,F,"","\\leqslant",!0);v(C,B,F,"","\\eqslantless",!0);v(C,B,F,"","\\lesssim",!0);v(C,B,F,"","\\lessapprox",!0);v(C,B,F,"","\\approxeq",!0);v(C,B,Ft,"","\\lessdot");v(C,B,F,"","\\lll",!0);v(C,B,F,"","\\lessgtr",!0);v(C,B,F,"","\\lesseqgtr",!0);v(C,B,F,"","\\lesseqqgtr",!0);v(C,B,F,"","\\doteqdot");v(C,B,F,"","\\risingdotseq",!0);v(C,B,F,"","\\fallingdotseq",!0);v(C,B,F,"","\\backsim",!0);v(C,B,F,"","\\backsimeq",!0);v(C,B,F,"","\\subseteqq",!0);v(C,B,F,"","\\Subset",!0);v(C,B,F,"","\\sqsubset",!0);v(C,B,F,"","\\preccurlyeq",!0);v(C,B,F,"","\\curlyeqprec",!0);v(C,B,F,"","\\precsim",!0);v(C,B,F,"","\\precapprox",!0);v(C,B,F,"","\\vartriangleleft");v(C,B,F,"","\\trianglelefteq");v(C,B,F,"","\\vDash",!0);v(C,B,F,"","\\Vvdash",!0);v(C,B,F,"","\\smallsmile");v(C,B,F,"","\\smallfrown");v(C,B,F,"","\\bumpeq",!0);v(C,B,F,"","\\Bumpeq",!0);v(C,B,F,"","\\geqq",!0);v(C,B,F,"","\\geqslant",!0);v(C,B,F,"","\\eqslantgtr",!0);v(C,B,F,"","\\gtrsim",!0);v(C,B,F,"","\\gtrapprox",!0);v(C,B,Ft,"","\\gtrdot");v(C,B,F,"","\\ggg",!0);v(C,B,F,"","\\gtrless",!0);v(C,B,F,"","\\gtreqless",!0);v(C,B,F,"","\\gtreqqless",!0);v(C,B,F,"","\\eqcirc",!0);v(C,B,F,"","\\circeq",!0);v(C,B,F,"","\\triangleq",!0);v(C,B,F,"","\\thicksim");v(C,B,F,"","\\thickapprox");v(C,B,F,"","\\supseteqq",!0);v(C,B,F,"","\\Supset",!0);v(C,B,F,"","\\sqsupset",!0);v(C,B,F,"","\\succcurlyeq",!0);v(C,B,F,"","\\curlyeqsucc",!0);v(C,B,F,"","\\succsim",!0);v(C,B,F,"","\\succapprox",!0);v(C,B,F,"","\\vartriangleright");v(C,B,F,"","\\trianglerighteq");v(C,B,F,"","\\Vdash",!0);v(C,B,F,"","\\shortmid");v(C,B,F,"","\\shortparallel");v(C,B,F,"","\\between",!0);v(C,B,F,"","\\pitchfork",!0);v(C,B,F,"","\\varpropto");v(C,B,F,"","\\blacktriangleleft");v(C,B,F,"","\\therefore",!0);v(C,B,F,"","\\backepsilon");v(C,B,F,"","\\blacktriangleright");v(C,B,F,"","\\because",!0);v(C,B,F,"","\\llless");v(C,B,F,"","\\gggtr");v(C,B,Ft,"","\\lhd");v(C,B,Ft,"","\\rhd");v(C,B,F,"","\\eqsim",!0);v(C,M,F,"","\\Join");v(C,B,F,"","\\Doteq",!0);v(C,B,Ft,"","\\dotplus",!0);v(C,B,Ft,"","\\smallsetminus");v(C,B,Ft,"","\\Cap",!0);v(C,B,Ft,"","\\Cup",!0);v(C,B,Ft,"","\\doublebarwedge",!0);v(C,B,Ft,"","\\boxminus",!0);v(C,B,Ft,"","\\boxplus",!0);v(C,B,Ft,"","\\divideontimes",!0);v(C,B,Ft,"","\\ltimes",!0);v(C,B,Ft,"","\\rtimes",!0);v(C,B,Ft,"","\\leftthreetimes",!0);v(C,B,Ft,"","\\rightthreetimes",!0);v(C,B,Ft,"","\\curlywedge",!0);v(C,B,Ft,"","\\curlyvee",!0);v(C,B,Ft,"","\\circleddash",!0);v(C,B,Ft,"","\\circledast",!0);v(C,B,Ft,"","\\centerdot");v(C,B,Ft,"","\\intercal",!0);v(C,B,Ft,"","\\doublecap");v(C,B,Ft,"","\\doublecup");v(C,B,Ft,"","\\boxtimes",!0);v(C,B,F,"","\\dashrightarrow",!0);v(C,B,F,"","\\dashleftarrow",!0);v(C,B,F,"","\\leftleftarrows",!0);v(C,B,F,"","\\leftrightarrows",!0);v(C,B,F,"","\\Lleftarrow",!0);v(C,B,F,"","\\twoheadleftarrow",!0);v(C,B,F,"","\\leftarrowtail",!0);v(C,B,F,"","\\looparrowleft",!0);v(C,B,F,"","\\leftrightharpoons",!0);v(C,B,F,"","\\curvearrowleft",!0);v(C,B,F,"","\\circlearrowleft",!0);v(C,B,F,"","\\Lsh",!0);v(C,B,F,"","\\upuparrows",!0);v(C,B,F,"","\\upharpoonleft",!0);v(C,B,F,"","\\downharpoonleft",!0);v(C,M,F,"","\\origof",!0);v(C,M,F,"","\\imageof",!0);v(C,B,F,"","\\multimap",!0);v(C,B,F,"","\\leftrightsquigarrow",!0);v(C,B,F,"","\\rightrightarrows",!0);v(C,B,F,"","\\rightleftarrows",!0);v(C,B,F,"","\\twoheadrightarrow",!0);v(C,B,F,"","\\rightarrowtail",!0);v(C,B,F,"","\\looparrowright",!0);v(C,B,F,"","\\curvearrowright",!0);v(C,B,F,"","\\circlearrowright",!0);v(C,B,F,"","\\Rsh",!0);v(C,B,F,"","\\downdownarrows",!0);v(C,B,F,"","\\upharpoonright",!0);v(C,B,F,"","\\downharpoonright",!0);v(C,B,F,"","\\rightsquigarrow",!0);v(C,B,F,"","\\leadsto");v(C,B,F,"","\\Rrightarrow",!0);v(C,B,F,"","\\restriction");v(C,M,G,"","`");v(C,M,G,"$","\\$");v(mt,M,G,"$","\\$");v(mt,M,G,"$","\\textdollar");v(C,M,G,"%","\\%");v(mt,M,G,"%","\\%");v(C,M,G,"_","\\_");v(mt,M,G,"_","\\_");v(mt,M,G,"_","\\textunderscore");v(C,M,G,"","\\angle",!0);v(C,M,G,"","\\infty",!0);v(C,M,G,"","\\prime");v(C,M,G,"","\\triangle");v(C,M,G,"","\\Gamma",!0);v(C,M,G,"","\\Delta",!0);v(C,M,G,"","\\Theta",!0);v(C,M,G,"","\\Lambda",!0);v(C,M,G,"","\\Xi",!0);v(C,M,G,"","\\Pi",!0);v(C,M,G,"","\\Sigma",!0);v(C,M,G,"","\\Upsilon",!0);v(C,M,G,"","\\Phi",!0);v(C,M,G,"","\\Psi",!0);v(C,M,G,"","\\Omega",!0);v(C,M,G,"A","");v(C,M,G,"B","");v(C,M,G,"E","");v(C,M,G,"Z","");v(C,M,G,"H","");v(C,M,G,"I","");v(C,M,G,"K","");v(C,M,G,"M","");v(C,M,G,"N","");v(C,M,G,"O","");v(C,M,G,"P","");v(C,M,G,"T","");v(C,M,G,"X","");v(C,M,G,"","\\neg",!0);v(C,M,G,"","\\lnot");v(C,M,G,"","\\top");v(C,M,G,"","\\bot");v(C,M,G,"","\\emptyset");v(C,B,G,"","\\varnothing");v(C,M,he,"","\\alpha",!0);v(C,M,he,"","\\beta",!0);v(C,M,he,"","\\gamma",!0);v(C,M,he,"","\\delta",!0);v(C,M,he,"","\\epsilon",!0);v(C,M,he,"","\\zeta",!0);v(C,M,he,"","\\eta",!0);v(C,M,he,"","\\theta",!0);v(C,M,he,"","\\iota",!0);v(C,M,he,"","\\kappa",!0);v(C,M,he,"","\\lambda",!0);v(C,M,he,"","\\mu",!0);v(C,M,he,"","\\nu",!0);v(C,M,he,"","\\xi",!0);v(C,M,he,"","\\omicron",!0);v(C,M,he,"","\\pi",!0);v(C,M,he,"","\\rho",!0);v(C,M,he,"","\\sigma",!0);v(C,M,he,"","\\tau",!0);v(C,M,he,"","\\upsilon",!0);v(C,M,he,"","\\phi",!0);v(C,M,he,"","\\chi",!0);v(C,M,he,"","\\psi",!0);v(C,M,he,"","\\omega",!0);v(C,M,he,"","\\varepsilon",!0);v(C,M,he,"","\\vartheta",!0);v(C,M,he,"","\\varpi",!0);v(C,M,he,"","\\varrho",!0);v(C,M,he,"","\\varsigma",!0);v(C,M,he,"","\\varphi",!0);v(C,M,Ft,"","*",!0);v(C,M,Ft,"+","+");v(C,M,Ft,"","-",!0);v(C,M,Ft,"","\\cdot",!0);v(C,M,Ft,"","\\circ",!0);v(C,M,Ft,"","\\div",!0);v(C,M,Ft,"","\\pm",!0);v(C,M,Ft,"","\\times",!0);v(C,M,Ft,"","\\cap",!0);v(C,M,Ft,"","\\cup",!0);v(C,M,Ft,"","\\setminus",!0);v(C,M,Ft,"","\\land");v(C,M,Ft,"","\\lor");v(C,M,Ft,"","\\wedge",!0);v(C,M,Ft,"","\\vee",!0);v(C,M,G,"","\\surd");v(C,M,as,"","\\langle",!0);v(C,M,as,"","\\lvert");v(C,M,as,"","\\lVert");v(C,M,pi,"?","?");v(C,M,pi,"!","!");v(C,M,pi,"","\\rangle",!0);v(C,M,pi,"","\\rvert");v(C,M,pi,"","\\rVert");v(C,M,F,"=","=");v(C,M,F,":",":");v(C,M,F,"","\\approx",!0);v(C,M,F,"","\\cong",!0);v(C,M,F,"","\\ge");v(C,M,F,"","\\geq",!0);v(C,M,F,"","\\gets");v(C,M,F,">","\\gt",!0);v(C,M,F,"","\\in",!0);v(C,M,F,"","\\@not");v(C,M,F,"","\\subset",!0);v(C,M,F,"","\\supset",!0);v(C,M,F,"","\\subseteq",!0);v(C,M,F,"","\\supseteq",!0);v(C,B,F,"","\\nsubseteq",!0);v(C,B,F,"","\\nsupseteq",!0);v(C,M,F,"","\\models");v(C,M,F,"","\\leftarrow",!0);v(C,M,F,"","\\le");v(C,M,F,"","\\leq",!0);v(C,M,F,"<","\\lt",!0);v(C,M,F,"","\\rightarrow",!0);v(C,M,F,"","\\to");v(C,B,F,"","\\ngeq",!0);v(C,B,F,"","\\nleq",!0);v(C,M,bl,"","\\ ");v(C,M,bl,"","\\space");v(C,M,bl,"","\\nobreakspace");v(mt,M,bl,"","\\ ");v(mt,M,bl,""," ");v(mt,M,bl,"","\\space");v(mt,M,bl,"","\\nobreakspace");v(C,M,bl,null,"\\nobreak");v(C,M,bl,null,"\\allowbreak");v(C,M,E4,",",",");v(C,M,E4,";",";");v(C,B,Ft,"","\\barwedge",!0);v(C,B,Ft,"","\\veebar",!0);v(C,M,Ft,"","\\odot",!0);v(C,M,Ft,"","\\oplus",!0);v(C,M,Ft,"","\\otimes",!0);v(C,M,G,"","\\partial",!0);v(C,M,Ft,"","\\oslash",!0);v(C,B,Ft,"","\\circledcirc",!0);v(C,B,Ft,"","\\boxdot",!0);v(C,M,Ft,"","\\bigtriangleup");v(C,M,Ft,"","\\bigtriangledown");v(C,M,Ft,"","\\dagger");v(C,M,Ft,"","\\diamond");v(C,M,Ft,"","\\star");v(C,M,Ft,"","\\triangleleft");v(C,M,Ft,"","\\triangleright");v(C,M,as,"{","\\{");v(mt,M,G,"{","\\{");v(mt,M,G,"{","\\textbraceleft");v(C,M,pi,"}","\\}");v(mt,M,G,"}","\\}");v(mt,M,G,"}","\\textbraceright");v(C,M,as,"{","\\lbrace");v(C,M,pi,"}","\\rbrace");v(C,M,as,"[","\\lbrack",!0);v(mt,M,G,"[","\\lbrack",!0);v(C,M,pi,"]","\\rbrack",!0);v(mt,M,G,"]","\\rbrack",!0);v(C,M,as,"(","\\lparen",!0);v(C,M,pi,")","\\rparen",!0);v(mt,M,G,"<","\\textless",!0);v(mt,M,G,">","\\textgreater",!0);v(C,M,as,"","\\lfloor",!0);v(C,M,pi,"","\\rfloor",!0);v(C,M,as,"","\\lceil",!0);v(C,M,pi,"","\\rceil",!0);v(C,M,G,"\\","\\backslash");v(C,M,G,"","|");v(C,M,G,"","\\vert");v(mt,M,G,"|","\\textbar",!0);v(C,M,G,"","\\|");v(C,M,G,"","\\Vert");v(mt,M,G,"","\\textbardbl");v(mt,M,G,"~","\\textasciitilde");v(mt,M,G,"\\","\\textbackslash");v(mt,M,G,"^","\\textasciicircum");v(C,M,F,"","\\uparrow",!0);v(C,M,F,"","\\Uparrow",!0);v(C,M,F,"","\\downarrow",!0);v(C,M,F,"","\\Downarrow",!0);v(C,M,F,"","\\updownarrow",!0);v(C,M,F,"","\\Updownarrow",!0);v(C,M,Kr,"","\\coprod");v(C,M,Kr,"","\\bigvee");v(C,M,Kr,"","\\bigwedge");v(C,M,Kr,"","\\biguplus");v(C,M,Kr,"","\\bigcap");v(C,M,Kr,"","\\bigcup");v(C,M,Kr,"","\\int");v(C,M,Kr,"","\\intop");v(C,M,Kr,"","\\iint");v(C,M,Kr,"","\\iiint");v(C,M,Kr,"","\\prod");v(C,M,Kr,"","\\sum");v(C,M,Kr,"","\\bigotimes");v(C,M,Kr,"","\\bigoplus");v(C,M,Kr,"","\\bigodot");v(C,M,Kr,"","\\oint");v(C,M,Kr,"","\\oiint");v(C,M,Kr,"","\\oiiint");v(C,M,Kr,"","\\bigsqcup");v(C,M,Kr,"","\\smallint");v(mt,M,Qd,"","\\textellipsis");v(C,M,Qd,"","\\mathellipsis");v(mt,M,Qd,"","\\ldots",!0);v(C,M,Qd,"","\\ldots",!0);v(C,M,Qd,"","\\@cdots",!0);v(C,M,Qd,"","\\ddots",!0);v(C,M,G,"","\\varvdots");v(mt,M,G,"","\\varvdots");v(C,M,Tr,"","\\acute");v(C,M,Tr,"","\\grave");v(C,M,Tr,"","\\ddot");v(C,M,Tr,"~","\\tilde");v(C,M,Tr,"","\\bar");v(C,M,Tr,"","\\breve");v(C,M,Tr,"","\\check");v(C,M,Tr,"^","\\hat");v(C,M,Tr,"","\\vec");v(C,M,Tr,"","\\dot");v(C,M,Tr,"","\\mathring");v(C,M,he,"","\\@imath");v(C,M,he,"","\\@jmath");v(C,M,G,"","");v(C,M,G,"","");v(mt,M,G,"","\\i",!0);v(mt,M,G,"","\\j",!0);v(mt,M,G,"","\\ss",!0);v(mt,M,G,"","\\ae",!0);v(mt,M,G,"","\\oe",!0);v(mt,M,G,"","\\o",!0);v(mt,M,G,"","\\AE",!0);v(mt,M,G,"","\\OE",!0);v(mt,M,G,"","\\O",!0);v(mt,M,Tr,"","\\'");v(mt,M,Tr,"","\\`");v(mt,M,Tr,"","\\^");v(mt,M,Tr,"","\\~");v(mt,M,Tr,"","\\=");v(mt,M,Tr,"","\\u");v(mt,M,Tr,"","\\.");v(mt,M,Tr,"","\\c");v(mt,M,Tr,"","\\r");v(mt,M,Tr,"","\\v");v(mt,M,Tr,"",'\\"');v(mt,M,Tr,"","\\H");v(mt,M,Tr,"","\\textcircled");var mq={"--":!0,"---":!0,"``":!0,"''":!0};v(mt,M,G,"","--",!0);v(mt,M,G,"","\\textendash");v(mt,M,G,"","---",!0);v(mt,M,G,"","\\textemdash");v(mt,M,G,"","`",!0);v(mt,M,G,"","\\textquoteleft");v(mt,M,G,"","'",!0);v(mt,M,G,"","\\textquoteright");v(mt,M,G,"","``",!0);v(mt,M,G,"","\\textquotedblleft");v(mt,M,G,"","''",!0);v(mt,M,G,"","\\textquotedblright");v(C,M,G,"","\\degree",!0);v(mt,M,G,"","\\degree");v(mt,M,G,"","\\textdegree",!0);v(C,M,G,"","\\pounds");v(C,M,G,"","\\mathsterling",!0);v(mt,M,G,"","\\pounds");v(mt,M,G,"","\\textsterling",!0);v(C,B,G,"","\\maltese");v(mt,B,G,"","\\maltese");var CO='0123456789/@."';for(var J5=0;J5<CO.length;J5++){var SO=CO.charAt(J5);v(C,M,G,SO,SO)}var TO='0123456789!@*()-=+";:?/.,';for(var Z5=0;Z5<TO.length;Z5++){var _O=TO.charAt(Z5);v(mt,M,G,_O,_O)}var Ax="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var Q5=0;Q5<Ax.length;Q5++){var zy=Ax.charAt(Q5);v(C,M,he,zy,zy),v(mt,M,G,zy,zy)}v(C,B,G,"C","");v(mt,B,G,"C","");v(C,B,G,"H","");v(mt,B,G,"H","");v(C,B,G,"N","");v(mt,B,G,"N","");v(C,B,G,"P","");v(mt,B,G,"P","");v(C,B,G,"Q","");v(mt,B,G,"Q","");v(C,B,G,"R","");v(mt,B,G,"R","");v(C,B,G,"Z","");v(mt,B,G,"Z","");v(C,M,he,"h","");v(mt,M,he,"h","");var ye="";for(var Kn=0;Kn<Ax.length;Kn++){var Dr=Ax.charAt(Kn);ye=String.fromCharCode(55349,56320+Kn),v(C,M,he,Dr,ye),v(mt,M,G,Dr,ye),ye=String.fromCharCode(55349,56372+Kn),v(C,M,he,Dr,ye),v(mt,M,G,Dr,ye),ye=String.fromCharCode(55349,56424+Kn),v(C,M,he,Dr,ye),v(mt,M,G,Dr,ye),ye=String.fromCharCode(55349,56580+Kn),v(C,M,he,Dr,ye),v(mt,M,G,Dr,ye),ye=String.fromCharCode(55349,56684+Kn),v(C,M,he,Dr,ye),v(mt,M,G,Dr,ye),ye=String.fromCharCode(55349,56736+Kn),v(C,M,he,Dr,ye),v(mt,M,G,Dr,ye),ye=String.fromCharCode(55349,56788+Kn),v(C,M,he,Dr,ye),v(mt,M,G,Dr,ye),ye=String.fromCharCode(55349,56840+Kn),v(C,M,he,Dr,ye),v(mt,M,G,Dr,ye),ye=String.fromCharCode(55349,56944+Kn),v(C,M,he,Dr,ye),v(mt,M,G,Dr,ye),Kn<26&&(ye=String.fromCharCode(55349,56632+Kn),v(C,M,he,Dr,ye),v(mt,M,G,Dr,ye),ye=String.fromCharCode(55349,56476+Kn),v(C,M,he,Dr,ye),v(mt,M,G,Dr,ye))}ye="";v(C,M,he,"k",ye);v(mt,M,G,"k",ye);for(var qc=0;qc<10;qc++){var Cl=qc.toString();ye=String.fromCharCode(55349,57294+qc),v(C,M,he,Cl,ye),v(mt,M,G,Cl,ye),ye=String.fromCharCode(55349,57314+qc),v(C,M,he,Cl,ye),v(mt,M,G,Cl,ye),ye=String.fromCharCode(55349,57324+qc),v(C,M,he,Cl,ye),v(mt,M,G,Cl,ye),ye=String.fromCharCode(55349,57334+qc),v(C,M,he,Cl,ye),v(mt,M,G,Cl,ye)}var UC="";for(var t3=0;t3<UC.length;t3++){var Hy=UC.charAt(t3);v(C,M,he,Hy,Hy),v(mt,M,G,Hy,Hy)}var qy=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],MO=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],zvt=function(t,r){var n=t.charCodeAt(0),i=t.charCodeAt(1),s=(n-55296)*1024+(i-56320)+65536,o=r==="math"?0:1;if(119808<=s&&s<120484){var a=Math.floor((s-119808)/26);return[qy[a][2],qy[a][o]]}else if(120782<=s&&s<=120831){var l=Math.floor((s-120782)/10);return[MO[l][2],MO[l][o]]}else{if(s===120485||s===120486)return[qy[0][2],qy[0][o]];if(120486<s&&s<120782)return["",""];throw new vt("Unsupported character: "+t)}},L4=function(t,r,n){return pr[n][t]&&pr[n][t].replace&&(t=pr[n][t].replace),{value:t,metrics:o9(t,r,n)}},Hs=function(t,r,n,i,s){var o=L4(t,r,n),a=o.metrics;t=o.value;var l;if(a){var c=a.italic;(n==="text"||i&&i.font==="mathit")&&(c=0),l=new As(t,a.height,a.depth,c,a.skew,a.width,s)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+t+"' in style '"+r+"' and mode '"+n+"'")),l=new As(t,0,0,0,0,0,s);if(i){l.maxFontSize=i.sizeMultiplier,i.style.isTight()&&l.classes.push("mtight");var h=i.getColor();h&&(l.style.color=h)}return l},Hvt=function(t,r,n,i){return i===void 0&&(i=[]),n.font==="boldsymbol"&&L4(t,"Main-Bold",r).metrics?Hs(t,"Main-Bold",r,n,i.concat(["mathbf"])):t==="\\"||pr[r][t].font==="main"?Hs(t,"Main-Regular",r,n,i):Hs(t,"AMS-Regular",r,n,i.concat(["amsrm"]))},qvt=function(t,r,n,i,s){return s!=="textord"&&L4(t,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},Vvt=function(t,r,n){var i=t.mode,s=t.text,o=["mord"],a=i==="math"||i==="text"&&r.font,l=a?r.font:r.fontFamily,c="",h="";if(s.charCodeAt(0)===55349&&([c,h]=zvt(s,i)),c.length>0)return Hs(s,c,i,r,o.concat(h));if(l){var u,f;if(l==="boldsymbol"){var d=qvt(s,i,r,o,n);u=d.fontName,f=[d.fontClass]}else a?(u=bq[l].fontName,f=[l]):(u=Vy(l,r.fontWeight,r.fontShape),f=[l,r.fontWeight,r.fontShape]);if(L4(s,u,i).metrics)return Hs(s,u,i,r,o.concat(f));if(mq.hasOwnProperty(s)&&u.slice(0,10)==="Typewriter"){for(var p=[],m=0;m<s.length;m++)p.push(Hs(s[m],u,i,r,o.concat(f)));return yq(p)}}if(n==="mathord")return Hs(s,"Math-Italic",i,r,o.concat(["mathnormal"]));if(n==="textord"){var g=pr[i][s]&&pr[i][s].font;if(g==="ams"){var y=Vy("amsrm",r.fontWeight,r.fontShape);return Hs(s,y,i,r,o.concat("amsrm",r.fontWeight,r.fontShape))}else if(g==="main"||!g){var b=Vy("textrm",r.fontWeight,r.fontShape);return Hs(s,b,i,r,o.concat(r.fontWeight,r.fontShape))}else{var x=Vy(g,r.fontWeight,r.fontShape);return Hs(s,x,i,r,o.concat(x,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},Wvt=(e,t)=>{if(mc(e.classes)!==mc(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(e.classes.length===1){var r=e.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in e.style)if(e.style.hasOwnProperty(n)&&e.style[n]!==t.style[n])return!1;for(var i in t.style)if(t.style.hasOwnProperty(i)&&e.style[i]!==t.style[i])return!1;return!0},jvt=e=>{for(var t=0;t<e.length-1;t++){var r=e[t],n=e[t+1];r instanceof As&&n instanceof As&&Wvt(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,e.splice(t+1,1),t--)}return e},l9=function(t){for(var r=0,n=0,i=0,s=0;s<t.children.length;s++){var o=t.children[s];o.height>r&&(r=o.height),o.depth>n&&(n=o.depth),o.maxFontSize>i&&(i=o.maxFontSize)}t.height=r,t.depth=n,t.maxFontSize=i},wi=function(t,r,n,i){var s=new I1(t,r,n,i);return l9(s),s},gq=(e,t,r,n)=>new I1(e,t,r,n),Uvt=function(t,r,n){var i=wi([t],[],r);return i.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),i.style.borderBottomWidth=_t(i.height),i.maxFontSize=1,i},Gvt=function(t,r,n,i){var s=new a9(t,r,n,i);return l9(s),s},yq=function(t){var r=new D1(t);return l9(r),r},Kvt=function(t,r){return t instanceof D1?wi([],[t],r):t},Yvt=function(t){if(t.positionType==="individualShift"){for(var r=t.children,n=[r[0]],i=-r[0].shift-r[0].elem.depth,s=i,o=1;o<r.length;o++){var a=-r[o].shift-s-r[o].elem.depth,l=a-(r[o-1].elem.height+r[o-1].elem.depth);s=s+a,n.push({type:"kern",size:l}),n.push(r[o])}return{children:n,depth:i}}var c;if(t.positionType==="top"){for(var h=t.positionData,u=0;u<t.children.length;u++){var f=t.children[u];h-=f.type==="kern"?f.size:f.elem.height+f.elem.depth}c=h}else if(t.positionType==="bottom")c=-t.positionData;else{var d=t.children[0];if(d.type!=="elem")throw new Error('First child must have type "elem".');if(t.positionType==="shift")c=-d.elem.depth-t.positionData;else if(t.positionType==="firstBaseline")c=-d.elem.depth;else throw new Error("Invalid positionType "+t.positionType+".")}return{children:t.children,depth:c}},Xvt=function(t,r){for(var{children:n,depth:i}=Yvt(t),s=0,o=0;o<n.length;o++){var a=n[o];if(a.type==="elem"){var l=a.elem;s=Math.max(s,l.maxFontSize,l.height)}}s+=2;var c=wi(["pstrut"],[]);c.style.height=_t(s);for(var h=[],u=i,f=i,d=i,p=0;p<n.length;p++){var m=n[p];if(m.type==="kern")d+=m.size;else{var g=m.elem,y=m.wrapperClasses||[],b=m.wrapperStyle||{},x=wi(y,[c,g],void 0,b);x.style.top=_t(-s-d-g.depth),m.marginLeft&&(x.style.marginLeft=m.marginLeft),m.marginRight&&(x.style.marginRight=m.marginRight),h.push(x),d+=g.height+g.depth}u=Math.min(u,d),f=Math.max(f,d)}var T=wi(["vlist"],h);T.style.height=_t(f);var S;if(u<0){var w=wi([],[]),_=wi(["vlist"],[w]);_.style.height=_t(-u);var I=wi(["vlist-s"],[new As("")]);S=[wi(["vlist-r"],[T,I]),wi(["vlist-r"],[_])]}else S=[wi(["vlist-r"],[T])];var N=wi(["vlist-t"],S);return S.length===2&&N.classes.push("vlist-t2"),N.height=f,N.depth=-u,N},Jvt=(e,t)=>{var r=wi(["mspace"],[],t),n=Or(e,t);return r.style.marginRight=_t(n),r},Vy=function(t,r,n){var i="";switch(t){case"amsrm":i="AMS";break;case"textrm":i="Main";break;case"textsf":i="SansSerif";break;case"texttt":i="Typewriter";break;default:i=t}var s;return r==="textbf"&&n==="textit"?s="BoldItalic":r==="textbf"?s="Bold":r==="textit"?s="Italic":s="Regular",i+"-"+s},bq={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},xq={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Zvt=function(t,r){var[n,i,s]=xq[t],o=new gc(n),a=new sl([o],{width:_t(i),height:_t(s),style:"width:"+_t(i),viewBox:"0 0 "+1e3*i+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),l=gq(["overlay"],[a],r);return l.height=s,l.style.height=_t(s),l.style.width=_t(i),l},Z={fontMap:bq,makeSymbol:Hs,mathsym:Hvt,makeSpan:wi,makeSvgSpan:gq,makeLineSpan:Uvt,makeAnchor:Gvt,makeFragment:yq,wrapFragment:Kvt,makeVList:Xvt,makeOrd:Vvt,makeGlue:Jvt,staticSvg:Zvt,svgData:xq,tryCombineChars:jvt},Er={number:3,unit:"mu"},Vc={number:4,unit:"mu"},ma={number:5,unit:"mu"},Qvt={mord:{mop:Er,mbin:Vc,mrel:ma,minner:Er},mop:{mord:Er,mop:Er,mrel:ma,minner:Er},mbin:{mord:Vc,mop:Vc,mopen:Vc,minner:Vc},mrel:{mord:ma,mop:ma,mopen:ma,minner:ma},mopen:{},mclose:{mop:Er,mbin:Vc,mrel:ma,minner:Er},mpunct:{mord:Er,mop:Er,mrel:ma,mopen:Er,mclose:Er,mpunct:Er,minner:Er},minner:{mord:Er,mop:Er,mbin:Vc,mrel:ma,mopen:Er,mpunct:Er,minner:Er}},t4t={mord:{mop:Er},mop:{mord:Er,mop:Er},mbin:{},mrel:{},mopen:{},mclose:{mop:Er},mpunct:{},minner:{mop:Er}},vq={},Ex={},Lx={};function Rt(e){for(var{type:t,names:r,props:n,handler:i,htmlBuilder:s,mathmlBuilder:o}=e,a={type:t,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:i},l=0;l<r.length;++l)vq[r[l]]=a;t&&(s&&(Ex[t]=s),o&&(Lx[t]=o))}function _u(e){var{type:t,htmlBuilder:r,mathmlBuilder:n}=e;Rt({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var Ox=function(t){return t.type==="ordgroup"&&t.body.length===1?t.body[0]:t},Fr=function(t){return t.type==="ordgroup"?t.body:[t]},ol=Z.makeSpan,e4t=["leftmost","mbin","mopen","mrel","mop","mpunct"],r4t=["rightmost","mrel","mclose","mpunct"],n4t={display:ue.DISPLAY,text:ue.TEXT,script:ue.SCRIPT,scriptscript:ue.SCRIPTSCRIPT},i4t={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},tn=function(t,r,n,i){i===void 0&&(i=[null,null]);for(var s=[],o=0;o<t.length;o++){var a=He(t[o],r);if(a instanceof D1){var l=a.children;s.push(...l)}else s.push(a)}if(Z.tryCombineChars(s),!n)return s;var c=r;if(t.length===1){var h=t[0];h.type==="sizing"?c=r.havingSize(h.size):h.type==="styling"&&(c=r.havingStyle(n4t[h.style]))}var u=ol([i[0]||"leftmost"],[],r),f=ol([i[1]||"rightmost"],[],r),d=n==="root";return AO(s,(p,m)=>{var g=m.classes[0],y=p.classes[0];g==="mbin"&&r4t.includes(y)?m.classes[0]="mord":y==="mbin"&&e4t.includes(g)&&(p.classes[0]="mord")},{node:u},f,d),AO(s,(p,m)=>{var g=GC(m),y=GC(p),b=g&&y?p.hasClass("mtight")?t4t[g][y]:Qvt[g][y]:null;if(b)return Z.makeGlue(b,c)},{node:u},f,d),s},AO=function e(t,r,n,i,s){i&&t.push(i);for(var o=0;o<t.length;o++){var a=t[o],l=wq(a);if(l){e(l.children,r,n,null,s);continue}var c=!a.hasClass("mspace");if(c){var h=r(a,n.node);h&&(n.insertAfter?n.insertAfter(h):(t.unshift(h),o++))}c?n.node=a:s&&a.hasClass("newline")&&(n.node=ol(["leftmost"])),n.insertAfter=(u=>f=>{t.splice(u+1,0,f),o++})(o)}i&&t.pop()},wq=function(t){return t instanceof D1||t instanceof a9||t instanceof I1&&t.hasClass("enclosing")?t:null},s4t=function e(t,r){var n=wq(t);if(n){var i=n.children;if(i.length){if(r==="right")return e(i[i.length-1],"right");if(r==="left")return e(i[0],"left")}}return t},GC=function(t,r){return t?(r&&(t=s4t(t,r)),i4t[t.classes[0]]||null):null},pg=function(t,r){var n=["nulldelimiter"].concat(t.baseSizingClasses());return ol(r.concat(n))},He=function(t,r,n){if(!t)return ol();if(Ex[t.type]){var i=Ex[t.type](t,r);if(n&&r.size!==n.size){i=ol(r.sizingClasses(n),[i],r);var s=r.sizeMultiplier/n.sizeMultiplier;i.height*=s,i.depth*=s}return i}else throw new vt("Got group of unknown type: '"+t.type+"'")};function Wy(e,t){var r=ol(["base"],e,t),n=ol(["strut"]);return n.style.height=_t(r.height+r.depth),r.depth&&(n.style.verticalAlign=_t(-r.depth)),r.children.unshift(n),r}function KC(e,t){var r=null;e.length===1&&e[0].type==="tag"&&(r=e[0].tag,e=e[0].body);var n=tn(e,t,"root"),i;n.length===2&&n[1].hasClass("tag")&&(i=n.pop());for(var s=[],o=[],a=0;a<n.length;a++)if(o.push(n[a]),n[a].hasClass("mbin")||n[a].hasClass("mrel")||n[a].hasClass("allowbreak")){for(var l=!1;a<n.length-1&&n[a+1].hasClass("mspace")&&!n[a+1].hasClass("newline");)a++,o.push(n[a]),n[a].hasClass("nobreak")&&(l=!0);l||(s.push(Wy(o,t)),o=[])}else n[a].hasClass("newline")&&(o.pop(),o.length>0&&(s.push(Wy(o,t)),o=[]),s.push(n[a]));o.length>0&&s.push(Wy(o,t));var c;r?(c=Wy(tn(r,t,!0)),c.classes=["tag"],s.push(c)):i&&s.push(i);var h=ol(["katex-html"],s);if(h.setAttribute("aria-hidden","true"),c){var u=c.children[0];u.style.height=_t(h.height+h.depth),h.depth&&(u.style.verticalAlign=_t(-h.depth))}return h}function kq(e){return new D1(e)}class Xi{constructor(t,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(t,r){this.attributes[t]=r}getAttribute(t){return this.attributes[t]}toNode(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);this.classes.length>0&&(t.className=mc(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof Vo&&this.children[n+1]instanceof Vo){for(var i=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof Vo;)i+=this.children[++n].toText();t.appendChild(new Vo(i).toNode())}else t.appendChild(this.children[n].toNode());return t}toMarkup(){var t="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="',t+=We.escape(this.attributes[r]),t+='"');this.classes.length>0&&(t+=' class ="'+We.escape(mc(this.classes))+'"'),t+=">";for(var n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map(t=>t.toText()).join("")}}class Vo{constructor(t){this.text=void 0,this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return We.escape(this.toText())}toText(){return this.text}}class o4t{constructor(t){this.width=void 0,this.character=void 0,this.width=t,t>=.05555&&t<=.05556?this.character="":t>=.1666&&t<=.1667?this.character="":t>=.2222&&t<=.2223?this.character="":t>=.2777&&t<=.2778?this.character="":t>=-.05556&&t<=-.05555?this.character="":t>=-.1667&&t<=-.1666?this.character="":t>=-.2223&&t<=-.2222?this.character="":t>=-.2778&&t<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",_t(this.width)),t}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+_t(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var yt={MathNode:Xi,TextNode:Vo,SpaceNode:o4t,newDocumentFragment:kq},Es=function(t,r,n){return pr[r][t]&&pr[r][t].replace&&t.charCodeAt(0)!==55349&&!(mq.hasOwnProperty(t)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(t=pr[r][t].replace),new yt.TextNode(t)},c9=function(t){return t.length===1?t[0]:new yt.MathNode("mrow",t)},h9=function(t,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var i=t.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return t.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var s=t.text;if(["\\imath","\\jmath"].includes(s))return null;pr[i][s]&&pr[i][s].replace&&(s=pr[i][s].replace);var o=Z.fontMap[n].fontName;return o9(s,o,i)?Z.fontMap[n].variant:null};function e3(e){if(!e)return!1;if(e.type==="mi"&&e.children.length===1){var t=e.children[0];return t instanceof Vo&&t.text==="."}else if(e.type==="mo"&&e.children.length===1&&e.getAttribute("separator")==="true"&&e.getAttribute("lspace")==="0em"&&e.getAttribute("rspace")==="0em"){var r=e.children[0];return r instanceof Vo&&r.text===","}else return!1}var Ni=function(t,r,n){if(t.length===1){var i=cr(t[0],r);return n&&i instanceof Xi&&i.type==="mo"&&(i.setAttribute("lspace","0em"),i.setAttribute("rspace","0em")),[i]}for(var s=[],o,a=0;a<t.length;a++){var l=cr(t[a],r);if(l instanceof Xi&&o instanceof Xi){if(l.type==="mtext"&&o.type==="mtext"&&l.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...l.children);continue}else if(l.type==="mn"&&o.type==="mn"){o.children.push(...l.children);continue}else if(e3(l)&&o.type==="mn"){o.children.push(...l.children);continue}else if(l.type==="mn"&&e3(o))l.children=[...o.children,...l.children],s.pop();else if((l.type==="msup"||l.type==="msub")&&l.children.length>=1&&(o.type==="mn"||e3(o))){var c=l.children[0];c instanceof Xi&&c.type==="mn"&&(c.children=[...o.children,...c.children],s.pop())}else if(o.type==="mi"&&o.children.length===1){var h=o.children[0];if(h instanceof Vo&&h.text===""&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var u=l.children[0];u instanceof Vo&&u.text.length>0&&(u.text=u.text.slice(0,1)+""+u.text.slice(1),s.pop())}}}s.push(l),o=l}return s},yc=function(t,r,n){return c9(Ni(t,r,n))},cr=function(t,r){if(!t)return new yt.MathNode("mrow");if(Lx[t.type]){var n=Lx[t.type](t,r);return n}else throw new vt("Got group of unknown type: '"+t.type+"'")};function EO(e,t,r,n,i){var s=Ni(e,r),o;s.length===1&&s[0]instanceof Xi&&["mrow","mtable"].includes(s[0].type)?o=s[0]:o=new yt.MathNode("mrow",s);var a=new yt.MathNode("annotation",[new yt.TextNode(t)]);a.setAttribute("encoding","application/x-tex");var l=new yt.MathNode("semantics",[o,a]),c=new yt.MathNode("math",[l]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&c.setAttribute("display","block");var h=i?"katex":"katex-mathml";return Z.makeSpan([h],[c])}var Cq=function(t){return new Ea({style:t.displayMode?ue.DISPLAY:ue.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},Sq=function(t,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),t=Z.makeSpan(n,[t])}return t},a4t=function(t,r,n){var i=Cq(n),s;if(n.output==="mathml")return EO(t,r,i,n.displayMode,!0);if(n.output==="html"){var o=KC(t,i);s=Z.makeSpan(["katex"],[o])}else{var a=EO(t,r,i,n.displayMode,!1),l=KC(t,i);s=Z.makeSpan(["katex"],[a,l])}return Sq(s,n)},l4t=function(t,r,n){var i=Cq(n),s=KC(t,i),o=Z.makeSpan(["katex"],[s]);return Sq(o,n)},c4t={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},h4t=function(t){var r=new yt.MathNode("mo",[new yt.TextNode(c4t[t.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},u4t={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},f4t=function(t){return t.type==="ordgroup"?t.body.length:1},d4t=function(t,r){function n(){var a=4e5,l=t.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(l)){var c=t,h=f4t(c.base),u,f,d;if(h>5)l==="widehat"||l==="widecheck"?(u=420,a=2364,d=.42,f=l+"4"):(u=312,a=2340,d=.34,f="tilde4");else{var p=[1,1,2,2,3,3][h];l==="widehat"||l==="widecheck"?(a=[0,1062,2364,2364,2364][p],u=[0,239,300,360,420][p],d=[0,.24,.3,.3,.36,.42][p],f=l+p):(a=[0,600,1033,2339,2340][p],u=[0,260,286,306,312][p],d=[0,.26,.286,.3,.306,.34][p],f="tilde"+p)}var m=new gc(f),g=new sl([m],{width:"100%",height:_t(d),viewBox:"0 0 "+a+" "+u,preserveAspectRatio:"none"});return{span:Z.makeSvgSpan([],[g],r),minWidth:0,height:d}}else{var y=[],b=u4t[l],[x,T,S]=b,w=S/1e3,_=x.length,I,N;if(_===1){var L=b[3];I=["hide-tail"],N=[L]}else if(_===2)I=["halfarrow-left","halfarrow-right"],N=["xMinYMin","xMaxYMin"];else if(_===3)I=["brace-left","brace-center","brace-right"],N=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+_+" children.");for(var D=0;D<_;D++){var P=new gc(x[D]),K=new sl([P],{width:"400em",height:_t(w),viewBox:"0 0 "+a+" "+S,preserveAspectRatio:N[D]+" slice"}),z=Z.makeSvgSpan([I[D]],[K],r);if(_===1)return{span:z,minWidth:T,height:w};z.style.height=_t(w),y.push(z)}return{span:Z.makeSpan(["stretchy"],y,r),minWidth:T,height:w}}}var{span:i,minWidth:s,height:o}=n();return i.height=o,i.style.height=_t(o),s>0&&(i.style.minWidth=_t(s)),i},p4t=function(t,r,n,i,s){var o,a=t.height+t.depth+n+i;if(/fbox|color|angl/.test(r)){if(o=Z.makeSpan(["stretchy",r],[],s),r==="fbox"){var l=s.color&&s.getColor();l&&(o.style.borderColor=l)}}else{var c=[];/^[bx]cancel$/.test(r)&&c.push(new jC({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&c.push(new jC({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var h=new sl(c,{width:"100%",height:_t(a)});o=Z.makeSvgSpan([],[h],s)}return o.height=a,o.style.height=_t(a),o},al={encloseSpan:p4t,mathMLnode:h4t,svgSpan:d4t};function Te(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function u9(e){var t=O4(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function O4(e){return e&&(e.type==="atom"||$vt.hasOwnProperty(e.type))?e:null}var f9=(e,t)=>{var r,n,i;e&&e.type==="supsub"?(n=Te(e.base,"accent"),r=n.base,e.base=r,i=Nvt(He(e,t)),e.base=n):(n=Te(e,"accent"),r=n.base);var s=He(r,t.havingCrampedStyle()),o=n.isShifty&&We.isCharacterBox(r),a=0;if(o){var l=We.getBaseElem(r),c=He(l,t.havingCrampedStyle());a=kO(c).skew}var h=n.label==="\\c",u=h?s.height+s.depth:Math.min(s.height,t.fontMetrics().xHeight),f;if(n.isStretchy)f=al.svgSpan(n,t),f=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:f,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+_t(2*a)+")",marginLeft:_t(2*a)}:void 0}]},t);else{var d,p;n.label==="\\vec"?(d=Z.staticSvg("vec",t),p=Z.svgData.vec[1]):(d=Z.makeOrd({mode:n.mode,text:n.label},t,"textord"),d=kO(d),d.italic=0,p=d.width,h&&(u+=d.depth)),f=Z.makeSpan(["accent-body"],[d]);var m=n.label==="\\textcircled";m&&(f.classes.push("accent-full"),u=s.height);var g=a;m||(g-=p/2),f.style.left=_t(g),n.label==="\\textcircled"&&(f.style.top=".2em"),f=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-u},{type:"elem",elem:f}]},t)}var y=Z.makeSpan(["mord","accent"],[f],t);return i?(i.children[0]=y,i.height=Math.max(y.height,i.height),i.classes[0]="mord",i):y},Tq=(e,t)=>{var r=e.isStretchy?al.mathMLnode(e.label):new yt.MathNode("mo",[Es(e.label,e.mode)]),n=new yt.MathNode("mover",[cr(e.base,t),r]);return n.setAttribute("accent","true"),n},m4t=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(e=>"\\"+e).join("|"));Rt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var r=Ox(t[0]),n=!m4t.test(e.funcName),i=!n||e.funcName==="\\widehat"||e.funcName==="\\widetilde"||e.funcName==="\\widecheck";return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:n,isShifty:i,base:r}},htmlBuilder:f9,mathmlBuilder:Tq});Rt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var r=t[0],n=e.parser.mode;return n==="math"&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:e.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:f9,mathmlBuilder:Tq});Rt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0];return{type:"accentUnder",mode:r.mode,label:n,base:i}},htmlBuilder:(e,t)=>{var r=He(e.base,t),n=al.svgSpan(e,t),i=e.label==="\\utilde"?.12:0,s=Z.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:r}]},t);return Z.makeSpan(["mord","accentunder"],[s],t)},mathmlBuilder:(e,t)=>{var r=al.mathMLnode(e.label),n=new yt.MathNode("munder",[cr(e.base,t),r]);return n.setAttribute("accentunder","true"),n}});var jy=e=>{var t=new yt.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};Rt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n,funcName:i}=e;return{type:"xArrow",mode:n.mode,label:i,body:t[0],below:r[0]}},htmlBuilder(e,t){var r=t.style,n=t.havingStyle(r.sup()),i=Z.wrapFragment(He(e.body,n,t),t),s=e.label.slice(0,2)==="\\x"?"x":"cd";i.classes.push(s+"-arrow-pad");var o;e.below&&(n=t.havingStyle(r.sub()),o=Z.wrapFragment(He(e.below,n,t),t),o.classes.push(s+"-arrow-pad"));var a=al.svgSpan(e,t),l=-t.fontMetrics().axisHeight+.5*a.height,c=-t.fontMetrics().axisHeight-.5*a.height-.111;(i.depth>.25||e.label==="\\xleftequilibrium")&&(c-=i.depth);var h;if(o){var u=-t.fontMetrics().axisHeight+o.height+.5*a.height+.111;h=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:c},{type:"elem",elem:a,shift:l},{type:"elem",elem:o,shift:u}]},t)}else h=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:c},{type:"elem",elem:a,shift:l}]},t);return h.children[0].children[0].children[1].classes.push("svg-align"),Z.makeSpan(["mrel","x-arrow"],[h],t)},mathmlBuilder(e,t){var r=al.mathMLnode(e.label);r.setAttribute("minsize",e.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(e.body){var i=jy(cr(e.body,t));if(e.below){var s=jy(cr(e.below,t));n=new yt.MathNode("munderover",[r,s,i])}else n=new yt.MathNode("mover",[r,i])}else if(e.below){var o=jy(cr(e.below,t));n=new yt.MathNode("munder",[r,o])}else n=jy(),n=new yt.MathNode("mover",[r,n]);return n}});var g4t=Z.makeSpan;function _q(e,t){var r=tn(e.body,t,!0);return g4t([e.mclass],r,t)}function Mq(e,t){var r,n=Ni(e.body,t);return e.mclass==="minner"?r=new yt.MathNode("mpadded",n):e.mclass==="mord"?e.isCharacterBox?(r=n[0],r.type="mi"):r=new yt.MathNode("mi",n):(e.isCharacterBox?(r=n[0],r.type="mo"):r=new yt.MathNode("mo",n),e.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):e.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):e.mclass==="mopen"||e.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):e.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}Rt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:r,funcName:n}=e,i=t[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:Fr(i),isCharacterBox:We.isCharacterBox(i)}},htmlBuilder:_q,mathmlBuilder:Mq});var D4=e=>{var t=e.type==="ordgroup"&&e.body.length?e.body[0]:e;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"};Rt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:r}=e;return{type:"mclass",mode:r.mode,mclass:D4(t[0]),body:Fr(t[1]),isCharacterBox:We.isCharacterBox(t[1])}}});Rt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var{parser:r,funcName:n}=e,i=t[1],s=t[0],o;n!=="\\stackrel"?o=D4(i):o="mrel";var a={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:Fr(i)},l={type:"supsub",mode:s.mode,base:a,sup:n==="\\underset"?null:s,sub:n==="\\underset"?s:null};return{type:"mclass",mode:r.mode,mclass:o,body:[l],isCharacterBox:We.isCharacterBox(l)}},htmlBuilder:_q,mathmlBuilder:Mq});Rt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"pmb",mode:r.mode,mclass:D4(t[0]),body:Fr(t[0])}},htmlBuilder(e,t){var r=tn(e.body,t,!0),n=Z.makeSpan([e.mclass],r,t);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(e,t){var r=Ni(e.body,t),n=new yt.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var y4t={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},LO=()=>({type:"styling",body:[],mode:"math",style:"display"}),OO=e=>e.type==="textord"&&e.text==="@",b4t=(e,t)=>(e.type==="mathord"||e.type==="atom")&&e.text===t;function x4t(e,t,r){var n=y4t[e];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{var i=r.callFunction("\\\\cdleft",[t[0]],[]),s={type:"atom",text:n,mode:"math",family:"rel"},o=r.callFunction("\\Big",[s],[]),a=r.callFunction("\\\\cdright",[t[1]],[]),l={type:"ordgroup",mode:"math",body:[i,o,a]};return r.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var c={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[c],[])}default:return{type:"textord",text:" ",mode:"math"}}}function v4t(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var r=e.fetch().text;if(r==="&"||r==="\\\\")e.consume();else if(r==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new vt("Expected \\\\ or \\cr or \\end",e.nextToken)}for(var n=[],i=[n],s=0;s<t.length;s++){for(var o=t[s],a=LO(),l=0;l<o.length;l++)if(!OO(o[l]))a.body.push(o[l]);else{n.push(a),l+=1;var c=u9(o[l]).text,h=new Array(2);if(h[0]={type:"ordgroup",mode:"math",body:[]},h[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(c)>-1))if("<>AV".indexOf(c)>-1)for(var u=0;u<2;u++){for(var f=!0,d=l+1;d<o.length;d++){if(b4t(o[d],c)){f=!1,l=d;break}if(OO(o[d]))throw new vt("Missing a "+c+" character to complete a CD arrow.",o[d]);h[u].body.push(o[d])}if(f)throw new vt("Missing a "+c+" character to complete a CD arrow.",o[l])}else throw new vt('Expected one of "<>AV=|." after @',o[l]);var p=x4t(c,h,e),m={type:"styling",body:[p],mode:"math",style:"display"};n.push(m),a=LO()}s%2===0?n.push(a):n.shift(),n=[],i.push(n)}e.gullet.endGroup(),e.gullet.endGroup();var g=new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:g,colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}Rt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:t[0]}},htmlBuilder(e,t){var r=t.havingStyle(t.style.sup()),n=Z.wrapFragment(He(e.label,r,t),t);return n.classes.push("cd-label-"+e.side),n.style.bottom=_t(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(e,t){var r=new yt.MathNode("mrow",[cr(e.label,t)]);return r=new yt.MathNode("mpadded",[r]),r.setAttribute("width","0"),e.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new yt.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});Rt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:r}=e;return{type:"cdlabelparent",mode:r.mode,fragment:t[0]}},htmlBuilder(e,t){var r=Z.wrapFragment(He(e.fragment,t),t);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(e,t){return new yt.MathNode("mrow",[cr(e.fragment,t)])}});Rt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:r}=e,n=Te(t[0],"ordgroup"),i=n.body,s="",o=0;o<i.length;o++){var a=Te(i[o],"textord");s+=a.text}var l=parseInt(s),c;if(isNaN(l))throw new vt("\\@char has non-numeric argument "+s);if(l<0||l>=1114111)throw new vt("\\@char with invalid code point "+s);return l<=65535?c=String.fromCharCode(l):(l-=65536,c=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:r.mode,text:c}}});var Aq=(e,t)=>{var r=tn(e.body,t.withColor(e.color),!1);return Z.makeFragment(r)},Eq=(e,t)=>{var r=Ni(e.body,t.withColor(e.color)),n=new yt.MathNode("mstyle",r);return n.setAttribute("mathcolor",e.color),n};Rt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:r}=e,n=Te(t[0],"color-token").color,i=t[1];return{type:"color",mode:r.mode,color:n,body:Fr(i)}},htmlBuilder:Aq,mathmlBuilder:Eq});Rt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:r,breakOnTokenText:n}=e,i=Te(t[0],"color-token").color;r.gullet.macros.set("\\current@color",i);var s=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:i,body:s}},htmlBuilder:Aq,mathmlBuilder:Eq});Rt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,r){var{parser:n}=e,i=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,s=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:s,size:i&&Te(i,"size").value}},htmlBuilder(e,t){var r=Z.makeSpan(["mspace"],[],t);return e.newLine&&(r.classes.push("newline"),e.size&&(r.style.marginTop=_t(Or(e.size,t)))),r},mathmlBuilder(e,t){var r=new yt.MathNode("mspace");return e.newLine&&(r.setAttribute("linebreak","newline"),e.size&&r.setAttribute("height",_t(Or(e.size,t)))),r}});var YC={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},Lq=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new vt("Expected a control sequence",e);return t},w4t=e=>{var t=e.gullet.popToken();return t.text==="="&&(t=e.gullet.popToken(),t.text===" "&&(t=e.gullet.popToken())),t},Oq=(e,t,r,n)=>{var i=e.gullet.macros.get(r.text);i==null&&(r.noexpand=!0,i={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,i,n)};Rt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:r}=e;t.consumeSpaces();var n=t.fetch();if(YC[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=YC[n.text]),Te(t.parseFunction(),"internal");throw new vt("Invalid token after macro prefix",n)}});Rt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=t.gullet.popToken(),i=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new vt("Expected a control sequence",n);for(var s=0,o,a=[[]];t.gullet.future().text!=="{";)if(n=t.gullet.popToken(),n.text==="#"){if(t.gullet.future().text==="{"){o=t.gullet.future(),a[s].push("{");break}if(n=t.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new vt('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==s+1)throw new vt('Argument number "'+n.text+'" out of order');s++,a.push([])}else{if(n.text==="EOF")throw new vt("Expected a macro definition");a[s].push(n.text)}var{tokens:l}=t.gullet.consumeArg();return o&&l.unshift(o),(r==="\\edef"||r==="\\xdef")&&(l=t.gullet.expandTokens(l),l.reverse()),t.gullet.macros.set(i,{tokens:l,numArgs:s,delimiters:a},r===YC[r]),{type:"internal",mode:t.mode}}});Rt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=Lq(t.gullet.popToken());t.gullet.consumeSpaces();var i=w4t(t);return Oq(t,n,i,r==="\\\\globallet"),{type:"internal",mode:t.mode}}});Rt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=Lq(t.gullet.popToken()),i=t.gullet.popToken(),s=t.gullet.popToken();return Oq(t,n,s,r==="\\\\globalfuture"),t.gullet.pushToken(s),t.gullet.pushToken(i),{type:"internal",mode:t.mode}}});var up=function(t,r,n){var i=pr.math[t]&&pr.math[t].replace,s=o9(i||t,r,n);if(!s)throw new Error("Unsupported symbol "+t+" and font size "+r+".");return s},d9=function(t,r,n,i){var s=n.havingBaseStyle(r),o=Z.makeSpan(i.concat(s.sizingClasses(n)),[t],n),a=s.sizeMultiplier/n.sizeMultiplier;return o.height*=a,o.depth*=a,o.maxFontSize=s.sizeMultiplier,o},Dq=function(t,r,n){var i=r.havingBaseStyle(n),s=(1-r.sizeMultiplier/i.sizeMultiplier)*r.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=_t(s),t.height-=s,t.depth+=s},k4t=function(t,r,n,i,s,o){var a=Z.makeSymbol(t,"Main-Regular",s,i),l=d9(a,r,i,o);return n&&Dq(l,i,r),l},C4t=function(t,r,n,i){return Z.makeSymbol(t,"Size"+r+"-Regular",n,i)},Iq=function(t,r,n,i,s,o){var a=C4t(t,r,s,i),l=d9(Z.makeSpan(["delimsizing","size"+r],[a],i),ue.TEXT,i,o);return n&&Dq(l,i,ue.TEXT),l},r3=function(t,r,n){var i;r==="Size1-Regular"?i="delim-size1":i="delim-size4";var s=Z.makeSpan(["delimsizinginner",i],[Z.makeSpan([],[Z.makeSymbol(t,r,n)])]);return{type:"elem",elem:s}},n3=function(t,r,n){var i=qo["Size4-Regular"][t.charCodeAt(0)]?qo["Size4-Regular"][t.charCodeAt(0)][4]:qo["Size1-Regular"][t.charCodeAt(0)][4],s=new gc("inner",Evt(t,Math.round(1e3*r))),o=new sl([s],{width:_t(i),height:_t(r),style:"width:"+_t(i),viewBox:"0 0 "+1e3*i+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),a=Z.makeSvgSpan([],[o],n);return a.height=r,a.style.height=_t(r),a.style.width=_t(i),{type:"elem",elem:a}},XC=.008,Uy={type:"kern",size:-1*XC},S4t=["|","\\lvert","\\rvert","\\vert"],T4t=["\\|","\\lVert","\\rVert","\\Vert"],Bq=function(t,r,n,i,s,o){var a,l,c,h,u="",f=0;a=c=h=t,l=null;var d="Size1-Regular";t==="\\uparrow"?c=h="":t==="\\Uparrow"?c=h="":t==="\\downarrow"?a=c="":t==="\\Downarrow"?a=c="":t==="\\updownarrow"?(a="\\uparrow",c="",h="\\downarrow"):t==="\\Updownarrow"?(a="\\Uparrow",c="",h="\\Downarrow"):S4t.includes(t)?(c="",u="vert",f=333):T4t.includes(t)?(c="",u="doublevert",f=556):t==="["||t==="\\lbrack"?(a="",c="",h="",d="Size4-Regular",u="lbrack",f=667):t==="]"||t==="\\rbrack"?(a="",c="",h="",d="Size4-Regular",u="rbrack",f=667):t==="\\lfloor"||t===""?(c=a="",h="",d="Size4-Regular",u="lfloor",f=667):t==="\\lceil"||t===""?(a="",c=h="",d="Size4-Regular",u="lceil",f=667):t==="\\rfloor"||t===""?(c=a="",h="",d="Size4-Regular",u="rfloor",f=667):t==="\\rceil"||t===""?(a="",c=h="",d="Size4-Regular",u="rceil",f=667):t==="("||t==="\\lparen"?(a="",c="",h="",d="Size4-Regular",u="lparen",f=875):t===")"||t==="\\rparen"?(a="",c="",h="",d="Size4-Regular",u="rparen",f=875):t==="\\{"||t==="\\lbrace"?(a="",l="",h="",c="",d="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(a="",l="",h="",c="",d="Size4-Regular"):t==="\\lgroup"||t===""?(a="",h="",c="",d="Size4-Regular"):t==="\\rgroup"||t===""?(a="",h="",c="",d="Size4-Regular"):t==="\\lmoustache"||t===""?(a="",h="",c="",d="Size4-Regular"):(t==="\\rmoustache"||t==="")&&(a="",h="",c="",d="Size4-Regular");var p=up(a,d,s),m=p.height+p.depth,g=up(c,d,s),y=g.height+g.depth,b=up(h,d,s),x=b.height+b.depth,T=0,S=1;if(l!==null){var w=up(l,d,s);T=w.height+w.depth,S=2}var _=m+x+T,I=Math.max(0,Math.ceil((r-_)/(S*y))),N=_+I*S*y,L=i.fontMetrics().axisHeight;n&&(L*=i.sizeMultiplier);var D=N/2-L,P=[];if(u.length>0){var K=N-m-x,z=Math.round(N*1e3),$=Lvt(u,Math.round(K*1e3)),H=new gc(u,$),U=(f/1e3).toFixed(3)+"em",q=(z/1e3).toFixed(3)+"em",rt=new sl([H],{width:U,height:q,viewBox:"0 0 "+f+" "+z}),E=Z.makeSvgSpan([],[rt],i);E.height=z/1e3,E.style.width=U,E.style.height=q,P.push({type:"elem",elem:E})}else{if(P.push(r3(h,d,s)),P.push(Uy),l===null){var dt=N-m-x+2*XC;P.push(n3(c,dt,i))}else{var Tt=(N-m-x-T)/2+2*XC;P.push(n3(c,Tt,i)),P.push(Uy),P.push(r3(l,d,s)),P.push(Uy),P.push(n3(c,Tt,i))}P.push(Uy),P.push(r3(a,d,s))}var O=i.havingBaseStyle(ue.TEXT),te=Z.makeVList({positionType:"bottom",positionData:D,children:P},O);return d9(Z.makeSpan(["delimsizing","mult"],[te],O),ue.TEXT,i,o)},i3=80,s3=.08,o3=function(t,r,n,i,s){var o=Avt(t,i,n),a=new gc(t,o),l=new sl([a],{width:"400em",height:_t(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return Z.makeSvgSpan(["hide-tail"],[l],s)},_4t=function(t,r){var n=r.havingBaseSizing(),i=Fq("\\surd",t*n.sizeMultiplier,Nq,n),s=n.sizeMultiplier,o=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),a,l=0,c=0,h=0,u;return i.type==="small"?(h=1e3+1e3*o+i3,t<1?s=1:t<1.4&&(s=.7),l=(1+o+s3)/s,c=(1+o)/s,a=o3("sqrtMain",l,h,o,r),a.style.minWidth="0.853em",u=.833/s):i.type==="large"?(h=(1e3+i3)*ym[i.size],c=(ym[i.size]+o)/s,l=(ym[i.size]+o+s3)/s,a=o3("sqrtSize"+i.size,l,h,o,r),a.style.minWidth="1.02em",u=1/s):(l=t+o+s3,c=t+o,h=Math.floor(1e3*t+o)+i3,a=o3("sqrtTall",l,h,o,r),a.style.minWidth="0.742em",u=1.056),a.height=c,a.style.height=_t(l),{span:a,advanceWidth:u,ruleWidth:(r.fontMetrics().sqrtRuleThickness+o)*s}},Rq=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],M4t=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],Pq=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],ym=[0,1.2,1.8,2.4,3],A4t=function(t,r,n,i,s){if(t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle"),Rq.includes(t)||Pq.includes(t))return Iq(t,r,!1,n,i,s);if(M4t.includes(t))return Bq(t,ym[r],!1,n,i,s);throw new vt("Illegal delimiter: '"+t+"'")},E4t=[{type:"small",style:ue.SCRIPTSCRIPT},{type:"small",style:ue.SCRIPT},{type:"small",style:ue.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],L4t=[{type:"small",style:ue.SCRIPTSCRIPT},{type:"small",style:ue.SCRIPT},{type:"small",style:ue.TEXT},{type:"stack"}],Nq=[{type:"small",style:ue.SCRIPTSCRIPT},{type:"small",style:ue.SCRIPT},{type:"small",style:ue.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],O4t=function(t){if(t.type==="small")return"Main-Regular";if(t.type==="large")return"Size"+t.size+"-Regular";if(t.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},Fq=function(t,r,n,i){for(var s=Math.min(2,3-i.style.size),o=s;o<n.length&&n[o].type!=="stack";o++){var a=up(t,O4t(n[o]),"math"),l=a.height+a.depth;if(n[o].type==="small"){var c=i.havingBaseStyle(n[o].style);l*=c.sizeMultiplier}if(l>r)return n[o]}return n[n.length-1]},$q=function(t,r,n,i,s,o){t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle");var a;Pq.includes(t)?a=E4t:Rq.includes(t)?a=Nq:a=L4t;var l=Fq(t,r,a,i);return l.type==="small"?k4t(t,l.style,n,i,s,o):l.type==="large"?Iq(t,l.size,n,i,s,o):Bq(t,r,n,i,s,o)},D4t=function(t,r,n,i,s,o){var a=i.fontMetrics().axisHeight*i.sizeMultiplier,l=901,c=5/i.fontMetrics().ptPerEm,h=Math.max(r-a,n+a),u=Math.max(h/500*l,2*h-c);return $q(t,u,!0,i,s,o)},Ya={sqrtImage:_4t,sizedDelim:A4t,sizeToMaxHeight:ym,customSizedDelim:$q,leftRightDelim:D4t},DO={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},I4t=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function I4(e,t){var r=O4(e);if(r&&I4t.includes(r.text))return r;throw r?new vt("Invalid delimiter '"+r.text+"' after '"+t.funcName+"'",e):new vt("Invalid delimiter type '"+e.type+"'",e)}Rt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var r=I4(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:DO[e.funcName].size,mclass:DO[e.funcName].mclass,delim:r.text}},htmlBuilder:(e,t)=>e.delim==="."?Z.makeSpan([e.mclass]):Ya.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];e.delim!=="."&&t.push(Es(e.delim,e.mode));var r=new yt.MathNode("mo",t);e.mclass==="mopen"||e.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=_t(Ya.sizeToMaxHeight[e.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function IO(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Rt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=e.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new vt("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:I4(t[0],e).text,color:r}}});Rt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=I4(t[0],e),n=e.parser;++n.leftrightDepth;var i=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var s=Te(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:i,left:r.text,right:s.delim,rightColor:s.color}},htmlBuilder:(e,t)=>{IO(e);for(var r=tn(e.body,t,!0,["mopen","mclose"]),n=0,i=0,s=!1,o=0;o<r.length;o++)r[o].isMiddle?s=!0:(n=Math.max(r[o].height,n),i=Math.max(r[o].depth,i));n*=t.sizeMultiplier,i*=t.sizeMultiplier;var a;if(e.left==="."?a=pg(t,["mopen"]):a=Ya.leftRightDelim(e.left,n,i,t,e.mode,["mopen"]),r.unshift(a),s)for(var l=1;l<r.length;l++){var c=r[l],h=c.isMiddle;h&&(r[l]=Ya.leftRightDelim(h.delim,n,i,h.options,e.mode,[]))}var u;if(e.right===".")u=pg(t,["mclose"]);else{var f=e.rightColor?t.withColor(e.rightColor):t;u=Ya.leftRightDelim(e.right,n,i,f,e.mode,["mclose"])}return r.push(u),Z.makeSpan(["minner"],r,t)},mathmlBuilder:(e,t)=>{IO(e);var r=Ni(e.body,t);if(e.left!=="."){var n=new yt.MathNode("mo",[Es(e.left,e.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(e.right!=="."){var i=new yt.MathNode("mo",[Es(e.right,e.mode)]);i.setAttribute("fence","true"),e.rightColor&&i.setAttribute("mathcolor",e.rightColor),r.push(i)}return c9(r)}});Rt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=I4(t[0],e);if(!e.parser.leftrightDepth)throw new vt("\\middle without preceding \\left",r);return{type:"middle",mode:e.parser.mode,delim:r.text}},htmlBuilder:(e,t)=>{var r;if(e.delim===".")r=pg(t,[]);else{r=Ya.sizedDelim(e.delim,1,t,e.mode,[]);var n={delim:e.delim,options:t};r.isMiddle=n}return r},mathmlBuilder:(e,t)=>{var r=e.delim==="\\vert"||e.delim==="|"?Es("|","text"):Es(e.delim,e.mode),n=new yt.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var p9=(e,t)=>{var r=Z.wrapFragment(He(e.body,t),t),n=e.label.slice(1),i=t.sizeMultiplier,s,o=0,a=We.isCharacterBox(e.body);if(n==="sout")s=Z.makeSpan(["stretchy","sout"]),s.height=t.fontMetrics().defaultRuleThickness/i,o=-.5*t.fontMetrics().xHeight;else if(n==="phase"){var l=Or({number:.6,unit:"pt"},t),c=Or({number:.35,unit:"ex"},t),h=t.havingBaseSizing();i=i/h.sizeMultiplier;var u=r.height+r.depth+l+c;r.style.paddingLeft=_t(u/2+l);var f=Math.floor(1e3*u*i),d=_vt(f),p=new sl([new gc("phase",d)],{width:"400em",height:_t(f/1e3),viewBox:"0 0 400000 "+f,preserveAspectRatio:"xMinYMin slice"});s=Z.makeSvgSpan(["hide-tail"],[p],t),s.style.height=_t(u),o=r.depth+l+c}else{/cancel/.test(n)?a||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var m=0,g=0,y=0;/box/.test(n)?(y=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),m=t.fontMetrics().fboxsep+(n==="colorbox"?0:y),g=m):n==="angl"?(y=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness),m=4*y,g=Math.max(0,.25-r.depth)):(m=a?.2:0,g=m),s=al.encloseSpan(r,n,m,g,t),/fbox|boxed|fcolorbox/.test(n)?(s.style.borderStyle="solid",s.style.borderWidth=_t(y)):n==="angl"&&y!==.049&&(s.style.borderTopWidth=_t(y),s.style.borderRightWidth=_t(y)),o=r.depth+g,e.backgroundColor&&(s.style.backgroundColor=e.backgroundColor,e.borderColor&&(s.style.borderColor=e.borderColor))}var b;if(e.backgroundColor)b=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:o},{type:"elem",elem:r,shift:0}]},t);else{var x=/cancel|phase/.test(n)?["svg-align"]:[];b=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:s,shift:o,wrapperClasses:x}]},t)}return/cancel/.test(n)&&(b.height=r.height,b.depth=r.depth),/cancel/.test(n)&&!a?Z.makeSpan(["mord","cancel-lap"],[b],t):Z.makeSpan(["mord"],[b],t)},m9=(e,t)=>{var r=0,n=new yt.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[cr(e.body,t)]);switch(e.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),e.label==="\\fcolorbox"){var i=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);n.setAttribute("style","border: "+i+"em solid "+String(e.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return e.backgroundColor&&n.setAttribute("mathbackground",e.backgroundColor),n};Rt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,r){var{parser:n,funcName:i}=e,s=Te(t[0],"color-token").color,o=t[1];return{type:"enclose",mode:n.mode,label:i,backgroundColor:s,body:o}},htmlBuilder:p9,mathmlBuilder:m9});Rt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,r){var{parser:n,funcName:i}=e,s=Te(t[0],"color-token").color,o=Te(t[1],"color-token").color,a=t[2];return{type:"enclose",mode:n.mode,label:i,backgroundColor:o,borderColor:s,body:a}},htmlBuilder:p9,mathmlBuilder:m9});Rt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\fbox",body:t[0]}}});Rt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e,i=t[0];return{type:"enclose",mode:r.mode,label:n,body:i}},htmlBuilder:p9,mathmlBuilder:m9});Rt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\angl",body:t[0]}}});var zq={};function oa(e){for(var{type:t,names:r,props:n,handler:i,htmlBuilder:s,mathmlBuilder:o}=e,a={type:t,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},l=0;l<r.length;++l)zq[r[l]]=a;s&&(Ex[t]=s),o&&(Lx[t]=o)}var Hq={};function A(e,t){Hq[e]=t}function BO(e){var t=[];e.consumeSpaces();var r=e.fetch().text;for(r==="\\relax"&&(e.consume(),e.consumeSpaces(),r=e.fetch().text);r==="\\hline"||r==="\\hdashline";)e.consume(),t.push(r==="\\hdashline"),e.consumeSpaces(),r=e.fetch().text;return t}var B4=e=>{var t=e.parser.settings;if(!t.displayMode)throw new vt("{"+e.envName+"} can be used only in display mode.")};function g9(e){if(e.indexOf("ed")===-1)return e.indexOf("*")===-1}function Oc(e,t,r){var{hskipBeforeAndAfter:n,addJot:i,cols:s,arraystretch:o,colSeparationType:a,autoTag:l,singleRow:c,emptySingleRow:h,maxNumCols:u,leqno:f}=t;if(e.gullet.beginGroup(),c||e.gullet.macros.set("\\cr","\\\\\\relax"),!o){var d=e.gullet.expandMacroAsText("\\arraystretch");if(d==null)o=1;else if(o=parseFloat(d),!o||o<0)throw new vt("Invalid \\arraystretch: "+d)}e.gullet.beginGroup();var p=[],m=[p],g=[],y=[],b=l!=null?[]:void 0;function x(){l&&e.gullet.macros.set("\\@eqnsw","1",!0)}function T(){b&&(e.gullet.macros.get("\\df@tag")?(b.push(e.subparse([new ts("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):b.push(!!l&&e.gullet.macros.get("\\@eqnsw")==="1"))}for(x(),y.push(BO(e));;){var S=e.parseExpression(!1,c?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),S={type:"ordgroup",mode:e.mode,body:S},r&&(S={type:"styling",mode:e.mode,style:r,body:[S]}),p.push(S);var w=e.fetch().text;if(w==="&"){if(u&&p.length===u){if(c||a)throw new vt("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else if(w==="\\end"){T(),p.length===1&&S.type==="styling"&&S.body[0].body.length===0&&(m.length>1||!h)&&m.pop(),y.length<m.length+1&&y.push([]);break}else if(w==="\\\\"){e.consume();var _=void 0;e.gullet.future().text!==" "&&(_=e.parseSizeGroup(!0)),g.push(_?_.value:null),T(),y.push(BO(e)),p=[],m.push(p),x()}else throw new vt("Expected & or \\\\ or \\cr or \\end",e.nextToken)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:i,arraystretch:o,body:m,cols:s,rowGaps:g,hskipBeforeAndAfter:n,hLinesBeforeRow:y,colSeparationType:a,tags:b,leqno:f}}function y9(e){return e.slice(0,1)==="d"?"display":"text"}var aa=function(t,r){var n,i,s=t.body.length,o=t.hLinesBeforeRow,a=0,l=new Array(s),c=[],h=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),u=1/r.fontMetrics().ptPerEm,f=5*u;if(t.colSeparationType&&t.colSeparationType==="small"){var d=r.havingStyle(ue.SCRIPT).sizeMultiplier;f=.2778*(d/r.sizeMultiplier)}var p=t.colSeparationType==="CD"?Or({number:3,unit:"ex"},r):12*u,m=3*u,g=t.arraystretch*p,y=.7*g,b=.3*g,x=0;function T(St){for(var bt=0;bt<St.length;++bt)bt>0&&(x+=.25),c.push({pos:x,isDashed:St[bt]})}for(T(o[0]),n=0;n<t.body.length;++n){var S=t.body[n],w=y,_=b;a<S.length&&(a=S.length);var I=new Array(S.length);for(i=0;i<S.length;++i){var N=He(S[i],r);_<N.depth&&(_=N.depth),w<N.height&&(w=N.height),I[i]=N}var L=t.rowGaps[n],D=0;L&&(D=Or(L,r),D>0&&(D+=b,_<D&&(_=D),D=0)),t.addJot&&(_+=m),I.height=w,I.depth=_,x+=w,I.pos=x,x+=_+D,l[n]=I,T(o[n+1])}var P=x/2+r.fontMetrics().axisHeight,K=t.cols||[],z=[],$,H,U=[];if(t.tags&&t.tags.some(St=>St))for(n=0;n<s;++n){var q=l[n],rt=q.pos-P,E=t.tags[n],dt=void 0;E===!0?dt=Z.makeSpan(["eqn-num"],[],r):E===!1?dt=Z.makeSpan([],[],r):dt=Z.makeSpan([],tn(E,r,!0),r),dt.depth=q.depth,dt.height=q.height,U.push({type:"elem",elem:dt,shift:rt})}for(i=0,H=0;i<a||H<K.length;++i,++H){for(var Tt=K[H]||{},O=!0;Tt.type==="separator";){if(O||($=Z.makeSpan(["arraycolsep"],[]),$.style.width=_t(r.fontMetrics().doubleRuleSep),z.push($)),Tt.separator==="|"||Tt.separator===":"){var te=Tt.separator==="|"?"solid":"dashed",Ht=Z.makeSpan(["vertical-separator"],[],r);Ht.style.height=_t(x),Ht.style.borderRightWidth=_t(h),Ht.style.borderRightStyle=te,Ht.style.margin="0 "+_t(-h/2);var Lt=x-P;Lt&&(Ht.style.verticalAlign=_t(-Lt)),z.push(Ht)}else throw new vt("Invalid separator type: "+Tt.separator);H++,Tt=K[H]||{},O=!1}if(!(i>=a)){var Xt=void 0;(i>0||t.hskipBeforeAndAfter)&&(Xt=We.deflt(Tt.pregap,f),Xt!==0&&($=Z.makeSpan(["arraycolsep"],[]),$.style.width=_t(Xt),z.push($)));var de=[];for(n=0;n<s;++n){var Ce=l[n],xe=Ce[i];if(xe){var Ue=Ce.pos-P;xe.depth=Ce.depth,xe.height=Ce.height,de.push({type:"elem",elem:xe,shift:Ue})}}de=Z.makeVList({positionType:"individualShift",children:de},r),de=Z.makeSpan(["col-align-"+(Tt.align||"c")],[de]),z.push(de),(i<a-1||t.hskipBeforeAndAfter)&&(Xt=We.deflt(Tt.postgap,f),Xt!==0&&($=Z.makeSpan(["arraycolsep"],[]),$.style.width=_t(Xt),z.push($)))}}if(l=Z.makeSpan(["mtable"],z),c.length>0){for(var R=Z.makeLineSpan("hline",r,h),W=Z.makeLineSpan("hdashline",r,h),tt=[{type:"elem",elem:l,shift:0}];c.length>0;){var ut=c.pop(),lt=ut.pos-P;ut.isDashed?tt.push({type:"elem",elem:W,shift:lt}):tt.push({type:"elem",elem:R,shift:lt})}l=Z.makeVList({positionType:"individualShift",children:tt},r)}if(U.length===0)return Z.makeSpan(["mord"],[l],r);var ct=Z.makeVList({positionType:"individualShift",children:U},r);return ct=Z.makeSpan(["tag"],[ct],r),Z.makeFragment([l,ct])},B4t={c:"center ",l:"left ",r:"right "},la=function(t,r){for(var n=[],i=new yt.MathNode("mtd",[],["mtr-glue"]),s=new yt.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<t.body.length;o++){for(var a=t.body[o],l=[],c=0;c<a.length;c++)l.push(new yt.MathNode("mtd",[cr(a[c],r)]));t.tags&&t.tags[o]&&(l.unshift(i),l.push(i),t.leqno?l.unshift(s):l.push(s)),n.push(new yt.MathNode("mtr",l))}var h=new yt.MathNode("mtable",n),u=t.arraystretch===.5?.1:.16+t.arraystretch-1+(t.addJot?.09:0);h.setAttribute("rowspacing",_t(u));var f="",d="";if(t.cols&&t.cols.length>0){var p=t.cols,m="",g=!1,y=0,b=p.length;p[0].type==="separator"&&(f+="top ",y=1),p[p.length-1].type==="separator"&&(f+="bottom ",b-=1);for(var x=y;x<b;x++)p[x].type==="align"?(d+=B4t[p[x].align],g&&(m+="none "),g=!0):p[x].type==="separator"&&g&&(m+=p[x].separator==="|"?"solid ":"dashed ",g=!1);h.setAttribute("columnalign",d.trim()),/[sd]/.test(m)&&h.setAttribute("columnlines",m.trim())}if(t.colSeparationType==="align"){for(var T=t.cols||[],S="",w=1;w<T.length;w++)S+=w%2?"0em ":"1em ";h.setAttribute("columnspacing",S.trim())}else t.colSeparationType==="alignat"||t.colSeparationType==="gather"?h.setAttribute("columnspacing","0em"):t.colSeparationType==="small"?h.setAttribute("columnspacing","0.2778em"):t.colSeparationType==="CD"?h.setAttribute("columnspacing","0.5em"):h.setAttribute("columnspacing","1em");var _="",I=t.hLinesBeforeRow;f+=I[0].length>0?"left ":"",f+=I[I.length-1].length>0?"right ":"";for(var N=1;N<I.length-1;N++)_+=I[N].length===0?"none ":I[N][0]?"dashed ":"solid ";return/[sd]/.test(_)&&h.setAttribute("rowlines",_.trim()),f!==""&&(h=new yt.MathNode("menclose",[h]),h.setAttribute("notation",f.trim())),t.arraystretch&&t.arraystretch<1&&(h=new yt.MathNode("mstyle",[h]),h.setAttribute("scriptlevel","1")),h},qq=function(t,r){t.envName.indexOf("ed")===-1&&B4(t);var n=[],i=t.envName.indexOf("at")>-1?"alignat":"align",s=t.envName==="split",o=Oc(t.parser,{cols:n,addJot:!0,autoTag:s?void 0:g9(t.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:s?2:void 0,leqno:t.parser.settings.leqno},"display"),a,l=0,c={type:"ordgroup",mode:t.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var h="",u=0;u<r[0].body.length;u++){var f=Te(r[0].body[u],"textord");h+=f.text}a=Number(h),l=a*2}var d=!l;o.body.forEach(function(y){for(var b=1;b<y.length;b+=2){var x=Te(y[b],"styling"),T=Te(x.body[0],"ordgroup");T.body.unshift(c)}if(d)l<y.length&&(l=y.length);else{var S=y.length/2;if(a<S)throw new vt("Too many math in a row: "+("expected "+a+", but got "+S),y[0])}});for(var p=0;p<l;++p){var m="r",g=0;p%2===1?m="l":p>0&&d&&(g=1),n[p]={type:"align",align:m,pregap:g,postgap:0}}return o.colSeparationType=d?"align":"alignat",o};oa({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var r=O4(t[0]),n=r?[t[0]]:Te(t[0],"ordgroup").body,i=n.map(function(o){var a=u9(o),l=a.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new vt("Unknown column alignment: "+l,o)}),s={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return Oc(e.parser,s,y9(e.envName))},htmlBuilder:aa,mathmlBuilder:la});oa({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(e.envName.charAt(e.envName.length-1)==="*"){var i=e.parser;if(i.consumeSpaces(),i.fetch().text==="["){if(i.consume(),i.consumeSpaces(),r=i.fetch().text,"lcr".indexOf(r)===-1)throw new vt("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),n.cols=[{type:"align",align:r}]}}var s=Oc(e.parser,n,y9(e.envName)),o=Math.max(0,...s.body.map(a=>a.length));return s.cols=new Array(o).fill({type:"align",align:r}),t?{type:"leftright",mode:e.mode,body:[s],left:t[0],right:t[1],rightColor:void 0}:s},htmlBuilder:aa,mathmlBuilder:la});oa({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t={arraystretch:.5},r=Oc(e.parser,t,"script");return r.colSeparationType="small",r},htmlBuilder:aa,mathmlBuilder:la});oa({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var r=O4(t[0]),n=r?[t[0]]:Te(t[0],"ordgroup").body,i=n.map(function(o){var a=u9(o),l=a.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new vt("Unknown column alignment: "+l,o)});if(i.length>1)throw new vt("{subarray} can contain only one column");var s={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if(s=Oc(e.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new vt("{subarray} can contain only one column");return s},htmlBuilder:aa,mathmlBuilder:la});oa({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=Oc(e.parser,t,y9(e.envName));return{type:"leftright",mode:e.mode,body:[r],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:aa,mathmlBuilder:la});oa({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:qq,htmlBuilder:aa,mathmlBuilder:la});oa({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){["gather","gather*"].includes(e.envName)&&B4(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:g9(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return Oc(e.parser,t,"display")},htmlBuilder:aa,mathmlBuilder:la});oa({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:qq,htmlBuilder:aa,mathmlBuilder:la});oa({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){B4(e);var t={autoTag:g9(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return Oc(e.parser,t,"display")},htmlBuilder:aa,mathmlBuilder:la});oa({type:"array",names:["CD"],props:{numArgs:0},handler(e){return B4(e),v4t(e.parser)},htmlBuilder:aa,mathmlBuilder:la});A("\\nonumber","\\gdef\\@eqnsw{0}");A("\\notag","\\nonumber");Rt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new vt(e.funcName+" valid only within array environment")}});var RO=zq;Rt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:r,funcName:n}=e,i=t[0];if(i.type!=="ordgroup")throw new vt("Invalid environment name",i);for(var s="",o=0;o<i.body.length;++o)s+=Te(i.body[o],"textord").text;if(n==="\\begin"){if(!RO.hasOwnProperty(s))throw new vt("No such environment: "+s,i);var a=RO[s],{args:l,optArgs:c}=r.parseArguments("\\begin{"+s+"}",a),h={mode:r.mode,envName:s,parser:r},u=a.handler(h,l,c);r.expect("\\end",!1);var f=r.nextToken,d=Te(r.parseFunction(),"environment");if(d.name!==s)throw new vt("Mismatch: \\begin{"+s+"} matched by \\end{"+d.name+"}",f);return u}return{type:"environment",mode:r.mode,name:s,nameGroup:i}}});var Vq=(e,t)=>{var r=e.font,n=t.withFont(r);return He(e.body,n)},Wq=(e,t)=>{var r=e.font,n=t.withFont(r);return cr(e.body,n)},PO={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Rt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=Ox(t[0]),s=n;return s in PO&&(s=PO[s]),{type:"font",mode:r.mode,font:s.slice(1),body:i}},htmlBuilder:Vq,mathmlBuilder:Wq});Rt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:r}=e,n=t[0],i=We.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:D4(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:i}}});Rt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n,breakOnTokenText:i}=e,{mode:s}=r,o=r.parseExpression(!0,i),a="math"+n.slice(1);return{type:"font",mode:s,font:a,body:{type:"ordgroup",mode:r.mode,body:o}}},htmlBuilder:Vq,mathmlBuilder:Wq});var jq=(e,t)=>{var r=t;return e==="display"?r=r.id>=ue.SCRIPT.id?r.text():ue.DISPLAY:e==="text"&&r.size===ue.DISPLAY.size?r=ue.TEXT:e==="script"?r=ue.SCRIPT:e==="scriptscript"&&(r=ue.SCRIPTSCRIPT),r},b9=(e,t)=>{var r=jq(e.size,t.style),n=r.fracNum(),i=r.fracDen(),s;s=t.havingStyle(n);var o=He(e.numer,s,t);if(e.continued){var a=8.5/t.fontMetrics().ptPerEm,l=3.5/t.fontMetrics().ptPerEm;o.height=o.height<a?a:o.height,o.depth=o.depth<l?l:o.depth}s=t.havingStyle(i);var c=He(e.denom,s,t),h,u,f;e.hasBarLine?(e.barSize?(u=Or(e.barSize,t),h=Z.makeLineSpan("frac-line",t,u)):h=Z.makeLineSpan("frac-line",t),u=h.height,f=h.height):(h=null,u=0,f=t.fontMetrics().defaultRuleThickness);var d,p,m;r.size===ue.DISPLAY.size||e.size==="display"?(d=t.fontMetrics().num1,u>0?p=3*f:p=7*f,m=t.fontMetrics().denom1):(u>0?(d=t.fontMetrics().num2,p=f):(d=t.fontMetrics().num3,p=3*f),m=t.fontMetrics().denom2);var g;if(h){var b=t.fontMetrics().axisHeight;d-o.depth-(b+.5*u)<p&&(d+=p-(d-o.depth-(b+.5*u))),b-.5*u-(c.height-m)<p&&(m+=p-(b-.5*u-(c.height-m)));var x=-(b-.5*u);g=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:m},{type:"elem",elem:h,shift:x},{type:"elem",elem:o,shift:-d}]},t)}else{var y=d-o.depth-(c.height-m);y<p&&(d+=.5*(p-y),m+=.5*(p-y)),g=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:m},{type:"elem",elem:o,shift:-d}]},t)}s=t.havingStyle(r),g.height*=s.sizeMultiplier/t.sizeMultiplier,g.depth*=s.sizeMultiplier/t.sizeMultiplier;var T;r.size===ue.DISPLAY.size?T=t.fontMetrics().delim1:r.size===ue.SCRIPTSCRIPT.size?T=t.havingStyle(ue.SCRIPT).fontMetrics().delim2:T=t.fontMetrics().delim2;var S,w;return e.leftDelim==null?S=pg(t,["mopen"]):S=Ya.customSizedDelim(e.leftDelim,T,!0,t.havingStyle(r),e.mode,["mopen"]),e.continued?w=Z.makeSpan([]):e.rightDelim==null?w=pg(t,["mclose"]):w=Ya.customSizedDelim(e.rightDelim,T,!0,t.havingStyle(r),e.mode,["mclose"]),Z.makeSpan(["mord"].concat(s.sizingClasses(t)),[S,Z.makeSpan(["mfrac"],[g]),w],t)},x9=(e,t)=>{var r=new yt.MathNode("mfrac",[cr(e.numer,t),cr(e.denom,t)]);if(!e.hasBarLine)r.setAttribute("linethickness","0px");else if(e.barSize){var n=Or(e.barSize,t);r.setAttribute("linethickness",_t(n))}var i=jq(e.size,t.style);if(i.size!==t.style.size){r=new yt.MathNode("mstyle",[r]);var s=i.size===ue.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",s),r.setAttribute("scriptlevel","0")}if(e.leftDelim!=null||e.rightDelim!=null){var o=[];if(e.leftDelim!=null){var a=new yt.MathNode("mo",[new yt.TextNode(e.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),o.push(a)}if(o.push(r),e.rightDelim!=null){var l=new yt.MathNode("mo",[new yt.TextNode(e.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),o.push(l)}return c9(o)}return r};Rt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0],s=t[1],o,a=null,l=null,c="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,a="(",l=")";break;case"\\\\bracefrac":o=!1,a="\\{",l="\\}";break;case"\\\\brackfrac":o=!1,a="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:i,denom:s,hasBarLine:o,leftDelim:a,rightDelim:l,size:c,barSize:null}},htmlBuilder:b9,mathmlBuilder:x9});Rt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0],s=t[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:i,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Rt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var{parser:t,funcName:r,token:n}=e,i;switch(r){case"\\over":i="\\frac";break;case"\\choose":i="\\binom";break;case"\\atop":i="\\\\atopfrac";break;case"\\brace":i="\\\\bracefrac";break;case"\\brack":i="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:t.mode,replaceWith:i,token:n}}});var NO=["display","text","script","scriptscript"],FO=function(t){var r=null;return t.length>0&&(r=t,r=r==="."?null:r),r};Rt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var{parser:r}=e,n=t[4],i=t[5],s=Ox(t[0]),o=s.type==="atom"&&s.family==="open"?FO(s.text):null,a=Ox(t[1]),l=a.type==="atom"&&a.family==="close"?FO(a.text):null,c=Te(t[2],"size"),h,u=null;c.isBlank?h=!0:(u=c.value,h=u.number>0);var f="auto",d=t[3];if(d.type==="ordgroup"){if(d.body.length>0){var p=Te(d.body[0],"textord");f=NO[Number(p.text)]}}else d=Te(d,"textord"),f=NO[Number(d.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:i,continued:!1,hasBarLine:h,barSize:u,leftDelim:o,rightDelim:l,size:f}},htmlBuilder:b9,mathmlBuilder:x9});Rt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:r,funcName:n,token:i}=e;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:Te(t[0],"size").value,token:i}}});Rt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0],s=uvt(Te(t[1],"infix").size),o=t[2],a=s.number>0;return{type:"genfrac",mode:r.mode,numer:i,denom:o,continued:!1,hasBarLine:a,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:b9,mathmlBuilder:x9});var Uq=(e,t)=>{var r=t.style,n,i;e.type==="supsub"?(n=e.sup?He(e.sup,t.havingStyle(r.sup()),t):He(e.sub,t.havingStyle(r.sub()),t),i=Te(e.base,"horizBrace")):i=Te(e,"horizBrace");var s=He(i.base,t.havingBaseStyle(ue.DISPLAY)),o=al.svgSpan(i,t),a;if(i.isOver?(a=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:o}]},t),a.children[0].children[0].children[1].classes.push("svg-align")):(a=Z.makeVList({positionType:"bottom",positionData:s.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:s}]},t),a.children[0].children[0].children[0].classes.push("svg-align")),n){var l=Z.makeSpan(["mord",i.isOver?"mover":"munder"],[a],t);i.isOver?a=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:n}]},t):a=Z.makeVList({positionType:"bottom",positionData:l.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:l}]},t)}return Z.makeSpan(["mord",i.isOver?"mover":"munder"],[a],t)},R4t=(e,t)=>{var r=al.mathMLnode(e.label);return new yt.MathNode(e.isOver?"mover":"munder",[cr(e.base,t),r])};Rt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:t[0]}},htmlBuilder:Uq,mathmlBuilder:R4t});Rt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[1],i=Te(t[0],"url").url;return r.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:r.mode,href:i,body:Fr(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var r=tn(e.body,t,!1);return Z.makeAnchor(e.href,[],r,t)},mathmlBuilder:(e,t)=>{var r=yc(e.body,t);return r instanceof Xi||(r=new Xi("mrow",[r])),r.setAttribute("href",e.href),r}});Rt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=Te(t[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var i=[],s=0;s<n.length;s++){var o=n[s];o==="~"&&(o="\\textasciitilde"),i.push({type:"textord",mode:"text",text:o})}var a={type:"text",mode:r.mode,font:"\\texttt",body:i};return{type:"href",mode:r.mode,href:n,body:Fr(a)}}});Rt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:r}=e;return{type:"hbox",mode:r.mode,body:Fr(t[0])}},htmlBuilder(e,t){var r=tn(e.body,t,!1);return Z.makeFragment(r)},mathmlBuilder(e,t){return new yt.MathNode("mrow",Ni(e.body,t))}});Rt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n,token:i}=e,s=Te(t[0],"raw").string,o=t[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var a,l={};switch(n){case"\\htmlClass":l.class=s,a={command:"\\htmlClass",class:s};break;case"\\htmlId":l.id=s,a={command:"\\htmlId",id:s};break;case"\\htmlStyle":l.style=s,a={command:"\\htmlStyle",style:s};break;case"\\htmlData":{for(var c=s.split(","),h=0;h<c.length;h++){var u=c[h].split("=");if(u.length!==2)throw new vt("Error parsing key-value for \\htmlData");l["data-"+u[0].trim()]=u[1].trim()}a={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(a)?{type:"html",mode:r.mode,attributes:l,body:Fr(o)}:r.formatUnsupportedCmd(n)},htmlBuilder:(e,t)=>{var r=tn(e.body,t,!1),n=["enclosing"];e.attributes.class&&n.push(...e.attributes.class.trim().split(/\s+/));var i=Z.makeSpan(n,r,t);for(var s in e.attributes)s!=="class"&&e.attributes.hasOwnProperty(s)&&i.setAttribute(s,e.attributes[s]);return i},mathmlBuilder:(e,t)=>yc(e.body,t)});Rt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"htmlmathml",mode:r.mode,html:Fr(t[0]),mathml:Fr(t[1])}},htmlBuilder:(e,t)=>{var r=tn(e.html,t,!1);return Z.makeFragment(r)},mathmlBuilder:(e,t)=>yc(e.mathml,t)});var a3=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!r)throw new vt("Invalid size: '"+t+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!uq(n))throw new vt("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};Rt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,r)=>{var{parser:n}=e,i={number:0,unit:"em"},s={number:.9,unit:"em"},o={number:0,unit:"em"},a="";if(r[0])for(var l=Te(r[0],"raw").string,c=l.split(","),h=0;h<c.length;h++){var u=c[h].split("=");if(u.length===2){var f=u[1].trim();switch(u[0].trim()){case"alt":a=f;break;case"width":i=a3(f);break;case"height":s=a3(f);break;case"totalheight":o=a3(f);break;default:throw new vt("Invalid key: '"+u[0]+"' in \\includegraphics.")}}}var d=Te(t[0],"url").url;return a===""&&(a=d,a=a.replace(/^.*[\\/]/,""),a=a.substring(0,a.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:d})?{type:"includegraphics",mode:n.mode,alt:a,width:i,height:s,totalheight:o,src:d}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var r=Or(e.height,t),n=0;e.totalheight.number>0&&(n=Or(e.totalheight,t)-r);var i=0;e.width.number>0&&(i=Or(e.width,t));var s={height:_t(r+n)};i>0&&(s.width=_t(i)),n>0&&(s.verticalAlign=_t(-n));var o=new Rvt(e.src,e.alt,s);return o.height=r,o.depth=n,o},mathmlBuilder:(e,t)=>{var r=new yt.MathNode("mglyph",[]);r.setAttribute("alt",e.alt);var n=Or(e.height,t),i=0;if(e.totalheight.number>0&&(i=Or(e.totalheight,t)-n,r.setAttribute("valign",_t(-i))),r.setAttribute("height",_t(n+i)),e.width.number>0){var s=Or(e.width,t);r.setAttribute("width",_t(s))}return r.setAttribute("src",e.src),r}});Rt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,i=Te(t[0],"size");if(r.settings.strict){var s=n[1]==="m",o=i.value.unit==="mu";s?(o||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+i.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):o&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:i.value}},htmlBuilder(e,t){return Z.makeGlue(e.dimension,t)},mathmlBuilder(e,t){var r=Or(e.dimension,t);return new yt.SpaceNode(r)}});Rt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:i}},htmlBuilder:(e,t)=>{var r;e.alignment==="clap"?(r=Z.makeSpan([],[He(e.body,t)]),r=Z.makeSpan(["inner"],[r],t)):r=Z.makeSpan(["inner"],[He(e.body,t)]);var n=Z.makeSpan(["fix"],[]),i=Z.makeSpan([e.alignment],[r,n],t),s=Z.makeSpan(["strut"]);return s.style.height=_t(i.height+i.depth),i.depth&&(s.style.verticalAlign=_t(-i.depth)),i.children.unshift(s),i=Z.makeSpan(["thinbox"],[i],t),Z.makeSpan(["mord","vbox"],[i],t)},mathmlBuilder:(e,t)=>{var r=new yt.MathNode("mpadded",[cr(e.body,t)]);if(e.alignment!=="rlap"){var n=e.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});Rt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:r,parser:n}=e,i=n.mode;n.switchMode("math");var s=r==="\\("?"\\)":"$",o=n.parseExpression(!1,s);return n.expect(s),n.switchMode(i),{type:"styling",mode:n.mode,style:"text",body:o}}});Rt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new vt("Mismatched "+e.funcName)}});var $O=(e,t)=>{switch(t.style.size){case ue.DISPLAY.size:return e.display;case ue.TEXT.size:return e.text;case ue.SCRIPT.size:return e.script;case ue.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};Rt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"mathchoice",mode:r.mode,display:Fr(t[0]),text:Fr(t[1]),script:Fr(t[2]),scriptscript:Fr(t[3])}},htmlBuilder:(e,t)=>{var r=$O(e,t),n=tn(r,t,!1);return Z.makeFragment(n)},mathmlBuilder:(e,t)=>{var r=$O(e,t);return yc(r,t)}});var Gq=(e,t,r,n,i,s,o)=>{e=Z.makeSpan([],[e]);var a=r&&We.isCharacterBox(r),l,c;if(t){var h=He(t,n.havingStyle(i.sup()),n);c={elem:h,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-h.depth)}}if(r){var u=He(r,n.havingStyle(i.sub()),n);l={elem:u,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-u.height)}}var f;if(c&&l){var d=n.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+e.depth+o;f=Z.makeVList({positionType:"bottom",positionData:d,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:_t(-s)},{type:"kern",size:l.kern},{type:"elem",elem:e},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:_t(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(l){var p=e.height-o;f=Z.makeVList({positionType:"top",positionData:p,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:_t(-s)},{type:"kern",size:l.kern},{type:"elem",elem:e}]},n)}else if(c){var m=e.depth+o;f=Z.makeVList({positionType:"bottom",positionData:m,children:[{type:"elem",elem:e},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:_t(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return e;var g=[f];if(l&&s!==0&&!a){var y=Z.makeSpan(["mspace"],[],n);y.style.marginRight=_t(s),g.unshift(y)}return Z.makeSpan(["mop","op-limits"],g,n)},Kq=["\\smallint"],t0=(e,t)=>{var r,n,i=!1,s;e.type==="supsub"?(r=e.sup,n=e.sub,s=Te(e.base,"op"),i=!0):s=Te(e,"op");var o=t.style,a=!1;o.size===ue.DISPLAY.size&&s.symbol&&!Kq.includes(s.name)&&(a=!0);var l;if(s.symbol){var c=a?"Size2-Regular":"Size1-Regular",h="";if((s.name==="\\oiint"||s.name==="\\oiiint")&&(h=s.name.slice(1),s.name=h==="oiint"?"\\iint":"\\iiint"),l=Z.makeSymbol(s.name,c,"math",t,["mop","op-symbol",a?"large-op":"small-op"]),h.length>0){var u=l.italic,f=Z.staticSvg(h+"Size"+(a?"2":"1"),t);l=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:f,shift:a?.08:0}]},t),s.name="\\"+h,l.classes.unshift("mop"),l.italic=u}}else if(s.body){var d=tn(s.body,t,!0);d.length===1&&d[0]instanceof As?(l=d[0],l.classes[0]="mop"):l=Z.makeSpan(["mop"],d,t)}else{for(var p=[],m=1;m<s.name.length;m++)p.push(Z.mathsym(s.name[m],s.mode,t));l=Z.makeSpan(["mop"],p,t)}var g=0,y=0;return(l instanceof As||s.name==="\\oiint"||s.name==="\\oiiint")&&!s.suppressBaseShift&&(g=(l.height-l.depth)/2-t.fontMetrics().axisHeight,y=l.italic),i?Gq(l,r,n,t,o,y,g):(g&&(l.style.position="relative",l.style.top=_t(g)),l)},B1=(e,t)=>{var r;if(e.symbol)r=new Xi("mo",[Es(e.name,e.mode)]),Kq.includes(e.name)&&r.setAttribute("largeop","false");else if(e.body)r=new Xi("mo",Ni(e.body,t));else{r=new Xi("mi",[new Vo(e.name.slice(1))]);var n=new Xi("mo",[Es("","text")]);e.parentIsSupSub?r=new Xi("mrow",[r,n]):r=kq([r,n])}return r},P4t={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};Rt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=n;return i.length===1&&(i=P4t[i]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:t0,mathmlBuilder:B1});Rt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Fr(n)}},htmlBuilder:t0,mathmlBuilder:B1});var N4t={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};Rt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:t0,mathmlBuilder:B1});Rt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:t0,mathmlBuilder:B1});Rt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e,n=r;return n.length===1&&(n=N4t[n]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:t0,mathmlBuilder:B1});var Yq=(e,t)=>{var r,n,i=!1,s;e.type==="supsub"?(r=e.sup,n=e.sub,s=Te(e.base,"operatorname"),i=!0):s=Te(e,"operatorname");var o;if(s.body.length>0){for(var a=s.body.map(u=>{var f=u.text;return typeof f=="string"?{type:"textord",mode:u.mode,text:f}:u}),l=tn(a,t.withFont("mathrm"),!0),c=0;c<l.length;c++){var h=l[c];h instanceof As&&(h.text=h.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=Z.makeSpan(["mop"],l,t)}else o=Z.makeSpan(["mop"],[],t);return i?Gq(o,r,n,t,t.style,0,0):o},F4t=(e,t)=>{for(var r=Ni(e.body,t.withFont("mathrm")),n=!0,i=0;i<r.length;i++){var s=r[i];if(!(s instanceof yt.SpaceNode))if(s instanceof yt.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=s.children[0];s.children.length===1&&o instanceof yt.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var a=r.map(h=>h.toText()).join("");r=[new yt.TextNode(a)]}var l=new yt.MathNode("mi",r);l.setAttribute("mathvariant","normal");var c=new yt.MathNode("mo",[Es("","text")]);return e.parentIsSupSub?new yt.MathNode("mrow",[l,c]):yt.newDocumentFragment([l,c])};Rt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0];return{type:"operatorname",mode:r.mode,body:Fr(i),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:Yq,mathmlBuilder:F4t});A("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");_u({type:"ordgroup",htmlBuilder(e,t){return e.semisimple?Z.makeFragment(tn(e.body,t,!1)):Z.makeSpan(["mord"],tn(e.body,t,!0),t)},mathmlBuilder(e,t){return yc(e.body,t,!0)}});Rt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:r}=e,n=t[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(e,t){var r=He(e.body,t.havingCrampedStyle()),n=Z.makeLineSpan("overline-line",t),i=t.fontMetrics().defaultRuleThickness,s=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n},{type:"kern",size:i}]},t);return Z.makeSpan(["mord","overline"],[s],t)},mathmlBuilder(e,t){var r=new yt.MathNode("mo",[new yt.TextNode("")]);r.setAttribute("stretchy","true");var n=new yt.MathNode("mover",[cr(e.body,t),r]);return n.setAttribute("accent","true"),n}});Rt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"phantom",mode:r.mode,body:Fr(n)}},htmlBuilder:(e,t)=>{var r=tn(e.body,t.withPhantom(),!1);return Z.makeFragment(r)},mathmlBuilder:(e,t)=>{var r=Ni(e.body,t);return new yt.MathNode("mphantom",r)}});Rt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=Z.makeSpan([],[He(e.body,t.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t),Z.makeSpan(["mord"],[r],t)},mathmlBuilder:(e,t)=>{var r=Ni(Fr(e.body),t),n=new yt.MathNode("mphantom",r),i=new yt.MathNode("mpadded",[n]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}});Rt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=Z.makeSpan(["inner"],[He(e.body,t.withPhantom())]),n=Z.makeSpan(["fix"],[]);return Z.makeSpan(["mord","rlap"],[r,n],t)},mathmlBuilder:(e,t)=>{var r=Ni(Fr(e.body),t),n=new yt.MathNode("mphantom",r),i=new yt.MathNode("mpadded",[n]);return i.setAttribute("width","0px"),i}});Rt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e,n=Te(t[0],"size").value,i=t[1];return{type:"raisebox",mode:r.mode,dy:n,body:i}},htmlBuilder(e,t){var r=He(e.body,t),n=Or(e.dy,t);return Z.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){var r=new yt.MathNode("mpadded",[cr(e.body,t)]),n=e.dy.number+e.dy.unit;return r.setAttribute("voffset",n),r}});Rt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}});Rt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(e,t,r){var{parser:n}=e,i=r[0],s=Te(t[0],"size"),o=Te(t[1],"size");return{type:"rule",mode:n.mode,shift:i&&Te(i,"size").value,width:s.value,height:o.value}},htmlBuilder(e,t){var r=Z.makeSpan(["mord","rule"],[],t),n=Or(e.width,t),i=Or(e.height,t),s=e.shift?Or(e.shift,t):0;return r.style.borderRightWidth=_t(n),r.style.borderTopWidth=_t(i),r.style.bottom=_t(s),r.width=n,r.height=i+s,r.depth=-s,r.maxFontSize=i*1.125*t.sizeMultiplier,r},mathmlBuilder(e,t){var r=Or(e.width,t),n=Or(e.height,t),i=e.shift?Or(e.shift,t):0,s=t.color&&t.getColor()||"black",o=new yt.MathNode("mspace");o.setAttribute("mathbackground",s),o.setAttribute("width",_t(r)),o.setAttribute("height",_t(n));var a=new yt.MathNode("mpadded",[o]);return i>=0?a.setAttribute("height",_t(i)):(a.setAttribute("height",_t(i)),a.setAttribute("depth",_t(-i))),a.setAttribute("voffset",_t(i)),a}});function Xq(e,t,r){for(var n=tn(e,t,!1),i=t.sizeMultiplier/r.sizeMultiplier,s=0;s<n.length;s++){var o=n[s].classes.indexOf("sizing");o<0?Array.prototype.push.apply(n[s].classes,t.sizingClasses(r)):n[s].classes[o+1]==="reset-size"+t.size&&(n[s].classes[o+1]="reset-size"+r.size),n[s].height*=i,n[s].depth*=i}return Z.makeFragment(n)}var zO=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],$4t=(e,t)=>{var r=t.havingSize(e.size);return Xq(e.body,r,t)};Rt({type:"sizing",names:zO,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:r,funcName:n,parser:i}=e,s=i.parseExpression(!1,r);return{type:"sizing",mode:i.mode,size:zO.indexOf(n)+1,body:s}},htmlBuilder:$4t,mathmlBuilder:(e,t)=>{var r=t.havingSize(e.size),n=Ni(e.body,r),i=new yt.MathNode("mstyle",n);return i.setAttribute("mathsize",_t(r.sizeMultiplier)),i}});Rt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,r)=>{var{parser:n}=e,i=!1,s=!1,o=r[0]&&Te(r[0],"ordgroup");if(o)for(var a="",l=0;l<o.body.length;++l){var c=o.body[l];if(a=c.text,a==="t")i=!0;else if(a==="b")s=!0;else{i=!1,s=!1;break}}else i=!0,s=!0;var h=t[0];return{type:"smash",mode:n.mode,body:h,smashHeight:i,smashDepth:s}},htmlBuilder:(e,t)=>{var r=Z.makeSpan([],[He(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return r;if(e.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(e.smashDepth&&(r.depth=0,r.children))for(var i=0;i<r.children.length;i++)r.children[i].depth=0;var s=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t);return Z.makeSpan(["mord"],[s],t)},mathmlBuilder:(e,t)=>{var r=new yt.MathNode("mpadded",[cr(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}});Rt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n}=e,i=r[0],s=t[0];return{type:"sqrt",mode:n.mode,body:s,index:i}},htmlBuilder(e,t){var r=He(e.body,t.havingCrampedStyle());r.height===0&&(r.height=t.fontMetrics().xHeight),r=Z.wrapFragment(r,t);var n=t.fontMetrics(),i=n.defaultRuleThickness,s=i;t.style.id<ue.TEXT.id&&(s=t.fontMetrics().xHeight);var o=i+s/4,a=r.height+r.depth+o+i,{span:l,ruleWidth:c,advanceWidth:h}=Ya.sqrtImage(a,t),u=l.height-c;u>r.height+r.depth+o&&(o=(o+u-r.height-r.depth)/2);var f=l.height-r.height-o-c;r.style.paddingLeft=_t(h);var d=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+f)},{type:"elem",elem:l},{type:"kern",size:c}]},t);if(e.index){var p=t.havingStyle(ue.SCRIPTSCRIPT),m=He(e.index,p,t),g=.6*(d.height-d.depth),y=Z.makeVList({positionType:"shift",positionData:-g,children:[{type:"elem",elem:m}]},t),b=Z.makeSpan(["root"],[y]);return Z.makeSpan(["mord","sqrt"],[b,d],t)}else return Z.makeSpan(["mord","sqrt"],[d],t)},mathmlBuilder(e,t){var{body:r,index:n}=e;return n?new yt.MathNode("mroot",[cr(r,t),cr(n,t)]):new yt.MathNode("msqrt",[cr(r,t)])}});var HO={display:ue.DISPLAY,text:ue.TEXT,script:ue.SCRIPT,scriptscript:ue.SCRIPTSCRIPT};Rt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:r,funcName:n,parser:i}=e,s=i.parseExpression(!0,r),o=n.slice(1,n.length-5);return{type:"styling",mode:i.mode,style:o,body:s}},htmlBuilder(e,t){var r=HO[e.style],n=t.havingStyle(r).withFont("");return Xq(e.body,n,t)},mathmlBuilder(e,t){var r=HO[e.style],n=t.havingStyle(r),i=Ni(e.body,n),s=new yt.MathNode("mstyle",i),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},a=o[e.style];return s.setAttribute("scriptlevel",a[0]),s.setAttribute("displaystyle",a[1]),s}});var z4t=function(t,r){var n=t.base;if(n)if(n.type==="op"){var i=n.limits&&(r.style.size===ue.DISPLAY.size||n.alwaysHandleSupSub);return i?t0:null}else if(n.type==="operatorname"){var s=n.alwaysHandleSupSub&&(r.style.size===ue.DISPLAY.size||n.limits);return s?Yq:null}else{if(n.type==="accent")return We.isCharacterBox(n.base)?f9:null;if(n.type==="horizBrace"){var o=!t.sub;return o===n.isOver?Uq:null}else return null}else return null};_u({type:"supsub",htmlBuilder(e,t){var r=z4t(e,t);if(r)return r(e,t);var{base:n,sup:i,sub:s}=e,o=He(n,t),a,l,c=t.fontMetrics(),h=0,u=0,f=n&&We.isCharacterBox(n);if(i){var d=t.havingStyle(t.style.sup());a=He(i,d,t),f||(h=o.height-d.fontMetrics().supDrop*d.sizeMultiplier/t.sizeMultiplier)}if(s){var p=t.havingStyle(t.style.sub());l=He(s,p,t),f||(u=o.depth+p.fontMetrics().subDrop*p.sizeMultiplier/t.sizeMultiplier)}var m;t.style===ue.DISPLAY?m=c.sup1:t.style.cramped?m=c.sup3:m=c.sup2;var g=t.sizeMultiplier,y=_t(.5/c.ptPerEm/g),b=null;if(l){var x=e.base&&e.base.type==="op"&&e.base.name&&(e.base.name==="\\oiint"||e.base.name==="\\oiiint");(o instanceof As||x)&&(b=_t(-o.italic))}var T;if(a&&l){h=Math.max(h,m,a.depth+.25*c.xHeight),u=Math.max(u,c.sub2);var S=c.defaultRuleThickness,w=4*S;if(h-a.depth-(l.height-u)<w){u=w-(h-a.depth)+l.height;var _=.8*c.xHeight-(h-a.depth);_>0&&(h+=_,u-=_)}var I=[{type:"elem",elem:l,shift:u,marginRight:y,marginLeft:b},{type:"elem",elem:a,shift:-h,marginRight:y}];T=Z.makeVList({positionType:"individualShift",children:I},t)}else if(l){u=Math.max(u,c.sub1,l.height-.8*c.xHeight);var N=[{type:"elem",elem:l,marginLeft:b,marginRight:y}];T=Z.makeVList({positionType:"shift",positionData:u,children:N},t)}else if(a)h=Math.max(h,m,a.depth+.25*c.xHeight),T=Z.makeVList({positionType:"shift",positionData:-h,children:[{type:"elem",elem:a,marginRight:y}]},t);else throw new Error("supsub must have either sup or sub.");var L=GC(o,"right")||"mord";return Z.makeSpan([L],[o,Z.makeSpan(["msupsub"],[T])],t)},mathmlBuilder(e,t){var r=!1,n,i;e.base&&e.base.type==="horizBrace"&&(i=!!e.sup,i===e.base.isOver&&(r=!0,n=e.base.isOver)),e.base&&(e.base.type==="op"||e.base.type==="operatorname")&&(e.base.parentIsSupSub=!0);var s=[cr(e.base,t)];e.sub&&s.push(cr(e.sub,t)),e.sup&&s.push(cr(e.sup,t));var o;if(r)o=n?"mover":"munder";else if(e.sub)if(e.sup){var c=e.base;c&&c.type==="op"&&c.limits&&t.style===ue.DISPLAY||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(t.style===ue.DISPLAY||c.limits)?o="munderover":o="msubsup"}else{var l=e.base;l&&l.type==="op"&&l.limits&&(t.style===ue.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||t.style===ue.DISPLAY)?o="munder":o="msub"}else{var a=e.base;a&&a.type==="op"&&a.limits&&(t.style===ue.DISPLAY||a.alwaysHandleSupSub)||a&&a.type==="operatorname"&&a.alwaysHandleSupSub&&(a.limits||t.style===ue.DISPLAY)?o="mover":o="msup"}return new yt.MathNode(o,s)}});_u({type:"atom",htmlBuilder(e,t){return Z.mathsym(e.text,e.mode,t,["m"+e.family])},mathmlBuilder(e,t){var r=new yt.MathNode("mo",[Es(e.text,e.mode)]);if(e.family==="bin"){var n=h9(e,t);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else e.family==="punct"?r.setAttribute("separator","true"):(e.family==="open"||e.family==="close")&&r.setAttribute("stretchy","false");return r}});var Jq={mi:"italic",mn:"normal",mtext:"normal"};_u({type:"mathord",htmlBuilder(e,t){return Z.makeOrd(e,t,"mathord")},mathmlBuilder(e,t){var r=new yt.MathNode("mi",[Es(e.text,e.mode,t)]),n=h9(e,t)||"italic";return n!==Jq[r.type]&&r.setAttribute("mathvariant",n),r}});_u({type:"textord",htmlBuilder(e,t){return Z.makeOrd(e,t,"textord")},mathmlBuilder(e,t){var r=Es(e.text,e.mode,t),n=h9(e,t)||"normal",i;return e.mode==="text"?i=new yt.MathNode("mtext",[r]):/[0-9]/.test(e.text)?i=new yt.MathNode("mn",[r]):e.text==="\\prime"?i=new yt.MathNode("mo",[r]):i=new yt.MathNode("mi",[r]),n!==Jq[i.type]&&i.setAttribute("mathvariant",n),i}});var l3={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},c3={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};_u({type:"spacing",htmlBuilder(e,t){if(c3.hasOwnProperty(e.text)){var r=c3[e.text].className||"";if(e.mode==="text"){var n=Z.makeOrd(e,t,"textord");return n.classes.push(r),n}else return Z.makeSpan(["mspace",r],[Z.mathsym(e.text,e.mode,t)],t)}else{if(l3.hasOwnProperty(e.text))return Z.makeSpan(["mspace",l3[e.text]],[],t);throw new vt('Unknown type of space "'+e.text+'"')}},mathmlBuilder(e,t){var r;if(c3.hasOwnProperty(e.text))r=new yt.MathNode("mtext",[new yt.TextNode("")]);else{if(l3.hasOwnProperty(e.text))return new yt.MathNode("mspace");throw new vt('Unknown type of space "'+e.text+'"')}return r}});var qO=()=>{var e=new yt.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};_u({type:"tag",mathmlBuilder(e,t){var r=new yt.MathNode("mtable",[new yt.MathNode("mtr",[qO(),new yt.MathNode("mtd",[yc(e.body,t)]),qO(),new yt.MathNode("mtd",[yc(e.tag,t)])])]);return r.setAttribute("width","100%"),r}});var VO={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},WO={"\\textbf":"textbf","\\textmd":"textmd"},H4t={"\\textit":"textit","\\textup":"textup"},jO=(e,t)=>{var r=e.font;if(r){if(VO[r])return t.withTextFontFamily(VO[r]);if(WO[r])return t.withTextFontWeight(WO[r]);if(r==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape(H4t[r])};Rt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,i=t[0];return{type:"text",mode:r.mode,body:Fr(i),font:n}},htmlBuilder(e,t){var r=jO(e,t),n=tn(e.body,r,!0);return Z.makeSpan(["mord","text"],n,r)},mathmlBuilder(e,t){var r=jO(e,t);return yc(e.body,r)}});Rt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"underline",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=He(e.body,t),n=Z.makeLineSpan("underline-line",t),i=t.fontMetrics().defaultRuleThickness,s=Z.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:i},{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r}]},t);return Z.makeSpan(["mord","underline"],[s],t)},mathmlBuilder(e,t){var r=new yt.MathNode("mo",[new yt.TextNode("")]);r.setAttribute("stretchy","true");var n=new yt.MathNode("munder",[cr(e.body,t),r]);return n.setAttribute("accentunder","true"),n}});Rt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"vcenter",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=He(e.body,t),n=t.fontMetrics().axisHeight,i=.5*(r.height-n-(r.depth+n));return Z.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){return new yt.MathNode("mpadded",[cr(e.body,t)],["vcenter"])}});Rt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,r){throw new vt("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var r=UO(e),n=[],i=t.havingStyle(t.style.text()),s=0;s<r.length;s++){var o=r[s];o==="~"&&(o="\\textasciitilde"),n.push(Z.makeSymbol(o,"Typewriter-Regular",e.mode,i,["mord","texttt"]))}return Z.makeSpan(["mord","text"].concat(i.sizingClasses(t)),Z.tryCombineChars(n),i)},mathmlBuilder(e,t){var r=new yt.TextNode(UO(e)),n=new yt.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var UO=e=>e.body.replace(/ /g,e.star?"":""),Xl=vq,Zq=`[ \r
	]`,q4t="\\\\[a-zA-Z@]+",V4t="\\\\[^\uD800-\uDFFF]",W4t="("+q4t+")"+Zq+"*",j4t=`\\\\(
|[ \r	]+
?)[ \r	]*`,JC="[-]",U4t=new RegExp(JC+"+$"),G4t="("+Zq+"+)|"+(j4t+"|")+"([!-\\[\\]---]"+(JC+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(JC+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+W4t)+("|"+V4t+")");class GO{constructor(t,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=r,this.tokenRegex=new RegExp(G4t,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,r){this.catcodes[t]=r}lex(){var t=this.input,r=this.tokenRegex.lastIndex;if(r===t.length)return new ts("EOF",new ki(this,r,r));var n=this.tokenRegex.exec(t);if(n===null||n.index!==r)throw new vt("Unexpected character: '"+t[r]+"'",new ts(t[r],new ki(this,r,r+1)));var i=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[i]===14){var s=t.indexOf(`
`,this.tokenRegex.lastIndex);return s===-1?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new ts(i,new ki(this,r,this.tokenRegex.lastIndex))}}class K4t{constructor(t,r){t===void 0&&(t={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new vt("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var r in t)t.hasOwnProperty(r)&&(t[r]==null?delete this.current[r]:this.current[r]=t[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)}get(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]}set(t,r,n){if(n===void 0&&(n=!1),n){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=r)}else{var s=this.undefStack[this.undefStack.length-1];s&&!s.hasOwnProperty(t)&&(s[t]=this.current[t])}r==null?delete this.current[t]:this.current[t]=r}}var Y4t=Hq;A("\\noexpand",function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}});A("\\expandafter",function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}});A("\\@firstoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[0],numArgs:0}});A("\\@secondoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[1],numArgs:0}});A("\\@ifnextchar",function(e){var t=e.consumeArgs(3);e.consumeSpaces();var r=e.future();return t[0].length===1&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}});A("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");A("\\TextOrMath",function(e){var t=e.consumeArgs(2);return e.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var KO={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};A("\\char",function(e){var t=e.popToken(),r,n="";if(t.text==="'")r=8,t=e.popToken();else if(t.text==='"')r=16,t=e.popToken();else if(t.text==="`")if(t=e.popToken(),t.text[0]==="\\")n=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new vt("\\char` missing argument");n=t.text.charCodeAt(0)}else r=10;if(r){if(n=KO[t.text],n==null||n>=r)throw new vt("Invalid base-"+r+" digit "+t.text);for(var i;(i=KO[e.future().text])!=null&&i<r;)n*=r,n+=i,e.popToken()}return"\\@char{"+n+"}"});var v9=(e,t,r,n)=>{var i=e.consumeArg().tokens;if(i.length!==1)throw new vt("\\newcommand's first argument must be a macro name");var s=i[0].text,o=e.isDefined(s);if(o&&!t)throw new vt("\\newcommand{"+s+"} attempting to redefine "+(s+"; use \\renewcommand"));if(!o&&!r)throw new vt("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var a=0;if(i=e.consumeArg().tokens,i.length===1&&i[0].text==="["){for(var l="",c=e.expandNextToken();c.text!=="]"&&c.text!=="EOF";)l+=c.text,c=e.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new vt("Invalid number of arguments: "+l);a=parseInt(l),i=e.consumeArg().tokens}return o&&n||e.macros.set(s,{tokens:i,numArgs:a}),""};A("\\newcommand",e=>v9(e,!1,!0,!1));A("\\renewcommand",e=>v9(e,!0,!1,!1));A("\\providecommand",e=>v9(e,!0,!0,!0));A("\\message",e=>{var t=e.consumeArgs(1)[0];return console.log(t.reverse().map(r=>r.text).join("")),""});A("\\errmessage",e=>{var t=e.consumeArgs(1)[0];return console.error(t.reverse().map(r=>r.text).join("")),""});A("\\show",e=>{var t=e.popToken(),r=t.text;return console.log(t,e.macros.get(r),Xl[r],pr.math[r],pr.text[r]),""});A("\\bgroup","{");A("\\egroup","}");A("~","\\nobreakspace");A("\\lq","`");A("\\rq","'");A("\\aa","\\r a");A("\\AA","\\r A");A("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");A("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");A("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");A("","\\mathscr{B}");A("","\\mathscr{E}");A("","\\mathscr{F}");A("","\\mathscr{H}");A("","\\mathscr{I}");A("","\\mathscr{L}");A("","\\mathscr{M}");A("","\\mathscr{R}");A("","\\mathfrak{C}");A("","\\mathfrak{H}");A("","\\mathfrak{Z}");A("\\Bbbk","\\Bbb{k}");A("","\\cdotp");A("\\llap","\\mathllap{\\textrm{#1}}");A("\\rlap","\\mathrlap{\\textrm{#1}}");A("\\clap","\\mathclap{\\textrm{#1}}");A("\\mathstrut","\\vphantom{(}");A("\\underbar","\\underline{\\text{#1}}");A("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');A("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");A("\\ne","\\neq");A("","\\neq");A("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");A("","\\notin");A("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");A("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");A("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");A("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");A("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");A("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");A("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");A("","\\perp");A("","\\mathclose{!\\mkern-0.8mu!}");A("","\\notni");A("","\\ulcorner");A("","\\urcorner");A("","\\llcorner");A("","\\lrcorner");A("","\\copyright");A("","\\textregistered");A("","\\textregistered");A("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');A("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');A("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');A("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');A("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");A("","\\vdots");A("\\varGamma","\\mathit{\\Gamma}");A("\\varDelta","\\mathit{\\Delta}");A("\\varTheta","\\mathit{\\Theta}");A("\\varLambda","\\mathit{\\Lambda}");A("\\varXi","\\mathit{\\Xi}");A("\\varPi","\\mathit{\\Pi}");A("\\varSigma","\\mathit{\\Sigma}");A("\\varUpsilon","\\mathit{\\Upsilon}");A("\\varPhi","\\mathit{\\Phi}");A("\\varPsi","\\mathit{\\Psi}");A("\\varOmega","\\mathit{\\Omega}");A("\\substack","\\begin{subarray}{c}#1\\end{subarray}");A("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");A("\\boxed","\\fbox{$\\displaystyle{#1}$}");A("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");A("\\implies","\\DOTSB\\;\\Longrightarrow\\;");A("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");A("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");A("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var YO={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};A("\\dots",function(e){var t="\\dotso",r=e.expandAfterFuture().text;return r in YO?t=YO[r]:(r.slice(0,4)==="\\not"||r in pr.math&&["bin","rel"].includes(pr.math[r].group))&&(t="\\dotsb"),t});var w9={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};A("\\dotso",function(e){var t=e.future().text;return t in w9?"\\ldots\\,":"\\ldots"});A("\\dotsc",function(e){var t=e.future().text;return t in w9&&t!==","?"\\ldots\\,":"\\ldots"});A("\\cdots",function(e){var t=e.future().text;return t in w9?"\\@cdots\\,":"\\@cdots"});A("\\dotsb","\\cdots");A("\\dotsm","\\cdots");A("\\dotsi","\\!\\cdots");A("\\dotsx","\\ldots\\,");A("\\DOTSI","\\relax");A("\\DOTSB","\\relax");A("\\DOTSX","\\relax");A("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");A("\\,","\\tmspace+{3mu}{.1667em}");A("\\thinspace","\\,");A("\\>","\\mskip{4mu}");A("\\:","\\tmspace+{4mu}{.2222em}");A("\\medspace","\\:");A("\\;","\\tmspace+{5mu}{.2777em}");A("\\thickspace","\\;");A("\\!","\\tmspace-{3mu}{.1667em}");A("\\negthinspace","\\!");A("\\negmedspace","\\tmspace-{4mu}{.2222em}");A("\\negthickspace","\\tmspace-{5mu}{.277em}");A("\\enspace","\\kern.5em ");A("\\enskip","\\hskip.5em\\relax");A("\\quad","\\hskip1em\\relax");A("\\qquad","\\hskip2em\\relax");A("\\tag","\\@ifstar\\tag@literal\\tag@paren");A("\\tag@paren","\\tag@literal{({#1})}");A("\\tag@literal",e=>{if(e.macros.get("\\df@tag"))throw new vt("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});A("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");A("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");A("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");A("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");A("\\newline","\\\\\\relax");A("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var Qq=_t(qo["Main-Regular"][84][1]-.7*qo["Main-Regular"][65][1]);A("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+Qq+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");A("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+Qq+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");A("\\hspace","\\@ifstar\\@hspacer\\@hspace");A("\\@hspace","\\hskip #1\\relax");A("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");A("\\ordinarycolon",":");A("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");A("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');A("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');A("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');A("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');A("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');A("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');A("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');A("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');A("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');A("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');A("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');A("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');A("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');A("","\\dblcolon");A("","\\eqcolon");A("","\\coloneqq");A("","\\eqqcolon");A("","\\Coloneqq");A("\\ratio","\\vcentcolon");A("\\coloncolon","\\dblcolon");A("\\colonequals","\\coloneqq");A("\\coloncolonequals","\\Coloneqq");A("\\equalscolon","\\eqqcolon");A("\\equalscoloncolon","\\Eqqcolon");A("\\colonminus","\\coloneq");A("\\coloncolonminus","\\Coloneq");A("\\minuscolon","\\eqcolon");A("\\minuscoloncolon","\\Eqcolon");A("\\coloncolonapprox","\\Colonapprox");A("\\coloncolonsim","\\Colonsim");A("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");A("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");A("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");A("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");A("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");A("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");A("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");A("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");A("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");A("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");A("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");A("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");A("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");A("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");A("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");A("\\ngeqq","\\html@mathml{\\@ngeqq}{}");A("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");A("\\nleqq","\\html@mathml{\\@nleqq}{}");A("\\nleqslant","\\html@mathml{\\@nleqslant}{}");A("\\nshortmid","\\html@mathml{\\@nshortmid}{}");A("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");A("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");A("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");A("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");A("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");A("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");A("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");A("\\imath","\\html@mathml{\\@imath}{}");A("\\jmath","\\html@mathml{\\@jmath}{}");A("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");A("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");A("","\\llbracket");A("","\\rrbracket");A("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");A("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");A("","\\lBrace");A("","\\rBrace");A("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");A("","\\minuso");A("\\darr","\\downarrow");A("\\dArr","\\Downarrow");A("\\Darr","\\Downarrow");A("\\lang","\\langle");A("\\rang","\\rangle");A("\\uarr","\\uparrow");A("\\uArr","\\Uparrow");A("\\Uarr","\\Uparrow");A("\\N","\\mathbb{N}");A("\\R","\\mathbb{R}");A("\\Z","\\mathbb{Z}");A("\\alef","\\aleph");A("\\alefsym","\\aleph");A("\\Alpha","\\mathrm{A}");A("\\Beta","\\mathrm{B}");A("\\bull","\\bullet");A("\\Chi","\\mathrm{X}");A("\\clubs","\\clubsuit");A("\\cnums","\\mathbb{C}");A("\\Complex","\\mathbb{C}");A("\\Dagger","\\ddagger");A("\\diamonds","\\diamondsuit");A("\\empty","\\emptyset");A("\\Epsilon","\\mathrm{E}");A("\\Eta","\\mathrm{H}");A("\\exist","\\exists");A("\\harr","\\leftrightarrow");A("\\hArr","\\Leftrightarrow");A("\\Harr","\\Leftrightarrow");A("\\hearts","\\heartsuit");A("\\image","\\Im");A("\\infin","\\infty");A("\\Iota","\\mathrm{I}");A("\\isin","\\in");A("\\Kappa","\\mathrm{K}");A("\\larr","\\leftarrow");A("\\lArr","\\Leftarrow");A("\\Larr","\\Leftarrow");A("\\lrarr","\\leftrightarrow");A("\\lrArr","\\Leftrightarrow");A("\\Lrarr","\\Leftrightarrow");A("\\Mu","\\mathrm{M}");A("\\natnums","\\mathbb{N}");A("\\Nu","\\mathrm{N}");A("\\Omicron","\\mathrm{O}");A("\\plusmn","\\pm");A("\\rarr","\\rightarrow");A("\\rArr","\\Rightarrow");A("\\Rarr","\\Rightarrow");A("\\real","\\Re");A("\\reals","\\mathbb{R}");A("\\Reals","\\mathbb{R}");A("\\Rho","\\mathrm{P}");A("\\sdot","\\cdot");A("\\sect","\\S");A("\\spades","\\spadesuit");A("\\sub","\\subset");A("\\sube","\\subseteq");A("\\supe","\\supseteq");A("\\Tau","\\mathrm{T}");A("\\thetasym","\\vartheta");A("\\weierp","\\wp");A("\\Zeta","\\mathrm{Z}");A("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");A("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");A("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");A("\\bra","\\mathinner{\\langle{#1}|}");A("\\ket","\\mathinner{|{#1}\\rangle}");A("\\braket","\\mathinner{\\langle{#1}\\rangle}");A("\\Bra","\\left\\langle#1\\right|");A("\\Ket","\\left|#1\\right\\rangle");var tV=e=>t=>{var r=t.consumeArg().tokens,n=t.consumeArg().tokens,i=t.consumeArg().tokens,s=t.consumeArg().tokens,o=t.macros.get("|"),a=t.macros.get("\\|");t.macros.beginGroup();var l=u=>f=>{e&&(f.macros.set("|",o),i.length&&f.macros.set("\\|",a));var d=u;if(!u&&i.length){var p=f.future();p.text==="|"&&(f.popToken(),d=!0)}return{tokens:d?i:n,numArgs:0}};t.macros.set("|",l(!1)),i.length&&t.macros.set("\\|",l(!0));var c=t.consumeArg().tokens,h=t.expandTokens([...s,...c,...r]);return t.macros.endGroup(),{tokens:h.reverse(),numArgs:0}};A("\\bra@ket",tV(!1));A("\\bra@set",tV(!0));A("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");A("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");A("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");A("\\angln","{\\angl n}");A("\\blue","\\textcolor{##6495ed}{#1}");A("\\orange","\\textcolor{##ffa500}{#1}");A("\\pink","\\textcolor{##ff00af}{#1}");A("\\red","\\textcolor{##df0030}{#1}");A("\\green","\\textcolor{##28ae7b}{#1}");A("\\gray","\\textcolor{gray}{#1}");A("\\purple","\\textcolor{##9d38bd}{#1}");A("\\blueA","\\textcolor{##ccfaff}{#1}");A("\\blueB","\\textcolor{##80f6ff}{#1}");A("\\blueC","\\textcolor{##63d9ea}{#1}");A("\\blueD","\\textcolor{##11accd}{#1}");A("\\blueE","\\textcolor{##0c7f99}{#1}");A("\\tealA","\\textcolor{##94fff5}{#1}");A("\\tealB","\\textcolor{##26edd5}{#1}");A("\\tealC","\\textcolor{##01d1c1}{#1}");A("\\tealD","\\textcolor{##01a995}{#1}");A("\\tealE","\\textcolor{##208170}{#1}");A("\\greenA","\\textcolor{##b6ffb0}{#1}");A("\\greenB","\\textcolor{##8af281}{#1}");A("\\greenC","\\textcolor{##74cf70}{#1}");A("\\greenD","\\textcolor{##1fab54}{#1}");A("\\greenE","\\textcolor{##0d923f}{#1}");A("\\goldA","\\textcolor{##ffd0a9}{#1}");A("\\goldB","\\textcolor{##ffbb71}{#1}");A("\\goldC","\\textcolor{##ff9c39}{#1}");A("\\goldD","\\textcolor{##e07d10}{#1}");A("\\goldE","\\textcolor{##a75a05}{#1}");A("\\redA","\\textcolor{##fca9a9}{#1}");A("\\redB","\\textcolor{##ff8482}{#1}");A("\\redC","\\textcolor{##f9685d}{#1}");A("\\redD","\\textcolor{##e84d39}{#1}");A("\\redE","\\textcolor{##bc2612}{#1}");A("\\maroonA","\\textcolor{##ffbde0}{#1}");A("\\maroonB","\\textcolor{##ff92c6}{#1}");A("\\maroonC","\\textcolor{##ed5fa6}{#1}");A("\\maroonD","\\textcolor{##ca337c}{#1}");A("\\maroonE","\\textcolor{##9e034e}{#1}");A("\\purpleA","\\textcolor{##ddd7ff}{#1}");A("\\purpleB","\\textcolor{##c6b9fc}{#1}");A("\\purpleC","\\textcolor{##aa87ff}{#1}");A("\\purpleD","\\textcolor{##7854ab}{#1}");A("\\purpleE","\\textcolor{##543b78}{#1}");A("\\mintA","\\textcolor{##f5f9e8}{#1}");A("\\mintB","\\textcolor{##edf2df}{#1}");A("\\mintC","\\textcolor{##e0e5cc}{#1}");A("\\grayA","\\textcolor{##f6f7f7}{#1}");A("\\grayB","\\textcolor{##f0f1f2}{#1}");A("\\grayC","\\textcolor{##e3e5e6}{#1}");A("\\grayD","\\textcolor{##d6d8da}{#1}");A("\\grayE","\\textcolor{##babec2}{#1}");A("\\grayF","\\textcolor{##888d93}{#1}");A("\\grayG","\\textcolor{##626569}{#1}");A("\\grayH","\\textcolor{##3b3e40}{#1}");A("\\grayI","\\textcolor{##21242c}{#1}");A("\\kaBlue","\\textcolor{##314453}{#1}");A("\\kaGreen","\\textcolor{##71B307}{#1}");var eV={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class X4t{constructor(t,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(t),this.macros=new K4t(Y4t,r.macros),this.mode=n,this.stack=[]}feed(t){this.lexer=new GO(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){var r,n,i;if(t){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:i,end:n}=this.consumeArg(["]"])}else({tokens:i,start:r,end:n}=this.consumeArg());return this.pushToken(new ts("EOF",n.loc)),this.pushTokens(i),new ts("",ki.range(r,n))}consumeSpaces(){for(;;){var t=this.future();if(t.text===" ")this.stack.pop();else break}}consumeArg(t){var r=[],n=t&&t.length>0;n||this.consumeSpaces();var i=this.future(),s,o=0,a=0;do{if(s=this.popToken(),r.push(s),s.text==="{")++o;else if(s.text==="}"){if(--o,o===-1)throw new vt("Extra }",s)}else if(s.text==="EOF")throw new vt("Unexpected end of input in a macro argument, expected '"+(t&&n?t[a]:"}")+"'",s);if(t&&n)if((o===0||o===1&&t[a]==="{")&&s.text===t[a]){if(++a,a===t.length){r.splice(-a,a);break}}else a=0}while(o!==0||n);return i.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:i,end:s}}consumeArgs(t,r){if(r){if(r.length!==t+1)throw new vt("The length of delimiters doesn't match the number of args!");for(var n=r[0],i=0;i<n.length;i++){var s=this.popToken();if(n[i]!==s.text)throw new vt("Use of the macro doesn't match its definition",s)}}for(var o=[],a=0;a<t;a++)o.push(this.consumeArg(r&&r[a+1]).tokens);return o}countExpansion(t){if(this.expansionCount+=t,this.expansionCount>this.settings.maxExpand)throw new vt("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(t){var r=this.popToken(),n=r.text,i=r.noexpand?null:this._getExpansion(n);if(i==null||t&&i.unexpandable){if(t&&i==null&&n[0]==="\\"&&!this.isDefined(n))throw new vt("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var s=i.tokens,o=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs){s=s.slice();for(var a=s.length-1;a>=0;--a){var l=s[a];if(l.text==="#"){if(a===0)throw new vt("Incomplete placeholder at end of macro body",l);if(l=s[--a],l.text==="#")s.splice(a+1,1);else if(/^[1-9]$/.test(l.text))s.splice(a,2,...o[+l.text-1]);else throw new vt("Not a valid argument number",l)}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new ts(t)]):void 0}expandTokens(t){var r=[],n=this.stack.length;for(this.pushTokens(t);this.stack.length>n;)if(this.expandOnce(!0)===!1){var i=this.stack.pop();i.treatAsRelax&&(i.noexpand=!1,i.treatAsRelax=!1),r.push(i)}return this.countExpansion(r.length),r}expandMacroAsText(t){var r=this.expandMacro(t);return r&&r.map(n=>n.text).join("")}_getExpansion(t){var r=this.macros.get(t);if(r==null)return r;if(t.length===1){var n=this.lexer.catcodes[t];if(n!=null&&n!==13)return}var i=typeof r=="function"?r(this):r;if(typeof i=="string"){var s=0;if(i.indexOf("#")!==-1)for(var o=i.replace(/##/g,"");o.indexOf("#"+(s+1))!==-1;)++s;for(var a=new GO(i,this.settings),l=[],c=a.lex();c.text!=="EOF";)l.push(c),c=a.lex();l.reverse();var h={tokens:l,numArgs:s};return h}return i}isDefined(t){return this.macros.has(t)||Xl.hasOwnProperty(t)||pr.math.hasOwnProperty(t)||pr.text.hasOwnProperty(t)||eV.hasOwnProperty(t)}isExpandable(t){var r=this.macros.get(t);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:Xl.hasOwnProperty(t)&&!Xl[t].primitive}}var XO=/^[]/,Gy=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),h3={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},JO={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class R4{constructor(t,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new X4t(t,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(t,r){if(r===void 0&&(r=!0),this.fetch().text!==t)throw new vt("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){var r=this.nextToken;this.consume(),this.gullet.pushToken(new ts("}")),this.gullet.pushTokens(t);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(t,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var i=this.fetch();if(R4.endOfExpression.indexOf(i.text)!==-1||r&&i.text===r||t&&Xl[i.text]&&Xl[i.text].infix)break;var s=this.parseAtom(r);if(s){if(s.type==="internal")continue}else break;n.push(s)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(t){for(var r=-1,n,i=0;i<t.length;i++)if(t[i].type==="infix"){if(r!==-1)throw new vt("only one infix operator per group",t[i].token);r=i,n=t[i].replaceWith}if(r!==-1&&n){var s,o,a=t.slice(0,r),l=t.slice(r+1);a.length===1&&a[0].type==="ordgroup"?s=a[0]:s={type:"ordgroup",mode:this.mode,body:a},l.length===1&&l[0].type==="ordgroup"?o=l[0]:o={type:"ordgroup",mode:this.mode,body:l};var c;return n==="\\\\abovefrac"?c=this.callFunction(n,[s,t[r],o],[]):c=this.callFunction(n,[s,o],[]),[c]}else return t}handleSupSubscript(t){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var i;do{var s;i=this.parseGroup(t)}while(((s=i)==null?void 0:s.type)==="internal");if(!i)throw new vt("Expected group after '"+n+"'",r);return i}formatUnsupportedCmd(t){for(var r=[],n=0;n<t.length;n++)r.push({type:"textord",mode:"text",text:t[n]});var i={type:"text",mode:this.mode,body:r},s={type:"color",mode:this.mode,color:this.settings.errorColor,body:[i]};return s}parseAtom(t){var r=this.parseGroup("atom",t);if((r==null?void 0:r.type)==="internal"||this.mode==="text")return r;for(var n,i;;){this.consumeSpaces();var s=this.fetch();if(s.text==="\\limits"||s.text==="\\nolimits"){if(r&&r.type==="op"){var o=s.text==="\\limits";r.limits=o,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=s.text==="\\limits");else throw new vt("Limit controls must follow a math operator",s);this.consume()}else if(s.text==="^"){if(n)throw new vt("Double superscript",s);n=this.handleSupSubscript("superscript")}else if(s.text==="_"){if(i)throw new vt("Double subscript",s);i=this.handleSupSubscript("subscript")}else if(s.text==="'"){if(n)throw new vt("Double superscript",s);var a={type:"textord",mode:this.mode,text:"\\prime"},l=[a];for(this.consume();this.fetch().text==="'";)l.push(a),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:l}}else if(Gy[s.text]){var c=XO.test(s.text),h=[];for(h.push(new ts(Gy[s.text])),this.consume();;){var u=this.fetch().text;if(!Gy[u]||XO.test(u)!==c)break;h.unshift(new ts(Gy[u])),this.consume()}var f=this.subparse(h);c?i={type:"ordgroup",mode:"math",body:f}:n={type:"ordgroup",mode:"math",body:f}}else break}return n||i?{type:"supsub",mode:this.mode,base:r,sup:n,sub:i}:r}parseFunction(t,r){var n=this.fetch(),i=n.text,s=Xl[i];if(!s)return null;if(this.consume(),r&&r!=="atom"&&!s.allowedInArgument)throw new vt("Got function '"+i+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!s.allowedInText)throw new vt("Can't use function '"+i+"' in text mode",n);if(this.mode==="math"&&s.allowedInMath===!1)throw new vt("Can't use function '"+i+"' in math mode",n);var{args:o,optArgs:a}=this.parseArguments(i,s);return this.callFunction(i,o,a,n,t)}callFunction(t,r,n,i,s){var o={funcName:t,parser:this,token:i,breakOnTokenText:s},a=Xl[t];if(a&&a.handler)return a.handler(o,r,n);throw new vt("No function handler for "+t)}parseArguments(t,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var i=[],s=[],o=0;o<n;o++){var a=r.argTypes&&r.argTypes[o],l=o<r.numOptionalArgs;(r.primitive&&a==null||r.type==="sqrt"&&o===1&&s[0]==null)&&(a="primitive");var c=this.parseGroupOfType("argument to '"+t+"'",a,l);if(l)s.push(c);else if(c!=null)i.push(c);else throw new vt("Null argument, please report this as a bug")}return{args:i,optArgs:s}}parseGroupOfType(t,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var i=this.parseArgumentGroup(n,"text");return i!=null?{type:"styling",mode:i.mode,body:[i],style:"text"}:null}case"raw":{var s=this.parseStringGroup("raw",n);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(n)throw new vt("A primitive argument cannot be optional");var o=this.parseGroup(t);if(o==null)throw new vt("Expected group as "+t,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new vt("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(t,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var i="",s;(s=this.fetch()).text!=="EOF";)i+=s.text,this.consume();return this.consume(),n.text=i,n}parseRegexGroup(t,r){for(var n=this.fetch(),i=n,s="",o;(o=this.fetch()).text!=="EOF"&&t.test(s+o.text);)i=o,s+=i.text,this.consume();if(s==="")throw new vt("Invalid "+r+": '"+n.text+"'",n);return n.range(i,s)}parseColorGroup(t){var r=this.parseStringGroup("color",t);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new vt("Invalid color: '"+r.text+"'",r);var i=n[0];return/^[0-9a-f]{6}$/i.test(i)&&(i="#"+i),{type:"color-token",mode:this.mode,color:i}}parseSizeGroup(t){var r,n=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",t),!r)return null;!t&&r.text.length===0&&(r.text="0pt",n=!0);var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!i)throw new vt("Invalid size: '"+r.text+"'",r);var s={number:+(i[1]+i[2]),unit:i[3]};if(!uq(s))throw new vt("Invalid unit: '"+s.unit+"'",r);return{type:"size",mode:this.mode,value:s,isBlank:n}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(t,r){var n=this.gullet.scanArgument(t);if(n==null)return null;var i=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:n.loc,body:s};return r&&this.switchMode(i),o}parseGroup(t,r){var n=this.fetch(),i=n.text,s;if(i==="{"||i==="\\begingroup"){this.consume();var o=i==="{"?"}":"\\endgroup";this.gullet.beginGroup();var a=this.parseExpression(!1,o),l=this.fetch();this.expect(o),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:ki.range(n,l),body:a,semisimple:i==="\\begingroup"||void 0}}else if(s=this.parseFunction(r,t)||this.parseSymbol(),s==null&&i[0]==="\\"&&!eV.hasOwnProperty(i)){if(this.settings.throwOnError)throw new vt("Undefined control sequence: "+i,n);s=this.formatUnsupportedCmd(i),this.consume()}return s}formLigatures(t){for(var r=t.length-1,n=0;n<r;++n){var i=t[n],s=i.text;s==="-"&&t[n+1].text==="-"&&(n+1<r&&t[n+2].text==="-"?(t.splice(n,3,{type:"textord",mode:"text",loc:ki.range(i,t[n+2]),text:"---"}),r-=2):(t.splice(n,2,{type:"textord",mode:"text",loc:ki.range(i,t[n+1]),text:"--"}),r-=1)),(s==="'"||s==="`")&&t[n+1].text===s&&(t.splice(n,2,{type:"textord",mode:"text",loc:ki.range(i,t[n+1]),text:s+s}),r-=1)}}parseSymbol(){var t=this.fetch(),r=t.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),i=n.charAt(0)==="*";if(i&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new vt(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:i}}JO.hasOwnProperty(r[0])&&!pr[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',t),r=JO[r[0]]+r.slice(1));var s=U4t.exec(r);s&&(r=r.substring(0,s.index),r==="i"?r="":r==="j"&&(r=""));var o;if(pr[this.mode][r]){this.settings.strict&&this.mode==="math"&&UC.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',t);var a=pr[this.mode][r].group,l=ki.range(t),c;if(Fvt.hasOwnProperty(a)){var h=a;c={type:"atom",mode:this.mode,family:h,loc:l,text:r}}else c={type:a,mode:this.mode,loc:l,text:r};o=c}else if(r.charCodeAt(0)>=128)this.settings.strict&&(cq(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),t)),o={type:"textord",mode:"text",loc:ki.range(t),text:r};else return null;if(this.consume(),s)for(var u=0;u<s[0].length;u++){var f=s[0][u];if(!h3[f])throw new vt("Unknown accent ' "+f+"'",t);var d=h3[f][this.mode]||h3[f].text;if(!d)throw new vt("Accent "+f+" unsupported in "+this.mode+" mode",t);o={type:"accent",mode:this.mode,loc:ki.range(t),label:d,isStretchy:!1,isShifty:!0,base:o}}return o}}R4.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var k9=function(t,r){if(!(typeof t=="string"||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new R4(t,r);delete n.gullet.macros.current["\\df@tag"];var i=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new vt("\\tag works only in display equations");i=[{type:"tag",mode:"text",body:i,tag:n.subparse([new ts("\\df@tag")])}]}return i},C9=function(t,r,n){r.textContent="";var i=P4(t,n).toNode();r.appendChild(i)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),C9=function(){throw new vt("KaTeX doesn't work in quirks mode.")});var rV=function(t,r){var n=P4(t,r).toMarkup();return n},nV=function(t,r){var n=new i9(r);return k9(t,n)},iV=function(t,r,n){if(n.throwOnError||!(t instanceof vt))throw t;var i=Z.makeSpan(["katex-error"],[new As(r)]);return i.setAttribute("title",t.toString()),i.setAttribute("style","color:"+n.errorColor),i},P4=function(t,r){var n=new i9(r);try{var i=k9(t,n);return a4t(i,t,n)}catch(s){return iV(s,t,n)}},sV=function(t,r){var n=new i9(r);try{var i=k9(t,n);return l4t(i,t,n)}catch(s){return iV(s,t,n)}},oV="0.16.25",aV={Span:I1,Anchor:a9,SymbolNode:As,SvgNode:sl,PathNode:gc,LineNode:jC},S9={version:oV,render:C9,renderToString:rV,ParseError:vt,SETTINGS_SCHEMA:gm,__parse:nV,__renderToDomTree:P4,__renderToHTMLTree:sV,__setFontMetrics:hq,__defineSymbol:v,__defineFunction:Rt,__defineMacro:A,__domTree:aV};const J4t=Object.freeze(Object.defineProperty({__proto__:null,ParseError:vt,SETTINGS_SCHEMA:gm,__defineFunction:Rt,__defineMacro:A,__defineSymbol:v,__domTree:aV,__parse:nV,__renderToDomTree:P4,__renderToHTMLTree:sV,__setFontMetrics:hq,default:S9,get render(){return C9},renderToString:rV,version:oV},Symbol.toStringTag,{value:"Module"}));var Yg,Xg,Kf,Yf,Jg,Xf,Jf,Zf,Qf,Zg,dv,lV;class N4{constructor(t){kt(this,dv);kt(this,Yg);kt(this,Xg);kt(this,Kf);kt(this,Yf);kt(this,Jg);kt(this,Xf);kt(this,Jf);kt(this,Zf);kt(this,Qf);kt(this,Zg);nt(this,Xf,!1),this.onShow=()=>{},this.onHide=()=>{},nt(this,Zg,(r,n)=>{const{state:i,composing:s}=r,{selection:o,doc:a}=i,{ranges:l}=o,c=Math.min(...l.map(d=>d.$from.pos)),h=Math.max(...l.map(d=>d.$to.pos)),u=n&&n.doc.eq(a)&&n.selection.eq(o);if(V(this,Xf)||((V(this,Jg)??r.dom.parentElement??document.body).appendChild(this.element),nt(this,Xf,!0)),s||u)return;if(!V(this,Xg).call(this,r,n)){this.hide();return}oo({getBoundingClientRect:()=>Nv(r,c,h)},this.element,{placement:V(this,Yf).placement??"top",middleware:[ox(),fc(V(this,Jf)),AE(V(this,Zf)),...V(this,Kf)]}).then(({x:d,y:p})=>{Object.assign(this.element.style,{left:`${d}px`,top:`${p}px`})}).catch(console.error),this.show()}),this.update=(r,n)=>{V(this,Qf).call(this,r,n)},this.destroy=()=>{V(this,Qf).cancel()},this.show=r=>{this.element.dataset.show="true",r&&oo(r,this.element,{placement:"top",middleware:[ox(),fc(V(this,Jf)),AE(V(this,Zf)),...V(this,Kf)],...V(this,Yf)}).then(({x:n,y:i})=>{Object.assign(this.element.style,{left:`${n}px`,top:`${i}px`})}).catch(console.error),this.onShow()},this.hide=()=>{this.element.dataset.show!=="false"&&(this.element.dataset.show="false",this.onHide())},this.element=t.content,nt(this,Yg,t.debounce??200),nt(this,Xg,t.shouldShow??J1(this,dv,lV)),nt(this,Jf,t.offset),nt(this,Zf,t.shift),nt(this,Kf,t.middleware??[]),nt(this,Yf,t.floatingUIOptions??{}),nt(this,Jg,t.root),this.element.dataset.show="false",nt(this,Qf,wv(V(this,Zg),V(this,Yg)))}}Yg=new WeakMap,Xg=new WeakMap,Kf=new WeakMap,Yf=new WeakMap,Jg=new WeakMap,Xf=new WeakMap,Jf=new WeakMap,Zf=new WeakMap,Qf=new WeakMap,Zg=new WeakMap,dv=new WeakSet,lV=function(t){const{doc:r,selection:n}=t.state,{empty:i,from:s,to:o}=n,a=!r.textBetween(s,o).length&&t.state.selection instanceof Gt,l=this.element.contains(document.activeElement),c=!t.hasFocus()&&!l,h=!t.editable;return!(c||i||a||h)};function F4(e){const t=er({},`${e}_TOOLTIP_SPEC`),r=Gr(i=>{const s=i.get(t.key);return new xr({key:new vr(`${e}_TOOLTIP`),...s})}),n=[t,r];return n.key=t.key,n.pluginKey=r.key,t.meta={package:"@milkdown/plugin-tooltip",displayName:`Ctx<tooltipSpec>|${e}`},r.meta={package:"@milkdown/plugin-tooltip",displayName:`Prose<tooltip>|${e}`},n}function Z4t(){return{enter:{mathFlow:e,mathFlowFenceMeta:t,mathText:s},exit:{mathFlow:i,mathFlowFence:n,mathFlowFenceMeta:r,mathFlowValue:a,mathText:o,mathTextData:a}};function e(l){const c={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[c]}},l)}function t(){this.buffer()}function r(){const l=this.resume(),c=this.stack[this.stack.length-1];c.type,c.meta=l}function n(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function i(l){const c=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),h=this.stack[this.stack.length-1];h.type,this.exit(l),h.value=c;const u=h.data.hChildren[0];u.type,u.tagName,u.children.push({type:"text",value:c}),this.data.mathFlowInside=void 0}function s(l){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},l),this.buffer()}function o(l){const c=this.resume(),h=this.stack[this.stack.length-1];h.type,this.exit(l),h.value=c,h.data.hChildren.push({type:"text",value:c})}function a(l){this.config.enter.data.call(this,l),this.config.exit.data.call(this,l)}}function Q4t(e){let t=(e||{}).singleDollarTextMath;return t==null&&(t=!0),n.peek=i,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:`
`,inConstruct:"mathFlowMeta"},{character:"$",after:t?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:r,inlineMath:n}};function r(s,o,a,l){const c=s.value||"",h=a.createTracker(l),u="$".repeat(Math.max(sN(c,"$")+1,2)),f=a.enter("mathFlow");let d=h.move(u);if(s.meta){const p=a.enter("mathFlowMeta");d+=h.move(a.safe(s.meta,{after:`
`,before:d,encode:["$"],...h.current()})),p()}return d+=h.move(`
`),c&&(d+=h.move(c+`
`)),d+=h.move(u),f(),d}function n(s,o,a){let l=s.value||"",c=1;for(t||c++;new RegExp("(^|[^$])"+"\\$".repeat(c)+"([^$]|$)").test(l);)c++;const h="$".repeat(c);/[^ \r\n]/.test(l)&&(/^[ \r\n]/.test(l)&&/[ \r\n]$/.test(l)||/^\$|\$$/.test(l))&&(l=" "+l+" ");let u=-1;for(;++u<a.unsafe.length;){const f=a.unsafe[u];if(!f.atBreak)continue;const d=a.compilePattern(f);let p;for(;p=d.exec(l);){let m=p.index;l.codePointAt(m)===10&&l.codePointAt(m-1)===13&&m--,l=l.slice(0,m)+" "+l.slice(p.index+1)}}return h+l+h}function i(){return"$"}}const twt={tokenize:ewt,concrete:!0,name:"mathFlow"},ZO={tokenize:rwt,partial:!0};function ewt(e,t,r){const n=this,i=n.events[n.events.length-1],s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0;let o=0;return a;function a(b){return e.enter("mathFlow"),e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),l(b)}function l(b){return b===36?(e.consume(b),o++,l):o<2?r(b):(e.exit("mathFlowFenceSequence"),Oe(e,c,"whitespace")(b))}function c(b){return b===null||Jt(b)?u(b):(e.enter("mathFlowFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(b))}function h(b){return b===null||Jt(b)?(e.exit("chunkString"),e.exit("mathFlowFenceMeta"),u(b)):b===36?r(b):(e.consume(b),h)}function u(b){return e.exit("mathFlowFence"),n.interrupt?t(b):e.attempt(ZO,f,g)(b)}function f(b){return e.attempt({tokenize:y,partial:!0},g,d)(b)}function d(b){return(s?Oe(e,p,"linePrefix",s+1):p)(b)}function p(b){return b===null?g(b):Jt(b)?e.attempt(ZO,f,g)(b):(e.enter("mathFlowValue"),m(b))}function m(b){return b===null||Jt(b)?(e.exit("mathFlowValue"),p(b)):(e.consume(b),m)}function g(b){return e.exit("mathFlow"),t(b)}function y(b,x,T){let S=0;return Oe(b,w,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function w(N){return b.enter("mathFlowFence"),b.enter("mathFlowFenceSequence"),_(N)}function _(N){return N===36?(S++,b.consume(N),_):S<o?T(N):(b.exit("mathFlowFenceSequence"),Oe(b,I,"whitespace")(N))}function I(N){return N===null||Jt(N)?(b.exit("mathFlowFence"),x(N)):T(N)}}}function rwt(e,t,r){const n=this;return i;function i(o){return o===null?t(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return n.parser.lazy[n.now().line]?r(o):t(o)}}function nwt(e){let r=(e||{}).singleDollarTextMath;return r==null&&(r=!0),{tokenize:n,resolve:iwt,previous:swt,name:"mathText"};function n(i,s,o){let a=0,l,c;return h;function h(m){return i.enter("mathText"),i.enter("mathTextSequence"),u(m)}function u(m){return m===36?(i.consume(m),a++,u):a<2&&!r?o(m):(i.exit("mathTextSequence"),f(m))}function f(m){return m===null?o(m):m===36?(c=i.enter("mathTextSequence"),l=0,p(m)):m===32?(i.enter("space"),i.consume(m),i.exit("space"),f):Jt(m)?(i.enter("lineEnding"),i.consume(m),i.exit("lineEnding"),f):(i.enter("mathTextData"),d(m))}function d(m){return m===null||m===32||m===36||Jt(m)?(i.exit("mathTextData"),f(m)):(i.consume(m),d)}function p(m){return m===36?(i.consume(m),l++,p):l===a?(i.exit("mathTextSequence"),i.exit("mathText"),s(m)):(c.type="mathTextData",d(m))}}}function iwt(e){let t=e.length-4,r=3,n,i;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(n=r;++n<t;)if(e[n][1].type==="mathTextData"){e[t][1].type="mathTextPadding",e[r][1].type="mathTextPadding",r+=2,t-=2;break}}for(n=r-1,t++;++n<=t;)i===void 0?n!==t&&e[n][1].type!=="lineEnding"&&(i=n):(n===t||e[n][1].type==="lineEnding")&&(e[i][1].type="mathTextData",n!==i+2&&(e[i][1].end=e[n-1][1].end,e.splice(i+2,n-i-2),t-=n-i-2,n=i+2),i=void 0);return e}function swt(e){return e!==36||this.events[this.events.length-1][1].type==="characterEscape"}function owt(e){return{flow:{36:twt},text:{36:nwt(e)}}}const awt={};function lwt(e){const t=this,r=e||awt,n=t.data(),i=n.micromarkExtensions||(n.micromarkExtensions=[]),s=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),o=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);i.push(owt(r)),s.push(Z4t()),o.push(Q4t(r))}var cwt=Object.defineProperty,QO=Object.getOwnPropertySymbols,hwt=Object.prototype.hasOwnProperty,uwt=Object.prototype.propertyIsEnumerable,tD=(e,t,r)=>t in e?cwt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fwt=(e,t)=>{for(var r in t||(t={}))hwt.call(t,r)&&tD(e,r,t[r]);if(QO)for(var r of QO(t))uwt.call(t,r)&&tD(e,r,t[r]);return e};function Mu(e,t){return Object.assign(e,{meta:fwt({package:"@milkdown/components"},t)}),e}var dwt=Object.defineProperty,eD=Object.getOwnPropertySymbols,pwt=Object.prototype.hasOwnProperty,mwt=Object.prototype.propertyIsEnumerable,rD=(e,t,r)=>t in e?dwt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,T9=(e,t)=>{for(var r in t||(t={}))pwt.call(t,r)&&rD(e,r,t[r]);if(eD)for(var r of eD(t))mwt.call(t,r)&&rD(e,r,t[r]);return e};const gwt={mode:"preview"},ll=er(T9({},gwt),"linkTooltipStateCtx");Mu(ll,{displayName:"State<link-tooltip>",group:"LinkTooltip"});const ywt={addLink:()=>{},editLink:()=>{},removeLink:()=>{}},Md=er(T9({},ywt),"linkTooltipAPICtx");Mu(ll,{displayName:"API<link-tooltip>",group:"LinkTooltip"});const bwt={linkIcon:"",editButton:"",removeButton:"",confirmButton:"Confirm ",onCopyLink:()=>{},inputPlaceholder:"Paste link..."},Ad=er(T9({},bwt),"linkTooltipConfigCtx");Mu(ll,{displayName:"Config<link-tooltip>",group:"LinkTooltip"});const cV=be("ToggleLink",e=>()=>t=>{const{doc:r,selection:n}=t,i=Xs.type(e);return r.rangeHasMark(n.from,n.to,i)?(e.get(Md.key).removeLink(n.from,n.to),!0):(e.get(Md.key).addLink(n.from,n.to),!0)}),R1=F4("LINK_PREVIEW");Mu(R1[0],{displayName:"PreviewTooltipSpec<link-tooltip>",group:"LinkTooltip"});Mu(R1[1],{displayName:"PreviewTooltipPlugin<link-tooltip>",group:"LinkTooltip"});const $4=F4("LINK_EDIT");Mu($4[0],{displayName:"EditTooltipSpec<link-tooltip>",group:"LinkTooltip"});Mu($4[1],{displayName:"EditTooltipPlugin<link-tooltip>",group:"LinkTooltip"});function bm({icon:e,class:t,onClick:r}){return et("span",{class:Cn("milkdown-icon",t),onPointerdown:r,ref:n=>{n&&e&&(n.innerHTML=cn.sanitize(e.trim()))}})}bm.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const xwt=Sn({props:{config:{type:Object,required:!0},src:{type:Object,required:!0},onConfirm:{type:Function,required:!0},onCancel:{type:Function,required:!0}},setup({config:e,src:t,onConfirm:r,onCancel:n}){const i=zt(t);Vh(t,a=>{i.value=a});const s=()=>{r(i.value)},o=a=>{a.stopPropagation(),a.key==="Enter"&&(a.preventDefault(),s()),a.key==="Escape"&&(a.preventDefault(),n())};return()=>et("div",{class:"link-edit"},et("input",{class:"input-area",placeholder:e.value.inputPlaceholder,onKeydown:o,onInput:a=>{i.value=a.target.value},value:i.value}),i.value?et(bm,{class:"button confirm",icon:e.value.confirmButton,onClick:s}):null)}});var vwt=Object.defineProperty,wwt=Object.defineProperties,kwt=Object.getOwnPropertyDescriptors,nD=Object.getOwnPropertySymbols,Cwt=Object.prototype.hasOwnProperty,Swt=Object.prototype.propertyIsEnumerable,hV=e=>{throw TypeError(e)},iD=(e,t,r)=>t in e?vwt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ky=(e,t)=>{for(var r in t||(t={}))Cwt.call(t,r)&&iD(e,r,t[r]);if(nD)for(var r of nD(t))Swt.call(t,r)&&iD(e,r,t[r]);return e},sD=(e,t)=>wwt(e,kwt(t)),uV=(e,t,r)=>t.has(e)||hV("Cannot "+r),Ar=(e,t,r)=>(uV(e,t,"read from private field"),r?r.call(e):t.get(e)),ga=(e,t,r)=>t.has(e)?hV("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Wc=(e,t,r,n)=>(uV(e,t,"write to private field"),t.set(e,r),r),fp,_l,Ml,J2,dp,Z2,Qc,ZC,Q2;const oD={from:-1,to:-1,mark:null};class Twt{constructor(t,r){this.ctx=t,ga(this,fp),ga(this,_l),ga(this,Ml,Ky({},oD)),ga(this,J2),ga(this,dp),ga(this,Z2,zt("")),ga(this,Qc,()=>{Ar(this,_l).hide(),this.ctx.update(ll.key,s=>sD(Ky({},s),{mode:"preview"})),Wc(this,Ml,Ky({},oD))}),ga(this,ZC,s=>{const o=this.ctx.get(fr),{from:a,to:l,mark:c}=Ar(this,Ml),h=Xs.type(this.ctx),u=cn.sanitize(s);if(c&&c.attrs.href===u){Ar(this,Qc).call(this);return}const f=o.state.tr;c&&f.removeMark(a,l,c),f.addMark(a,l,h.create({href:u})),o.dispatch(f),Ar(this,Qc).call(this)}),ga(this,Q2,(s,o,a)=>{const l=this.ctx.get(Ad.key);Ar(this,dp).value=l,Ar(this,Z2).value=s,this.ctx.update(ll.key,h=>sD(Ky({},h),{mode:"edit"}));const c=this.ctx.get(fr);c.dispatch(c.state.tr.setSelection(Gt.create(c.state.doc,o,a))),Ar(this,_l).show({getBoundingClientRect:()=>Nv(c,o,a)}),requestAnimationFrame(()=>{var h;(h=Ar(this,fp).querySelector("input"))==null||h.focus()})}),this.update=s=>{const{state:o}=s,{selection:a}=o;if(!(a instanceof Gt))return;const{from:l,to:c}=a;l===Ar(this,Ml).from&&c===Ar(this,Ml).to||Ar(this,Qc).call(this)},this.destroy=()=>{Ar(this,J2).unmount(),Ar(this,_l).destroy(),Ar(this,fp).remove()},this.addLink=(s,o)=>{Wc(this,Ml,{from:s,to:o,mark:null}),Ar(this,Q2).call(this,"",s,o)},this.editLink=(s,o,a)=>{Wc(this,Ml,{from:o,to:a,mark:s}),Ar(this,Q2).call(this,s.attrs.href,o,a)},this.removeLink=(s,o)=>{const a=this.ctx.get(fr),l=a.state.tr;l.removeMark(s,o,Xs.type(this.ctx)),a.dispatch(l),Ar(this,Qc).call(this)},Wc(this,dp,zt(this.ctx.get(Ad.key)));const n=document.createElement("div");n.className="milkdown-link-edit";const i=po(xwt,{config:Ar(this,dp),src:Ar(this,Z2),onConfirm:Ar(this,ZC),onCancel:Ar(this,Qc)});i.mount(n),Wc(this,J2,i),Wc(this,fp,n),Wc(this,_l,new N4({content:n,debounce:0,shouldShow:()=>!1})),Ar(this,_l).onHide=()=>{requestAnimationFrame(()=>{r.dom.focus({preventScroll:!0})})},Ar(this,_l).update(r)}}fp=new WeakMap;_l=new WeakMap;Ml=new WeakMap;J2=new WeakMap;dp=new WeakMap;Z2=new WeakMap;Qc=new WeakMap;ZC=new WeakMap;Q2=new WeakMap;var _wt=Object.defineProperty,Mwt=Object.defineProperties,Awt=Object.getOwnPropertyDescriptors,aD=Object.getOwnPropertySymbols,Ewt=Object.prototype.hasOwnProperty,Lwt=Object.prototype.propertyIsEnumerable,lD=(e,t,r)=>t in e?_wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Owt=(e,t)=>{for(var r in t||(t={}))Ewt.call(t,r)&&lD(e,r,t[r]);if(aD)for(var r of aD(t))Lwt.call(t,r)&&lD(e,r,t[r]);return e},Dwt=(e,t)=>Mwt(e,Awt(t));function Iwt(e){let t;e.update(Md.key,r=>Dwt(Owt({},r),{addLink:(n,i)=>{t==null||t.addLink(n,i)},editLink:(n,i,s)=>{t==null||t.editLink(n,i,s)},removeLink:(n,i)=>{t==null||t.removeLink(n,i)}})),e.set($4.key,{view:r=>(t=new Twt(e,r),t)})}function Bwt(e,t,r,n,i){let s={start:-1,end:-1};return r.nodesBetween(n,i,(o,a)=>{if(s.start>-1)return!1;s.start===-1&&e.isInSet(o.marks)&&t===o&&(s={start:a,end:a+Math.max(o.textContent.length,1)})}),s}function Rwt(e,t,r){const n=t.posAtCoords({left:r.clientX,top:r.clientY});if(!n)return;const{pos:i}=n,s=t.state.doc.nodeAt(i);if(!s)return;const o=s.marks.find(l=>l.type===Xs.mark.type(e));if(!(!o||!R1.pluginKey()))return{show:!0,pos:i,node:s,mark:o}}const Pwt=Sn({props:{config:{type:Object,required:!0},src:{type:Object,required:!0},onEdit:{type:Object,required:!0},onRemove:{type:Object,required:!0}},setup({config:e,src:t,onEdit:r,onRemove:n}){const i=a=>{a.preventDefault(),a.stopPropagation(),r.value()},s=a=>{a.preventDefault(),a.stopPropagation(),n.value()},o=a=>{a.preventDefault();const l=t.value;navigator.clipboard&&l&&navigator.clipboard.writeText(l).then(()=>{e.value.onCopyLink(l)}).catch(c=>console.error(c))};return()=>et("div",{class:"link-preview"},et(bm,{class:"button link-icon",icon:e.value.linkIcon,onClick:o}),et("a",{href:t.value,target:"_blank",class:"link-display"},t.value),et(bm,{class:"button link-edit-button",icon:e.value.editButton,onClick:i}),et(bm,{class:"button link-remove-button",icon:e.value.removeButton,onClick:s}))}});var fV=e=>{throw TypeError(e)},dV=(e,t,r)=>t.has(e)||fV("Cannot "+r),Fe=(e,t,r)=>(dV(e,t,"read from private field"),r?r.call(e):t.get(e)),zi=(e,t,r)=>t.has(e)?fV("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),jc=(e,t,r,n)=>(dV(e,t,"write to private field"),t.set(e,r),r),th,Ps,pp,mp,tb,eb,rb,gp,yp,nb,ib,sb,bp;class Nwt{constructor(t,r){this.ctx=t,zi(this,th),zi(this,Ps),zi(this,pp,this.ctx.use(ll.key)),zi(this,mp),zi(this,tb,zt("")),zi(this,eb,zt(()=>{})),zi(this,rb,zt(()=>{})),zi(this,gp),zi(this,yp,!1),zi(this,nb,({mode:n})=>{n==="edit"&&Fe(this,bp).call(this)}),zi(this,ib,()=>{jc(this,yp,!0)}),zi(this,sb,()=>{jc(this,yp,!1)}),zi(this,bp,()=>{Fe(this,Ps).hide(),Fe(this,Ps).element.removeEventListener("mouseenter",Fe(this,ib)),Fe(this,Ps).element.removeEventListener("mouseleave",Fe(this,sb))}),this.show=(n,i,s,o)=>{Fe(this,mp).value=this.ctx.get(Ad.key),Fe(this,tb).value=n.attrs.href,Fe(this,eb).value=()=>{this.ctx.get(Md.key).editLink(n,i,s)},Fe(this,rb).value=()=>{this.ctx.get(Md.key).removeLink(i,s),Fe(this,bp).call(this)},Fe(this,Ps).show({getBoundingClientRect:()=>o}),Fe(this,Ps).element.addEventListener("mouseenter",Fe(this,ib)),Fe(this,Ps).element.addEventListener("mouseleave",Fe(this,sb))},this.hide=()=>{Fe(this,yp)||Fe(this,bp).call(this)},this.update=()=>{},this.destroy=()=>{Fe(this,gp).unmount(),Fe(this,pp).off(Fe(this,nb)),Fe(this,Ps).destroy(),Fe(this,th).remove()},jc(this,mp,zt(this.ctx.get(Ad.key))),jc(this,gp,po(Pwt,{config:Fe(this,mp),src:Fe(this,tb),onEdit:Fe(this,eb),onRemove:Fe(this,rb)})),jc(this,th,document.createElement("div")),Fe(this,th).className="milkdown-link-preview",Fe(this,gp).mount(Fe(this,th)),jc(this,Ps,new N4({debounce:0,content:Fe(this,th),shouldShow:()=>!1})),Fe(this,Ps).update(r),jc(this,pp,t.use(ll.key)),Fe(this,pp).on(Fe(this,nb))}}th=new WeakMap;Ps=new WeakMap;pp=new WeakMap;mp=new WeakMap;tb=new WeakMap;eb=new WeakMap;rb=new WeakMap;gp=new WeakMap;yp=new WeakMap;nb=new WeakMap;ib=new WeakMap;sb=new WeakMap;bp=new WeakMap;function Fwt(e){let t;const n=xv((s,o)=>{if(!t||!s.hasFocus()||e.get(ll.key).mode==="edit")return;const l=Rwt(e,s,o);if(l){const c=s.state.doc.resolve(l.pos),h=Bwt(l.mark,l.node,s.state.doc,c.before(),c.after()),u=h.start,f=h.end;t.show(l.mark,u,f,Nv(s,u,f));return}t.hide()},50),i=()=>{setTimeout(()=>{t==null||t.hide()},50)};e.set(R1.key,{props:{handleDOMEvents:{mousemove:n,mouseleave:i}},view:s=>(t=new Nwt(e,s),t)})}function $wt(e){Fwt(e),Iwt(e)}const zwt=[ll,Md,Ad,R1,$4,cV].flat();var Hwt=Object.defineProperty,cD=Object.getOwnPropertySymbols,qwt=Object.prototype.hasOwnProperty,Vwt=Object.prototype.propertyIsEnumerable,hD=(e,t,r)=>t in e?Hwt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Wwt=(e,t)=>{for(var r in t||(t={}))qwt.call(t,r)&&hD(e,r,t[r]);if(cD)for(var r of cD(t))Vwt.call(t,r)&&hD(e,r,t[r]);return e};function pV(e,t){return Object.assign(e,{meta:Wwt({package:"@milkdown/components"},t)}),e}const jwt={renderLabel:({label:e,listType:t,checked:r})=>r==null?t==="bullet"?"":e:r?"":""},z4=er(jwt,"listItemBlockConfigCtx");pV(z4,{displayName:"Config<list-item-block>",group:"ListItemBlock"});function mV({icon:e,class:t,onClick:r}){return et("span",{class:Cn("milkdown-icon",t),onPointerdown:r,ref:n=>{n&&e&&(n.innerHTML=cn.sanitize(e.trim()))}})}mV.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const Uwt=Sn({props:{label:{type:Object,required:!0},checked:{type:Object,required:!0},listType:{type:Object,required:!0},config:{type:Object,required:!0},readonly:{type:Object,required:!0},selected:{type:Object,required:!0},setAttr:{type:Function,required:!0},onMount:{type:Function,required:!0}},setup({label:e,checked:t,listType:r,config:n,readonly:i,setAttr:s,onMount:o,selected:a}){const l=f=>{f!=null&&f instanceof Element&&o(f)},c=f=>{f.stopPropagation(),f.preventDefault(),t.value!=null&&s("checked",!t.value)},h=wd(()=>n.renderLabel({label:e.value,listType:r.value,checked:t.value,readonly:i.value})),u=wd(()=>t.value==null?r.value==="bullet"?"bullet":"ordered":t.value?"checked":"unchecked");return()=>et("li",{class:Cn("list-item",a.value&&"ProseMirror-selectednode")},et("div",{class:"label-wrapper",onPointerdown:c,contenteditable:!1},et(mV,{class:Cn("label",i.value&&"readonly",u.value),icon:h.value})),et("div",{class:"children",ref:l}))}}),gV=f1(fo.node,e=>(t,r,n)=>{const i=document.createElement("div");i.className="milkdown-list-item-block";const s=document.createElement("div");s.setAttribute("data-content-dom","true"),s.classList.add("content-dom");const o=zt(t.attrs.label),a=zt(t.attrs.checked),l=zt(t.attrs.listType),c=zt(!r.editable),h=e.get(z4.key),u=zt(!1),f=(x,T)=>{if(!r.editable)return;const S=n();S!=null&&(r.hasFocus()||r.focus(),r.dispatch(r.state.tr.setNodeAttribute(S,x,T)))},d=Gd(()=>{u.value?i.classList.add("selected"):i.classList.remove("selected")});let p=0;const g=po(Uwt,{label:o,checked:a,listType:l,readonly:c,config:h,selected:u,setAttr:f,onMount:x=>{const{anchor:T,head:S}=r.state.selection;x.appendChild(s);const w=r.state.doc.resolve(T),_=r.state.doc.resolve(S);p=requestAnimationFrame(()=>{if(cancelAnimationFrame(p),!w.doc.eq(r.state.doc))return;const I=new Gt(w,_);r.dispatch(r.state.tr.setSelection(I))})}});g.mount(i);const y=x=>{l.value=x.attrs.listType,o.value=x.attrs.label,a.value=x.attrs.checked,c.value=!r.editable};y(t);let b=t;return{dom:i,contentDOM:s,update:x=>x.type!==t.type?!1:(x.sameMarkup(b)&&x.content.eq(b.content)||(b=x,y(x)),!0),ignoreMutation:x=>!i||!s?!0:x.type==="selection"?!1:s===x.target&&x.type==="attributes"?!0:!s.contains(x.target),selectNode:()=>{u.value=!0},deselectNode:()=>{u.value=!1},destroy:()=>{d(),g.unmount(),i.remove(),s.remove()}}});pV(gV,{displayName:"NodeView<list-item-block>",group:"ListItemBlock"});const Gwt=[z4,gV];var Kwt=Object.defineProperty,uD=Object.getOwnPropertySymbols,Ywt=Object.prototype.hasOwnProperty,Xwt=Object.prototype.propertyIsEnumerable,fD=(e,t,r)=>t in e?Kwt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Jwt=(e,t)=>{for(var r in t||(t={}))Ywt.call(t,r)&&fD(e,r,t[r]);if(uD)for(var r of uD(t))Xwt.call(t,r)&&fD(e,r,t[r]);return e};function yV(e,t){return Object.assign(e,{meta:Jwt({package:"@milkdown/components"},t)}),e}var Zwt=Object.defineProperty,dD=Object.getOwnPropertySymbols,Qwt=Object.prototype.hasOwnProperty,t5t=Object.prototype.propertyIsEnumerable,pD=(e,t,r)=>t in e?Zwt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,e5t=(e,t)=>{for(var r in t||(t={}))Qwt.call(t,r)&&pD(e,r,t[r]);if(dD)for(var r of dD(t))t5t.call(t,r)&&pD(e,r,t[r]);return e};const r5t={renderButton:e=>{switch(e){case"add_row":return"+";case"add_col":return"+";case"delete_row":return"-";case"delete_col":return"-";case"align_col_left":return"left";case"align_col_center":return"center";case"align_col_right":return"right";case"col_drag_handle":return"=";case"row_drag_handle":return"="}}},H4=er(e5t({},r5t),"tableBlockConfigCtx");yV(H4,{displayName:"Config<table-block>",group:"TableBlock"});function _o({icon:e,class:t,onClick:r}){return et("span",{class:Cn("milkdown-icon",t),onPointerdown:r,ref:n=>{n&&e&&(n.innerHTML=cn.sanitize(e.trim()))}})}_o.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};function bV(e){const{dragPreviewRef:t,tableWrapperRef:r,contentWrapperRef:n,yLineHandleRef:i,xLineHandleRef:s,colHandleRef:o,rowHandleRef:a}=e,l=t.value;if(!l)return;const c=r.value;if(!c)return;const h=n.value;if(!h)return;const u=h.querySelector("tbody");if(!u)return;const f=l.querySelector("tbody");if(!f)return;const d=i.value;if(!d)return;const p=s.value;if(!p)return;const m=o.value;if(!m)return;const g=a.value;return g?{preview:l,wrapper:c,content:h,contentRoot:u,previewRoot:f,yHandle:d,xHandle:p,colHandle:m,rowHandle:g}:void 0}function xV(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function vV(e,t,r,n,i){const{width:s,height:o}=n.querySelector("tbody").getBoundingClientRect();if(e==="y"){const l=n.querySelectorAll("tr")[i];if(!l)return;r.appendChild(l.cloneNode(!0));const c=l.getBoundingClientRect().height;Object.assign(t.style,{width:`${s}px`,height:`${c}px`}),t.dataset.show="true";return}if(e==="x"){const a=n.querySelectorAll("tr");let l;Array.from(a).forEach(c=>{const h=c.children[i];if(!h)return;l===void 0&&(l=h.getBoundingClientRect().width);const u=h.parentElement.cloneNode(!1),f=h.cloneNode(!0);u.appendChild(f),r.appendChild(u)}),Object.assign(t.style,{width:`${l}px`,height:`${o}px`}),t.dataset.show="true";return}}function n5t(e,t){return r=>{kV(e,r,t,n=>{wV("y",r,n,e);const{preview:i,content:s,previewRoot:o}=n;xV(o);const{hoverIndex:a}=e,[l]=a.value;vV("y",i,o,s,l)})}}function i5t(e,t){return r=>{kV(e,r,t,n=>{wV("x",r,n,e);const{preview:i,content:s,previewRoot:o}=n,{hoverIndex:a}=e,[l,c]=a.value;xV(o),vV("x",i,o,s,c)})}}function wV(e,t,r,n){const{xHandle:i,yHandle:s,colHandle:o,rowHandle:a,preview:l}=r;i.dataset.displayType=e==="y"?"indicator":"none",s.dataset.displayType=e==="x"?"indicator":"none",e==="y"?(o.dataset.show="false",mD(a)):(a.dataset.show="false",mD(o));const{hoverIndex:c,dragInfo:h}=n,[u,f]=c.value;h.value={startCoords:[t.clientX,t.clientY],startIndex:e==="y"?u:f,endIndex:e==="y"?u:f,type:e==="y"?"row":"col"},l.dataset.direction=e==="y"?"vertical":"horizontal"}function kV(e,t,r,n){const i=r==null?void 0:r.get(fr);if(!(i!=null&&i.editable))return;t.stopPropagation(),t.dataTransfer&&(t.dataTransfer.effectAllowed="move");const s=bV(e);s&&requestAnimationFrame(()=>{n(s)})}function mD(e){var t;(t=e.querySelector(".button-group"))==null||t.setAttribute("data-show","false")}function QC(e,t){for(let r=0;r<e.childCount;r++)if(e.child(r)===t)return r;return-1}function s5t(e,t){var r,n,i;if(t)try{const s=t.posAtCoords({left:e.clientX,top:e.clientY});if(!s)return;const o=s==null?void 0:s.inside;if(o==null||o<0)return;const a=t.state.doc.resolve(o),l=t.state.doc.nodeAt(o);if(!l)return;const c=["table_cell","table_header"],h=["table_row","table_header_row"],u=c.includes(l.type.name)?l:(r=jo(g=>c.includes(g.type.name))(a))==null?void 0:r.node,f=(n=jo(g=>h.includes(g.type.name))(a))==null?void 0:n.node,d=(i=jo(g=>g.type.name==="table")(a))==null?void 0:i.node;if(!u||!f||!d)return;const p=QC(f,u);return[QC(d,f),p]}catch{return}}function q4(e,[t,r]){const n=e.value;if(!n)return;const i=n.querySelectorAll("tr"),s=i[t];if(!s)return;const o=i[0];if(!o)return;const a=o.children[r];if(!a)return;const l=s.children[r];if(l)return{row:s,col:l,headerCol:a}}function o5t(e,t,r){if(!r||!t)return;const{selection:n}=t.state;if(!(n instanceof lr))return;const{$from:i}=n,s=Kd(i);if(!(!s||s.node!==r)){if(n.isColSelection()){const{$head:o}=n,a=o.index(o.depth-1);_9({refs:e,index:[0,a],before:l=>{var c;(c=l.querySelector(".button-group"))==null||c.setAttribute("data-show","true")}});return}if(n.isRowSelection()){const{$head:o}=n,a=jo(c=>c.type.name==="table_row"||c.type.name==="table_header_row")(o);if(!a)return;const l=QC(s.node,a.node);M9({refs:e,index:[l,0],before:c=>{var h;l>0&&((h=c.querySelector(".button-group"))==null||h.setAttribute("data-show","true"))}})}}}function _9({refs:e,index:t,before:r,after:n}){const{contentWrapperRef:i,colHandleRef:s,hoverIndex:o}=e,a=s.value;if(!a)return;o.value=t;const l=q4(i,t);if(!l)return;const{headerCol:c}=l;a.dataset.show="true",r&&r(a),oo(c,a,{placement:"top"}).then(({x:h,y:u})=>{Object.assign(a.style,{left:`${h}px`,top:`${u}px`}),n&&n(a)}).catch(console.error)}function M9({refs:e,index:t,before:r,after:n}){const{contentWrapperRef:i,rowHandleRef:s,hoverIndex:o}=e,a=s.value;if(!a)return;o.value=t;const l=q4(i,t);if(!l)return;const{row:c}=l;a.dataset.show="true",r&&r(a),oo(c,a,{placement:"left"}).then(({x:h,y:u})=>{Object.assign(a.style,{left:`${h}px`,top:`${u}px`}),n&&n(a)}).catch(console.error)}function CV(e,t,r){const n=r==="x"?"left":"top",i=r==="x"?"right":"bottom",s=e.length-1,o=e.findIndex((l,c)=>{const h=l.getBoundingClientRect(),u=h[n],f=h[i];return u<=t&&t<=f||c===s&&t>f||c===0&&t<u}),a=e[o];return a?[a,o]:void 0}function a5t(e,t){const r=e.querySelector("tr");if(!r)return;const n=Array.from(r.children);return CV(n,t,"x")}function l5t(e,t){const r=Array.from(e.querySelectorAll("tr"));return CV(r,t,"y")}function c5t(e){return wv(t=>{const r=bV(e);if(!r)return;const{preview:n,content:i,contentRoot:s,xHandle:o,yHandle:a}=r,{dragInfo:l,hoverIndex:c}=e;if(n.dataset.show==="false")return;const h=q4(e.contentWrapperRef,c.value);if(!h||!s.querySelector("tr"))return;const f=l.value;if(!f||!s.offsetParent)return;const d=s.offsetParent.offsetTop,p=s.offsetParent.offsetLeft;if(f.type==="col"){const m=h.col.getBoundingClientRect().width,{left:g,width:y}=s.getBoundingClientRect(),b=p-g,x=t.clientX+b-m/2,[T]=f.startCoords,S=T<t.clientX?"right":"left";n.style.top=`${d}px`;const w=x<g+b-20?g+b-20:x>g+y+b-m+20?g+y+b-m+20:x;n.style.left=`${w}px`;const _=a5t(s,t.clientX);if(_){const[I,N]=_,L=a.getBoundingClientRect().width,D=i.getBoundingClientRect();f.endIndex=N,oo(I,a,{placement:S==="left"?"left":"right",middleware:[fc(S==="left"?-1*L:0)]}).then(({x:P})=>{a.dataset.show="true",Object.assign(a.style,{height:`${D.height}px`,left:`${P}px`,top:`${d}px`})}).catch(console.error)}}else if(f.type==="row"){const m=h.row.getBoundingClientRect().height,{top:g,height:y}=s.getBoundingClientRect(),b=d-g,x=t.clientY+b-m/2,[T,S]=f.startCoords,w=S<t.clientY?"down":"up",_=x<g+b-20?g+b-20:x>g+y+b-m+20?g+y+b-m+20:x;n.style.top=`${_}px`,n.style.left=`${p}px`;const I=l5t(s,t.clientY);if(I){const[N,L]=I,D=o.getBoundingClientRect().height,P=i.getBoundingClientRect();f.endIndex=L,oo(N,o,{placement:w==="up"?"top":"bottom",middleware:[fc(w==="up"?-1*D:0)]}).then(({y:K})=>{o.dataset.show="true",Object.assign(o.style,{width:`${P.width}px`,top:`${K}px`})}).catch(console.error)}}},20)}function h5t(e,t,r){const{dragPreviewRef:n,yLineHandleRef:i,xLineHandleRef:s,dragInfo:o}=e,a=n5t(e,t),l=i5t(e,t),c=()=>{const f=n.value;if(!f||f.dataset.show==="false")return;const d=f==null?void 0:f.querySelector("tbody");for(;d!=null&&d.firstChild;)d==null||d.removeChild(d.firstChild);f&&(f.dataset.show="false")},h=()=>{var f;const d=n.value;if(!d)return;const p=i.value;if(!p)return;const m=s.value;if(!m)return;const g=o.value;if(!g||!t||d.dataset.show==="false"||!e.colHandleRef.value||!e.rowHandleRef.value||(p.dataset.show="false",m.dataset.show="false",g.startIndex===g.endIndex))return;const x=t.get(Dt),T={from:g.startIndex,to:g.endIndex,pos:((f=r==null?void 0:r())!=null?f:0)+1};if(g.type==="col"){x.call(ph.key,{pos:T.pos,index:g.startIndex}),x.call(L8.key,T);const S=[0,g.endIndex];_9({refs:e,index:S})}else{x.call(dh.key,{pos:T.pos,index:g.startIndex}),x.call(E8.key,T);const S=[g.endIndex,0];M9({refs:e,index:S})}requestAnimationFrame(()=>{t.get(fr).focus()})},u=c5t(e);return y1(()=>{window.addEventListener("dragover",u),window.addEventListener("dragend",c),window.addEventListener("drop",h)}),b1(()=>{window.removeEventListener("dragover",u),window.removeEventListener("dragend",c),window.removeEventListener("drop",h)}),{dragRow:a,dragCol:l}}function u5t(e,t,r){const{xLineHandleRef:n,contentWrapperRef:i,colHandleRef:s,rowHandleRef:o,hoverIndex:a,lineHoverIndex:l}=e;return{onAddRow:()=>{var m,g,y;if(!t)return;const b=n.value;if(!b)return;const[x]=l.value;if(x<0||!t.get(fr).editable)return;const T=Array.from((g=(m=i.value)==null?void 0:m.querySelectorAll("tr"))!=null?g:[]),S=t.get(Dt),w=((y=r==null?void 0:r())!=null?y:0)+1;T.length===x?(S.call(dh.key,{pos:w,index:x-1}),S.call(R8.key)):(S.call(dh.key,{pos:w,index:x}),S.call(B8.key)),S.call(dh.key,{pos:w,index:x}),b.dataset.show="false"},onAddCol:()=>{var m,g,y,b;if(!t||!n.value)return;const[T,S]=l.value;if(S<0||!t.get(fr).editable)return;const w=Array.from((y=(g=(m=i.value)==null?void 0:m.querySelector("tr"))==null?void 0:g.children)!=null?y:[]),_=t.get(Dt),I=((b=r==null?void 0:r())!=null?b:0)+1;w.length===S?(_.call(ph.key,{pos:I,index:S-1}),_.call(I8.key)):(_.call(ph.key,{pos:I,index:S}),_.call(D8.key)),_.call(ph.key,{pos:I,index:S})},selectCol:()=>{var m,g;if(!t)return;const[y,b]=a.value,x=t.get(Dt),T=((m=r==null?void 0:r())!=null?m:0)+1;x.call(ph.key,{pos:T,index:b});const S=(g=s.value)==null?void 0:g.querySelector(".button-group");S&&(S.dataset.show=S.dataset.show==="true"?"false":"true")},selectRow:()=>{var m,g;if(!t)return;const[y,b]=a.value,x=t.get(Dt),T=((m=r==null?void 0:r())!=null?m:0)+1;x.call(dh.key,{pos:T,index:y});const S=(g=o.value)==null?void 0:g.querySelector(".button-group");S&&y>0&&(S.dataset.show=S.dataset.show==="true"?"false":"true")},deleteSelected:m=>{if(!t||!t.get(fr).editable)return;m.preventDefault(),m.stopPropagation(),t.get(Dt).call(O8.key),requestAnimationFrame(()=>{t.get(fr).focus()})},onAlign:m=>g=>{if(!t||!t.get(fr).editable)return;g.preventDefault(),g.stopPropagation(),t.get(Dt).call(P8.key,m),requestAnimationFrame(()=>{t.get(fr).focus()})}}}function f5t(e,t){return wv(r=>{if(!(t!=null&&t.editable))return;const{contentWrapperRef:n,yLineHandleRef:i,xLineHandleRef:s,colHandleRef:o,rowHandleRef:a,hoverIndex:l,lineHoverIndex:c}=e,h=i.value;if(!h)return;const u=s.value;if(!u)return;const f=n.value;if(!f)return;const d=a.value;if(!d)return;const p=o.value;if(!p)return;const m=s5t(r,t);if(!m)return;const g=q4(n,m);if(!g)return;const[y,b]=m,x=g.col.getBoundingClientRect(),T=Math.abs(r.clientX-x.left)<8,S=Math.abs(x.right-r.clientX)<8,w=Math.abs(r.clientY-x.top)<8,_=Math.abs(x.bottom-r.clientY)<8,I=T||S||w||_,N=d.querySelector(".button-group"),L=p.querySelector(".button-group");if(N&&(N.dataset.show="false"),L&&(L.dataset.show="false"),I){const D=f.getBoundingClientRect();d.dataset.show="false",p.dataset.show="false",u.dataset.displayType="tool",h.dataset.displayType="tool";const P=h.getBoundingClientRect().width,K=u.getBoundingClientRect().height;T||S?(c.value[1]=T?b:b+1,oo(g.col,h,{placement:T?"left":"right",middleware:[fc(T?-1*P:0)]}).then(({x:z})=>{h.dataset.show="true",Object.assign(h.style,{height:`${D.height}px`,left:`${z}px`})}).catch(console.error)):h.dataset.show="false",m[0]!==0&&(w||_)?(c.value[0]=w?y:y+1,oo(g.row,u,{placement:w?"top":"bottom",middleware:[fc(w?-1*K:0)]}).then(({y:z})=>{u.dataset.show="true",Object.assign(u.style,{width:`${D.width}px`,top:`${z}px`})}).catch(console.error)):u.dataset.show="false";return}c.value=[-1,-1],h.dataset.show="false",u.dataset.show="false",d.dataset.show="true",p.dataset.show="true",M9({refs:e,index:m}),_9({refs:e,index:m}),l.value=m},20)}function d5t(e){return()=>{const{rowHandleRef:t,colHandleRef:r,yLineHandleRef:n,xLineHandleRef:i}=e;setTimeout(()=>{const s=t.value;if(!s)return;const o=r.value;if(!o)return;const a=n.value;if(!a)return;const l=i.value;l&&(s.dataset.show="false",o.dataset.show="false",a.dataset.show="false",l.dataset.show="false")},200)}}function p5t(e,t){const r=f5t(e,t),n=d5t(e);return{pointerMove:r,pointerLeave:n}}const m5t=Sn({props:{view:{type:Object,required:!0},ctx:{type:Object,required:!0},getPos:{type:Function,required:!0},config:{type:Object,required:!0},onMount:{type:Function,required:!0},node:{type:Object,required:!0}},setup({view:e,node:t,ctx:r,getPos:n,config:i,onMount:s}){const o=zt(),a=P=>{P!=null&&(P instanceof HTMLElement?(o.value=P,s(P)):o.value=void 0)},l=zt(),c=zt(),h=zt(),u=zt(),f=zt(),d=zt(),p=zt([0,0]),m=zt([-1,-1]),g=zt(),y={dragPreviewRef:d,tableWrapperRef:f,contentWrapperRef:o,yLineHandleRef:u,xLineHandleRef:h,colHandleRef:l,rowHandleRef:c,hoverIndex:p,lineHoverIndex:m,dragInfo:g},{pointerLeave:b,pointerMove:x}=p5t(y,e),{dragRow:T,dragCol:S}=h5t(y,r,n),{onAddRow:w,onAddCol:_,selectCol:I,selectRow:N,deleteSelected:L,onAlign:D}=u5t(y,r,n);return y1(()=>{requestAnimationFrame(()=>{e.editable&&o5t(y,e,t.value)})}),()=>et("div",{onDragstart:P=>P.preventDefault(),onDragover:P=>P.preventDefault(),onDragleave:P=>P.preventDefault(),onPointermove:x,onPointerleave:b},et("button",{type:"button","data-show":"false",contenteditable:"false",draggable:"true","data-role":"col-drag-handle",class:"handle cell-handle",onDragstart:S,onClick:I,onPointerdown:P=>P.stopPropagation(),onPointermove:P=>P.stopPropagation(),ref:l},et(_o,{icon:i.renderButton("col_drag_handle")}),et("div",{"data-show":"false",class:"button-group",onPointermove:P=>P.stopPropagation()},et("button",{type:"button",onPointerdown:D("left")},et(_o,{icon:i.renderButton("align_col_left")})),et("button",{type:"button",onPointerdown:D("center")},et(_o,{icon:i.renderButton("align_col_center")})),et("button",{type:"button",onPointerdown:D("right")},et(_o,{icon:i.renderButton("align_col_right")})),et("button",{type:"button",onPointerdown:L},et(_o,{icon:i.renderButton("delete_col")})))),et("button",{type:"button","data-show":"false",contenteditable:"false",draggable:"true","data-role":"row-drag-handle",class:"handle cell-handle",onDragstart:T,onClick:N,onPointerdown:P=>P.stopPropagation(),onPointermove:P=>P.stopPropagation(),ref:c},et(_o,{icon:i.renderButton("row_drag_handle")}),et("div",{"data-show":"false",class:"button-group",onPointermove:P=>P.stopPropagation()},et("button",{type:"button",onPointerdown:L},et(_o,{icon:i.renderButton("delete_row")})))),et("div",{class:"table-wrapper",ref:f},et("div",{"data-show":"false",class:"drag-preview","data-direction":"vertical",ref:d},et("table",null,et("tbody",null))),et("div",{"data-show":"false",contenteditable:"false","data-display-type":"tool","data-role":"x-line-drag-handle",class:"handle line-handle",onPointermove:P=>P.stopPropagation(),ref:h},et("button",{type:"button",onClick:w,class:"add-button"},et(_o,{icon:i.renderButton("add_row")}))),et("div",{"data-show":"false",contenteditable:"false","data-display-type":"tool","data-role":"y-line-drag-handle",class:"handle line-handle",onPointermove:P=>P.stopPropagation(),ref:u},et("button",{type:"button",onClick:_,class:"add-button"},et(_o,{icon:i.renderButton("add_col")}))),et("table",{ref:a,class:"children"})))}});var SV=e=>{throw TypeError(e)},g5t=(e,t,r)=>t.has(e)||SV("Cannot "+r),y5t=(e,t,r)=>t.has(e)?SV("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),b5t=(e,t,r)=>(g5t(e,t,"access private method"),r),t6,TV;class x5t{constructor(t,r,n,i){this.ctx=t,this.node=r,this.view=n,this.getPos=i,y5t(this,t6);const s=document.createElement("div");s.className="milkdown-table-block";const o=document.createElement("tbody");this.contentDOM=o,o.setAttribute("data-content-dom","true"),o.classList.add("content-dom"),this.nodeRef=cx(r);const a=po(m5t,{view:n,ctx:t,getPos:i,config:t.get(H4.key),onMount:l=>{l.appendChild(o)},node:this.nodeRef});a.mount(s),this.app=a,this.dom=s}update(t){return t.type!==this.node.type||t.sameMarkup(this.node)&&t.content.eq(this.node.content)?!1:(this.node=t,this.nodeRef.value=t,!0)}stopEvent(t){if(t.type==="drop"||t.type.startsWith("drag"))return!0;if(t.type==="mousedown"||t.type==="pointerdown"){if(t.target instanceof Element&&t.target.closest("button"))return!0;const r=t.target;if(r instanceof HTMLElement&&(r.closest("th")||r.closest("td"))){const n=t;return b5t(this,t6,TV).call(this,n)}}return!1}ignoreMutation(t){return!this.dom||!this.contentDOM?!0:t.type==="selection"?!1:this.contentDOM===t.target&&t.type==="attributes"?!0:!this.contentDOM.contains(t.target)}destroy(){this.app.unmount(),this.dom.remove(),this.contentDOM.remove()}}t6=new WeakSet;TV=function(e){const t=this.view;if(!t.editable)return!1;const{state:r,dispatch:n}=t,i=t.posAtCoords({left:e.clientX,top:e.clientY});if(!i)return!1;const s=r.doc.resolve(i.inside),o=jo(c=>c.type.name==="table_cell"||c.type.name==="table_header")(s);if(!o)return!1;if(r.selection instanceof Gt){const c=jo(h=>h.type.name==="table_cell"||h.type.name==="table_header")(r.selection.$from);if((c==null?void 0:c.node)===o.node)return!1}const{from:a}=o,l=ie.create(r.doc,a+1);return r.selection.eq(l)?!1:(r.selection instanceof lr?setTimeout(()=>{n(r.tr.setSelection(l).scrollIntoView())},20):requestAnimationFrame(()=>{n(r.tr.setSelection(l).scrollIntoView())}),!0)};const _V=f1(Ec.node,e=>(t,r,n)=>new x5t(e,t,r,n));yV(_V,{displayName:"NodeView<table-block>",group:"TableBlock"});const v5t=[H4,_V];function e6(e){if(!e)return!1;if(Array.isArray(e))return e.length>1?!1:e6(e[0]);const t=e.content;return t?e6(t):e.type==="text"}function w5t(e,t){return Object.assign(e,{meta:{package:"@milkdown/plugin-clipboard",...t}}),e}const MV=Gr(e=>{const t=e.get(Uo);e.update(im,i=>({...i,editable:i.editable??(()=>!0)}));const r=new vr("MILKDOWN_CLIPBOARD");return new xr({key:r,props:{handlePaste:(i,s)=>{var y,b;const o=e.get(rm),a=(b=(y=i.props).editable)==null?void 0:b.call(y,i.state),{clipboardData:l}=s;if(!a||!l||i.state.selection.$from.node().type.spec.code)return!1;const h=l.getData("text/plain"),u=l.getData("vscode-editor-data");if(u){const x=JSON.parse(u),T=x==null?void 0:x.mode;if(h&&T){const{tr:S}=i.state,w=wst("code_block",t);return S.replaceSelectionWith(w.create({language:T})).setSelection(Gt.near(S.doc.resolve(Math.max(0,S.selection.from-2)))).insertText(h.replace(/\r\n?/g,`
`)),i.dispatch(S),!0}}const f=l.getData("text/html");if(f.length===0&&h.length===0)return!1;const d=ru.fromSchema(t);let p;if(f.length===0){const x=o(h);if(!x||typeof x=="string")return!1;p=xu.fromSchema(t).serializeFragment(x.content)}else{const x=document.createElement("template");x.innerHTML=f,p=x.content.cloneNode(!0),x.remove()}const m=d.parseSlice(p),g=xst(m);if(g)return i.dispatch(i.state.tr.replaceSelectionWith(g,!0)),!0;try{return i.dispatch(i.state.tr.replaceSelection(m)),!0}catch{return!1}},clipboardTextSerializer:i=>{const s=e.get(df);if(e6(i.content.toJSON()))return i.content.textBetween(0,i.content.size,`

`);const a=t.topNodeType.createAndFill(void 0,i.content);return a?s(a):""}}})});w5t(MV,{displayName:"Prose<clipboard>"});function e0(e,t){return Object.assign(e,{meta:{package:"@milkdown/plugin-history",...t}}),e}const A9=be("Undo",()=>()=>T4);e0(A9,{displayName:"Command<undo>"});const E9=be("Redo",()=>()=>Cd);e0(E9,{displayName:"Command<redo>"});const L9=er({},"historyProviderConfig");e0(L9,{displayName:"Ctx<historyProviderConfig>"});const AV=Gr(e=>k2t(e.get(L9.key)));e0(AV,{displayName:"Ctx<historyProviderPlugin>"});const O9=Pi("historyKeymap",{Undo:{shortcuts:"Mod-z",command:e=>{const t=e.get(Dt);return()=>t.call(A9.key)}},Redo:{shortcuts:["Mod-y","Shift-Mod-z"],command:e=>{const t=e.get(Dt);return()=>t.call(E9.key)}}});e0(O9.ctx,{displayName:"KeymapCtx<history>"});e0(O9.shortcuts,{displayName:"Keymap<history>"});const k5t=[L9,AV,O9,A9,E9].flat();function C5t(e,t){const{doc:r,selection:n}=e;if(!r||!n||!(n instanceof Gt||n instanceof Oi))return e;const{to:i}=n,s=t.type==="space"?Array(t.size).fill(" ").join(""):"	";return e.insertText(s,i)}const V4=er({type:"space",size:2},"indentConfig");V4.meta={package:"@milkdown/plugin-indent",displayName:"Ctx<indentConfig>"};const EV=SF(e=>({Tab:(t,r)=>{const n=e.get(V4.key),{tr:i}=t,s=C5t(i,n);return s.docChanged?(r==null||r(s),!0):!1}}));EV.meta={package:"@milkdown/plugin-indent",displayName:"Shortcut<indent>"};const S5t=[V4,EV];class LV{constructor(){this.beforeMountedListeners=[],this.mountedListeners=[],this.updatedListeners=[],this.selectionUpdatedListeners=[],this.markdownUpdatedListeners=[],this.blurListeners=[],this.focusListeners=[],this.destroyListeners=[],this.beforeMount=t=>(this.beforeMountedListeners.push(t),this),this.mounted=t=>(this.mountedListeners.push(t),this),this.updated=t=>(this.updatedListeners.push(t),this)}get listeners(){return{beforeMount:this.beforeMountedListeners,mounted:this.mountedListeners,updated:this.updatedListeners,markdownUpdated:this.markdownUpdatedListeners,blur:this.blurListeners,focus:this.focusListeners,destroy:this.destroyListeners,selectionUpdated:this.selectionUpdatedListeners}}markdownUpdated(t){return this.markdownUpdatedListeners.push(t),this}blur(t){return this.blurListeners.push(t),this}focus(t){return this.focusListeners.push(t),this}destroy(t){return this.destroyListeners.push(t),this}selectionUpdated(t){return this.selectionUpdatedListeners.push(t),this}}const Dx=Ie(new LV,"listener"),T5t=new vr("MILKDOWN_LISTENER"),OV=e=>(e.inject(Dx,new LV),async()=>{await e.wait($h);const t=e.get(Dx),{listeners:r}=t;r.beforeMount.forEach(l=>l(e)),await e.wait(nm);const n=e.get(df);let i=null,s=null,o=null;const a=new xr({key:T5t,view:()=>({destroy:()=>{r.destroy.forEach(l=>l(e))}}),props:{handleDOMEvents:{focus:()=>(r.focus.forEach(l=>l(e)),!1),blur:()=>(r.blur.forEach(l=>l(e)),!1)}},state:{init:(l,c)=>{i=c.doc,s=n(c.doc)},apply:l=>{const c=l.selection;return(!o&&c||o&&!c.eq(o))&&(r.selectionUpdated.forEach(u=>{u(e,c,o)}),o=c),!l.docChanged||l.getMeta("addToHistory")===!1?void 0:xv(()=>{const{doc:u}=l;if(r.updated.length>0&&i&&!i.eq(u)&&r.updated.forEach(f=>{f(e,u,i)}),r.markdownUpdated.length>0&&i&&!i.eq(u)){const f=n(u);r.markdownUpdated.forEach(d=>{d(e,f,s)}),s=f}i=u},200)()}}});e.update(hc,l=>l.concat(a)),await e.wait($2),r.mounted.forEach(l=>l(e))});OV.meta={package:"@milkdown/plugin-listener",displayName:"Listener"};const D9=er({shouldAppend:e=>!(!e||["heading","paragraph"].includes(e.type.name)),getNode:e=>e.schema.nodes.paragraph.create()},"trailingConfig");D9.meta={package:"@milkdown/plugin-trailing",displayName:"Ctx<trailingConfig>"};const DV=Gr(e=>{const t=new vr("MILKDOWN_TRAILING"),{shouldAppend:r,getNode:n}=e.get(D9.key),i=new xr({key:t,state:{init:(s,o)=>{const a=o.tr.doc.lastChild;return r(a,o)},apply:(s,o,a,l)=>{if(!s.docChanged)return o;const c=s.doc.lastChild;return r(c,l)}},appendTransaction:(s,o,a)=>{const{doc:l,tr:c}=a,h=n==null?void 0:n(a),u=i.getState(a),f=l.content.size;if(!(!u||!h))return c.insert(f,h)}});return i});DV.meta={package:"@milkdown/plugin-trailing",displayName:"Prose<trailing>"};const _5t=[D9,DV];var Se=(e=>(e.CodeMirror="code-mirror",e.ListItem="list-item",e.LinkTooltip="link-tooltip",e.Cursor="cursor",e.ImageBlock="image-block",e.BlockEdit="block-edit",e.Toolbar="toolbar",e.Placeholder="placeholder",e.Table="table",e.Latex="latex",e))(Se||{});const M5t={cursor:!0,"list-item":!0,"link-tooltip":!0,"image-block":!0,"block-edit":!0,placeholder:!0,toolbar:!0,"code-mirror":!0,table:!0,latex:!0},A5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25ZM8.25 16.625C8.0375 16.625 7.85942 16.5531 7.71575 16.4093C7.57192 16.2654 7.5 16.0872 7.5 15.8748C7.5 15.6621 7.57192 15.484 7.71575 15.3405C7.85942 15.1968 8.0375 15.125 8.25 15.125H15.75C15.9625 15.125 16.1406 15.1969 16.2843 15.3408C16.4281 15.4846 16.5 15.6628 16.5 15.8753C16.5 16.0879 16.4281 16.266 16.2843 16.4095C16.1406 16.5532 15.9625 16.625 15.75 16.625H8.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM8.25 8.875C8.0375 8.875 7.85942 8.80308 7.71575 8.65925C7.57192 8.51542 7.5 8.33725 7.5 8.12475C7.5 7.91208 7.57192 7.734 7.71575 7.5905C7.85942 7.44683 8.0375 7.375 8.25 7.375H15.75C15.9625 7.375 16.1406 7.44692 16.2843 7.59075C16.4281 7.73458 16.5 7.91275 16.5 8.12525C16.5 8.33792 16.4281 8.516 16.2843 8.6595C16.1406 8.80317 15.9625 8.875 15.75 8.875H8.25ZM4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25Z"
    />
  </svg>
`,E5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25ZM4.25 16.625C4.0375 16.625 3.85942 16.5531 3.71575 16.4093C3.57192 16.2654 3.5 16.0872 3.5 15.8748C3.5 15.6621 3.57192 15.484 3.71575 15.3405C3.85942 15.1968 4.0375 15.125 4.25 15.125H13.75C13.9625 15.125 14.1406 15.1969 14.2843 15.3408C14.4281 15.4846 14.5 15.6628 14.5 15.8753C14.5 16.0879 14.4281 16.266 14.2843 16.4095C14.1406 16.5532 13.9625 16.625 13.75 16.625H4.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM4.25 8.875C4.0375 8.875 3.85942 8.80308 3.71575 8.65925C3.57192 8.51542 3.5 8.33725 3.5 8.12475C3.5 7.91208 3.57192 7.734 3.71575 7.5905C3.85942 7.44683 4.0375 7.375 4.25 7.375H13.75C13.9625 7.375 14.1406 7.44692 14.2843 7.59075C14.4281 7.73458 14.5 7.91275 14.5 8.12525C14.5 8.33792 14.4281 8.516 14.2843 8.6595C14.1406 8.80317 13.9625 8.875 13.75 8.875H4.25ZM4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25Z"
    />
  </svg>
`,L5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25ZM10.25 8.875C10.0375 8.875 9.85942 8.80308 9.71575 8.65925C9.57192 8.51542 9.5 8.33725 9.5 8.12475C9.5 7.91208 9.57192 7.734 9.71575 7.5905C9.85942 7.44683 10.0375 7.375 10.25 7.375H19.75C19.9625 7.375 20.1406 7.44692 20.2843 7.59075C20.4281 7.73458 20.5 7.91275 20.5 8.12525C20.5 8.33792 20.4281 8.516 20.2843 8.6595C20.1406 8.80317 19.9625 8.875 19.75 8.875H10.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM10.25 16.625C10.0375 16.625 9.85942 16.5531 9.71575 16.4093C9.57192 16.2654 9.5 16.0872 9.5 15.8748C9.5 15.6621 9.57192 15.484 9.71575 15.3405C9.85942 15.1968 10.0375 15.125 10.25 15.125H19.75C19.9625 15.125 20.1406 15.1969 20.2843 15.3408C20.4281 15.4846 20.5 15.6628 20.5 15.8753C20.5 16.0879 20.4281 16.266 20.2843 16.4095C20.1406 16.5532 19.9625 16.625 19.75 16.625H10.25ZM4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25Z"
    />
  </svg>
`,O5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M8.85758 18.625C8.4358 18.625 8.07715 18.4772 7.78163 18.1817C7.48613 17.8862 7.33838 17.5275 7.33838 17.1058V6.8942C7.33838 6.47242 7.48613 6.11377 7.78163 5.81825C8.07715 5.52275 8.4358 5.375 8.85758 5.375H12.1999C13.2191 5.375 14.1406 5.69231 14.9643 6.32693C15.788 6.96154 16.1999 7.81603 16.1999 8.89038C16.1999 9.63779 16.0194 10.2471 15.6585 10.7183C15.2976 11.1894 14.9088 11.5314 14.4922 11.7442C15.005 11.9211 15.4947 12.2708 15.9614 12.7933C16.428 13.3157 16.6614 14.0192 16.6614 14.9038C16.6614 16.182 16.1902 17.1217 15.2479 17.723C14.3056 18.3243 13.3563 18.625 12.3999 18.625H8.85758ZM9.4883 16.6327H12.3191C13.1063 16.6327 13.6627 16.4141 13.9884 15.9769C14.314 15.5397 14.4768 15.1205 14.4768 14.7192C14.4768 14.3179 14.314 13.8987 13.9884 13.4615C13.6627 13.0243 13.0909 12.8057 12.273 12.8057H9.4883V16.6327ZM9.4883 10.875H12.0826C12.6903 10.875 13.172 10.7013 13.5278 10.3539C13.8836 10.0064 14.0615 9.59037 14.0615 9.10575C14.0615 8.59035 13.8733 8.16918 13.497 7.84225C13.1207 7.51533 12.6595 7.35188 12.1133 7.35188H9.4883V10.875Z"
    />
  </svg>
`,D5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_952_6527)">
      <circle cx="12" cy="12" r="3" />
    </g>
    <defs>
      <clipPath id="clip0_952_6527">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,I5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8070)">
      <path
        d="M4 10.5C3.17 10.5 2.5 11.17 2.5 12C2.5 12.83 3.17 13.5 4 13.5C4.83 13.5 5.5 12.83 5.5 12C5.5 11.17 4.83 10.5 4 10.5ZM4 4.5C3.17 4.5 2.5 5.17 2.5 6C2.5 6.83 3.17 7.5 4 7.5C4.83 7.5 5.5 6.83 5.5 6C5.5 5.17 4.83 4.5 4 4.5ZM4 16.5C3.17 16.5 2.5 17.18 2.5 18C2.5 18.82 3.18 19.5 4 19.5C4.82 19.5 5.5 18.82 5.5 18C5.5 17.18 4.83 16.5 4 16.5ZM8 19H20C20.55 19 21 18.55 21 18C21 17.45 20.55 17 20 17H8C7.45 17 7 17.45 7 18C7 18.55 7.45 19 8 19ZM8 13H20C20.55 13 21 12.55 21 12C21 11.45 20.55 11 20 11H8C7.45 11 7 11.45 7 12C7 12.55 7.45 13 8 13ZM7 6C7 6.55 7.45 7 8 7H20C20.55 7 21 6.55 21 6C21 5.45 20.55 5 20 5H8C7.45 5 7 5.45 7 6Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8070">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,B5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    viewBox="0 0 24 24"
  >
    <path
      fill="currentColor"
      d="M9 22a1 1 0 0 1-1-1v-3H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6.1l-3.7 3.71c-.2.19-.45.29-.7.29zm1-6v3.08L13.08 16H20V4H4v12z"
    />
  </svg>
`,R5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1803_1151)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM10.71 16.29C10.32 16.68 9.69 16.68 9.3 16.29L5.71 12.7C5.32 12.31 5.32 11.68 5.71 11.29C6.1 10.9 6.73 10.9 7.12 11.29L10 14.17L16.88 7.29C17.27 6.9 17.9 6.9 18.29 7.29C18.68 7.68 18.68 8.31 18.29 8.7L10.71 16.29Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1803_1151">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,P5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1803_535)">
      <path
        d="M18 19H6C5.45 19 5 18.55 5 18V6C5 5.45 5.45 5 6 5H18C18.55 5 19 5.45 19 6V18C19 18.55 18.55 19 18 19ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1803_535">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,IV=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    stroke-width="1.5"
    stroke="currentColor"
    class="w-6 h-6"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="M19.5 8.25l-7.5 7.5-7.5-7.5"
    />
  </svg>
`,BV=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1098_15553)">
      <path
        d="M18.3007 5.70973C17.9107 5.31973 17.2807 5.31973 16.8907 5.70973L12.0007 10.5897L7.1107 5.69973C6.7207 5.30973 6.0907 5.30973 5.7007 5.69973C5.3107 6.08973 5.3107 6.71973 5.7007 7.10973L10.5907 11.9997L5.7007 16.8897C5.3107 17.2797 5.3107 17.9097 5.7007 18.2997C6.0907 18.6897 6.7207 18.6897 7.1107 18.2997L12.0007 13.4097L16.8907 18.2997C17.2807 18.6897 17.9107 18.6897 18.3007 18.2997C18.6907 17.9097 18.6907 17.2797 18.3007 16.8897L13.4107 11.9997L18.3007 7.10973C18.6807 6.72973 18.6807 6.08973 18.3007 5.70973Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1098_15553">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,RV=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8081)">
      <path
        d="M9.4 16.6L4.8 12L9.4 7.4L8 6L2 12L8 18L9.4 16.6ZM14.6 16.6L19.2 12L14.6 7.4L16 6L22 12L16 18L14.6 16.6Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8081">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,I9=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
  >
    <g clip-path="url(#clip0_1013_1606)">
      <path
        d="M9.00012 16.1998L5.50012 12.6998C5.11012 12.3098 4.49012 12.3098 4.10012 12.6998C3.71012 13.0898 3.71012 13.7098 4.10012 14.0998L8.29012 18.2898C8.68012 18.6798 9.31012 18.6798 9.70012 18.2898L20.3001 7.69982C20.6901 7.30982 20.6901 6.68982 20.3001 6.29982C19.9101 5.90982 19.2901 5.90982 18.9001 6.29982L9.00012 16.1998Z"
        fill="#817567"
      />
    </g>
    <defs>
      <clipPath id="clip0_1013_1606">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,PV=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    height="24px"
    viewBox="0 -960 960 960"
    width="24px"
    fill="none"
  >
    <path
      d="M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z"
    />
  </svg>
`,N5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7900)">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M19 13H5C4.45 13 4 12.55 4 12C4 11.45 4.45 11 5 11H19C19.55 11 20 11.45 20 12C20 12.55 19.55 13 19 13Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7900">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,gD=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="16"
    height="16"
    viewBox="0 0 16 16"
  >
    <path
      d="M3.5 9.83366C3.35833 9.83366 3.23961 9.78571 3.14383 9.68983C3.04794 9.59394 3 9.47516 3 9.33349C3 9.19171 3.04794 9.07299 3.14383 8.97733C3.23961 8.88155 3.35833 8.83366 3.5 8.83366H12.5C12.6417 8.83366 12.7604 8.8816 12.8562 8.97749C12.9521 9.07338 13 9.19216 13 9.33383C13 9.4756 12.9521 9.59433 12.8562 9.68999C12.7604 9.78577 12.6417 9.83366 12.5 9.83366H3.5ZM3.5 7.16699C3.35833 7.16699 3.23961 7.11905 3.14383 7.02316C3.04794 6.92727 3 6.80849 3 6.66683C3 6.52505 3.04794 6.40633 3.14383 6.31066C3.23961 6.21488 3.35833 6.16699 3.5 6.16699H12.5C12.6417 6.16699 12.7604 6.21494 12.8562 6.31083C12.9521 6.40671 13 6.52549 13 6.66716C13 6.80894 12.9521 6.92766 12.8562 7.02333C12.7604 7.1191 12.6417 7.16699 12.5 7.16699H3.5Z"
    />
  </svg>
`,B9=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1013_1585)">
      <path
        d="M14.06 9.02L14.98 9.94L5.92 19H5V18.08L14.06 9.02ZM17.66 3C17.41 3 17.15 3.1 16.96 3.29L15.13 5.12L18.88 8.87L20.71 7.04C21.1 6.65 21.1 6.02 20.71 5.63L18.37 3.29C18.17 3.09 17.92 3 17.66 3ZM14.06 6.19L3 17.25V21H6.75L17.81 9.94L14.06 6.19Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1013_1585">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,F5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5553)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM12 17H14V7H10V9H12V17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5553">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,$5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5559)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15H11V13H13C14.1 13 15 12.11 15 11V9C15 7.89 14.1 7 13 7H9V9H13V11H11C9.9 11 9 11.89 9 13V17H15V15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5559">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,z5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5565)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15V13.5C15 12.67 14.33 12 13.5 12C14.33 12 15 11.33 15 10.5V9C15 7.89 14.1 7 13 7H9V9H13V11H11V13H13V15H9V17H13C14.1 17 15 16.11 15 15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5565">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,H5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7757)">
      <path
        d="M19.04 3H5.04004C3.94004 3 3.04004 3.9 3.04004 5V19C3.04004 20.1 3.94004 21 5.04004 21H19.04C20.14 21 21.04 20.1 21.04 19V5C21.04 3.9 20.14 3 19.04 3ZM19.04 19H5.04004V5H19.04V19ZM13.04 17H15.04V7H13.04V11H11.04V7H9.04004V13H13.04V17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7757">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,q5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7760)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15V13C15 11.89 14.1 11 13 11H11V9H15V7H9V13H13V15H9V17H13C14.1 17 15 16.11 15 15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7760">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,V5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7763)">
      <path
        d="M11 17H13C14.1 17 15 16.11 15 15V13C15 11.89 14.1 11 13 11H11V9H15V7H11C9.9 7 9 7.89 9 9V15C9 16.11 9.9 17 11 17ZM11 13H13V15H11V13ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7763">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,r6=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8075)">
      <path
        d="M19 5V19H5V5H19ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM14.14 11.86L11.14 15.73L9 13.14L6 17H18L14.14 11.86Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8075">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,W5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M6.29811 18.625C6.04505 18.625 5.83115 18.5375 5.65641 18.3626C5.48166 18.1877 5.39429 17.9736 5.39429 17.7203C5.39429 17.467 5.48166 17.2532 5.65641 17.0788C5.83115 16.9045 6.04505 16.8173 6.29811 16.8173H9.21159L12.452 7.18265H9.53851C9.28545 7.18265 9.07155 7.0952 8.89681 6.9203C8.72206 6.7454 8.63469 6.5313 8.63469 6.278C8.63469 6.02472 8.72206 5.81089 8.89681 5.63652C9.07155 5.46217 9.28545 5.375 9.53851 5.375H16.8847C17.1377 5.375 17.3516 5.46245 17.5264 5.63735C17.7011 5.81225 17.7885 6.02634 17.7885 6.27962C17.7885 6.53293 17.7011 6.74676 17.5264 6.92113C17.3516 7.09548 17.1377 7.18265 16.8847 7.18265H14.2789L11.0385 16.8173H13.6443C13.8973 16.8173 14.1112 16.9048 14.286 17.0797C14.4607 17.2546 14.5481 17.4687 14.5481 17.722C14.5481 17.9752 14.4607 18.1891 14.286 18.3634C14.1112 18.5378 13.8973 18.625 13.6443 18.625H6.29811Z"
    />
  </svg>
`,j5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M17.0385 19.5003V16.5388H14.0769V15.0388H17.0385V12.0773H18.5384V15.0388H21.5V16.5388H18.5384V19.5003H17.0385ZM10.8077 16.5388H7.03845C5.78282 16.5388 4.7125 16.0963 3.8275 15.2114C2.9425 14.3266 2.5 13.2564 2.5 12.0009C2.5 10.7454 2.9425 9.67504 3.8275 8.78979C4.7125 7.90454 5.78282 7.46191 7.03845 7.46191H10.8077V8.96186H7.03845C6.1987 8.96186 5.48235 9.25834 4.8894 9.85129C4.29645 10.4442 3.99998 11.1606 3.99998 12.0003C3.99998 12.8401 4.29645 13.5564 4.8894 14.1494C5.48235 14.7423 6.1987 15.0388 7.03845 15.0388H10.8077V16.5388ZM8.25 12.7503V11.2504H15.75V12.7503H8.25ZM21.5 12.0003H20C20 11.1606 19.7035 10.4442 19.1106 9.85129C18.5176 9.25834 17.8013 8.96186 16.9615 8.96186H13.1923V7.46191H16.9615C18.2171 7.46191 19.2875 7.90441 20.1725 8.78939C21.0575 9.67439 21.5 10.7447 21.5 12.0003Z"
    />
  </svg>
`,U5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_971_7680)">
      <path
        d="M11 18C11 19.1 10.1 20 9 20C7.9 20 7 19.1 7 18C7 16.9 7.9 16 9 16C10.1 16 11 16.9 11 18ZM9 10C7.9 10 7 10.9 7 12C7 13.1 7.9 14 9 14C10.1 14 11 13.1 11 12C11 10.9 10.1 10 9 10ZM9 4C7.9 4 7 4.9 7 6C7 7.1 7.9 8 9 8C10.1 8 11 7.1 11 6C11 4.9 10.1 4 9 4ZM15 8C16.1 8 17 7.1 17 6C17 4.9 16.1 4 15 4C13.9 4 13 4.9 13 6C13 7.1 13.9 8 15 8ZM15 10C13.9 10 13 10.9 13 12C13 13.1 13.9 14 15 14C16.1 14 17 13.1 17 12C17 10.9 16.1 10 15 10ZM15 16C13.9 16 13 16.9 13 18C13 19.1 13.9 20 15 20C16.1 20 17 19.1 17 18C17 16.9 16.1 16 15 16Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_971_7680">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,G5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8067)">
      <path
        d="M8 7H20C20.55 7 21 6.55 21 6C21 5.45 20.55 5 20 5H8C7.45 5 7 5.45 7 6C7 6.55 7.45 7 8 7ZM20 17H8C7.45 17 7 17.45 7 18C7 18.55 7.45 19 8 19H20C20.55 19 21 18.55 21 18C21 17.45 20.55 17 20 17ZM20 11H8C7.45 11 7 11.45 7 12C7 12.55 7.45 13 8 13H20C20.55 13 21 12.55 21 12C21 11.45 20.55 11 20 11ZM4.5 16H2.5C2.22 16 2 16.22 2 16.5C2 16.78 2.22 17 2.5 17H4V17.5H3.5C3.22 17.5 3 17.72 3 18C3 18.28 3.22 18.5 3.5 18.5H4V19H2.5C2.22 19 2 19.22 2 19.5C2 19.78 2.22 20 2.5 20H4.5C4.78 20 5 19.78 5 19.5V16.5C5 16.22 4.78 16 4.5 16ZM2.5 5H3V7.5C3 7.78 3.22 8 3.5 8C3.78 8 4 7.78 4 7.5V4.5C4 4.22 3.78 4 3.5 4H2.5C2.22 4 2 4.22 2 4.5C2 4.78 2.22 5 2.5 5ZM4.5 10H2.5C2.22 10 2 10.22 2 10.5C2 10.78 2.22 11 2.5 11H3.8L2.12 12.96C2.04 13.05 2 13.17 2 13.28V13.5C2 13.78 2.22 14 2.5 14H4.5C4.78 14 5 13.78 5 13.5C5 13.22 4.78 13 4.5 13H3.2L4.88 11.04C4.96 10.95 5 10.83 5 10.72V10.5C5 10.22 4.78 10 4.5 10Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8067">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,n6=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_971_7676)">
      <path
        d="M18 13H13V18C13 18.55 12.55 19 12 19C11.45 19 11 18.55 11 18V13H6C5.45 13 5 12.55 5 12C5 11.45 5.45 11 6 11H11V6C11 5.45 11.45 5 12 5C12.55 5 13 5.45 13 6V11H18C18.55 11 19 11.45 19 12C19 12.55 18.55 13 18 13Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_971_7676">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,K5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7897)">
      <path
        d="M7.17 17C7.68 17 8.15 16.71 8.37 16.26L9.79 13.42C9.93 13.14 10 12.84 10 12.53V8C10 7.45 9.55 7 9 7H5C4.45 7 4 7.45 4 8V12C4 12.55 4.45 13 5 13H7L5.97 15.06C5.52 15.95 6.17 17 7.17 17ZM17.17 17C17.68 17 18.15 16.71 18.37 16.26L19.79 13.42C19.93 13.14 20 12.84 20 12.53V8C20 7.45 19.55 7 19 7H15C14.45 7 14 7.45 14 8V12C14 12.55 14.45 13 15 13H17L15.97 15.06C15.52 15.95 16.17 17 17.17 17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7897">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,i6=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M7.30775 20.4997C6.81058 20.4997 6.385 20.3227 6.031 19.9687C5.677 19.6147 5.5 19.1892 5.5 18.692V5.99973H5.25C5.0375 5.99973 4.85942 5.92782 4.71575 5.78398C4.57192 5.64015 4.5 5.46198 4.5 5.24948C4.5 5.03682 4.57192 4.85873 4.71575 4.71523C4.85942 4.57157 5.0375 4.49973 5.25 4.49973H9C9 4.2549 9.08625 4.04624 9.25875 3.87374C9.43108 3.7014 9.63967 3.61523 9.8845 3.61523H14.1155C14.3603 3.61523 14.5689 3.7014 14.7413 3.87374C14.9138 4.04624 15 4.2549 15 4.49973H18.75C18.9625 4.49973 19.1406 4.57165 19.2843 4.71548C19.4281 4.85932 19.5 5.03748 19.5 5.24998C19.5 5.46265 19.4281 5.64073 19.2843 5.78423C19.1406 5.9279 18.9625 5.99973 18.75 5.99973H18.5V18.692C18.5 19.1892 18.323 19.6147 17.969 19.9687C17.615 20.3227 17.1894 20.4997 16.6923 20.4997H7.30775ZM17 5.99973H7V18.692C7 18.7818 7.02883 18.8556 7.0865 18.9132C7.14417 18.9709 7.21792 18.9997 7.30775 18.9997H16.6923C16.7821 18.9997 16.8558 18.9709 16.9135 18.9132C16.9712 18.8556 17 18.7818 17 18.692V5.99973ZM10.1543 16.9997C10.3668 16.9997 10.5448 16.9279 10.6885 16.7842C10.832 16.6404 10.9037 16.4622 10.9037 16.2497V8.74973C10.9037 8.53723 10.8318 8.35907 10.688 8.21523C10.5443 8.07157 10.3662 7.99973 10.1535 7.99973C9.941 7.99973 9.76292 8.07157 9.61925 8.21523C9.47575 8.35907 9.404 8.53723 9.404 8.74973V16.2497C9.404 16.4622 9.47583 16.6404 9.6195 16.7842C9.76333 16.9279 9.94158 16.9997 10.1543 16.9997ZM13.8465 16.9997C14.059 16.9997 14.2371 16.9279 14.3807 16.7842C14.5243 16.6404 14.596 16.4622 14.596 16.2497V8.74973C14.596 8.53723 14.5242 8.35907 14.3805 8.21523C14.2367 8.07157 14.0584 7.99973 13.8458 7.99973C13.6333 7.99973 13.4552 8.07157 13.3115 8.21523C13.168 8.35907 13.0962 8.53723 13.0962 8.74973V16.2497C13.0962 16.4622 13.1682 16.6404 13.312 16.7842C13.4557 16.9279 13.6338 16.9997 13.8465 16.9997Z"
    />
  </svg>
`,NV=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    stroke-width="1.5"
    stroke="currentColor"
    class="w-6 h-6"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"
    />
  </svg>
`,Y5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M3.25 13.7404C3.0375 13.7404 2.85938 13.6684 2.71563 13.5246C2.57188 13.3808 2.5 13.2026 2.5 12.99C2.5 12.7774 2.57188 12.5993 2.71563 12.4558C2.85938 12.3122 3.0375 12.2404 3.25 12.2404H20.75C20.9625 12.2404 21.1406 12.3123 21.2843 12.4561C21.4281 12.5999 21.5 12.7781 21.5 12.9907C21.5 13.2033 21.4281 13.3814 21.2843 13.525C21.1406 13.6686 20.9625 13.7404 20.75 13.7404H3.25ZM10.9423 10.2596V6.62495H6.5673C6.2735 6.62495 6.02377 6.52201 5.8181 6.31613C5.61245 6.11026 5.50963 5.86027 5.50963 5.56615C5.50963 5.27205 5.61245 5.02083 5.8181 4.8125C6.02377 4.60417 6.2735 4.5 6.5673 4.5H17.4423C17.7361 4.5 17.9858 4.60294 18.1915 4.80883C18.3971 5.01471 18.5 5.2647 18.5 5.5588C18.5 5.85292 18.3971 6.10413 18.1915 6.31245C17.9858 6.52078 17.7361 6.62495 17.4423 6.62495H13.0673V10.2596H10.9423ZM10.9423 15.7211H13.0673V18.4423C13.0673 18.7361 12.9643 18.9858 12.7584 19.1915C12.5526 19.3971 12.3026 19.5 12.0085 19.5C11.7144 19.5 11.4631 19.3962 11.2548 19.1887C11.0465 18.9811 10.9423 18.7291 10.9423 18.4327V15.7211Z"
    />
  </svg>
`,X5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8078)">
      <path
        d="M20 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H20C21.1 21 22 20.1 22 19V5C22 3.9 21.1 3 20 3ZM20 5V8H5V5H20ZM15 19H10V10H15V19ZM5 10H8V19H5V10ZM17 19V10H20V19H17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8078">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,J5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5547)">
      <path
        d="M5 5.5C5 6.33 5.67 7 6.5 7H10.5V17.5C10.5 18.33 11.17 19 12 19C12.83 19 13.5 18.33 13.5 17.5V7H17.5C18.33 7 19 6.33 19 5.5C19 4.67 18.33 4 17.5 4H6.5C5.67 4 5 4.67 5 5.5Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5547">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Z5t=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M5.66936 16.3389L9.39244 12.6158C9.54115 12.4671 9.71679 12.3937 9.91936 12.3957C10.1219 12.3976 10.2975 12.4761 10.4463 12.6312C10.5847 12.7823 10.654 12.9585 10.654 13.1599C10.654 13.3613 10.5847 13.5363 10.4463 13.6851L6.32704 17.8197C6.14627 18.0004 5.93538 18.0908 5.69436 18.0908C5.45333 18.0908 5.24243 18.0004 5.06166 17.8197L3.01744 15.7754C2.87899 15.637 2.81136 15.4629 2.81456 15.2533C2.81776 15.0437 2.88859 14.8697 3.02706 14.7312C3.16551 14.5928 3.34008 14.5235 3.55076 14.5235C3.76144 14.5235 3.93494 14.5928 4.07126 14.7312L5.66936 16.3389ZM5.66936 8.72359L9.39244 5.00049C9.54115 4.85177 9.71679 4.77838 9.91936 4.78031C10.1219 4.78223 10.2975 4.86075 10.4463 5.01586C10.5847 5.16691 10.654 5.34314 10.654 5.54454C10.654 5.74592 10.5847 5.92097 10.4463 6.06969L6.32704 10.2043C6.14627 10.3851 5.93538 10.4755 5.69436 10.4755C5.45333 10.4755 5.24243 10.3851 5.06166 10.2043L3.01744 8.16009C2.87899 8.02162 2.81136 7.84759 2.81456 7.63799C2.81776 7.42837 2.88859 7.25433 3.02706 7.11586C3.16551 6.97741 3.34008 6.90819 3.55076 6.90819C3.76144 6.90819 3.93494 6.97741 4.07126 7.11586L5.66936 8.72359ZM13.7597 16.5581C13.5472 16.5581 13.3691 16.4862 13.2253 16.3424C13.0816 16.1986 13.0097 16.0204 13.0097 15.8078C13.0097 15.5952 13.0816 15.4171 13.2253 15.2735C13.3691 15.13 13.5472 15.0582 13.7597 15.0582H20.7597C20.9722 15.0582 21.1503 15.1301 21.2941 15.2739C21.4378 15.4177 21.5097 15.5959 21.5097 15.8085C21.5097 16.0211 21.4378 16.1992 21.2941 16.3427C21.1503 16.4863 20.9722 16.5581 20.7597 16.5581H13.7597ZM13.7597 8.94276C13.5472 8.94276 13.3691 8.87085 13.2253 8.72704C13.0816 8.58324 13.0097 8.40504 13.0097 8.19244C13.0097 7.97985 13.0816 7.80177 13.2253 7.65819C13.3691 7.5146 13.5472 7.44281 13.7597 7.44281H20.7597C20.9722 7.44281 21.1503 7.51471 21.2941 7.65851C21.4378 7.80233 21.5097 7.98053 21.5097 8.19311C21.5097 8.40571 21.4378 8.5838 21.2941 8.72739C21.1503 8.87097 20.9722 8.94276 20.7597 8.94276H13.7597Z"
    />
  </svg>
`,FV=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    viewBox="0 0 24 24"
  >
    <path
      fill="currentColor"
      d="M7 19v-.808L13.096 12L7 5.808V5h10v1.25H9.102L14.727 12l-5.625 5.77H17V19z"
    />
  </svg>
`,$V=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    height="24px"
    viewBox="0 -960 960 960"
    width="24px"
  >
    <path
      d="m644-428-58-58q9-47-27-88t-93-32l-58-58q17-8 34.5-12t37.5-4q75 0 127.5 52.5T660-500q0 20-4 37.5T644-428Zm128 126-58-56q38-29 67.5-63.5T832-500q-50-101-143.5-160.5T480-720q-29 0-57 4t-55 12l-62-62q41-17 84-25.5t90-8.5q151 0 269 83.5T920-500q-23 59-60.5 109.5T772-302Zm20 246L624-222q-35 11-70.5 16.5T480-200q-151 0-269-83.5T40-500q21-53 53-98.5t73-81.5L56-792l56-56 736 736-56 56ZM222-624q-29 26-53 57t-41 67q50 101 143.5 160.5T480-280q20 0 39-2.5t39-5.5l-36-38q-11 3-21 4.5t-21 1.5q-75 0-127.5-52.5T300-500q0-11 1.5-21t4.5-21l-84-82Zm319 93Zm-151 75Z"
    />
  </svg>
`,Q5t={[Se.CodeMirror]:{theme:jnt,languages:Bnt,expandIcon:IV,searchIcon:NV,clearSearchIcon:BV,searchPlaceholder:"Search language",noResultText:"No result",previewToggleIcon:e=>e?B9:$V}},t3t=Ie([],"FeaturesCtx"),e3t=Ie({},"CrepeCtx");function r3t(e){return e.get("CrepeCtx")}function W4(e){return e.use("FeaturesCtx")}function ca(e){return t=>{W4(t).update(r=>r.includes(e)?r:[...r,e])}}function zV(e){return e.$from.parent.type.name==="code_block"}function HV(e){var t;const r=(t=e.$from.node(e.$from.depth-1))==null?void 0:t.type;return(r==null?void 0:r.name)==="list_item"}var qV=e=>{throw TypeError(e)},VV=(e,t,r)=>t.has(e)||qV("Cannot "+r),R0=(e,t,r)=>(VV(e,t,"read from private field"),r?r.call(e):t.get(e)),yD=(e,t,r)=>t.has(e)?qV("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),n3t=(e,t,r,n)=>(VV(e,t,"write to private field"),t.set(e,r),r),Zu,ob;class WV{constructor(){yD(this,Zu,[]),this.clear=()=>(n3t(this,Zu,[]),this),yD(this,ob,t=>{const r={group:t,addItem:(n,i)=>{const s={...i,key:n};return t.items.push(s),r},clear:()=>(t.items=[],r)};return r}),this.addGroup=(t,r)=>{const i={key:t,label:r,items:[]};return R0(this,Zu).push(i),R0(this,ob).call(this,i)},this.getGroup=t=>{const r=R0(this,Zu).find(n=>n.key===t);if(!r)throw new Error(`Group with key ${t} not found`);return R0(this,ob).call(this,r)},this.build=()=>R0(this,Zu)}}Zu=new WeakMap;ob=new WeakMap;function i3t(e,t,r){var n,i,s,o,a,l,c,h,u,f,d,p,m,g,y,b,x,T,S,w,_,I,N,L,D,P,K,z,$,H,U,q,rt,E,dt,Tt,O,te,Ht,Lt,Xt,de,Ce,xe,Ue,R,W,tt,ut,lt,ct,St,bt,xt,pt,Zt,Ot,Yt,re,J,at,Mt,ne,ge,tr,wr,_r,Tn,qe,Ne,_n,Yr,W1,Rc,Pc,j1,xl,U1,G1,Rr,ua,K1,o0,Lu,a0,l0,Y1,Fi,bo,c0,h0,Ou,u0,ls,f0,d0,p0,m0,X1,Qt,j,wt,qt,nr,Xr,Mr,un,cs,fa,Du,zr,g0,y0,NT,FT,$T,zT,HT,qT;const Iu=r&&W4(r).get(),oX=Iu==null?void 0:Iu.includes(Se.Latex),aX=Iu==null?void 0:Iu.includes(Se.ImageBlock),lX=Iu==null?void 0:Iu.includes(Se.Table),b0=new WV;if((t==null?void 0:t.textGroup)!==null){const Ke=b0.addGroup("text",(i=(n=t==null?void 0:t.textGroup)==null?void 0:n.label)!=null?i:"Text");((s=t==null?void 0:t.textGroup)==null?void 0:s.text)!==null&&Ke.addItem("text",{label:(l=(a=(o=t==null?void 0:t.textGroup)==null?void 0:o.text)==null?void 0:a.label)!=null?l:"Text",icon:(u=(h=(c=t==null?void 0:t.textGroup)==null?void 0:c.text)==null?void 0:h.icon)!=null?u:J5t,onRun:se=>{const ae=se.get(Dt),Ge=uo.type(se);ae.call(fn.key),ae.call(va.key,{nodeType:Ge})}}),((f=t==null?void 0:t.textGroup)==null?void 0:f.h1)!==null&&Ke.addItem("h1",{label:(m=(p=(d=t==null?void 0:t.textGroup)==null?void 0:d.h1)==null?void 0:p.label)!=null?m:"Heading 1",icon:(b=(y=(g=t==null?void 0:t.textGroup)==null?void 0:g.h1)==null?void 0:y.icon)!=null?b:F5t,onRun:se=>{const ae=se.get(Dt),Ge=Dn.type(se);ae.call(fn.key),ae.call(va.key,{nodeType:Ge,attrs:{level:1}})}}),((x=t==null?void 0:t.textGroup)==null?void 0:x.h2)!==null&&Ke.addItem("h2",{label:(w=(S=(T=t==null?void 0:t.textGroup)==null?void 0:T.h2)==null?void 0:S.label)!=null?w:"Heading 2",icon:(N=(I=(_=t==null?void 0:t.textGroup)==null?void 0:_.h2)==null?void 0:I.icon)!=null?N:$5t,onRun:se=>{const ae=se.get(Dt),Ge=Dn.type(se);ae.call(fn.key),ae.call(va.key,{nodeType:Ge,attrs:{level:2}})}}),((L=t==null?void 0:t.textGroup)==null?void 0:L.h3)!==null&&Ke.addItem("h3",{label:(K=(P=(D=t==null?void 0:t.textGroup)==null?void 0:D.h3)==null?void 0:P.label)!=null?K:"Heading 3",icon:(H=($=(z=t==null?void 0:t.textGroup)==null?void 0:z.h3)==null?void 0:$.icon)!=null?H:z5t,onRun:se=>{const ae=se.get(Dt),Ge=Dn.type(se);ae.call(fn.key),ae.call(va.key,{nodeType:Ge,attrs:{level:3}})}}),((U=t==null?void 0:t.textGroup)==null?void 0:U.h4)!==null&&Ke.addItem("h4",{label:(E=(rt=(q=t==null?void 0:t.textGroup)==null?void 0:q.h4)==null?void 0:rt.label)!=null?E:"Heading 4",icon:(O=(Tt=(dt=t==null?void 0:t.textGroup)==null?void 0:dt.h4)==null?void 0:Tt.icon)!=null?O:H5t,onRun:se=>{const ae=se.get(Dt),Ge=Dn.type(se);ae.call(fn.key),ae.call(va.key,{nodeType:Ge,attrs:{level:4}})}}),((te=t==null?void 0:t.textGroup)==null?void 0:te.h5)!==null&&Ke.addItem("h5",{label:(Xt=(Lt=(Ht=t==null?void 0:t.textGroup)==null?void 0:Ht.h5)==null?void 0:Lt.label)!=null?Xt:"Heading 5",icon:(xe=(Ce=(de=t==null?void 0:t.textGroup)==null?void 0:de.h5)==null?void 0:Ce.icon)!=null?xe:q5t,onRun:se=>{const ae=se.get(Dt),Ge=Dn.type(se);ae.call(fn.key),ae.call(va.key,{nodeType:Ge,attrs:{level:5}})}}),((Ue=t==null?void 0:t.textGroup)==null?void 0:Ue.h6)!==null&&Ke.addItem("h6",{label:(tt=(W=(R=t==null?void 0:t.textGroup)==null?void 0:R.h6)==null?void 0:W.label)!=null?tt:"Heading 6",icon:(ct=(lt=(ut=t==null?void 0:t.textGroup)==null?void 0:ut.h6)==null?void 0:lt.icon)!=null?ct:V5t,onRun:se=>{const ae=se.get(Dt),Ge=Dn.type(se);ae.call(fn.key),ae.call(va.key,{nodeType:Ge,attrs:{level:6}})}}),((St=t==null?void 0:t.textGroup)==null?void 0:St.quote)!==null&&Ke.addItem("quote",{label:(pt=(xt=(bt=t==null?void 0:t.textGroup)==null?void 0:bt.quote)==null?void 0:xt.label)!=null?pt:"Quote",icon:(Yt=(Ot=(Zt=t==null?void 0:t.textGroup)==null?void 0:Zt.quote)==null?void 0:Ot.icon)!=null?Yt:K5t,onRun:se=>{const ae=se.get(Dt),Ge=wu.type(se);ae.call(fn.key),ae.call(op.key,{nodeType:Ge})}}),((re=t==null?void 0:t.textGroup)==null?void 0:re.divider)!==null&&Ke.addItem("divider",{label:(Mt=(at=(J=t==null?void 0:t.textGroup)==null?void 0:J.divider)==null?void 0:at.label)!=null?Mt:"Divider",icon:(tr=(ge=(ne=t==null?void 0:t.textGroup)==null?void 0:ne.divider)==null?void 0:ge.icon)!=null?tr:N5t,onRun:se=>{const ae=se.get(Dt),Ge=jd.type(se);ae.call(fn.key),ae.call(ap.key,{nodeType:Ge})}})}if((t==null?void 0:t.listGroup)!==null){const Ke=b0.addGroup("list",(_r=(wr=t==null?void 0:t.listGroup)==null?void 0:wr.label)!=null?_r:"List");((Tn=t==null?void 0:t.listGroup)==null?void 0:Tn.bulletList)!==null&&Ke.addItem("bullet-list",{label:(_n=(Ne=(qe=t==null?void 0:t.listGroup)==null?void 0:qe.bulletList)==null?void 0:Ne.label)!=null?_n:"Bullet List",icon:(Rc=(W1=(Yr=t==null?void 0:t.listGroup)==null?void 0:Yr.bulletList)==null?void 0:W1.icon)!=null?Rc:I5t,onRun:se=>{const ae=se.get(Dt),Ge=Cu.type(se);ae.call(fn.key),ae.call(op.key,{nodeType:Ge})}}),((Pc=t==null?void 0:t.listGroup)==null?void 0:Pc.orderedList)!==null&&Ke.addItem("ordered-list",{label:(U1=(xl=(j1=t==null?void 0:t.listGroup)==null?void 0:j1.orderedList)==null?void 0:xl.label)!=null?U1:"Ordered List",icon:(ua=(Rr=(G1=t==null?void 0:t.listGroup)==null?void 0:G1.orderedList)==null?void 0:Rr.icon)!=null?ua:G5t,onRun:se=>{const ae=se.get(Dt),Ge=Su.type(se);ae.call(fn.key),ae.call(op.key,{nodeType:Ge})}}),((K1=t==null?void 0:t.listGroup)==null?void 0:K1.taskList)!==null&&Ke.addItem("task-list",{label:(a0=(Lu=(o0=t==null?void 0:t.listGroup)==null?void 0:o0.taskList)==null?void 0:Lu.label)!=null?a0:"Task List",icon:(Fi=(Y1=(l0=t==null?void 0:t.listGroup)==null?void 0:l0.taskList)==null?void 0:Y1.icon)!=null?Fi:Z5t,onRun:se=>{const ae=se.get(Dt),Ge=fo.type(se);ae.call(fn.key),ae.call(op.key,{nodeType:Ge,attrs:{checked:!1}})}})}if((t==null?void 0:t.advancedGroup)!==null){const Ke=b0.addGroup("advanced",(c0=(bo=t==null?void 0:t.advancedGroup)==null?void 0:bo.label)!=null?c0:"Advanced");((h0=t==null?void 0:t.advancedGroup)==null?void 0:h0.image)!==null&&aX&&Ke.addItem("image",{label:(ls=(u0=(Ou=t==null?void 0:t.advancedGroup)==null?void 0:Ou.image)==null?void 0:u0.label)!=null?ls:"Image",icon:(p0=(d0=(f0=t==null?void 0:t.advancedGroup)==null?void 0:f0.image)==null?void 0:d0.icon)!=null?p0:r6,onRun:se=>{const ae=se.get(Dt),Ge=y4.type(se);ae.call(fn.key),ae.call(ap.key,{nodeType:Ge})}}),((m0=t==null?void 0:t.advancedGroup)==null?void 0:m0.codeBlock)!==null&&Ke.addItem("code",{label:(j=(Qt=(X1=t==null?void 0:t.advancedGroup)==null?void 0:X1.codeBlock)==null?void 0:Qt.label)!=null?j:"Code",icon:(nr=(qt=(wt=t==null?void 0:t.advancedGroup)==null?void 0:wt.codeBlock)==null?void 0:qt.icon)!=null?nr:RV,onRun:se=>{const ae=se.get(Dt),Ge=ao.type(se);ae.call(fn.key),ae.call(va.key,{nodeType:Ge})}}),((Xr=t==null?void 0:t.advancedGroup)==null?void 0:Xr.table)!==null&&lX&&Ke.addItem("table",{label:(cs=(un=(Mr=t==null?void 0:t.advancedGroup)==null?void 0:Mr.table)==null?void 0:un.label)!=null?cs:"Table",icon:(zr=(Du=(fa=t==null?void 0:t.advancedGroup)==null?void 0:fa.table)==null?void 0:Du.icon)!=null?zr:X5t,onRun:se=>{const ae=se.get(Dt),Ge=se.get(fr);ae.call(fn.key);const{from:cX}=Ge.state.selection;ae.call(ap.key,{nodeType:T8(se,3,3)}),ae.call(i$.key,{pos:cX})}}),((g0=t==null?void 0:t.advancedGroup)==null?void 0:g0.math)!==null&&oX&&Ke.addItem("math",{label:(FT=(NT=(y0=t==null?void 0:t.advancedGroup)==null?void 0:y0.math)==null?void 0:NT.label)!=null?FT:"Math",icon:(HT=(zT=($T=t==null?void 0:t.advancedGroup)==null?void 0:$T.math)==null?void 0:zT.icon)!=null?HT:FV,onRun:se=>{const ae=se.get(Dt),Ge=ao.type(se);ae.call(fn.key),ae.call(ap.key,{nodeType:Ge,attrs:{language:"LaTex"}})}})}(qT=t==null?void 0:t.buildMenu)==null||qT.call(t,b0);let x0=b0.build();e&&(x0=x0.map(Ke=>{const se=Ke.items.filter(ae=>ae.label.toLowerCase().includes(e.toLowerCase()));return{...Ke,items:se}}).filter(Ke=>Ke.items.length>0));const VT=x0.flatMap(Ke=>Ke.items);return VT.forEach((Ke,se)=>{Object.assign(Ke,{index:se})}),x0.reduce((Ke,se)=>{const ae=Ke+se.items.length;return Object.assign(se,{range:[Ke,ae]}),ae},0),{groups:x0,size:VT.length}}const s3t=Sn({props:{ctx:{type:Object,required:!0},show:{type:Object,required:!0},filter:{type:Object,required:!0},hide:{type:Function,required:!0},config:{type:Object,required:!1}},setup({ctx:e,show:t,filter:r,hide:n,config:i}){const s=zt(),o=wd(()=>i3t(r.value,i,e)),a=zt(0),l=zt({x:-999,y:-999}),c=m=>{const{x:g,y}=m;l.value={x:g,y}};Vh([o,t],()=>{const{size:m}=o.value;m===0&&t.value?n():a.value>=m&&(a.value=0)});const h=(m,g)=>{const y=a.value,b=typeof m=="function"?m(y):m;g==null||g(b),a.value=b},u=m=>{var g,y;const b=(g=s.value)==null?void 0:g.querySelector(`[data-index="${m}"]`),x=(y=s.value)==null?void 0:y.querySelector(".menu-groups");!b||!x||(x.scrollTop=b.offsetTop-x.offsetTop)},f=m=>{const g=o.value.groups.flatMap(y=>y.items).at(m);g&&e&&g.onRun(e),n()},d=m=>{const{size:g,groups:y}=o.value;if(m.key==="Escape"){m.preventDefault(),n==null||n();return}if(m.key==="ArrowDown")return m.preventDefault(),h(b=>b<g-1?b+1:b,u);if(m.key==="ArrowUp")return m.preventDefault(),h(b=>b<=0?b:b-1,u);if(m.key==="ArrowLeft")return m.preventDefault(),h(b=>{const x=y.find(S=>S.range[0]<=b&&S.range[1]>b);if(!x)return b;const T=y[y.indexOf(x)-1];return T?T.range[1]-1:b},u);if(m.key==="ArrowRight")return m.preventDefault(),h(b=>{const x=y.find(S=>S.range[0]<=b&&S.range[1]>b);if(!x)return b;const T=y[y.indexOf(x)+1];return T?T.range[0]:b},u);m.key==="Enter"&&(m.preventDefault(),f(a.value))},p=m=>g=>{const y=l.value;if(!y)return;const{x:b,y:x}=g;b===y.x&&x===y.y||h(m)};return Gd(()=>{t.value?window.addEventListener("keydown",d,{capture:!0}):window.removeEventListener("keydown",d,{capture:!0})}),b1(()=>{window.removeEventListener("keydown",d,{capture:!0})}),()=>et("div",{ref:s,onPointerdown:m=>m.preventDefault()},et("nav",{class:"tab-group"},et("ul",null,o.value.groups.map(m=>et("li",{key:m.key,onPointerdown:()=>h(m.range[0],u),class:a.value>=m.range[0]&&a.value<m.range[1]?"selected":""},m.label)))),et("div",{class:"menu-groups",onPointermove:c},o.value.groups.map(m=>et("div",{key:m.key,class:"menu-group"},et("h6",null,m.label),et("ul",null,m.items.map(g=>et("li",{key:g.key,"data-index":g.index,class:a.value===g.index?"hover":"",onPointerenter:p(g.index),onPointerdown:()=>{var y,b;(b=(y=s.value)==null?void 0:y.querySelector(`[data-index="${g.index}"]`))==null||b.classList.add("active")},onPointerup:()=>{var y,b;(b=(y=s.value)==null?void 0:y.querySelector(`[data-index="${g.index}"]`))==null||b.classList.remove("active"),f(g.index)}},et(kd,{icon:g.icon}),et("span",null,g.label))))))))}});var jV=e=>{throw TypeError(e)},UV=(e,t,r)=>t.has(e)||jV("Cannot "+r),Bs=(e,t,r)=>(UV(e,t,"read from private field"),r?r.call(e):t.get(e)),P0=(e,t,r)=>t.has(e)?jV("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Uc=(e,t,r,n)=>(UV(e,t,"write to private field"),t.set(e,r),r),xp,ab,lb,Ca,Qu;const GV=fpt("CREPE_MENU"),R9=er({show:()=>{},hide:()=>{}},"menuAPICtx");function o3t(e,t){e.set(GV.key,{view:r=>new a3t(e,r,t)})}class a3t{constructor(t,r,n){P0(this,xp),P0(this,ab),P0(this,lb),P0(this,Ca),P0(this,Qu,null),this.update=h=>{Bs(this,Ca).update(h)},this.show=h=>{Uc(this,Qu,h),Bs(this,lb).value="",Bs(this,Ca).show()},this.hide=()=>{Uc(this,Qu,null),Bs(this,Ca).hide()},this.destroy=()=>{Bs(this,Ca).destroy(),Bs(this,ab).unmount(),Bs(this,xp).remove()};const i=document.createElement("div");i.classList.add("milkdown-slash-menu");const s=zt(!1),o=zt("");Uc(this,lb,o);const a=this.hide,l=po(s3t,{ctx:t,config:n,show:s,filter:o,hide:a});Uc(this,ab,l),l.mount(i),Uc(this,xp,i);const c=this;Uc(this,Ca,new dpt({content:Bs(this,xp),debounce:20,shouldShow(h){if(zV(h.state.selection)||HV(h.state.selection))return!1;const u=this.getContent(h,d=>["paragraph","heading"].includes(d.type.name));if(u==null||!l3t(h.state.selection))return!1;const f=Bs(c,Qu);if(o.value=u.startsWith("/")?u.slice(1):u,typeof f=="number"){const d=h.state.doc.nodeSize-2,p=Math.min(f,d);return h.state.doc.resolve(p).node()!==h.state.doc.resolve(h.state.selection.from).node()?(Uc(c,Qu,null),!1):!0}return!!u.startsWith("/")},offset:10})),Bs(this,Ca).onShow=()=>{s.value=!0},Bs(this,Ca).onHide=()=>{s.value=!1},this.update(r),t.set(R9.key,{show:h=>this.show(h),hide:()=>this.hide()})}}xp=new WeakMap;ab=new WeakMap;lb=new WeakMap;Ca=new WeakMap;Qu=new WeakMap;function l3t(e){if(!(e instanceof Gt))return!1;const{$head:t}=e,r=t.parent;return t.parentOffset===r.content.size}const c3t=Sn({props:{onAdd:{type:Function,required:!0},addIcon:{type:String,required:!0},handleIcon:{type:String,required:!0}},setup(e){const t=zt();return()=>et(xn,null,et("div",{ref:t,class:"operation-item",onPointerdown:r=>{var n;r.preventDefault(),r.stopPropagation(),(n=t.value)==null||n.classList.add("active")},onPointerup:r=>{var n;r.preventDefault(),r.stopPropagation(),(n=t.value)==null||n.classList.remove("active"),e.onAdd()}},et(kd,{icon:e.addIcon})),et("div",{class:"operation-item"},et(kd,{icon:e.handleIcon})))}});var KV=e=>{throw TypeError(e)},YV=(e,t,r)=>t.has(e)||KV("Cannot "+r),Gc=(e,t,r)=>(YV(e,t,"read from private field"),r?r.call(e):t.get(e)),Yy=(e,t,r)=>t.has(e)?KV("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Xy=(e,t,r,n)=>(YV(e,t,"write to private field"),t.set(e,r),r),cb,eh,hb,ub;class h3t{constructor(t,r){Yy(this,cb),Yy(this,eh),Yy(this,hb),Yy(this,ub),this.update=()=>{Gc(this,eh).update()},this.destroy=()=>{Gc(this,eh).destroy(),Gc(this,cb).remove(),Gc(this,hb).unmount()},this.onAdd=()=>{const c=Gc(this,ub),h=c.get(fr);h.hasFocus()||h.focus();const{state:u,dispatch:f}=h,d=Gc(this,eh).active;if(!d)return;const m=d.$pos.pos+d.node.nodeSize;let g=u.tr.insert(m,uo.type(c).create());g=g.setSelection(Gt.near(g.doc.resolve(m))),f(g.scrollIntoView()),Gc(this,eh).hide(),c.get(R9.key).show(g.selection.from)};var n,i,s;Xy(this,ub,t);const o=document.createElement("div");o.classList.add("milkdown-block-handle");const a=po(c3t,{onAdd:this.onAdd,addIcon:(n=r==null?void 0:r.handleAddIcon)!=null?n:n6,handleIcon:(i=r==null?void 0:r.handleDragIcon)!=null?i:U5t});a.mount(o),Xy(this,hb,a),Xy(this,cb,o);const l=(s=r==null?void 0:r.blockHandle)!=null?s:{};Xy(this,eh,new hft({ctx:t,content:o,getOffset:()=>16,getPlacement:({active:c,blockDom:h})=>{if(c.node.type.name==="heading")return"left";let u=0;c.node.descendants(T=>{u+=T.childCount});const f=c.el,d=f.getBoundingClientRect(),p=h.getBoundingClientRect(),m=window.getComputedStyle(f),g=Number.parseInt(m.paddingTop,10)||0,y=Number.parseInt(m.paddingBottom,10)||0,b=d.height-g-y,x=p.height;return u>2||x<b?"left-start":"left"},...l})),this.update()}}cb=new WeakMap;eh=new WeakMap;hb=new WeakMap;ub=new WeakMap;function u3t(e,t){e.set(Zv.key,{filterNodes:r=>!jo(i=>["table","blockquote","math_inline"].includes(i.type.name))(r)}),e.set(e4.key,{view:()=>new h3t(e,t)})}const f3t=(e,t)=>{e.config(ca(Se.BlockEdit)).config(r=>u3t(r,t)).config(r=>o3t(r,t)).use(R9).use(e4).use(GV)},d3t=(e,t={})=>{e.config(ca(Se.CodeMirror)).config(r=>{const{languages:n=[],theme:i}=t,s=[zd.of(_H.concat(d2t)),kxt];i&&s.push(i),t.extensions&&s.push(...t.extensions),r.update(A1.key,o=>{var a;return{extensions:s,languages:n,expandIcon:t.expandIcon||IV,searchIcon:t.searchIcon||NV,clearSearchIcon:t.clearSearchIcon||BV,searchPlaceholder:t.searchPlaceholder||"Search language",copyText:t.copyText||"Copy",copyIcon:t.copyIcon||PV,onCopy:t.onCopy||(()=>{}),noResultText:t.noResultText||"No result",renderLanguage:t.renderLanguage||o.renderLanguage,renderPreview:t.renderPreview||o.renderPreview,previewToggleButton:l=>{var c,h;const u=((c=t.previewToggleIcon)==null?void 0:c.call(t,l))||(l?B9:$V),f=((h=t.previewToggleText)==null?void 0:h.call(t,l))||(l?"Edit":"Hide");return[u,f].map(d=>d.trim()).join(" ")},previewLabel:t.previewLabel||o.previewLabel,previewLoading:t.previewLoading||o.previewLoading,previewOnlyByDefault:(a=t.previewOnlyByDefault)!=null?a:o.previewOnlyByDefault}})}).use(N2t)},p3t=(e,t)=>{if(e.config(ca(Se.Cursor)).config(n=>{n.update(M4.key,()=>{var i,s;return{class:"crepe-drop-cursor",width:(i=t==null?void 0:t.width)!=null?i:4,color:(s=t==null?void 0:t.color)!=null?s:!1}})}).use(qxt),(t==null?void 0:t.virtual)===!1)return;const r=Vxt();e.use(Gr(()=>r))},m3t=(e,t)=>{e.config(ca(Se.ImageBlock)).config(r=>{r.update(A4.key,n=>{var i,s,o,a,l,c;return{uploadButton:(i=t==null?void 0:t.inlineUploadButton)!=null?i:"Upload",imageIcon:(s=t==null?void 0:t.inlineImageIcon)!=null?s:r6,confirmButton:(o=t==null?void 0:t.inlineConfirmButton)!=null?o:I9,uploadPlaceholderText:(a=t==null?void 0:t.inlineUploadPlaceholderText)!=null?a:"or paste link",onUpload:(c=(l=t==null?void 0:t.inlineOnUpload)!=null?l:t==null?void 0:t.onUpload)!=null?c:n.onUpload,proxyDomURL:t==null?void 0:t.proxyDomURL}}),r.update(g4.key,n=>{var i,s,o,a,l,c,h,u;return{uploadButton:(i=t==null?void 0:t.blockUploadButton)!=null?i:"Upload file",imageIcon:(s=t==null?void 0:t.blockImageIcon)!=null?s:r6,captionIcon:(o=t==null?void 0:t.blockCaptionIcon)!=null?o:B5t,confirmButton:(a=t==null?void 0:t.blockConfirmButton)!=null?a:"Confirm",captionPlaceholderText:(l=t==null?void 0:t.blockCaptionPlaceholderText)!=null?l:"Write Image Caption",uploadPlaceholderText:(c=t==null?void 0:t.blockUploadPlaceholderText)!=null?c:"or paste link",onUpload:(u=(h=t==null?void 0:t.blockOnUpload)!=null?h:t==null?void 0:t.onUpload)!=null?u:n.onUpload,proxyDomURL:t==null?void 0:t.proxyDomURL}})}).use(Qpt).use(nvt)},g3t=ao.extendSchema(e=>t=>{const r=e(t);return{...r,toMarkdown:{match:r.toMarkdown.match,runner:(n,i)=>{var s,o;if(((s=i.attrs.language)!=null?s:"").toLowerCase()==="latex")n.addNode("math",void 0,((o=i.content.firstChild)==null?void 0:o.text)||"");else return r.toMarkdown.runner(n,i)}}}}),vp="math_inline",mg=$r(vp,()=>({group:"inline",inline:!0,draggable:!0,atom:!0,attrs:{value:{default:""}},parseDOM:[{tag:`span[data-type="${vp}"]`,getAttrs:e=>{var t;return{value:(t=e.dataset.value)!=null?t:""}}}],toDOM:e=>{const t=e.attrs.value,r=document.createElement("span");return r.dataset.type=vp,r.dataset.value=t,S9.render(t,r,{throwOnError:!1}),r},parseMarkdown:{match:e=>e.type==="inlineMath",runner:(e,t,r)=>{e.addNode(r,{value:t.value})}},toMarkdown:{match:e=>e.type.name===vp,runner:(e,t)=>{e.addNode("inlineMath",void 0,t.attrs.value)}}})),XV=be("ToggleLatex",e=>()=>(t,r)=>{const{hasNode:n,pos:i,target:s}=zP(t,mg.type(e)),{selection:o,doc:a,tr:l}=t;if(!n){const d=a.textBetween(o.from,o.to);let p=l.replaceSelectionWith(mg.type(e).create({value:d}));return r&&r(p.setSelection(ie.create(p.doc,o.from))),!0}const{from:c,to:h}=o;if(!s||i<0)return!1;let u=l.delete(i,i+1);const f=s.attrs.value;return u=u.insertText(f,i),r&&r(u.setSelection(Gt.create(u.doc,c,h+f.length-1))),!0}),bD=F4("INLINE_LATEX"),y3t=Sn({props:{config:{type:Object,required:!0},innerView:{type:Object,required:!0},updateValue:{type:Object,required:!0}},setup(e){const t=n=>{if(!(!n||!(n instanceof HTMLElement))){for(;n.firstChild;)n.removeChild(n.firstChild);e.innerView.value&&n.appendChild(e.innerView.value.dom)}},r=n=>{n.preventDefault(),e.updateValue.value()};return()=>et("div",{class:"container"},e.innerView&&et("div",{ref:t}),et("button",{type:"button",onPointerdown:r},et(kd,{icon:e.config.inlineEditConfirm})))}});var JV=e=>{throw TypeError(e)},ZV=(e,t,r)=>t.has(e)||JV("Cannot "+r),rn=(e,t,r)=>(ZV(e,t,"read from private field"),r?r.call(e):t.get(e)),Sl=(e,t,r)=>t.has(e)?JV("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Jy=(e,t,r,n)=>(ZV(e,t,"write to private field"),t.set(e,r),r),wp,tf,fb,rh,kp,Cp,s6,o6;class b3t{constructor(t,r,n){this.ctx=t,Sl(this,wp),Sl(this,tf),Sl(this,fb),Sl(this,rh,cx(null)),Sl(this,kp,cx(()=>{})),Sl(this,Cp),Sl(this,s6,()=>{rn(this,rh).value&&(rn(this,rh).value.destroy(),rn(this,rh).value=null)}),Sl(this,o6,s=>{const a=(()=>{const{selection:l,schema:c}=s.state;if(l.empty||!(l instanceof ie))return!1;const h=l.node;if(h.type.name!==vp)return!1;const u=l.from,f=c.nodes.paragraph.create(null,c.text(h.attrs.value)),d=new eS(rn(this,fb),{state:hh.create({doc:f,schema:new pP({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},text:{group:"inline"}}}),plugins:[DN({"Mod-z":T4,"Mod-Z":Cd,"Mod-y":Cd,Enter:()=>(rn(this,kp).value(),!0)})]})});return rn(this,rh).value=d,rn(this,kp).value=()=>{const{tr:p}=s.state;p.setNodeAttribute(u,"value",d.state.doc.textContent),s.dispatch(p),requestAnimationFrame(()=>{s.focus()})},!0})();return a||rn(this,s6).call(this),a}),this.update=(s,o)=>{rn(this,tf).update(s,o)},this.destroy=()=>{rn(this,Cp).unmount(),rn(this,tf).destroy(),rn(this,wp).remove()};const i=document.createElement("div");i.className="milkdown-latex-inline-edit",Jy(this,wp,i),Jy(this,Cp,po(y3t,{config:n,innerView:rn(this,rh),updateValue:rn(this,kp)})),rn(this,Cp).mount(i),Jy(this,tf,new N4({debounce:0,content:rn(this,wp),shouldShow:rn(this,o6),offset:10,floatingUIOptions:{placement:"bottom"}})),rn(this,tf).update(r),Jy(this,fb,document.createElement("div"))}}wp=new WeakMap;tf=new WeakMap;fb=new WeakMap;rh=new WeakMap;kp=new WeakMap;Cp=new WeakMap;s6=new WeakMap;o6=new WeakMap;const x3t=Wn(e=>hst(/(?:\$)([^$]+)(?:\$)$/,mg.type(e),{getAttr:t=>{var r;return{value:(r=t[1])!=null?r:""}}})),v3t=Wn(e=>O7(/^\$\$[\s\n]$/,ao.type(e),()=>({language:"LaTeX"}))),w3t=ia("remarkMath",()=>lwt);function k3t(e){return _c(e,"math",(t,r,n)=>{const{value:i}=t,s={type:"code",lang:"LaTeX",value:i};n.children.splice(r,1,s)})}const C3t=ia("remarkMathBlock",()=>()=>k3t),S3t=(e,t)=>{e.config(ca(Se.Latex)).config(r=>{if(!W4(r).get().includes(Se.CodeMirror))throw new Error("You need to enable CodeMirror to use LaTeX feature");r.update(A1.key,s=>({...s,renderPreview:(o,a,l)=>{if(o.toLowerCase()==="latex"&&a.length>0)return T3t(a,t==null?void 0:t.katexOptions);const c=s.renderPreview;return c(o,a,l)}})),r.set(bD.key,{view:s=>{var o;return new b3t(r,s,{inlineEditConfirm:(o=t==null?void 0:t.inlineEditConfirm)!=null?o:I9,...t})}})}).use(w3t).use(C3t).use(mg).use(bD).use(x3t).use(v3t).use(g3t).use(XV)};function T3t(e,t){return S9.renderToString(e,{...t,throwOnError:!1,displayMode:!0})}const _3t=(e,t)=>{e.config(ca(Se.LinkTooltip)).config($wt).config(r=>{r.update(Ad.key,n=>{var i,s,o,a,l,c;return{...n,linkIcon:(i=t==null?void 0:t.linkIcon)!=null?i:PV,editButton:(s=t==null?void 0:t.editButton)!=null?s:B9,removeButton:(o=t==null?void 0:t.removeButton)!=null?o:i6,confirmButton:(a=t==null?void 0:t.confirmButton)!=null?a:I9,inputPlaceholder:(l=t==null?void 0:t.inputPlaceholder)!=null?l:"Paste link...",onCopyLink:(c=t==null?void 0:t.onCopyLink)!=null?c:()=>{}}})}).use(zwt)};function M3t(e,t){e.set(z4.key,{renderLabel:({label:r,listType:n,checked:i})=>{var s,o,a;return i==null?n==="bullet"?(s=t==null?void 0:t.bulletIcon)!=null?s:D5t:r:i?(o=t==null?void 0:t.checkBoxCheckedIcon)!=null?o:R5t:(a=t==null?void 0:t.checkBoxUncheckedIcon)!=null?a:P5t}})}const A3t=(e,t)=>{e.config(ca(Se.ListItem)).config(r=>M3t(r,t)).use(Gwt)};function E3t(e){var t;return e.childCount<=1&&!((t=e.firstChild)!=null&&t.content.size)}function L3t(e,t){const{selection:r}=e;if(!r.empty)return null;const n=r.$anchor,i=n.parent;if(i.content.size>0||jo(a=>a.type.name==="table")(n))return null;const o=n.before();return jr.node(o,o+i.nodeSize,{class:"crepe-placeholder","data-placeholder":t})}const a6=er({text:"Please enter...",mode:"block"},"placeholderConfigCtx"),O3t=Gr(e=>new xr({key:new vr("CREPE_PLACEHOLDER"),props:{decorations:t=>{var r;if(r3t(e).readonly)return null;const i=e.get(a6.key);if(i.mode==="doc"&&!E3t(t.doc)||zV(t.selection)||HV(t.selection))return null;const s=(r=i.text)!=null?r:"Please enter...",o=L3t(t,s);return o?or.create(t.doc,[o]):null}}})),D3t=(e,t)=>{e.config(ca(Se.Placeholder)).config(r=>{t&&r.update(a6.key,n=>({...n,...t}))}).use(O3t).use(a6)},I3t=(e,t)=>{e.config(ca(Se.Table)).config(r=>{r.update(H4.key,n=>({...n,renderButton:i=>{var s,o,a,l,c,h,u,f,d;switch(i){case"add_row":return(s=t==null?void 0:t.addRowIcon)!=null?s:n6;case"add_col":return(o=t==null?void 0:t.addColIcon)!=null?o:n6;case"delete_row":return(a=t==null?void 0:t.deleteRowIcon)!=null?a:i6;case"delete_col":return(l=t==null?void 0:t.deleteColIcon)!=null?l:i6;case"align_col_left":return(c=t==null?void 0:t.alignLeftIcon)!=null?c:E5t;case"align_col_center":return(h=t==null?void 0:t.alignCenterIcon)!=null?h:A5t;case"align_col_right":return(u=t==null?void 0:t.alignRightIcon)!=null?u:L5t;case"col_drag_handle":return(f=t==null?void 0:t.colDragHandleIcon)!=null?f:gD;case"row_drag_handle":return(d=t==null?void 0:t.rowDragHandleIcon)!=null?d:gD}}}))}).use(v5t)};function B3t(e,t){var r,n,i,s,o,a,l;const c=new WV;c.addGroup("formatting","Formatting").addItem("bold",{icon:(r=e==null?void 0:e.boldIcon)!=null?r:O5t,active:d=>d.get(Dt).call(ju.key,Wd.type(d)),onRun:d=>{d.get(Dt).call(n4.key)}}).addItem("italic",{icon:(n=e==null?void 0:e.italicIcon)!=null?n:W5t,active:d=>d.get(Dt).call(ju.key,vu.type(d)),onRun:d=>{d.get(Dt).call(r4.key)}}).addItem("strikethrough",{icon:(i=e==null?void 0:e.strikethroughIcon)!=null?i:Y5t,active:d=>d.get(Dt).call(ju.key,Yd.type(d)),onRun:d=>{d.get(Dt).call(x4.key)}});const h=c.addGroup("function","Function");h.addItem("code",{icon:(s=e==null?void 0:e.codeIcon)!=null?s:RV,active:d=>d.get(Dt).call(ju.key,qa.type(d)),onRun:d=>{d.get(Dt).call(i4.key)}});const u=t&&W4(t).get();return(u==null?void 0:u.includes(Se.Latex))&&h.addItem("latex",{icon:(o=e==null?void 0:e.latexIcon)!=null?o:FV,active:d=>d.get(Dt).call(ah.key,mg.type(d)),onRun:d=>{d.get(Dt).call(XV.key)}}),h.addItem("link",{icon:(a=e==null?void 0:e.linkIcon)!=null?a:j5t,active:d=>d.get(Dt).call(ju.key,Xs.type(d)),onRun:d=>{d.get(Dt).call(cV.key)}}),(l=e==null?void 0:e.buildToolbar)==null||l.call(e,c),c.build()}const R3t=Sn({props:{ctx:{type:Object,required:!0},hide:{type:Function,required:!0},show:{type:Object,required:!0},selection:{type:Object,required:!0},config:{type:Object,required:!1}},setup(e){const{ctx:t,config:r}=e,n=o=>a=>{a.preventDefault(),t&&o(t)};function i(o){return e.selection.value,t.get(oC).status!==rx.Created?!1:o(t)}const s=wd(()=>B3t(r,t));return()=>et(xn,null,s.value.map(o=>o.items.map(a=>et("button",{type:"button",class:Cn("toolbar-item",t&&i(a.active)&&"active"),onPointerdown:n(a.onRun)},et(kd,{icon:a.icon})))).reduce((o,a,l)=>(l===0?o.push(...a):o.push(et("div",{class:"divider"}),...a),o),[]))}});var QV=e=>{throw TypeError(e)},tW=(e,t,r)=>t.has(e)||QV("Cannot "+r),Hi=(e,t,r)=>(tW(e,t,"read from private field"),r?r.call(e):t.get(e)),N0=(e,t,r)=>t.has(e)?QV("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Zy=(e,t,r,n)=>(tW(e,t,"write to private field"),t.set(e,r),r),Al,Sp,db,Tp,_p;const xD=F4("CREPE_TOOLBAR");class P3t{constructor(t,r,n){N0(this,Al),N0(this,Sp),N0(this,db),N0(this,Tp),N0(this,_p,zt(!1)),this.update=(o,a)=>{Hi(this,Al).update(o,a),Hi(this,Tp).value=o.state.selection},this.destroy=()=>{Hi(this,Al).destroy(),Hi(this,db).unmount(),Hi(this,Sp).remove()},this.hide=()=>{Hi(this,Al).hide()};const i=document.createElement("div");i.className="milkdown-toolbar",Zy(this,Tp,cx(r.state.selection));const s=po(R3t,{ctx:t,hide:this.hide,config:n,selection:Hi(this,Tp),show:Hi(this,_p)});s.mount(i),Zy(this,Sp,i),Zy(this,db,s),Zy(this,Al,new N4({content:Hi(this,Sp),debounce:20,offset:10,shouldShow(o){const{doc:a,selection:l}=o.state,{empty:c,from:h,to:u}=l,f=!a.textBetween(h,u).length&&l instanceof Gt,d=!(l instanceof Gt),p=o.dom.getRootNode().activeElement,m=i.contains(p),g=!o.hasFocus()&&!m,y=!o.editable;return!(g||d||c||f||y)}})),Hi(this,Al).onShow=()=>{Hi(this,_p).value=!0},Hi(this,Al).onHide=()=>{Hi(this,_p).value=!1},this.update(r)}}Al=new WeakMap;Sp=new WeakMap;db=new WeakMap;Tp=new WeakMap;_p=new WeakMap;const N3t=(e,t)=>{e.config(ca(Se.Toolbar)).config(r=>{r.set(xD.key,{view:n=>new P3t(r,n,t)})}).use(xD)};function F3t(e,t,r){switch(e){case Se.CodeMirror:return d3t(t,r);case Se.ListItem:return A3t(t,r);case Se.LinkTooltip:return _3t(t,r);case Se.ImageBlock:return m3t(t,r);case Se.Cursor:return p3t(t,r);case Se.BlockEdit:return f3t(t,r);case Se.Placeholder:return D3t(t,r);case Se.Toolbar:return N3t(t,r);case Se.Table:return I3t(t,r);case Se.Latex:return S3t(t,r)}}var eW=e=>{throw TypeError(e)},rW=(e,t,r)=>t.has(e)||eW("Cannot "+r),qi=(e,t,r)=>(rW(e,t,"read from private field"),r?r.call(e):t.get(e)),u3=(e,t,r)=>t.has(e)?eW("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),f3=(e,t,r,n)=>(rW(e,t,"write to private field"),t.set(e,r),r),Wi,pb,Mp;class $3t{constructor({root:t,defaultValue:r=""}={}){u3(this,Wi),u3(this,pb),u3(this,Mp,!0),this.addFeature=(i,s)=>(i(qi(this,Wi),s),this),this.create=()=>qi(this,Wi).create(),this.destroy=()=>qi(this,Wi).destroy(),this.setReadonly=i=>(f3(this,Mp,!i),qi(this,Wi).action(s=>{qi(this,Wi).status===rx.Created&&s.get(fr).setProps({editable:()=>!i})}),this),this.getMarkdown=()=>qi(this,Wi).action(xut()),this.on=i=>qi(this,Wi).status!==rx.Created?(qi(this,Wi).config(s=>{const o=s.get(Dx);i(o)}),this):(qi(this,Wi).action(s=>{const o=s.get(Dx);i(o)}),this);var n;f3(this,pb,(n=typeof t=="string"?document.querySelector(t):t)!=null?n:document.body),f3(this,Wi,cC.make().config(i=>{i.inject(e3t,this),i.inject(t3t,[])}).config(i=>{i.set(z2,qi(this,pb)),i.set(P2,r),i.set(im,{editable:()=>qi(this,Mp)}),i.update(V4.key,s=>({...s,size:4}))}).use(Rft).use(OV).use(k5t).use(S5t).use(_5t).use(MV).use(eyt))}get editor(){return qi(this,Wi)}get readonly(){return!qi(this,Mp)}}Wi=new WeakMap;pb=new WeakMap;Mp=new WeakMap;class nW extends $3t{constructor({features:t={},featureConfigs:r={},...n}={}){super(n);const i=cQ(r,Q5t);Object.entries({...M5t,...t}).filter(([,o])=>o).map(([o])=>o).forEach(o=>{const a=i[o];F3t(o,this.editor,a)})}}nW.Feature=Se;class z3t{constructor(t,r={}){gt(this,"container");gt(this,"options");gt(this,"crepe",null);gt(this,"currentPath",null);gt(this,"isDirty",!1);gt(this,"saveTimeout",null);gt(this,"lastContent","");gt(this,"initialized",!1);this.container=t,this.options=r}async init(){return await this.createEditor(""),this.initialized=!0,this.container.addEventListener("paste",this.handlePaste.bind(this)),this.container.addEventListener("drop",this.handleDrop.bind(this)),this.container.addEventListener("dragover",t=>t.preventDefault()),this}async createEditor(t){this.crepe&&this.crepe.destroy(),this.container.innerHTML="",this.lastContent=t;const r=this;this.crepe=new nW({root:this.container,defaultValue:t,features:{[Se.CodeMirror]:!0,[Se.ListItem]:!0,[Se.LinkTooltip]:!0,[Se.ImageBlock]:!0,[Se.BlockEdit]:!0,[Se.Toolbar]:!0,[Se.Table]:!0,[Se.Cursor]:!0,[Se.Placeholder]:!0,[Se.Latex]:!0},featureConfigs:{[Se.Placeholder]:{text:"Start writing..."},[Se.Toolbar]:{buildToolbar:n=>{const i=n.getGroup("formatting");i.addItem("heading1",{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12h8"/><path d="M4 18V6"/><path d="M12 18V6"/><path d="M17 12l3-2v8"/></svg>',active:s=>s.get(Dt).call(ah.key,Dn.type(s)),onRun:s=>{s.get(Dt).call(qs.key,1)}}),i.addItem("heading2",{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12h8"/><path d="M4 18V6"/><path d="M12 18V6"/><path d="M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1"/></svg>',active:s=>s.get(Dt).call(ah.key,Dn.type(s)),onRun:s=>{s.get(Dt).call(qs.key,2)}}),i.addItem("heading3",{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12h8"/><path d="M4 18V6"/><path d="M12 18V6"/><path d="M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2"/><path d="M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2"/></svg>',active:s=>s.get(Dt).call(ah.key,Dn.type(s)),onRun:s=>{s.get(Dt).call(qs.key,3)}}),i.addItem("blockquote",{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M7.17 17C7.68 17 8.15 16.71 8.37 16.26L9.79 13.42C9.93 13.14 10 12.84 10 12.53V8C10 7.45 9.55 7 9 7H5C4.45 7 4 7.45 4 8V12C4 12.55 4.45 13 5 13H7L5.97 15.06C5.52 15.95 6.17 17 7.17 17ZM17.17 17C17.68 17 18.15 16.71 18.37 16.26L19.79 13.42C19.93 13.14 20 12.84 20 12.53V8C20 7.45 19.55 7 19 7H15C14.45 7 14 7.45 14 8V12C14 12.55 14.45 13 15 13H17L15.97 15.06C15.52 15.95 16.17 17 17.17 17Z"/></svg>',active:s=>s.get(Dt).call(ah.key,wu.type(s)),onRun:s=>{s.get(Dt).call(a4.key)}}),i.addItem("codeblock",{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="m10 8-3 4 3 4"/><path d="m14 8 3 4-3 4"/></svg>',active:s=>s.get(Dt).call(ah.key,ao.type(s)),onRun:s=>{s.get(Dt).call(l4.key)}})}},[Se.ImageBlock]:{onUpload:async n=>{var i,s,o,a,l,c;try{(s=(i=r.options).onStatus)==null||s.call(i,"Uploading image...");const h=await Le.uploadImage(n);return(a=(o=r.options).onStatus)==null||a.call(o,"Image uploaded"),"/images/"+h.path.replace("assets/","")}catch(h){return console.error("Failed to upload image:",h),(c=(l=r.options).onError)==null||c.call(l,"Failed to upload image: "+h.message),""}}}}}),this.crepe.on(n=>{n.markdownUpdated((i,s,o)=>{s!==o&&r.initialized&&(r.lastContent=s,r.handleChange(s))})}),await this.crepe.create()}async loadFile(t){var r,n;try{console.log("[Editor] Loading file:",t);const i=await Le.getFile(t);console.log("[Editor] File data received, content length:",i.content.length),this.currentPath=t,this.isDirty=!1,await this.setContent(i.content),console.log("[Editor] Content set complete"),(n=(r=this.options).onLoad)==null||n.call(r,t)}catch(i){throw console.error("Failed to load file:",i),i}}async setContent(t){this.lastContent=t,this.crepe&&await this.createEditor(t)}getContent(){return this.crepe?this.crepe.getMarkdown():this.lastContent}handleChange(t){var r,n;this.currentPath&&(this.isDirty=!0,(n=(r=this.options).onChange)==null||n.call(r,this.currentPath,t,!0),this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=window.setTimeout(()=>{this.save()},1e3))}async save(){var t,r,n,i,s,o;if(!(!this.currentPath||!this.isDirty))try{const a=this.getContent();await Le.updateFile(this.currentPath,a),this.isDirty=!1,(r=(t=this.options).onSave)==null||r.call(t,this.currentPath),(i=(n=this.options).onChange)==null||i.call(n,this.currentPath,a,!1)}catch(a){console.error("Failed to save:",a),(o=(s=this.options).onError)==null||o.call(s,"Failed to save: "+a.message)}}async handlePaste(t){var n;const r=(n=t.clipboardData)==null?void 0:n.items;if(r){for(const i of r)if(i.type.startsWith("image/")){t.preventDefault();const s=i.getAsFile();s&&await this.uploadAndInsertImage(s);break}}}async handleDrop(t){var n;const r=(n=t.dataTransfer)==null?void 0:n.files;if(!(!r||r.length===0))for(const i of r)i.type.startsWith("image/")&&(t.preventDefault(),await this.uploadAndInsertImage(i))}async uploadAndInsertImage(t){var r,n,i,s,o,a;try{(n=(r=this.options).onStatus)==null||n.call(r,"Uploading image...");const c="/images/"+(await Le.uploadImage(t)).path.replace("assets/","");if(this.crepe){const h=this.getContent(),u=`![${t.name.replace(/\.[^/.]+$/,"")}](${c})`;await this.setContent(h+`

`+u)}(s=(i=this.options).onStatus)==null||s.call(i,"Image uploaded")}catch(l){console.error("Failed to upload image:",l),(a=(o=this.options).onError)==null||a.call(o,"Failed to upload image: "+l.message)}}focus(){const t=this.container.querySelector(".ProseMirror");t==null||t.focus()}destroy(){var t;this.saveTimeout&&clearTimeout(this.saveTimeout),(t=this.crepe)==null||t.destroy()}getWordCount(){return this.lastContent.replace(/[#*`\[\]()]/g,"").trim().split(/\s+/).filter(n=>n.length>0).length}getCurrentPath(){return this.currentPath}setCurrentPath(t){this.currentPath=t}getHeadings(){const r=this.lastContent.split(`
`),n=[];for(let i=0;i<r.length;i++){const o=r[i].match(/^(#{1,6})\s+(.+)$/);o&&n.push({level:o[1].length,text:o[2].trim(),line:i+1})}return n}scrollToLine(t){const r=this.container.querySelector(".ProseMirror");if(!r)return;const n=r.querySelectorAll("h1, h2, h3, h4, h5, h6"),s=this.lastContent.split(`
`);let o=0;for(let l=0;l<t-1&&l<s.length;l++)s[l].match(/^#{1,6}\s+/)&&o++;const a=n[o];a&&(a.scrollIntoView({behavior:"smooth",block:"start"}),a.classList.add("heading-highlight"),setTimeout(()=>a.classList.remove("heading-highlight"),1500))}}var vD={name:"mermaid",version:"11.12.2",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.13",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},iW={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Blt,function(){var r=1e3,n=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",h="week",u="month",f="quarter",d="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(z){var $=["th","st","nd","rd"],H=z%100;return"["+z+($[(H-20)%10]||$[H]||$[0])+"]"}},x=function(z,$,H){var U=String(z);return!U||U.length>=$?z:""+Array($+1-U.length).join(H)+z},T={s:x,z:function(z){var $=-z.utcOffset(),H=Math.abs($),U=Math.floor(H/60),q=H%60;return($<=0?"+":"-")+x(U,2,"0")+":"+x(q,2,"0")},m:function z($,H){if($.date()<H.date())return-z(H,$);var U=12*(H.year()-$.year())+(H.month()-$.month()),q=$.clone().add(U,u),rt=H-q<0,E=$.clone().add(U+(rt?-1:1),u);return+(-(U+(H-q)/(rt?q-E:E-q))||0)},a:function(z){return z<0?Math.ceil(z)||0:Math.floor(z)},p:function(z){return{M:u,y:d,w:h,d:c,D:p,h:l,m:a,s:o,ms:s,Q:f}[z]||String(z||"").toLowerCase().replace(/s$/,"")},u:function(z){return z===void 0}},S="en",w={};w[S]=b;var _="$isDayjsObject",I=function(z){return z instanceof P||!(!z||!z[_])},N=function z($,H,U){var q;if(!$)return S;if(typeof $=="string"){var rt=$.toLowerCase();w[rt]&&(q=rt),H&&(w[rt]=H,q=rt);var E=$.split("-");if(!q&&E.length>1)return z(E[0])}else{var dt=$.name;w[dt]=$,q=dt}return!U&&q&&(S=q),q||!U&&S},L=function(z,$){if(I(z))return z.clone();var H=typeof $=="object"?$:{};return H.date=z,H.args=arguments,new P(H)},D=T;D.l=N,D.i=I,D.w=function(z,$){return L(z,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var P=function(){function z(H){this.$L=N(H.locale,null,!0),this.parse(H),this.$x=this.$x||H.x||{},this[_]=!0}var $=z.prototype;return $.parse=function(H){this.$d=function(U){var q=U.date,rt=U.utc;if(q===null)return new Date(NaN);if(D.u(q))return new Date;if(q instanceof Date)return new Date(q);if(typeof q=="string"&&!/Z$/i.test(q)){var E=q.match(g);if(E){var dt=E[2]-1||0,Tt=(E[7]||"0").substring(0,3);return rt?new Date(Date.UTC(E[1],dt,E[3]||1,E[4]||0,E[5]||0,E[6]||0,Tt)):new Date(E[1],dt,E[3]||1,E[4]||0,E[5]||0,E[6]||0,Tt)}}return new Date(q)}(H),this.init()},$.init=function(){var H=this.$d;this.$y=H.getFullYear(),this.$M=H.getMonth(),this.$D=H.getDate(),this.$W=H.getDay(),this.$H=H.getHours(),this.$m=H.getMinutes(),this.$s=H.getSeconds(),this.$ms=H.getMilliseconds()},$.$utils=function(){return D},$.isValid=function(){return this.$d.toString()!==m},$.isSame=function(H,U){var q=L(H);return this.startOf(U)<=q&&q<=this.endOf(U)},$.isAfter=function(H,U){return L(H)<this.startOf(U)},$.isBefore=function(H,U){return this.endOf(U)<L(H)},$.$g=function(H,U,q){return D.u(H)?this[U]:this.set(q,H)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(H,U){var q=this,rt=!!D.u(U)||U,E=D.p(H),dt=function(Ce,xe){var Ue=D.w(q.$u?Date.UTC(q.$y,xe,Ce):new Date(q.$y,xe,Ce),q);return rt?Ue:Ue.endOf(c)},Tt=function(Ce,xe){return D.w(q.toDate()[Ce].apply(q.toDate("s"),(rt?[0,0,0,0]:[23,59,59,999]).slice(xe)),q)},O=this.$W,te=this.$M,Ht=this.$D,Lt="set"+(this.$u?"UTC":"");switch(E){case d:return rt?dt(1,0):dt(31,11);case u:return rt?dt(1,te):dt(0,te+1);case h:var Xt=this.$locale().weekStart||0,de=(O<Xt?O+7:O)-Xt;return dt(rt?Ht-de:Ht+(6-de),te);case c:case p:return Tt(Lt+"Hours",0);case l:return Tt(Lt+"Minutes",1);case a:return Tt(Lt+"Seconds",2);case o:return Tt(Lt+"Milliseconds",3);default:return this.clone()}},$.endOf=function(H){return this.startOf(H,!1)},$.$set=function(H,U){var q,rt=D.p(H),E="set"+(this.$u?"UTC":""),dt=(q={},q[c]=E+"Date",q[p]=E+"Date",q[u]=E+"Month",q[d]=E+"FullYear",q[l]=E+"Hours",q[a]=E+"Minutes",q[o]=E+"Seconds",q[s]=E+"Milliseconds",q)[rt],Tt=rt===c?this.$D+(U-this.$W):U;if(rt===u||rt===d){var O=this.clone().set(p,1);O.$d[dt](Tt),O.init(),this.$d=O.set(p,Math.min(this.$D,O.daysInMonth())).$d}else dt&&this.$d[dt](Tt);return this.init(),this},$.set=function(H,U){return this.clone().$set(H,U)},$.get=function(H){return this[D.p(H)]()},$.add=function(H,U){var q,rt=this;H=Number(H);var E=D.p(U),dt=function(te){var Ht=L(rt);return D.w(Ht.date(Ht.date()+Math.round(te*H)),rt)};if(E===u)return this.set(u,this.$M+H);if(E===d)return this.set(d,this.$y+H);if(E===c)return dt(1);if(E===h)return dt(7);var Tt=(q={},q[a]=n,q[l]=i,q[o]=r,q)[E]||1,O=this.$d.getTime()+H*Tt;return D.w(O,this)},$.subtract=function(H,U){return this.add(-1*H,U)},$.format=function(H){var U=this,q=this.$locale();if(!this.isValid())return q.invalidDate||m;var rt=H||"YYYY-MM-DDTHH:mm:ssZ",E=D.z(this),dt=this.$H,Tt=this.$m,O=this.$M,te=q.weekdays,Ht=q.months,Lt=q.meridiem,Xt=function(xe,Ue,R,W){return xe&&(xe[Ue]||xe(U,rt))||R[Ue].slice(0,W)},de=function(xe){return D.s(dt%12||12,xe,"0")},Ce=Lt||function(xe,Ue,R){var W=xe<12?"AM":"PM";return R?W.toLowerCase():W};return rt.replace(y,function(xe,Ue){return Ue||function(R){switch(R){case"YY":return String(U.$y).slice(-2);case"YYYY":return D.s(U.$y,4,"0");case"M":return O+1;case"MM":return D.s(O+1,2,"0");case"MMM":return Xt(q.monthsShort,O,Ht,3);case"MMMM":return Xt(Ht,O);case"D":return U.$D;case"DD":return D.s(U.$D,2,"0");case"d":return String(U.$W);case"dd":return Xt(q.weekdaysMin,U.$W,te,2);case"ddd":return Xt(q.weekdaysShort,U.$W,te,3);case"dddd":return te[U.$W];case"H":return String(dt);case"HH":return D.s(dt,2,"0");case"h":return de(1);case"hh":return de(2);case"a":return Ce(dt,Tt,!0);case"A":return Ce(dt,Tt,!1);case"m":return String(Tt);case"mm":return D.s(Tt,2,"0");case"s":return String(U.$s);case"ss":return D.s(U.$s,2,"0");case"SSS":return D.s(U.$ms,3,"0");case"Z":return E}return null}(xe)||E.replace(":","")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(H,U,q){var rt,E=this,dt=D.p(U),Tt=L(H),O=(Tt.utcOffset()-this.utcOffset())*n,te=this-Tt,Ht=function(){return D.m(E,Tt)};switch(dt){case d:rt=Ht()/12;break;case u:rt=Ht();break;case f:rt=Ht()/3;break;case h:rt=(te-O)/6048e5;break;case c:rt=(te-O)/864e5;break;case l:rt=te/i;break;case a:rt=te/n;break;case o:rt=te/r;break;default:rt=te}return q?rt:D.a(rt)},$.daysInMonth=function(){return this.endOf(u).$D},$.$locale=function(){return w[this.$L]},$.locale=function(H,U){if(!H)return this.$L;var q=this.clone(),rt=N(H,U,!0);return rt&&(q.$L=rt),q},$.clone=function(){return D.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},z}(),K=P.prototype;return L.prototype=K,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",u],["$y",d],["$D",p]].forEach(function(z){K[z[1]]=function($){return this.$g($,z[0],z[1])}}),L.extend=function(z,$){return z.$i||(z($,P,L),z.$i=!0),L},L.locale=N,L.isDayjs=I,L.unix=function(z){return L(1e3*z)},L.en=w[S],L.Ls=w,L.p={},L})})(iW);var H3t=iW.exports;const q3t=bN(H3t);var sW=Object.defineProperty,k=(e,t)=>sW(e,"name",{value:t,configurable:!0}),V3t=(e,t)=>{for(var r in t)sW(e,r,{get:t[r],enumerable:!0})},ya={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},ht={trace:k((...e)=>{},"trace"),debug:k((...e)=>{},"debug"),info:k((...e)=>{},"info"),warn:k((...e)=>{},"warn"),error:k((...e)=>{},"error"),fatal:k((...e)=>{},"fatal")},P9=k(function(e="fatal"){let t=ya.fatal;typeof e=="string"?e.toLowerCase()in ya&&(t=ya[e]):typeof e=="number"&&(t=e),ht.trace=()=>{},ht.debug=()=>{},ht.info=()=>{},ht.warn=()=>{},ht.error=()=>{},ht.fatal=()=>{},t<=ya.fatal&&(ht.fatal=console.error?console.error.bind(console,hs("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",hs("FATAL"))),t<=ya.error&&(ht.error=console.error?console.error.bind(console,hs("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",hs("ERROR"))),t<=ya.warn&&(ht.warn=console.warn?console.warn.bind(console,hs("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",hs("WARN"))),t<=ya.info&&(ht.info=console.info?console.info.bind(console,hs("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",hs("INFO"))),t<=ya.debug&&(ht.debug=console.debug?console.debug.bind(console,hs("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",hs("DEBUG"))),t<=ya.trace&&(ht.trace=console.debug?console.debug.bind(console,hs("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",hs("TRACE")))},"setLogLevel"),hs=k(e=>`%c${q3t().format("ss.SSS")} : ${e} : `,"format");const mb={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e),hsl2rgb:({h:e,s:t,l:r},n)=>{if(!t)return r*2.55;e/=360,t/=100,r/=100;const i=r<.5?r*(1+t):r+t-r*t,s=2*r-i;switch(n){case"r":return mb.hue2rgb(s,i,e+1/3)*255;case"g":return mb.hue2rgb(s,i,e)*255;case"b":return mb.hue2rgb(s,i,e-1/3)*255}},rgb2hsl:({r:e,g:t,b:r},n)=>{e/=255,t/=255,r/=255;const i=Math.max(e,t,r),s=Math.min(e,t,r),o=(i+s)/2;if(n==="l")return o*100;if(i===s)return 0;const a=i-s,l=o>.5?a/(2-i-s):a/(i+s);if(n==="s")return l*100;switch(i){case e:return((t-r)/a+(t<r?6:0))*60;case t:return((r-e)/a+2)*60;case r:return((e-t)/a+4)*60;default:return-1}}},W3t={clamp:(e,t,r)=>t>r?Math.min(t,Math.max(r,e)):Math.min(r,Math.max(t,e)),round:e=>Math.round(e*1e10)/1e10},j3t={dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}},ve={channel:mb,lang:W3t,unit:j3t},El={};for(let e=0;e<=255;e++)El[e]=ve.unit.dec2hex(e);const Mn={ALL:0,RGB:1,HSL:2};class U3t{constructor(){this.type=Mn.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=Mn.ALL}is(t){return this.type===t}}class G3t{constructor(t,r){this.color=r,this.changed=!1,this.data=t,this.type=new U3t}set(t,r){return this.color=r,this.changed=!1,this.data=t,this.type.type=Mn.ALL,this}_ensureHSL(){const t=this.data,{h:r,s:n,l:i}=t;r===void 0&&(t.h=ve.channel.rgb2hsl(t,"h")),n===void 0&&(t.s=ve.channel.rgb2hsl(t,"s")),i===void 0&&(t.l=ve.channel.rgb2hsl(t,"l"))}_ensureRGB(){const t=this.data,{r,g:n,b:i}=t;r===void 0&&(t.r=ve.channel.hsl2rgb(t,"r")),n===void 0&&(t.g=ve.channel.hsl2rgb(t,"g")),i===void 0&&(t.b=ve.channel.hsl2rgb(t,"b"))}get r(){const t=this.data,r=t.r;return!this.type.is(Mn.HSL)&&r!==void 0?r:(this._ensureHSL(),ve.channel.hsl2rgb(t,"r"))}get g(){const t=this.data,r=t.g;return!this.type.is(Mn.HSL)&&r!==void 0?r:(this._ensureHSL(),ve.channel.hsl2rgb(t,"g"))}get b(){const t=this.data,r=t.b;return!this.type.is(Mn.HSL)&&r!==void 0?r:(this._ensureHSL(),ve.channel.hsl2rgb(t,"b"))}get h(){const t=this.data,r=t.h;return!this.type.is(Mn.RGB)&&r!==void 0?r:(this._ensureRGB(),ve.channel.rgb2hsl(t,"h"))}get s(){const t=this.data,r=t.s;return!this.type.is(Mn.RGB)&&r!==void 0?r:(this._ensureRGB(),ve.channel.rgb2hsl(t,"s"))}get l(){const t=this.data,r=t.l;return!this.type.is(Mn.RGB)&&r!==void 0?r:(this._ensureRGB(),ve.channel.rgb2hsl(t,"l"))}get a(){return this.data.a}set r(t){this.type.set(Mn.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(Mn.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(Mn.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(Mn.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(Mn.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(Mn.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}}const j4=new G3t({r:0,g:0,b:0,a:0},"transparent"),Cf={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(e.charCodeAt(0)!==35)return;const t=e.match(Cf.re);if(!t)return;const r=t[1],n=parseInt(r,16),i=r.length,s=i%4===0,o=i>4,a=o?1:17,l=o?8:4,c=s?0:-1,h=o?255:15;return j4.set({r:(n>>l*(c+3)&h)*a,g:(n>>l*(c+2)&h)*a,b:(n>>l*(c+1)&h)*a,a:s?(n&h)*a/255:1},e)},stringify:e=>{const{r:t,g:r,b:n,a:i}=e;return i<1?`#${El[Math.round(t)]}${El[Math.round(r)]}${El[Math.round(n)]}${El[Math.round(i*255)]}`:`#${El[Math.round(t)]}${El[Math.round(r)]}${El[Math.round(n)]}`}},gh={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match(gh.hueRe);if(t){const[,r,n]=t;switch(n){case"grad":return ve.channel.clamp.h(parseFloat(r)*.9);case"rad":return ve.channel.clamp.h(parseFloat(r)*180/Math.PI);case"turn":return ve.channel.clamp.h(parseFloat(r)*360)}}return ve.channel.clamp.h(parseFloat(e))},parse:e=>{const t=e.charCodeAt(0);if(t!==104&&t!==72)return;const r=e.match(gh.re);if(!r)return;const[,n,i,s,o,a]=r;return j4.set({h:gh._hue2deg(n),s:ve.channel.clamp.s(parseFloat(i)),l:ve.channel.clamp.l(parseFloat(s)),a:o?ve.channel.clamp.a(a?parseFloat(o)/100:parseFloat(o)):1},e)},stringify:e=>{const{h:t,s:r,l:n,a:i}=e;return i<1?`hsla(${ve.lang.round(t)}, ${ve.lang.round(r)}%, ${ve.lang.round(n)}%, ${i})`:`hsl(${ve.lang.round(t)}, ${ve.lang.round(r)}%, ${ve.lang.round(n)}%)`}},xm={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=xm.colors[e];if(t)return Cf.parse(t)},stringify:e=>{const t=Cf.stringify(e);for(const r in xm.colors)if(xm.colors[r]===t)return r}},Ap={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const t=e.charCodeAt(0);if(t!==114&&t!==82)return;const r=e.match(Ap.re);if(!r)return;const[,n,i,s,o,a,l,c,h]=r;return j4.set({r:ve.channel.clamp.r(i?parseFloat(n)*2.55:parseFloat(n)),g:ve.channel.clamp.g(o?parseFloat(s)*2.55:parseFloat(s)),b:ve.channel.clamp.b(l?parseFloat(a)*2.55:parseFloat(a)),a:c?ve.channel.clamp.a(h?parseFloat(c)/100:parseFloat(c)):1},e)},stringify:e=>{const{r:t,g:r,b:n,a:i}=e;return i<1?`rgba(${ve.lang.round(t)}, ${ve.lang.round(r)}, ${ve.lang.round(n)}, ${ve.lang.round(i)})`:`rgb(${ve.lang.round(t)}, ${ve.lang.round(r)}, ${ve.lang.round(n)})`}},ta={format:{keyword:xm,hex:Cf,rgb:Ap,rgba:Ap,hsl:gh,hsla:gh},parse:e=>{if(typeof e!="string")return e;const t=Cf.parse(e)||Ap.parse(e)||gh.parse(e)||xm.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(Mn.HSL)||e.data.r===void 0?gh.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?Ap.stringify(e):Cf.stringify(e)},oW=(e,t)=>{const r=ta.parse(e);for(const n in t)r[n]=ve.channel.clamp[n](t[n]);return ta.stringify(r)},vm=(e,t,r=0,n=1)=>{if(typeof e!="number")return oW(e,{a:t});const i=j4.set({r:ve.channel.clamp.r(e),g:ve.channel.clamp.g(t),b:ve.channel.clamp.b(r),a:ve.channel.clamp.a(n)});return ta.stringify(i)},K3t=e=>{const{r:t,g:r,b:n}=ta.parse(e),i=.2126*ve.channel.toLinear(t)+.7152*ve.channel.toLinear(r)+.0722*ve.channel.toLinear(n);return ve.lang.round(i)},Y3t=e=>K3t(e)>=.5,P1=e=>!Y3t(e),aW=(e,t,r)=>{const n=ta.parse(e),i=n[t],s=ve.channel.clamp[t](i+r);return i!==s&&(n[t]=s),ta.stringify(n)},Vt=(e,t)=>aW(e,"l",t),oe=(e,t)=>aW(e,"l",-t),Y=(e,t)=>{const r=ta.parse(e),n={};for(const i in t)t[i]&&(n[i]=r[i]+t[i]);return oW(e,n)},X3t=(e,t,r=50)=>{const{r:n,g:i,b:s,a:o}=ta.parse(e),{r:a,g:l,b:c,a:h}=ta.parse(t),u=r/100,f=u*2-1,d=o-h,m=((f*d===-1?f:(f+d)/(1+f*d))+1)/2,g=1-m,y=n*m+a*g,b=i*m+l*g,x=s*m+c*g,T=o*u+h*(1-u);return vm(y,b,x,T)},Et=(e,t=100)=>{const r=ta.parse(e);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,X3t(r,e,t)};var lW=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,wm=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,J3t=/\s*%%.*\n/gm,td,cW=(td=class extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}},k(td,"UnknownDiagramError"),td),hu={},N9=k(function(e,t){e=e.replace(lW,"").replace(wm,"").replace(J3t,`
`);for(const[r,{detector:n}]of Object.entries(hu))if(n(e,t))return r;throw new cW(`No diagram type detected matching given configuration for text: ${e}`)},"detectType"),l6=k((...e)=>{for(const{id:t,detector:r,loader:n}of e)hW(t,r,n)},"registerLazyLoadedDiagrams"),hW=k((e,t,r)=>{hu[e]&&ht.warn(`Detector with key ${e} already exists. Overwriting.`),hu[e]={detector:t,loader:r},ht.debug(`Detector with key ${e} added${r?" with loader":""}`)},"addDetector"),Z3t=k(e=>hu[e].loader,"getDiagramLoader"),c6=k((e,t,{depth:r=2,clobber:n=!1}={})=>{const i={depth:r,clobber:n};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(s=>c6(e,s,i)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(s=>{e.includes(s)||e.push(s)}),e):e===void 0||r<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(s=>{typeof t[s]=="object"&&(e[s]===void 0||typeof e[s]=="object")?(e[s]===void 0&&(e[s]=Array.isArray(t[s])?[]:{}),e[s]=c6(e[s],t[s],{depth:r-1,clobber:n})):(n||typeof e[s]!="object"&&typeof t[s]!="object")&&(e[s]=t[s])}),e)},"assignWithDepth"),Zr=c6,U4="#ffffff",G4="#f2f2f2",ri=k((e,t)=>t?Y(e,{s:-40,l:10}):Y(e,{s:-40,l:-10}),"mkBorder"),ed,Q3t=(ed=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var r,n,i,s,o,a,l,c,h,u,f,d,p,m,g,y,b,x,T,S,w;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||Y(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||Y(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||ri(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||ri(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||ri(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||ri(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||Et(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||Et(this.tertiaryColor),this.lineColor=this.lineColor||Et(this.background),this.arrowheadColor=this.arrowheadColor||Et(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?oe(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||oe(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||Et(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||Vt(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||oe(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||oe(this.mainBkg,10)):(this.rowOdd=this.rowOdd||Vt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Vt(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Y(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Y(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Y(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Y(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Y(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Y(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||Y(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Y(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Y(this.primaryColor,{h:330}),this.darkMode)for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScale"+_]=oe(this["cScale"+_],75);else for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScale"+_]=oe(this["cScale"+_],25);for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScaleInv"+_]=this["cScaleInv"+_]||Et(this["cScale"+_]);for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this.darkMode?this["cScalePeer"+_]=this["cScalePeer"+_]||Vt(this["cScale"+_],10):this["cScalePeer"+_]=this["cScalePeer"+_]||oe(this["cScale"+_],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScaleLabel"+_]=this["cScaleLabel"+_]||this.scaleLabelColor;const t=this.darkMode?-4:-1;for(let _=0;_<5;_++)this["surface"+_]=this["surface"+_]||Y(this.mainBkg,{h:180,s:-15,l:t*(5+_*3)}),this["surfacePeer"+_]=this["surfacePeer"+_]||Y(this.mainBkg,{h:180,s:-15,l:t*(8+_*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||Y(this.primaryColor,{h:64}),this.fillType3=this.fillType3||Y(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||Y(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||Y(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||Y(this.primaryColor,{h:128}),this.fillType7=this.fillType7||Y(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Y(this.primaryColor,{l:-10}),this.pie5=this.pie5||Y(this.secondaryColor,{l:-10}),this.pie6=this.pie6||Y(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||Y(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Y(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Y(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Y(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||Y(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||Y(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:((r=this.radar)==null?void 0:r.axisColor)||this.lineColor,axisStrokeWidth:((n=this.radar)==null?void 0:n.axisStrokeWidth)||2,axisLabelFontSize:((i=this.radar)==null?void 0:i.axisLabelFontSize)||12,curveOpacity:((s=this.radar)==null?void 0:s.curveOpacity)||.5,curveStrokeWidth:((o=this.radar)==null?void 0:o.curveStrokeWidth)||2,graticuleColor:((a=this.radar)==null?void 0:a.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((l=this.radar)==null?void 0:l.graticuleStrokeWidth)||1,graticuleOpacity:((c=this.radar)==null?void 0:c.graticuleOpacity)||.3,legendBoxSize:((h=this.radar)==null?void 0:h.legendBoxSize)||12,legendFontSize:((u=this.radar)==null?void 0:u.legendFontSize)||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Y(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Y(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Y(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Y(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Y(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Y(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||P1(this.quadrant1Fill)?Vt(this.quadrant1Fill):oe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((f=this.xyChart)==null?void 0:f.backgroundColor)||this.background,titleColor:((d=this.xyChart)==null?void 0:d.titleColor)||this.primaryTextColor,xAxisTitleColor:((p=this.xyChart)==null?void 0:p.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((m=this.xyChart)==null?void 0:m.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((g=this.xyChart)==null?void 0:g.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((y=this.xyChart)==null?void 0:y.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((b=this.xyChart)==null?void 0:b.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((x=this.xyChart)==null?void 0:x.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((T=this.xyChart)==null?void 0:T.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((S=this.xyChart)==null?void 0:S.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((w=this.xyChart)==null?void 0:w.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?oe(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Y(this.primaryColor,{h:-30}),this.git4=this.git4||Y(this.primaryColor,{h:-60}),this.git5=this.git5||Y(this.primaryColor,{h:-90}),this.git6=this.git6||Y(this.primaryColor,{h:60}),this.git7=this.git7||Y(this.primaryColor,{h:120}),this.darkMode?(this.git0=Vt(this.git0,25),this.git1=Vt(this.git1,25),this.git2=Vt(this.git2,25),this.git3=Vt(this.git3,25),this.git4=Vt(this.git4,25),this.git5=Vt(this.git5,25),this.git6=Vt(this.git6,25),this.git7=Vt(this.git7,25)):(this.git0=oe(this.git0,25),this.git1=oe(this.git1,25),this.git2=oe(this.git2,25),this.git3=oe(this.git3,25),this.git4=oe(this.git4,25),this.git5=oe(this.git5,25),this.git6=oe(this.git6,25),this.git7=oe(this.git7,25)),this.gitInv0=this.gitInv0||Et(this.git0),this.gitInv1=this.gitInv1||Et(this.git1),this.gitInv2=this.gitInv2||Et(this.git2),this.gitInv3=this.gitInv3||Et(this.git3),this.gitInv4=this.gitInv4||Et(this.git4),this.gitInv5=this.gitInv5||Et(this.git5),this.gitInv6=this.gitInv6||Et(this.git6),this.gitInv7=this.gitInv7||Et(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||U4,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||G4}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},k(ed,"Theme"),ed),tkt=k(e=>{const t=new Q3t;return t.calculate(e),t},"getThemeVariables"),rd,ekt=(rd=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=Vt(this.primaryColor,16),this.tertiaryColor=Y(this.primaryColor,{h:-160}),this.primaryBorderColor=Et(this.background),this.secondaryBorderColor=ri(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ri(this.tertiaryColor,this.darkMode),this.primaryTextColor=Et(this.primaryColor),this.secondaryTextColor=Et(this.secondaryColor),this.tertiaryTextColor=Et(this.tertiaryColor),this.lineColor=Et(this.background),this.textColor=Et(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=Vt(Et("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=vm(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=oe("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=oe(this.sectionBkgColor,10),this.taskBorderColor=vm(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=vm(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Vt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||oe(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var t,r,n,i,s,o,a,l,c,h,u,f,d,p,m,g,y,b,x,T,S;this.secondBkg=Vt(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=Vt(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=Vt(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Y(this.primaryColor,{h:64}),this.fillType3=Y(this.secondaryColor,{h:64}),this.fillType4=Y(this.primaryColor,{h:-64}),this.fillType5=Y(this.secondaryColor,{h:-64}),this.fillType6=Y(this.primaryColor,{h:128}),this.fillType7=Y(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Y(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Y(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Y(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Y(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Y(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Y(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Y(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Y(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Y(this.primaryColor,{h:330});for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleInv"+w]=this["cScaleInv"+w]||Et(this["cScale"+w]);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScalePeer"+w]=this["cScalePeer"+w]||Vt(this["cScale"+w],10);for(let w=0;w<5;w++)this["surface"+w]=this["surface"+w]||Y(this.mainBkg,{h:30,s:-30,l:-(-10+w*4)}),this["surfacePeer"+w]=this["surfacePeer"+w]||Y(this.mainBkg,{h:30,s:-30,l:-(-7+w*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleLabel"+w]=this["cScaleLabel"+w]||this.scaleLabelColor;for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["pie"+w]=this["cScale"+w];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Y(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Y(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Y(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Y(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Y(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Y(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||P1(this.quadrant1Fill)?Vt(this.quadrant1Fill):oe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((n=this.xyChart)==null?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((a=this.xyChart)==null?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((h=this.xyChart)==null?void 0:h.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((u=this.xyChart)==null?void 0:u.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:((f=this.radar)==null?void 0:f.axisColor)||this.lineColor,axisStrokeWidth:((d=this.radar)==null?void 0:d.axisStrokeWidth)||2,axisLabelFontSize:((p=this.radar)==null?void 0:p.axisLabelFontSize)||12,curveOpacity:((m=this.radar)==null?void 0:m.curveOpacity)||.5,curveStrokeWidth:((g=this.radar)==null?void 0:g.curveStrokeWidth)||2,graticuleColor:((y=this.radar)==null?void 0:y.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((b=this.radar)==null?void 0:b.graticuleStrokeWidth)||1,graticuleOpacity:((x=this.radar)==null?void 0:x.graticuleOpacity)||.3,legendBoxSize:((T=this.radar)==null?void 0:T.legendBoxSize)||12,legendFontSize:((S=this.radar)==null?void 0:S.legendFontSize)||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?oe(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Vt(this.secondaryColor,20),this.git1=Vt(this.pie2||this.secondaryColor,20),this.git2=Vt(this.pie3||this.tertiaryColor,20),this.git3=Vt(this.pie4||Y(this.primaryColor,{h:-30}),20),this.git4=Vt(this.pie5||Y(this.primaryColor,{h:-60}),20),this.git5=Vt(this.pie6||Y(this.primaryColor,{h:-90}),10),this.git6=Vt(this.pie7||Y(this.primaryColor,{h:60}),10),this.git7=Vt(this.pie8||Y(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||Et(this.git0),this.gitInv1=this.gitInv1||Et(this.git1),this.gitInv2=this.gitInv2||Et(this.git2),this.gitInv3=this.gitInv3||Et(this.git3),this.gitInv4=this.gitInv4||Et(this.git4),this.gitInv5=this.gitInv5||Et(this.git5),this.gitInv6=this.gitInv6||Et(this.git6),this.gitInv7=this.gitInv7||Et(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Et(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Et(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Vt(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Vt(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},k(rd,"Theme"),rd),rkt=k(e=>{const t=new ekt;return t.calculate(e),t},"getThemeVariables"),nd,nkt=(nd=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=Y(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=Y(this.primaryColor,{h:-160}),this.primaryBorderColor=ri(this.primaryColor,this.darkMode),this.secondaryBorderColor=ri(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ri(this.tertiaryColor,this.darkMode),this.primaryTextColor=Et(this.primaryColor),this.secondaryTextColor=Et(this.secondaryColor),this.tertiaryTextColor=Et(this.tertiaryColor),this.lineColor=Et(this.background),this.textColor=Et(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=vm(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var t,r,n,i,s,o,a,l,c,h,u,f,d,p,m,g,y,b,x,T,S;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Y(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Y(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Y(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Y(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Y(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Y(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Y(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Y(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Y(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||oe(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||oe(this.tertiaryColor,40);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScale"+w]=oe(this["cScale"+w],10),this["cScalePeer"+w]=this["cScalePeer"+w]||oe(this["cScale"+w],25);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleInv"+w]=this["cScaleInv"+w]||Y(this["cScale"+w],{h:180});for(let w=0;w<5;w++)this["surface"+w]=this["surface"+w]||Y(this.mainBkg,{h:30,l:-(5+w*5)}),this["surfacePeer"+w]=this["surfacePeer"+w]||Y(this.mainBkg,{h:30,l:-(7+w*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||Et(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||Et(this.labelTextColor);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleLabel"+w]=this["cScaleLabel"+w]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=Vt(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Vt(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||Vt(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Y(this.primaryColor,{h:64}),this.fillType3=Y(this.secondaryColor,{h:64}),this.fillType4=Y(this.primaryColor,{h:-64}),this.fillType5=Y(this.secondaryColor,{h:-64}),this.fillType6=Y(this.primaryColor,{h:128}),this.fillType7=Y(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||Y(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||Y(this.primaryColor,{l:-10}),this.pie5=this.pie5||Y(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Y(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||Y(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||Y(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||Y(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||Y(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||Y(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||Y(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Y(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Y(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Y(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Y(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Y(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Y(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||P1(this.quadrant1Fill)?Vt(this.quadrant1Fill):oe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((n=this.radar)==null?void 0:n.axisLabelFontSize)||12,curveOpacity:((i=this.radar)==null?void 0:i.curveOpacity)||.5,curveStrokeWidth:((s=this.radar)==null?void 0:s.curveStrokeWidth)||2,graticuleColor:((o=this.radar)==null?void 0:o.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((a=this.radar)==null?void 0:a.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((c=this.radar)==null?void 0:c.legendBoxSize)||12,legendFontSize:((h=this.radar)==null?void 0:h.legendFontSize)||12},this.xyChart={backgroundColor:((u=this.xyChart)==null?void 0:u.backgroundColor)||this.background,titleColor:((f=this.xyChart)==null?void 0:f.titleColor)||this.primaryTextColor,xAxisTitleColor:((d=this.xyChart)==null?void 0:d.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((p=this.xyChart)==null?void 0:p.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((m=this.xyChart)==null?void 0:m.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((g=this.xyChart)==null?void 0:g.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((y=this.xyChart)==null?void 0:y.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((b=this.xyChart)==null?void 0:b.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((x=this.xyChart)==null?void 0:x.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((T=this.xyChart)==null?void 0:T.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((S=this.xyChart)==null?void 0:S.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Y(this.primaryColor,{h:-30}),this.git4=this.git4||Y(this.primaryColor,{h:-60}),this.git5=this.git5||Y(this.primaryColor,{h:-90}),this.git6=this.git6||Y(this.primaryColor,{h:60}),this.git7=this.git7||Y(this.primaryColor,{h:120}),this.darkMode?(this.git0=Vt(this.git0,25),this.git1=Vt(this.git1,25),this.git2=Vt(this.git2,25),this.git3=Vt(this.git3,25),this.git4=Vt(this.git4,25),this.git5=Vt(this.git5,25),this.git6=Vt(this.git6,25),this.git7=Vt(this.git7,25)):(this.git0=oe(this.git0,25),this.git1=oe(this.git1,25),this.git2=oe(this.git2,25),this.git3=oe(this.git3,25),this.git4=oe(this.git4,25),this.git5=oe(this.git5,25),this.git6=oe(this.git6,25),this.git7=oe(this.git7,25)),this.gitInv0=this.gitInv0||oe(Et(this.git0),25),this.gitInv1=this.gitInv1||Et(this.git1),this.gitInv2=this.gitInv2||Et(this.git2),this.gitInv3=this.gitInv3||Et(this.git3),this.gitInv4=this.gitInv4||Et(this.git4),this.gitInv5=this.gitInv5||Et(this.git5),this.gitInv6=this.gitInv6||Et(this.git6),this.gitInv7=this.gitInv7||Et(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Et(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Et(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||U4,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||G4}calculate(t){if(Object.keys(this).forEach(n=>{this[n]==="calculated"&&(this[n]=void 0)}),typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},k(nd,"Theme"),nd),ikt=k(e=>{const t=new nkt;return t.calculate(e),t},"getThemeVariables"),id,skt=(id=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=Vt("#cde498",10),this.primaryBorderColor=ri(this.primaryColor,this.darkMode),this.secondaryBorderColor=ri(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ri(this.tertiaryColor,this.darkMode),this.primaryTextColor=Et(this.primaryColor),this.secondaryTextColor=Et(this.secondaryColor),this.tertiaryTextColor=Et(this.primaryColor),this.lineColor=Et(this.background),this.textColor=Et(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,r,n,i,s,o,a,l,c,h,u,f,d,p,m,g,y,b,x,T,S;this.actorBorder=oe(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Y(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Y(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Y(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Y(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Y(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Y(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Y(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Y(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Y(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||oe(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||oe(this.tertiaryColor,40);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScale"+w]=oe(this["cScale"+w],10),this["cScalePeer"+w]=this["cScalePeer"+w]||oe(this["cScale"+w],25);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleInv"+w]=this["cScaleInv"+w]||Y(this["cScale"+w],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleLabel"+w]=this["cScaleLabel"+w]||this.scaleLabelColor;for(let w=0;w<5;w++)this["surface"+w]=this["surface"+w]||Y(this.mainBkg,{h:30,s:-30,l:-(5+w*5)}),this["surfacePeer"+w]=this["surfacePeer"+w]||Y(this.mainBkg,{h:30,s:-30,l:-(8+w*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Vt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Vt(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Y(this.primaryColor,{h:64}),this.fillType3=Y(this.secondaryColor,{h:64}),this.fillType4=Y(this.primaryColor,{h:-64}),this.fillType5=Y(this.secondaryColor,{h:-64}),this.fillType6=Y(this.primaryColor,{h:128}),this.fillType7=Y(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Y(this.primaryColor,{l:-30}),this.pie5=this.pie5||Y(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Y(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||Y(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Y(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Y(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Y(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||Y(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||Y(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Y(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Y(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Y(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Y(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Y(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Y(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||P1(this.quadrant1Fill)?Vt(this.quadrant1Fill):oe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((n=this.radar)==null?void 0:n.axisLabelFontSize)||12,curveOpacity:((i=this.radar)==null?void 0:i.curveOpacity)||.5,curveStrokeWidth:((s=this.radar)==null?void 0:s.curveStrokeWidth)||2,graticuleColor:((o=this.radar)==null?void 0:o.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((a=this.radar)==null?void 0:a.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((c=this.radar)==null?void 0:c.legendBoxSize)||12,legendFontSize:((h=this.radar)==null?void 0:h.legendFontSize)||12},this.xyChart={backgroundColor:((u=this.xyChart)==null?void 0:u.backgroundColor)||this.background,titleColor:((f=this.xyChart)==null?void 0:f.titleColor)||this.primaryTextColor,xAxisTitleColor:((d=this.xyChart)==null?void 0:d.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((p=this.xyChart)==null?void 0:p.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((m=this.xyChart)==null?void 0:m.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((g=this.xyChart)==null?void 0:g.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((y=this.xyChart)==null?void 0:y.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((b=this.xyChart)==null?void 0:b.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((x=this.xyChart)==null?void 0:x.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((T=this.xyChart)==null?void 0:T.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((S=this.xyChart)==null?void 0:S.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Y(this.primaryColor,{h:-30}),this.git4=this.git4||Y(this.primaryColor,{h:-60}),this.git5=this.git5||Y(this.primaryColor,{h:-90}),this.git6=this.git6||Y(this.primaryColor,{h:60}),this.git7=this.git7||Y(this.primaryColor,{h:120}),this.darkMode?(this.git0=Vt(this.git0,25),this.git1=Vt(this.git1,25),this.git2=Vt(this.git2,25),this.git3=Vt(this.git3,25),this.git4=Vt(this.git4,25),this.git5=Vt(this.git5,25),this.git6=Vt(this.git6,25),this.git7=Vt(this.git7,25)):(this.git0=oe(this.git0,25),this.git1=oe(this.git1,25),this.git2=oe(this.git2,25),this.git3=oe(this.git3,25),this.git4=oe(this.git4,25),this.git5=oe(this.git5,25),this.git6=oe(this.git6,25),this.git7=oe(this.git7,25)),this.gitInv0=this.gitInv0||Et(this.git0),this.gitInv1=this.gitInv1||Et(this.git1),this.gitInv2=this.gitInv2||Et(this.git2),this.gitInv3=this.gitInv3||Et(this.git3),this.gitInv4=this.gitInv4||Et(this.git4),this.gitInv5=this.gitInv5||Et(this.git5),this.gitInv6=this.gitInv6||Et(this.git6),this.gitInv7=this.gitInv7||Et(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Et(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Et(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||U4,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||G4}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},k(id,"Theme"),id),okt=k(e=>{const t=new skt;return t.calculate(e),t},"getThemeVariables"),sd,akt=(sd=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=Vt(this.contrast,55),this.background="#ffffff",this.tertiaryColor=Y(this.primaryColor,{h:-160}),this.primaryBorderColor=ri(this.primaryColor,this.darkMode),this.secondaryBorderColor=ri(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ri(this.tertiaryColor,this.darkMode),this.primaryTextColor=Et(this.primaryColor),this.secondaryTextColor=Et(this.secondaryColor),this.tertiaryTextColor=Et(this.tertiaryColor),this.lineColor=Et(this.background),this.textColor=Et(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Vt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,r,n,i,s,o,a,l,c,h,u,f,d,p,m,g,y,b,x,T,S;this.secondBkg=Vt(this.contrast,55),this.border2=this.contrast,this.actorBorder=Vt(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleInv"+w]=this["cScaleInv"+w]||Et(this["cScale"+w]);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this.darkMode?this["cScalePeer"+w]=this["cScalePeer"+w]||Vt(this["cScale"+w],10):this["cScalePeer"+w]=this["cScalePeer"+w]||oe(this["cScale"+w],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleLabel"+w]=this["cScaleLabel"+w]||this.scaleLabelColor;for(let w=0;w<5;w++)this["surface"+w]=this["surface"+w]||Y(this.mainBkg,{l:-(5+w*5)}),this["surfacePeer"+w]=this["surfacePeer"+w]||Y(this.mainBkg,{l:-(8+w*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=Vt(this.contrast,30),this.sectionBkgColor2=Vt(this.contrast,30),this.taskBorderColor=oe(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=Vt(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=oe(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Y(this.primaryColor,{h:64}),this.fillType3=Y(this.secondaryColor,{h:64}),this.fillType4=Y(this.primaryColor,{h:-64}),this.fillType5=Y(this.secondaryColor,{h:-64}),this.fillType6=Y(this.primaryColor,{h:128}),this.fillType7=Y(this.secondaryColor,{h:128});for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["pie"+w]=this["cScale"+w];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Y(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Y(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Y(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Y(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Y(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Y(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||P1(this.quadrant1Fill)?Vt(this.quadrant1Fill):oe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((n=this.xyChart)==null?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((a=this.xyChart)==null?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((h=this.xyChart)==null?void 0:h.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((u=this.xyChart)==null?void 0:u.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:((f=this.radar)==null?void 0:f.axisColor)||this.lineColor,axisStrokeWidth:((d=this.radar)==null?void 0:d.axisStrokeWidth)||2,axisLabelFontSize:((p=this.radar)==null?void 0:p.axisLabelFontSize)||12,curveOpacity:((m=this.radar)==null?void 0:m.curveOpacity)||.5,curveStrokeWidth:((g=this.radar)==null?void 0:g.curveStrokeWidth)||2,graticuleColor:((y=this.radar)==null?void 0:y.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((b=this.radar)==null?void 0:b.graticuleStrokeWidth)||1,graticuleOpacity:((x=this.radar)==null?void 0:x.graticuleOpacity)||.3,legendBoxSize:((T=this.radar)==null?void 0:T.legendBoxSize)||12,legendFontSize:((S=this.radar)==null?void 0:S.legendFontSize)||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=oe(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||Y(this.primaryColor,{h:-30}),this.git4=this.pie5||Y(this.primaryColor,{h:-60}),this.git5=this.pie6||Y(this.primaryColor,{h:-90}),this.git6=this.pie7||Y(this.primaryColor,{h:60}),this.git7=this.pie8||Y(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||Et(this.git0),this.gitInv1=this.gitInv1||Et(this.git1),this.gitInv2=this.gitInv2||Et(this.git2),this.gitInv3=this.gitInv3||Et(this.git3),this.gitInv4=this.gitInv4||Et(this.git4),this.gitInv5=this.gitInv5||Et(this.git5),this.gitInv6=this.gitInv6||Et(this.git6),this.gitInv7=this.gitInv7||Et(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||U4,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||G4}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},k(sd,"Theme"),sd),lkt=k(e=>{const t=new akt;return t.calculate(e),t},"getThemeVariables"),Xa={base:{getThemeVariables:tkt},dark:{getThemeVariables:rkt},default:{getThemeVariables:ikt},forest:{getThemeVariables:okt},neutral:{getThemeVariables:lkt}},Co={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},uW={...Co,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:Xa.default.getThemeVariables(),sequence:{...Co.sequence,messageFont:k(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:k(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:k(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...Co.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Co.c4,useWidth:void 0,personFont:k(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...Co.flowchart,inheritDir:!1},external_personFont:k(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:k(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:k(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:k(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:k(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:k(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:k(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:k(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:k(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:k(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:k(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:k(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:k(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:k(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:k(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:k(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:k(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:k(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:k(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:k(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:k(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...Co.pie,useWidth:984},xyChart:{...Co.xyChart,useWidth:void 0},requirement:{...Co.requirement,useWidth:void 0},packet:{...Co.packet},radar:{...Co.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},fW=k((e,t="")=>Object.keys(e).reduce((r,n)=>Array.isArray(e[n])?r:typeof e[n]=="object"&&e[n]!==null?[...r,t+n,...fW(e[n],"")]:[...r,t+n],[]),"keyify"),ckt=new Set(fW(uW,"")),dW=uW,Ix=k(e=>{if(ht.debug("sanitizeDirective called with",e),!(typeof e!="object"||e==null)){if(Array.isArray(e)){e.forEach(t=>Ix(t));return}for(const t of Object.keys(e)){if(ht.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!ckt.has(t)||e[t]==null){ht.debug("sanitize deleting key: ",t),delete e[t];continue}if(typeof e[t]=="object"){ht.debug("sanitizing object",t),Ix(e[t]);continue}const r=["themeCSS","fontFamily","altFontFamily"];for(const n of r)t.includes(n)&&(ht.debug("sanitizing css option",t),e[t]=hkt(e[t]))}if(e.themeVariables)for(const t of Object.keys(e.themeVariables)){const r=e.themeVariables[t];r!=null&&r.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}ht.debug("After sanitization",e)}},"sanitizeDirective"),hkt=k(e=>{let t=0,r=0;for(const n of e){if(t<r)return"{ /* ERROR: Unbalanced CSS */ }";n==="{"?t++:n==="}"&&r++}return t!==r?"{ /* ERROR: Unbalanced CSS */ }":e},"sanitizeCss"),Ed=Object.freeze(dW),Ti=Zr({},Ed),Bx,uu=[],km=Zr({},Ed),K4=k((e,t)=>{let r=Zr({},e),n={};for(const i of t)gW(i),n=Zr(n,i);if(r=Zr(r,n),n.theme&&n.theme in Xa){const i=Zr({},Bx),s=Zr(i.themeVariables||{},n.themeVariables);r.theme&&r.theme in Xa&&(r.themeVariables=Xa[r.theme].getThemeVariables(s))}return km=r,yW(km),km},"updateCurrentConfig"),ukt=k(e=>(Ti=Zr({},Ed),Ti=Zr(Ti,e),e.theme&&Xa[e.theme]&&(Ti.themeVariables=Xa[e.theme].getThemeVariables(e.themeVariables)),K4(Ti,uu),Ti),"setSiteConfig"),fkt=k(e=>{Bx=Zr({},e)},"saveConfigFromInitialize"),dkt=k(e=>(Ti=Zr(Ti,e),K4(Ti,uu),Ti),"updateSiteConfig"),pW=k(()=>Zr({},Ti),"getSiteConfig"),mW=k(e=>(yW(e),Zr(km,e),$n()),"setConfig"),$n=k(()=>Zr({},km),"getConfig"),gW=k(e=>{e&&(["secure",...Ti.secure??[]].forEach(t=>{Object.hasOwn(e,t)&&(ht.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.startsWith("__")&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&gW(e[t])}))},"sanitize"),pkt=k(e=>{var t;Ix(e),e.fontFamily&&!((t=e.themeVariables)!=null&&t.fontFamily)&&(e.themeVariables={...e.themeVariables,fontFamily:e.fontFamily}),uu.push(e),K4(Ti,uu)},"addDirective"),Rx=k((e=Ti)=>{uu=[],K4(e,uu)},"reset"),mkt={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},wD={},gkt=k(e=>{wD[e]||(ht.warn(mkt[e]),wD[e]=!0)},"issueWarning"),yW=k(e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&gkt("LAZY_LOAD_DEPRECATED")},"checkConfig"),tLt=k(()=>{let e={};Bx&&(e=Zr(e,Bx));for(const t of uu)e=Zr(e,t);return e},"getUserDefinedConfig"),N1=/<br\s*\/?>/gi,ykt=k(e=>e?vW(e).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),bkt=(()=>{let e=!1;return()=>{e||(bW(),e=!0)}})();function bW(){const e="data-temp-href-target";cn.addHook("beforeSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")??"")}),cn.addHook("afterSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)??""),t.removeAttribute(e),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}k(bW,"setupDompurifyHooks");var xW=k(e=>(bkt(),cn.sanitize(e)),"removeScript"),kD=k((e,t)=>{var r;if(((r=t.flowchart)==null?void 0:r.htmlLabels)!==!1){const n=t.securityLevel;n==="antiscript"||n==="strict"?e=xW(e):n!=="loose"&&(e=vW(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=kkt(e))}return e},"sanitizeMore"),Ls=k((e,t)=>e&&(t.dompurifyConfig?e=cn.sanitize(kD(e,t),t.dompurifyConfig).toString():e=cn.sanitize(kD(e,t),{FORBID_TAGS:["style"]}).toString(),e),"sanitizeText"),xkt=k((e,t)=>typeof e=="string"?Ls(e,t):e.flat().map(r=>Ls(r,t)),"sanitizeTextOrArray"),vkt=k(e=>N1.test(e),"hasBreaks"),wkt=k(e=>e.split(N1),"splitBreaks"),kkt=k(e=>e.replace(/#br#/g,"<br/>"),"placeholderToBreak"),vW=k(e=>e.replace(N1,"#br#"),"breakToPlaceholder"),Ckt=k(e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=CSS.escape(t)),t},"getUrl"),en=k(e=>!(e===!1||["false","null","0"].includes(String(e).trim().toLowerCase())),"evaluate"),Skt=k(function(...e){const t=e.filter(r=>!isNaN(r));return Math.max(...t)},"getMax"),Tkt=k(function(...e){const t=e.filter(r=>!isNaN(r));return Math.min(...t)},"getMin"),CD=k(function(e){const t=e.split(/(,)/),r=[];for(let n=0;n<t.length;n++){let i=t[n];if(i===","&&n>0&&n+1<t.length){const s=t[n-1],o=t[n+1];_kt(s,o)&&(i=s+","+o,n++,r.pop())}r.push(Mkt(i))}return r.join("")},"parseGenericTypes"),h6=k((e,t)=>Math.max(0,e.split(t).length-1),"countOccurrence"),_kt=k((e,t)=>{const r=h6(e,"~"),n=h6(t,"~");return r===1&&n===1},"shouldCombineSets"),Mkt=k(e=>{const t=h6(e,"~");let r=!1;if(t<=1)return e;t%2!==0&&e.startsWith("~")&&(e=e.substring(1),r=!0);const n=[...e];let i=n.indexOf("~"),s=n.lastIndexOf("~");for(;i!==-1&&s!==-1&&i!==s;)n[i]="<",n[s]=">",i=n.indexOf("~"),s=n.lastIndexOf("~");return r&&n.unshift("~"),n.join("")},"processSet"),SD=k(()=>window.MathMLElement!==void 0,"isMathMLSupported"),u6=/\$\$(.*)\$\$/g,Ld=k(e=>{var t;return(((t=e.match(u6))==null?void 0:t.length)??0)>0},"hasKatex"),eLt=k(async(e,t)=>{const r=document.createElement("div");r.innerHTML=await F9(e,t),r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0";const n=document.querySelector("body");n==null||n.insertAdjacentElement("beforeend",r);const i={width:r.clientWidth,height:r.clientHeight};return r.remove(),i},"calculateMathMLDimensions"),Akt=k(async(e,t)=>{if(!Ld(e))return e;if(!(SD()||t.legacyMathML||t.forceLegacyMathML))return e.replace(u6,"MathML is unsupported in this environment.");{const{default:r}=await X(async()=>{const{default:i}=await Promise.resolve().then(()=>J4t);return{default:i}},void 0),n=t.forceLegacyMathML||!SD()&&t.legacyMathML?"htmlAndMathml":"mathml";return e.split(N1).map(i=>Ld(i)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${i}</div>`:`<div>${i}</div>`).join("").replace(u6,(i,s)=>r.renderToString(s,{throwOnError:!0,displayMode:!0,output:n}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatexUnsanitized"),F9=k(async(e,t)=>Ls(await Akt(e,t),t),"renderKatexSanitized"),r0={getRows:ykt,sanitizeText:Ls,sanitizeTextOrArray:xkt,hasBreaks:vkt,splitBreaks:wkt,lineBreakRegex:N1,removeScript:xW,getUrl:Ckt,evaluate:en,getMax:Skt,getMin:Tkt},Ekt=k(function(e,t){for(let r of t)e.attr(r[0],r[1])},"d3Attrs"),Lkt=k(function(e,t,r){let n=new Map;return r?(n.set("width","100%"),n.set("style",`max-width: ${t}px;`)):(n.set("height",e),n.set("width",t)),n},"calculateSvgSizeAttrs"),wW=k(function(e,t,r,n){const i=Lkt(t,r,n);Ekt(e,i)},"configureSvgSize"),Okt=k(function(e,t,r,n){const i=t.node().getBBox(),s=i.width,o=i.height;ht.info(`SVG bounds: ${s}x${o}`,i);let a=0,l=0;ht.info(`Graph bounds: ${a}x${l}`,e),a=s+r*2,l=o+r*2,ht.info(`Calculated bounds: ${a}x${l}`),wW(t,l,a,n);const c=`${i.x-r} ${i.y-r} ${i.width+2*r} ${i.height+2*r}`;t.attr("viewBox",c)},"setupGraphViewbox"),gb={},Dkt=k((e,t,r)=>{let n="";return e in gb&&gb[e]?n=gb[e](r):ht.warn(`No theme found for ${e}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }
   & p {
    margin: 0
   }

  ${n}

  ${t}
`},"getStyles"),Ikt=k((e,t)=>{t!==void 0&&(gb[e]=t)},"addStylesForDiagram"),Bkt=Dkt,kW={};V3t(kW,{clear:()=>Rkt,getAccDescription:()=>$kt,getAccTitle:()=>Nkt,getDiagramTitle:()=>Hkt,setAccDescription:()=>Fkt,setAccTitle:()=>Pkt,setDiagramTitle:()=>zkt});var $9="",z9="",H9="",q9=k(e=>Ls(e,$n()),"sanitizeText"),Rkt=k(()=>{$9="",H9="",z9=""},"clear"),Pkt=k(e=>{$9=q9(e).replace(/^\s+/g,"")},"setAccTitle"),Nkt=k(()=>$9,"getAccTitle"),Fkt=k(e=>{H9=q9(e).replace(/\n\s+/g,`
`)},"setAccDescription"),$kt=k(()=>H9,"getAccDescription"),zkt=k(e=>{z9=q9(e)},"setDiagramTitle"),Hkt=k(()=>z9,"getDiagramTitle"),TD=ht,qkt=P9,Ze=$n,rLt=mW,nLt=Ed,V9=k(e=>Ls(e,Ze()),"sanitizeText"),Vkt=Okt,Wkt=k(()=>kW,"getCommonDb"),Px={},Nx=k((e,t,r)=>{var n;Px[e]&&TD.warn(`Diagram with id ${e} already registered. Overwriting.`),Px[e]=t,r&&hW(e,r),Ikt(e,t.styles),(n=t.injectUtils)==null||n.call(t,TD,qkt,Ze,V9,Vkt,Wkt(),()=>{})},"registerDiagram"),f6=k(e=>{if(e in Px)return Px[e];throw new jkt(e)},"getDiagram"),od,jkt=(od=class extends Error{constructor(t){super(`Diagram ${t} not found.`)}},k(od,"DiagramNotFoundError"),od),Ukt={value:()=>{}};function CW(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new yb(r)}function yb(e){this._=e}function Gkt(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}yb.prototype=CW.prototype={constructor:yb,on:function(e,t){var r=this._,n=Gkt(e+"",r),i,s=-1,o=n.length;if(arguments.length<2){for(;++s<o;)if((i=(e=n[s]).type)&&(i=Kkt(r[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=n[s]).type)r[i]=_D(r[i],e.name,t);else if(t==null)for(i in r)r[i]=_D(r[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new yb(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,s;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,i=s.length;n<i;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,s=n.length;i<s;++i)n[i].value.apply(t,r)}};function Kkt(e,t){for(var r=0,n=e.length,i;r<n;++r)if((i=e[r]).name===t)return i.value}function _D(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=Ukt,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var d6="http://www.w3.org/1999/xhtml";const MD={svg:"http://www.w3.org/2000/svg",xhtml:d6,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Y4(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),MD.hasOwnProperty(t)?{space:MD[t],local:e}:e}function Ykt(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===d6&&t.documentElement.namespaceURI===d6?t.createElement(e):t.createElementNS(r,e)}}function Xkt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function SW(e){var t=Y4(e);return(t.local?Xkt:Ykt)(t)}function Jkt(){}function W9(e){return e==null?Jkt:function(){return this.querySelector(e)}}function Zkt(e){typeof e!="function"&&(e=W9(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var s=t[i],o=s.length,a=n[i]=new Array(o),l,c,h=0;h<o;++h)(l=s[h])&&(c=e.call(l,l.__data__,h,s))&&("__data__"in l&&(c.__data__=l.__data__),a[h]=c);return new is(n,this._parents)}function Qkt(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function tCt(){return[]}function TW(e){return e==null?tCt:function(){return this.querySelectorAll(e)}}function eCt(e){return function(){return Qkt(e.apply(this,arguments))}}function rCt(e){typeof e=="function"?e=eCt(e):e=TW(e);for(var t=this._groups,r=t.length,n=[],i=[],s=0;s<r;++s)for(var o=t[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(n.push(e.call(l,l.__data__,c,o)),i.push(l));return new is(n,i)}function _W(e){return function(){return this.matches(e)}}function MW(e){return function(t){return t.matches(e)}}var nCt=Array.prototype.find;function iCt(e){return function(){return nCt.call(this.children,e)}}function sCt(){return this.firstElementChild}function oCt(e){return this.select(e==null?sCt:iCt(typeof e=="function"?e:MW(e)))}var aCt=Array.prototype.filter;function lCt(){return Array.from(this.children)}function cCt(e){return function(){return aCt.call(this.children,e)}}function hCt(e){return this.selectAll(e==null?lCt:cCt(typeof e=="function"?e:MW(e)))}function uCt(e){typeof e!="function"&&(e=_W(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var s=t[i],o=s.length,a=n[i]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new is(n,this._parents)}function AW(e){return new Array(e.length)}function fCt(){return new is(this._enter||this._groups.map(AW),this._parents)}function Fx(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Fx.prototype={constructor:Fx,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function dCt(e){return function(){return e}}function pCt(e,t,r,n,i,s){for(var o=0,a,l=t.length,c=s.length;o<c;++o)(a=t[o])?(a.__data__=s[o],n[o]=a):r[o]=new Fx(e,s[o]);for(;o<l;++o)(a=t[o])&&(i[o]=a)}function mCt(e,t,r,n,i,s,o){var a,l,c=new Map,h=t.length,u=s.length,f=new Array(h),d;for(a=0;a<h;++a)(l=t[a])&&(f[a]=d=o.call(l,l.__data__,a,t)+"",c.has(d)?i[a]=l:c.set(d,l));for(a=0;a<u;++a)d=o.call(e,s[a],a,s)+"",(l=c.get(d))?(n[a]=l,l.__data__=s[a],c.delete(d)):r[a]=new Fx(e,s[a]);for(a=0;a<h;++a)(l=t[a])&&c.get(f[a])===l&&(i[a]=l)}function gCt(e){return e.__data__}function yCt(e,t){if(!arguments.length)return Array.from(this,gCt);var r=t?mCt:pCt,n=this._parents,i=this._groups;typeof e!="function"&&(e=dCt(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var h=n[c],u=i[c],f=u.length,d=bCt(e.call(h,h&&h.__data__,c,n)),p=d.length,m=a[c]=new Array(p),g=o[c]=new Array(p),y=l[c]=new Array(f);r(h,u,m,g,y,d,t);for(var b=0,x=0,T,S;b<p;++b)if(T=m[b]){for(b>=x&&(x=b+1);!(S=g[x])&&++x<p;);T._next=S||null}}return o=new is(o,n),o._enter=a,o._exit=l,o}function bCt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xCt(){return new is(this._exit||this._groups.map(AW),this._parents)}function vCt(e,t,r){var n=this.enter(),i=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),r==null?s.remove():r(s),n&&i?n.merge(i).order():i}function wCt(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,s=n.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var c=r[l],h=n[l],u=c.length,f=a[l]=new Array(u),d,p=0;p<u;++p)(d=c[p]||h[p])&&(f[p]=d);for(;l<i;++l)a[l]=r[l];return new is(a,this._parents)}function kCt(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],i=n.length-1,s=n[i],o;--i>=0;)(o=n[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function CCt(e){e||(e=SCt);function t(u,f){return u&&f?e(u.__data__,f.__data__):!u-!f}for(var r=this._groups,n=r.length,i=new Array(n),s=0;s<n;++s){for(var o=r[s],a=o.length,l=i[s]=new Array(a),c,h=0;h<a;++h)(c=o[h])&&(l[h]=c);l.sort(t)}return new is(i,this._parents).order()}function SCt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function TCt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function _Ct(){return Array.from(this)}function MCt(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,s=n.length;i<s;++i){var o=n[i];if(o)return o}return null}function ACt(){let e=0;for(const t of this)++e;return e}function ECt(){return!this.node()}function LCt(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function OCt(e){return function(){this.removeAttribute(e)}}function DCt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ICt(e,t){return function(){this.setAttribute(e,t)}}function BCt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function RCt(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function PCt(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function NCt(e,t){var r=Y4(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?DCt:OCt:typeof t=="function"?r.local?PCt:RCt:r.local?BCt:ICt)(r,t))}function EW(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function FCt(e){return function(){this.style.removeProperty(e)}}function $Ct(e,t,r){return function(){this.style.setProperty(e,t,r)}}function zCt(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function HCt(e,t,r){return arguments.length>1?this.each((t==null?FCt:typeof t=="function"?zCt:$Ct)(e,t,r??"")):Od(this.node(),e)}function Od(e,t){return e.style.getPropertyValue(t)||EW(e).getComputedStyle(e,null).getPropertyValue(t)}function qCt(e){return function(){delete this[e]}}function VCt(e,t){return function(){this[e]=t}}function WCt(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function jCt(e,t){return arguments.length>1?this.each((t==null?qCt:typeof t=="function"?WCt:VCt)(e,t)):this.node()[e]}function LW(e){return e.trim().split(/^|\s+/)}function j9(e){return e.classList||new OW(e)}function OW(e){this._node=e,this._names=LW(e.getAttribute("class")||"")}OW.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function DW(e,t){for(var r=j9(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function IW(e,t){for(var r=j9(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function UCt(e){return function(){DW(this,e)}}function GCt(e){return function(){IW(this,e)}}function KCt(e,t){return function(){(t.apply(this,arguments)?DW:IW)(this,e)}}function YCt(e,t){var r=LW(e+"");if(arguments.length<2){for(var n=j9(this.node()),i=-1,s=r.length;++i<s;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof t=="function"?KCt:t?UCt:GCt)(r,t))}function XCt(){this.textContent=""}function JCt(e){return function(){this.textContent=e}}function ZCt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function QCt(e){return arguments.length?this.each(e==null?XCt:(typeof e=="function"?ZCt:JCt)(e)):this.node().textContent}function t6t(){this.innerHTML=""}function e6t(e){return function(){this.innerHTML=e}}function r6t(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function n6t(e){return arguments.length?this.each(e==null?t6t:(typeof e=="function"?r6t:e6t)(e)):this.node().innerHTML}function i6t(){this.nextSibling&&this.parentNode.appendChild(this)}function s6t(){return this.each(i6t)}function o6t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function a6t(){return this.each(o6t)}function l6t(e){var t=typeof e=="function"?e:SW(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function c6t(){return null}function h6t(e,t){var r=typeof e=="function"?e:SW(e),n=t==null?c6t:typeof t=="function"?t:W9(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function u6t(){var e=this.parentNode;e&&e.removeChild(this)}function f6t(){return this.each(u6t)}function d6t(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function p6t(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function m6t(e){return this.select(e?p6t:d6t)}function g6t(e){return arguments.length?this.property("__data__",e):this.node().__data__}function y6t(e){return function(t){e.call(this,t,this.__data__)}}function b6t(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function x6t(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,i=t.length,s;r<i;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function v6t(e,t,r){return function(){var n=this.__on,i,s=y6t(t);if(n){for(var o=0,a=n.length;o<a;++o)if((i=n[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=r),i.value=t;return}}this.addEventListener(e.type,s,r),i={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(i):this.__on=[i]}}function w6t(e,t,r){var n=b6t(e+""),i,s=n.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,h;l<c;++l)for(i=0,h=a[l];i<s;++i)if((o=n[i]).type===h.type&&o.name===h.name)return h.value}return}for(a=t?v6t:x6t,i=0;i<s;++i)this.each(a(n[i],t,r));return this}function BW(e,t,r){var n=EW(e),i=n.CustomEvent;typeof i=="function"?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function k6t(e,t){return function(){return BW(this,e,t)}}function C6t(e,t){return function(){return BW(this,e,t.apply(this,arguments))}}function S6t(e,t){return this.each((typeof t=="function"?C6t:k6t)(e,t))}function*T6t(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,s=n.length,o;i<s;++i)(o=n[i])&&(yield o)}var RW=[null];function is(e,t){this._groups=e,this._parents=t}function F1(){return new is([[document.documentElement]],RW)}function _6t(){return this}is.prototype=F1.prototype={constructor:is,select:Zkt,selectAll:rCt,selectChild:oCt,selectChildren:hCt,filter:uCt,data:yCt,enter:fCt,exit:xCt,join:vCt,merge:wCt,selection:_6t,order:kCt,sort:CCt,call:TCt,nodes:_Ct,node:MCt,size:ACt,empty:ECt,each:LCt,attr:NCt,style:HCt,property:jCt,classed:YCt,text:QCt,html:n6t,raise:s6t,lower:a6t,append:l6t,insert:h6t,remove:f6t,clone:m6t,datum:g6t,on:w6t,dispatch:S6t,[Symbol.iterator]:T6t};function $e(e){return typeof e=="string"?new is([[document.querySelector(e)]],[document.documentElement]):new is([[e]],RW)}function U9(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function PW(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function $1(){}var gg=.7,$x=1/gg,Sf="\\s*([+-]?\\d+)\\s*",yg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ko="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",M6t=/^#([0-9a-f]{3,8})$/,A6t=new RegExp(`^rgb\\(${Sf},${Sf},${Sf}\\)$`),E6t=new RegExp(`^rgb\\(${Ko},${Ko},${Ko}\\)$`),L6t=new RegExp(`^rgba\\(${Sf},${Sf},${Sf},${yg}\\)$`),O6t=new RegExp(`^rgba\\(${Ko},${Ko},${Ko},${yg}\\)$`),D6t=new RegExp(`^hsl\\(${yg},${Ko},${Ko}\\)$`),I6t=new RegExp(`^hsla\\(${yg},${Ko},${Ko},${yg}\\)$`),AD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};U9($1,bg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ED,formatHex:ED,formatHex8:B6t,formatHsl:R6t,formatRgb:LD,toString:LD});function ED(){return this.rgb().formatHex()}function B6t(){return this.rgb().formatHex8()}function R6t(){return NW(this).formatHsl()}function LD(){return this.rgb().formatRgb()}function bg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=M6t.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?OD(t):r===3?new Li(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Qy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Qy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=A6t.exec(e))?new Li(t[1],t[2],t[3],1):(t=E6t.exec(e))?new Li(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=L6t.exec(e))?Qy(t[1],t[2],t[3],t[4]):(t=O6t.exec(e))?Qy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=D6t.exec(e))?BD(t[1],t[2]/100,t[3]/100,1):(t=I6t.exec(e))?BD(t[1],t[2]/100,t[3]/100,t[4]):AD.hasOwnProperty(e)?OD(AD[e]):e==="transparent"?new Li(NaN,NaN,NaN,0):null}function OD(e){return new Li(e>>16&255,e>>8&255,e&255,1)}function Qy(e,t,r,n){return n<=0&&(e=t=r=NaN),new Li(e,t,r,n)}function P6t(e){return e instanceof $1||(e=bg(e)),e?(e=e.rgb(),new Li(e.r,e.g,e.b,e.opacity)):new Li}function p6(e,t,r,n){return arguments.length===1?P6t(e):new Li(e,t,r,n??1)}function Li(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}U9(Li,p6,PW($1,{brighter(e){return e=e==null?$x:Math.pow($x,e),new Li(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?gg:Math.pow(gg,e),new Li(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Li(Uh(this.r),Uh(this.g),Uh(this.b),zx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:DD,formatHex:DD,formatHex8:N6t,formatRgb:ID,toString:ID}));function DD(){return`#${yh(this.r)}${yh(this.g)}${yh(this.b)}`}function N6t(){return`#${yh(this.r)}${yh(this.g)}${yh(this.b)}${yh((isNaN(this.opacity)?1:this.opacity)*255)}`}function ID(){const e=zx(this.opacity);return`${e===1?"rgb(":"rgba("}${Uh(this.r)}, ${Uh(this.g)}, ${Uh(this.b)}${e===1?")":`, ${e})`}`}function zx(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Uh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function yh(e){return e=Uh(e),(e<16?"0":"")+e.toString(16)}function BD(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Us(e,t,r,n)}function NW(e){if(e instanceof Us)return new Us(e.h,e.s,e.l,e.opacity);if(e instanceof $1||(e=bg(e)),!e)return new Us;if(e instanceof Us)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(r-n)/a+(r<n)*6:r===s?o=(n-t)/a+2:o=(t-r)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Us(o,a,l,e.opacity)}function F6t(e,t,r,n){return arguments.length===1?NW(e):new Us(e,t,r,n??1)}function Us(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}U9(Us,F6t,PW($1,{brighter(e){return e=e==null?$x:Math.pow($x,e),new Us(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gg:Math.pow(gg,e),new Us(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Li(d3(e>=240?e-240:e+120,i,n),d3(e,i,n),d3(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Us(RD(this.h),t2(this.s),t2(this.l),zx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=zx(this.opacity);return`${e===1?"hsl(":"hsla("}${RD(this.h)}, ${t2(this.s)*100}%, ${t2(this.l)*100}%${e===1?")":`, ${e})`}`}}));function RD(e){return e=(e||0)%360,e<0?e+360:e}function t2(e){return Math.max(0,Math.min(1,e||0))}function d3(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const G9=e=>()=>e;function FW(e,t){return function(r){return e+r*t}}function $6t(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function iLt(e,t){var r=t-e;return r?FW(e,r>180||r<-180?r-360*Math.round(r/360):r):G9(isNaN(e)?t:e)}function z6t(e){return(e=+e)==1?$W:function(t,r){return r-t?$6t(t,r,e):G9(isNaN(t)?r:t)}}function $W(e,t){var r=t-e;return r?FW(e,r):G9(isNaN(e)?t:e)}const PD=function e(t){var r=z6t(t);function n(i,s){var o=r((i=p6(i)).r,(s=p6(s)).r),a=r(i.g,s.g),l=r(i.b,s.b),c=$W(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=a(h),i.b=l(h),i.opacity=c(h),i+""}}return n.gamma=e,n}(1);function Nl(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var m6=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,p3=new RegExp(m6.source,"g");function H6t(e){return function(){return e}}function q6t(e){return function(t){return e(t)+""}}function V6t(e,t){var r=m6.lastIndex=p3.lastIndex=0,n,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(n=m6.exec(e))&&(i=p3.exec(t));)(s=i.index)>r&&(s=t.slice(r,s),a[o]?a[o]+=s:a[++o]=s),(n=n[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Nl(n,i)})),r=p3.lastIndex;return r<t.length&&(s=t.slice(r),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?q6t(l[0].x):H6t(t):(t=l.length,function(c){for(var h=0,u;h<t;++h)a[(u=l[h]).i]=u.x(c);return a.join("")})}var ND=180/Math.PI,g6={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zW(e,t,r,n,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*r+t*n)&&(r-=e*l,n-=t*l),(a=Math.sqrt(r*r+n*n))&&(r/=a,n/=a,l/=a),e*n<t*r&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*ND,skewX:Math.atan(l)*ND,scaleX:o,scaleY:a}}var e2;function W6t(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?g6:zW(t.a,t.b,t.c,t.d,t.e,t.f)}function j6t(e){return e==null||(e2||(e2=document.createElementNS("http://www.w3.org/2000/svg","g")),e2.setAttribute("transform",e),!(e=e2.transform.baseVal.consolidate()))?g6:(e=e.matrix,zW(e.a,e.b,e.c,e.d,e.e,e.f))}function HW(e,t,r,n){function i(c){return c.length?c.pop()+" ":""}function s(c,h,u,f,d,p){if(c!==u||h!==f){var m=d.push("translate(",null,t,null,r);p.push({i:m-4,x:Nl(c,u)},{i:m-2,x:Nl(h,f)})}else(u||f)&&d.push("translate("+u+t+f+r)}function o(c,h,u,f){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),f.push({i:u.push(i(u)+"rotate(",null,n)-2,x:Nl(c,h)})):h&&u.push(i(u)+"rotate("+h+n)}function a(c,h,u,f){c!==h?f.push({i:u.push(i(u)+"skewX(",null,n)-2,x:Nl(c,h)}):h&&u.push(i(u)+"skewX("+h+n)}function l(c,h,u,f,d,p){if(c!==u||h!==f){var m=d.push(i(d)+"scale(",null,",",null,")");p.push({i:m-4,x:Nl(c,u)},{i:m-2,x:Nl(h,f)})}else(u!==1||f!==1)&&d.push(i(d)+"scale("+u+","+f+")")}return function(c,h){var u=[],f=[];return c=e(c),h=e(h),s(c.translateX,c.translateY,h.translateX,h.translateY,u,f),o(c.rotate,h.rotate,u,f),a(c.skewX,h.skewX,u,f),l(c.scaleX,c.scaleY,h.scaleX,h.scaleY,u,f),c=h=null,function(d){for(var p=-1,m=f.length,g;++p<m;)u[(g=f[p]).i]=g.x(d);return u.join("")}}}var U6t=HW(W6t,"px, ","px)","deg)"),G6t=HW(j6t,", ",")",")"),Dd=0,Ep=0,F0=0,qW=1e3,Hx,Lp,qx=0,fu=0,X4=0,xg=typeof performance=="object"&&performance.now?performance:Date,VW=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function K9(){return fu||(VW(K6t),fu=xg.now()+X4)}function K6t(){fu=0}function Vx(){this._call=this._time=this._next=null}Vx.prototype=WW.prototype={constructor:Vx,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?K9():+r)+(t==null?0:+t),!this._next&&Lp!==this&&(Lp?Lp._next=this:Hx=this,Lp=this),this._call=e,this._time=r,y6()},stop:function(){this._call&&(this._call=null,this._time=1/0,y6())}};function WW(e,t,r){var n=new Vx;return n.restart(e,t,r),n}function Y6t(){K9(),++Dd;for(var e=Hx,t;e;)(t=fu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Dd}function FD(){fu=(qx=xg.now())+X4,Dd=Ep=0;try{Y6t()}finally{Dd=0,J6t(),fu=0}}function X6t(){var e=xg.now(),t=e-qx;t>qW&&(X4-=t,qx=e)}function J6t(){for(var e,t=Hx,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Hx=r);Lp=e,y6(n)}function y6(e){if(!Dd){Ep&&(Ep=clearTimeout(Ep));var t=e-fu;t>24?(e<1/0&&(Ep=setTimeout(FD,e-xg.now()-X4)),F0&&(F0=clearInterval(F0))):(F0||(qx=xg.now(),F0=setInterval(X6t,qW)),Dd=1,VW(FD))}}function $D(e,t,r){var n=new Vx;return t=t==null?0:+t,n.restart(i=>{n.stop(),e(i+t)},t,r),n}var Z6t=CW("start","end","cancel","interrupt"),Q6t=[],jW=0,zD=1,b6=2,bb=3,HD=4,x6=5,xb=6;function J4(e,t,r,n,i,s){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;t7t(e,r,{name:t,index:n,group:i,on:Z6t,tween:Q6t,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:jW})}function Y9(e,t){var r=yo(e,t);if(r.state>jW)throw new Error("too late; already scheduled");return r}function ha(e,t){var r=yo(e,t);if(r.state>bb)throw new Error("too late; already running");return r}function yo(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function t7t(e,t,r){var n=e.__transition,i;n[t]=r,r.timer=WW(s,0,r.time);function s(c){r.state=zD,r.timer.restart(o,r.delay,r.time),r.delay<=c&&o(c-r.delay)}function o(c){var h,u,f,d;if(r.state!==zD)return l();for(h in n)if(d=n[h],d.name===r.name){if(d.state===bb)return $D(o);d.state===HD?(d.state=xb,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete n[h]):+h<t&&(d.state=xb,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete n[h])}if($D(function(){r.state===bb&&(r.state=HD,r.timer.restart(a,r.delay,r.time),a(c))}),r.state=b6,r.on.call("start",e,e.__data__,r.index,r.group),r.state===b6){for(r.state=bb,i=new Array(f=r.tween.length),h=0,u=-1;h<f;++h)(d=r.tween[h].value.call(e,e.__data__,r.index,r.group))&&(i[++u]=d);i.length=u+1}}function a(c){for(var h=c<r.duration?r.ease.call(null,c/r.duration):(r.timer.restart(l),r.state=x6,1),u=-1,f=i.length;++u<f;)i[u].call(e,h);r.state===x6&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){r.state=xb,r.timer.stop(),delete n[t];for(var c in n)return;delete e.__transition}}function e7t(e,t){var r=e.__transition,n,i,s=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((n=r[o]).name!==t){s=!1;continue}i=n.state>b6&&n.state<x6,n.state=xb,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[o]}s&&delete e.__transition}}function r7t(e){return this.each(function(){e7t(this,e)})}function n7t(e,t){var r,n;return function(){var i=ha(this,e),s=i.tween;if(s!==r){n=r=s;for(var o=0,a=n.length;o<a;++o)if(n[o].name===t){n=n.slice(),n.splice(o,1);break}}i.tween=n}}function i7t(e,t,r){var n,i;if(typeof r!="function")throw new Error;return function(){var s=ha(this,e),o=s.tween;if(o!==n){i=(n=o).slice();for(var a={name:t,value:r},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function s7t(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=yo(this.node(),r).tween,i=0,s=n.length,o;i<s;++i)if((o=n[i]).name===e)return o.value;return null}return this.each((t==null?n7t:i7t)(r,e,t))}function X9(e,t,r){var n=e._id;return e.each(function(){var i=ha(this,n);(i.value||(i.value={}))[t]=r.apply(this,arguments)}),function(i){return yo(i,n).value[t]}}function UW(e,t){var r;return(typeof t=="number"?Nl:t instanceof bg?PD:(r=bg(t))?(t=r,PD):V6t)(e,t)}function o7t(e){return function(){this.removeAttribute(e)}}function a7t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function l7t(e,t,r){var n,i=r+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===n?s:s=t(n=o,r)}}function c7t(e,t,r){var n,i=r+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===n?s:s=t(n=o,r)}}function h7t(e,t,r){var n,i,s;return function(){var o,a=r(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===n&&l===i?s:(i=l,s=t(n=o,a)))}}function u7t(e,t,r){var n,i,s;return function(){var o,a=r(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===n&&l===i?s:(i=l,s=t(n=o,a)))}}function f7t(e,t){var r=Y4(e),n=r==="transform"?G6t:UW;return this.attrTween(e,typeof t=="function"?(r.local?u7t:h7t)(r,n,X9(this,"attr."+e,t)):t==null?(r.local?a7t:o7t)(r):(r.local?c7t:l7t)(r,n,t))}function d7t(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function p7t(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function m7t(e,t){var r,n;function i(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&p7t(e,s)),r}return i._value=t,i}function g7t(e,t){var r,n;function i(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&d7t(e,s)),r}return i._value=t,i}function y7t(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=Y4(e);return this.tween(r,(n.local?m7t:g7t)(n,t))}function b7t(e,t){return function(){Y9(this,e).delay=+t.apply(this,arguments)}}function x7t(e,t){return t=+t,function(){Y9(this,e).delay=t}}function v7t(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?b7t:x7t)(t,e)):yo(this.node(),t).delay}function w7t(e,t){return function(){ha(this,e).duration=+t.apply(this,arguments)}}function k7t(e,t){return t=+t,function(){ha(this,e).duration=t}}function C7t(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?w7t:k7t)(t,e)):yo(this.node(),t).duration}function S7t(e,t){if(typeof t!="function")throw new Error;return function(){ha(this,e).ease=t}}function T7t(e){var t=this._id;return arguments.length?this.each(S7t(t,e)):yo(this.node(),t).ease}function _7t(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;ha(this,e).ease=r}}function M7t(e){if(typeof e!="function")throw new Error;return this.each(_7t(this._id,e))}function A7t(e){typeof e!="function"&&(e=_W(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var s=t[i],o=s.length,a=n[i]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new cl(n,this._parents,this._name,this._id)}function E7t(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,s=Math.min(n,i),o=new Array(n),a=0;a<s;++a)for(var l=t[a],c=r[a],h=l.length,u=o[a]=new Array(h),f,d=0;d<h;++d)(f=l[d]||c[d])&&(u[d]=f);for(;a<n;++a)o[a]=t[a];return new cl(o,this._parents,this._name,this._id)}function L7t(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function O7t(e,t,r){var n,i,s=L7t(t)?Y9:ha;return function(){var o=s(this,e),a=o.on;a!==n&&(i=(n=a).copy()).on(t,r),o.on=i}}function D7t(e,t){var r=this._id;return arguments.length<2?yo(this.node(),r).on.on(e):this.each(O7t(r,e,t))}function I7t(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function B7t(){return this.on("end.remove",I7t(this._id))}function R7t(e){var t=this._name,r=this._id;typeof e!="function"&&(e=W9(e));for(var n=this._groups,i=n.length,s=new Array(i),o=0;o<i;++o)for(var a=n[o],l=a.length,c=s[o]=new Array(l),h,u,f=0;f<l;++f)(h=a[f])&&(u=e.call(h,h.__data__,f,a))&&("__data__"in h&&(u.__data__=h.__data__),c[f]=u,J4(c[f],t,r,f,c,yo(h,r)));return new cl(s,this._parents,t,r)}function P7t(e){var t=this._name,r=this._id;typeof e!="function"&&(e=TW(e));for(var n=this._groups,i=n.length,s=[],o=[],a=0;a<i;++a)for(var l=n[a],c=l.length,h,u=0;u<c;++u)if(h=l[u]){for(var f=e.call(h,h.__data__,u,l),d,p=yo(h,r),m=0,g=f.length;m<g;++m)(d=f[m])&&J4(d,t,r,m,f,p);s.push(f),o.push(h)}return new cl(s,o,t,r)}var N7t=F1.prototype.constructor;function F7t(){return new N7t(this._groups,this._parents)}function $7t(e,t){var r,n,i;return function(){var s=Od(this,e),o=(this.style.removeProperty(e),Od(this,e));return s===o?null:s===r&&o===n?i:i=t(r=s,n=o)}}function GW(e){return function(){this.style.removeProperty(e)}}function z7t(e,t,r){var n,i=r+"",s;return function(){var o=Od(this,e);return o===i?null:o===n?s:s=t(n=o,r)}}function H7t(e,t,r){var n,i,s;return function(){var o=Od(this,e),a=r(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Od(this,e))),o===l?null:o===n&&l===i?s:(i=l,s=t(n=o,a))}}function q7t(e,t){var r,n,i,s="style."+t,o="end."+s,a;return function(){var l=ha(this,e),c=l.on,h=l.value[s]==null?a||(a=GW(t)):void 0;(c!==r||i!==h)&&(n=(r=c).copy()).on(o,i=h),l.on=n}}function V7t(e,t,r){var n=(e+="")=="transform"?U6t:UW;return t==null?this.styleTween(e,$7t(e,n)).on("end.style."+e,GW(e)):typeof t=="function"?this.styleTween(e,H7t(e,n,X9(this,"style."+e,t))).each(q7t(this._id,e)):this.styleTween(e,z7t(e,n,t),r).on("end.style."+e,null)}function W7t(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function j7t(e,t,r){var n,i;function s(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&W7t(e,o,r)),n}return s._value=t,s}function U7t(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,j7t(e,t,r??""))}function G7t(e){return function(){this.textContent=e}}function K7t(e){return function(){var t=e(this);this.textContent=t??""}}function Y7t(e){return this.tween("text",typeof e=="function"?K7t(X9(this,"text",e)):G7t(e==null?"":e+""))}function X7t(e){return function(t){this.textContent=e.call(this,t)}}function J7t(e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&X7t(i)),t}return n._value=e,n}function Z7t(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,J7t(e))}function Q7t(){for(var e=this._name,t=this._id,r=KW(),n=this._groups,i=n.length,s=0;s<i;++s)for(var o=n[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var h=yo(l,t);J4(l,e,r,c,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new cl(n,this._parents,e,r)}function tSt(){var e,t,r=this,n=r._id,i=r.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};r.each(function(){var c=ha(this,n),h=c.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),i===0&&s()})}var eSt=0;function cl(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function KW(){return++eSt}var ba=F1.prototype;cl.prototype={constructor:cl,select:R7t,selectAll:P7t,selectChild:ba.selectChild,selectChildren:ba.selectChildren,filter:A7t,merge:E7t,selection:F7t,transition:Q7t,call:ba.call,nodes:ba.nodes,node:ba.node,size:ba.size,empty:ba.empty,each:ba.each,on:D7t,attr:f7t,attrTween:y7t,style:V7t,styleTween:U7t,text:Y7t,textTween:Z7t,remove:B7t,tween:s7t,delay:v7t,duration:C7t,ease:T7t,easeVarying:M7t,end:tSt,[Symbol.iterator]:ba[Symbol.iterator]};function rSt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var nSt={time:null,delay:0,duration:250,ease:rSt};function iSt(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function sSt(e){var t,r;e instanceof cl?(t=e._id,e=e._name):(t=KW(),(r=nSt).time=K9(),e=e==null?null:e+"");for(var n=this._groups,i=n.length,s=0;s<i;++s)for(var o=n[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&J4(l,e,t,c,o,r||iSt(l,t));return new cl(n,this._parents,e,t)}F1.prototype.interrupt=r7t;F1.prototype.transition=sSt;const v6=Math.PI,w6=2*v6,nh=1e-6,oSt=w6-nh;function YW(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function aSt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return YW;const r=10**t;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class lSt{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?YW:aSt(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,s,o){this._append`C${+t},${+r},${+n},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,r,n,i,s){if(t=+t,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=n-t,c=i-r,h=o-t,u=a-r,f=h*h+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>nh)if(!(Math.abs(u*l-c*h)>nh)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let d=n-o,p=i-a,m=l*l+c*c,g=d*d+p*p,y=Math.sqrt(m),b=Math.sqrt(f),x=s*Math.tan((v6-Math.acos((m+f-g)/(2*y*b)))/2),T=x/b,S=x/y;Math.abs(T-1)>nh&&this._append`L${t+T*h},${r+T*u}`,this._append`A${s},${s},0,0,${+(u*d>h*p)},${this._x1=t+S*l},${this._y1=r+S*c}`}}arc(t,r,n,i,s,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(i),l=n*Math.sin(i),c=t+a,h=r+l,u=1^o,f=o?i-s:s-i;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>nh||Math.abs(this._y1-h)>nh)&&this._append`L${c},${h}`,n&&(f<0&&(f=f%w6+w6),f>oSt?this._append`A${n},${n},0,1,${u},${t-a},${r-l}A${n},${n},0,1,${u},${this._x1=c},${this._y1=h}`:f>nh&&this._append`A${n},${n},0,${+(f>=v6)},${u},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function Fu(e){return function(){return e}}const sLt=Math.abs,oLt=Math.atan2,aLt=Math.cos,lLt=Math.max,cLt=Math.min,hLt=Math.sin,uLt=Math.sqrt,qD=1e-12,J9=Math.PI,VD=J9/2,fLt=2*J9;function dLt(e){return e>1?0:e<-1?J9:Math.acos(e)}function pLt(e){return e>=1?VD:e<=-1?-VD:Math.asin(e)}function cSt(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new lSt(t)}function hSt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function XW(e){this._context=e}XW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Wx(e){return new XW(e)}function uSt(e){return e[0]}function fSt(e){return e[1]}function dSt(e,t){var r=Fu(!0),n=null,i=Wx,s=null,o=cSt(a);e=typeof e=="function"?e:e===void 0?uSt:Fu(e),t=typeof t=="function"?t:t===void 0?fSt:Fu(t);function a(l){var c,h=(l=hSt(l)).length,u,f=!1,d;for(n==null&&(s=i(d=o())),c=0;c<=h;++c)!(c<h&&r(u=l[c],c,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+e(u,c,l),+t(u,c,l));if(d)return s=null,d+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:Fu(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:Fu(+l),a):t},a.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Fu(!!l),a):r},a.curve=function(l){return arguments.length?(i=l,n!=null&&(s=i(n)),a):i},a.context=function(l){return arguments.length?(l==null?n=s=null:s=i(n=l),a):n},a}class JW{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function ZW(e){return new JW(e,!0)}function QW(e){return new JW(e,!1)}function bc(){}function jx(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Z4(e){this._context=e}Z4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:jx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:jx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vb(e){return new Z4(e)}function tj(e){this._context=e}tj.prototype={areaStart:bc,areaEnd:bc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:jx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pSt(e){return new tj(e)}function ej(e){this._context=e}ej.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:jx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mSt(e){return new ej(e)}function rj(e,t){this._basis=new Z4(e),this._beta=t}rj.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var n=e[0],i=t[0],s=e[r]-n,o=t[r]-i,a=-1,l;++a<=r;)l=a/r,this._basis.point(this._beta*e[a]+(1-this._beta)*(n+l*s),this._beta*t[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const gSt=function e(t){function r(n){return t===1?new Z4(n):new rj(n,t)}return r.beta=function(n){return e(+n)},r}(.85);function Ux(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function Z9(e,t){this._context=e,this._k=(1-t)/6}Z9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ux(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Ux(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const nj=function e(t){function r(n){return new Z9(n,t)}return r.tension=function(n){return e(+n)},r}(0);function Q9(e,t){this._context=e,this._k=(1-t)/6}Q9.prototype={areaStart:bc,areaEnd:bc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ux(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ySt=function e(t){function r(n){return new Q9(n,t)}return r.tension=function(n){return e(+n)},r}(0);function tT(e,t){this._context=e,this._k=(1-t)/6}tT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ux(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const bSt=function e(t){function r(n){return new tT(n,t)}return r.tension=function(n){return e(+n)},r}(0);function eT(e,t,r){var n=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>qD){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);n=(n*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>qD){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,h=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/h,o=(o*c+e._y1*e._l23_2a-r*e._l12_2a)/h}e._context.bezierCurveTo(n,i,s,o,e._x2,e._y2)}function ij(e,t){this._context=e,this._alpha=t}ij.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:eT(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const sj=function e(t){function r(n){return t?new ij(n,t):new Z9(n,0)}return r.alpha=function(n){return e(+n)},r}(.5);function oj(e,t){this._context=e,this._alpha=t}oj.prototype={areaStart:bc,areaEnd:bc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:eT(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const xSt=function e(t){function r(n){return t?new oj(n,t):new Q9(n,0)}return r.alpha=function(n){return e(+n)},r}(.5);function aj(e,t){this._context=e,this._alpha=t}aj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:eT(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const vSt=function e(t){function r(n){return t?new aj(n,t):new tT(n,0)}return r.alpha=function(n){return e(+n)},r}(.5);function lj(e){this._context=e}lj.prototype={areaStart:bc,areaEnd:bc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function wSt(e){return new lj(e)}function WD(e){return e<0?-1:1}function jD(e,t,r){var n=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(n||i<0&&-0),o=(r-e._y1)/(i||n<0&&-0),a=(s*i+o*n)/(n+i);return(WD(s)+WD(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function UD(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function m3(e,t,r){var n=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-n)/3;e._context.bezierCurveTo(n+a,i+a*t,s-a,o-a*r,s,o)}function Gx(e){this._context=e}Gx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:m3(this,this._t0,UD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,m3(this,UD(this,r=jD(this,e,t)),r);break;default:m3(this,this._t0,r=jD(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function cj(e){this._context=new hj(e)}(cj.prototype=Object.create(Gx.prototype)).point=function(e,t){Gx.prototype.point.call(this,t,e)};function hj(e){this._context=e}hj.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,s){this._context.bezierCurveTo(t,e,n,r,s,i)}};function uj(e){return new Gx(e)}function fj(e){return new cj(e)}function dj(e){this._context=e}dj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=GD(e),i=GD(t),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function GD(e){var t,r=e.length-1,n,i=new Array(r),s=new Array(r),o=new Array(r);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,s[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/s[t-1],s[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/s[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function pj(e){return new dj(e)}function Q4(e,t){this._context=e,this._t=t}Q4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function mj(e){return new Q4(e,.5)}function gj(e){return new Q4(e,0)}function yj(e){return new Q4(e,1)}function Op(e,t,r){this.k=e,this.x=t,this.y=r}Op.prototype={constructor:Op,scale:function(e){return e===1?this:new Op(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Op(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Op.prototype;var kSt=k(e=>{var i;const{securityLevel:t}=Ze();let r=$e("body");if(t==="sandbox"){const o=((i=$e(`#i${e}`).node())==null?void 0:i.contentDocument)??document;r=$e(o.body)}return r.select(`#${e}`)},"selectSvgElement");function rT(e){return typeof e>"u"||e===null}k(rT,"isNothing");function bj(e){return typeof e=="object"&&e!==null}k(bj,"isObject");function xj(e){return Array.isArray(e)?e:rT(e)?[]:[e]}k(xj,"toArray");function vj(e,t){var r,n,i,s;if(t)for(s=Object.keys(t),r=0,n=s.length;r<n;r+=1)i=s[r],e[i]=t[i];return e}k(vj,"extend");function wj(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}k(wj,"repeat");function kj(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}k(kj,"isNegativeZero");var CSt=rT,SSt=bj,TSt=xj,_St=wj,MSt=kj,ASt=vj,Qr={isNothing:CSt,isObject:SSt,toArray:TSt,repeat:_St,isNegativeZero:MSt,extend:ASt};function nT(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}k(nT,"formatError");function Id(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=nT(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}k(Id,"YAMLException$1");Id.prototype=Object.create(Error.prototype);Id.prototype.constructor=Id;Id.prototype.toString=k(function(t){return this.name+": "+nT(this,t)},"toString");var _i=Id;function wb(e,t,r,n,i){var s="",o="",a=Math.floor(i/2)-1;return n-t>a&&(s=" ... ",t=n-a+s.length),r-n>a&&(o=" ...",r=n+a-o.length),{str:s+e.slice(t,r).replace(/\t/g,"")+o,pos:n-t+s.length}}k(wb,"getLine");function kb(e,t){return Qr.repeat(" ",t-e.length)+e}k(kb,"padStart");function Cj(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],s,o=-1;s=r.exec(e.buffer);)i.push(s.index),n.push(s.index+s[0].length),e.position<=s.index&&o<0&&(o=n.length-2);o<0&&(o=n.length-1);var a="",l,c,h=Math.min(e.line+t.linesAfter,i.length).toString().length,u=t.maxLength-(t.indent+h+3);for(l=1;l<=t.linesBefore&&!(o-l<0);l++)c=wb(e.buffer,n[o-l],i[o-l],e.position-(n[o]-n[o-l]),u),a=Qr.repeat(" ",t.indent)+kb((e.line-l+1).toString(),h)+" | "+c.str+`
`+a;for(c=wb(e.buffer,n[o],i[o],e.position,u),a+=Qr.repeat(" ",t.indent)+kb((e.line+1).toString(),h)+" | "+c.str+`
`,a+=Qr.repeat("-",t.indent+h+3+c.pos)+`^
`,l=1;l<=t.linesAfter&&!(o+l>=i.length);l++)c=wb(e.buffer,n[o+l],i[o+l],e.position-(n[o]-n[o+l]),u),a+=Qr.repeat(" ",t.indent)+kb((e.line+l+1).toString(),h)+" | "+c.str+`
`;return a.replace(/\n$/,"")}k(Cj,"makeSnippet");var ESt=Cj,LSt=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],OSt=["scalar","sequence","mapping"];function Sj(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}k(Sj,"compileStyleAliases");function Tj(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(LSt.indexOf(r)===-1)throw new _i('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=Sj(t.styleAliases||null),OSt.indexOf(this.kind)===-1)throw new _i('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}k(Tj,"Type$1");var zn=Tj;function k6(e,t){var r=[];return e[t].forEach(function(n){var i=r.length;r.forEach(function(s,o){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=o)}),r[i]=n}),r}k(k6,"compileList");function _j(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(k(n,"collectType"),t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}k(_j,"compileMap");function Kx(e){return this.extend(e)}k(Kx,"Schema$1");Kx.prototype.extend=k(function(t){var r=[],n=[];if(t instanceof zn)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new _i("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof zn))throw new _i("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new _i("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new _i("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof zn))throw new _i("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Kx.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=k6(i,"implicit"),i.compiledExplicit=k6(i,"explicit"),i.compiledTypeMap=_j(i.compiledImplicit,i.compiledExplicit),i},"extend");var DSt=Kx,ISt=new zn("tag:yaml.org,2002:str",{kind:"scalar",construct:k(function(e){return e!==null?e:""},"construct")}),BSt=new zn("tag:yaml.org,2002:seq",{kind:"sequence",construct:k(function(e){return e!==null?e:[]},"construct")}),RSt=new zn("tag:yaml.org,2002:map",{kind:"mapping",construct:k(function(e){return e!==null?e:{}},"construct")}),PSt=new DSt({explicit:[ISt,BSt,RSt]});function Mj(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}k(Mj,"resolveYamlNull");function Aj(){return null}k(Aj,"constructYamlNull");function Ej(e){return e===null}k(Ej,"isNull");var NSt=new zn("tag:yaml.org,2002:null",{kind:"scalar",resolve:Mj,construct:Aj,predicate:Ej,represent:{canonical:k(function(){return"~"},"canonical"),lowercase:k(function(){return"null"},"lowercase"),uppercase:k(function(){return"NULL"},"uppercase"),camelcase:k(function(){return"Null"},"camelcase"),empty:k(function(){return""},"empty")},defaultStyle:"lowercase"});function Lj(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}k(Lj,"resolveYamlBoolean");function Oj(e){return e==="true"||e==="True"||e==="TRUE"}k(Oj,"constructYamlBoolean");function Dj(e){return Object.prototype.toString.call(e)==="[object Boolean]"}k(Dj,"isBoolean");var FSt=new zn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Lj,construct:Oj,predicate:Dj,represent:{lowercase:k(function(e){return e?"true":"false"},"lowercase"),uppercase:k(function(e){return e?"TRUE":"FALSE"},"uppercase"),camelcase:k(function(e){return e?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function Ij(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}k(Ij,"isHexCode");function Bj(e){return 48<=e&&e<=55}k(Bj,"isOctCode");function Rj(e){return 48<=e&&e<=57}k(Rj,"isDecCode");function Pj(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!Ij(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!Bj(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(!Rj(e.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}k(Pj,"resolveYamlInteger");function Nj(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}k(Nj,"constructYamlInteger");function Fj(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Qr.isNegativeZero(e)}k(Fj,"isInteger");var $St=new zn("tag:yaml.org,2002:int",{kind:"scalar",resolve:Pj,construct:Nj,predicate:Fj,represent:{binary:k(function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},"binary"),octal:k(function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},"octal"),decimal:k(function(e){return e.toString(10)},"decimal"),hexadecimal:k(function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),zSt=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function $j(e){return!(e===null||!zSt.test(e)||e[e.length-1]==="_")}k($j,"resolveYamlFloat");function zj(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}k(zj,"constructYamlFloat");var HSt=/^[-+]?[0-9]+e/;function Hj(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Qr.isNegativeZero(e))return"-0.0";return r=e.toString(10),HSt.test(r)?r.replace("e",".e"):r}k(Hj,"representYamlFloat");function qj(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Qr.isNegativeZero(e))}k(qj,"isFloat");var qSt=new zn("tag:yaml.org,2002:float",{kind:"scalar",resolve:$j,construct:zj,predicate:qj,represent:Hj,defaultStyle:"lowercase"}),Vj=PSt.extend({implicit:[NSt,FSt,$St,qSt]}),VSt=Vj,Wj=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),jj=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Uj(e){return e===null?!1:Wj.exec(e)!==null||jj.exec(e)!==null}k(Uj,"resolveYamlTimestamp");function Gj(e){var t,r,n,i,s,o,a,l=0,c=null,h,u,f;if(t=Wj.exec(e),t===null&&(t=jj.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(s=+t[4],o=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(h=+t[10],u=+(t[11]||0),c=(h*60+u)*6e4,t[9]==="-"&&(c=-c)),f=new Date(Date.UTC(r,n,i,s,o,a,l)),c&&f.setTime(f.getTime()-c),f}k(Gj,"constructYamlTimestamp");function Kj(e){return e.toISOString()}k(Kj,"representYamlTimestamp");var WSt=new zn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Uj,construct:Gj,instanceOf:Date,represent:Kj});function Yj(e){return e==="<<"||e===null}k(Yj,"resolveYamlMerge");var jSt=new zn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Yj}),iT=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Xj(e){if(e===null)return!1;var t,r,n=0,i=e.length,s=iT;for(r=0;r<i;r++)if(t=s.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}k(Xj,"resolveYamlBinary");function Jj(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,s=iT,o=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(n.charAt(t));return r=i%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),new Uint8Array(a)}k(Jj,"constructYamlBinary");function Zj(e){var t="",r=0,n,i,s=e.length,o=iT;for(n=0;n<s;n++)n%3===0&&n&&(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]),r=(r<<8)+e[n];return i=s%3,i===0?(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]):i===2?(t+=o[r>>10&63],t+=o[r>>4&63],t+=o[r<<2&63],t+=o[64]):i===1&&(t+=o[r>>2&63],t+=o[r<<4&63],t+=o[64],t+=o[64]),t}k(Zj,"representYamlBinary");function Qj(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}k(Qj,"isBinary");var USt=new zn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Xj,construct:Jj,predicate:Qj,represent:Zj}),GSt=Object.prototype.hasOwnProperty,KSt=Object.prototype.toString;function tU(e){if(e===null)return!0;var t=[],r,n,i,s,o,a=e;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],o=!1,KSt.call(i)!=="[object Object]")return!1;for(s in i)if(GSt.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}k(tU,"resolveYamlOmap");function eU(e){return e!==null?e:[]}k(eU,"constructYamlOmap");var YSt=new zn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:tU,construct:eU}),XSt=Object.prototype.toString;function rU(e){if(e===null)return!0;var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(n=o[t],XSt.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[t]=[i[0],n[i[0]]]}return!0}k(rU,"resolveYamlPairs");function nU(e){if(e===null)return[];var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1)n=o[t],i=Object.keys(n),s[t]=[i[0],n[i[0]]];return s}k(nU,"constructYamlPairs");var JSt=new zn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:rU,construct:nU}),ZSt=Object.prototype.hasOwnProperty;function iU(e){if(e===null)return!0;var t,r=e;for(t in r)if(ZSt.call(r,t)&&r[t]!==null)return!1;return!0}k(iU,"resolveYamlSet");function sU(e){return e!==null?e:{}}k(sU,"constructYamlSet");var QSt=new zn("tag:yaml.org,2002:set",{kind:"mapping",resolve:iU,construct:sU}),oU=VSt.extend({implicit:[WSt,jSt],explicit:[USt,YSt,JSt,QSt]}),xc=Object.prototype.hasOwnProperty,Yx=1,aU=2,lU=3,Xx=4,g3=1,t8t=2,KD=3,e8t=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,r8t=/[\x85\u2028\u2029]/,n8t=/[,\[\]\{\}]/,cU=/^(?:!|!!|![a-z\-]+!)$/i,hU=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function C6(e){return Object.prototype.toString.call(e)}k(C6,"_class");function to(e){return e===10||e===13}k(to,"is_EOL");function nc(e){return e===9||e===32}k(nc,"is_WHITE_SPACE");function ni(e){return e===9||e===32||e===10||e===13}k(ni,"is_WS_OR_EOL");function bh(e){return e===44||e===91||e===93||e===123||e===125}k(bh,"is_FLOW_INDICATOR");function uU(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}k(uU,"fromHexCode");function fU(e){return e===120?2:e===117?4:e===85?8:0}k(fU,"escapedHexLen");function dU(e){return 48<=e&&e<=57?e-48:-1}k(dU,"fromDecimalCode");function S6(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}k(S6,"simpleEscapeSequence");function pU(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}k(pU,"charFromCodepoint");var mU=new Array(256),gU=new Array(256);for(Kc=0;Kc<256;Kc++)mU[Kc]=S6(Kc)?1:0,gU[Kc]=S6(Kc);var Kc;function yU(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||oU,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}k(yU,"State$1");function sT(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=ESt(r),new _i(t,r)}k(sT,"generateError");function ee(e,t){throw sT(e,t)}k(ee,"throwError");function vg(e,t){e.onWarning&&e.onWarning.call(null,sT(e,t))}k(vg,"throwWarning");var YD={YAML:k(function(t,r,n){var i,s,o;t.version!==null&&ee(t,"duplication of %YAML directive"),n.length!==1&&ee(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&ee(t,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&ee(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&vg(t,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:k(function(t,r,n){var i,s;n.length!==2&&ee(t,"TAG directive accepts exactly two arguments"),i=n[0],s=n[1],cU.test(i)||ee(t,"ill-formed tag handle (first argument) of the TAG directive"),xc.call(t.tagMap,i)&&ee(t,'there is a previously declared suffix for "'+i+'" tag handle'),hU.test(s)||ee(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{ee(t,"tag prefix is malformed: "+s)}t.tagMap[i]=s},"handleTagDirective")};function Ja(e,t,r,n){var i,s,o,a;if(t<r){if(a=e.input.slice(t,r),n)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||ee(e,"expected valid JSON character");else e8t.test(a)&&ee(e,"the stream contains non-printable characters");e.result+=a}}k(Ja,"captureSegment");function T6(e,t,r,n){var i,s,o,a;for(Qr.isObject(r)||ee(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),o=0,a=i.length;o<a;o+=1)s=i[o],xc.call(t,s)||(t[s]=r[s],n[s]=!0)}k(T6,"mergeMappings");function xh(e,t,r,n,i,s,o,a,l){var c,h;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,h=i.length;c<h;c+=1)Array.isArray(i[c])&&ee(e,"nested arrays are not supported inside keys"),typeof i=="object"&&C6(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&C6(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,h=s.length;c<h;c+=1)T6(e,t,s[c],r);else T6(e,t,s,r);else!e.json&&!xc.call(r,i)&&xc.call(t,i)&&(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=l||e.position,ee(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[i]=s,delete r[i];return t}k(xh,"storeMappingPair");function tw(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):ee(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}k(tw,"readLineBreak");function Nr(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;nc(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(to(i))for(tw(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&vg(e,"deficient indentation"),n}k(Nr,"skipSeparationSpace");function z1(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||ni(r)))}k(z1,"testDocumentSeparator");function ew(e,t){t===1?e.result+=" ":t>1&&(e.result+=Qr.repeat(`
`,t-1))}k(ew,"writeFoldedLines");function bU(e,t,r){var n,i,s,o,a,l,c,h,u=e.kind,f=e.result,d;if(d=e.input.charCodeAt(e.position),ni(d)||bh(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(i=e.input.charCodeAt(e.position+1),ni(i)||r&&bh(i)))return!1;for(e.kind="scalar",e.result="",s=o=e.position,a=!1;d!==0;){if(d===58){if(i=e.input.charCodeAt(e.position+1),ni(i)||r&&bh(i))break}else if(d===35){if(n=e.input.charCodeAt(e.position-1),ni(n))break}else{if(e.position===e.lineStart&&z1(e)||r&&bh(d))break;if(to(d))if(l=e.line,c=e.lineStart,h=e.lineIndent,Nr(e,!1,-1),e.lineIndent>=t){a=!0,d=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=l,e.lineStart=c,e.lineIndent=h;break}}a&&(Ja(e,s,o,!1),ew(e,e.line-l),s=o=e.position,a=!1),nc(d)||(o=e.position+1),d=e.input.charCodeAt(++e.position)}return Ja(e,s,o,!1),e.result?!0:(e.kind=u,e.result=f,!1)}k(bU,"readPlainScalar");function xU(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Ja(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else to(r)?(Ja(e,n,i,!0),ew(e,Nr(e,!1,t)),n=i=e.position):e.position===e.lineStart&&z1(e)?ee(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);ee(e,"unexpected end of the stream within a single quoted scalar")}k(xU,"readSingleQuotedScalar");function vU(e,t){var r,n,i,s,o,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return Ja(e,r,e.position,!0),e.position++,!0;if(a===92){if(Ja(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),to(a))Nr(e,!1,t);else if(a<256&&mU[a])e.result+=gU[a],e.position++;else if((o=fU(a))>0){for(i=o,s=0;i>0;i--)a=e.input.charCodeAt(++e.position),(o=uU(a))>=0?s=(s<<4)+o:ee(e,"expected hexadecimal character");e.result+=pU(s),e.position++}else ee(e,"unknown escape sequence");r=n=e.position}else to(a)?(Ja(e,r,n,!0),ew(e,Nr(e,!1,t)),r=n=e.position):e.position===e.lineStart&&z1(e)?ee(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}ee(e,"unexpected end of the stream within a double quoted scalar")}k(vU,"readDoubleQuotedScalar");function wU(e,t){var r=!0,n,i,s,o=e.tag,a,l=e.anchor,c,h,u,f,d,p=Object.create(null),m,g,y,b;if(b=e.input.charCodeAt(e.position),b===91)h=93,d=!1,a=[];else if(b===123)h=125,d=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),b=e.input.charCodeAt(++e.position);b!==0;){if(Nr(e,!0,t),b=e.input.charCodeAt(e.position),b===h)return e.position++,e.tag=o,e.anchor=l,e.kind=d?"mapping":"sequence",e.result=a,!0;r?b===44&&ee(e,"expected the node content, but found ','"):ee(e,"missed comma between flow collection entries"),g=m=y=null,u=f=!1,b===63&&(c=e.input.charCodeAt(e.position+1),ni(c)&&(u=f=!0,e.position++,Nr(e,!0,t))),n=e.line,i=e.lineStart,s=e.position,du(e,t,Yx,!1,!0),g=e.tag,m=e.result,Nr(e,!0,t),b=e.input.charCodeAt(e.position),(f||e.line===n)&&b===58&&(u=!0,b=e.input.charCodeAt(++e.position),Nr(e,!0,t),du(e,t,Yx,!1,!0),y=e.result),d?xh(e,a,p,g,m,y,n,i,s):u?a.push(xh(e,null,p,g,m,y,n,i,s)):a.push(m),Nr(e,!0,t),b=e.input.charCodeAt(e.position),b===44?(r=!0,b=e.input.charCodeAt(++e.position)):r=!1}ee(e,"unexpected end of the stream within a flow collection")}k(wU,"readFlowCollection");function kU(e,t){var r,n,i=g3,s=!1,o=!1,a=t,l=0,c=!1,h,u;if(u=e.input.charCodeAt(e.position),u===124)n=!1;else if(u===62)n=!0;else return!1;for(e.kind="scalar",e.result="";u!==0;)if(u=e.input.charCodeAt(++e.position),u===43||u===45)g3===i?i=u===43?KD:t8t:ee(e,"repeat of a chomping mode identifier");else if((h=dU(u))>=0)h===0?ee(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?ee(e,"repeat of an indentation width identifier"):(a=t+h-1,o=!0);else break;if(nc(u)){do u=e.input.charCodeAt(++e.position);while(nc(u));if(u===35)do u=e.input.charCodeAt(++e.position);while(!to(u)&&u!==0)}for(;u!==0;){for(tw(e),e.lineIndent=0,u=e.input.charCodeAt(e.position);(!o||e.lineIndent<a)&&u===32;)e.lineIndent++,u=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>a&&(a=e.lineIndent),to(u)){l++;continue}if(e.lineIndent<a){i===KD?e.result+=Qr.repeat(`
`,s?1+l:l):i===g3&&s&&(e.result+=`
`);break}for(n?nc(u)?(c=!0,e.result+=Qr.repeat(`
`,s?1+l:l)):c?(c=!1,e.result+=Qr.repeat(`
`,l+1)):l===0?s&&(e.result+=" "):e.result+=Qr.repeat(`
`,l):e.result+=Qr.repeat(`
`,s?1+l:l),s=!0,o=!0,l=0,r=e.position;!to(u)&&u!==0;)u=e.input.charCodeAt(++e.position);Ja(e,r,e.position,!1)}return!0}k(kU,"readBlockScalar");function _6(e,t){var r,n=e.tag,i=e.anchor,s=[],o,a=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,ee(e,"tab characters must not be used in indentation")),!(l!==45||(o=e.input.charCodeAt(e.position+1),!ni(o))));){if(a=!0,e.position++,Nr(e,!0,-1)&&e.lineIndent<=t){s.push(null),l=e.input.charCodeAt(e.position);continue}if(r=e.line,du(e,t,lU,!1,!0),s.push(e.result),Nr(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&l!==0)ee(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=s,!0):!1}k(_6,"readBlockSequence");function CU(e,t,r){var n,i,s,o,a,l,c=e.tag,h=e.anchor,u={},f=Object.create(null),d=null,p=null,m=null,g=!1,y=!1,b;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),b=e.input.charCodeAt(e.position);b!==0;){if(!g&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,ee(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),s=e.line,(b===63||b===58)&&ni(n))b===63?(g&&(xh(e,u,f,d,p,null,o,a,l),d=p=m=null),y=!0,g=!0,i=!0):g?(g=!1,i=!0):ee(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,b=n;else{if(o=e.line,a=e.lineStart,l=e.position,!du(e,r,aU,!1,!0))break;if(e.line===s){for(b=e.input.charCodeAt(e.position);nc(b);)b=e.input.charCodeAt(++e.position);if(b===58)b=e.input.charCodeAt(++e.position),ni(b)||ee(e,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(xh(e,u,f,d,p,null,o,a,l),d=p=m=null),y=!0,g=!1,i=!1,d=e.tag,p=e.result;else if(y)ee(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=h,!0}else if(y)ee(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=h,!0}if((e.line===s||e.lineIndent>t)&&(g&&(o=e.line,a=e.lineStart,l=e.position),du(e,t,Xx,!0,i)&&(g?p=e.result:m=e.result),g||(xh(e,u,f,d,p,m,o,a,l),d=p=m=null),Nr(e,!0,-1),b=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&b!==0)ee(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return g&&xh(e,u,f,d,p,null,o,a,l),y&&(e.tag=c,e.anchor=h,e.kind="mapping",e.result=u),y}k(CU,"readBlockMapping");function SU(e){var t,r=!1,n=!1,i,s,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&ee(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(r=!0,o=e.input.charCodeAt(++e.position)):o===33?(n=!0,i="!!",o=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(s=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):ee(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!ni(o);)o===33&&(n?ee(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),cU.test(i)||ee(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),n8t.test(s)&&ee(e,"tag suffix cannot contain flow indicator characters")}s&&!hU.test(s)&&ee(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{ee(e,"tag name is malformed: "+s)}return r?e.tag=s:xc.call(e.tagMap,i)?e.tag=e.tagMap[i]+s:i==="!"?e.tag="!"+s:i==="!!"?e.tag="tag:yaml.org,2002:"+s:ee(e,'undeclared tag handle "'+i+'"'),!0}k(SU,"readTagProperty");function TU(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&ee(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!ni(r)&&!bh(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&ee(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}k(TU,"readAnchorProperty");function _U(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!ni(n)&&!bh(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&ee(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),xc.call(e.anchorMap,r)||ee(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],Nr(e,!0,-1),!0}k(_U,"readAlias");function du(e,t,r,n,i){var s,o,a,l=1,c=!1,h=!1,u,f,d,p,m,g;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=a=Xx===r||lU===r,n&&Nr(e,!0,-1)&&(c=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;SU(e)||TU(e);)Nr(e,!0,-1)?(c=!0,a=s,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):a=!1;if(a&&(a=c||i),(l===1||Xx===r)&&(Yx===r||aU===r?m=t:m=t+1,g=e.position-e.lineStart,l===1?a&&(_6(e,g)||CU(e,g,m))||wU(e,m)?h=!0:(o&&kU(e,m)||xU(e,m)||vU(e,m)?h=!0:_U(e)?(h=!0,(e.tag!==null||e.anchor!==null)&&ee(e,"alias node should not have any properties")):bU(e,m,Yx===r)&&(h=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(h=a&&_6(e,g))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&ee(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),u=0,f=e.implicitTypes.length;u<f;u+=1)if(p=e.implicitTypes[u],p.resolve(e.result)){e.result=p.construct(e.result),e.tag=p.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(xc.call(e.typeMap[e.kind||"fallback"],e.tag))p=e.typeMap[e.kind||"fallback"][e.tag];else for(p=null,d=e.typeMap.multi[e.kind||"fallback"],u=0,f=d.length;u<f;u+=1)if(e.tag.slice(0,d[u].tag.length)===d[u].tag){p=d[u];break}p||ee(e,"unknown tag !<"+e.tag+">"),e.result!==null&&p.kind!==e.kind&&ee(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+p.kind+'", not "'+e.kind+'"'),p.resolve(e.result,e.tag)?(e.result=p.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):ee(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||h}k(du,"composeNode");function MU(e){var t=e.position,r,n,i,s=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(Nr(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(s=!0,o=e.input.charCodeAt(++e.position),r=e.position;o!==0&&!ni(o);)o=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&ee(e,"directive name must not be less than one character in length");o!==0;){for(;nc(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!to(o));break}if(to(o))break;for(r=e.position;o!==0&&!ni(o);)o=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}o!==0&&tw(e),xc.call(YD,n)?YD[n](e,n,i):vg(e,'unknown document directive "'+n+'"')}if(Nr(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Nr(e,!0,-1)):s&&ee(e,"directives end mark is expected"),du(e,e.lineIndent-1,Xx,!1,!0),Nr(e,!0,-1),e.checkLineBreaks&&r8t.test(e.input.slice(t,e.position))&&vg(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&z1(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Nr(e,!0,-1));return}if(e.position<e.length-1)ee(e,"end of the stream or a document separator is expected");else return}k(MU,"readDocument");function oT(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new yU(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,ee(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)MU(r);return r.documents}k(oT,"loadDocuments");function i8t(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=oT(e,r);if(typeof t!="function")return n;for(var i=0,s=n.length;i<s;i+=1)t(n[i])}k(i8t,"loadAll$1");function AU(e,t){var r=oT(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new _i("expected a single document in the stream, but found more")}}k(AU,"load$1");var s8t=AU,o8t={load:s8t},EU=Object.prototype.toString,LU=Object.prototype.hasOwnProperty,aT=65279,a8t=9,wg=10,l8t=13,c8t=32,h8t=33,u8t=34,M6=35,f8t=37,d8t=38,p8t=39,m8t=42,OU=44,g8t=45,Jx=58,y8t=61,b8t=62,x8t=63,v8t=64,DU=91,IU=93,w8t=96,BU=123,k8t=124,RU=125,Un={};Un[0]="\\0";Un[7]="\\a";Un[8]="\\b";Un[9]="\\t";Un[10]="\\n";Un[11]="\\v";Un[12]="\\f";Un[13]="\\r";Un[27]="\\e";Un[34]='\\"';Un[92]="\\\\";Un[133]="\\N";Un[160]="\\_";Un[8232]="\\L";Un[8233]="\\P";var C8t=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],S8t=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function PU(e,t){var r,n,i,s,o,a,l;if(t===null)return{};for(r={},n=Object.keys(t),i=0,s=n.length;i<s;i+=1)o=n[i],a=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=e.compiledTypeMap.fallback[o],l&&LU.call(l.styleAliases,a)&&(a=l.styleAliases[a]),r[o]=a;return r}k(PU,"compileStyleMap");function NU(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new _i("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Qr.repeat("0",n-t.length)+t}k(NU,"encodeHex");var T8t=1,kg=2;function FU(e){this.schema=e.schema||oU,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Qr.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=PU(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?kg:T8t,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}k(FU,"State");function A6(e,t){for(var r=Qr.repeat(" ",t),n=0,i=-1,s="",o,a=e.length;n<a;)i=e.indexOf(`
`,n),i===-1?(o=e.slice(n),n=a):(o=e.slice(n,i+1),n=i+1),o.length&&o!==`
`&&(s+=r),s+=o;return s}k(A6,"indentString");function Zx(e,t){return`
`+Qr.repeat(" ",e.indent*t)}k(Zx,"generateNextLine");function $U(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}k($U,"testImplicitResolving");function Cg(e){return e===c8t||e===a8t}k(Cg,"isWhitespace");function Bd(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==aT||65536<=e&&e<=1114111}k(Bd,"isPrintable");function E6(e){return Bd(e)&&e!==aT&&e!==l8t&&e!==wg}k(E6,"isNsCharOrWhitespace");function L6(e,t,r){var n=E6(e),i=n&&!Cg(e);return(r?n:n&&e!==OU&&e!==DU&&e!==IU&&e!==BU&&e!==RU)&&e!==M6&&!(t===Jx&&!i)||E6(t)&&!Cg(t)&&e===M6||t===Jx&&i}k(L6,"isPlainSafe");function zU(e){return Bd(e)&&e!==aT&&!Cg(e)&&e!==g8t&&e!==x8t&&e!==Jx&&e!==OU&&e!==DU&&e!==IU&&e!==BU&&e!==RU&&e!==M6&&e!==d8t&&e!==m8t&&e!==h8t&&e!==k8t&&e!==y8t&&e!==b8t&&e!==p8t&&e!==u8t&&e!==f8t&&e!==v8t&&e!==w8t}k(zU,"isPlainSafeFirst");function HU(e){return!Cg(e)&&e!==Jx}k(HU,"isPlainSafeLast");function af(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}k(af,"codePointAt");function lT(e){var t=/^\n* /;return t.test(e)}k(lT,"needIndentIndicator");var qU=1,O6=2,VU=3,WU=4,ef=5;function jU(e,t,r,n,i,s,o,a){var l,c=0,h=null,u=!1,f=!1,d=n!==-1,p=-1,m=zU(af(e,0))&&HU(af(e,e.length-1));if(t||o)for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=af(e,l),!Bd(c))return ef;m=m&&L6(c,h,a),h=c}else{for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=af(e,l),c===wg)u=!0,d&&(f=f||l-p-1>n&&e[p+1]!==" ",p=l);else if(!Bd(c))return ef;m=m&&L6(c,h,a),h=c}f=f||d&&l-p-1>n&&e[p+1]!==" "}return!u&&!f?m&&!o&&!i(e)?qU:s===kg?ef:O6:r>9&&lT(e)?ef:o?s===kg?ef:O6:f?WU:VU}k(jU,"chooseScalarStyle");function UU(e,t,r,n,i){e.dump=function(){if(t.length===0)return e.quotingType===kg?'""':"''";if(!e.noCompatMode&&(C8t.indexOf(t)!==-1||S8t.test(t)))return e.quotingType===kg?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,r),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),a=n||e.flowLevel>-1&&r>=e.flowLevel;function l(c){return $U(e,c)}switch(k(l,"testAmbiguity"),jU(t,a,e.indent,o,l,e.quotingType,e.forceQuotes&&!n,i)){case qU:return t;case O6:return"'"+t.replace(/'/g,"''")+"'";case VU:return"|"+D6(t,e.indent)+I6(A6(t,s));case WU:return">"+D6(t,e.indent)+I6(A6(GU(t,o),s));case ef:return'"'+KU(t)+'"';default:throw new _i("impossible error: invalid scalar style")}}()}k(UU,"writeScalar");function D6(e,t){var r=lT(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),s=i?"+":n?"":"-";return r+s+`
`}k(D6,"blockHeader");function I6(e){return e[e.length-1]===`
`?e.slice(0,-1):e}k(I6,"dropEndingNewline");function GU(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,r.lastIndex=c,B6(e.slice(0,c),t)}(),i=e[0]===`
`||e[0]===" ",s,o;o=r.exec(e);){var a=o[1],l=o[2];s=l[0]===" ",n+=a+(!i&&!s&&l!==""?`
`:"")+B6(l,t),i=s}return n}k(GU,"foldString");function B6(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,s,o=0,a=0,l="";n=r.exec(e);)a=n.index,a-i>t&&(s=o>i?o:a,l+=`
`+e.slice(i,s),i=s+1),o=a;return l+=`
`,e.length-i>t&&o>i?l+=e.slice(i,o)+`
`+e.slice(o+1):l+=e.slice(i),l.slice(1)}k(B6,"foldLine");function KU(e){for(var t="",r=0,n,i=0;i<e.length;r>=65536?i+=2:i++)r=af(e,i),n=Un[r],!n&&Bd(r)?(t+=e[i],r>=65536&&(t+=e[i+1])):t+=n||NU(r);return t}k(KU,"escapeString");function YU(e,t,r){var n="",i=e.tag,s,o,a;for(s=0,o=r.length;s<o;s+=1)a=r[s],e.replacer&&(a=e.replacer.call(r,String(s),a)),(ea(e,t,a,!1,!1)||typeof a>"u"&&ea(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}k(YU,"writeFlowSequence");function R6(e,t,r,n){var i="",s=e.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],e.replacer&&(l=e.replacer.call(r,String(o),l)),(ea(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&ea(e,t+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=Zx(e,t)),e.dump&&wg===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=s,e.dump=i||"[]"}k(R6,"writeBlockSequence");function XU(e,t,r){var n="",i=e.tag,s=Object.keys(r),o,a,l,c,h;for(o=0,a=s.length;o<a;o+=1)h="",n!==""&&(h+=", "),e.condenseFlow&&(h+='"'),l=s[o],c=r[l],e.replacer&&(c=e.replacer.call(r,l,c)),ea(e,t,l,!1,!1)&&(e.dump.length>1024&&(h+="? "),h+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),ea(e,t,c,!1,!1)&&(h+=e.dump,n+=h));e.tag=i,e.dump="{"+n+"}"}k(XU,"writeFlowMapping");function JU(e,t,r,n){var i="",s=e.tag,o=Object.keys(r),a,l,c,h,u,f;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new _i("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)f="",(!n||i!=="")&&(f+=Zx(e,t)),c=o[a],h=r[c],e.replacer&&(h=e.replacer.call(r,c,h)),ea(e,t+1,c,!0,!0,!0)&&(u=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,u&&(e.dump&&wg===e.dump.charCodeAt(0)?f+="?":f+="? "),f+=e.dump,u&&(f+=Zx(e,t)),ea(e,t+1,h,!0,u)&&(e.dump&&wg===e.dump.charCodeAt(0)?f+=":":f+=": ",f+=e.dump,i+=f));e.tag=s,e.dump=i||"{}"}k(JU,"writeBlockMapping");function P6(e,t,r){var n,i,s,o,a,l;for(i=r?e.explicitTypes:e.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(r?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(l=e.styleMap[a.tag]||a.defaultStyle,EU.call(a.represent)==="[object Function]")n=a.represent(t,l);else if(LU.call(a.represent,l))n=a.represent[l](t,l);else throw new _i("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');e.dump=n}return!0}return!1}k(P6,"detectType");function ea(e,t,r,n,i,s,o){e.tag=null,e.dump=r,P6(e,r,!1)||P6(e,r,!0);var a=EU.call(e.dump),l=n,c;n&&(n=e.flowLevel<0||e.flowLevel>t);var h=a==="[object Object]"||a==="[object Array]",u,f;if(h&&(u=e.duplicates.indexOf(r),f=u!==-1),(e.tag!==null&&e.tag!=="?"||f||e.indent!==2&&t>0)&&(i=!1),f&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(h&&f&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(JU(e,t,e.dump,i),f&&(e.dump="&ref_"+u+e.dump)):(XU(e,t,e.dump),f&&(e.dump="&ref_"+u+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?R6(e,t-1,e.dump,i):R6(e,t,e.dump,i),f&&(e.dump="&ref_"+u+e.dump)):(YU(e,t,e.dump),f&&(e.dump="&ref_"+u+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&UU(e,e.dump,t,s,l);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new _i("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}k(ea,"writeNode");function ZU(e,t){var r=[],n=[],i,s;for(Qx(e,r,n),i=0,s=n.length;i<s;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(s)}k(ZU,"getDuplicateReferences");function Qx(e,t,r){var n,i,s;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,s=e.length;i<s;i+=1)Qx(e[i],t,r);else for(n=Object.keys(e),i=0,s=n.length;i<s;i+=1)Qx(e[n[i]],t,r)}k(Qx,"inspectNode");function _8t(e,t){t=t||{};var r=new FU(t);r.noRefs||ZU(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),ea(r,0,n,!0,!0)?r.dump+`
`:""}k(_8t,"dump$1");function M8t(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}k(M8t,"renamed");var A8t=Vj,E8t=o8t.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var En={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},XD={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function Dp(e,t){if(e===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};e=kr(e),t=kr(t);const[r,n]=[e.x,e.y],[i,s]=[t.x,t.y],o=i-r,a=s-n;return{angle:Math.atan(a/o),deltaX:o,deltaY:a}}k(Dp,"calculateDeltaAndAngle");var kr=k(e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,"pointTransformer"),L8t=k(e=>({x:k(function(t,r,n){let i=0;const s=kr(n[0]).x<kr(n[n.length-1]).x?"left":"right";if(r===0&&Object.hasOwn(En,e.arrowTypeStart)){const{angle:d,deltaX:p}=Dp(n[0],n[1]);i=En[e.arrowTypeStart]*Math.cos(d)*(p>=0?1:-1)}else if(r===n.length-1&&Object.hasOwn(En,e.arrowTypeEnd)){const{angle:d,deltaX:p}=Dp(n[n.length-1],n[n.length-2]);i=En[e.arrowTypeEnd]*Math.cos(d)*(p>=0?1:-1)}const o=Math.abs(kr(t).x-kr(n[n.length-1]).x),a=Math.abs(kr(t).y-kr(n[n.length-1]).y),l=Math.abs(kr(t).x-kr(n[0]).x),c=Math.abs(kr(t).y-kr(n[0]).y),h=En[e.arrowTypeStart],u=En[e.arrowTypeEnd],f=1;if(o<u&&o>0&&a<u){let d=u+f-o;d*=s==="right"?-1:1,i-=d}if(l<h&&l>0&&c<h){let d=h+f-l;d*=s==="right"?-1:1,i+=d}return kr(t).x+i},"x"),y:k(function(t,r,n){let i=0;const s=kr(n[0]).y<kr(n[n.length-1]).y?"down":"up";if(r===0&&Object.hasOwn(En,e.arrowTypeStart)){const{angle:d,deltaY:p}=Dp(n[0],n[1]);i=En[e.arrowTypeStart]*Math.abs(Math.sin(d))*(p>=0?1:-1)}else if(r===n.length-1&&Object.hasOwn(En,e.arrowTypeEnd)){const{angle:d,deltaY:p}=Dp(n[n.length-1],n[n.length-2]);i=En[e.arrowTypeEnd]*Math.abs(Math.sin(d))*(p>=0?1:-1)}const o=Math.abs(kr(t).y-kr(n[n.length-1]).y),a=Math.abs(kr(t).x-kr(n[n.length-1]).x),l=Math.abs(kr(t).y-kr(n[0]).y),c=Math.abs(kr(t).x-kr(n[0]).x),h=En[e.arrowTypeStart],u=En[e.arrowTypeEnd],f=1;if(o<u&&o>0&&a<u){let d=u+f-o;d*=s==="up"?-1:1,i-=d}if(l<h&&l>0&&c<h){let d=h+f-l;d*=s==="up"?-1:1,i+=d}return kr(t).y+i},"y")}),"getLineFunctionsWithOffset"),cT=k(({flowchart:e})=>{var i,s;const t=((i=e==null?void 0:e.subGraphTitleMargin)==null?void 0:i.top)??0,r=((s=e==null?void 0:e.subGraphTitleMargin)==null?void 0:s.bottom)??0,n=t+r;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:n}},"getSubGraphTitleMargins"),O8t=k(e=>{const{handDrawnSeed:t}=Ze();return{fill:e,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:e,seed:t}},"solidStateFill"),n0=k(e=>{const t=D8t([...e.cssCompiledStyles||[],...e.cssStyles||[],...e.labelStyle||[]]);return{stylesMap:t,stylesArray:[...t]}},"compileStyles"),D8t=k(e=>{const t=new Map;return e.forEach(r=>{const[n,i]=r.split(":");t.set(n.trim(),i==null?void 0:i.trim())}),t},"styles2Map"),QU=k(e=>e==="color"||e==="font-size"||e==="font-family"||e==="font-weight"||e==="font-style"||e==="text-decoration"||e==="text-align"||e==="text-transform"||e==="line-height"||e==="letter-spacing"||e==="word-spacing"||e==="text-shadow"||e==="text-overflow"||e==="white-space"||e==="word-wrap"||e==="word-break"||e==="overflow-wrap"||e==="hyphens","isLabelStyle"),Ut=k(e=>{const{stylesArray:t}=n0(e),r=[],n=[],i=[],s=[];return t.forEach(o=>{const a=o[0];QU(a)?r.push(o.join(":")+" !important"):(n.push(o.join(":")+" !important"),a.includes("stroke")&&i.push(o.join(":")+" !important"),a==="fill"&&s.push(o.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:n.join(";"),stylesArray:t,borderStyles:i,backgroundStyles:s}},"styles2String"),jt=k((e,t)=>{var l;const{themeVariables:r,handDrawnSeed:n}=Ze(),{nodeBorder:i,mainBkg:s}=r,{stylesMap:o}=n0(e);return Object.assign({roughness:.7,fill:o.get("fill")||s,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:o.get("stroke")||i,seed:n,strokeWidth:((l=o.get("stroke-width"))==null?void 0:l.replace("px",""))||1.3,fillLineDash:[0,0],strokeLineDash:I8t(o.get("stroke-dasharray"))},t)},"userNodeOverrides"),I8t=k(e=>{if(!e)return[0,0];const t=e.trim().split(/\s+/).map(Number);if(t.length===1){const i=isNaN(t[0])?0:t[0];return[i,i]}const r=isNaN(t[0])?0:t[0],n=isNaN(t[1])?0:t[1];return[r,n]},"getStrokeDashArray"),hT={},nn={};Object.defineProperty(nn,"__esModule",{value:!0});nn.BLANK_URL=nn.relativeFirstCharacters=nn.whitespaceEscapeCharsRegex=nn.urlSchemeRegex=nn.ctrlCharactersRegex=nn.htmlCtrlEntityRegex=nn.htmlEntitiesRegex=nn.invalidProtocolRegex=void 0;nn.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im;nn.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g;nn.htmlCtrlEntityRegex=/&(newline|tab);/gi;nn.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim;nn.urlSchemeRegex=/^.+(:|&colon;)/gim;nn.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g;nn.relativeFirstCharacters=[".","/"];nn.BLANK_URL="about:blank";Object.defineProperty(hT,"__esModule",{value:!0});var tG=hT.sanitizeUrl=void 0,An=nn;function B8t(e){return An.relativeFirstCharacters.indexOf(e[0])>-1}function R8t(e){var t=e.replace(An.ctrlCharactersRegex,"");return t.replace(An.htmlEntitiesRegex,function(r,n){return String.fromCharCode(n)})}function P8t(e){return URL.canParse(e)}function JD(e){try{return decodeURIComponent(e)}catch{return e}}function N8t(e){if(!e)return An.BLANK_URL;var t,r=JD(e.trim());do r=R8t(r).replace(An.htmlCtrlEntityRegex,"").replace(An.ctrlCharactersRegex,"").replace(An.whitespaceEscapeCharsRegex,"").trim(),r=JD(r),t=r.match(An.ctrlCharactersRegex)||r.match(An.htmlEntitiesRegex)||r.match(An.htmlCtrlEntityRegex)||r.match(An.whitespaceEscapeCharsRegex);while(t&&t.length>0);var n=r;if(!n)return An.BLANK_URL;if(B8t(n))return n;var i=n.trimStart(),s=i.match(An.urlSchemeRegex);if(!s)return n;var o=s[0].toLowerCase().trim();if(An.invalidProtocolRegex.test(o))return An.BLANK_URL;var a=i.replace(/\\/g,"/");if(o==="mailto:"||o.includes("://"))return a;if(o==="http:"||o==="https:"){if(!P8t(a))return An.BLANK_URL;var l=new URL(a);return l.protocol=l.protocol.toLowerCase(),l.hostname=l.hostname.toLowerCase(),l.toString()}return a}tG=hT.sanitizeUrl=N8t;var F8t="",$8t={curveBasis:vb,curveBasisClosed:pSt,curveBasisOpen:mSt,curveBumpX:ZW,curveBumpY:QW,curveBundle:gSt,curveCardinalClosed:ySt,curveCardinalOpen:bSt,curveCardinal:nj,curveCatmullRomClosed:xSt,curveCatmullRomOpen:vSt,curveCatmullRom:sj,curveLinear:Wx,curveLinearClosed:wSt,curveMonotoneX:uj,curveMonotoneY:fj,curveNatural:pj,curveStep:mj,curveStepAfter:yj,curveStepBefore:gj},z8t=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,H8t=k(function(e,t){const r=eG(e,/(?:init\b)|(?:initialize\b)/);let n={};if(Array.isArray(r)){const o=r.map(a=>a.args);Ix(o),n=Zr(n,[...o])}else n=r.args;if(!n)return;let i=N9(e,t);const s="config";return n[s]!==void 0&&(i==="flowchart-v2"&&(i="flowchart"),n[i]=n[s],delete n[s]),n},"detectInit"),eG=k(function(e,t=null){var r,n;try{const i=new RegExp(`[%]{2}(?![{]${z8t.source})(?=[}][%]{2}).*
`,"ig");e=e.trim().replace(i,"").replace(/'/gm,'"'),ht.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${e}`);let s;const o=[];for(;(s=wm.exec(e))!==null;)if(s.index===wm.lastIndex&&wm.lastIndex++,s&&!t||t&&((r=s[1])!=null&&r.match(t))||t&&((n=s[2])!=null&&n.match(t))){const a=s[1]?s[1]:s[2],l=s[3]?s[3].trim():s[4]?JSON.parse(s[4].trim()):null;o.push({type:a,args:l})}return o.length===0?{type:e,args:null}:o.length===1?o[0]:o}catch(i){return ht.error(`ERROR: ${i.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},"detectDirective"),q8t=k(function(e){return e.replace(wm,"")},"removeDirectives"),V8t=k(function(e,t){for(const[r,n]of t.entries())if(n.match(e))return r;return-1},"isSubstringInArray");function uT(e,t){if(!e)return t;const r=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return $8t[r]??t}k(uT,"interpolateToCurve");function rG(e,t){const r=e.trim();if(r)return t.securityLevel!=="loose"?tG(r):r}k(rG,"formatUrl");var W8t=k((e,...t)=>{const r=e.split("."),n=r.length-1,i=r[n];let s=window;for(let o=0;o<n;o++)if(s=s[r[o]],!s){ht.error(`Function name: ${e} not found in window`);return}s[i](...t)},"runFunc");function fT(e,t){return!e||!t?0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}k(fT,"distance");function nG(e){let t,r=0;e.forEach(i=>{r+=fT(i,t),t=i});const n=r/2;return dT(e,n)}k(nG,"traverseEdge");function iG(e){return e.length===1?e[0]:nG(e)}k(iG,"calcLabelPosition");var ZD=k((e,t=2)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},"roundNumber"),dT=k((e,t)=>{let r,n=t;for(const i of e){if(r){const s=fT(i,r);if(s===0)return r;if(s<n)n-=s;else{const o=n/s;if(o<=0)return r;if(o>=1)return{x:i.x,y:i.y};if(o>0&&o<1)return{x:ZD((1-o)*r.x+o*i.x,5),y:ZD((1-o)*r.y+o*i.y,5)}}}r=i}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),j8t=k((e,t,r)=>{ht.info(`our points ${JSON.stringify(t)}`),t[0]!==r&&(t=t.reverse());const i=dT(t,25),s=e?10:5,o=Math.atan2(t[0].y-i.y,t[0].x-i.x),a={x:0,y:0};return a.x=Math.sin(o)*s+(t[0].x+i.x)/2,a.y=-Math.cos(o)*s+(t[0].y+i.y)/2,a},"calcCardinalityPosition");function sG(e,t,r){const n=structuredClone(r);ht.info("our points",n),t!=="start_left"&&t!=="start_right"&&n.reverse();const i=25+e,s=dT(n,i),o=10+e*.5,a=Math.atan2(n[0].y-s.y,n[0].x-s.x),l={x:0,y:0};return t==="start_left"?(l.x=Math.sin(a+Math.PI)*o+(n[0].x+s.x)/2,l.y=-Math.cos(a+Math.PI)*o+(n[0].y+s.y)/2):t==="end_right"?(l.x=Math.sin(a-Math.PI)*o+(n[0].x+s.x)/2-5,l.y=-Math.cos(a-Math.PI)*o+(n[0].y+s.y)/2-5):t==="end_left"?(l.x=Math.sin(a)*o+(n[0].x+s.x)/2-5,l.y=-Math.cos(a)*o+(n[0].y+s.y)/2-5):(l.x=Math.sin(a)*o+(n[0].x+s.x)/2,l.y=-Math.cos(a)*o+(n[0].y+s.y)/2),l}k(sG,"calcTerminalLabelPosition");function oG(e){let t="",r="";for(const n of e)n!==void 0&&(n.startsWith("color:")||n.startsWith("text-align:")?r=r+n+";":t=t+n+";");return{style:t,labelStyle:r}}k(oG,"getStylesFromArray");var QD=0,U8t=k(()=>(QD++,"id-"+Math.random().toString(36).substr(2,12)+"-"+QD),"generateId");function aG(e){let t="";const r="0123456789abcdef",n=r.length;for(let i=0;i<e;i++)t+=r.charAt(Math.floor(Math.random()*n));return t}k(aG,"makeRandomHex");var G8t=k(e=>aG(e.length),"random"),K8t=k(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),Y8t=k(function(e,t){const r=t.text.replace(r0.lineBreakRegex," "),[,n]=rw(t.fontSize),i=e.append("text");i.attr("x",t.x),i.attr("y",t.y),i.style("text-anchor",t.anchor),i.style("font-family",t.fontFamily),i.style("font-size",n),i.style("font-weight",t.fontWeight),i.attr("fill",t.fill),t.class!==void 0&&i.attr("class",t.class);const s=i.append("tspan");return s.attr("x",t.x+t.textMargin*2),s.attr("fill",t.fill),s.text(r),i},"drawSimpleText"),X8t=Qg((e,t,r)=>{if(!e||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),r0.lineBreakRegex.test(e)))return e;const n=e.split(" ").filter(Boolean),i=[];let s="";return n.forEach((o,a)=>{const l=hl(`${o} `,r),c=hl(s,r);if(l>t){const{hyphenatedStrings:f,remainingWord:d}=J8t(o,t,"-",r);i.push(s,...f),s=d}else c+l>=t?(i.push(s),s=o):s=[s,o].filter(Boolean).join(" ");a+1===n.length&&i.push(s)}),i.filter(o=>o!=="").join(r.joinWith)},(e,t,r)=>`${e}${t}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),J8t=Qg((e,t,r="-",n)=>{n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},n);const i=[...e],s=[];let o="";return i.forEach((a,l)=>{const c=`${o}${a}`;if(hl(c,n)>=t){const u=l+1,f=i.length===u,d=`${c}${r}`;s.push(f?c:d),o=""}else o=c}),{hyphenatedStrings:s,remainingWord:o}},(e,t,r="-",n)=>`${e}${t}${r}${n.fontSize}${n.fontWeight}${n.fontFamily}`);function lG(e,t){return pT(e,t).height}k(lG,"calculateTextHeight");function hl(e,t){return pT(e,t).width}k(hl,"calculateTextWidth");var pT=Qg((e,t)=>{const{fontSize:r=12,fontFamily:n="Arial",fontWeight:i=400}=t;if(!e)return{width:0,height:0};const[,s]=rw(r),o=["sans-serif",n],a=e.split(r0.lineBreakRegex),l=[],c=$e("body");if(!c.remove)return{width:0,height:0,lineHeight:0};const h=c.append("svg");for(const f of o){let d=0;const p={width:0,height:0,lineHeight:0};for(const m of a){const g=K8t();g.text=m||F8t;const y=Y8t(h,g).style("font-size",s).style("font-weight",i).style("font-family",f),b=(y._groups||y)[0][0].getBBox();if(b.width===0&&b.height===0)throw new Error("svg element not in render tree");p.width=Math.round(Math.max(p.width,b.width)),d=Math.round(b.height),p.height+=d,p.lineHeight=Math.round(Math.max(p.lineHeight,d))}l.push(p)}h.remove();const u=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[u]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),ad,Z8t=(ad=class{constructor(t=!1,r){this.count=0,this.count=r?r.length:0,this.next=t?()=>this.count++:()=>Date.now()}},k(ad,"InitIDGenerator"),ad),r2,Q8t=k(function(e){return r2=r2||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),r2.innerHTML=e,unescape(r2.textContent)},"entityDecode");function mT(e){return"str"in e}k(mT,"isDetailedError");var t9t=k((e,t,r,n)=>{var s;if(!n)return;const i=(s=e.node())==null?void 0:s.getBBox();i&&e.append("text").text(n).attr("text-anchor","middle").attr("x",i.x+i.width/2).attr("y",-r).attr("class",t)},"insertTitle"),rw=k(e=>{if(typeof e=="number")return[e,e+"px"];const t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]},"parseFontSize");function gT(e,t){return pQ({},e,t)}k(gT,"cleanAndMerge");var Gs={assignWithDepth:Zr,wrapLabel:X8t,calculateTextHeight:lG,calculateTextWidth:hl,calculateTextDimensions:pT,cleanAndMerge:gT,detectInit:H8t,detectDirective:eG,isSubstringInArray:V8t,interpolateToCurve:uT,calcLabelPosition:iG,calcCardinalityPosition:j8t,calcTerminalLabelPosition:sG,formatUrl:rG,getStylesFromArray:oG,generateId:U8t,random:G8t,runFunc:W8t,entityDecode:Q8t,insertTitle:t9t,isLabelCoordinateInPath:cG,parseFontSize:rw,InitIDGenerator:Z8t},e9t=k(function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/#\w+;/g,function(r){const n=r.substring(1,r.length-1);return/^\+?\d+$/.test(n)?""+n+"":""+n+""}),t},"encodeEntities"),Au=k(function(e){return e.replace(//g,"&#").replace(//g,"&").replace(//g,";")},"decodeEntities"),mLt=k((e,t,{counter:r=0,prefix:n,suffix:i},s)=>s||`${n?`${n}_`:""}${e}_${t}_${r}${i?`_${i}`:""}`,"getEdgeId");function Hn(e){return e??null}k(Hn,"handleUndefinedAttr");function cG(e,t){const r=Math.round(e.x),n=Math.round(e.y),i=t.replace(/(\d+\.\d+)/g,s=>Math.round(parseFloat(s)).toString());return i.includes(r.toString())||i.includes(n.toString())}k(cG,"isLabelCoordinateInPath");const r9t=Object.freeze({left:0,top:0,width:16,height:16}),tv=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),hG=Object.freeze({...r9t,...tv}),n9t=Object.freeze({...hG,body:"",hidden:!1}),i9t=Object.freeze({width:null,height:null}),s9t=Object.freeze({...i9t,...tv}),o9t=(e,t,r,n="")=>{const i=e.split(":");if(e.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;n=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const a=i.pop(),l=i.pop(),c={provider:i.length>0?i[0]:n,prefix:l,name:a};return y3(c)?c:null}const s=i[0],o=s.split("-");if(o.length>1){const a={provider:n,prefix:o.shift(),name:o.join("-")};return y3(a)?a:null}if(r&&n===""){const a={provider:n,prefix:"",name:s};return y3(a,r)?a:null}return null},y3=(e,t)=>e?!!((t&&e.prefix===""||e.prefix)&&e.name):!1;function a9t(e,t){const r={};!e.hFlip!=!t.hFlip&&(r.hFlip=!0),!e.vFlip!=!t.vFlip&&(r.vFlip=!0);const n=((e.rotate||0)+(t.rotate||0))%4;return n&&(r.rotate=n),r}function tI(e,t){const r=a9t(e,t);for(const n in n9t)n in tv?n in e&&!(n in r)&&(r[n]=tv[n]):n in t?r[n]=t[n]:n in e&&(r[n]=e[n]);return r}function l9t(e,t){const r=e.icons,n=e.aliases||Object.create(null),i=Object.create(null);function s(o){if(r[o])return i[o]=[];if(!(o in i)){i[o]=null;const a=n[o]&&n[o].parent,l=a&&s(a);l&&(i[o]=[a].concat(l))}return i[o]}return(t||Object.keys(r).concat(Object.keys(n))).forEach(s),i}function eI(e,t,r){const n=e.icons,i=e.aliases||Object.create(null);let s={};function o(a){s=tI(n[a]||i[a],s)}return o(t),r.forEach(o),tI(e,s)}function c9t(e,t){if(e.icons[t])return eI(e,t,[]);const r=l9t(e,[t])[t];return r?eI(e,t,r):null}const h9t=/(-?[0-9.]*[0-9]+[0-9.]*)/g,u9t=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function rI(e,t,r){if(t===1)return e;if(r=r||100,typeof e=="number")return Math.ceil(e*t*r)/r;if(typeof e!="string")return e;const n=e.split(h9t);if(n===null||!n.length)return e;const i=[];let s=n.shift(),o=u9t.test(s);for(;;){if(o){const a=parseFloat(s);isNaN(a)?i.push(s):i.push(Math.ceil(a*t*r)/r)}else i.push(s);if(s=n.shift(),s===void 0)return i.join("");o=!o}}function f9t(e,t="defs"){let r="";const n=e.indexOf("<"+t);for(;n>=0;){const i=e.indexOf(">",n),s=e.indexOf("</"+t);if(i===-1||s===-1)break;const o=e.indexOf(">",s);if(o===-1)break;r+=e.slice(i+1,s).trim(),e=e.slice(0,n).trim()+e.slice(o+1)}return{defs:r,content:e}}function d9t(e,t){return e?"<defs>"+e+"</defs>"+t:t}function p9t(e,t,r){const n=f9t(e);return d9t(n.defs,t+n.content+r)}const m9t=e=>e==="unset"||e==="undefined"||e==="none";function g9t(e,t){const r={...hG,...e},n={...s9t,...t},i={left:r.left,top:r.top,width:r.width,height:r.height};let s=r.body;[r,n].forEach(m=>{const g=[],y=m.hFlip,b=m.vFlip;let x=m.rotate;y?b?x+=2:(g.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),g.push("scale(-1 1)"),i.top=i.left=0):b&&(g.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),g.push("scale(1 -1)"),i.top=i.left=0);let T;switch(x<0&&(x-=Math.floor(x/4)*4),x=x%4,x){case 1:T=i.height/2+i.top,g.unshift("rotate(90 "+T.toString()+" "+T.toString()+")");break;case 2:g.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:T=i.width/2+i.left,g.unshift("rotate(-90 "+T.toString()+" "+T.toString()+")");break}x%2===1&&(i.left!==i.top&&(T=i.left,i.left=i.top,i.top=T),i.width!==i.height&&(T=i.width,i.width=i.height,i.height=T)),g.length&&(s=p9t(s,'<g transform="'+g.join(" ")+'">',"</g>"))});const o=n.width,a=n.height,l=i.width,c=i.height;let h,u;o===null?(u=a===null?"1em":a==="auto"?c:a,h=rI(u,l/c)):(h=o==="auto"?l:o,u=a===null?rI(h,c/l):a==="auto"?c:a);const f={},d=(m,g)=>{m9t(g)||(f[m]=g.toString())};d("width",h),d("height",u);const p=[i.left,i.top,l,c];return f.viewBox=p.join(" "),{attributes:f,viewBox:p,body:s}}const y9t=/\sid="(\S+)"/g,nI=new Map;function b9t(e){e=e.replace(/[0-9]+$/,"")||"a";const t=nI.get(e)||0;return nI.set(e,t+1),t?`${e}${t}`:e}function x9t(e){const t=[];let r;for(;r=y9t.exec(e);)t.push(r[1]);if(!t.length)return e;const n="suffix"+(Math.random()*16777216|Date.now()).toString(16);return t.forEach(i=>{const s=b9t(i),o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+o+')([")]|\\.[a-z])',"g"),"$1"+s+n+"$3")}),e=e.replace(new RegExp(n,"g"),""),e}function v9t(e,t){let r=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const n in t)r+=" "+n+'="'+t[n]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+e+"</svg>"}function yT(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Eu=yT();function uG(e){Eu=e}var Cm={exec:()=>null};function je(e,t=""){let r=typeof e=="string"?e:e.source,n={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(ii.caret,"$1"),r=r.replace(i,o),n},getRegex:()=>new RegExp(r,t)};return n}var w9t=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),ii={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},k9t=/^(?:[ \t]*(?:\n|$))+/,C9t=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,S9t=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,H1=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,T9t=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,bT=/(?:[*+-]|\d{1,9}[.)])/,fG=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,dG=je(fG).replace(/bull/g,bT).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),_9t=je(fG).replace(/bull/g,bT).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),xT=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,M9t=/^[^\n]+/,vT=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,A9t=je(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",vT).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),E9t=je(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,bT).getRegex(),nw="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",wT=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,L9t=je("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",wT).replace("tag",nw).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),pG=je(xT).replace("hr",H1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",nw).getRegex(),O9t=je(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",pG).getRegex(),kT={blockquote:O9t,code:C9t,def:A9t,fences:S9t,heading:T9t,hr:H1,html:L9t,lheading:dG,list:E9t,newline:k9t,paragraph:pG,table:Cm,text:M9t},iI=je("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",H1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",nw).getRegex(),D9t={...kT,lheading:_9t,table:iI,paragraph:je(xT).replace("hr",H1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",iI).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",nw).getRegex()},I9t={...kT,html:je(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",wT).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Cm,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:je(xT).replace("hr",H1).replace("heading",` *#{1,6} *[^
]`).replace("lheading",dG).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},B9t=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,R9t=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,mG=/^( {2,}|\\)\n(?!\s*$)/,P9t=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,iw=/[\p{P}\p{S}]/u,CT=/[\s\p{P}\p{S}]/u,gG=/[^\s\p{P}\p{S}]/u,N9t=je(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,CT).getRegex(),yG=/(?!~)[\p{P}\p{S}]/u,F9t=/(?!~)[\s\p{P}\p{S}]/u,$9t=/(?:[^\s\p{P}\p{S}]|~)/u,z9t=je(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",w9t?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),bG=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,H9t=je(bG,"u").replace(/punct/g,iw).getRegex(),q9t=je(bG,"u").replace(/punct/g,yG).getRegex(),xG="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",V9t=je(xG,"gu").replace(/notPunctSpace/g,gG).replace(/punctSpace/g,CT).replace(/punct/g,iw).getRegex(),W9t=je(xG,"gu").replace(/notPunctSpace/g,$9t).replace(/punctSpace/g,F9t).replace(/punct/g,yG).getRegex(),j9t=je("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,gG).replace(/punctSpace/g,CT).replace(/punct/g,iw).getRegex(),U9t=je(/\\(punct)/,"gu").replace(/punct/g,iw).getRegex(),G9t=je(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),K9t=je(wT).replace("(?:-->|$)","-->").getRegex(),Y9t=je("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",K9t).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ev=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,X9t=je(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",ev).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),vG=je(/^!?\[(label)\]\[(ref)\]/).replace("label",ev).replace("ref",vT).getRegex(),wG=je(/^!?\[(ref)\](?:\[\])?/).replace("ref",vT).getRegex(),J9t=je("reflink|nolink(?!\\()","g").replace("reflink",vG).replace("nolink",wG).getRegex(),sI=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,ST={_backpedal:Cm,anyPunctuation:U9t,autolink:G9t,blockSkip:z9t,br:mG,code:R9t,del:Cm,emStrongLDelim:H9t,emStrongRDelimAst:V9t,emStrongRDelimUnd:j9t,escape:B9t,link:X9t,nolink:wG,punctuation:N9t,reflink:vG,reflinkSearch:J9t,tag:Y9t,text:P9t,url:Cm},Z9t={...ST,link:je(/^!?\[(label)\]\((.*?)\)/).replace("label",ev).getRegex(),reflink:je(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ev).getRegex()},N6={...ST,emStrongRDelimAst:W9t,emStrongLDelim:q9t,url:je(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",sI).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:je(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",sI).getRegex()},Q9t={...N6,br:je(mG).replace("{2,}","*").getRegex(),text:je(N6.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},n2={normal:kT,gfm:D9t,pedantic:I9t},$0={normal:ST,gfm:N6,breaks:Q9t,pedantic:Z9t},tTt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oI=e=>tTt[e];function Mo(e,t){if(t){if(ii.escapeTest.test(e))return e.replace(ii.escapeReplace,oI)}else if(ii.escapeTestNoEncode.test(e))return e.replace(ii.escapeReplaceNoEncode,oI);return e}function aI(e){try{e=encodeURI(e).replace(ii.percentDecode,"%")}catch{return null}return e}function lI(e,t){var s;let r=e.replace(ii.findPipe,(o,a,l)=>{let c=!1,h=a;for(;--h>=0&&l[h]==="\\";)c=!c;return c?"|":" |"}),n=r.split(ii.splitPipe),i=0;if(n[0].trim()||n.shift(),n.length>0&&!((s=n.at(-1))!=null&&s.trim())&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(ii.slashPipe,"|");return n}function z0(e,t,r){let n=e.length;if(n===0)return"";let i=0;for(;i<n&&e.charAt(n-i-1)===t;)i++;return e.slice(0,n-i)}function eTt(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let n=0;n<e.length;n++)if(e[n]==="\\")n++;else if(e[n]===t[0])r++;else if(e[n]===t[1]&&(r--,r<0))return n;return r>0?-2:-1}function cI(e,t,r,n,i){let s=t.href,o=t.title||null,a=e[1].replace(i.other.outputLinkReplace,"$1");n.state.inLink=!0;let l={type:e[0].charAt(0)==="!"?"image":"link",raw:r,href:s,title:o,text:a,tokens:n.inlineTokens(a)};return n.state.inLink=!1,l}function rTt(e,t,r){let n=e.match(r.other.indentCodeCompensation);if(n===null)return t;let i=n[1];return t.split(`
`).map(s=>{let o=s.match(r.other.beginningSpace);if(o===null)return s;let[a]=o;return a.length>=i.length?s.slice(i.length):s}).join(`
`)}var rv=class{constructor(t){gt(this,"options");gt(this,"rules");gt(this,"lexer");this.options=t||Eu}space(t){let r=this.rules.block.newline.exec(t);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(t){let r=this.rules.block.code.exec(t);if(r){let n=r[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?n:z0(n,`
`)}}}fences(t){let r=this.rules.block.fences.exec(t);if(r){let n=r[0],i=rTt(n,r[3]||"",this.rules);return{type:"code",raw:n,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:i}}}heading(t){let r=this.rules.block.heading.exec(t);if(r){let n=r[2].trim();if(this.rules.other.endingHash.test(n)){let i=z0(n,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(n=i.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){let r=this.rules.block.hr.exec(t);if(r)return{type:"hr",raw:z0(r[0],`
`)}}blockquote(t){let r=this.rules.block.blockquote.exec(t);if(r){let n=z0(r[0],`
`).split(`
`),i="",s="",o=[];for(;n.length>0;){let a=!1,l=[],c;for(c=0;c<n.length;c++)if(this.rules.other.blockquoteStart.test(n[c]))l.push(n[c]),a=!0;else if(!a)l.push(n[c]);else break;n=n.slice(c);let h=l.join(`
`),u=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${h}`:h,s=s?`${s}
${u}`:u;let f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,o,!0),this.lexer.state.top=f,n.length===0)break;let d=o.at(-1);if((d==null?void 0:d.type)==="code")break;if((d==null?void 0:d.type)==="blockquote"){let p=d,m=p.raw+`
`+n.join(`
`),g=this.blockquote(m);o[o.length-1]=g,i=i.substring(0,i.length-p.raw.length)+g.raw,s=s.substring(0,s.length-p.text.length)+g.text;break}else if((d==null?void 0:d.type)==="list"){let p=d,m=p.raw+`
`+n.join(`
`),g=this.list(m);o[o.length-1]=g,i=i.substring(0,i.length-d.raw.length)+g.raw,s=s.substring(0,s.length-p.raw.length)+g.raw,n=m.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:o,text:s}}}list(t){let r=this.rules.block.list.exec(t);if(r){let n=r[1].trim(),i=n.length>1,s={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");let o=this.rules.other.listItemRegex(n),a=!1;for(;t;){let c=!1,h="",u="";if(!(r=o.exec(t))||this.rules.block.hr.test(t))break;h=r[0],t=t.substring(h.length);let f=r[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,b=>" ".repeat(3*b.length)),d=t.split(`
`,1)[0],p=!f.trim(),m=0;if(this.options.pedantic?(m=2,u=f.trimStart()):p?m=r[1].length+1:(m=r[2].search(this.rules.other.nonSpaceChar),m=m>4?1:m,u=f.slice(m),m+=r[1].length),p&&this.rules.other.blankLine.test(d)&&(h+=d+`
`,t=t.substring(d.length+1),c=!0),!c){let b=this.rules.other.nextBulletRegex(m),x=this.rules.other.hrRegex(m),T=this.rules.other.fencesBeginRegex(m),S=this.rules.other.headingBeginRegex(m),w=this.rules.other.htmlBeginRegex(m);for(;t;){let _=t.split(`
`,1)[0],I;if(d=_,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,"  "),I=d):I=d.replace(this.rules.other.tabCharGlobal,"    "),T.test(d)||S.test(d)||w.test(d)||b.test(d)||x.test(d))break;if(I.search(this.rules.other.nonSpaceChar)>=m||!d.trim())u+=`
`+I.slice(m);else{if(p||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||T.test(f)||S.test(f)||x.test(f))break;u+=`
`+d}!p&&!d.trim()&&(p=!0),h+=_+`
`,t=t.substring(_.length+1),f=I.slice(m)}}s.loose||(a?s.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(a=!0));let g=null,y;this.options.gfm&&(g=this.rules.other.listIsTask.exec(u),g&&(y=g[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:h,task:!!g,checked:y,loose:!1,text:u,tokens:[]}),s.raw+=h}let l=s.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let c=0;c<s.items.length;c++)if(this.lexer.state.top=!1,s.items[c].tokens=this.lexer.blockTokens(s.items[c].text,[]),!s.loose){let h=s.items[c].tokens.filter(f=>f.type==="space"),u=h.length>0&&h.some(f=>this.rules.other.anyLine.test(f.raw));s.loose=u}if(s.loose)for(let c=0;c<s.items.length;c++)s.items[c].loose=!0;return s}}html(t){let r=this.rules.block.html.exec(t);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(t){let r=this.rules.block.def.exec(t);if(r){let n=r[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=r[2]?r[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:n,raw:r[0],href:i,title:s}}}table(t){var a;let r=this.rules.block.table.exec(t);if(!r||!this.rules.other.tableDelimiter.test(r[2]))return;let n=lI(r[1]),i=r[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=(a=r[3])!=null&&a.trim()?r[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:r[0],header:[],align:[],rows:[]};if(n.length===i.length){for(let l of i)this.rules.other.tableAlignRight.test(l)?o.align.push("right"):this.rules.other.tableAlignCenter.test(l)?o.align.push("center"):this.rules.other.tableAlignLeft.test(l)?o.align.push("left"):o.align.push(null);for(let l=0;l<n.length;l++)o.header.push({text:n[l],tokens:this.lexer.inline(n[l]),header:!0,align:o.align[l]});for(let l of s)o.rows.push(lI(l,o.header.length).map((c,h)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:o.align[h]})));return o}}lheading(t){let r=this.rules.block.lheading.exec(t);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(t){let r=this.rules.block.paragraph.exec(t);if(r){let n=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:n,tokens:this.lexer.inline(n)}}}text(t){let r=this.rules.block.text.exec(t);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(t){let r=this.rules.inline.escape.exec(t);if(r)return{type:"escape",raw:r[0],text:r[1]}}tag(t){let r=this.rules.inline.tag.exec(t);if(r)return!this.lexer.state.inLink&&this.rules.other.startATag.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(t){let r=this.rules.inline.link.exec(t);if(r){let n=r[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let o=z0(n.slice(0,-1),"\\");if((n.length-o.length)%2===0)return}else{let o=eTt(r[2],"()");if(o===-2)return;if(o>-1){let a=(r[0].indexOf("!")===0?5:4)+r[1].length+o;r[2]=r[2].substring(0,o),r[0]=r[0].substring(0,a).trim(),r[3]=""}}let i=r[2],s="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(i);o&&(i=o[1],s=o[3])}else s=r[3]?r[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?i=i.slice(1):i=i.slice(1,-1)),cI(r,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer,this.rules)}}reflink(t,r){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let i=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=r[i.toLowerCase()];if(!s){let o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return cI(n,s,n[0],this.lexer,this.rules)}}emStrong(t,r,n=""){let i=this.rules.inline.emStrongLDelim.exec(t);if(!(!i||i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!n||this.rules.inline.punctuation.exec(n))){let s=[...i[0]].length-1,o,a,l=s,c=0,h=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,r=r.slice(-1*t.length+s);(i=h.exec(r))!=null;){if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!o)continue;if(a=[...o].length,i[3]||i[4]){l+=a;continue}else if((i[5]||i[6])&&s%3&&!((s+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);let u=[...i[0]][0].length,f=t.slice(0,s+i.index+u+a);if(Math.min(s,a)%2){let p=f.slice(1,-1);return{type:"em",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}let d=f.slice(2,-2);return{type:"strong",raw:f,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(t){let r=this.rules.inline.code.exec(t);if(r){let n=r[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(n),s=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return i&&s&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:r[0],text:n}}}br(t){let r=this.rules.inline.br.exec(t);if(r)return{type:"br",raw:r[0]}}del(t){let r=this.rules.inline.del.exec(t);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(t){let r=this.rules.inline.autolink.exec(t);if(r){let n,i;return r[2]==="@"?(n=r[1],i="mailto:"+n):(n=r[1],i=n),{type:"link",raw:r[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n;let r;if(r=this.rules.inline.url.exec(t)){let i,s;if(r[2]==="@")i=r[0],s="mailto:"+i;else{let o;do o=r[0],r[0]=((n=this.rules.inline._backpedal.exec(r[0]))==null?void 0:n[0])??"";while(o!==r[0]);i=r[0],r[1]==="www."?s="http://"+r[0]:s=r[0]}return{type:"link",raw:r[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t){let r=this.rules.inline.text.exec(t);if(r){let n=this.lexer.state.inRawBlock;return{type:"text",raw:r[0],text:r[0],escaped:n}}}},Vs=class F6{constructor(t){gt(this,"tokens");gt(this,"options");gt(this,"state");gt(this,"tokenizer");gt(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Eu,this.options.tokenizer=this.options.tokenizer||new rv,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:ii,block:n2.normal,inline:$0.normal};this.options.pedantic?(r.block=n2.pedantic,r.inline=$0.pedantic):this.options.gfm&&(r.block=n2.gfm,this.options.breaks?r.inline=$0.breaks:r.inline=$0.gfm),this.tokenizer.rules=r}static get rules(){return{block:n2,inline:$0}}static lex(t,r){return new F6(r).lex(t)}static lexInline(t,r){return new F6(r).inlineTokens(t)}lex(t){t=t.replace(ii.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let n=this.inlineQueue[r];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],n=!1){var i,s,o;for(this.options.pedantic&&(t=t.replace(ii.tabCharGlobal,"    ").replace(ii.spaceLine,""));t;){let a;if((s=(i=this.options.extensions)==null?void 0:i.block)!=null&&s.some(c=>(a=c.call({lexer:this},t,r))?(t=t.substring(a.raw.length),r.push(a),!0):!1))continue;if(a=this.tokenizer.space(t)){t=t.substring(a.raw.length);let c=r.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:r.push(a);continue}if(a=this.tokenizer.code(t)){t=t.substring(a.raw.length);let c=r.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):r.push(a);continue}if(a=this.tokenizer.fences(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.heading(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.hr(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.blockquote(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.list(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.html(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.def(t)){t=t.substring(a.raw.length);let c=r.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title},r.push(a));continue}if(a=this.tokenizer.table(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.lheading(t)){t=t.substring(a.raw.length),r.push(a);continue}let l=t;if((o=this.options.extensions)!=null&&o.startBlock){let c=1/0,h=t.slice(1),u;this.options.extensions.startBlock.forEach(f=>{u=f.call({lexer:this},h),typeof u=="number"&&u>=0&&(c=Math.min(c,u))}),c<1/0&&c>=0&&(l=t.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){let c=r.at(-1);n&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):r.push(a),n=l.length!==t.length,t=t.substring(a.raw.length);continue}if(a=this.tokenizer.text(t)){t=t.substring(a.raw.length);let c=r.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):r.push(a);continue}if(t){let c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){var l,c,h,u,f;let n=t,i=null;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)d.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,i.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(i=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)s=i[2]?i[2].length:0,n=n.slice(0,i.index+s)+"["+"a".repeat(i[0].length-s-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=((c=(l=this.options.hooks)==null?void 0:l.emStrongMask)==null?void 0:c.call({lexer:this},n))??n;let o=!1,a="";for(;t;){o||(a=""),o=!1;let d;if((u=(h=this.options.extensions)==null?void 0:h.inline)!=null&&u.some(m=>(d=m.call({lexer:this},t,r))?(t=t.substring(d.raw.length),r.push(d),!0):!1))continue;if(d=this.tokenizer.escape(t)){t=t.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.tag(t)){t=t.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.link(t)){t=t.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(d.raw.length);let m=r.at(-1);d.type==="text"&&(m==null?void 0:m.type)==="text"?(m.raw+=d.raw,m.text+=d.text):r.push(d);continue}if(d=this.tokenizer.emStrong(t,n,a)){t=t.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.codespan(t)){t=t.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.br(t)){t=t.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.del(t)){t=t.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.autolink(t)){t=t.substring(d.raw.length),r.push(d);continue}if(!this.state.inLink&&(d=this.tokenizer.url(t))){t=t.substring(d.raw.length),r.push(d);continue}let p=t;if((f=this.options.extensions)!=null&&f.startInline){let m=1/0,g=t.slice(1),y;this.options.extensions.startInline.forEach(b=>{y=b.call({lexer:this},g),typeof y=="number"&&y>=0&&(m=Math.min(m,y))}),m<1/0&&m>=0&&(p=t.substring(0,m+1))}if(d=this.tokenizer.inlineText(p)){t=t.substring(d.raw.length),d.raw.slice(-1)!=="_"&&(a=d.raw.slice(-1)),o=!0;let m=r.at(-1);(m==null?void 0:m.type)==="text"?(m.raw+=d.raw,m.text+=d.text):r.push(d);continue}if(t){let m="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(m);break}else throw new Error(m)}}return r}},nv=class{constructor(t){gt(this,"options");gt(this,"parser");this.options=t||Eu}space(t){return""}code({text:t,lang:r,escaped:n}){var o;let i=(o=(r||"").match(ii.notSpaceStart))==null?void 0:o[0],s=t.replace(ii.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Mo(i)+'">'+(n?s:Mo(s,!0))+`</code></pre>
`:"<pre><code>"+(n?s:Mo(s,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:r}){return`<h${r}>${this.parser.parseInline(t)}</h${r}>
`}hr(t){return`<hr>
`}list(t){let r=t.ordered,n=t.start,i="";for(let a=0;a<t.items.length;a++){let l=t.items[a];i+=this.listitem(l)}let s=r?"ol":"ul",o=r&&n!==1?' start="'+n+'"':"";return"<"+s+o+`>
`+i+"</"+s+`>
`}listitem(t){var n;let r="";if(t.task){let i=this.checkbox({checked:!!t.checked});t.loose?((n=t.tokens[0])==null?void 0:n.type)==="paragraph"?(t.tokens[0].text=i+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=i+" "+Mo(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):r+=i+" "}return r+=this.parser.parse(t.tokens,!!t.loose),`<li>${r}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let r="",n="";for(let s=0;s<t.header.length;s++)n+=this.tablecell(t.header[s]);r+=this.tablerow({text:n});let i="";for(let s=0;s<t.rows.length;s++){let o=t.rows[s];n="";for(let a=0;a<o.length;a++)n+=this.tablecell(o[a]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+r+`</thead>
`+i+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let r=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+r+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Mo(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:r,tokens:n}){let i=this.parser.parseInline(n),s=aI(t);if(s===null)return i;t=s;let o='<a href="'+t+'"';return r&&(o+=' title="'+Mo(r)+'"'),o+=">"+i+"</a>",o}image({href:t,title:r,text:n,tokens:i}){i&&(n=this.parser.parseInline(i,this.parser.textRenderer));let s=aI(t);if(s===null)return Mo(n);t=s;let o=`<img src="${t}" alt="${n}"`;return r&&(o+=` title="${Mo(r)}"`),o+=">",o}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Mo(t.text)}},TT=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},Ws=class $6{constructor(t){gt(this,"options");gt(this,"renderer");gt(this,"textRenderer");this.options=t||Eu,this.options.renderer=this.options.renderer||new nv,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new TT}static parse(t,r){return new $6(r).parse(t)}static parseInline(t,r){return new $6(r).parseInline(t)}parse(t,r=!0){var i,s;let n="";for(let o=0;o<t.length;o++){let a=t[o];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[a.type]){let c=a,h=this.options.extensions.renderers[c.type].call({parser:this},c);if(h!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(c.type)){n+=h||"";continue}}let l=a;switch(l.type){case"space":{n+=this.renderer.space(l);continue}case"hr":{n+=this.renderer.hr(l);continue}case"heading":{n+=this.renderer.heading(l);continue}case"code":{n+=this.renderer.code(l);continue}case"table":{n+=this.renderer.table(l);continue}case"blockquote":{n+=this.renderer.blockquote(l);continue}case"list":{n+=this.renderer.list(l);continue}case"html":{n+=this.renderer.html(l);continue}case"def":{n+=this.renderer.def(l);continue}case"paragraph":{n+=this.renderer.paragraph(l);continue}case"text":{let c=l,h=this.renderer.text(c);for(;o+1<t.length&&t[o+1].type==="text";)c=t[++o],h+=`
`+this.renderer.text(c);r?n+=this.renderer.paragraph({type:"paragraph",raw:h,text:h,tokens:[{type:"text",raw:h,text:h,escaped:!0}]}):n+=h;continue}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return n}parseInline(t,r=this.renderer){var i,s;let n="";for(let o=0;o<t.length;o++){let a=t[o];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[a.type]){let c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){n+=c||"";continue}}let l=a;switch(l.type){case"escape":{n+=r.text(l);break}case"html":{n+=r.html(l);break}case"link":{n+=r.link(l);break}case"image":{n+=r.image(l);break}case"strong":{n+=r.strong(l);break}case"em":{n+=r.em(l);break}case"codespan":{n+=r.codespan(l);break}case"br":{n+=r.br(l);break}case"del":{n+=r.del(l);break}case"text":{n+=r.text(l);break}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return n}},c2,Ip=(c2=class{constructor(t){gt(this,"options");gt(this,"block");this.options=t||Eu}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?Vs.lex:Vs.lexInline}provideParser(){return this.block?Ws.parse:Ws.parseInline}},gt(c2,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),gt(c2,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),c2),nTt=class{constructor(...t){gt(this,"defaults",yT());gt(this,"options",this.setOptions);gt(this,"parse",this.parseMarkdown(!0));gt(this,"parseInline",this.parseMarkdown(!1));gt(this,"Parser",Ws);gt(this,"Renderer",nv);gt(this,"TextRenderer",TT);gt(this,"Lexer",Vs);gt(this,"Tokenizer",rv);gt(this,"Hooks",Ip);this.use(...t)}walkTokens(t,r){var i,s;let n=[];for(let o of t)switch(n=n.concat(r.call(this,o)),o.type){case"table":{let a=o;for(let l of a.header)n=n.concat(this.walkTokens(l.tokens,r));for(let l of a.rows)for(let c of l)n=n.concat(this.walkTokens(c.tokens,r));break}case"list":{let a=o;n=n.concat(this.walkTokens(a.items,r));break}default:{let a=o;(s=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&s[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{let c=a[l].flat(1/0);n=n.concat(this.walkTokens(c,r))}):a.tokens&&(n=n.concat(this.walkTokens(a.tokens,r)))}}return n}use(...t){let r=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{let i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let o=r.renderers[s.name];o?r.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:r.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=r[s.level];o?o.unshift(s.tokenizer):r[s.level]=[s.tokenizer],s.start&&(s.level==="block"?r.startBlock?r.startBlock.push(s.start):r.startBlock=[s.start]:s.level==="inline"&&(r.startInline?r.startInline.push(s.start):r.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(r.childTokens[s.name]=s.childTokens)}),i.extensions=r),n.renderer){let s=this.defaults.renderer||new nv(this.defaults);for(let o in n.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let a=o,l=n.renderer[a],c=s[a];s[a]=(...h)=>{let u=l.apply(s,h);return u===!1&&(u=c.apply(s,h)),u||""}}i.renderer=s}if(n.tokenizer){let s=this.defaults.tokenizer||new rv(this.defaults);for(let o in n.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,l=n.tokenizer[a],c=s[a];s[a]=(...h)=>{let u=l.apply(s,h);return u===!1&&(u=c.apply(s,h)),u}}i.tokenizer=s}if(n.hooks){let s=this.defaults.hooks||new Ip;for(let o in n.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let a=o,l=n.hooks[a],c=s[a];Ip.passThroughHooks.has(o)?s[a]=h=>{if(this.defaults.async&&Ip.passThroughHooksRespectAsync.has(o))return(async()=>{let f=await l.call(s,h);return c.call(s,f)})();let u=l.call(s,h);return c.call(s,u)}:s[a]=(...h)=>{if(this.defaults.async)return(async()=>{let f=await l.apply(s,h);return f===!1&&(f=await c.apply(s,h)),f})();let u=l.apply(s,h);return u===!1&&(u=c.apply(s,h)),u}}i.hooks=s}if(n.walkTokens){let s=this.defaults.walkTokens,o=n.walkTokens;i.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,r){return Vs.lex(t,r??this.defaults)}parser(t,r){return Ws.parse(t,r??this.defaults)}parseMarkdown(t){return(r,n)=>{let i={...n},s={...this.defaults,...i},o=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&i.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(s.hooks&&(s.hooks.options=s,s.hooks.block=t),s.async)return(async()=>{let a=s.hooks?await s.hooks.preprocess(r):r,l=await(s.hooks?await s.hooks.provideLexer():t?Vs.lex:Vs.lexInline)(a,s),c=s.hooks?await s.hooks.processAllTokens(l):l;s.walkTokens&&await Promise.all(this.walkTokens(c,s.walkTokens));let h=await(s.hooks?await s.hooks.provideParser():t?Ws.parse:Ws.parseInline)(c,s);return s.hooks?await s.hooks.postprocess(h):h})().catch(o);try{s.hooks&&(r=s.hooks.preprocess(r));let a=(s.hooks?s.hooks.provideLexer():t?Vs.lex:Vs.lexInline)(r,s);s.hooks&&(a=s.hooks.processAllTokens(a)),s.walkTokens&&this.walkTokens(a,s.walkTokens);let l=(s.hooks?s.hooks.provideParser():t?Ws.parse:Ws.parseInline)(a,s);return s.hooks&&(l=s.hooks.postprocess(l)),l}catch(a){return o(a)}}}onError(t,r){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let i="<p>An error occurred:</p><pre>"+Mo(n.message+"",!0)+"</pre>";return r?Promise.resolve(i):i}if(r)return Promise.reject(n);throw n}}},pu=new nTt;function Qe(e,t){return pu.parse(e,t)}Qe.options=Qe.setOptions=function(e){return pu.setOptions(e),Qe.defaults=pu.defaults,uG(Qe.defaults),Qe};Qe.getDefaults=yT;Qe.defaults=Eu;Qe.use=function(...e){return pu.use(...e),Qe.defaults=pu.defaults,uG(Qe.defaults),Qe};Qe.walkTokens=function(e,t){return pu.walkTokens(e,t)};Qe.parseInline=pu.parseInline;Qe.Parser=Ws;Qe.parser=Ws.parse;Qe.Renderer=nv;Qe.TextRenderer=TT;Qe.Lexer=Vs;Qe.lexer=Vs.lex;Qe.Tokenizer=rv;Qe.Hooks=Ip;Qe.parse=Qe;Qe.options;Qe.setOptions;Qe.use;Qe.walkTokens;Qe.parseInline;Ws.parse;Vs.lex;function kG(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Array.from(typeof e=="string"?[e]:e);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce(function(a,l){var c=l.match(/\n([\t ]+|(?!\s).)/g);return c?a.concat(c.map(function(h){var u,f;return(f=(u=h.match(/[\t ]/g))===null||u===void 0?void 0:u.length)!==null&&f!==void 0?f:0})):a},[]);if(i.length){var s=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");n=n.map(function(a){return a.replace(s,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var o=n[0];return t.forEach(function(a,l){var c=o.match(/(?:^|\n)( *)$/),h=c?c[1]:"",u=a;typeof a=="string"&&a.includes(`
`)&&(u=String(a).split(`
`).map(function(f,d){return d===0?f:""+h+f}).join(`
`)),o+=u+n[l+1]}),o}var iTt={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},z6=new Map,CG=new Map,sTt=k(e=>{for(const t of e){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(ht.debug("Registering icon pack:",t.name),"loader"in t)CG.set(t.name,t.loader);else if("icons"in t)z6.set(t.name,t.icons);else throw ht.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),SG=k(async(e,t)=>{const r=o9t(e,!0,t!==void 0);if(!r)throw new Error(`Invalid icon name: ${e}`);const n=r.prefix||t;if(!n)throw new Error(`Icon name must contain a prefix: ${e}`);let i=z6.get(n);if(!i){const o=CG.get(n);if(!o)throw new Error(`Icon set not found: ${r.prefix}`);try{i={...await o(),prefix:n},z6.set(n,i)}catch(a){throw ht.error(a),new Error(`Failed to load icon set: ${r.prefix}`)}}const s=c9t(i,r.name);if(!s)throw new Error(`Icon not found: ${e}`);return s},"getRegisteredIconData"),oTt=k(async e=>{try{return await SG(e),!0}catch{return!1}},"isIconAvailable"),q1=k(async(e,t,r)=>{let n;try{n=await SG(e,t==null?void 0:t.fallbackPrefix)}catch(o){ht.error(o),n=iTt}const i=g9t(n,t),s=v9t(x9t(i.body),{...i.attributes,...r});return Ls(s,$n())},"getIconSVG");function TG(e,{markdownAutoWrap:t}){const n=e.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),i=kG(n);return t===!1?i.replace(/ /g,"&nbsp;"):i}k(TG,"preprocessMarkdown");function _G(e,t={}){const r=TG(e,t),n=Qe.lexer(r),i=[[]];let s=0;function o(a,l="normal"){a.type==="text"?a.text.split(`
`).forEach((h,u)=>{u!==0&&(s++,i.push([])),h.split(" ").forEach(f=>{f=f.replace(/&#39;/g,"'"),f&&i[s].push({content:f,type:l})})}):a.type==="strong"||a.type==="em"?a.tokens.forEach(c=>{o(c,a.type)}):a.type==="html"&&i[s].push({content:a.text,type:"normal"})}return k(o,"processNode"),n.forEach(a=>{var l;a.type==="paragraph"?(l=a.tokens)==null||l.forEach(c=>{o(c)}):a.type==="html"?i[s].push({content:a.text,type:"normal"}):i[s].push({content:a.raw,type:"normal"})}),i}k(_G,"markdownToLines");function MG(e,{markdownAutoWrap:t}={}){const r=Qe.lexer(e);function n(i){var s,o,a;return i.type==="text"?t===!1?i.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):i.text.replace(/\n */g,"<br/>"):i.type==="strong"?`<strong>${(s=i.tokens)==null?void 0:s.map(n).join("")}</strong>`:i.type==="em"?`<em>${(o=i.tokens)==null?void 0:o.map(n).join("")}</em>`:i.type==="paragraph"?`<p>${(a=i.tokens)==null?void 0:a.map(n).join("")}</p>`:i.type==="space"?"":i.type==="html"?`${i.text}`:i.type==="escape"?i.text:(ht.warn(`Unsupported markdown: ${i.type}`),i.raw)}return k(n,"output"),r.map(n).join("")}k(MG,"markdownToHTML");function AG(e){return Intl.Segmenter?[...new Intl.Segmenter().segment(e)].map(t=>t.segment):[...e]}k(AG,"splitTextToChars");function EG(e,t){const r=AG(t.content);return _T(e,[],r,t.type)}k(EG,"splitWordToFitWidth");function _T(e,t,r,n){if(r.length===0)return[{content:t.join(""),type:n},{content:"",type:n}];const[i,...s]=r,o=[...t,i];return e([{content:o.join(""),type:n}])?_T(e,o,s,n):(t.length===0&&i&&(t.push(i),r.shift()),[{content:t.join(""),type:n},{content:r.join(""),type:n}])}k(_T,"splitWordToFitWidthRecursion");function LG(e,t){if(e.some(({content:r})=>r.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return iv(e,t)}k(LG,"splitLineToFitWidth");function iv(e,t,r=[],n=[]){if(e.length===0)return n.length>0&&r.push(n),r.length>0?r:[];let i="";e[0].content===" "&&(i=" ",e.shift());const s=e.shift()??{content:" ",type:"normal"},o=[...n];if(i!==""&&o.push({content:i,type:"normal"}),o.push(s),t(o))return iv(e,t,r,o);if(n.length>0)r.push(n),e.unshift(s);else if(s.content){const[a,l]=EG(t,s);r.push([a]),l.content&&e.unshift(l)}return iv(e,t,r)}k(iv,"splitLineToFitWidthRecursion");function H6(e,t){t&&e.attr("style",t)}k(H6,"applyStyle");async function OG(e,t,r,n,i=!1,s=$n()){const o=e.append("foreignObject");o.attr("width",`${10*r}px`),o.attr("height",`${10*r}px`);const a=o.append("xhtml:div"),l=Ld(t.label)?await F9(t.label.replace(r0.lineBreakRegex,`
`),s):Ls(t.label,s),c=t.isNode?"nodeLabel":"edgeLabel",h=a.append("span");h.html(l),H6(h,t.labelStyle),h.attr("class",`${c} ${n}`),H6(a,t.labelStyle),a.style("display","table-cell"),a.style("white-space","nowrap"),a.style("line-height","1.5"),a.style("max-width",r+"px"),a.style("text-align","center"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),i&&a.attr("class","labelBkg");let u=a.node().getBoundingClientRect();return u.width===r&&(a.style("display","table"),a.style("white-space","break-spaces"),a.style("width",r+"px"),u=a.node().getBoundingClientRect()),o.node()}k(OG,"addHtmlSpan");function sw(e,t,r){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*r-.1+"em").attr("dy",r+"em")}k(sw,"createTspan");function DG(e,t,r){const n=e.append("text"),i=sw(n,1,t);ow(i,r);const s=i.node().getComputedTextLength();return n.remove(),s}k(DG,"computeWidthOfText");function aTt(e,t,r){var o;const n=e.append("text"),i=sw(n,1,t);ow(i,[{content:r,type:"normal"}]);const s=(o=i.node())==null?void 0:o.getBoundingClientRect();return s&&n.remove(),s}k(aTt,"computeDimensionOfText");function IG(e,t,r,n=!1){const s=t.append("g"),o=s.insert("rect").attr("class","background").attr("style","stroke: none"),a=s.append("text").attr("y","-10.1");let l=0;for(const c of r){const h=k(f=>DG(s,1.1,f)<=e,"checkWidth"),u=h(c)?[c]:LG(c,h);for(const f of u){const d=sw(a,l,1.1);ow(d,f),l++}}if(n){const c=a.node().getBBox(),h=2;return o.attr("x",c.x-h).attr("y",c.y-h).attr("width",c.width+2*h).attr("height",c.height+2*h),s.node()}else return a.node()}k(IG,"createFormattedText");function ow(e,t){e.text(""),t.forEach((r,n)=>{const i=e.append("tspan").attr("font-style",r.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",r.type==="strong"?"bold":"normal");n===0?i.text(r.content):i.text(" "+r.content)})}k(ow,"updateTextContentAndStyles");async function BG(e,t={}){const r=[];e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(i,s,o)=>(r.push((async()=>{const a=`${s}:${o}`;return await oTt(a)?await q1(a,void 0,{class:"label-icon"}):`<i class='${Ls(i,t).replace(":"," ")}'></i>`})()),i));const n=await Promise.all(r);return e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>n.shift()??"")}k(BG,"replaceIconSubstring");var Dc=k(async(e,t="",{style:r="",isTitle:n=!1,classes:i="",useHtmlLabels:s=!0,isNode:o=!0,width:a=200,addSvgBackground:l=!1}={},c)=>{if(ht.debug("XYZ createText",t,r,n,i,s,o,"addSvgBackground: ",l),s){const h=MG(t,c),u=await BG(Au(h),c),f=t.replace(/\\\\/g,"\\"),d={isNode:o,label:Ld(t)?f:u,labelStyle:r.replace("fill:","color:")};return await OG(e,d,a,i,l,c)}else{const h=t.replace(/<br\s*\/?>/g,"<br/>"),u=_G(h.replace("<br>","<br/>"),c),f=IG(a,e,u,t?l:!1);if(o){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));const d=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");$e(f).attr("style",d)}else{const d=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");$e(f).select("rect").attr("style",d.replace(/background:/g,"fill:"));const p=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");$e(f).select("text").attr("style",p)}return f}},"createText");function b3(e,t,r){if(e&&e.length){const[n,i]=t,s=Math.PI/180*r,o=Math.cos(s),a=Math.sin(s);for(const l of e){const[c,h]=l;l[0]=(c-n)*o-(h-i)*a+n,l[1]=(c-n)*a+(h-i)*o+i}}}function lTt(e,t){return e[0]===t[0]&&e[1]===t[1]}function cTt(e,t,r,n=1){const i=r,s=Math.max(t,.1),o=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,a=[0,0];if(i)for(const c of o)b3(c,a,i);const l=function(c,h,u){const f=[];for(const b of c){const x=[...b];lTt(x[0],x[x.length-1])||x.push([x[0][0],x[0][1]]),x.length>2&&f.push(x)}const d=[];h=Math.max(h,.1);const p=[];for(const b of f)for(let x=0;x<b.length-1;x++){const T=b[x],S=b[x+1];if(T[1]!==S[1]){const w=Math.min(T[1],S[1]);p.push({ymin:w,ymax:Math.max(T[1],S[1]),x:w===T[1]?T[0]:S[0],islope:(S[0]-T[0])/(S[1]-T[1])})}}if(p.sort((b,x)=>b.ymin<x.ymin?-1:b.ymin>x.ymin?1:b.x<x.x?-1:b.x>x.x?1:b.ymax===x.ymax?0:(b.ymax-x.ymax)/Math.abs(b.ymax-x.ymax)),!p.length)return d;let m=[],g=p[0].ymin,y=0;for(;m.length||p.length;){if(p.length){let b=-1;for(let x=0;x<p.length&&!(p[x].ymin>g);x++)b=x;p.splice(0,b+1).forEach(x=>{m.push({s:g,edge:x})})}if(m=m.filter(b=>!(b.edge.ymax<=g)),m.sort((b,x)=>b.edge.x===x.edge.x?0:(b.edge.x-x.edge.x)/Math.abs(b.edge.x-x.edge.x)),(u!==1||y%h==0)&&m.length>1)for(let b=0;b<m.length;b+=2){const x=b+1;if(x>=m.length)break;const T=m[b].edge,S=m[x].edge;d.push([[Math.round(T.x),g],[Math.round(S.x),g]])}g+=u,m.forEach(b=>{b.edge.x=b.edge.x+u*b.edge.islope}),y++}return d}(o,s,n);if(i){for(const c of o)b3(c,a,-i);(function(c,h,u){const f=[];c.forEach(d=>f.push(...d)),b3(f,h,u)})(l,a,-i)}return l}function V1(e,t){var r;const n=t.hachureAngle+90;let i=t.hachureGap;i<0&&(i=4*t.strokeWidth),i=Math.round(Math.max(i,.1));let s=1;return t.roughness>=1&&(((r=t.randomizer)===null||r===void 0?void 0:r.next())||Math.random())>.7&&(s=i),cTt(e,i,n,s||1)}class MT{constructor(t){this.helper=t}fillPolygons(t,r){return this._fillPolygons(t,r)}_fillPolygons(t,r){const n=V1(t,r);return{type:"fillSketch",ops:this.renderLines(n,r)}}renderLines(t,r){const n=[];for(const i of t)n.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],r));return n}}function aw(e){const t=e[0],r=e[1];return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))}class hTt extends MT{fillPolygons(t,r){let n=r.hachureGap;n<0&&(n=4*r.strokeWidth),n=Math.max(n,.1);const i=V1(t,Object.assign({},r,{hachureGap:n})),s=Math.PI/180*r.hachureAngle,o=[],a=.5*n*Math.cos(s),l=.5*n*Math.sin(s);for(const[c,h]of i)aw([c,h])&&o.push([[c[0]-a,c[1]+l],[...h]],[[c[0]+a,c[1]-l],[...h]]);return{type:"fillSketch",ops:this.renderLines(o,r)}}}class uTt extends MT{fillPolygons(t,r){const n=this._fillPolygons(t,r),i=Object.assign({},r,{hachureAngle:r.hachureAngle+90}),s=this._fillPolygons(t,i);return n.ops=n.ops.concat(s.ops),n}}class fTt{constructor(t){this.helper=t}fillPolygons(t,r){const n=V1(t,r=Object.assign({},r,{hachureAngle:0}));return this.dotsOnLines(n,r)}dotsOnLines(t,r){const n=[];let i=r.hachureGap;i<0&&(i=4*r.strokeWidth),i=Math.max(i,.1);let s=r.fillWeight;s<0&&(s=r.strokeWidth/2);const o=i/4;for(const a of t){const l=aw(a),c=l/i,h=Math.ceil(c)-1,u=l-h*i,f=(a[0][0]+a[1][0])/2-i/4,d=Math.min(a[0][1],a[1][1]);for(let p=0;p<h;p++){const m=d+u+p*i,g=f-o+2*Math.random()*o,y=m-o+2*Math.random()*o,b=this.helper.ellipse(g,y,s,s,r);n.push(...b.ops)}}return{type:"fillSketch",ops:n}}}class dTt{constructor(t){this.helper=t}fillPolygons(t,r){const n=V1(t,r);return{type:"fillSketch",ops:this.dashedLine(n,r)}}dashedLine(t,r){const n=r.dashOffset<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashOffset,i=r.dashGap<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashGap,s=[];return t.forEach(o=>{const a=aw(o),l=Math.floor(a/(n+i)),c=(a+i-l*(n+i))/2;let h=o[0],u=o[1];h[0]>u[0]&&(h=o[1],u=o[0]);const f=Math.atan((u[1]-h[1])/(u[0]-h[0]));for(let d=0;d<l;d++){const p=d*(n+i),m=p+n,g=[h[0]+p*Math.cos(f)+c*Math.cos(f),h[1]+p*Math.sin(f)+c*Math.sin(f)],y=[h[0]+m*Math.cos(f)+c*Math.cos(f),h[1]+m*Math.sin(f)+c*Math.sin(f)];s.push(...this.helper.doubleLineOps(g[0],g[1],y[0],y[1],r))}}),s}}class pTt{constructor(t){this.helper=t}fillPolygons(t,r){const n=r.hachureGap<0?4*r.strokeWidth:r.hachureGap,i=r.zigzagOffset<0?n:r.zigzagOffset,s=V1(t,r=Object.assign({},r,{hachureGap:n+i}));return{type:"fillSketch",ops:this.zigzagLines(s,i,r)}}zigzagLines(t,r,n){const i=[];return t.forEach(s=>{const o=aw(s),a=Math.round(o/(2*r));let l=s[0],c=s[1];l[0]>c[0]&&(l=s[1],c=s[0]);const h=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let u=0;u<a;u++){const f=2*u*r,d=2*(u+1)*r,p=Math.sqrt(2*Math.pow(r,2)),m=[l[0]+f*Math.cos(h),l[1]+f*Math.sin(h)],g=[l[0]+d*Math.cos(h),l[1]+d*Math.sin(h)],y=[m[0]+p*Math.cos(h+Math.PI/4),m[1]+p*Math.sin(h+Math.PI/4)];i.push(...this.helper.doubleLineOps(m[0],m[1],y[0],y[1],n),...this.helper.doubleLineOps(y[0],y[1],g[0],g[1],n))}}),i}}const mi={};class mTt{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const gTt=0,x3=1,hI=2,i2={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function v3(e,t){return e.type===t}function AT(e){const t=[],r=function(o){const a=new Array;for(;o!=="";)if(o.match(/^([ \t\r\n,]+)/))o=o.substr(RegExp.$1.length);else if(o.match(/^([aAcChHlLmMqQsStTvVzZ])/))a[a.length]={type:gTt,text:RegExp.$1},o=o.substr(RegExp.$1.length);else{if(!o.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];a[a.length]={type:x3,text:`${parseFloat(RegExp.$1)}`},o=o.substr(RegExp.$1.length)}return a[a.length]={type:hI,text:""},a}(e);let n="BOD",i=0,s=r[i];for(;!v3(s,hI);){let o=0;const a=[];if(n==="BOD"){if(s.text!=="M"&&s.text!=="m")return AT("M0,0"+e);i++,o=i2[s.text],n=s.text}else v3(s,x3)?o=i2[n]:(i++,o=i2[s.text],n=s.text);if(!(i+o<r.length))throw new Error("Path data ended short");for(let l=i;l<i+o;l++){const c=r[l];if(!v3(c,x3))throw new Error("Param not a number: "+n+","+c.text);a[a.length]=+c.text}if(typeof i2[n]!="number")throw new Error("Bad segment: "+n);{const l={key:n,data:a};t.push(l),i+=o,s=r[i],n==="M"&&(n="L"),n==="m"&&(n="l")}}return t}function RG(e){let t=0,r=0,n=0,i=0;const s=[];for(const{key:o,data:a}of e)switch(o){case"M":s.push({key:"M",data:[...a]}),[t,r]=a,[n,i]=a;break;case"m":t+=a[0],r+=a[1],s.push({key:"M",data:[t,r]}),n=t,i=r;break;case"L":s.push({key:"L",data:[...a]}),[t,r]=a;break;case"l":t+=a[0],r+=a[1],s.push({key:"L",data:[t,r]});break;case"C":s.push({key:"C",data:[...a]}),t=a[4],r=a[5];break;case"c":{const l=a.map((c,h)=>h%2?c+r:c+t);s.push({key:"C",data:l}),t=l[4],r=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),t=a[2],r=a[3];break;case"q":{const l=a.map((c,h)=>h%2?c+r:c+t);s.push({key:"Q",data:l}),t=l[2],r=l[3];break}case"A":s.push({key:"A",data:[...a]}),t=a[5],r=a[6];break;case"a":t+=a[5],r+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],t,r]});break;case"H":s.push({key:"H",data:[...a]}),t=a[0];break;case"h":t+=a[0],s.push({key:"H",data:[t]});break;case"V":s.push({key:"V",data:[...a]}),r=a[0];break;case"v":r+=a[0],s.push({key:"V",data:[r]});break;case"S":s.push({key:"S",data:[...a]}),t=a[2],r=a[3];break;case"s":{const l=a.map((c,h)=>h%2?c+r:c+t);s.push({key:"S",data:l}),t=l[2],r=l[3];break}case"T":s.push({key:"T",data:[...a]}),t=a[0],r=a[1];break;case"t":t+=a[0],r+=a[1],s.push({key:"T",data:[t,r]});break;case"Z":case"z":s.push({key:"Z",data:[]}),t=n,r=i}return s}function PG(e){const t=[];let r="",n=0,i=0,s=0,o=0,a=0,l=0;for(const{key:c,data:h}of e){switch(c){case"M":t.push({key:"M",data:[...h]}),[n,i]=h,[s,o]=h;break;case"C":t.push({key:"C",data:[...h]}),n=h[4],i=h[5],a=h[2],l=h[3];break;case"L":t.push({key:"L",data:[...h]}),[n,i]=h;break;case"H":n=h[0],t.push({key:"L",data:[n,i]});break;case"V":i=h[0],t.push({key:"L",data:[n,i]});break;case"S":{let u=0,f=0;r==="C"||r==="S"?(u=n+(n-a),f=i+(i-l)):(u=n,f=i),t.push({key:"C",data:[u,f,...h]}),a=h[0],l=h[1],n=h[2],i=h[3];break}case"T":{const[u,f]=h;let d=0,p=0;r==="Q"||r==="T"?(d=n+(n-a),p=i+(i-l)):(d=n,p=i);const m=n+2*(d-n)/3,g=i+2*(p-i)/3,y=u+2*(d-u)/3,b=f+2*(p-f)/3;t.push({key:"C",data:[m,g,y,b,u,f]}),a=d,l=p,n=u,i=f;break}case"Q":{const[u,f,d,p]=h,m=n+2*(u-n)/3,g=i+2*(f-i)/3,y=d+2*(u-d)/3,b=p+2*(f-p)/3;t.push({key:"C",data:[m,g,y,b,d,p]}),a=u,l=f,n=d,i=p;break}case"A":{const u=Math.abs(h[0]),f=Math.abs(h[1]),d=h[2],p=h[3],m=h[4],g=h[5],y=h[6];u===0||f===0?(t.push({key:"C",data:[n,i,g,y,g,y]}),n=g,i=y):(n!==g||i!==y)&&(NG(n,i,g,y,u,f,d,p,m).forEach(function(b){t.push({key:"C",data:b})}),n=g,i=y);break}case"Z":t.push({key:"Z",data:[]}),n=s,i=o}r=c}return t}function H0(e,t,r){return[e*Math.cos(r)-t*Math.sin(r),e*Math.sin(r)+t*Math.cos(r)]}function NG(e,t,r,n,i,s,o,a,l,c){const h=(u=o,Math.PI*u/180);var u;let f=[],d=0,p=0,m=0,g=0;if(c)[d,p,m,g]=c;else{[e,t]=H0(e,t,-h),[r,n]=H0(r,n,-h);const K=(e-r)/2,z=(t-n)/2;let $=K*K/(i*i)+z*z/(s*s);$>1&&($=Math.sqrt($),i*=$,s*=$);const H=i*i,U=s*s,q=H*U-H*z*z-U*K*K,rt=H*z*z+U*K*K,E=(a===l?-1:1)*Math.sqrt(Math.abs(q/rt));m=E*i*z/s+(e+r)/2,g=E*-s*K/i+(t+n)/2,d=Math.asin(parseFloat(((t-g)/s).toFixed(9))),p=Math.asin(parseFloat(((n-g)/s).toFixed(9))),e<m&&(d=Math.PI-d),r<m&&(p=Math.PI-p),d<0&&(d=2*Math.PI+d),p<0&&(p=2*Math.PI+p),l&&d>p&&(d-=2*Math.PI),!l&&p>d&&(p-=2*Math.PI)}let y=p-d;if(Math.abs(y)>120*Math.PI/180){const K=p,z=r,$=n;p=l&&p>d?d+120*Math.PI/180*1:d+120*Math.PI/180*-1,f=NG(r=m+i*Math.cos(p),n=g+s*Math.sin(p),z,$,i,s,o,0,l,[p,K,m,g])}y=p-d;const b=Math.cos(d),x=Math.sin(d),T=Math.cos(p),S=Math.sin(p),w=Math.tan(y/4),_=4/3*i*w,I=4/3*s*w,N=[e,t],L=[e+_*x,t-I*b],D=[r+_*S,n-I*T],P=[r,n];if(L[0]=2*N[0]-L[0],L[1]=2*N[1]-L[1],c)return[L,D,P].concat(f);{f=[L,D,P].concat(f);const K=[];for(let z=0;z<f.length;z+=3){const $=H0(f[z][0],f[z][1],h),H=H0(f[z+1][0],f[z+1][1],h),U=H0(f[z+2][0],f[z+2][1],h);K.push([$[0],$[1],H[0],H[1],U[0],U[1]])}return K}}const yTt={randOffset:function(e,t){return pe(e,t)},randOffsetWithRange:function(e,t,r){return sv(e,t,r)},ellipse:function(e,t,r,n,i){const s=$G(r,n,i);return q6(e,t,i,s).opset},doubleLineOps:function(e,t,r,n,i){return vc(e,t,r,n,i,!0)}};function FG(e,t,r,n,i){return{type:"path",ops:vc(e,t,r,n,i)}}function Cb(e,t,r){const n=(e||[]).length;if(n>2){const i=[];for(let s=0;s<n-1;s++)i.push(...vc(e[s][0],e[s][1],e[s+1][0],e[s+1][1],r));return t&&i.push(...vc(e[n-1][0],e[n-1][1],e[0][0],e[0][1],r)),{type:"path",ops:i}}return n===2?FG(e[0][0],e[0][1],e[1][0],e[1][1],r):{type:"path",ops:[]}}function bTt(e,t,r,n,i){return function(s,o){return Cb(s,!0,o)}([[e,t],[e+r,t],[e+r,t+n],[e,t+n]],i)}function uI(e,t){if(e.length){const r=typeof e[0][0]=="number"?[e]:e,n=s2(r[0],1*(1+.2*t.roughness),t),i=t.disableMultiStroke?[]:s2(r[0],1.5*(1+.22*t.roughness),pI(t));for(let s=1;s<r.length;s++){const o=r[s];if(o.length){const a=s2(o,1*(1+.2*t.roughness),t),l=t.disableMultiStroke?[]:s2(o,1.5*(1+.22*t.roughness),pI(t));for(const c of a)c.op!=="move"&&n.push(c);for(const c of l)c.op!=="move"&&i.push(c)}}return{type:"path",ops:n.concat(i)}}return{type:"path",ops:[]}}function $G(e,t,r){const n=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),i=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*n)),s=2*Math.PI/i;let o=Math.abs(e/2),a=Math.abs(t/2);const l=1-r.curveFitting;return o+=pe(o*l,r),a+=pe(a*l,r),{increment:s,rx:o,ry:a}}function q6(e,t,r,n){const[i,s]=mI(n.increment,e,t,n.rx,n.ry,1,n.increment*sv(.1,sv(.4,1,r),r),r);let o=ov(i,null,r);if(!r.disableMultiStroke&&r.roughness!==0){const[a]=mI(n.increment,e,t,n.rx,n.ry,1.5,0,r),l=ov(a,null,r);o=o.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function fI(e,t,r,n,i,s,o,a,l){const c=e,h=t;let u=Math.abs(r/2),f=Math.abs(n/2);u+=pe(.01*u,l),f+=pe(.01*f,l);let d=i,p=s;for(;d<0;)d+=2*Math.PI,p+=2*Math.PI;p-d>2*Math.PI&&(d=0,p=2*Math.PI);const m=2*Math.PI/l.curveStepCount,g=Math.min(m/2,(p-d)/2),y=gI(g,c,h,u,f,d,p,1,l);if(!l.disableMultiStroke){const b=gI(g,c,h,u,f,d,p,1.5,l);y.push(...b)}return o&&(a?y.push(...vc(c,h,c+u*Math.cos(d),h+f*Math.sin(d),l),...vc(c,h,c+u*Math.cos(p),h+f*Math.sin(p),l)):y.push({op:"lineTo",data:[c,h]},{op:"lineTo",data:[c+u*Math.cos(d),h+f*Math.sin(d)]})),{type:"path",ops:y}}function dI(e,t){const r=PG(RG(AT(e))),n=[];let i=[0,0],s=[0,0];for(const{key:o,data:a}of r)switch(o){case"M":s=[a[0],a[1]],i=[a[0],a[1]];break;case"L":n.push(...vc(s[0],s[1],a[0],a[1],t)),s=[a[0],a[1]];break;case"C":{const[l,c,h,u,f,d]=a;n.push(...xTt(l,c,h,u,f,d,s,t)),s=[f,d];break}case"Z":n.push(...vc(s[0],s[1],i[0],i[1],t)),s=[i[0],i[1]]}return{type:"path",ops:n}}function w3(e,t){const r=[];for(const n of e)if(n.length){const i=t.maxRandomnessOffset||0,s=n.length;if(s>2){r.push({op:"move",data:[n[0][0]+pe(i,t),n[0][1]+pe(i,t)]});for(let o=1;o<s;o++)r.push({op:"lineTo",data:[n[o][0]+pe(i,t),n[o][1]+pe(i,t)]})}}return{type:"fillPath",ops:r}}function $u(e,t){return function(r,n){let i=r.fillStyle||"hachure";if(!mi[i])switch(i){case"zigzag":mi[i]||(mi[i]=new hTt(n));break;case"cross-hatch":mi[i]||(mi[i]=new uTt(n));break;case"dots":mi[i]||(mi[i]=new fTt(n));break;case"dashed":mi[i]||(mi[i]=new dTt(n));break;case"zigzag-line":mi[i]||(mi[i]=new pTt(n));break;default:i="hachure",mi[i]||(mi[i]=new MT(n))}return mi[i]}(t,yTt).fillPolygons(e,t)}function pI(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function zG(e){return e.randomizer||(e.randomizer=new mTt(e.seed||0)),e.randomizer.next()}function sv(e,t,r,n=1){return r.roughness*n*(zG(r)*(t-e)+e)}function pe(e,t,r=1){return sv(-e,e,t,r)}function vc(e,t,r,n,i,s=!1){const o=s?i.disableMultiStrokeFill:i.disableMultiStroke,a=V6(e,t,r,n,i,!0,!1);if(o)return a;const l=V6(e,t,r,n,i,!0,!0);return a.concat(l)}function V6(e,t,r,n,i,s,o){const a=Math.pow(e-r,2)+Math.pow(t-n,2),l=Math.sqrt(a);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let h=i.maxRandomnessOffset||0;h*h*100>a&&(h=l/10);const u=h/2,f=.2+.2*zG(i);let d=i.bowing*i.maxRandomnessOffset*(n-t)/200,p=i.bowing*i.maxRandomnessOffset*(e-r)/200;d=pe(d,i,c),p=pe(p,i,c);const m=[],g=()=>pe(u,i,c),y=()=>pe(h,i,c),b=i.preserveVertices;return o?m.push({op:"move",data:[e+(b?0:g()),t+(b?0:g())]}):m.push({op:"move",data:[e+(b?0:pe(h,i,c)),t+(b?0:pe(h,i,c))]}),o?m.push({op:"bcurveTo",data:[d+e+(r-e)*f+g(),p+t+(n-t)*f+g(),d+e+2*(r-e)*f+g(),p+t+2*(n-t)*f+g(),r+(b?0:g()),n+(b?0:g())]}):m.push({op:"bcurveTo",data:[d+e+(r-e)*f+y(),p+t+(n-t)*f+y(),d+e+2*(r-e)*f+y(),p+t+2*(n-t)*f+y(),r+(b?0:y()),n+(b?0:y())]}),m}function s2(e,t,r){if(!e.length)return[];const n=[];n.push([e[0][0]+pe(t,r),e[0][1]+pe(t,r)]),n.push([e[0][0]+pe(t,r),e[0][1]+pe(t,r)]);for(let i=1;i<e.length;i++)n.push([e[i][0]+pe(t,r),e[i][1]+pe(t,r)]),i===e.length-1&&n.push([e[i][0]+pe(t,r),e[i][1]+pe(t,r)]);return ov(n,null,r)}function ov(e,t,r){const n=e.length,i=[];if(n>3){const s=[],o=1-r.curveTightness;i.push({op:"move",data:[e[1][0],e[1][1]]});for(let a=1;a+2<n;a++){const l=e[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*e[a+1][0]-o*e[a-1][0])/6,l[1]+(o*e[a+1][1]-o*e[a-1][1])/6],s[2]=[e[a+1][0]+(o*e[a][0]-o*e[a+2][0])/6,e[a+1][1]+(o*e[a][1]-o*e[a+2][1])/6],s[3]=[e[a+1][0],e[a+1][1]],i.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else n===3?(i.push({op:"move",data:[e[1][0],e[1][1]]}),i.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):n===2&&i.push(...V6(e[0][0],e[0][1],e[1][0],e[1][1],r,!0,!0));return i}function mI(e,t,r,n,i,s,o,a){const l=[],c=[];if(a.roughness===0){e/=4,c.push([t+n*Math.cos(-e),r+i*Math.sin(-e)]);for(let h=0;h<=2*Math.PI;h+=e){const u=[t+n*Math.cos(h),r+i*Math.sin(h)];l.push(u),c.push(u)}c.push([t+n*Math.cos(0),r+i*Math.sin(0)]),c.push([t+n*Math.cos(e),r+i*Math.sin(e)])}else{const h=pe(.5,a)-Math.PI/2;c.push([pe(s,a)+t+.9*n*Math.cos(h-e),pe(s,a)+r+.9*i*Math.sin(h-e)]);const u=2*Math.PI+h-.01;for(let f=h;f<u;f+=e){const d=[pe(s,a)+t+n*Math.cos(f),pe(s,a)+r+i*Math.sin(f)];l.push(d),c.push(d)}c.push([pe(s,a)+t+n*Math.cos(h+2*Math.PI+.5*o),pe(s,a)+r+i*Math.sin(h+2*Math.PI+.5*o)]),c.push([pe(s,a)+t+.98*n*Math.cos(h+o),pe(s,a)+r+.98*i*Math.sin(h+o)]),c.push([pe(s,a)+t+.9*n*Math.cos(h+.5*o),pe(s,a)+r+.9*i*Math.sin(h+.5*o)])}return[c,l]}function gI(e,t,r,n,i,s,o,a,l){const c=s+pe(.1,l),h=[];h.push([pe(a,l)+t+.9*n*Math.cos(c-e),pe(a,l)+r+.9*i*Math.sin(c-e)]);for(let u=c;u<=o;u+=e)h.push([pe(a,l)+t+n*Math.cos(u),pe(a,l)+r+i*Math.sin(u)]);return h.push([t+n*Math.cos(o),r+i*Math.sin(o)]),h.push([t+n*Math.cos(o),r+i*Math.sin(o)]),ov(h,null,l)}function xTt(e,t,r,n,i,s,o,a){const l=[],c=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let h=[0,0];const u=a.disableMultiStroke?1:2,f=a.preserveVertices;for(let d=0;d<u;d++)d===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(f?0:pe(c[0],a)),o[1]+(f?0:pe(c[0],a))]}),h=f?[i,s]:[i+pe(c[d],a),s+pe(c[d],a)],l.push({op:"bcurveTo",data:[e+pe(c[d],a),t+pe(c[d],a),r+pe(c[d],a),n+pe(c[d],a),h[0],h[1]]});return l}function q0(e){return[...e]}function yI(e,t=0){const r=e.length;if(r<3)throw new Error("A curve must have at least three points.");const n=[];if(r===3)n.push(q0(e[0]),q0(e[1]),q0(e[2]),q0(e[2]));else{const i=[];i.push(e[0],e[0]);for(let a=1;a<e.length;a++)i.push(e[a]),a===e.length-1&&i.push(e[a]);const s=[],o=1-t;n.push(q0(i[0]));for(let a=1;a+2<i.length;a++){const l=i[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*i[a+1][0]-o*i[a-1][0])/6,l[1]+(o*i[a+1][1]-o*i[a-1][1])/6],s[2]=[i[a+1][0]+(o*i[a][0]-o*i[a+2][0])/6,i[a+1][1]+(o*i[a][1]-o*i[a+2][1])/6],s[3]=[i[a+1][0],i[a+1][1]],n.push(s[1],s[2],s[3])}}return n}function Sb(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function vTt(e,t,r){const n=Sb(t,r);if(n===0)return Sb(e,t);let i=((e[0]-t[0])*(r[0]-t[0])+(e[1]-t[1])*(r[1]-t[1]))/n;return i=Math.max(0,Math.min(1,i)),Sb(e,ih(t,r,i))}function ih(e,t,r){return[e[0]+(t[0]-e[0])*r,e[1]+(t[1]-e[1])*r]}function W6(e,t,r,n){const i=n||[];if(function(a,l){const c=a[l+0],h=a[l+1],u=a[l+2],f=a[l+3];let d=3*h[0]-2*c[0]-f[0];d*=d;let p=3*h[1]-2*c[1]-f[1];p*=p;let m=3*u[0]-2*f[0]-c[0];m*=m;let g=3*u[1]-2*f[1]-c[1];return g*=g,d<m&&(d=m),p<g&&(p=g),d+p}(e,t)<r){const a=e[t+0];i.length?(s=i[i.length-1],o=a,Math.sqrt(Sb(s,o))>1&&i.push(a)):i.push(a),i.push(e[t+3])}else{const l=e[t+0],c=e[t+1],h=e[t+2],u=e[t+3],f=ih(l,c,.5),d=ih(c,h,.5),p=ih(h,u,.5),m=ih(f,d,.5),g=ih(d,p,.5),y=ih(m,g,.5);W6([l,f,m,y],0,r,i),W6([y,g,p,u],0,r,i)}var s,o;return i}function wTt(e,t){return av(e,0,e.length,t)}function av(e,t,r,n,i){const s=i||[],o=e[t],a=e[r-1];let l=0,c=1;for(let h=t+1;h<r-1;++h){const u=vTt(e[h],o,a);u>l&&(l=u,c=h)}return Math.sqrt(l)>n?(av(e,t,c+1,n,s),av(e,c,r,n,s)):(s.length||s.push(o),s.push(a)),s}function k3(e,t=.15,r){const n=[],i=(e.length-1)/3;for(let s=0;s<i;s++)W6(e,3*s,t,n);return r&&r>0?av(n,0,n.length,r):n}const Vi="none";class lv{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,r,n){return{shape:t,sets:r||[],options:n||this.defaultOptions}}line(t,r,n,i,s){const o=this._o(s);return this._d("line",[FG(t,r,n,i,o)],o)}rectangle(t,r,n,i,s){const o=this._o(s),a=[],l=bTt(t,r,n,i,o);if(o.fill){const c=[[t,r],[t+n,r],[t+n,r+i],[t,r+i]];o.fillStyle==="solid"?a.push(w3([c],o)):a.push($u([c],o))}return o.stroke!==Vi&&a.push(l),this._d("rectangle",a,o)}ellipse(t,r,n,i,s){const o=this._o(s),a=[],l=$G(n,i,o),c=q6(t,r,o,l);if(o.fill)if(o.fillStyle==="solid"){const h=q6(t,r,o,l).opset;h.type="fillPath",a.push(h)}else a.push($u([c.estimatedPoints],o));return o.stroke!==Vi&&a.push(c.opset),this._d("ellipse",a,o)}circle(t,r,n,i){const s=this.ellipse(t,r,n,n,i);return s.shape="circle",s}linearPath(t,r){const n=this._o(r);return this._d("linearPath",[Cb(t,!1,n)],n)}arc(t,r,n,i,s,o,a=!1,l){const c=this._o(l),h=[],u=fI(t,r,n,i,s,o,a,!0,c);if(a&&c.fill)if(c.fillStyle==="solid"){const f=Object.assign({},c);f.disableMultiStroke=!0;const d=fI(t,r,n,i,s,o,!0,!1,f);d.type="fillPath",h.push(d)}else h.push(function(f,d,p,m,g,y,b){const x=f,T=d;let S=Math.abs(p/2),w=Math.abs(m/2);S+=pe(.01*S,b),w+=pe(.01*w,b);let _=g,I=y;for(;_<0;)_+=2*Math.PI,I+=2*Math.PI;I-_>2*Math.PI&&(_=0,I=2*Math.PI);const N=(I-_)/b.curveStepCount,L=[];for(let D=_;D<=I;D+=N)L.push([x+S*Math.cos(D),T+w*Math.sin(D)]);return L.push([x+S*Math.cos(I),T+w*Math.sin(I)]),L.push([x,T]),$u([L],b)}(t,r,n,i,s,o,c));return c.stroke!==Vi&&h.push(u),this._d("arc",h,c)}curve(t,r){const n=this._o(r),i=[],s=uI(t,n);if(n.fill&&n.fill!==Vi)if(n.fillStyle==="solid"){const o=uI(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=[],a=t;if(a.length){const l=typeof a[0][0]=="number"?[a]:a;for(const c of l)c.length<3?o.push(...c):c.length===3?o.push(...k3(yI([c[0],c[0],c[1],c[2]]),10,(1+n.roughness)/2)):o.push(...k3(yI(c),10,(1+n.roughness)/2))}o.length&&i.push($u([o],n))}return n.stroke!==Vi&&i.push(s),this._d("curve",i,n)}polygon(t,r){const n=this._o(r),i=[],s=Cb(t,!0,n);return n.fill&&(n.fillStyle==="solid"?i.push(w3([t],n)):i.push($u([t],n))),n.stroke!==Vi&&i.push(s),this._d("polygon",i,n)}path(t,r){const n=this._o(r),i=[];if(!t)return this._d("path",i,n);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=n.fill&&n.fill!=="transparent"&&n.fill!==Vi,o=n.stroke!==Vi,a=!!(n.simplification&&n.simplification<1),l=function(h,u,f){const d=PG(RG(AT(h))),p=[];let m=[],g=[0,0],y=[];const b=()=>{y.length>=4&&m.push(...k3(y,u)),y=[]},x=()=>{b(),m.length&&(p.push(m),m=[])};for(const{key:S,data:w}of d)switch(S){case"M":x(),g=[w[0],w[1]],m.push(g);break;case"L":b(),m.push([w[0],w[1]]);break;case"C":if(!y.length){const _=m.length?m[m.length-1]:g;y.push([_[0],_[1]])}y.push([w[0],w[1]]),y.push([w[2],w[3]]),y.push([w[4],w[5]]);break;case"Z":b(),m.push([g[0],g[1]])}if(x(),!f)return p;const T=[];for(const S of p){const w=wTt(S,f);w.length&&T.push(w)}return T}(t,1,a?4-4*(n.simplification||1):(1+n.roughness)/2),c=dI(t,n);if(s)if(n.fillStyle==="solid")if(l.length===1){const h=dI(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(h.ops)})}else i.push(w3(l,n));else i.push($u(l,n));return o&&(a?l.forEach(h=>{i.push(Cb(h,!1,n))}):i.push(c)),this._d("path",i,n)}opsToPath(t,r){let n="";for(const i of t.ops){const s=typeof r=="number"&&r>=0?i.data.map(o=>+o.toFixed(r)):i.data;switch(i.op){case"move":n+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":n+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":n+=`L${s[0]} ${s[1]} `}}return n.trim()}toPaths(t){const r=t.sets||[],n=t.options||this.defaultOptions,i=[];for(const s of r){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:Vi};break;case"fillPath":o={d:this.opsToPath(s),stroke:Vi,strokeWidth:0,fill:n.fill||Vi};break;case"fillSketch":o=this.fillSketch(s,n)}o&&i.push(o)}return i}fillSketch(t,r){let n=r.fillWeight;return n<0&&(n=r.strokeWidth/2),{d:this.opsToPath(t),stroke:r.fill||Vi,strokeWidth:n,fill:Vi}}_mergedShape(t){return t.filter((r,n)=>n===0||r.op!=="move")}}class kTt{constructor(t,r){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new lv(r)}draw(t){const r=t.sets||[],n=t.options||this.getDefaultOptions(),i=this.ctx,s=t.options.fixedDecimalPlaceDigits;for(const o of r)switch(o.type){case"path":i.save(),i.strokeStyle=n.stroke==="none"?"transparent":n.stroke,i.lineWidth=n.strokeWidth,n.strokeLineDash&&i.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(i.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(i,o,s),i.restore();break;case"fillPath":{i.save(),i.fillStyle=n.fill||"";const a=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,o,s,a),i.restore();break}case"fillSketch":this.fillSketch(i,o,n)}}fillSketch(t,r,n){let i=n.fillWeight;i<0&&(i=n.strokeWidth/2),t.save(),n.fillLineDash&&t.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(t.lineDashOffset=n.fillLineDashOffset),t.strokeStyle=n.fill||"",t.lineWidth=i,this._drawToContext(t,r,n.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,r,n,i="nonzero"){t.beginPath();for(const s of r.ops){const o=typeof n=="number"&&n>=0?s.data.map(a=>+a.toFixed(n)):s.data;switch(s.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1])}}r.type==="fillPath"?t.fill(i):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,r,n,i,s){const o=this.gen.line(t,r,n,i,s);return this.draw(o),o}rectangle(t,r,n,i,s){const o=this.gen.rectangle(t,r,n,i,s);return this.draw(o),o}ellipse(t,r,n,i,s){const o=this.gen.ellipse(t,r,n,i,s);return this.draw(o),o}circle(t,r,n,i){const s=this.gen.circle(t,r,n,i);return this.draw(s),s}linearPath(t,r){const n=this.gen.linearPath(t,r);return this.draw(n),n}polygon(t,r){const n=this.gen.polygon(t,r);return this.draw(n),n}arc(t,r,n,i,s,o,a=!1,l){const c=this.gen.arc(t,r,n,i,s,o,a,l);return this.draw(c),c}curve(t,r){const n=this.gen.curve(t,r);return this.draw(n),n}path(t,r){const n=this.gen.path(t,r);return this.draw(n),n}}const o2="http://www.w3.org/2000/svg";class CTt{constructor(t,r){this.svg=t,this.gen=new lv(r)}draw(t){const r=t.sets||[],n=t.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,s=i.createElementNS(o2,"g"),o=t.options.fixedDecimalPlaceDigits;for(const a of r){let l=null;switch(a.type){case"path":l=i.createElementNS(o2,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",n.stroke),l.setAttribute("stroke-width",n.strokeWidth+""),l.setAttribute("fill","none"),n.strokeLineDash&&l.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${n.strokeLineDashOffset}`);break;case"fillPath":l=i.createElementNS(o2,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",n.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(i,a,n)}l&&s.appendChild(l)}return s}fillSketch(t,r,n){let i=n.fillWeight;i<0&&(i=n.strokeWidth/2);const s=t.createElementNS(o2,"path");return s.setAttribute("d",this.opsToPath(r,n.fixedDecimalPlaceDigits)),s.setAttribute("stroke",n.fill||""),s.setAttribute("stroke-width",i+""),s.setAttribute("fill","none"),n.fillLineDash&&s.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${n.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,r){return this.gen.opsToPath(t,r)}line(t,r,n,i,s){const o=this.gen.line(t,r,n,i,s);return this.draw(o)}rectangle(t,r,n,i,s){const o=this.gen.rectangle(t,r,n,i,s);return this.draw(o)}ellipse(t,r,n,i,s){const o=this.gen.ellipse(t,r,n,i,s);return this.draw(o)}circle(t,r,n,i){const s=this.gen.circle(t,r,n,i);return this.draw(s)}linearPath(t,r){const n=this.gen.linearPath(t,r);return this.draw(n)}polygon(t,r){const n=this.gen.polygon(t,r);return this.draw(n)}arc(t,r,n,i,s,o,a=!1,l){const c=this.gen.arc(t,r,n,i,s,o,a,l);return this.draw(c)}curve(t,r){const n=this.gen.curve(t,r);return this.draw(n)}path(t,r){const n=this.gen.path(t,r);return this.draw(n)}}var Wt={canvas:(e,t)=>new kTt(e,t),svg:(e,t)=>new CTt(e,t),generator:e=>new lv(e),newSeed:()=>lv.newSeed()},fe=k(async(e,t,r)=>{var u,f;let n;const i=t.useHtmlLabels||en((u=Ze())==null?void 0:u.htmlLabels);r?n=r:n="node default";const s=e.insert("g").attr("class",n).attr("id",t.domId||t.id),o=s.insert("g").attr("class","label").attr("style",Hn(t.labelStyle));let a;t.label===void 0?a="":a=typeof t.label=="string"?t.label:t.label[0];const l=await Dc(o,Ls(Au(a),Ze()),{useHtmlLabels:i,width:t.width||((f=Ze().flowchart)==null?void 0:f.wrappingWidth),cssClasses:"markdown-node-label",style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img});let c=l.getBBox();const h=((t==null?void 0:t.padding)??0)/2;if(i){const d=l.children[0],p=$e(l),m=d.getElementsByTagName("img");if(m){const g=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...m].map(y=>new Promise(b=>{function x(){if(y.style.display="flex",y.style.flexDirection="column",g){const T=Ze().fontSize?Ze().fontSize:window.getComputedStyle(document.body).fontSize,S=5,[w=dW.fontSize]=rw(T),_=w*S+"px";y.style.minWidth=_,y.style.maxWidth=_}else y.style.width="100%";b(y)}k(x,"setupImage"),setTimeout(()=>{y.complete&&x()}),y.addEventListener("error",x),y.addEventListener("load",x)})))}c=d.getBoundingClientRect(),p.attr("width",c.width),p.attr("height",c.height)}return i?o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"):o.attr("transform","translate(0, "+-c.height/2+")"),t.centerLabel&&o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:s,bbox:c,halfPadding:h,label:o}},"labelHelper"),C3=k(async(e,t,r)=>{var l,c,h,u,f,d;const n=r.useHtmlLabels||en((c=(l=Ze())==null?void 0:l.flowchart)==null?void 0:c.htmlLabels),i=e.insert("g").attr("class","label").attr("style",r.labelStyle||""),s=await Dc(i,Ls(Au(t),Ze()),{useHtmlLabels:n,width:r.width||((u=(h=Ze())==null?void 0:h.flowchart)==null?void 0:u.wrappingWidth),style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img});let o=s.getBBox();const a=r.padding/2;if(en((d=(f=Ze())==null?void 0:f.flowchart)==null?void 0:d.htmlLabels)){const p=s.children[0],m=$e(s);o=p.getBoundingClientRect(),m.attr("width",o.width),m.attr("height",o.height)}return n?i.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"):i.attr("transform","translate(0, "+-o.height/2+")"),r.centerLabel&&i.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),i.insert("rect",":first-child"),{shapeSvg:e,bbox:o,halfPadding:a,label:i}},"insertLabel"),Kt=k((e,t)=>{const r=t.node().getBBox();e.width=r.width,e.height=r.height},"updateNodeBounds"),ce=k((e,t)=>(e.look==="handDrawn"?"rough-node":"node")+" "+e.cssClasses+" "+(t||""),"getNodeClasses");function Pe(e){const t=e.map((r,n)=>`${n===0?"M":"L"}${r.x},${r.y}`);return t.push("Z"),t.join(" ")}k(Pe,"createPathFromPoints");function wc(e,t,r,n,i,s){const o=[],l=r-e,c=n-t,h=l/s,u=2*Math.PI/h,f=t+c/2;for(let d=0;d<=50;d++){const p=d/50,m=e+p*l,g=f+i*Math.sin(u*(m-e));o.push({x:m,y:g})}return o}k(wc,"generateFullSineWavePoints");function Sg(e,t,r,n,i,s){const o=[],a=i*Math.PI/180,h=(s*Math.PI/180-a)/(n-1);for(let u=0;u<n;u++){const f=a+u*h,d=e+r*Math.cos(f),p=t+r*Math.sin(f);o.push({x:-d,y:-p})}return o}k(Sg,"generateCirclePoints");var STt=k((e,t)=>{var r=e.x,n=e.y,i=t.x-r,s=t.y-n,o=e.width/2,a=e.height/2,l,c;return Math.abs(s)*o>Math.abs(i)*a?(s<0&&(a=-a),l=s===0?0:a*i/s,c=a):(i<0&&(o=-o),l=o,c=i===0?0:o*s/i),{x:r+l,y:n+c}},"intersectRect"),i0=STt;function HG(e,t){t&&e.attr("style",t)}k(HG,"applyStyle");async function qG(e){const t=$e(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=t.append("xhtml:div"),n=Ze();let i=e.label;e.label&&Ld(e.label)&&(i=await F9(e.label.replace(r0.lineBreakRegex,`
`),n));const o='<span class="'+(e.isNode?"nodeLabel":"edgeLabel")+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+i+"</span>";return r.html(Ls(o,n)),HG(r,e.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}k(qG,"addHtmlLabel");var TTt=k(async(e,t,r,n)=>{let i=e||"";if(typeof i=="object"&&(i=i[0]),en(Ze().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),ht.info("vertexText"+i);const s={isNode:n,label:Au(i).replace(/fa[blrs]?:fa-[\w-]+/g,a=>`<i class='${a.replace(":"," ")}'></i>`),labelStyle:t&&t.replace("fill:","color:")};return await qG(s)}else{const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("style",t.replace("color:","fill:"));let o=[];typeof i=="string"?o=i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?o=i:o=[];for(const a of o){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),r?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=a.trim(),s.appendChild(l)}return s}},"createLabel"),vh=TTt,Ic=k((e,t,r,n,i)=>["M",e+i,t,"H",e+r-i,"A",i,i,0,0,1,e+r,t+i,"V",t+n-i,"A",i,i,0,0,1,e+r-i,t+n,"H",e+i,"A",i,i,0,0,1,e,t+n-i,"V",t+i,"A",i,i,0,0,1,e+i,t,"Z"].join(" "),"createRoundedRectPathD"),VG=k(async(e,t)=>{ht.info("Creating subgraph rect for ",t.id,t);const r=Ze(),{themeVariables:n,handDrawnSeed:i}=r,{clusterBkg:s,clusterBorder:o}=n,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:h}=Ut(t),u=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),f=en(r.flowchart.htmlLabels),d=u.insert("g").attr("class","cluster-label "),p=await Dc(d,t.label,{style:t.labelStyle,useHtmlLabels:f,isNode:!0});let m=p.getBBox();if(en(r.flowchart.htmlLabels)){const _=p.children[0],I=$e(p);m=_.getBoundingClientRect(),I.attr("width",m.width),I.attr("height",m.height)}const g=t.width<=m.width+t.padding?m.width+t.padding:t.width;t.width<=m.width+t.padding?t.diff=(g-t.width)/2-t.padding:t.diff=-t.padding;const y=t.height,b=t.x-g/2,x=t.y-y/2;ht.trace("Data ",t,JSON.stringify(t));let T;if(t.look==="handDrawn"){const _=Wt.svg(u),I=jt(t,{roughness:.7,fill:s,stroke:o,fillWeight:3,seed:i}),N=_.path(Ic(b,x,g,y,0),I);T=u.insert(()=>(ht.debug("Rough node insert CXC",N),N),":first-child"),T.select("path:nth-child(2)").attr("style",c.join(";")),T.select("path").attr("style",h.join(";").replace("fill","stroke"))}else T=u.insert("rect",":first-child"),T.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",b).attr("y",x).attr("width",g).attr("height",y);const{subGraphTitleTopMargin:S}=cT(r);if(d.attr("transform",`translate(${t.x-m.width/2}, ${t.y-t.height/2+S})`),a){const _=d.select("span");_&&_.attr("style",a)}const w=T.node().getBBox();return t.offsetX=0,t.width=w.width,t.height=w.height,t.offsetY=m.height-t.padding/2,t.intersect=function(_){return i0(t,_)},{cluster:u,labelBBox:m}},"rect"),_Tt=k((e,t)=>{const r=e.insert("g").attr("class","note-cluster").attr("id",t.id),n=r.insert("rect",":first-child"),i=0*t.padding,s=i/2;n.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-s).attr("y",t.y-t.height/2-s).attr("width",t.width+i).attr("height",t.height+i).attr("fill","none");const o=n.node().getBBox();return t.width=o.width,t.height=o.height,t.intersect=function(a){return i0(t,a)},{cluster:r,labelBBox:{width:0,height:0}}},"noteGroup"),MTt=k(async(e,t)=>{const r=Ze(),{themeVariables:n,handDrawnSeed:i}=r,{altBackground:s,compositeBackground:o,compositeTitleBackground:a,nodeBorder:l}=n,c=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-id",t.id).attr("data-look",t.look),h=c.insert("g",":first-child"),u=c.insert("g").attr("class","cluster-label");let f=c.append("rect");const d=u.node().appendChild(await vh(t.label,t.labelStyle,void 0,!0));let p=d.getBBox();if(en(r.flowchart.htmlLabels)){const N=d.children[0],L=$e(d);p=N.getBoundingClientRect(),L.attr("width",p.width),L.attr("height",p.height)}const m=0*t.padding,g=m/2,y=(t.width<=p.width+t.padding?p.width+t.padding:t.width)+m;t.width<=p.width+t.padding?t.diff=(y-t.width)/2-t.padding:t.diff=-t.padding;const b=t.height+m,x=t.height+m-p.height-6,T=t.x-y/2,S=t.y-b/2;t.width=y;const w=t.y-t.height/2-g+p.height+2;let _;if(t.look==="handDrawn"){const N=t.cssClasses.includes("statediagram-cluster-alt"),L=Wt.svg(c),D=t.rx||t.ry?L.path(Ic(T,S,y,b,10),{roughness:.7,fill:a,fillStyle:"solid",stroke:l,seed:i}):L.rectangle(T,S,y,b,{seed:i});_=c.insert(()=>D,":first-child");const P=L.rectangle(T,w,y,x,{fill:N?s:o,fillStyle:N?"hachure":"solid",stroke:l,seed:i});_=c.insert(()=>D,":first-child"),f=c.insert(()=>P)}else _=h.insert("rect",":first-child"),_.attr("class","outer").attr("x",T).attr("y",S).attr("width",y).attr("height",b).attr("data-look",t.look),f.attr("class","inner").attr("x",T).attr("y",w).attr("width",y).attr("height",x);u.attr("transform",`translate(${t.x-p.width/2}, ${S+1-(en(r.flowchart.htmlLabels)?0:3)})`);const I=_.node().getBBox();return t.height=I.height,t.offsetX=0,t.offsetY=p.height-t.padding/2,t.labelBBox=p,t.intersect=function(N){return i0(t,N)},{cluster:c,labelBBox:p}},"roundedWithTitle"),ATt=k(async(e,t)=>{ht.info("Creating subgraph rect for ",t.id,t);const r=Ze(),{themeVariables:n,handDrawnSeed:i}=r,{clusterBkg:s,clusterBorder:o}=n,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:h}=Ut(t),u=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),f=en(r.flowchart.htmlLabels),d=u.insert("g").attr("class","cluster-label "),p=await Dc(d,t.label,{style:t.labelStyle,useHtmlLabels:f,isNode:!0,width:t.width});let m=p.getBBox();if(en(r.flowchart.htmlLabels)){const _=p.children[0],I=$e(p);m=_.getBoundingClientRect(),I.attr("width",m.width),I.attr("height",m.height)}const g=t.width<=m.width+t.padding?m.width+t.padding:t.width;t.width<=m.width+t.padding?t.diff=(g-t.width)/2-t.padding:t.diff=-t.padding;const y=t.height,b=t.x-g/2,x=t.y-y/2;ht.trace("Data ",t,JSON.stringify(t));let T;if(t.look==="handDrawn"){const _=Wt.svg(u),I=jt(t,{roughness:.7,fill:s,stroke:o,fillWeight:4,seed:i}),N=_.path(Ic(b,x,g,y,t.rx),I);T=u.insert(()=>(ht.debug("Rough node insert CXC",N),N),":first-child"),T.select("path:nth-child(2)").attr("style",c.join(";")),T.select("path").attr("style",h.join(";").replace("fill","stroke"))}else T=u.insert("rect",":first-child"),T.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",b).attr("y",x).attr("width",g).attr("height",y);const{subGraphTitleTopMargin:S}=cT(r);if(d.attr("transform",`translate(${t.x-m.width/2}, ${t.y-t.height/2+S})`),a){const _=d.select("span");_&&_.attr("style",a)}const w=T.node().getBBox();return t.offsetX=0,t.width=w.width,t.height=w.height,t.offsetY=m.height-t.padding/2,t.intersect=function(_){return i0(t,_)},{cluster:u,labelBBox:m}},"kanbanSection"),ETt=k((e,t)=>{const r=Ze(),{themeVariables:n,handDrawnSeed:i}=r,{nodeBorder:s}=n,o=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-look",t.look),a=o.insert("g",":first-child"),l=0*t.padding,c=t.width+l;t.diff=-t.padding;const h=t.height+l,u=t.x-c/2,f=t.y-h/2;t.width=c;let d;if(t.look==="handDrawn"){const g=Wt.svg(o).rectangle(u,f,c,h,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:s,seed:i});d=o.insert(()=>g,":first-child")}else d=a.insert("rect",":first-child"),d.attr("class","divider").attr("x",u).attr("y",f).attr("width",c).attr("height",h).attr("data-look",t.look);const p=d.node().getBBox();return t.height=p.height,t.offsetX=0,t.offsetY=0,t.intersect=function(m){return i0(t,m)},{cluster:o,labelBBox:{}}},"divider"),LTt=VG,OTt={rect:VG,squareRect:LTt,roundedWithTitle:MTt,noteGroup:_Tt,divider:ETt,kanbanSection:ATt},WG=new Map,DTt=k(async(e,t)=>{const r=t.shape||"rect",n=await OTt[r](e,t);return WG.set(t.id,n),n},"insertCluster"),wLt=k(()=>{WG=new Map},"clear");function jG(e,t){return e.intersect(t)}k(jG,"intersectNode");var ITt=jG;function UG(e,t,r,n){var i=e.x,s=e.y,o=i-n.x,a=s-n.y,l=Math.sqrt(t*t*a*a+r*r*o*o),c=Math.abs(t*r*o/l);n.x<i&&(c=-c);var h=Math.abs(t*r*a/l);return n.y<s&&(h=-h),{x:i+c,y:s+h}}k(UG,"intersectEllipse");var GG=UG;function KG(e,t,r){return GG(e,t,t,r)}k(KG,"intersectCircle");var BTt=KG;function YG(e,t,r,n){{const i=t.y-e.y,s=e.x-t.x,o=t.x*e.y-e.x*t.y,a=i*r.x+s*r.y+o,l=i*n.x+s*n.y+o,c=1e-6;if(a!==0&&l!==0&&j6(a,l))return;const h=n.y-r.y,u=r.x-n.x,f=n.x*r.y-r.x*n.y,d=h*e.x+u*e.y+f,p=h*t.x+u*t.y+f;if(Math.abs(d)<c&&Math.abs(p)<c&&j6(d,p))return;const m=i*u-h*s;if(m===0)return;const g=Math.abs(m/2);let y=s*f-u*o;const b=y<0?(y-g)/m:(y+g)/m;y=h*o-i*f;const x=y<0?(y-g)/m:(y+g)/m;return{x:b,y:x}}}k(YG,"intersectLine");function j6(e,t){return e*t>0}k(j6,"sameSign");var RTt=YG;function XG(e,t,r){let n=e.x,i=e.y,s=[],o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(h){o=Math.min(o,h.x),a=Math.min(a,h.y)}):(o=Math.min(o,t.x),a=Math.min(a,t.y));let l=n-e.width/2-o,c=i-e.height/2-a;for(let h=0;h<t.length;h++){let u=t[h],f=t[h<t.length-1?h+1:0],d=RTt(e,r,{x:l+u.x,y:c+u.y},{x:l+f.x,y:c+f.y});d&&s.push(d)}return s.length?(s.length>1&&s.sort(function(h,u){let f=h.x-r.x,d=h.y-r.y,p=Math.sqrt(f*f+d*d),m=u.x-r.x,g=u.y-r.y,y=Math.sqrt(m*m+g*g);return p<y?-1:p===y?0:1}),s[0]):e}k(XG,"intersectPolygon");var PTt=XG,Pt={node:ITt,circle:BTt,ellipse:GG,polygon:PTt,rect:i0};function JG(e,t){const{labelStyles:r}=Ut(t);t.labelStyle=r;const n=ce(t);let i=n;n||(i="anchor");const s=e.insert("g").attr("class",i).attr("id",t.domId||t.id),o=1,{cssStyles:a}=t,l=Wt.svg(s),c=jt(t,{fill:"black",stroke:"none",fillStyle:"solid"});t.look!=="handDrawn"&&(c.roughness=0);const h=l.circle(0,0,o*2,c),u=s.insert(()=>h,":first-child");return u.attr("class","anchor").attr("style",Hn(a)),Kt(t,u),t.intersect=function(f){return ht.info("Circle intersect",t,o,f),Pt.circle(t,o,f)},s}k(JG,"anchor");function U6(e,t,r,n,i,s,o){const l=(e+r)/2,c=(t+n)/2,h=Math.atan2(n-t,r-e),u=(r-e)/2,f=(n-t)/2,d=u/i,p=f/s,m=Math.sqrt(d**2+p**2);if(m>1)throw new Error("The given radii are too small to create an arc between the points.");const g=Math.sqrt(1-m**2),y=l+g*s*Math.sin(h)*(o?-1:1),b=c-g*i*Math.cos(h)*(o?-1:1),x=Math.atan2((t-b)/s,(e-y)/i);let S=Math.atan2((n-b)/s,(r-y)/i)-x;o&&S<0&&(S+=2*Math.PI),!o&&S>0&&(S-=2*Math.PI);const w=[];for(let _=0;_<20;_++){const I=_/19,N=x+I*S,L=y+i*Math.cos(N),D=b+s*Math.sin(N);w.push({x:L,y:D})}return w}k(U6,"generateArcPoints");async function ZG(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s}=await fe(e,t,ce(t)),o=s.width+t.padding+20,a=s.height+t.padding,l=a/2,c=l/(2.5+a/50),{cssStyles:h}=t,u=[{x:o/2,y:-a/2},{x:-o/2,y:-a/2},...U6(-o/2,-a/2,-o/2,a/2,c,l,!1),{x:o/2,y:a/2},...U6(o/2,a/2,o/2,-a/2,c,l,!0)],f=Wt.svg(i),d=jt(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const p=Pe(u),m=f.path(p,d),g=i.insert(()=>m,":first-child");return g.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&g.selectAll("path").attr("style",h),n&&t.look!=="handDrawn"&&g.selectAll("path").attr("style",n),g.attr("transform",`translate(${c/2}, 0)`),Kt(t,g),t.intersect=function(y){return Pt.polygon(t,u,y)},i}k(ZG,"bowTieRect");function Bc(e,t,r,n){return e.insert("polygon",":first-child").attr("points",n.map(function(i){return i.x+","+i.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+r/2+")")}k(Bc,"insertPolygonShape");async function QG(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s}=await fe(e,t,ce(t)),o=s.height+t.padding,a=12,l=s.width+t.padding+a,c=0,h=l,u=-o,f=0,d=[{x:c+a,y:u},{x:h,y:u},{x:h,y:f},{x:c,y:f},{x:c,y:u+a},{x:c+a,y:u}];let p;const{cssStyles:m}=t;if(t.look==="handDrawn"){const g=Wt.svg(i),y=jt(t,{}),b=Pe(d),x=g.path(b,y);p=i.insert(()=>x,":first-child").attr("transform",`translate(${-l/2}, ${o/2})`),m&&p.attr("style",m)}else p=Bc(i,l,o,d);return n&&p.attr("style",n),Kt(t,p),t.intersect=function(g){return Pt.polygon(t,d,g)},i}k(QG,"card");function tK(e,t){const{nodeStyles:r}=Ut(t);t.label="";const n=e.insert("g").attr("class",ce(t)).attr("id",t.domId??t.id),{cssStyles:i}=t,s=Math.max(28,t.width??0),o=[{x:0,y:s/2},{x:s/2,y:0},{x:0,y:-s/2},{x:-s/2,y:0}],a=Wt.svg(n),l=jt(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=Pe(o),h=a.path(c,l),u=n.insert(()=>h,":first-child");return i&&t.look!=="handDrawn"&&u.selectAll("path").attr("style",i),r&&t.look!=="handDrawn"&&u.selectAll("path").attr("style",r),t.width=28,t.height=28,t.intersect=function(f){return Pt.polygon(t,o,f)},n}k(tK,"choice");async function ET(e,t,r){const{labelStyles:n,nodeStyles:i}=Ut(t);t.labelStyle=n;const{shapeSvg:s,bbox:o,halfPadding:a}=await fe(e,t,ce(t)),l=(r==null?void 0:r.padding)??a,c=o.width/2+l;let h;const{cssStyles:u}=t;if(t.look==="handDrawn"){const f=Wt.svg(s),d=jt(t,{}),p=f.circle(0,0,c*2,d);h=s.insert(()=>p,":first-child"),h.attr("class","basic label-container").attr("style",Hn(u))}else h=s.insert("circle",":first-child").attr("class","basic label-container").attr("style",i).attr("r",c).attr("cx",0).attr("cy",0);return Kt(t,h),t.calcIntersect=function(f,d){const p=f.width/2;return Pt.circle(f,p,d)},t.intersect=function(f){return ht.info("Circle intersect",t,c,f),Pt.circle(t,c,f)},s}k(ET,"circle");function eK(e){const t=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),n=e*2,i={x:n/2*t,y:n/2*r},s={x:-(n/2)*t,y:n/2*r},o={x:-(n/2)*t,y:-(n/2)*r},a={x:n/2*t,y:-(n/2)*r};return`M ${s.x},${s.y} L ${a.x},${a.y}
                   M ${i.x},${i.y} L ${o.x},${o.y}`}k(eK,"createLine");function rK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r,t.label="";const i=e.insert("g").attr("class",ce(t)).attr("id",t.domId??t.id),s=Math.max(30,(t==null?void 0:t.width)??0),{cssStyles:o}=t,a=Wt.svg(i),l=jt(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=a.circle(0,0,s*2,l),h=eK(s),u=a.path(h,l),f=i.insert(()=>c,":first-child");return f.insert(()=>u),o&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",o),n&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",n),Kt(t,f),t.intersect=function(d){return ht.info("crossedCircle intersect",t,{radius:s,point:d}),Pt.circle(t,s,d)},i}k(rK,"crossedCircle");function Sa(e,t,r,n=100,i=0,s=180){const o=[],a=i*Math.PI/180,h=(s*Math.PI/180-a)/(n-1);for(let u=0;u<n;u++){const f=a+u*h,d=e+r*Math.cos(f),p=t+r*Math.sin(f);o.push({x:-d,y:-p})}return o}k(Sa,"generateCirclePoints");async function nK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await fe(e,t,ce(t)),a=s.width+(t.padding??0),l=s.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=t,u=[...Sa(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...Sa(a/2+c*2,-c,c,20,-180,-270),...Sa(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...Sa(a/2,l/2,c,20,0,90)],f=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...Sa(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...Sa(a/2+a*.1,-c,c,20,-180,-270),...Sa(a/2+a*.1,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...Sa(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2,y:l/2+c}],d=Wt.svg(i),p=jt(t,{fill:"none"});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=Pe(u).replace("Z",""),y=d.path(g,p),b=Pe(f),x=d.path(b,{...p}),T=i.insert("g",":first-child");return T.insert(()=>x,":first-child").attr("stroke-opacity",0),T.insert(()=>y,":first-child"),T.attr("class","text"),h&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",h),n&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",n),T.attr("transform",`translate(${c}, 0)`),o.attr("transform",`translate(${-a/2+c-(s.x-(s.left??0))},${-l/2+(t.padding??0)/2-(s.y-(s.top??0))})`),Kt(t,T),t.intersect=function(S){return Pt.polygon(t,f,S)},i}k(nK,"curlyBraceLeft");function Ta(e,t,r,n=100,i=0,s=180){const o=[],a=i*Math.PI/180,h=(s*Math.PI/180-a)/(n-1);for(let u=0;u<n;u++){const f=a+u*h,d=e+r*Math.cos(f),p=t+r*Math.sin(f);o.push({x:d,y:p})}return o}k(Ta,"generateCirclePoints");async function iK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await fe(e,t,ce(t)),a=s.width+(t.padding??0),l=s.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=t,u=[...Ta(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...Ta(a/2+c*2,-c,c,20,-180,-270),...Ta(a/2+c*2,c,c,20,-90,-180),{x:a/2+c,y:l/2},...Ta(a/2,l/2,c,20,0,90)],f=[{x:-a/2,y:-l/2-c},{x:a/2,y:-l/2-c},...Ta(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...Ta(a/2+c*2,-c,c,20,-180,-270),...Ta(a/2+c*2,c,c,20,-90,-180),{x:a/2+c,y:l/2},...Ta(a/2,l/2,c,20,0,90),{x:a/2,y:l/2+c},{x:-a/2,y:l/2+c}],d=Wt.svg(i),p=jt(t,{fill:"none"});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=Pe(u).replace("Z",""),y=d.path(g,p),b=Pe(f),x=d.path(b,{...p}),T=i.insert("g",":first-child");return T.insert(()=>x,":first-child").attr("stroke-opacity",0),T.insert(()=>y,":first-child"),T.attr("class","text"),h&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",h),n&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",n),T.attr("transform",`translate(${-c}, 0)`),o.attr("transform",`translate(${-a/2+(t.padding??0)/2-(s.x-(s.left??0))},${-l/2+(t.padding??0)/2-(s.y-(s.top??0))})`),Kt(t,T),t.intersect=function(S){return Pt.polygon(t,f,S)},i}k(iK,"curlyBraceRight");function dn(e,t,r,n=100,i=0,s=180){const o=[],a=i*Math.PI/180,h=(s*Math.PI/180-a)/(n-1);for(let u=0;u<n;u++){const f=a+u*h,d=e+r*Math.cos(f),p=t+r*Math.sin(f);o.push({x:-d,y:-p})}return o}k(dn,"generateCirclePoints");async function sK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await fe(e,t,ce(t)),a=s.width+(t.padding??0),l=s.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=t,u=[...dn(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...dn(a/2+c*2,-c,c,20,-180,-270),...dn(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...dn(a/2,l/2,c,20,0,90)],f=[...dn(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...dn(-a/2-c/2,-c,c,20,0,90),...dn(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...dn(-a/2+c+c/2,l/2,c,30,-180,-270)],d=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...dn(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...dn(a/2+c*2,-c,c,20,-180,-270),...dn(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...dn(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2-c-c/2,y:l/2+c},...dn(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...dn(-a/2-c/2,-c,c,20,0,90),...dn(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...dn(-a/2+c+c/2,l/2,c,30,-180,-270)],p=Wt.svg(i),m=jt(t,{fill:"none"});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=Pe(u).replace("Z",""),b=p.path(y,m),T=Pe(f).replace("Z",""),S=p.path(T,m),w=Pe(d),_=p.path(w,{...m}),I=i.insert("g",":first-child");return I.insert(()=>_,":first-child").attr("stroke-opacity",0),I.insert(()=>b,":first-child"),I.insert(()=>S,":first-child"),I.attr("class","text"),h&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",h),n&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",n),I.attr("transform",`translate(${c-c/4}, 0)`),o.attr("transform",`translate(${-a/2+(t.padding??0)/2-(s.x-(s.left??0))},${-l/2+(t.padding??0)/2-(s.y-(s.top??0))})`),Kt(t,I),t.intersect=function(N){return Pt.polygon(t,d,N)},i}k(sK,"curlyBraces");async function oK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s}=await fe(e,t,ce(t)),o=80,a=20,l=Math.max(o,(s.width+(t.padding??0)*2)*1.25,(t==null?void 0:t.width)??0),c=Math.max(a,s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=c/2,{cssStyles:u}=t,f=Wt.svg(i),d=jt(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const p=l,m=c,g=p-h,y=m/4,b=[{x:g,y:0},{x:y,y:0},{x:0,y:m/2},{x:y,y:m},{x:g,y:m},...Sg(-g,-m/2,h,50,270,90)],x=Pe(b),T=f.path(x,d),S=i.insert(()=>T,":first-child");return S.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&S.selectChildren("path").attr("style",u),n&&t.look!=="handDrawn"&&S.selectChildren("path").attr("style",n),S.attr("transform",`translate(${-l/2}, ${-c/2})`),Kt(t,S),t.intersect=function(w){return Pt.polygon(t,b,w)},i}k(oK,"curvedTrapezoid");var NTt=k((e,t,r,n,i,s)=>[`M${e},${t+s}`,`a${i},${s} 0,0,0 ${r},0`,`a${i},${s} 0,0,0 ${-r},0`,`l0,${n}`,`a${i},${s} 0,0,0 ${r},0`,`l0,${-n}`].join(" "),"createCylinderPathD"),FTt=k((e,t,r,n,i,s)=>[`M${e},${t+s}`,`M${e+r},${t+s}`,`a${i},${s} 0,0,0 ${-r},0`,`l0,${n}`,`a${i},${s} 0,0,0 ${r},0`,`l0,${-n}`].join(" "),"createOuterCylinderPathD"),$Tt=k((e,t,r,n,i,s)=>[`M${e-r/2},${-n/2}`,`a${i},${s} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function aK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await fe(e,t,ce(t)),a=Math.max(s.width+t.padding,t.width??0),l=a/2,c=l/(2.5+a/50),h=Math.max(s.height+c+t.padding,t.height??0);let u;const{cssStyles:f}=t;if(t.look==="handDrawn"){const d=Wt.svg(i),p=FTt(0,0,a,h,l,c),m=$Tt(0,c,a,h,l,c),g=d.path(p,jt(t,{})),y=d.path(m,jt(t,{fill:"none"}));u=i.insert(()=>y,":first-child"),u=i.insert(()=>g,":first-child"),u.attr("class","basic label-container"),f&&u.attr("style",f)}else{const d=NTt(0,0,a,h,l,c);u=i.insert("path",":first-child").attr("d",d).attr("class","basic label-container").attr("style",Hn(f)).attr("style",n)}return u.attr("label-offset-y",c),u.attr("transform",`translate(${-a/2}, ${-(h/2+c)})`),Kt(t,u),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+(t.padding??0)/1.5-(s.y-(s.top??0))})`),t.intersect=function(d){const p=Pt.rect(t,d),m=p.x-(t.x??0);if(l!=0&&(Math.abs(m)<(t.width??0)/2||Math.abs(m)==(t.width??0)/2&&Math.abs(p.y-(t.y??0))>(t.height??0)/2-c)){let g=c*c*(1-m*m/(l*l));g>0&&(g=Math.sqrt(g)),g=c-g,d.y-(t.y??0)>0&&(g=-g),p.y+=g}return p},i}k(aK,"cylinder");async function lK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await fe(e,t,ce(t)),a=s.width+t.padding,l=s.height+t.padding,c=l*.2,h=-a/2,u=-l/2-c/2,{cssStyles:f}=t,d=Wt.svg(i),p=jt(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=[{x:h,y:u+c},{x:-h,y:u+c},{x:-h,y:-u},{x:h,y:-u},{x:h,y:u},{x:-h,y:u},{x:-h,y:u+c}],g=d.polygon(m.map(b=>[b.x,b.y]),p),y=i.insert(()=>g,":first-child");return y.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",f),n&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",n),o.attr("transform",`translate(${h+(t.padding??0)/2-(s.x-(s.left??0))}, ${u+c+(t.padding??0)/2-(s.y-(s.top??0))})`),Kt(t,y),t.intersect=function(b){return Pt.rect(t,b)},i}k(lK,"dividedRectangle");async function cK(e,t){var f,d;const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,halfPadding:o}=await fe(e,t,ce(t)),l=s.width/2+o+5,c=s.width/2+o;let h;const{cssStyles:u}=t;if(t.look==="handDrawn"){const p=Wt.svg(i),m=jt(t,{roughness:.2,strokeWidth:2.5}),g=jt(t,{roughness:.2,strokeWidth:1.5}),y=p.circle(0,0,l*2,m),b=p.circle(0,0,c*2,g);h=i.insert("g",":first-child"),h.attr("class",Hn(t.cssClasses)).attr("style",Hn(u)),(f=h.node())==null||f.appendChild(y),(d=h.node())==null||d.appendChild(b)}else{h=i.insert("g",":first-child");const p=h.insert("circle",":first-child"),m=h.insert("circle");h.attr("class","basic label-container").attr("style",n),p.attr("class","outer-circle").attr("style",n).attr("r",l).attr("cx",0).attr("cy",0),m.attr("class","inner-circle").attr("style",n).attr("r",c).attr("cx",0).attr("cy",0)}return Kt(t,h),t.intersect=function(p){return ht.info("DoubleCircle intersect",t,l,p),Pt.circle(t,l,p)},i}k(cK,"doublecircle");function hK(e,t,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:i}=Ut(t);t.label="",t.labelStyle=n;const s=e.insert("g").attr("class",ce(t)).attr("id",t.domId??t.id),o=7,{cssStyles:a}=t,l=Wt.svg(s),{nodeBorder:c}=r,h=jt(t,{fillStyle:"solid"});t.look!=="handDrawn"&&(h.roughness=0);const u=l.circle(0,0,o*2,h),f=s.insert(()=>u,":first-child");return f.selectAll("path").attr("style",`fill: ${c} !important;`),a&&a.length>0&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",a),i&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",i),Kt(t,f),t.intersect=function(d){return ht.info("filledCircle intersect",t,{radius:o,point:d}),Pt.circle(t,o,d)},s}k(hK,"filledCircle");async function uK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await fe(e,t,ce(t)),a=s.width+(t.padding??0),l=a+s.height,c=a+s.height,h=[{x:0,y:-l},{x:c,y:-l},{x:c/2,y:0}],{cssStyles:u}=t,f=Wt.svg(i),d=jt(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const p=Pe(h),m=f.path(p,d),g=i.insert(()=>m,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return u&&t.look!=="handDrawn"&&g.selectChildren("path").attr("style",u),n&&t.look!=="handDrawn"&&g.selectChildren("path").attr("style",n),t.width=a,t.height=l,Kt(t,g),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-l/2+(t.padding??0)/2+(s.y-(s.top??0))})`),t.intersect=function(y){return ht.info("Triangle intersect",t,h,y),Pt.polygon(t,h,y)},i}k(uK,"flippedTriangle");function fK(e,t,{dir:r,config:{state:n,themeVariables:i}}){const{nodeStyles:s}=Ut(t);t.label="";const o=e.insert("g").attr("class",ce(t)).attr("id",t.domId??t.id),{cssStyles:a}=t;let l=Math.max(70,(t==null?void 0:t.width)??0),c=Math.max(10,(t==null?void 0:t.height)??0);r==="LR"&&(l=Math.max(10,(t==null?void 0:t.width)??0),c=Math.max(70,(t==null?void 0:t.height)??0));const h=-1*l/2,u=-1*c/2,f=Wt.svg(o),d=jt(t,{stroke:i.lineColor,fill:i.lineColor});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const p=f.rectangle(h,u,l,c,d),m=o.insert(()=>p,":first-child");a&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",a),s&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",s),Kt(t,m);const g=(n==null?void 0:n.padding)??0;return t.width&&t.height&&(t.width+=g/2||0,t.height+=g/2||0),t.intersect=function(y){return Pt.rect(t,y)},o}k(fK,"forkJoin");async function dK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const i=80,s=50,{shapeSvg:o,bbox:a}=await fe(e,t,ce(t)),l=Math.max(i,a.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s,a.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=c/2,{cssStyles:u}=t,f=Wt.svg(o),d=jt(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const p=[{x:-l/2,y:-c/2},{x:l/2-h,y:-c/2},...Sg(-l/2+h,0,h,50,90,270),{x:l/2-h,y:c/2},{x:-l/2,y:c/2}],m=Pe(p),g=f.path(m,d),y=o.insert(()=>g,":first-child");return y.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",u),n&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",n),Kt(t,y),t.intersect=function(b){return ht.info("Pill intersect",t,{radius:h,point:b}),Pt.polygon(t,p,b)},o}k(dK,"halfRoundedRectangle");async function pK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s}=await fe(e,t,ce(t)),o=s.height+(t.padding??0),a=s.width+(t.padding??0)*2.5,{cssStyles:l}=t,c=Wt.svg(i),h=jt(t,{});t.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");let u=a/2;const f=u/6;u=u+f;const d=o/2,p=d/2,m=u-p,g=[{x:-m,y:-d},{x:0,y:-d},{x:m,y:-d},{x:u,y:0},{x:m,y:d},{x:0,y:d},{x:-m,y:d},{x:-u,y:0}],y=Pe(g),b=c.path(y,h),x=i.insert(()=>b,":first-child");return x.attr("class","basic label-container"),l&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",l),n&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",n),t.width=a,t.height=o,Kt(t,x),t.intersect=function(T){return Pt.polygon(t,g,T)},i}k(pK,"hexagon");async function mK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.label="",t.labelStyle=r;const{shapeSvg:i}=await fe(e,t,ce(t)),s=Math.max(30,(t==null?void 0:t.width)??0),o=Math.max(30,(t==null?void 0:t.height)??0),{cssStyles:a}=t,l=Wt.svg(i),c=jt(t,{});t.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const h=[{x:0,y:0},{x:s,y:0},{x:0,y:o},{x:s,y:o}],u=Pe(h),f=l.path(u,c),d=i.insert(()=>f,":first-child");return d.attr("class","basic label-container"),a&&t.look!=="handDrawn"&&d.selectChildren("path").attr("style",a),n&&t.look!=="handDrawn"&&d.selectChildren("path").attr("style",n),d.attr("transform",`translate(${-s/2}, ${-o/2})`),Kt(t,d),t.intersect=function(p){return ht.info("Pill intersect",t,{points:h}),Pt.polygon(t,h,p)},i}k(mK,"hourglass");async function gK(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:i}=Ut(t);t.labelStyle=i;const s=t.assetHeight??48,o=t.assetWidth??48,a=Math.max(s,o),l=n==null?void 0:n.wrappingWidth;t.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,label:u}=await fe(e,t,"icon-shape default"),f=t.pos==="t",d=a,p=a,{nodeBorder:m}=r,{stylesMap:g}=n0(t),y=-p/2,b=-d/2,x=t.label?8:0,T=Wt.svg(c),S=jt(t,{stroke:"none",fill:"none"});t.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const w=T.rectangle(y,b,p,d,S),_=Math.max(p,h.width),I=d+h.height+x,N=T.rectangle(-_/2,-I/2,_,I,{...S,fill:"transparent",stroke:"none"}),L=c.insert(()=>w,":first-child"),D=c.insert(()=>N);if(t.icon){const P=c.append("g");P.html(`<g>${await q1(t.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const K=P.node().getBBox(),z=K.width,$=K.height,H=K.x,U=K.y;P.attr("transform",`translate(${-z/2-H},${f?h.height/2+x/2-$/2-U:-h.height/2-x/2-$/2-U})`),P.attr("style",`color: ${g.get("stroke")??m};`)}return u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${f?-I/2:I/2-h.height})`),L.attr("transform",`translate(0,${f?h.height/2+x/2:-h.height/2-x/2})`),Kt(t,D),t.intersect=function(P){if(ht.info("iconSquare intersect",t,P),!t.label)return Pt.rect(t,P);const K=t.x??0,z=t.y??0,$=t.height??0;let H=[];return f?H=[{x:K-h.width/2,y:z-$/2},{x:K+h.width/2,y:z-$/2},{x:K+h.width/2,y:z-$/2+h.height+x},{x:K+p/2,y:z-$/2+h.height+x},{x:K+p/2,y:z+$/2},{x:K-p/2,y:z+$/2},{x:K-p/2,y:z-$/2+h.height+x},{x:K-h.width/2,y:z-$/2+h.height+x}]:H=[{x:K-p/2,y:z-$/2},{x:K+p/2,y:z-$/2},{x:K+p/2,y:z-$/2+d},{x:K+h.width/2,y:z-$/2+d},{x:K+h.width/2/2,y:z+$/2},{x:K-h.width/2,y:z+$/2},{x:K-h.width/2,y:z-$/2+d},{x:K-p/2,y:z-$/2+d}],Pt.polygon(t,H,P)},c}k(gK,"icon");async function yK(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:i}=Ut(t);t.labelStyle=i;const s=t.assetHeight??48,o=t.assetWidth??48,a=Math.max(s,o),l=n==null?void 0:n.wrappingWidth;t.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,label:u}=await fe(e,t,"icon-shape default"),f=20,d=t.label?8:0,p=t.pos==="t",{nodeBorder:m,mainBkg:g}=r,{stylesMap:y}=n0(t),b=Wt.svg(c),x=jt(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const T=y.get("fill");x.stroke=T??g;const S=c.append("g");t.icon&&S.html(`<g>${await q1(t.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const w=S.node().getBBox(),_=w.width,I=w.height,N=w.x,L=w.y,D=Math.max(_,I)*Math.SQRT2+f*2,P=b.circle(0,0,D,x),K=Math.max(D,h.width),z=D+h.height+d,$=b.rectangle(-K/2,-z/2,K,z,{...x,fill:"transparent",stroke:"none"}),H=c.insert(()=>P,":first-child"),U=c.insert(()=>$);return S.attr("transform",`translate(${-_/2-N},${p?h.height/2+d/2-I/2-L:-h.height/2-d/2-I/2-L})`),S.attr("style",`color: ${y.get("stroke")??m};`),u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${p?-z/2:z/2-h.height})`),H.attr("transform",`translate(0,${p?h.height/2+d/2:-h.height/2-d/2})`),Kt(t,U),t.intersect=function(q){return ht.info("iconSquare intersect",t,q),Pt.rect(t,q)},c}k(yK,"iconCircle");async function bK(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:i}=Ut(t);t.labelStyle=i;const s=t.assetHeight??48,o=t.assetWidth??48,a=Math.max(s,o),l=n==null?void 0:n.wrappingWidth;t.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,halfPadding:u,label:f}=await fe(e,t,"icon-shape default"),d=t.pos==="t",p=a+u*2,m=a+u*2,{nodeBorder:g,mainBkg:y}=r,{stylesMap:b}=n0(t),x=-m/2,T=-p/2,S=t.label?8:0,w=Wt.svg(c),_=jt(t,{});t.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");const I=b.get("fill");_.stroke=I??y;const N=w.path(Ic(x,T,m,p,5),_),L=Math.max(m,h.width),D=p+h.height+S,P=w.rectangle(-L/2,-D/2,L,D,{..._,fill:"transparent",stroke:"none"}),K=c.insert(()=>N,":first-child").attr("class","icon-shape2"),z=c.insert(()=>P);if(t.icon){const $=c.append("g");$.html(`<g>${await q1(t.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const H=$.node().getBBox(),U=H.width,q=H.height,rt=H.x,E=H.y;$.attr("transform",`translate(${-U/2-rt},${d?h.height/2+S/2-q/2-E:-h.height/2-S/2-q/2-E})`),$.attr("style",`color: ${b.get("stroke")??g};`)}return f.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${d?-D/2:D/2-h.height})`),K.attr("transform",`translate(0,${d?h.height/2+S/2:-h.height/2-S/2})`),Kt(t,z),t.intersect=function($){if(ht.info("iconSquare intersect",t,$),!t.label)return Pt.rect(t,$);const H=t.x??0,U=t.y??0,q=t.height??0;let rt=[];return d?rt=[{x:H-h.width/2,y:U-q/2},{x:H+h.width/2,y:U-q/2},{x:H+h.width/2,y:U-q/2+h.height+S},{x:H+m/2,y:U-q/2+h.height+S},{x:H+m/2,y:U+q/2},{x:H-m/2,y:U+q/2},{x:H-m/2,y:U-q/2+h.height+S},{x:H-h.width/2,y:U-q/2+h.height+S}]:rt=[{x:H-m/2,y:U-q/2},{x:H+m/2,y:U-q/2},{x:H+m/2,y:U-q/2+p},{x:H+h.width/2,y:U-q/2+p},{x:H+h.width/2/2,y:U+q/2},{x:H-h.width/2,y:U+q/2},{x:H-h.width/2,y:U-q/2+p},{x:H-m/2,y:U-q/2+p}],Pt.polygon(t,rt,$)},c}k(bK,"iconRounded");async function xK(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:i}=Ut(t);t.labelStyle=i;const s=t.assetHeight??48,o=t.assetWidth??48,a=Math.max(s,o),l=n==null?void 0:n.wrappingWidth;t.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,halfPadding:u,label:f}=await fe(e,t,"icon-shape default"),d=t.pos==="t",p=a+u*2,m=a+u*2,{nodeBorder:g,mainBkg:y}=r,{stylesMap:b}=n0(t),x=-m/2,T=-p/2,S=t.label?8:0,w=Wt.svg(c),_=jt(t,{});t.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");const I=b.get("fill");_.stroke=I??y;const N=w.path(Ic(x,T,m,p,.1),_),L=Math.max(m,h.width),D=p+h.height+S,P=w.rectangle(-L/2,-D/2,L,D,{..._,fill:"transparent",stroke:"none"}),K=c.insert(()=>N,":first-child"),z=c.insert(()=>P);if(t.icon){const $=c.append("g");$.html(`<g>${await q1(t.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const H=$.node().getBBox(),U=H.width,q=H.height,rt=H.x,E=H.y;$.attr("transform",`translate(${-U/2-rt},${d?h.height/2+S/2-q/2-E:-h.height/2-S/2-q/2-E})`),$.attr("style",`color: ${b.get("stroke")??g};`)}return f.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${d?-D/2:D/2-h.height})`),K.attr("transform",`translate(0,${d?h.height/2+S/2:-h.height/2-S/2})`),Kt(t,z),t.intersect=function($){if(ht.info("iconSquare intersect",t,$),!t.label)return Pt.rect(t,$);const H=t.x??0,U=t.y??0,q=t.height??0;let rt=[];return d?rt=[{x:H-h.width/2,y:U-q/2},{x:H+h.width/2,y:U-q/2},{x:H+h.width/2,y:U-q/2+h.height+S},{x:H+m/2,y:U-q/2+h.height+S},{x:H+m/2,y:U+q/2},{x:H-m/2,y:U+q/2},{x:H-m/2,y:U-q/2+h.height+S},{x:H-h.width/2,y:U-q/2+h.height+S}]:rt=[{x:H-m/2,y:U-q/2},{x:H+m/2,y:U-q/2},{x:H+m/2,y:U-q/2+p},{x:H+h.width/2,y:U-q/2+p},{x:H+h.width/2/2,y:U+q/2},{x:H-h.width/2,y:U+q/2},{x:H-h.width/2,y:U-q/2+p},{x:H-m/2,y:U-q/2+p}],Pt.polygon(t,rt,$)},c}k(xK,"iconSquare");async function vK(e,t,{config:{flowchart:r}}){const n=new Image;n.src=(t==null?void 0:t.img)??"",await n.decode();const i=Number(n.naturalWidth.toString().replace("px","")),s=Number(n.naturalHeight.toString().replace("px",""));t.imageAspectRatio=i/s;const{labelStyles:o}=Ut(t);t.labelStyle=o;const a=r==null?void 0:r.wrappingWidth;t.defaultWidth=r==null?void 0:r.wrappingWidth;const l=Math.max(t.label?a??0:0,(t==null?void 0:t.assetWidth)??i),c=t.constraint==="on"&&t!=null&&t.assetHeight?t.assetHeight*t.imageAspectRatio:l,h=t.constraint==="on"?c/t.imageAspectRatio:(t==null?void 0:t.assetHeight)??s;t.width=Math.max(c,a??0);const{shapeSvg:u,bbox:f,label:d}=await fe(e,t,"image-shape default"),p=t.pos==="t",m=-c/2,g=-h/2,y=t.label?8:0,b=Wt.svg(u),x=jt(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const T=b.rectangle(m,g,c,h,x),S=Math.max(c,f.width),w=h+f.height+y,_=b.rectangle(-S/2,-w/2,S,w,{...x,fill:"none",stroke:"none"}),I=u.insert(()=>T,":first-child"),N=u.insert(()=>_);if(t.img){const L=u.append("image");L.attr("href",t.img),L.attr("width",c),L.attr("height",h),L.attr("preserveAspectRatio","none"),L.attr("transform",`translate(${-c/2},${p?w/2-h:-w/2})`)}return d.attr("transform",`translate(${-f.width/2-(f.x-(f.left??0))},${p?-h/2-f.height/2-y/2:h/2-f.height/2+y/2})`),I.attr("transform",`translate(0,${p?f.height/2+y/2:-f.height/2-y/2})`),Kt(t,N),t.intersect=function(L){if(ht.info("iconSquare intersect",t,L),!t.label)return Pt.rect(t,L);const D=t.x??0,P=t.y??0,K=t.height??0;let z=[];return p?z=[{x:D-f.width/2,y:P-K/2},{x:D+f.width/2,y:P-K/2},{x:D+f.width/2,y:P-K/2+f.height+y},{x:D+c/2,y:P-K/2+f.height+y},{x:D+c/2,y:P+K/2},{x:D-c/2,y:P+K/2},{x:D-c/2,y:P-K/2+f.height+y},{x:D-f.width/2,y:P-K/2+f.height+y}]:z=[{x:D-c/2,y:P-K/2},{x:D+c/2,y:P-K/2},{x:D+c/2,y:P-K/2+h},{x:D+f.width/2,y:P-K/2+h},{x:D+f.width/2/2,y:P+K/2},{x:D-f.width/2,y:P+K/2},{x:D-f.width/2,y:P-K/2+h},{x:D-c/2,y:P-K/2+h}],Pt.polygon(t,z,L)},u}k(vK,"imageSquare");async function wK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s}=await fe(e,t,ce(t)),o=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),a=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=[{x:0,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:-3*a/6,y:-a}];let c;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=Wt.svg(i),f=jt(t,{}),d=Pe(l),p=u.path(d,f);c=i.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Bc(i,o,a,l);return n&&c.attr("style",n),t.width=o,t.height=a,Kt(t,c),t.intersect=function(u){return Pt.polygon(t,l,u)},i}k(wK,"inv_trapezoid");async function lw(e,t,r){const{labelStyles:n,nodeStyles:i}=Ut(t);t.labelStyle=n;const{shapeSvg:s,bbox:o}=await fe(e,t,ce(t)),a=Math.max(o.width+r.labelPaddingX*2,(t==null?void 0:t.width)||0),l=Math.max(o.height+r.labelPaddingY*2,(t==null?void 0:t.height)||0),c=-a/2,h=-l/2;let u,{rx:f,ry:d}=t;const{cssStyles:p}=t;if(r!=null&&r.rx&&r.ry&&(f=r.rx,d=r.ry),t.look==="handDrawn"){const m=Wt.svg(s),g=jt(t,{}),y=f||d?m.path(Ic(c,h,a,l,f||0),g):m.rectangle(c,h,a,l,g);u=s.insert(()=>y,":first-child"),u.attr("class","basic label-container").attr("style",Hn(p))}else u=s.insert("rect",":first-child"),u.attr("class","basic label-container").attr("style",i).attr("rx",Hn(f)).attr("ry",Hn(d)).attr("x",c).attr("y",h).attr("width",a).attr("height",l);return Kt(t,u),t.calcIntersect=function(m,g){return Pt.rect(m,g)},t.intersect=function(m){return Pt.rect(t,m)},s}k(lw,"drawRect");async function kK(e,t){const{shapeSvg:r,bbox:n,label:i}=await fe(e,t,"label"),s=r.insert("rect",":first-child");return s.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),i.attr("transform",`translate(${-(n.width/2)-(n.x-(n.left??0))}, ${-(n.height/2)-(n.y-(n.top??0))})`),Kt(t,s),t.intersect=function(l){return Pt.rect(t,l)},r}k(kK,"labelRect");async function CK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s}=await fe(e,t,ce(t)),o=Math.max(s.width+(t.padding??0),(t==null?void 0:t.width)??0),a=Math.max(s.height+(t.padding??0),(t==null?void 0:t.height)??0),l=[{x:0,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:-(3*a)/6,y:-a}];let c;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=Wt.svg(i),f=jt(t,{}),d=Pe(l),p=u.path(d,f);c=i.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Bc(i,o,a,l);return n&&c.attr("style",n),t.width=o,t.height=a,Kt(t,c),t.intersect=function(u){return Pt.polygon(t,l,u)},i}k(CK,"lean_left");async function SK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s}=await fe(e,t,ce(t)),o=Math.max(s.width+(t.padding??0),(t==null?void 0:t.width)??0),a=Math.max(s.height+(t.padding??0),(t==null?void 0:t.height)??0),l=[{x:-3*a/6,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:0,y:-a}];let c;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=Wt.svg(i),f=jt(t,{}),d=Pe(l),p=u.path(d,f);c=i.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Bc(i,o,a,l);return n&&c.attr("style",n),t.width=o,t.height=a,Kt(t,c),t.intersect=function(u){return Pt.polygon(t,l,u)},i}k(SK,"lean_right");function TK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.label="",t.labelStyle=r;const i=e.insert("g").attr("class",ce(t)).attr("id",t.domId??t.id),{cssStyles:s}=t,o=Math.max(35,(t==null?void 0:t.width)??0),a=Math.max(35,(t==null?void 0:t.height)??0),l=7,c=[{x:o,y:0},{x:0,y:a+l/2},{x:o-2*l,y:a+l/2},{x:0,y:2*a},{x:o,y:a-l/2},{x:2*l,y:a-l/2}],h=Wt.svg(i),u=jt(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const f=Pe(c),d=h.path(f,u),p=i.insert(()=>d,":first-child");return s&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",s),n&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",n),p.attr("transform",`translate(-${o/2},${-a})`),Kt(t,p),t.intersect=function(m){return ht.info("lightningBolt intersect",t,m),Pt.polygon(t,c,m)},i}k(TK,"lightningBolt");var zTt=k((e,t,r,n,i,s,o)=>[`M${e},${t+s}`,`a${i},${s} 0,0,0 ${r},0`,`a${i},${s} 0,0,0 ${-r},0`,`l0,${n}`,`a${i},${s} 0,0,0 ${r},0`,`l0,${-n}`,`M${e},${t+s+o}`,`a${i},${s} 0,0,0 ${r},0`].join(" "),"createCylinderPathD"),HTt=k((e,t,r,n,i,s,o)=>[`M${e},${t+s}`,`M${e+r},${t+s}`,`a${i},${s} 0,0,0 ${-r},0`,`l0,${n}`,`a${i},${s} 0,0,0 ${r},0`,`l0,${-n}`,`M${e},${t+s+o}`,`a${i},${s} 0,0,0 ${r},0`].join(" "),"createOuterCylinderPathD"),qTt=k((e,t,r,n,i,s)=>[`M${e-r/2},${-n/2}`,`a${i},${s} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function _K(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await fe(e,t,ce(t)),a=Math.max(s.width+(t.padding??0),t.width??0),l=a/2,c=l/(2.5+a/50),h=Math.max(s.height+c+(t.padding??0),t.height??0),u=h*.1;let f;const{cssStyles:d}=t;if(t.look==="handDrawn"){const p=Wt.svg(i),m=HTt(0,0,a,h,l,c,u),g=qTt(0,c,a,h,l,c),y=jt(t,{}),b=p.path(m,y),x=p.path(g,y);i.insert(()=>x,":first-child").attr("class","line"),f=i.insert(()=>b,":first-child"),f.attr("class","basic label-container"),d&&f.attr("style",d)}else{const p=zTt(0,0,a,h,l,c,u);f=i.insert("path",":first-child").attr("d",p).attr("class","basic label-container").attr("style",Hn(d)).attr("style",n)}return f.attr("label-offset-y",c),f.attr("transform",`translate(${-a/2}, ${-(h/2+c)})`),Kt(t,f),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),t.intersect=function(p){const m=Pt.rect(t,p),g=m.x-(t.x??0);if(l!=0&&(Math.abs(g)<(t.width??0)/2||Math.abs(g)==(t.width??0)/2&&Math.abs(m.y-(t.y??0))>(t.height??0)/2-c)){let y=c*c*(1-g*g/(l*l));y>0&&(y=Math.sqrt(y)),y=c-y,p.y-(t.y??0)>0&&(y=-y),m.y+=y}return m},i}k(_K,"linedCylinder");async function MK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await fe(e,t,ce(t)),a=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/4,h=l+c,{cssStyles:u}=t,f=Wt.svg(i),d=jt(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const p=[{x:-a/2-a/2*.1,y:-h/2},{x:-a/2-a/2*.1,y:h/2},...wc(-a/2-a/2*.1,h/2,a/2+a/2*.1,h/2,c,.8),{x:a/2+a/2*.1,y:-h/2},{x:-a/2-a/2*.1,y:-h/2},{x:-a/2,y:-h/2},{x:-a/2,y:h/2*1.1},{x:-a/2,y:-h/2}],m=f.polygon(p.map(y=>[y.x,y.y]),d),g=i.insert(()=>m,":first-child");return g.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&g.selectAll("path").attr("style",u),n&&t.look!=="handDrawn"&&g.selectAll("path").attr("style",n),g.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(t.padding??0)+a/2*.1/2-(s.x-(s.left??0))},${-l/2+(t.padding??0)-c/2-(s.y-(s.top??0))})`),Kt(t,g),t.intersect=function(y){return Pt.polygon(t,p,y)},i}k(MK,"linedWaveEdgedRect");async function AK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await fe(e,t,ce(t)),a=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=5,h=-a/2,u=-l/2,{cssStyles:f}=t,d=Wt.svg(i),p=jt(t,{}),m=[{x:h-c,y:u+c},{x:h-c,y:u+l+c},{x:h+a-c,y:u+l+c},{x:h+a-c,y:u+l},{x:h+a,y:u+l},{x:h+a,y:u+l-c},{x:h+a+c,y:u+l-c},{x:h+a+c,y:u-c},{x:h+c,y:u-c},{x:h+c,y:u},{x:h,y:u},{x:h,y:u+c}],g=[{x:h,y:u+c},{x:h+a-c,y:u+c},{x:h+a-c,y:u+l},{x:h+a,y:u+l},{x:h+a,y:u},{x:h,y:u}];t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=Pe(m),b=d.path(y,p),x=Pe(g),T=d.path(x,{...p,fill:"none"}),S=i.insert(()=>T,":first-child");return S.insert(()=>b,":first-child"),S.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",f),n&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",n),o.attr("transform",`translate(${-(s.width/2)-c-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),Kt(t,S),t.intersect=function(w){return Pt.polygon(t,m,w)},i}k(AK,"multiRect");async function EK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await fe(e,t,ce(t)),a=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/4,h=l+c,u=-a/2,f=-h/2,d=5,{cssStyles:p}=t,m=wc(u-d,f+h+d,u+a-d,f+h+d,c,.8),g=m==null?void 0:m[m.length-1],y=[{x:u-d,y:f+d},{x:u-d,y:f+h+d},...m,{x:u+a-d,y:g.y-d},{x:u+a,y:g.y-d},{x:u+a,y:g.y-2*d},{x:u+a+d,y:g.y-2*d},{x:u+a+d,y:f-d},{x:u+d,y:f-d},{x:u+d,y:f},{x:u,y:f},{x:u,y:f+d}],b=[{x:u,y:f+d},{x:u+a-d,y:f+d},{x:u+a-d,y:g.y-d},{x:u+a,y:g.y-d},{x:u+a,y:f},{x:u,y:f}],x=Wt.svg(i),T=jt(t,{});t.look!=="handDrawn"&&(T.roughness=0,T.fillStyle="solid");const S=Pe(y),w=x.path(S,T),_=Pe(b),I=x.path(_,T),N=i.insert(()=>w,":first-child");return N.insert(()=>I),N.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",p),n&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",n),N.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-(s.width/2)-d-(s.x-(s.left??0))}, ${-(s.height/2)+d-c/2-(s.y-(s.top??0))})`),Kt(t,N),t.intersect=function(L){return Pt.polygon(t,y,L)},i}k(EK,"multiWaveEdgedRectangle");async function LK(e,t,{config:{themeVariables:r}}){var b;const{labelStyles:n,nodeStyles:i}=Ut(t);t.labelStyle=n,t.useHtmlLabels||((b=$n().flowchart)==null?void 0:b.htmlLabels)!==!1||(t.centerLabel=!0);const{shapeSvg:o,bbox:a,label:l}=await fe(e,t,ce(t)),c=Math.max(a.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),h=Math.max(a.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=-c/2,f=-h/2,{cssStyles:d}=t,p=Wt.svg(o),m=jt(t,{fill:r.noteBkgColor,stroke:r.noteBorderColor});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=p.rectangle(u,f,c,h,m),y=o.insert(()=>g,":first-child");return y.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",d),i&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",i),l.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${-(a.height/2)-(a.y-(a.top??0))})`),Kt(t,y),t.intersect=function(x){return Pt.rect(t,x)},o}k(LK,"note");var VTt=k((e,t,r)=>[`M${e+r/2},${t}`,`L${e+r},${t-r/2}`,`L${e+r/2},${t-r}`,`L${e},${t-r/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function OK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s}=await fe(e,t,ce(t)),o=s.width+t.padding,a=s.height+t.padding,l=o+a,c=.5,h=[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}];let u;const{cssStyles:f}=t;if(t.look==="handDrawn"){const d=Wt.svg(i),p=jt(t,{}),m=VTt(0,0,l),g=d.path(m,p);u=i.insert(()=>g,":first-child").attr("transform",`translate(${-l/2+c}, ${l/2})`),f&&u.attr("style",f)}else u=Bc(i,l,l,h),u.attr("transform",`translate(${-l/2+c}, ${l/2})`);return n&&u.attr("style",n),Kt(t,u),t.calcIntersect=function(d,p){const m=d.width,g=[{x:m/2,y:0},{x:m,y:-m/2},{x:m/2,y:-m},{x:0,y:-m/2}],y=Pt.polygon(d,g,p);return{x:y.x-.5,y:y.y-.5}},t.intersect=function(d){return this.calcIntersect(t,d)},i}k(OK,"question");async function DK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await fe(e,t,ce(t)),a=Math.max(s.width+(t.padding??0),(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0),(t==null?void 0:t.height)??0),c=-a/2,h=-l/2,u=h/2,f=[{x:c+u,y:h},{x:c,y:0},{x:c+u,y:-h},{x:-c,y:-h},{x:-c,y:h}],{cssStyles:d}=t,p=Wt.svg(i),m=jt(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=Pe(f),y=p.path(g,m),b=i.insert(()=>y,":first-child");return b.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",d),n&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",n),b.attr("transform",`translate(${-u/2},0)`),o.attr("transform",`translate(${-u/2-s.width/2-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),Kt(t,b),t.intersect=function(x){return Pt.polygon(t,f,x)},i}k(DK,"rect_left_inv_arrow");async function IK(e,t){var I,N;const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;let i;t.cssClasses?i="node "+t.cssClasses:i="node default";const s=e.insert("g").attr("class",i).attr("id",t.domId||t.id),o=s.insert("g"),a=s.insert("g").attr("class","label").attr("style",n),l=t.description,c=t.label,h=a.node().appendChild(await vh(c,t.labelStyle,!0,!0));let u={width:0,height:0};if(en((N=(I=Ze())==null?void 0:I.flowchart)==null?void 0:N.htmlLabels)){const L=h.children[0],D=$e(h);u=L.getBoundingClientRect(),D.attr("width",u.width),D.attr("height",u.height)}ht.info("Text 2",l);const f=l||[],d=h.getBBox(),p=a.node().appendChild(await vh(f.join?f.join("<br/>"):f,t.labelStyle,!0,!0)),m=p.children[0],g=$e(p);u=m.getBoundingClientRect(),g.attr("width",u.width),g.attr("height",u.height);const y=(t.padding||0)/2;$e(p).attr("transform","translate( "+(u.width>d.width?0:(d.width-u.width)/2)+", "+(d.height+y+5)+")"),$e(h).attr("transform","translate( "+(u.width<d.width?0:-(d.width-u.width)/2)+", 0)"),u=a.node().getBBox(),a.attr("transform","translate("+-u.width/2+", "+(-u.height/2-y+3)+")");const b=u.width+(t.padding||0),x=u.height+(t.padding||0),T=-u.width/2-y,S=-u.height/2-y;let w,_;if(t.look==="handDrawn"){const L=Wt.svg(s),D=jt(t,{}),P=L.path(Ic(T,S,b,x,t.rx||0),D),K=L.line(-u.width/2-y,-u.height/2-y+d.height+y,u.width/2+y,-u.height/2-y+d.height+y,D);_=s.insert(()=>(ht.debug("Rough node insert CXC",P),K),":first-child"),w=s.insert(()=>(ht.debug("Rough node insert CXC",P),P),":first-child")}else w=o.insert("rect",":first-child"),_=o.insert("line"),w.attr("class","outer title-state").attr("style",n).attr("x",-u.width/2-y).attr("y",-u.height/2-y).attr("width",u.width+(t.padding||0)).attr("height",u.height+(t.padding||0)),_.attr("class","divider").attr("x1",-u.width/2-y).attr("x2",u.width/2+y).attr("y1",-u.height/2-y+d.height+y).attr("y2",-u.height/2-y+d.height+y);return Kt(t,w),t.intersect=function(L){return Pt.rect(t,L)},s}k(IK,"rectWithTitle");function Bp(e,t,r,n,i,s,o){const l=(e+r)/2,c=(t+n)/2,h=Math.atan2(n-t,r-e),u=(r-e)/2,f=(n-t)/2,d=u/i,p=f/s,m=Math.sqrt(d**2+p**2);if(m>1)throw new Error("The given radii are too small to create an arc between the points.");const g=Math.sqrt(1-m**2),y=l+g*s*Math.sin(h)*(o?-1:1),b=c-g*i*Math.cos(h)*(o?-1:1),x=Math.atan2((t-b)/s,(e-y)/i);let S=Math.atan2((n-b)/s,(r-y)/i)-x;o&&S<0&&(S+=2*Math.PI),!o&&S>0&&(S-=2*Math.PI);const w=[];for(let _=0;_<20;_++){const I=_/19,N=x+I*S,L=y+i*Math.cos(N),D=b+s*Math.sin(N);w.push({x:L,y:D})}return w}k(Bp,"generateArcPoints");async function BK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s}=await fe(e,t,ce(t)),o=(t==null?void 0:t.padding)??0,a=(t==null?void 0:t.padding)??0,l=(t!=null&&t.width?t==null?void 0:t.width:s.width)+o*2,c=(t!=null&&t.height?t==null?void 0:t.height:s.height)+a*2,h=t.radius||5,u=t.taper||5,{cssStyles:f}=t,d=Wt.svg(i),p=jt(t,{});t.stroke&&(p.stroke=t.stroke),t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=[{x:-l/2+u,y:-c/2},{x:l/2-u,y:-c/2},...Bp(l/2-u,-c/2,l/2,-c/2+u,h,h,!0),{x:l/2,y:-c/2+u},{x:l/2,y:c/2-u},...Bp(l/2,c/2-u,l/2-u,c/2,h,h,!0),{x:l/2-u,y:c/2},{x:-l/2+u,y:c/2},...Bp(-l/2+u,c/2,-l/2,c/2-u,h,h,!0),{x:-l/2,y:c/2-u},{x:-l/2,y:-c/2+u},...Bp(-l/2,-c/2+u,-l/2+u,-c/2,h,h,!0)],g=Pe(m),y=d.path(g,p),b=i.insert(()=>y,":first-child");return b.attr("class","basic label-container outer-path"),f&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",f),n&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",n),Kt(t,b),t.intersect=function(x){return Pt.polygon(t,m,x)},i}k(BK,"roundedRect");async function RK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await fe(e,t,ce(t)),a=(t==null?void 0:t.padding)??0,l=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=-s.width/2-a,u=-s.height/2-a,{cssStyles:f}=t,d=Wt.svg(i),p=jt(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=[{x:h,y:u},{x:h+l+8,y:u},{x:h+l+8,y:u+c},{x:h-8,y:u+c},{x:h-8,y:u},{x:h,y:u},{x:h,y:u+c}],g=d.polygon(m.map(b=>[b.x,b.y]),p),y=i.insert(()=>g,":first-child");return y.attr("class","basic label-container").attr("style",Hn(f)),n&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",n),f&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",n),o.attr("transform",`translate(${-l/2+4+(t.padding??0)-(s.x-(s.left??0))},${-c/2+(t.padding??0)-(s.y-(s.top??0))})`),Kt(t,y),t.intersect=function(b){return Pt.rect(t,b)},i}k(RK,"shadedProcess");async function PK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await fe(e,t,ce(t)),a=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=-a/2,h=-l/2,{cssStyles:u}=t,f=Wt.svg(i),d=jt(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const p=[{x:c,y:h},{x:c,y:h+l},{x:c+a,y:h+l},{x:c+a,y:h-l/2}],m=Pe(p),g=f.path(m,d),y=i.insert(()=>g,":first-child");return y.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",u),n&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",n),y.attr("transform",`translate(0, ${l/4})`),o.attr("transform",`translate(${-a/2+(t.padding??0)-(s.x-(s.left??0))}, ${-l/4+(t.padding??0)-(s.y-(s.top??0))})`),Kt(t,y),t.intersect=function(b){return Pt.polygon(t,p,b)},i}k(PK,"slopedRect");async function NK(e,t){const r={rx:0,ry:0,labelPaddingX:t.labelPaddingX??((t==null?void 0:t.padding)||0)*2,labelPaddingY:((t==null?void 0:t.padding)||0)*1};return lw(e,t,r)}k(NK,"squareRect");async function FK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s}=await fe(e,t,ce(t)),o=s.height+t.padding,a=s.width+o/4+t.padding,l=o/2,{cssStyles:c}=t,h=Wt.svg(i),u=jt(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const f=[{x:-a/2+l,y:-o/2},{x:a/2-l,y:-o/2},...Sg(-a/2+l,0,l,50,90,270),{x:a/2-l,y:o/2},...Sg(a/2-l,0,l,50,270,450)],d=Pe(f),p=h.path(d,u),m=i.insert(()=>p,":first-child");return m.attr("class","basic label-container outer-path"),c&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",c),n&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",n),Kt(t,m),t.intersect=function(g){return Pt.polygon(t,f,g)},i}k(FK,"stadium");async function $K(e,t){return lw(e,t,{rx:5,ry:5})}k($K,"state");function zK(e,t,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:i}=Ut(t);t.labelStyle=n;const{cssStyles:s}=t,{lineColor:o,stateBorder:a,nodeBorder:l}=r,c=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),h=Wt.svg(c),u=jt(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const f=h.circle(0,0,14,{...u,stroke:o,strokeWidth:2}),d=a??l,p=h.circle(0,0,5,{...u,fill:d,stroke:d,strokeWidth:2,fillStyle:"solid"}),m=c.insert(()=>f,":first-child");return m.insert(()=>p),s&&m.selectAll("path").attr("style",s),i&&m.selectAll("path").attr("style",i),Kt(t,m),t.intersect=function(g){return Pt.circle(t,7,g)},c}k(zK,"stateEnd");function HK(e,t,{config:{themeVariables:r}}){const{lineColor:n}=r,i=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let s;if(t.look==="handDrawn"){const a=Wt.svg(i).circle(0,0,14,O8t(n));s=i.insert(()=>a),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else s=i.insert("circle",":first-child"),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return Kt(t,s),t.intersect=function(o){return Pt.circle(t,7,o)},i}k(HK,"stateStart");async function qK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s}=await fe(e,t,ce(t)),o=((t==null?void 0:t.padding)||0)/2,a=s.width+t.padding,l=s.height+t.padding,c=-s.width/2-o,h=-s.height/2-o,u=[{x:0,y:0},{x:a,y:0},{x:a,y:-l},{x:0,y:-l},{x:0,y:0},{x:-8,y:0},{x:a+8,y:0},{x:a+8,y:-l},{x:-8,y:-l},{x:-8,y:0}];if(t.look==="handDrawn"){const f=Wt.svg(i),d=jt(t,{}),p=f.rectangle(c-8,h,a+16,l,d),m=f.line(c,h,c,h+l,d),g=f.line(c+a,h,c+a,h+l,d);i.insert(()=>m,":first-child"),i.insert(()=>g,":first-child");const y=i.insert(()=>p,":first-child"),{cssStyles:b}=t;y.attr("class","basic label-container").attr("style",Hn(b)),Kt(t,y)}else{const f=Bc(i,a,l,u);n&&f.attr("style",n),Kt(t,f)}return t.intersect=function(f){return Pt.polygon(t,u,f)},i}k(qK,"subroutine");async function VK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s}=await fe(e,t,ce(t)),o=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),a=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=-o/2,c=-a/2,h=.2*a,u=.2*a,{cssStyles:f}=t,d=Wt.svg(i),p=jt(t,{}),m=[{x:l-h/2,y:c},{x:l+o+h/2,y:c},{x:l+o+h/2,y:c+a},{x:l-h/2,y:c+a}],g=[{x:l+o-h/2,y:c+a},{x:l+o+h/2,y:c+a},{x:l+o+h/2,y:c+a-u}];t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=Pe(m),b=d.path(y,p),x=Pe(g),T=d.path(x,{...p,fillStyle:"solid"}),S=i.insert(()=>T,":first-child");return S.insert(()=>b,":first-child"),S.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",f),n&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",n),Kt(t,S),t.intersect=function(w){return Pt.polygon(t,m,w)},i}k(VK,"taggedRect");async function WK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await fe(e,t,ce(t)),a=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/4,h=.2*a,u=.2*l,f=l+c,{cssStyles:d}=t,p=Wt.svg(i),m=jt(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=[{x:-a/2-a/2*.1,y:f/2},...wc(-a/2-a/2*.1,f/2,a/2+a/2*.1,f/2,c,.8),{x:a/2+a/2*.1,y:-f/2},{x:-a/2-a/2*.1,y:-f/2}],y=-a/2+a/2*.1,b=-f/2-u*.4,x=[{x:y+a-h,y:(b+l)*1.4},{x:y+a,y:b+l-u},{x:y+a,y:(b+l)*.9},...wc(y+a,(b+l)*1.3,y+a-h,(b+l)*1.5,-l*.03,.5)],T=Pe(g),S=p.path(T,m),w=Pe(x),_=p.path(w,{...m,fillStyle:"solid"}),I=i.insert(()=>_,":first-child");return I.insert(()=>S,":first-child"),I.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",d),n&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",n),I.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(t.padding??0)-(s.x-(s.left??0))},${-l/2+(t.padding??0)-c/2-(s.y-(s.top??0))})`),Kt(t,I),t.intersect=function(N){return Pt.polygon(t,g,N)},i}k(WK,"taggedWaveEdgedRectangle");async function jK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s}=await fe(e,t,ce(t)),o=Math.max(s.width+t.padding,(t==null?void 0:t.width)||0),a=Math.max(s.height+t.padding,(t==null?void 0:t.height)||0),l=-o/2,c=-a/2,h=i.insert("rect",":first-child");return h.attr("class","text").attr("style",n).attr("rx",0).attr("ry",0).attr("x",l).attr("y",c).attr("width",o).attr("height",a),Kt(t,h),t.intersect=function(u){return Pt.rect(t,u)},i}k(jK,"text");var WTt=k((e,t,r,n,i,s)=>`M${e},${t}
    a${i},${s} 0,0,1 0,${-n}
    l${r},0
    a${i},${s} 0,0,1 0,${n}
    M${r},${-n}
    a${i},${s} 0,0,0 0,${n}
    l${-r},0`,"createCylinderPathD"),jTt=k((e,t,r,n,i,s)=>[`M${e},${t}`,`M${e+r},${t}`,`a${i},${s} 0,0,0 0,${-n}`,`l${-r},0`,`a${i},${s} 0,0,0 0,${n}`,`l${r},0`].join(" "),"createOuterCylinderPathD"),UTt=k((e,t,r,n,i,s)=>[`M${e+r/2},${-n/2}`,`a${i},${s} 0,0,0 0,${n}`].join(" "),"createInnerCylinderPathD");async function UK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,label:o,halfPadding:a}=await fe(e,t,ce(t)),l=t.look==="neo"?a*2:a,c=s.height+l,h=c/2,u=h/(2.5+c/50),f=s.width+u+l,{cssStyles:d}=t;let p;if(t.look==="handDrawn"){const m=Wt.svg(i),g=jTt(0,0,f,c,u,h),y=UTt(0,0,f,c,u,h),b=m.path(g,jt(t,{})),x=m.path(y,jt(t,{fill:"none"}));p=i.insert(()=>x,":first-child"),p=i.insert(()=>b,":first-child"),p.attr("class","basic label-container"),d&&p.attr("style",d)}else{const m=WTt(0,0,f,c,u,h);p=i.insert("path",":first-child").attr("d",m).attr("class","basic label-container").attr("style",Hn(d)).attr("style",n),p.attr("class","basic label-container"),d&&p.selectAll("path").attr("style",d),n&&p.selectAll("path").attr("style",n)}return p.attr("label-offset-x",u),p.attr("transform",`translate(${-f/2}, ${c/2} )`),o.attr("transform",`translate(${-(s.width/2)-u-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),Kt(t,p),t.intersect=function(m){const g=Pt.rect(t,m),y=g.y-(t.y??0);if(h!=0&&(Math.abs(y)<(t.height??0)/2||Math.abs(y)==(t.height??0)/2&&Math.abs(g.x-(t.x??0))>(t.width??0)/2-u)){let b=u*u*(1-y*y/(h*h));b!=0&&(b=Math.sqrt(Math.abs(b))),b=u-b,m.x-(t.x??0)>0&&(b=-b),g.x+=b}return g},i}k(UK,"tiltedCylinder");async function GK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s}=await fe(e,t,ce(t)),o=s.width+t.padding,a=s.height+t.padding,l=[{x:-3*a/6,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:0,y:-a}];let c;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=Wt.svg(i),f=jt(t,{}),d=Pe(l),p=u.path(d,f);c=i.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Bc(i,o,a,l);return n&&c.attr("style",n),t.width=o,t.height=a,Kt(t,c),t.intersect=function(u){return Pt.polygon(t,l,u)},i}k(GK,"trapezoid");async function KK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s}=await fe(e,t,ce(t)),o=60,a=20,l=Math.max(o,s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(a,s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),{cssStyles:h}=t,u=Wt.svg(i),f=jt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const d=[{x:-l/2*.8,y:-c/2},{x:l/2*.8,y:-c/2},{x:l/2,y:-c/2*.6},{x:l/2,y:c/2},{x:-l/2,y:c/2},{x:-l/2,y:-c/2*.6}],p=Pe(d),m=u.path(p,f),g=i.insert(()=>m,":first-child");return g.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&g.selectChildren("path").attr("style",h),n&&t.look!=="handDrawn"&&g.selectChildren("path").attr("style",n),Kt(t,g),t.intersect=function(y){return Pt.polygon(t,d,y)},i}k(KK,"trapezoidalPentagon");async function YK(e,t){var b;const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await fe(e,t,ce(t)),a=en((b=Ze().flowchart)==null?void 0:b.htmlLabels),l=s.width+(t.padding??0),c=l+s.height,h=l+s.height,u=[{x:0,y:0},{x:h,y:0},{x:h/2,y:-c}],{cssStyles:f}=t,d=Wt.svg(i),p=jt(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=Pe(u),g=d.path(m,p),y=i.insert(()=>g,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return f&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",f),n&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",n),t.width=l,t.height=c,Kt(t,y),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${c/2-(s.height+(t.padding??0)/(a?2:1)-(s.y-(s.top??0)))})`),t.intersect=function(x){return ht.info("Triangle intersect",t,u,x),Pt.polygon(t,u,x)},i}k(YK,"triangle");async function XK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await fe(e,t,ce(t)),a=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/8,h=l+c,{cssStyles:u}=t,d=70-a,p=d>0?d/2:0,m=Wt.svg(i),g=jt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=[{x:-a/2-p,y:h/2},...wc(-a/2-p,h/2,a/2+p,h/2,c,.8),{x:a/2+p,y:-h/2},{x:-a/2-p,y:-h/2}],b=Pe(y),x=m.path(b,g),T=i.insert(()=>x,":first-child");return T.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",u),n&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",n),T.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(t.padding??0)-(s.x-(s.left??0))},${-l/2+(t.padding??0)-c-(s.y-(s.top??0))})`),Kt(t,T),t.intersect=function(S){return Pt.polygon(t,y,S)},i}k(XK,"waveEdgedRectangle");async function JK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s}=await fe(e,t,ce(t)),o=100,a=50,l=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=l/c;let u=l,f=c;u>f*h?f=u/h:u=f*h,u=Math.max(u,o),f=Math.max(f,a);const d=Math.min(f*.2,f/4),p=f+d*2,{cssStyles:m}=t,g=Wt.svg(i),y=jt(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=[{x:-u/2,y:p/2},...wc(-u/2,p/2,u/2,p/2,d,1),{x:u/2,y:-p/2},...wc(u/2,-p/2,-u/2,-p/2,d,-1)],x=Pe(b),T=g.path(x,y),S=i.insert(()=>T,":first-child");return S.attr("class","basic label-container"),m&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",m),n&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",n),Kt(t,S),t.intersect=function(w){return Pt.polygon(t,b,w)},i}k(JK,"waveRectangle");async function ZK(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,label:o}=await fe(e,t,ce(t)),a=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=5,h=-a/2,u=-l/2,{cssStyles:f}=t,d=Wt.svg(i),p=jt(t,{}),m=[{x:h-c,y:u-c},{x:h-c,y:u+l},{x:h+a,y:u+l},{x:h+a,y:u-c}],g=`M${h-c},${u-c} L${h+a},${u-c} L${h+a},${u+l} L${h-c},${u+l} L${h-c},${u-c}
                M${h-c},${u} L${h+a},${u}
                M${h},${u-c} L${h},${u+l}`;t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=d.path(g,p),b=i.insert(()=>y,":first-child");return b.attr("transform",`translate(${c/2}, ${c/2})`),b.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",f),n&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",n),o.attr("transform",`translate(${-(s.width/2)+c/2-(s.x-(s.left??0))}, ${-(s.height/2)+c/2-(s.y-(s.top??0))})`),Kt(t,b),t.intersect=function(x){return Pt.polygon(t,m,x)},i}k(ZK,"windowPane");async function LT(e,t){var Tt,O,te,Ht;const r=t;if(r.alias&&(t.label=r.alias),t.look==="handDrawn"){const{themeVariables:Lt}=$n(),{background:Xt}=Lt,de={...t,id:t.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${Xt}`]};await LT(e,de)}const n=$n();t.useHtmlLabels=n.htmlLabels;let i=((Tt=n.er)==null?void 0:Tt.diagramPadding)??10,s=((O=n.er)==null?void 0:O.entityPadding)??6;const{cssStyles:o}=t,{labelStyles:a,nodeStyles:l}=Ut(t);if(r.attributes.length===0&&t.label){const Lt={rx:0,ry:0,labelPaddingX:i,labelPaddingY:i*1.5};hl(t.label,n)+Lt.labelPaddingX*2<n.er.minEntityWidth&&(t.width=n.er.minEntityWidth);const Xt=await lw(e,t,Lt);if(!en(n.htmlLabels)){const de=Xt.select("text"),Ce=(te=de.node())==null?void 0:te.getBBox();de.attr("transform",`translate(${-Ce.width/2}, 0)`)}return Xt}n.htmlLabels||(i*=1.25,s*=1.25);let c=ce(t);c||(c="node default");const h=e.insert("g").attr("class",c).attr("id",t.domId||t.id),u=await rf(h,t.label??"",n,0,0,["name"],a);u.height+=s;let f=0;const d=[],p=[];let m=0,g=0,y=0,b=0,x=!0,T=!0;for(const Lt of r.attributes){const Xt=await rf(h,Lt.type,n,0,f,["attribute-type"],a);m=Math.max(m,Xt.width+i);const de=await rf(h,Lt.name,n,0,f,["attribute-name"],a);g=Math.max(g,de.width+i);const Ce=await rf(h,Lt.keys.join(),n,0,f,["attribute-keys"],a);y=Math.max(y,Ce.width+i);const xe=await rf(h,Lt.comment,n,0,f,["attribute-comment"],a);b=Math.max(b,xe.width+i);const Ue=Math.max(Xt.height,de.height,Ce.height,xe.height)+s;p.push({yOffset:f,rowHeight:Ue}),f+=Ue}let S=4;y<=i&&(x=!1,y=0,S--),b<=i&&(T=!1,b=0,S--);const w=h.node().getBBox();if(u.width+i*2-(m+g+y+b)>0){const Lt=u.width+i*2-(m+g+y+b);m+=Lt/S,g+=Lt/S,y>0&&(y+=Lt/S),b>0&&(b+=Lt/S)}const _=m+g+y+b,I=Wt.svg(h),N=jt(t,{});t.look!=="handDrawn"&&(N.roughness=0,N.fillStyle="solid");let L=0;p.length>0&&(L=p.reduce((Lt,Xt)=>Lt+((Xt==null?void 0:Xt.rowHeight)??0),0));const D=Math.max(w.width+i*2,(t==null?void 0:t.width)||0,_),P=Math.max((L??0)+u.height,(t==null?void 0:t.height)||0),K=-D/2,z=-P/2;h.selectAll("g:not(:first-child)").each((Lt,Xt,de)=>{const Ce=$e(de[Xt]),xe=Ce.attr("transform");let Ue=0,R=0;if(xe){const tt=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(xe);tt&&(Ue=parseFloat(tt[1]),R=parseFloat(tt[2]),Ce.attr("class").includes("attribute-name")?Ue+=m:Ce.attr("class").includes("attribute-keys")?Ue+=m+g:Ce.attr("class").includes("attribute-comment")&&(Ue+=m+g+y))}Ce.attr("transform",`translate(${K+i/2+Ue}, ${R+z+u.height+s/2})`)}),h.select(".name").attr("transform","translate("+-u.width/2+", "+(z+s/2)+")");const $=I.rectangle(K,z,D,P,N),H=h.insert(()=>$,":first-child").attr("style",o.join("")),{themeVariables:U}=$n(),{rowEven:q,rowOdd:rt,nodeBorder:E}=U;d.push(0);for(const[Lt,Xt]of p.entries()){const Ce=(Lt+1)%2===0&&Xt.yOffset!==0,xe=I.rectangle(K,u.height+z+(Xt==null?void 0:Xt.yOffset),D,Xt==null?void 0:Xt.rowHeight,{...N,fill:Ce?q:rt,stroke:E});h.insert(()=>xe,"g.label").attr("style",o.join("")).attr("class",`row-rect-${Ce?"even":"odd"}`)}let dt=I.line(K,u.height+z,D+K,u.height+z,N);h.insert(()=>dt).attr("class","divider"),dt=I.line(m+K,u.height+z,m+K,P+z,N),h.insert(()=>dt).attr("class","divider"),x&&(dt=I.line(m+g+K,u.height+z,m+g+K,P+z,N),h.insert(()=>dt).attr("class","divider")),T&&(dt=I.line(m+g+y+K,u.height+z,m+g+y+K,P+z,N),h.insert(()=>dt).attr("class","divider"));for(const Lt of d)dt=I.line(K,u.height+z+Lt,D+K,u.height+z+Lt,N),h.insert(()=>dt).attr("class","divider");if(Kt(t,H),l&&t.look!=="handDrawn"){const Lt=l.split(";"),Xt=(Ht=Lt==null?void 0:Lt.filter(de=>de.includes("stroke")))==null?void 0:Ht.map(de=>`${de}`).join("; ");h.selectAll("path").attr("style",Xt??""),h.selectAll(".row-rect-even path").attr("style",l)}return t.intersect=function(Lt){return Pt.rect(t,Lt)},h}k(LT,"erBox");async function rf(e,t,r,n=0,i=0,s=[],o=""){const a=e.insert("g").attr("class",`label ${s.join(" ")}`).attr("transform",`translate(${n}, ${i})`).attr("style",o);t!==CD(t)&&(t=CD(t),t=t.replaceAll("<","&lt;").replaceAll(">","&gt;"));const l=a.node().appendChild(await Dc(a,t,{width:hl(t,r)+100,style:o,useHtmlLabels:r.htmlLabels},r));if(t.includes("&lt;")||t.includes("&gt;")){let h=l.children[0];for(h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");h.childNodes[0];)h=h.childNodes[0],h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let c=l.getBBox();if(en(r.htmlLabels)){const h=l.children[0];h.style.textAlign="start";const u=$e(l);c=h.getBoundingClientRect(),u.attr("width",c.width),u.attr("height",c.height)}return c}k(rf,"addText");async function QK(e,t,r,n,i=r.class.padding??12){const s=n?0:3,o=e.insert("g").attr("class",ce(t)).attr("id",t.domId||t.id);let a=null,l=null,c=null,h=null,u=0,f=0,d=0;if(a=o.insert("g").attr("class","annotation-group text"),t.annotations.length>0){const b=t.annotations[0];await Rp(a,{text:`${b}`},0),u=a.node().getBBox().height}l=o.insert("g").attr("class","label-group text"),await Rp(l,t,0,["font-weight: bolder"]);const p=l.node().getBBox();f=p.height,c=o.insert("g").attr("class","members-group text");let m=0;for(const b of t.members){const x=await Rp(c,b,m,[b.parseClassifier()]);m+=x+s}d=c.node().getBBox().height,d<=0&&(d=i/2),h=o.insert("g").attr("class","methods-group text");let g=0;for(const b of t.methods){const x=await Rp(h,b,g,[b.parseClassifier()]);g+=x+s}let y=o.node().getBBox();if(a!==null){const b=a.node().getBBox();a.attr("transform",`translate(${-b.width/2})`)}return l.attr("transform",`translate(${-p.width/2}, ${u})`),y=o.node().getBBox(),c.attr("transform",`translate(0, ${u+f+i*2})`),y=o.node().getBBox(),h.attr("transform",`translate(0, ${u+f+(d?d+i*4:i*2)})`),y=o.node().getBBox(),{shapeSvg:o,bbox:y}}k(QK,"textHelper");async function Rp(e,t,r,n=[]){const i=e.insert("g").attr("class","label").attr("style",n.join("; ")),s=$n();let o="useHtmlLabels"in t?t.useHtmlLabels:en(s.htmlLabels)??!0,a="";"text"in t?a=t.text:a=t.label,!o&&a.startsWith("\\")&&(a=a.substring(1)),Ld(a)&&(o=!0);const l=await Dc(i,V9(Au(a)),{width:hl(a,s)+50,classes:"markdown-node-label",useHtmlLabels:o},s);let c,h=1;if(o){const u=l.children[0],f=$e(l);h=u.innerHTML.split("<br>").length,u.innerHTML.includes("</math>")&&(h+=u.innerHTML.split("<mrow>").length-1);const d=u.getElementsByTagName("img");if(d){const p=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...d].map(m=>new Promise(g=>{function y(){var b;if(m.style.display="flex",m.style.flexDirection="column",p){const x=((b=s.fontSize)==null?void 0:b.toString())??window.getComputedStyle(document.body).fontSize,S=parseInt(x,10)*5+"px";m.style.minWidth=S,m.style.maxWidth=S}else m.style.width="100%";g(m)}k(y,"setupImage"),setTimeout(()=>{m.complete&&y()}),m.addEventListener("error",y),m.addEventListener("load",y)})))}c=u.getBoundingClientRect(),f.attr("width",c.width),f.attr("height",c.height)}else{n.includes("font-weight: bolder")&&$e(l).selectAll("tspan").attr("font-weight",""),h=l.children.length;const u=l.children[0];(l.textContent===""||l.textContent.includes("&gt"))&&(u.textContent=a[0]+a.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),a[1]===" "&&(u.textContent=u.textContent[0]+" "+u.textContent.substring(1))),u.textContent==="undefined"&&(u.textContent=""),c=l.getBBox()}return i.attr("transform","translate(0,"+(-c.height/(2*h)+r)+")"),c.height}k(Rp,"addText");async function tY(e,t){var N,L;const r=Ze(),n=r.class.padding??12,i=n,s=t.useHtmlLabels??en(r.htmlLabels)??!0,o=t;o.annotations=o.annotations??[],o.members=o.members??[],o.methods=o.methods??[];const{shapeSvg:a,bbox:l}=await QK(e,t,r,s,i),{labelStyles:c,nodeStyles:h}=Ut(t);t.labelStyle=c,t.cssStyles=o.styles||"";const u=((N=o.styles)==null?void 0:N.join(";"))||h||"";t.cssStyles||(t.cssStyles=u.replaceAll("!important","").split(";"));const f=o.members.length===0&&o.methods.length===0&&!((L=r.class)!=null&&L.hideEmptyMembersBox),d=Wt.svg(a),p=jt(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=l.width;let g=l.height;o.members.length===0&&o.methods.length===0?g+=i:o.members.length>0&&o.methods.length===0&&(g+=i*2);const y=-m/2,b=-g/2,x=d.rectangle(y-n,b-n-(f?n:o.members.length===0&&o.methods.length===0?-n/2:0),m+2*n,g+2*n+(f?n*2:o.members.length===0&&o.methods.length===0?-n:0),p),T=a.insert(()=>x,":first-child");T.attr("class","basic label-container");const S=T.node().getBBox();a.selectAll(".text").each((D,P,K)=>{var rt;const z=$e(K[P]),$=z.attr("transform");let H=0;if($){const dt=RegExp(/translate\(([^,]+),([^)]+)\)/).exec($);dt&&(H=parseFloat(dt[2]))}let U=H+b+n-(f?n:o.members.length===0&&o.methods.length===0?-n/2:0);s||(U-=4);let q=y;(z.attr("class").includes("label-group")||z.attr("class").includes("annotation-group"))&&(q=-((rt=z.node())==null?void 0:rt.getBBox().width)/2||0,a.selectAll("text").each(function(E,dt,Tt){window.getComputedStyle(Tt[dt]).textAnchor==="middle"&&(q=0)})),z.attr("transform",`translate(${q}, ${U})`)});const w=a.select(".annotation-group").node().getBBox().height-(f?n/2:0)||0,_=a.select(".label-group").node().getBBox().height-(f?n/2:0)||0,I=a.select(".members-group").node().getBBox().height-(f?n/2:0)||0;if(o.members.length>0||o.methods.length>0||f){const D=d.line(S.x,w+_+b+n,S.x+S.width,w+_+b+n,p);a.insert(()=>D).attr("class","divider").attr("style",u)}if(f||o.members.length>0||o.methods.length>0){const D=d.line(S.x,w+_+I+b+i*2+n,S.x+S.width,w+_+I+b+n+i*2,p);a.insert(()=>D).attr("class","divider").attr("style",u)}if(o.look!=="handDrawn"&&a.selectAll("path").attr("style",u),T.select(":nth-child(2)").attr("style",u),a.selectAll(".divider").select("path").attr("style",u),t.labelStyle?a.selectAll("span").attr("style",t.labelStyle):a.selectAll("span").attr("style",u),!s){const D=RegExp(/color\s*:\s*([^;]*)/),P=D.exec(u);if(P){const K=P[0].replace("color","fill");a.selectAll("tspan").attr("style",K)}else if(c){const K=D.exec(c);if(K){const z=K[0].replace("color","fill");a.selectAll("tspan").attr("style",z)}}}return Kt(t,T),t.intersect=function(D){return Pt.rect(t,D)},a}k(tY,"classBox");async function eY(e,t){var w,_;const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const i=t,s=t,o=20,a=20,l="verifyMethod"in t,c=ce(t),h=e.insert("g").attr("class",c).attr("id",t.domId??t.id);let u;l?u=await Ao(h,`&lt;&lt;${i.type}&gt;&gt;`,0,t.labelStyle):u=await Ao(h,"&lt;&lt;Element&gt;&gt;",0,t.labelStyle);let f=u;const d=await Ao(h,i.name,f,t.labelStyle+"; font-weight: bold;");if(f+=d+a,l){const I=await Ao(h,`${i.requirementId?`ID: ${i.requirementId}`:""}`,f,t.labelStyle);f+=I;const N=await Ao(h,`${i.text?`Text: ${i.text}`:""}`,f,t.labelStyle);f+=N;const L=await Ao(h,`${i.risk?`Risk: ${i.risk}`:""}`,f,t.labelStyle);f+=L,await Ao(h,`${i.verifyMethod?`Verification: ${i.verifyMethod}`:""}`,f,t.labelStyle)}else{const I=await Ao(h,`${s.type?`Type: ${s.type}`:""}`,f,t.labelStyle);f+=I,await Ao(h,`${s.docRef?`Doc Ref: ${s.docRef}`:""}`,f,t.labelStyle)}const p=(((w=h.node())==null?void 0:w.getBBox().width)??200)+o,m=(((_=h.node())==null?void 0:_.getBBox().height)??200)+o,g=-p/2,y=-m/2,b=Wt.svg(h),x=jt(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const T=b.rectangle(g,y,p,m,x),S=h.insert(()=>T,":first-child");if(S.attr("class","basic label-container").attr("style",n),h.selectAll(".label").each((I,N,L)=>{const D=$e(L[N]),P=D.attr("transform");let K=0,z=0;if(P){const q=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(P);q&&(K=parseFloat(q[1]),z=parseFloat(q[2]))}const $=z-m/2;let H=g+o/2;(N===0||N===1)&&(H=K),D.attr("transform",`translate(${H}, ${$+o})`)}),f>u+d+a){const I=b.line(g,y+u+d+a,g+p,y+u+d+a,x);h.insert(()=>I).attr("style",n)}return Kt(t,S),t.intersect=function(I){return Pt.rect(t,I)},h}k(eY,"requirementBox");async function Ao(e,t,r,n=""){if(t==="")return 0;const i=e.insert("g").attr("class","label").attr("style",n),s=Ze(),o=s.htmlLabels??!0,a=await Dc(i,V9(Au(t)),{width:hl(t,s)+50,classes:"markdown-node-label",useHtmlLabels:o,style:n},s);let l;if(o){const c=a.children[0],h=$e(a);l=c.getBoundingClientRect(),h.attr("width",l.width),h.attr("height",l.height)}else{const c=a.children[0];for(const h of c.children)h.textContent=h.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),n&&h.setAttribute("style",n);l=a.getBBox(),l.height+=6}return i.attr("transform",`translate(${-l.width/2},${-l.height/2+r})`),l.height}k(Ao,"addText");var GTt=k(e=>{switch(e){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function rY(e,t,{config:r}){var P,K;const{labelStyles:n,nodeStyles:i}=Ut(t);t.labelStyle=n||"";const s=10,o=t.width;t.width=(t.width??200)-10;const{shapeSvg:a,bbox:l,label:c}=await fe(e,t,ce(t)),h=t.padding||10;let u="",f;"ticket"in t&&t.ticket&&((P=r==null?void 0:r.kanban)!=null&&P.ticketBaseUrl)&&(u=(K=r==null?void 0:r.kanban)==null?void 0:K.ticketBaseUrl.replace("#TICKET#",t.ticket),f=a.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",u).attr("target","_blank"));const d={useHtmlLabels:t.useHtmlLabels,labelStyle:t.labelStyle||"",width:t.width,img:t.img,padding:t.padding||8,centerLabel:!1};let p,m;f?{label:p,bbox:m}=await C3(f,"ticket"in t&&t.ticket||"",d):{label:p,bbox:m}=await C3(a,"ticket"in t&&t.ticket||"",d);const{label:g,bbox:y}=await C3(a,"assigned"in t&&t.assigned||"",d);t.width=o;const b=10,x=(t==null?void 0:t.width)||0,T=Math.max(m.height,y.height)/2,S=Math.max(l.height+b*2,(t==null?void 0:t.height)||0)+T,w=-x/2,_=-S/2;c.attr("transform","translate("+(h-x/2)+", "+(-T-l.height/2)+")"),p.attr("transform","translate("+(h-x/2)+", "+(-T+l.height/2)+")"),g.attr("transform","translate("+(h+x/2-y.width-2*s)+", "+(-T+l.height/2)+")");let I;const{rx:N,ry:L}=t,{cssStyles:D}=t;if(t.look==="handDrawn"){const z=Wt.svg(a),$=jt(t,{}),H=N||L?z.path(Ic(w,_,x,S,N||0),$):z.rectangle(w,_,x,S,$);I=a.insert(()=>H,":first-child"),I.attr("class","basic label-container").attr("style",D||null)}else{I=a.insert("rect",":first-child"),I.attr("class","basic label-container __APA__").attr("style",i).attr("rx",N??5).attr("ry",L??5).attr("x",w).attr("y",_).attr("width",x).attr("height",S);const z="priority"in t&&t.priority;if(z){const $=a.append("line"),H=w+2,U=_+Math.floor((N??0)/2),q=_+S-Math.floor((N??0)/2);$.attr("x1",H).attr("y1",U).attr("x2",H).attr("y2",q).attr("stroke-width","4").attr("stroke",GTt(z))}}return Kt(t,I),t.height=S,t.intersect=function(z){return Pt.rect(t,z)},a}k(rY,"kanbanItem");async function nY(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,halfPadding:o,label:a}=await fe(e,t,ce(t)),l=s.width+10*o,c=s.height+8*o,h=.15*l,{cssStyles:u}=t,f=s.width+20,d=s.height+20,p=Math.max(l,f),m=Math.max(c,d);a.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`);let g;const y=`M0 0 
    a${h},${h} 1 0,0 ${p*.25},${-1*m*.1}
    a${h},${h} 1 0,0 ${p*.25},0
    a${h},${h} 1 0,0 ${p*.25},0
    a${h},${h} 1 0,0 ${p*.25},${m*.1}

    a${h},${h} 1 0,0 ${p*.15},${m*.33}
    a${h*.8},${h*.8} 1 0,0 0,${m*.34}
    a${h},${h} 1 0,0 ${-1*p*.15},${m*.33}

    a${h},${h} 1 0,0 ${-1*p*.25},${m*.15}
    a${h},${h} 1 0,0 ${-1*p*.25},0
    a${h},${h} 1 0,0 ${-1*p*.25},0
    a${h},${h} 1 0,0 ${-1*p*.25},${-1*m*.15}

    a${h},${h} 1 0,0 ${-1*p*.1},${-1*m*.33}
    a${h*.8},${h*.8} 1 0,0 0,${-1*m*.34}
    a${h},${h} 1 0,0 ${p*.1},${-1*m*.33}
  H0 V0 Z`;if(t.look==="handDrawn"){const b=Wt.svg(i),x=jt(t,{}),T=b.path(y,x);g=i.insert(()=>T,":first-child"),g.attr("class","basic label-container").attr("style",Hn(u))}else g=i.insert("path",":first-child").attr("class","basic label-container").attr("style",n).attr("d",y);return g.attr("transform",`translate(${-p/2}, ${-m/2})`),Kt(t,g),t.calcIntersect=function(b,x){return Pt.rect(b,x)},t.intersect=function(b){return ht.info("Bang intersect",t,b),Pt.rect(t,b)},i}k(nY,"bang");async function iY(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,halfPadding:o,label:a}=await fe(e,t,ce(t)),l=s.width+2*o,c=s.height+2*o,h=.15*l,u=.25*l,f=.35*l,d=.2*l,{cssStyles:p}=t;let m;const g=`M0 0 
    a${h},${h} 0 0,1 ${l*.25},${-1*l*.1}
    a${f},${f} 1 0,1 ${l*.4},${-1*l*.1}
    a${u},${u} 1 0,1 ${l*.35},${l*.2}

    a${h},${h} 1 0,1 ${l*.15},${c*.35}
    a${d},${d} 1 0,1 ${-1*l*.15},${c*.65}

    a${u},${h} 1 0,1 ${-1*l*.25},${l*.15}
    a${f},${f} 1 0,1 ${-1*l*.5},0
    a${h},${h} 1 0,1 ${-1*l*.25},${-1*l*.15}

    a${h},${h} 1 0,1 ${-1*l*.1},${-1*c*.35}
    a${d},${d} 1 0,1 ${l*.1},${-1*c*.65}
  H0 V0 Z`;if(t.look==="handDrawn"){const y=Wt.svg(i),b=jt(t,{}),x=y.path(g,b);m=i.insert(()=>x,":first-child"),m.attr("class","basic label-container").attr("style",Hn(p))}else m=i.insert("path",":first-child").attr("class","basic label-container").attr("style",n).attr("d",g);return a.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`),m.attr("transform",`translate(${-l/2}, ${-c/2})`),Kt(t,m),t.calcIntersect=function(y,b){return Pt.rect(y,b)},t.intersect=function(y){return ht.info("Cloud intersect",t,y),Pt.rect(t,y)},i}k(iY,"cloud");async function sY(e,t){const{labelStyles:r,nodeStyles:n}=Ut(t);t.labelStyle=r;const{shapeSvg:i,bbox:s,halfPadding:o,label:a}=await fe(e,t,ce(t)),l=s.width+8*o,c=s.height+2*o,h=5,u=`
    M${-l/2} ${c/2-h}
    v${-c+2*h}
    q0,-${h} ${h},-${h}
    h${l-2*h}
    q${h},0 ${h},${h}
    v${c-2*h}
    q0,${h} -${h},${h}
    h${-l+2*h}
    q-${h},0 -${h},-${h}
    Z
  `,f=i.append("path").attr("id","node-"+t.id).attr("class","node-bkg node-"+t.type).attr("style",n).attr("d",u);return i.append("line").attr("class","node-line-").attr("x1",-l/2).attr("y1",c/2).attr("x2",l/2).attr("y2",c/2),a.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`),i.append(()=>a.node()),Kt(t,f),t.calcIntersect=function(d,p){return Pt.rect(d,p)},t.intersect=function(d){return Pt.rect(t,d)},i}k(sY,"defaultMindmapNode");async function oY(e,t){const r={padding:t.padding??0};return ET(e,t,r)}k(oY,"mindmapCircle");var KTt=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:NK},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:BK},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:FK},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:qK},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:aK},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:ET},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:nY},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:iY},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:OK},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:pK},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:SK},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:CK},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:GK},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:wK},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:cK},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:jK},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:QG},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:RK},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:HK},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:zK},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:fK},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:mK},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:nK},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:iK},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:sK},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:TK},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:XK},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:dK},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:UK},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:_K},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:oK},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:lK},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:YK},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:ZK},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:hK},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:KK},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:uK},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:PK},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:EK},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:AK},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:ZG},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:rK},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:WK},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:VK},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:JK},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:DK},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:MK}],YTt=k(()=>{const t=[...Object.entries({state:$K,choice:tK,note:LK,rectWithTitle:IK,labelRect:kK,iconSquare:xK,iconCircle:yK,icon:gK,iconRounded:bK,imageSquare:vK,anchor:JG,kanbanItem:rY,mindmapCircle:oY,defaultMindmapNode:sY,classBox:tY,erBox:LT,requirementBox:eY}),...KTt.flatMap(r=>[r.shortName,..."aliases"in r?r.aliases:[],..."internalAliases"in r?r.internalAliases:[]].map(i=>[i,r.handler]))];return Object.fromEntries(t)},"generateShapeMap"),aY=YTt();function XTt(e){return e in aY}k(XTt,"isValidShape");var cw=new Map;async function lY(e,t,r){let n,i;t.shape==="rect"&&(t.rx&&t.ry?t.shape="roundedRect":t.shape="squareRect");const s=t.shape?aY[t.shape]:void 0;if(!s)throw new Error(`No such shape: ${t.shape}. Please check your syntax.`);if(t.link){let o;r.config.securityLevel==="sandbox"?o="_top":t.linkTarget&&(o=t.linkTarget||"_blank"),n=e.insert("svg:a").attr("xlink:href",t.link).attr("target",o??null),i=await s(n,t,r)}else i=await s(e,t,r),n=i;return t.tooltip&&i.attr("title",t.tooltip),cw.set(t.id,n),t.haveCallback&&n.attr("class",n.attr("class")+" clickable"),n}k(lY,"insertNode");var kLt=k((e,t)=>{cw.set(t.id,e)},"setNodeElem"),CLt=k(()=>{cw.clear()},"clear"),SLt=k(e=>{const t=cw.get(e.id);ht.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const r=8,n=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+n-e.width/2)+", "+(e.y-e.height/2-r)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),n},"positionNode"),JTt=k((e,t,r,n,i,s)=>{t.arrowTypeStart&&bI(e,"start",t.arrowTypeStart,r,n,i,s),t.arrowTypeEnd&&bI(e,"end",t.arrowTypeEnd,r,n,i,s)},"addEdgeMarkers"),ZTt={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},bI=k((e,t,r,n,i,s,o)=>{var u;const a=ZTt[r];if(!a){ht.warn(`Unknown arrow type: ${r}`);return}const l=a.type,h=`${i}_${s}-${l}${t==="start"?"Start":"End"}`;if(o&&o.trim()!==""){const f=o.replace(/[^\dA-Za-z]/g,"_"),d=`${h}_${f}`;if(!document.getElementById(d)){const p=document.getElementById(h);if(p){const m=p.cloneNode(!0);m.id=d,m.querySelectorAll("path, circle, line").forEach(y=>{y.setAttribute("stroke",o),a.fill&&y.setAttribute("fill",o)}),(u=p.parentNode)==null||u.appendChild(m)}}e.attr(`marker-${t}`,`url(${n}#${d})`)}else e.attr(`marker-${t}`,`url(${n}#${h})`)},"addEdgeMarker"),cv=new Map,mn=new Map,TLt=k(()=>{cv.clear(),mn.clear()},"clear"),a2=k(e=>e?e.reduce((r,n)=>r+";"+n,""):"","getLabelStyles"),QTt=k(async(e,t)=>{let r=en(Ze().flowchart.htmlLabels);const{labelStyles:n}=Ut(t);t.labelStyle=n;const i=await Dc(e,t.label,{style:t.labelStyle,useHtmlLabels:r,addSvgBackground:!0,isNode:!1});ht.info("abc82",t,t.labelType);const s=e.insert("g").attr("class","edgeLabel"),o=s.insert("g").attr("class","label").attr("data-id",t.id);o.node().appendChild(i);let a=i.getBBox();if(r){const c=i.children[0],h=$e(i);a=c.getBoundingClientRect(),h.attr("width",a.width),h.attr("height",a.height)}o.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),cv.set(t.id,s),t.width=a.width,t.height=a.height;let l;if(t.startLabelLeft){const c=await vh(t.startLabelLeft,a2(t.labelStyle)),h=e.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");l=u.node().appendChild(c);const f=c.getBBox();u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),mn.get(t.id)||mn.set(t.id,{}),mn.get(t.id).startLeft=h,Pp(l,t.startLabelLeft)}if(t.startLabelRight){const c=await vh(t.startLabelRight,a2(t.labelStyle)),h=e.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");l=h.node().appendChild(c),u.node().appendChild(c);const f=c.getBBox();u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),mn.get(t.id)||mn.set(t.id,{}),mn.get(t.id).startRight=h,Pp(l,t.startLabelRight)}if(t.endLabelLeft){const c=await vh(t.endLabelLeft,a2(t.labelStyle)),h=e.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");l=u.node().appendChild(c);const f=c.getBBox();u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),h.node().appendChild(c),mn.get(t.id)||mn.set(t.id,{}),mn.get(t.id).endLeft=h,Pp(l,t.endLabelLeft)}if(t.endLabelRight){const c=await vh(t.endLabelRight,a2(t.labelStyle)),h=e.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");l=u.node().appendChild(c);const f=c.getBBox();u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),h.node().appendChild(c),mn.get(t.id)||mn.set(t.id,{}),mn.get(t.id).endRight=h,Pp(l,t.endLabelRight)}return i},"insertEdgeLabel");function Pp(e,t){Ze().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}k(Pp,"setTerminalWidth");var t_t=k((e,t)=>{ht.debug("Moving label abc88 ",e.id,e.label,cv.get(e.id),t);let r=t.updatedPath?t.updatedPath:t.originalPath;const n=Ze(),{subGraphTitleTotalMargin:i}=cT(n);if(e.label){const s=cv.get(e.id);let o=e.x,a=e.y;if(r){const l=Gs.calcLabelPosition(r);ht.debug("Moving label "+e.label+" from (",o,",",a,") to (",l.x,",",l.y,") abc88"),t.updatedPath&&(o=l.x,a=l.y)}s.attr("transform",`translate(${o}, ${a+i/2})`)}if(e.startLabelLeft){const s=mn.get(e.id).startLeft;let o=e.x,a=e.y;if(r){const l=Gs.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",r);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(e.startLabelRight){const s=mn.get(e.id).startRight;let o=e.x,a=e.y;if(r){const l=Gs.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",r);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(e.endLabelLeft){const s=mn.get(e.id).endLeft;let o=e.x,a=e.y;if(r){const l=Gs.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",r);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(e.endLabelRight){const s=mn.get(e.id).endRight;let o=e.x,a=e.y;if(r){const l=Gs.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",r);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}},"positionEdgeLabel"),e_t=k((e,t)=>{const r=e.x,n=e.y,i=Math.abs(t.x-r),s=Math.abs(t.y-n),o=e.width/2,a=e.height/2;return i>=o||s>=a},"outsideNode"),r_t=k((e,t,r)=>{ht.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const n=e.x,i=e.y,s=Math.abs(n-r.x),o=e.width/2;let a=r.x<t.x?o-s:o+s;const l=e.height/2,c=Math.abs(t.y-r.y),h=Math.abs(t.x-r.x);if(Math.abs(i-t.y)*o>Math.abs(n-t.x)*l){let u=r.y<t.y?t.y-l-i:i-l-t.y;a=h*u/c;const f={x:r.x<t.x?r.x+a:r.x-h+a,y:r.y<t.y?r.y+c-u:r.y-c+u};return a===0&&(f.x=t.x,f.y=t.y),h===0&&(f.x=t.x),c===0&&(f.y=t.y),ht.debug(`abc89 top/bottom calc, Q ${c}, q ${u}, R ${h}, r ${a}`,f),f}else{r.x<t.x?a=t.x-o-n:a=n-o-t.x;let u=c*a/h,f=r.x<t.x?r.x+h-a:r.x-h+a,d=r.y<t.y?r.y+u:r.y-u;return ht.debug(`sides calc abc89, Q ${c}, q ${u}, R ${h}, r ${a}`,{_x:f,_y:d}),a===0&&(f=t.x,d=t.y),h===0&&(f=t.x),c===0&&(d=t.y),{x:f,y:d}}},"intersection"),xI=k((e,t)=>{ht.warn("abc88 cutPathAtIntersect",e,t);let r=[],n=e[0],i=!1;return e.forEach(s=>{if(ht.info("abc88 checking point",s,t),!e_t(t,s)&&!i){const o=r_t(t,n,s);ht.debug("abc88 inside",s,n,o),ht.debug("abc88 intersection",o,t);let a=!1;r.forEach(l=>{a=a||l.x===o.x&&l.y===o.y}),r.some(l=>l.x===o.x&&l.y===o.y)?ht.warn("abc88 no intersect",o,r):r.push(o),i=!0}else ht.warn("abc88 outside",s,n),n=s,i||r.push(s)}),ht.debug("returning points",r),r},"cutPathAtIntersect");function cY(e){const t=[],r=[];for(let n=1;n<e.length-1;n++){const i=e[n-1],s=e[n],o=e[n+1];(i.x===s.x&&s.y===o.y&&Math.abs(s.x-o.x)>5&&Math.abs(s.y-i.y)>5||i.y===s.y&&s.x===o.x&&Math.abs(s.x-i.x)>5&&Math.abs(s.y-o.y)>5)&&(t.push(s),r.push(n))}return{cornerPoints:t,cornerPointPositions:r}}k(cY,"extractCornerPoints");var vI=k(function(e,t,r){const n=t.x-e.x,i=t.y-e.y,s=Math.sqrt(n*n+i*i),o=r/s;return{x:t.x-o*n,y:t.y-o*i}},"findAdjacentPoint"),n_t=k(function(e){const{cornerPointPositions:t}=cY(e),r=[];for(let n=0;n<e.length;n++)if(t.includes(n)){const i=e[n-1],s=e[n+1],o=e[n],a=vI(i,o,5),l=vI(s,o,5),c=l.x-a.x,h=l.y-a.y;r.push(a);const u=Math.sqrt(2)*2;let f={x:o.x,y:o.y};if(Math.abs(s.x-i.x)>10&&Math.abs(s.y-i.y)>=10){ht.debug("Corner point fixing",Math.abs(s.x-i.x),Math.abs(s.y-i.y));const d=5;o.x===a.x?f={x:c<0?a.x-d+u:a.x+d-u,y:h<0?a.y-u:a.y+u}:f={x:c<0?a.x-u:a.x+u,y:h<0?a.y-d+u:a.y+d-u}}else ht.debug("Corner point skipping fixing",Math.abs(s.x-i.x),Math.abs(s.y-i.y));r.push(f,l)}else r.push(e[n]);return r},"fixCorners"),i_t=k((e,t,r)=>{const n=e-t-r,i=2,s=2,o=i+s,a=Math.floor(n/o),l=Array(a).fill(`${i} ${s}`).join(" ");return`0 ${t} ${l} ${r}`},"generateDashArray"),s_t=k(function(e,t,r,n,i,s,o,a=!1){var z;const{handDrawnSeed:l}=Ze();let c=t.points,h=!1;const u=i;var f=s;const d=[];for(const $ in t.cssCompiledStyles)QU($)||d.push(t.cssCompiledStyles[$]);ht.debug("UIO intersect check",t.points,f.x,u.x),f.intersect&&u.intersect&&!a&&(c=c.slice(1,t.points.length-1),c.unshift(u.intersect(c[0])),ht.debug("Last point UIO",t.start,"-->",t.end,c[c.length-1],f,f.intersect(c[c.length-1])),c.push(f.intersect(c[c.length-1])));const p=btoa(JSON.stringify(c));t.toCluster&&(ht.info("to cluster abc88",r.get(t.toCluster)),c=xI(t.points,r.get(t.toCluster).node),h=!0),t.fromCluster&&(ht.debug("from cluster abc88",r.get(t.fromCluster),JSON.stringify(c,null,2)),c=xI(c.reverse(),r.get(t.fromCluster).node).reverse(),h=!0);let m=c.filter($=>!Number.isNaN($.y));m=n_t(m);let g=vb;switch(g=Wx,t.curve){case"linear":g=Wx;break;case"basis":g=vb;break;case"cardinal":g=nj;break;case"bumpX":g=ZW;break;case"bumpY":g=QW;break;case"catmullRom":g=sj;break;case"monotoneX":g=uj;break;case"monotoneY":g=fj;break;case"natural":g=pj;break;case"step":g=mj;break;case"stepAfter":g=yj;break;case"stepBefore":g=gj;break;default:g=vb}const{x:y,y:b}=L8t(t),x=dSt().x(y).y(b).curve(g);let T;switch(t.thickness){case"normal":T="edge-thickness-normal";break;case"thick":T="edge-thickness-thick";break;case"invisible":T="edge-thickness-invisible";break;default:T="edge-thickness-normal"}switch(t.pattern){case"solid":T+=" edge-pattern-solid";break;case"dotted":T+=" edge-pattern-dotted";break;case"dashed":T+=" edge-pattern-dashed";break;default:T+=" edge-pattern-solid"}let S,w=t.curve==="rounded"?hY(uY(m,t),5):x(m);const _=Array.isArray(t.style)?t.style:[t.style];let I=_.find($=>$==null?void 0:$.startsWith("stroke:")),N=!1;if(t.look==="handDrawn"){const $=Wt.svg(e);Object.assign([],m);const H=$.path(w,{roughness:.3,seed:l});T+=" transition",S=$e(H).select("path").attr("id",t.id).attr("class"," "+T+(t.classes?" "+t.classes:"")).attr("style",_?_.reduce((q,rt)=>q+";"+rt,""):"");let U=S.attr("d");S.attr("d",U),e.node().appendChild(S.node())}else{const $=d.join(";"),H=_?_.reduce((O,te)=>O+te+";",""):"";let U="";t.animate&&(U=" edge-animation-fast"),t.animation&&(U=" edge-animation-"+t.animation);const q=($?$+";"+H+";":H)+";"+(_?_.reduce((O,te)=>O+";"+te,""):"");S=e.append("path").attr("d",w).attr("id",t.id).attr("class"," "+T+(t.classes?" "+t.classes:"")+(U??"")).attr("style",q),I=(z=q.match(/stroke:([^;]+)/))==null?void 0:z[1],N=t.animate===!0||!!t.animation||$.includes("animation");const rt=S.node(),E=typeof rt.getTotalLength=="function"?rt.getTotalLength():0,dt=XD[t.arrowTypeStart]||0,Tt=XD[t.arrowTypeEnd]||0;if(t.look==="neo"&&!N){const te=`stroke-dasharray: ${t.pattern==="dotted"||t.pattern==="dashed"?i_t(E,dt,Tt):`0 ${dt} ${E-dt-Tt} ${Tt}`}; stroke-dashoffset: 0;`;S.attr("style",te+S.attr("style"))}}S.attr("data-edge",!0),S.attr("data-et","edge"),S.attr("data-id",t.id),S.attr("data-points",p),t.showPoints&&m.forEach($=>{e.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",$.x).attr("cy",$.y)});let L="";(Ze().flowchart.arrowMarkerAbsolute||Ze().state.arrowMarkerAbsolute)&&(L=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,L=L.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),ht.info("arrowTypeStart",t.arrowTypeStart),ht.info("arrowTypeEnd",t.arrowTypeEnd),JTt(S,t,L,o,n,I);const D=Math.floor(c.length/2),P=c[D];Gs.isLabelCoordinateInPath(P,S.attr("d"))||(h=!0);let K={};return h&&(K.updatedPath=c),K.originalPath=t.points,K},"insertEdge");function hY(e,t){if(e.length<2)return"";let r="";const n=e.length,i=1e-5;for(let s=0;s<n;s++){const o=e[s],a=e[s-1],l=e[s+1];if(s===0)r+=`M${o.x},${o.y}`;else if(s===n-1)r+=`L${o.x},${o.y}`;else{const c=o.x-a.x,h=o.y-a.y,u=l.x-o.x,f=l.y-o.y,d=Math.hypot(c,h),p=Math.hypot(u,f);if(d<i||p<i){r+=`L${o.x},${o.y}`;continue}const m=c/d,g=h/d,y=u/p,b=f/p,x=m*y+g*b,T=Math.max(-1,Math.min(1,x)),S=Math.acos(T);if(S<i||Math.abs(Math.PI-S)<i){r+=`L${o.x},${o.y}`;continue}const w=Math.min(t/Math.sin(S/2),d/2,p/2),_=o.x-m*w,I=o.y-g*w,N=o.x+y*w,L=o.y+b*w;r+=`L${_},${I}`,r+=`Q${o.x},${o.y} ${N},${L}`}}return r}k(hY,"generateRoundedPath");function G6(e,t){if(!e||!t)return{angle:0,deltaX:0,deltaY:0};const r=t.x-e.x,n=t.y-e.y;return{angle:Math.atan2(n,r),deltaX:r,deltaY:n}}k(G6,"calculateDeltaAndAngle");function uY(e,t){const r=e.map(i=>({...i}));if(e.length>=2&&En[t.arrowTypeStart]){const i=En[t.arrowTypeStart],s=e[0],o=e[1],{angle:a}=G6(s,o),l=i*Math.cos(a),c=i*Math.sin(a);r[0].x=s.x+l,r[0].y=s.y+c}const n=e.length;if(n>=2&&En[t.arrowTypeEnd]){const i=En[t.arrowTypeEnd],s=e[n-1],o=e[n-2],{angle:a}=G6(o,s),l=i*Math.cos(a),c=i*Math.sin(a);r[n-1].x=s.x-l,r[n-1].y=s.y-c}return r}k(uY,"applyMarkerOffsetsToPoints");var o_t=k((e,t,r,n)=>{t.forEach(i=>{k_t[i](e,r,n)})},"insertMarkers"),a_t=k((e,t,r)=>{ht.trace("Making markers for ",r),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),l_t=k((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),c_t=k((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),h_t=k((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),u_t=k((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),f_t=k((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),d_t=k((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),p_t=k((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),m_t=k((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),g_t=k((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneStart").attr("class","marker onlyOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneEnd").attr("class","marker onlyOne "+t).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),y_t=k((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneStart").attr("class","marker zeroOrOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),n.append("path").attr("d","M9,0 L9,18");const i=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+t).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),i.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),b_t=k((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreStart").attr("class","marker oneOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreEnd").attr("class","marker oneOrMore "+t).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),x_t=k((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),n.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const i=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+t).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),i.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),v_t=k((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),w_t=k((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");n.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),n.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),n.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),k_t={extension:a_t,composition:l_t,aggregation:c_t,dependency:h_t,lollipop:u_t,point:f_t,circle:d_t,cross:p_t,barb:m_t,only_one:g_t,zero_or_one:y_t,one_or_more:b_t,zero_or_more:x_t,requirement_arrow:v_t,requirement_contains:w_t},C_t=o_t,S_t={common:r0,getConfig:$n,insertCluster:DTt,insertEdge:s_t,insertEdgeLabel:QTt,insertMarkers:C_t,insertNode:lY,interpolateToCurve:uT,labelHelper:fe,log:ht,positionEdgeLabel:t_t},Tg={},fY=k(e=>{for(const t of e)Tg[t.name]=t},"registerLayoutLoaders"),T_t=k(()=>{fY([{name:"dagre",loader:k(async()=>await X(()=>import("./dagre-6UL2VRFP-Q0DxOnd3.js"),__vite__mapDeps([29,30,31,32,33,34,2])),"loader")},{name:"cose-bilkent",loader:k(async()=>await X(()=>import("./cose-bilkent-S5V4N54A-BF7J2krM.js"),__vite__mapDeps([35,36,2])),"loader")}])},"registerDefaultLayoutLoaders");T_t();var _Lt=k(async(e,t)=>{if(!(e.layoutAlgorithm in Tg))throw new Error(`Unknown layout algorithm: ${e.layoutAlgorithm}`);const r=Tg[e.layoutAlgorithm];return(await r.loader()).render(e,t,S_t,{algorithm:r.algorithm})},"render"),MLt=k((e="",{fallback:t="dagre"}={})=>{if(e in Tg)return e;if(t in Tg)return ht.warn(`Layout algorithm ${e} is not registered. Using ${t} as fallback.`),t;throw new Error(`Both layout algorithms ${e} and ${t} are not registered.`)},"getRegisteredLayoutAlgorithm"),dY="comm",pY="rule",mY="decl",__t="@import",M_t="@namespace",A_t="@keyframes",E_t="@layer",gY=Math.abs,OT=String.fromCharCode;function yY(e){return e.trim()}function Tb(e,t,r){return e.replace(t,r)}function L_t(e,t,r){return e.indexOf(t,r)}function Tf(e,t){return e.charCodeAt(t)|0}function Rd(e,t,r){return e.slice(t,r)}function Do(e){return e.length}function O_t(e){return e.length}function l2(e,t){return t.push(e),e}var hw=1,Pd=1,bY=0,Os=0,Vr=0,s0="";function DT(e,t,r,n,i,s,o,a){return{value:e,root:t,parent:r,type:n,props:i,children:s,line:hw,column:Pd,length:o,return:"",siblings:a}}function D_t(){return Vr}function I_t(){return Vr=Os>0?Tf(s0,--Os):0,Pd--,Vr===10&&(Pd=1,hw--),Vr}function eo(){return Vr=Os<bY?Tf(s0,Os++):0,Pd++,Vr===10&&(Pd=1,hw++),Vr}function Jl(){return Tf(s0,Os)}function _b(){return Os}function uw(e,t){return Rd(s0,e,t)}function _g(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function B_t(e){return hw=Pd=1,bY=Do(s0=e),Os=0,[]}function R_t(e){return s0="",e}function S3(e){return yY(uw(Os-1,K6(e===91?e+2:e===40?e+1:e)))}function P_t(e){for(;(Vr=Jl())&&Vr<33;)eo();return _g(e)>2||_g(Vr)>3?"":" "}function N_t(e,t){for(;--t&&eo()&&!(Vr<48||Vr>102||Vr>57&&Vr<65||Vr>70&&Vr<97););return uw(e,_b()+(t<6&&Jl()==32&&eo()==32))}function K6(e){for(;eo();)switch(Vr){case e:return Os;case 34:case 39:e!==34&&e!==39&&K6(Vr);break;case 40:e===41&&K6(e);break;case 92:eo();break}return Os}function F_t(e,t){for(;eo()&&e+Vr!==57;)if(e+Vr===84&&Jl()===47)break;return"/*"+uw(t,Os-1)+"*"+OT(e===47?e:eo())}function $_t(e){for(;!_g(Jl());)eo();return uw(e,Os)}function z_t(e){return R_t(Mb("",null,null,null,[""],e=B_t(e),0,[0],e))}function Mb(e,t,r,n,i,s,o,a,l){for(var c=0,h=0,u=o,f=0,d=0,p=0,m=1,g=1,y=1,b=0,x="",T=i,S=s,w=n,_=x;g;)switch(p=b,b=eo()){case 40:if(p!=108&&Tf(_,u-1)==58){L_t(_+=Tb(S3(b),"&","&\f"),"&\f",gY(c?a[c-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:_+=S3(b);break;case 9:case 10:case 13:case 32:_+=P_t(p);break;case 92:_+=N_t(_b()-1,7);continue;case 47:switch(Jl()){case 42:case 47:l2(H_t(F_t(eo(),_b()),t,r,l),l),(_g(p||1)==5||_g(Jl()||1)==5)&&Do(_)&&Rd(_,-1,void 0)!==" "&&(_+=" ");break;default:_+="/"}break;case 123*m:a[c++]=Do(_)*y;case 125*m:case 59:case 0:switch(b){case 0:case 125:g=0;case 59+h:y==-1&&(_=Tb(_,/\f/g,"")),d>0&&(Do(_)-u||m===0&&p===47)&&l2(d>32?kI(_+";",n,r,u-1,l):kI(Tb(_," ","")+";",n,r,u-2,l),l);break;case 59:_+=";";default:if(l2(w=wI(_,t,r,c,h,i,a,x,T=[],S=[],u,s),s),b===123)if(h===0)Mb(_,t,w,w,T,s,u,a,S);else{switch(f){case 99:if(Tf(_,3)===110)break;case 108:if(Tf(_,2)===97)break;default:h=0;case 100:case 109:case 115:}h?Mb(e,w,w,n&&l2(wI(e,w,w,0,0,i,a,x,i,T=[],u,S),S),i,S,u,a,n?T:S):Mb(_,w,w,w,[""],S,0,a,S)}}c=h=d=0,m=y=1,x=_="",u=o;break;case 58:u=1+Do(_),d=p;default:if(m<1){if(b==123)--m;else if(b==125&&m++==0&&I_t()==125)continue}switch(_+=OT(b),b*m){case 38:y=h>0?1:(_+="\f",-1);break;case 44:a[c++]=(Do(_)-1)*y,y=1;break;case 64:Jl()===45&&(_+=S3(eo())),f=Jl(),h=u=Do(x=_+=$_t(_b())),b++;break;case 45:p===45&&Do(_)==2&&(m=0)}}return s}function wI(e,t,r,n,i,s,o,a,l,c,h,u){for(var f=i-1,d=i===0?s:[""],p=O_t(d),m=0,g=0,y=0;m<n;++m)for(var b=0,x=Rd(e,f+1,f=gY(g=o[m])),T=e;b<p;++b)(T=yY(g>0?d[b]+" "+x:Tb(x,/&\f/g,d[b])))&&(l[y++]=T);return DT(e,t,r,i===0?pY:a,l,c,h,u)}function H_t(e,t,r,n){return DT(e,t,r,dY,OT(D_t()),Rd(e,2,-2),0,n)}function kI(e,t,r,n,i){return DT(e,t,r,mY,Rd(e,0,n),Rd(e,n+1,-1),n,i)}function Y6(e,t){for(var r="",n=0;n<e.length;n++)r+=t(e[n],n,e,t)||"";return r}function q_t(e,t,r,n){switch(e.type){case E_t:if(e.children.length)break;case __t:case M_t:case mY:return e.return=e.return||e.value;case dY:return"";case A_t:return e.return=e.value+"{"+Y6(e.children,n)+"}";case pY:if(!Do(e.value=e.props.join(",")))return""}return Do(r=Y6(e.children,n))?e.return=e.value+"{"+r+"}":""}var xY="c4",V_t=k(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),W_t=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./c4Diagram-YG6GDRKO-CfEXVNdI.js");return{diagram:t}},__vite__mapDeps([37,38,2]));return{id:xY,diagram:e}},"loader"),j_t={id:xY,detector:V_t,loader:W_t},U_t=j_t,vY="flowchart",G_t=k((e,t)=>{var r,n;return((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="dagre-wrapper"||((n=t==null?void 0:t.flowchart)==null?void 0:n.defaultRenderer)==="elk"?!1:/^\s*graph/.test(e)},"detector"),K_t=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-CMwLndpn.js");return{diagram:t}},__vite__mapDeps([39,40,41,42,43,2]));return{id:vY,diagram:e}},"loader"),Y_t={id:vY,detector:G_t,loader:K_t},X_t=Y_t,wY="flowchart-v2",J_t=k((e,t)=>{var r,n,i;return((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="dagre-d3"?!1:(((n=t==null?void 0:t.flowchart)==null?void 0:n.defaultRenderer)==="elk"&&(t.layout="elk"),/^\s*graph/.test(e)&&((i=t==null?void 0:t.flowchart)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(e))},"detector"),Z_t=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-CMwLndpn.js");return{diagram:t}},__vite__mapDeps([39,40,41,42,43,2]));return{id:wY,diagram:e}},"loader"),Q_t={id:wY,detector:J_t,loader:Z_t},tMt=Q_t,kY="er",eMt=k(e=>/^\s*erDiagram/.test(e),"detector"),rMt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./erDiagram-Q2GNP2WA-BcOWVU02.js");return{diagram:t}},__vite__mapDeps([44,41,42,43,2]));return{id:kY,diagram:e}},"loader"),nMt={id:kY,detector:eMt,loader:rMt},iMt=nMt,CY="gitGraph",sMt=k(e=>/^\s*gitGraph/.test(e),"detector"),oMt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./gitGraphDiagram-NY62KEGX-CgYFIN65.js");return{diagram:t}},__vite__mapDeps([45,46,47,48,31,33,34,2]));return{id:CY,diagram:e}},"loader"),aMt={id:CY,detector:sMt,loader:oMt},lMt=aMt,SY="gantt",cMt=k(e=>/^\s*gantt/.test(e),"detector"),hMt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./ganttDiagram-JELNMOA3-BySR67SD.js");return{diagram:t}},__vite__mapDeps([49,50,51,52,2]));return{id:SY,diagram:e}},"loader"),uMt={id:SY,detector:cMt,loader:hMt},fMt=uMt,TY="info",dMt=k(e=>/^\s*info/.test(e),"detector"),pMt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./infoDiagram-WHAUD3N6-m_PMCZun.js");return{diagram:t}},__vite__mapDeps([53,48,31,33,34,2]));return{id:TY,diagram:e}},"loader"),mMt={id:TY,detector:dMt,loader:pMt},_Y="pie",gMt=k(e=>/^\s*pie/.test(e),"detector"),yMt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./pieDiagram-ADFJNKIX-DPdrmq09.js");return{diagram:t}},__vite__mapDeps([54,46,48,31,33,34,55,56,51,2]));return{id:_Y,diagram:e}},"loader"),bMt={id:_Y,detector:gMt,loader:yMt},MY="quadrantChart",xMt=k(e=>/^\s*quadrantChart/.test(e),"detector"),vMt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./quadrantDiagram-AYHSOK5B-HOVadC5m.js");return{diagram:t}},__vite__mapDeps([57,50,51,52,2]));return{id:MY,diagram:e}},"loader"),wMt={id:MY,detector:xMt,loader:vMt},kMt=wMt,AY="xychart",CMt=k(e=>/^\s*xychart(-beta)?/.test(e),"detector"),SMt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./xychartDiagram-PRI3JC2R-CIHrUl-O.js");return{diagram:t}},__vite__mapDeps([58,51,56,50,52,2]));return{id:AY,diagram:e}},"loader"),TMt={id:AY,detector:CMt,loader:SMt},_Mt=TMt,EY="requirement",MMt=k(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),AMt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./requirementDiagram-UZGBJVZJ-DzMsjeUP.js");return{diagram:t}},__vite__mapDeps([59,41,42,2]));return{id:EY,diagram:e}},"loader"),EMt={id:EY,detector:MMt,loader:AMt},LMt=EMt,LY="sequence",OMt=k(e=>/^\s*sequenceDiagram/.test(e),"detector"),DMt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./sequenceDiagram-WL72ISMW-BtCgL8dC.js");return{diagram:t}},__vite__mapDeps([60,38,47,2]));return{id:LY,diagram:e}},"loader"),IMt={id:LY,detector:OMt,loader:DMt},BMt=IMt,OY="class",RMt=k((e,t)=>{var r;return((r=t==null?void 0:t.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e)},"detector"),PMt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./classDiagram-2ON5EDUG-Bqhq5rZw.js");return{diagram:t}},__vite__mapDeps([61,62,40,41,42,2]));return{id:OY,diagram:e}},"loader"),NMt={id:OY,detector:RMt,loader:PMt},FMt=NMt,DY="classDiagram",$Mt=k((e,t)=>{var r;return/^\s*classDiagram/.test(e)&&((r=t==null?void 0:t.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e)},"detector"),zMt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./classDiagram-v2-WZHVMYZB-Bqhq5rZw.js");return{diagram:t}},__vite__mapDeps([63,62,40,41,42,2]));return{id:DY,diagram:e}},"loader"),HMt={id:DY,detector:$Mt,loader:zMt},qMt=HMt,IY="state",VMt=k((e,t)=>{var r;return((r=t==null?void 0:t.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e)},"detector"),WMt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./stateDiagram-FKZM4ZOC-D52ROeko.js");return{diagram:t}},__vite__mapDeps([64,65,41,42,30,31,32,33,2]));return{id:IY,diagram:e}},"loader"),jMt={id:IY,detector:VMt,loader:WMt},UMt=jMt,BY="stateDiagram",GMt=k((e,t)=>{var r;return!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&((r=t==null?void 0:t.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper")},"detector"),KMt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./stateDiagram-v2-4FDKWEC3-DxljjQ2T.js");return{diagram:t}},__vite__mapDeps([66,65,41,42,2]));return{id:BY,diagram:e}},"loader"),YMt={id:BY,detector:GMt,loader:KMt},XMt=YMt,RY="journey",JMt=k(e=>/^\s*journey/.test(e),"detector"),ZMt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./journeyDiagram-XKPGCS4Q-BHvSxoNw.js");return{diagram:t}},__vite__mapDeps([67,38,40,55,2]));return{id:RY,diagram:e}},"loader"),QMt={id:RY,detector:JMt,loader:ZMt},tAt=QMt,eAt=k((e,t,r)=>{ht.debug(`rendering svg for syntax error
`);const n=kSt(t),i=n.append("g");n.attr("viewBox","0 0 2412 512"),wW(n,100,512,!0),i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw"),PY={draw:eAt},rAt=PY,nAt={db:{},renderer:PY,parser:{parse:k(()=>{},"parse")}},iAt=nAt,NY="flowchart-elk",sAt=k((e,t={})=>{var r;return/^\s*flowchart-elk/.test(e)||/^\s*(flowchart|graph)/.test(e)&&((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="elk"?(t.layout="elk",!0):!1},"detector"),oAt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-CMwLndpn.js");return{diagram:t}},__vite__mapDeps([39,40,41,42,43,2]));return{id:NY,diagram:e}},"loader"),aAt={id:NY,detector:sAt,loader:oAt},lAt=aAt,FY="timeline",cAt=k(e=>/^\s*timeline/.test(e),"detector"),hAt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./timeline-definition-IT6M3QCI-de-Yy3Ep.js");return{diagram:t}},__vite__mapDeps([68,55,2]));return{id:FY,diagram:e}},"loader"),uAt={id:FY,detector:cAt,loader:hAt},fAt=uAt,$Y="mindmap",dAt=k(e=>/^\s*mindmap/.test(e),"detector"),pAt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./mindmap-definition-VGOIOE7T-BVXNonB6.js");return{diagram:t}},__vite__mapDeps([69,41,42,2]));return{id:$Y,diagram:e}},"loader"),mAt={id:$Y,detector:dAt,loader:pAt},gAt=mAt,zY="kanban",yAt=k(e=>/^\s*kanban/.test(e),"detector"),bAt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./kanban-definition-3W4ZIXB7-B83U8Xn5.js");return{diagram:t}},__vite__mapDeps([70,40,2]));return{id:zY,diagram:e}},"loader"),xAt={id:zY,detector:yAt,loader:bAt},vAt=xAt,HY="sankey",wAt=k(e=>/^\s*sankey(-beta)?/.test(e),"detector"),kAt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./sankeyDiagram-TZEHDZUN-Dc4floOj.js");return{diagram:t}},__vite__mapDeps([71,56,51,2]));return{id:HY,diagram:e}},"loader"),CAt={id:HY,detector:wAt,loader:kAt},SAt=CAt,qY="packet",TAt=k(e=>/^\s*packet(-beta)?/.test(e),"detector"),_At=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./diagram-S2PKOQOG-BNNjeyUa.js");return{diagram:t}},__vite__mapDeps([72,46,48,31,33,34,2]));return{id:qY,diagram:e}},"loader"),MAt={id:qY,detector:TAt,loader:_At},VY="radar",AAt=k(e=>/^\s*radar-beta/.test(e),"detector"),EAt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./diagram-QEK2KX5R-B4ZcGvt9.js");return{diagram:t}},__vite__mapDeps([73,46,48,31,33,34,2]));return{id:VY,diagram:e}},"loader"),LAt={id:VY,detector:AAt,loader:EAt},WY="block",OAt=k(e=>/^\s*block(-beta)?/.test(e),"detector"),DAt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./blockDiagram-VD42YOAC-ho0s4FUz.js");return{diagram:t}},__vite__mapDeps([74,40,34,31,30,43,2]));return{id:WY,diagram:e}},"loader"),IAt={id:WY,detector:OAt,loader:DAt},BAt=IAt,jY="architecture",RAt=k(e=>/^\s*architecture/.test(e),"detector"),PAt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./architectureDiagram-VXUJARFQ-CTZx8I-Y.js");return{diagram:t}},__vite__mapDeps([75,46,48,31,33,34,36,2]));return{id:jY,diagram:e}},"loader"),NAt={id:jY,detector:RAt,loader:PAt},FAt=NAt,UY="treemap",$At=k(e=>/^\s*treemap/.test(e),"detector"),zAt=k(async()=>{const{diagram:e}=await X(async()=>{const{diagram:t}=await import("./diagram-PSM6KHXK-DcXwbXbY.js");return{diagram:t}},__vite__mapDeps([76,42,46,48,31,33,34,52,56,51,2]));return{id:UY,diagram:e}},"loader"),HAt={id:UY,detector:$At,loader:zAt},CI=!1,fw=k(()=>{CI||(CI=!0,Nx("error",iAt,e=>e.toLowerCase().trim()==="error"),Nx("---",{db:{clear:k(()=>{},"clear")},styles:{},renderer:{draw:k(()=>{},"draw")},parser:{parse:k(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:k(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),l6(lAt,gAt,FAt),l6(U_t,vAt,qMt,FMt,iMt,fMt,mMt,bMt,LMt,BMt,tMt,X_t,fAt,lMt,XMt,UMt,tAt,kMt,SAt,MAt,_Mt,BAt,LAt,HAt))},"addDiagrams"),qAt=k(async()=>{ht.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(hu).map(async([r,{detector:n,loader:i}])=>{if(i)try{f6(r)}catch{try{const{diagram:s,id:o}=await i();Nx(o,s,n)}catch(s){throw ht.error(`Failed to load external diagram with key ${r}. Removing from detectors.`),delete hu[r],s}}}))).filter(r=>r.status==="rejected");if(t.length>0){ht.error(`Failed to load ${t.length} external diagrams`);for(const r of t)ht.error(r);throw new Error(`Failed to load ${t.length} external diagrams`)}},"loadRegisteredDiagrams"),VAt="graphics-document document";function GY(e,t){e.attr("role",VAt),t!==""&&e.attr("aria-roledescription",t)}k(GY,"setA11yDiagramInfo");function KY(e,t,r,n){if(e.insert!==void 0){if(r){const i=`chart-desc-${n}`;e.attr("aria-describedby",i),e.insert("desc",":first-child").attr("id",i).text(r)}if(t){const i=`chart-title-${n}`;e.attr("aria-labelledby",i),e.insert("title",":first-child").attr("id",i).text(t)}}}k(KY,"addSVGa11yTitleDescription");var Gh,X6=(Gh=class{constructor(t,r,n,i,s){this.type=t,this.text=r,this.db=n,this.parser=i,this.renderer=s}static async fromText(t,r={}){var c,h;const n=$n(),i=N9(t,n);t=e9t(t)+`
`;try{f6(i)}catch{const u=Z3t(i);if(!u)throw new cW(`Diagram ${i} not found.`);const{id:f,diagram:d}=await u();Nx(f,d)}const{db:s,parser:o,renderer:a,init:l}=f6(i);return o.parser&&(o.parser.yy=s),(c=s.clear)==null||c.call(s),l==null||l(n),r.title&&((h=s.setDiagramTitle)==null||h.call(s,r.title)),await o.parse(t),new Gh(i,t,s,o,a)}async render(t,r){await this.renderer.draw(this.text,t,r,this)}getParser(){return this.parser}getType(){return this.type}},k(Gh,"Diagram"),Gh),SI=[],WAt=k(()=>{SI.forEach(e=>{e()}),SI=[]},"attachFunctions"),jAt=k(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function YY(e){const t=e.match(lW);if(!t)return{text:e,metadata:{}};let r=E8t(t[1],{schema:A8t})??{};r=typeof r=="object"&&!Array.isArray(r)?r:{};const n={};return r.displayMode&&(n.displayMode=r.displayMode.toString()),r.title&&(n.title=r.title.toString()),r.config&&(n.config=r.config),{text:e.slice(t[0].length),metadata:n}}k(YY,"extractFrontMatter");var UAt=k(e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,r,n)=>"<"+r+n.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),GAt=k(e=>{const{text:t,metadata:r}=YY(e),{displayMode:n,title:i,config:s={}}=r;return n&&(s.gantt||(s.gantt={}),s.gantt.displayMode=n),{title:i,config:s,text:t}},"processFrontmatter"),KAt=k(e=>{const t=Gs.detectInit(e)??{},r=Gs.detectDirective(e,"wrap");return Array.isArray(r)?t.wrap=r.some(({type:n})=>n==="wrap"):(r==null?void 0:r.type)==="wrap"&&(t.wrap=!0),{text:q8t(e),directive:t}},"processDirectives");function IT(e){const t=UAt(e),r=GAt(t),n=KAt(r.text),i=gT(r.config,n.directive);return e=jAt(n.text),{code:e,title:r.title,config:i}}k(IT,"preprocessDiagram");function XY(e){const t=new TextEncoder().encode(e),r=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(r)}k(XY,"toBase64");var YAt=5e4,XAt="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",JAt="sandbox",ZAt="loose",QAt="http://www.w3.org/2000/svg",tEt="http://www.w3.org/1999/xlink",eEt="http://www.w3.org/1999/xhtml",rEt="100%",nEt="100%",iEt="border:0;margin:0;",sEt="margin:0",oEt="allow-top-navigation-by-user-activation allow-popups",aEt='The "iframe" tag is not supported by your browser.',lEt=["foreignobject"],cEt=["dominant-baseline"];function BT(e){const t=IT(e);return Rx(),pkt(t.config??{}),t}k(BT,"processAndSetConfigs");async function JY(e,t){fw();try{const{code:r,config:n}=BT(e);return{diagramType:(await QY(r)).type,config:n}}catch(r){if(t!=null&&t.suppressErrors)return!1;throw r}}k(JY,"parse");var TI=k((e,t,r=[])=>`
.${e} ${t} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),hEt=k((e,t=new Map)=>{var n;let r="";if(e.themeCSS!==void 0&&(r+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){const a=e.htmlLabels??((n=e.flowchart)==null?void 0:n.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(l=>{f_(l.styles)||a.forEach(c=>{r+=TI(l.id,c,l.styles)}),f_(l.textStyles)||(r+=TI(l.id,"tspan",((l==null?void 0:l.textStyles)||[]).map(c=>c.replace("color","fill"))))})}return r},"createCssStyles"),uEt=k((e,t,r,n)=>{const i=hEt(e,r),s=Bkt(t,i,e.themeVariables);return Y6(z_t(`${n}{${s}}`),q_t)},"createUserStyles"),fEt=k((e="",t,r)=>{let n=e;return!r&&!t&&(n=n.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),n=Au(n),n=n.replace(/<br>/g,"<br/>"),n},"cleanUpSvgCode"),dEt=k((e="",t)=>{var i,s;const r=(s=(i=t==null?void 0:t.viewBox)==null?void 0:i.baseVal)!=null&&s.height?t.viewBox.baseVal.height+"px":nEt,n=XY(`<body style="${sEt}">${e}</body>`);return`<iframe style="width:${rEt};height:${r};${iEt}" src="data:text/html;charset=UTF-8;base64,${n}" sandbox="${oEt}">
  ${aEt}
</iframe>`},"putIntoIFrame"),_I=k((e,t,r,n,i)=>{const s=e.append("div");s.attr("id",r),n&&s.attr("style",n);const o=s.append("svg").attr("id",t).attr("width","100%").attr("xmlns",QAt);return i&&o.attr("xmlns:xlink",i),o.append("g"),e},"appendDivSvgG");function J6(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}k(J6,"sandboxedIframe");var pEt=k((e,t,r,n)=>{var i,s,o;(i=e.getElementById(t))==null||i.remove(),(s=e.getElementById(r))==null||s.remove(),(o=e.getElementById(n))==null||o.remove()},"removeExistingElements"),mEt=k(async function(e,t,r){var P,K,z,$,H,U;fw();const n=BT(t);t=n.code;const i=$n();ht.debug(i),t.length>((i==null?void 0:i.maxTextSize)??YAt)&&(t=XAt);const s="#"+e,o="i"+e,a="#"+o,l="d"+e,c="#"+l,h=k(()=>{const rt=$e(f?a:c).node();rt&&"remove"in rt&&rt.remove()},"removeTempElements");let u=$e("body");const f=i.securityLevel===JAt,d=i.securityLevel===ZAt,p=i.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),f){const q=J6($e(r),o);u=$e(q.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=$e(r);_I(u,e,l,`font-family: ${p}`,tEt)}else{if(pEt(document,e,l,o),f){const q=J6($e("body"),o);u=$e(q.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=$e("body");_I(u,e,l)}let m,g;try{m=await X6.fromText(t,{title:n.title})}catch(q){if(i.suppressErrorRendering)throw h(),q;m=await X6.fromText("error"),g=q}const y=u.select(c).node(),b=m.type,x=y.firstChild,T=x.firstChild,S=(K=(P=m.renderer).getClasses)==null?void 0:K.call(P,t,m),w=uEt(i,b,S,s),_=document.createElement("style");_.innerHTML=w,x.insertBefore(_,T);try{await m.renderer.draw(t,e,vD.version,m)}catch(q){throw i.suppressErrorRendering?h():rAt.draw(t,e,vD.version),q}const I=u.select(`${c} svg`),N=($=(z=m.db).getAccTitle)==null?void 0:$.call(z),L=(U=(H=m.db).getAccDescription)==null?void 0:U.call(H);tX(b,I,N,L),u.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",eEt);let D=u.select(c).node().innerHTML;if(ht.debug("config.arrowMarkerAbsolute",i.arrowMarkerAbsolute),D=fEt(D,f,en(i.arrowMarkerAbsolute)),f){const q=u.select(c+" svg").node();D=dEt(D,q)}else d||(D=cn.sanitize(D,{ADD_TAGS:lEt,ADD_ATTR:cEt,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(WAt(),g)throw g;return h(),{diagramType:b,svg:D,bindFunctions:m.db.bindFunctions}},"render");function ZY(e={}){var n;const t=Zr({},e);t!=null&&t.fontFamily&&!((n=t.themeVariables)!=null&&n.fontFamily)&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),fkt(t),t!=null&&t.theme&&t.theme in Xa?t.themeVariables=Xa[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=Xa.default.getThemeVariables(t.themeVariables));const r=typeof t=="object"?ukt(t):pW();P9(r.logLevel),fw()}k(ZY,"initialize");var QY=k((e,t={})=>{const{code:r}=IT(e);return X6.fromText(r,t)},"getDiagramFromText");function tX(e,t,r,n){GY(t,e),KY(t,r,n,t.attr("id"))}k(tX,"addA11yInfo");var mu=Object.freeze({render:mEt,parse:JY,getDiagramFromText:QY,initialize:ZY,getConfig:$n,setConfig:mW,getSiteConfig:pW,updateSiteConfig:dkt,reset:k(()=>{Rx()},"reset"),globalReset:k(()=>{Rx(Ed)},"globalReset"),defaultConfig:Ed});P9($n().logLevel);Rx($n());var gEt=k((e,t,r)=>{ht.warn(e),mT(e)?(r&&r(e.str,e.hash),t.push({...e,message:e.str,error:e})):(r&&r(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),eX=k(async function(e={querySelector:".mermaid"}){try{await yEt(e)}catch(t){if(mT(t)&&ht.error(t.str),es.parseError&&es.parseError(t),!e.suppressErrors)throw ht.error("Use the suppressErrors option to suppress these errors"),t}},"run"),yEt=k(async function({postRenderCallback:e,querySelector:t,nodes:r}={querySelector:".mermaid"}){const n=mu.getConfig();ht.debug(`${e?"":"No "}Callback function found`);let i;if(r)i=r;else if(t)i=document.querySelectorAll(t);else throw new Error("Nodes and querySelector are both undefined");ht.debug(`Found ${i.length} diagrams`),(n==null?void 0:n.startOnLoad)!==void 0&&(ht.debug("Start On Load: "+(n==null?void 0:n.startOnLoad)),mu.updateSiteConfig({startOnLoad:n==null?void 0:n.startOnLoad}));const s=new Gs.InitIDGenerator(n.deterministicIds,n.deterministicIDSeed);let o;const a=[];for(const l of Array.from(i)){if(ht.info("Rendering diagram: "+l.id),l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const c=`mermaid-${s.next()}`;o=l.innerHTML,o=kG(Gs.entityDecode(o)).trim().replace(/<br\s*\/?>/gi,"<br/>");const h=Gs.detectInit(o);h&&ht.debug("Detected early reinit: ",h);try{const{svg:u,bindFunctions:f}=await sX(c,o,l);l.innerHTML=u,e&&await e(c),f&&f(l)}catch(u){gEt(u,a,es.parseError)}}if(a.length>0)throw a[0]},"runThrowsErrors"),rX=k(function(e){mu.initialize(e)},"initialize"),bEt=k(async function(e,t,r){ht.warn("mermaid.init is deprecated. Please use run instead."),e&&rX(e);const n={postRenderCallback:r,querySelector:".mermaid"};typeof t=="string"?n.querySelector=t:t&&(t instanceof HTMLElement?n.nodes=[t]:n.nodes=t),await eX(n)},"init"),xEt=k(async(e,{lazyLoad:t=!0}={})=>{fw(),l6(...e),t===!1&&await qAt()},"registerExternalDiagrams"),nX=k(function(){if(es.startOnLoad){const{startOnLoad:e}=mu.getConfig();e&&es.run().catch(t=>ht.error("Mermaid failed to initialize",t))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",nX,!1);var vEt=k(function(e){es.parseError=e},"setParseErrorHandler"),hv=[],T3=!1,iX=k(async()=>{if(!T3){for(T3=!0;hv.length>0;){const e=hv.shift();if(e)try{await e()}catch(t){ht.error("Error executing queue",t)}}T3=!1}},"executeQueue"),wEt=k(async(e,t)=>new Promise((r,n)=>{const i=k(()=>new Promise((s,o)=>{mu.parse(e,t).then(a=>{s(a),r(a)},a=>{var l;ht.error("Error parsing",a),(l=es.parseError)==null||l.call(es,a),o(a),n(a)})}),"performCall");hv.push(i),iX().catch(n)}),"parse"),sX=k((e,t,r)=>new Promise((n,i)=>{const s=k(()=>new Promise((o,a)=>{mu.render(e,t,r).then(l=>{o(l),n(l)},l=>{var c;ht.error("Error parsing",l),(c=es.parseError)==null||c.call(es,l),a(l),i(l)})}),"performCall");hv.push(s),iX().catch(i)}),"render"),kEt=k(()=>Object.keys(hu).map(e=>({id:e})),"getRegisteredDiagramsMetadata"),es={startOnLoad:!0,mermaidAPI:mu,parse:wEt,render:sX,init:bEt,run:eX,registerExternalDiagrams:xEt,registerLayoutLoaders:fY,initialize:rX,parseError:void 0,contentLoaded:nX,setParseErrorHandler:vEt,detectType:N9,registerIconPacks:sTt,getRegisteredDiagramsMetadata:kEt},Ab=es;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */Ab.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose",fontFamily:"var(--font-mono)"});class CEt{constructor(t){gt(this,"observer",null);gt(this,"themeObserver",null);gt(this,"container");gt(this,"blocks",new Map);gt(this,"idCounter",0);gt(this,"currentTheme","light");gt(this,"scanDebounceTimer",null);gt(this,"isScanning",!1);this.container=t,this.detectTheme()}detectTheme(){const t=document.body.getAttribute("data-theme")||document.documentElement.getAttribute("data-theme")||"light";this.currentTheme=t.startsWith("dark")?"dark":"light",this.updateMermaidTheme()}updateMermaidTheme(){const t=this.currentTheme==="dark";Ab.initialize({startOnLoad:!1,securityLevel:"loose",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif',theme:"base",themeVariables:t?{primaryColor:"#3b82f6",primaryTextColor:"#f8fafc",primaryBorderColor:"#475569",secondaryColor:"#1e293b",secondaryTextColor:"#e2e8f0",secondaryBorderColor:"#334155",tertiaryColor:"#0f172a",tertiaryTextColor:"#cbd5e1",tertiaryBorderColor:"#1e293b",lineColor:"#64748b",textColor:"#e2e8f0",mainBkg:"#1e293b",nodeBorder:"#475569",clusterBkg:"#0f172a",clusterBorder:"#334155",titleColor:"#f1f5f9",edgeLabelBackground:"#1e293b",nodeTextColor:"#f1f5f9",nodeBkg:"#1e293b",actorBkg:"#1e293b",actorBorder:"#475569",actorTextColor:"#f1f5f9",actorLineColor:"#64748b",signalColor:"#64748b",signalTextColor:"#e2e8f0",labelBoxBkgColor:"#1e293b",labelBoxBorderColor:"#475569",labelTextColor:"#e2e8f0",loopTextColor:"#94a3b8",noteBkgColor:"#334155",noteBorderColor:"#475569",noteTextColor:"#e2e8f0",activationBkgColor:"#334155",activationBorderColor:"#475569",classText:"#f1f5f9",labelColor:"#e2e8f0",altBackground:"#0f172a",sectionBkgColor:"#1e293b",altSectionBkgColor:"#0f172a",gridColor:"#334155",todayLineColor:"#3b82f6"}:{primaryColor:"#3b82f6",primaryTextColor:"#1e293b",primaryBorderColor:"#cbd5e1",secondaryColor:"#f1f5f9",secondaryTextColor:"#334155",secondaryBorderColor:"#e2e8f0",tertiaryColor:"#ffffff",tertiaryTextColor:"#475569",tertiaryBorderColor:"#f1f5f9",lineColor:"#94a3b8",textColor:"#334155",mainBkg:"#ffffff",nodeBorder:"#cbd5e1",clusterBkg:"#f8fafc",clusterBorder:"#e2e8f0",titleColor:"#1e293b",edgeLabelBackground:"#ffffff",nodeTextColor:"#1e293b",nodeBkg:"#ffffff",actorBkg:"#ffffff",actorBorder:"#cbd5e1",actorTextColor:"#1e293b",actorLineColor:"#94a3b8",signalColor:"#94a3b8",signalTextColor:"#334155",labelBoxBkgColor:"#ffffff",labelBoxBorderColor:"#e2e8f0",labelTextColor:"#334155",loopTextColor:"#64748b",noteBkgColor:"#fef3c7",noteBorderColor:"#fcd34d",noteTextColor:"#92400e",activationBkgColor:"#f1f5f9",activationBorderColor:"#cbd5e1",classText:"#1e293b",labelColor:"#334155",altBackground:"#f8fafc",sectionBkgColor:"#ffffff",altSectionBkgColor:"#f8fafc",gridColor:"#e2e8f0",todayLineColor:"#3b82f6"}})}start(){setTimeout(()=>this.scanForMermaidBlocks(),500),this.observer=new MutationObserver(()=>{this.debouncedScan()}),this.observer.observe(this.container,{childList:!0,subtree:!0,characterData:!0}),this.themeObserver=new MutationObserver(()=>{const r=(document.body.getAttribute("data-theme")||"light").startsWith("dark");(r&&this.currentTheme!=="dark"||!r&&this.currentTheme!=="light")&&(this.currentTheme=r?"dark":"light",this.updateMermaidTheme(),this.reRenderAllDiagrams())}),this.themeObserver.observe(document.body,{attributes:!0,attributeFilter:["data-theme"]})}debouncedScan(){this.scanDebounceTimer!==null&&clearTimeout(this.scanDebounceTimer),this.scanDebounceTimer=window.setTimeout(()=>{this.scanDebounceTimer=null,this.scanForMermaidBlocks()},300)}stop(){this.observer&&(this.observer.disconnect(),this.observer=null),this.themeObserver&&(this.themeObserver.disconnect(),this.themeObserver=null),this.scanDebounceTimer!==null&&clearTimeout(this.scanDebounceTimer);for(const[,t]of this.blocks)t.wrapper.remove();this.blocks.clear()}hashCode(t){let r=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);r=(r<<5)-r+i,r=r&r}return"mermaid-"+Math.abs(r).toString(36)}async scanForMermaidBlocks(){if(!this.isScanning){this.isScanning=!0;try{let t=this.container.querySelectorAll('[data-type="code_block"]');t.length===0&&(t=this.container.querySelectorAll('pre:has(.cm-editor), .code-block, [data-node-type="code_block"]')),t.length===0&&(t=this.container.querySelectorAll("div.cm-editor")),console.log("[Mermaid] Found code blocks:",t.length);const r=new Set;for(const n of t){const i=n,s=i.nextElementSibling;if(s!=null&&s.classList.contains("mermaid-diagram-wrapper")){const h=this.extractCode(i),u=this.hashCode(h);r.add(u);const f=this.blocks.get(u);f&&f.code!==h&&(f.code=h,f.showingSource||await this.updateDiagram(f));continue}const o=this.getCodeBlockLanguage(i);if(console.log("[Mermaid] Code block language:",o,"attrs:",i.getAttribute("data-language")),o!=="mermaid")continue;const a=this.extractCode(i);if(!a.trim())continue;const l=this.hashCode(a);if(r.add(l),this.blocks.has(l))continue;const c=await this.createDiagramWrapper(a,l);c&&(i.insertAdjacentElement("afterend",c),i.style.display="none",this.blocks.set(l,{code:a,showingSource:!1,diagramId:l,wrapper:c}))}for(const[n,i]of this.blocks)r.has(n)||(i.wrapper.remove(),this.blocks.delete(n))}finally{this.isScanning=!1}}}getCodeBlockLanguage(t){const r=t.getAttribute("data-language");if(r)return r.toLowerCase();const n=t.className.split(" ");for(const s of n)if(s.startsWith("language-"))return s.replace("language-","").toLowerCase();const i=this.extractCode(t);return this.looksLikeMermaid(i)?"mermaid":""}looksLikeMermaid(t){const r=t.trim().toLowerCase(),i=["graph ",`graph
`,"graph	","flowchart ",`flowchart
`,"sequencediagram","classdiagram","statediagram","erdiagram","gantt","pie","journey","gitgraph","mindmap","timeline","quadrantchart","sankey","xychart","block-beta"].some(s=>r.startsWith(s));return console.log("[Mermaid] looksLikeMermaid check:",r.substring(0,50),"=> result:",i),i}extractCode(t){const r=t.querySelectorAll(".cm-line");if(r.length>0){const o=[];return r.forEach(a=>{o.push(a.textContent||"")}),o.join(`
`)}const n=t.querySelector(".cm-content");if(n)return n.innerText||n.textContent||"";const i=t.querySelector("code");if(i)return i.innerText||i.textContent||"";const s=t.querySelector("pre");return s?s.innerText||s.textContent||"":t.innerText||t.textContent||""}async createDiagramWrapper(t,r){const n=document.createElement("div");n.className="mermaid-diagram-wrapper",n.setAttribute("data-mermaid-id",r);try{const i=`${r}-${++this.idCounter}`,{svg:s}=await Ab.render(i,t);n.innerHTML=`
        <div class="mermaid-toolbar">
          <button class="mermaid-toggle-source" title="Show source code">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="16 18 22 12 16 6"></polyline>
              <polyline points="8 6 2 12 8 18"></polyline>
            </svg>
          </button>
        </div>
        <div class="mermaid-diagram">${s}</div>
        <div class="mermaid-source hidden">
          <pre><code>${this.escapeHtml(t)}</code></pre>
        </div>
      `;const o=n.querySelector(".mermaid-toggle-source"),a=n.querySelector(".mermaid-diagram"),l=n.querySelector(".mermaid-source");return o.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation();const h=this.blocks.get(r);h&&(h.showingSource=!h.showingSource,h.showingSource?(a.classList.add("hidden"),l.classList.remove("hidden"),o.classList.add("active"),o.title="Show diagram"):(a.classList.remove("hidden"),l.classList.add("hidden"),o.classList.remove("active"),o.title="Show source code"))}),n}catch(i){return console.error("Failed to render mermaid diagram:",i),n.innerHTML=`
        <div class="mermaid-error">
          <div class="mermaid-error-header">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="8" x2="12" y2="12"></line>
              <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
            <span>Mermaid syntax error</span>
          </div>
          <pre><code>${this.escapeHtml(t)}</code></pre>
        </div>
      `,n}}async updateDiagram(t){try{const r=`${t.diagramId}-${++this.idCounter}`,{svg:n}=await Ab.render(r,t.code),i=t.wrapper.querySelector(".mermaid-diagram");i&&(i.innerHTML=n);const s=t.wrapper.querySelector(".mermaid-source code");s&&(s.innerHTML=this.escapeHtml(t.code))}catch(r){console.error("Failed to update mermaid diagram:",r)}}async reRenderAllDiagrams(){for(const[,t]of this.blocks)await this.updateDiagram(t)}escapeHtml(t){const r=document.createElement("div");return r.textContent=t,r.innerHTML}}class SEt{constructor(t){gt(this,"container");gt(this,"isRepo",!1);gt(this,"status",null);gt(this,"onInitRepo",null);gt(this,"onCloneRepo",null);gt(this,"onTogglePanel",null);this.container=t,this.render()}setOnInitRepo(t){this.onInitRepo=t}setOnCloneRepo(t){this.onCloneRepo=t}setOnTogglePanel(t){this.onTogglePanel=t}async refresh(){try{const t=await Le.getGitStatus();this.isRepo=t.isRepo,this.status=t.status||null,this.render()}catch(t){console.error("Failed to get git status:",t),this.isRepo=!1,this.status=null,this.render()}}update(t){this.isRepo=t.isRepo,this.status=t.status||null,this.render()}render(){if(!this.isRepo){this.container.innerHTML=`
        <button class="git-init-btn" title="Initialize Git Repository">
          <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
            <path d="M15.698 7.287L8.712.302a1.03 1.03 0 00-1.457 0l-1.45 1.45 1.84 1.84a1.223 1.223 0 011.55 1.56l1.773 1.774a1.224 1.224 0 11-.733.692L8.52 5.902v4.253a1.225 1.225 0 11-1.008-.036V5.832a1.224 1.224 0 01-.665-1.605L5.02 2.401.302 7.12a1.03 1.03 0 000 1.457l6.986 6.986a1.03 1.03 0 001.457 0l6.953-6.953a1.03 1.03 0 000-1.457"/>
          </svg>
          <span>Init Git</span>
        </button>
        <div class="git-actions">
          <button class="git-action-btn git-clone-btn" title="Clone a remote repository">
            <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
              <path d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/>
            </svg>
            Clone
          </button>
        </div>
      `;const h=this.container.querySelector(".git-init-btn");h==null||h.addEventListener("click",()=>this.handleInitRepo());const u=this.container.querySelector(".git-clone-btn");u==null||u.addEventListener("click",()=>this.handleCloneRepo());return}if(!this.status){this.container.innerHTML="";return}const{branch:t,ahead:r,behind:n,files:i,hasConflicts:s,isClean:o}=this.status;let a="";(r>0||n>0)&&(a='<span class="git-sync">',r>0&&(a+=`<span class="git-ahead" title="${r} commit(s) ahead">${r}</span>`),n>0&&(a+=`<span class="git-behind" title="${n} commit(s) behind">${n}</span>`),a+="</span>");let l="";s?l='<span class="git-status-indicator git-conflict" title="Merge conflicts">!</span>':o||(l=`<span class="git-status-indicator git-dirty" title="${i.length} changed file(s)"></span>`),this.container.innerHTML=`
      <div class="git-branch clickable" title="Click to toggle Git panel">
        <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
          <path d="M15.698 7.287L8.712.302a1.03 1.03 0 00-1.457 0l-1.45 1.45 1.84 1.84a1.223 1.223 0 011.55 1.56l1.773 1.774a1.224 1.224 0 11-.733.692L8.52 5.902v4.253a1.225 1.225 0 11-1.008-.036V5.832a1.224 1.224 0 01-.665-1.605L5.02 2.401.302 7.12a1.03 1.03 0 000 1.457l6.986 6.986a1.03 1.03 0 001.457 0l6.953-6.953a1.03 1.03 0 000-1.457"/>
        </svg>
        <span class="git-branch-name">${t}</span>
        ${a}
        ${l}
      </div>
    `;const c=this.container.querySelector(".git-branch");c==null||c.addEventListener("click",()=>{this.onTogglePanel&&this.onTogglePanel()})}async handleInitRepo(){try{const t=await Le.initGitRepo();this.update(t),this.onInitRepo&&this.onInitRepo()}catch(t){console.error("Failed to initialize git repository:",t),alert("Failed to initialize git repository: "+t.message)}}handleCloneRepo(){this.onCloneRepo&&this.onCloneRepo()}getStatus(){return this.status}isGitRepo(){return this.isRepo}}class TEt{constructor(){gt(this,"dialog",null);gt(this,"onSuccess",null);gt(this,"handleEscape",t=>{t.key==="Escape"&&this.close()})}show(t){this.onSuccess=t,this.createDialog()}createDialog(){this.close(),this.dialog=document.createElement("div"),this.dialog.className="modal",this.dialog.innerHTML=`
            <div class="modal-backdrop"></div>
            <div class="modal-content clone-dialog">
                <h3>Clone Repository</h3>
                <div class="clone-form">
                    <div class="form-group">
                        <label for="clone-url">Repository URL</label>
                        <input type="text" id="clone-url" placeholder="https://github.com/user/repo.git or git@github.com:user/repo.git" />
                        <span id="url-validation" class="validation-message"></span>
                    </div>

                    <div id="auth-section" class="auth-section hidden">
                        <div class="auth-type-indicator">
                            <span id="auth-type-label"></span>
                        </div>

                        <div id="ssh-auth" class="hidden">
                            <div class="form-group">
                                <label for="ssh-key-path">SSH Key Path (optional)</label>
                                <input type="text" id="ssh-key-path" placeholder="~/.ssh/id_ed25519" />
                                <span class="form-hint">Leave empty to use default keys</span>
                            </div>
                        </div>

                        <div id="https-auth" class="hidden">
                            <div class="form-group">
                                <label for="https-username">Username</label>
                                <input type="text" id="https-username" placeholder="Username or email" />
                            </div>
                            <div class="form-group">
                                <label for="https-password">Password / Token</label>
                                <input type="password" id="https-password" placeholder="Personal access token recommended" />
                                <span class="form-hint">Use a personal access token for better security</span>
                            </div>
                        </div>
                    </div>

                    <div id="clone-progress" class="clone-progress hidden">
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                        <span class="progress-text">Cloning...</span>
                    </div>

                    <div id="clone-error" class="error-message hidden"></div>
                </div>

                <div class="modal-actions">
                    <button id="cancel-clone" class="btn-secondary">Cancel</button>
                    <button id="confirm-clone" class="btn-primary" disabled>Clone</button>
                </div>
            </div>
        `,document.body.appendChild(this.dialog),this.attachEventListeners();const t=this.dialog.querySelector("#clone-url");t==null||t.focus()}attachEventListeners(){if(!this.dialog)return;const t=this.dialog.querySelector(".modal-backdrop"),r=this.dialog.querySelector("#cancel-clone"),n=this.dialog.querySelector("#confirm-clone"),i=this.dialog.querySelector("#clone-url");t==null||t.addEventListener("click",()=>this.close()),r==null||r.addEventListener("click",()=>this.close()),n==null||n.addEventListener("click",()=>this.doClone());let s;i==null||i.addEventListener("input",()=>{clearTimeout(s),s=window.setTimeout(()=>this.validateURL(),300)}),i==null||i.addEventListener("keydown",o=>{o.key==="Enter"&&!n.disabled&&this.doClone()}),document.addEventListener("keydown",this.handleEscape)}async validateURL(){if(!this.dialog)return;const t=this.dialog.querySelector("#clone-url"),r=this.dialog.querySelector("#url-validation"),n=this.dialog.querySelector("#auth-section"),i=this.dialog.querySelector("#auth-type-label"),s=this.dialog.querySelector("#ssh-auth"),o=this.dialog.querySelector("#https-auth"),a=this.dialog.querySelector("#confirm-clone"),l=t.value.trim();if(!l){r.textContent="",r.className="validation-message",n.classList.add("hidden"),a.disabled=!0;return}try{const h=await(await fetch(`/api/git/validate-url?url=${encodeURIComponent(l)}`)).json();if(!h.success)throw new Error(h.error);const u=h.data;u.valid?(r.textContent=" Valid repository URL",r.className="validation-message valid",a.disabled=!1,n.classList.remove("hidden"),u.authType==="ssh"?(i.textContent="SSH Authentication",s.classList.remove("hidden"),o.classList.add("hidden")):u.authType==="https"?(i.textContent="HTTPS Authentication (optional)",s.classList.add("hidden"),o.classList.remove("hidden")):n.classList.add("hidden")):(r.textContent=u.error||"Invalid URL",r.className="validation-message invalid",n.classList.add("hidden"),a.disabled=!0)}catch{r.textContent="Failed to validate URL",r.className="validation-message invalid",a.disabled=!0}}async doClone(){if(!this.dialog)return;const t=this.dialog.querySelector("#clone-url"),r=this.dialog.querySelector("#ssh-key-path"),n=this.dialog.querySelector("#https-username"),i=this.dialog.querySelector("#https-password"),s=this.dialog.querySelector("#clone-progress"),o=this.dialog.querySelector("#clone-error"),a=this.dialog.querySelector("#confirm-clone"),l=this.dialog.querySelector("#cancel-clone"),c=t.value.trim();a.disabled=!0,l.textContent="Cancel",s.classList.remove("hidden"),o.classList.add("hidden");try{const u=await(await fetch("/api/git/clone",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:c,sshKeyPath:(r==null?void 0:r.value.trim())||void 0,username:(n==null?void 0:n.value.trim())||void 0,password:(i==null?void 0:i.value)||void 0})})).json();if(!u.success)throw new Error(u.error);const f=u.data;this.close(),this.onSuccess&&this.onSuccess(f.path)}catch(h){s.classList.add("hidden"),o.classList.remove("hidden"),o.textContent=h instanceof Error?h.message:"Clone failed",a.disabled=!1}}close(){document.removeEventListener("keydown",this.handleEscape),this.dialog&&(this.dialog.remove(),this.dialog=null)}}const _Et=new TEt;class MEt{constructor(t){gt(this,"container");gt(this,"status",null);gt(this,"branches",[]);gt(this,"isRepo",!1);gt(this,"currentTab","changes");gt(this,"onStatusChange",null);gt(this,"isPushing",!1);gt(this,"isPulling",!1);gt(this,"isOpen",!0);gt(this,"commits",[]);gt(this,"selectedCommits",[]);gt(this,"diffResult",null);gt(this,"isLoadingHistory",!1);gt(this,"showDiffViewer",!1);this.container=t,this.render()}setOnStatusChange(t){this.onStatusChange=t}toggle(){this.isOpen=!this.isOpen,this.container.classList.toggle("collapsed",!this.isOpen)}open(){this.isOpen=!0,this.container.classList.remove("collapsed")}close(){this.isOpen=!1,this.container.classList.add("collapsed")}get panelOpen(){return this.isOpen}async refresh(){try{const t=await Le.getGitStatus();this.isRepo=t.isRepo,this.status=t.status||null,this.commits=[],this.selectedCommits=[],this.diffResult=null,this.showDiffViewer=!1,this.branches=[],this.isRepo&&this.currentTab==="branches"&&await this.loadBranches(),this.isRepo&&this.currentTab==="history"&&await this.loadHistory(),this.render(),this.onStatusChange&&this.onStatusChange(this.status)}catch(t){console.error("Failed to get git status:",t),this.isRepo=!1,this.status=null,this.render()}}async loadBranches(){try{const t=await Le.listBranches();this.branches=t.branches}catch(t){console.error("Failed to load branches:",t),this.branches=[]}}async loadHistory(){if(!this.isLoadingHistory){this.isLoadingHistory=!0,this.render();try{const t=await Le.getHistory(50);this.commits=t.commits}catch(t){console.error("Failed to load history:",t),this.commits=[]}finally{this.isLoadingHistory=!1,this.render()}}}async loadDiff(t,r){try{this.diffResult=await Le.getDiff(t,r),this.showDiffViewer=!0,this.render()}catch(n){console.error("Failed to load diff:",n)}}updateStatus(t,r=!0){this.status=t,this.isRepo=r,this.render()}render(){var r;if(!this.isRepo){this.container.innerHTML=`
        <div class="git-panel-empty">
          <p>Not a git repository</p>
          <p class="git-panel-hint">Initialize or clone a repository to use git features</p>
        </div>
      `;return}if(!this.status){this.container.innerHTML=`
        <div class="git-panel-loading">Loading...</div>
      `;return}const t=(r=this.status)==null?void 0:r.remoteUrl;this.container.innerHTML=`
      <div class="git-panel">
        <div class="git-panel-header">
          <div class="git-panel-header-top">
            <span class="git-panel-title">Git</span>
            <button class="git-panel-close" data-action="close-panel" title="Close panel">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
              </svg>
            </button>
          </div>
          <div class="git-panel-tabs">
            <button class="git-tab ${this.currentTab==="changes"?"active":""}" data-tab="changes">
              Changes ${this.getChangesCount()}
            </button>
            <button class="git-tab ${this.currentTab==="history"?"active":""}" data-tab="history">
              History
            </button>
            <button class="git-tab ${this.currentTab==="branches"?"active":""}" data-tab="branches">
              Branches
            </button>
          </div>
          ${t?`
            <div class="git-remote-actions">
              <button class="git-remote-btn" data-action="pull" title="Pull from remote" ${this.isPulling?"disabled":""}>
                <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M8 12a.75.75 0 01-.75-.75V5.56L5.53 7.28a.75.75 0 01-1.06-1.06l3-3a.75.75 0 011.06 0l3 3a.75.75 0 11-1.06 1.06L8.75 5.56v5.69A.75.75 0 018 12z"/>
                  <path d="M2 13.25a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75z"/>
                </svg>
                ${this.isPulling?"Pulling...":"Pull"}
              </button>
              <button class="git-remote-btn" data-action="push" title="Push to remote" ${this.isPushing?"disabled":""}>
                <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M8 4a.75.75 0 01.75.75v5.69l1.72-1.72a.75.75 0 111.06 1.06l-3 3a.75.75 0 01-1.06 0l-3-3a.75.75 0 011.06-1.06l1.72 1.72V4.75A.75.75 0 018 4z"/>
                  <path d="M2 2.75a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75z"/>
                </svg>
                ${this.isPushing?"Pushing...":"Push"}
              </button>
            </div>
          `:""}
        </div>
        <div class="git-panel-content">
          ${this.renderCurrentTab()}
        </div>
      </div>
    `,this.attachEventListeners()}getChangesCount(){var t;return(t=this.status)!=null&&t.files.length?`(${this.status.files.length})`:""}renderCurrentTab(){switch(this.currentTab){case"changes":return this.renderChangesTab();case"history":return this.renderHistoryTab();case"branches":return this.renderBranchesTab();default:return""}}renderHistoryTab(){return this.showDiffViewer&&this.diffResult?this.renderDiffViewer():this.isLoadingHistory?'<div class="git-panel-loading">Loading history...</div>':this.commits.length===0?'<div class="git-panel-empty">No commits yet</div>':`
      ${this.selectedCommits.length>0?`<div class="git-history-selection">
           <span>${this.selectedCommits.length} commit${this.selectedCommits.length>1?"s":""} selected</span>
           ${this.selectedCommits.length===2?'<button class="git-compare-btn" data-action="compare-commits">Compare</button>':""}
           <button class="git-clear-selection" data-action="clear-selection">Clear</button>
         </div>`:""}
      <div class="git-history-list">
        ${this.commits.map(r=>this.renderCommitItem(r)).join("")}
      </div>
    `}renderCommitItem(t){const r=this.selectedCommits.includes(t.hash),n=new Date(t.date),i=this.getRelativeTime(n),s=t.message.split(`
`)[0];return`
      <div class="git-commit-item ${r?"selected":""}" data-hash="${t.hash}">
        <div class="git-commit-checkbox">
          <input type="checkbox" ${r?"checked":""} data-action="select-commit" data-hash="${t.hash}">
        </div>
        <div class="git-commit-info">
          <div class="git-commit-header">
            <span class="git-commit-hash">${t.shortHash}</span>
            <span class="git-commit-time">${i}</span>
          </div>
          <div class="git-commit-message">${this.escapeHtml(s)}</div>
          <div class="git-commit-author">${this.escapeHtml(t.author)}</div>
        </div>
        <div class="git-commit-actions">
          <button class="git-commit-action" data-action="view-commit" data-hash="${t.hash}" title="View details">
            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
              <path d="M8 2c1.981 0 3.671.992 4.933 2.078 1.27 1.091 2.187 2.345 2.637 3.023a1.62 1.62 0 0 1 0 1.798c-.45.678-1.367 1.932-2.637 3.023C11.67 13.008 9.981 14 8 14c-1.981 0-3.671-.992-4.933-2.078C1.797 10.831.88 9.577.43 8.899a1.62 1.62 0 0 1 0-1.798c.45-.678 1.367-1.932 2.637-3.023C4.33 2.992 6.019 2 8 2ZM1.679 7.932a.12.12 0 0 0 0 .136c.411.622 1.241 1.75 2.366 2.717C5.176 11.758 6.527 12.5 8 12.5c1.473 0 2.825-.742 3.955-1.715 1.124-.967 1.954-2.096 2.366-2.717a.12.12 0 0 0 0-.136c-.412-.621-1.242-1.75-2.366-2.717C10.824 4.242 9.473 3.5 8 3.5c-1.473 0-2.824.742-3.955 1.715-1.124.967-1.954 2.096-2.366 2.717ZM8 10a2 2 0 1 1-.001-3.999A2 2 0 0 1 8 10Z"/>
            </svg>
          </button>
        </div>
      </div>
    `}renderDiffViewer(){return this.diffResult?`
      <div class="git-diff-viewer">
        <div class="git-diff-header">
          <button class="git-diff-back" data-action="close-diff">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
              <path fill-rule="evenodd" d="M7.78 12.53a.75.75 0 01-1.06 0L2.47 8.28a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 1.06L4.81 7h7.44a.75.75 0 010 1.5H4.81l2.97 2.97a.75.75 0 010 1.06z"/>
            </svg>
            Back
          </button>
          <span class="git-diff-title">
            ${this.diffResult.fromCommit}  ${this.diffResult.toCommit}
          </span>
        </div>
        <div class="git-diff-files">
          ${this.diffResult.files.map(t=>this.renderFileDiff(t)).join("")}
        </div>
      </div>
    `:""}renderFileDiff(t){const r=t.binary?'<span class="git-diff-binary">Binary file</span>':`<span class="git-diff-add">+${t.additions}</span> <span class="git-diff-del">-${t.deletions}</span>`;return`
      <div class="git-diff-file">
        <div class="git-diff-file-header ${t.action==="added"?"added":t.action==="deleted"?"deleted":"modified"}">
          <span class="git-diff-file-action">${t.action}</span>
          <span class="git-diff-file-path">${this.escapeHtml(t.path)}</span>
          <span class="git-diff-file-stats">${r}</span>
        </div>
        ${!t.binary&&t.lines.length>0?`
          <div class="git-diff-content">
            ${t.lines.map(i=>`
              <div class="git-diff-line ${i.type}">
                <span class="git-diff-line-content">${this.escapeHtml(i.content)}</span>
              </div>
            `).join("")}
          </div>
        `:""}
      </div>
    `}getRelativeTime(t){const n=new Date().getTime()-t.getTime(),i=Math.floor(n/6e4),s=Math.floor(n/36e5),o=Math.floor(n/864e5);return i<1?"just now":i<60?`${i}m ago`:s<24?`${s}h ago`:o<7?`${o}d ago`:t.toLocaleDateString()}escapeHtml(t){const r=document.createElement("div");return r.textContent=t,r.innerHTML}renderBranchesTab(){const t=this.branches.filter(i=>!i.isRemote),r=this.branches.filter(i=>i.isRemote);let n=`
      <div class="git-branch-actions">
        <button class="git-branch-create-btn" data-action="create-branch">
          <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
            <path d="M8 2a.75.75 0 01.75.75v4.5h4.5a.75.75 0 010 1.5h-4.5v4.5a.75.75 0 01-1.5 0v-4.5h-4.5a.75.75 0 010-1.5h4.5v-4.5A.75.75 0 018 2z"/>
          </svg>
          New Branch
        </button>
      </div>
    `;return t.length>0&&(n+=`
        <div class="git-section">
          <div class="git-section-header">
            <span class="git-section-title">Local Branches (${t.length})</span>
          </div>
          <div class="git-branch-list">
            ${t.map(i=>this.renderBranchItem(i)).join("")}
          </div>
        </div>
      `),r.length>0&&(n+=`
        <div class="git-section">
          <div class="git-section-header">
            <span class="git-section-title">Remote Branches (${r.length})</span>
          </div>
          <div class="git-branch-list">
            ${r.map(i=>this.renderBranchItem(i)).join("")}
          </div>
        </div>
      `),t.length===0&&r.length===0&&(n+=`
        <div class="git-panel-clean">
          <p>No branches found</p>
          <p class="git-panel-hint">Create a commit to initialize a branch</p>
        </div>
      `),n}renderBranchItem(t){const r=t.isRemote?t.name.replace(/^origin\//,""):t.name;return`
      <div class="git-branch-item ${t.isCurrent?"current":""}" data-branch="${t.name}" data-is-remote="${t.isRemote}">
        <span class="git-branch-icon">
          ${t.isCurrent?`
            <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
              <path d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"/>
            </svg>
          `:`
            <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
              <path d="M11.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122V6A2.5 2.5 0 0110 8.5H6a1 1 0 00-1 1v1.128a2.251 2.251 0 11-1.5 0V5.372a2.25 2.25 0 111.5 0v1.836A2.492 2.492 0 016 7h4a1 1 0 001-1v-.628A2.25 2.25 0 019.5 3.25zM4.25 12a.75.75 0 100 1.5.75.75 0 000-1.5zM3.5 3.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0z"/>
            </svg>
          `}
        </span>
        <span class="git-branch-name">${r}</span>
        ${t.upstream?`<span class="git-branch-upstream" title="Tracks ${t.upstream}">${t.upstream}</span>`:""}
        ${!t.isCurrent&&!t.isRemote?`
          <div class="git-branch-actions-inline">
            <button class="git-branch-action" data-action="checkout" title="Switch to branch">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
                <path d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"/>
              </svg>
            </button>
            <button class="git-branch-action git-action-danger" data-action="delete" title="Delete branch">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
                <path d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"/>
              </svg>
            </button>
          </div>
        `:""}
        ${t.isRemote?`
          <div class="git-branch-actions-inline">
            <button class="git-branch-action" data-action="checkout-remote" title="Checkout remote branch">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
                <path d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"/>
              </svg>
            </button>
          </div>
        `:""}
      </div>
    `}renderChangesTab(){var o;if(!this.status)return"";const t=this.status.files.filter(a=>a.staged),r=this.status.files.filter(a=>!a.staged);if(t.length===0&&r.length===0)return`
        <div class="git-panel-clean">
          <svg width="48" height="48" viewBox="0 0 16 16" fill="currentColor" opacity="0.3">
            <path d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"/>
          </svg>
          <p>No changes</p>
          <p class="git-panel-hint">Working tree is clean</p>
        </div>
      `;let n="";t.length>0&&(n+=`
        <div class="git-section">
          <div class="git-section-header">
            <span class="git-section-title">Staged Changes (${t.length})</span>
            <button class="git-section-action" data-action="unstage-all" title="Unstage all">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
                <path d="M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zM8 4.5l-1.25-1.5h2.5L8 4.5z"/>
                <path d="M10.88 9.38a.75.75 0 10-1.06-1.06L8 10.14 6.18 8.32a.75.75 0 10-1.06 1.06l1.82 1.82-1.82 1.82a.75.75 0 101.06 1.06L8 12.26l1.82 1.82a.75.75 0 101.06-1.06l-1.82-1.82 1.82-1.82z"/>
              </svg>
            </button>
          </div>
          <div class="git-file-list">
            ${t.map(a=>this.renderFileItem(a,!0)).join("")}
          </div>
        </div>
      `),r.length>0&&(n+=`
        <div class="git-section">
          <div class="git-section-header">
            <span class="git-section-title">Changes (${r.length})</span>
            <button class="git-section-action" data-action="stage-all" title="Stage all">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 4a.75.75 0 01.75.75v5.69l1.72-1.72a.75.75 0 111.06 1.06l-3 3a.75.75 0 01-1.06 0l-3-3a.75.75 0 011.06-1.06l1.72 1.72V4.75A.75.75 0 018 4z"/>
              </svg>
            </button>
          </div>
          <div class="git-file-list">
            ${r.map(a=>this.renderFileItem(a,!1)).join("")}
          </div>
        </div>
      `);const i=t.length>0||r.some(a=>a.status!=="untracked"),s=(o=this.status)==null?void 0:o.remoteUrl;return i&&(n+=`
        <div class="git-commit-section">
          <textarea class="git-commit-message" placeholder="Commit message..." rows="3"></textarea>
          <div class="git-commit-actions-row">
            ${t.length>0?`
              <button class="git-commit-btn" data-action="commit">
                <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M11.93 8.5a4.002 4.002 0 01-7.86 0H.75a.75.75 0 010-1.5h3.32a4.002 4.002 0 017.86 0h3.32a.75.75 0 010 1.5h-3.32zM8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"/>
                </svg>
                Commit
              </button>
            `:`
              <button class="git-commit-btn git-commit-btn-secondary" data-action="quick-commit" title="Stage all tracked files and commit">
                <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M11.93 8.5a4.002 4.002 0 01-7.86 0H.75a.75.75 0 010-1.5h3.32a4.002 4.002 0 017.86 0h3.32a.75.75 0 010 1.5h-3.32zM8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"/>
                </svg>
                Quick Commit
              </button>
            `}
            ${s?`
              <button class="git-commit-btn git-commit-btn-push" data-action="${t.length>0?"commit-push":"quick-commit-push"}" title="Commit and push to remote">
                <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M8 4a.75.75 0 01.75.75v5.69l1.72-1.72a.75.75 0 111.06 1.06l-3 3a.75.75 0 01-1.06 0l-3-3a.75.75 0 011.06-1.06l1.72 1.72V4.75A.75.75 0 018 4z"/>
                  <path d="M2 2.75a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75z"/>
                </svg>
                Commit & Push
              </button>
            `:""}
          </div>
        </div>
      `),n}renderFileItem(t,r){const n=`git-status-${t.status}`,i=this.getStatusIcon(t.status),s=t.path.split("/").pop()||t.path,o=t.path.includes("/")?t.path.substring(0,t.path.lastIndexOf("/")):"";return`
      <div class="git-file-item ${n}" data-path="${t.path}" data-staged="${r}">
        <span class="git-file-status" title="${t.status}">${i}</span>
        <span class="git-file-name" title="${t.path}">
          ${s}
          ${o?`<span class="git-file-path">${o}</span>`:""}
        </span>
        <div class="git-file-actions">
          ${r?`
            <button class="git-file-action" data-action="unstage" title="Unstage">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 12a.75.75 0 01-.75-.75V5.56L5.53 7.28a.75.75 0 01-1.06-1.06l3-3a.75.75 0 011.06 0l3 3a.75.75 0 11-1.06 1.06L8.75 5.56v5.69A.75.75 0 018 12z"/>
              </svg>
            </button>
          `:`
            <button class="git-file-action" data-action="stage" title="Stage">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 4a.75.75 0 01.75.75v5.69l1.72-1.72a.75.75 0 111.06 1.06l-3 3a.75.75 0 01-1.06 0l-3-3a.75.75 0 011.06-1.06l1.72 1.72V4.75A.75.75 0 018 4z"/>
              </svg>
            </button>
            <button class="git-file-action git-action-danger" data-action="discard" title="Discard changes">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
                <path d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"/>
              </svg>
            </button>
          `}
        </div>
      </div>
    `}getStatusIcon(t){switch(t){case"modified":return"M";case"added":return"A";case"deleted":return"D";case"untracked":return"U";case"conflicted":return"!";default:return"?"}}attachEventListeners(){var t,r,n,i,s,o,a,l,c,h;(t=this.container.querySelector('[data-action="close-panel"]'))==null||t.addEventListener("click",()=>{this.close()}),this.container.querySelectorAll(".git-tab").forEach(u=>{u.addEventListener("click",async f=>{const d=f.currentTarget;if(d.hasAttribute("disabled"))return;const p=d.dataset.tab;p&&(this.currentTab=p,p==="branches"?await this.loadBranches():p==="history"&&await this.loadHistory(),this.render())})}),this.container.querySelectorAll('[data-action="select-commit"]').forEach(u=>{u.addEventListener("change",f=>{const d=f.target,p=d.dataset.hash;p&&(d.checked?this.selectedCommits.length<2?this.selectedCommits.push(p):(this.selectedCommits.shift(),this.selectedCommits.push(p)):this.selectedCommits=this.selectedCommits.filter(m=>m!==p),this.render())})}),(r=this.container.querySelector('[data-action="compare-commits"]'))==null||r.addEventListener("click",async()=>{if(this.selectedCommits.length===2){const u=this.commits.find(d=>d.hash===this.selectedCommits[0]),f=this.commits.find(d=>d.hash===this.selectedCommits[1]);if(u&&f){const d=new Date(u.date).getTime(),p=new Date(f.date).getTime(),[m,g]=d<p?[this.selectedCommits[0],this.selectedCommits[1]]:[this.selectedCommits[1],this.selectedCommits[0]];await this.loadDiff(m,g)}}}),(n=this.container.querySelector('[data-action="clear-selection"]'))==null||n.addEventListener("click",()=>{this.selectedCommits=[],this.render()}),(i=this.container.querySelector('[data-action="close-diff"]'))==null||i.addEventListener("click",()=>{this.showDiffViewer=!1,this.diffResult=null,this.render()}),this.container.querySelectorAll('[data-action="view-commit"]').forEach(u=>{u.addEventListener("click",async f=>{f.stopPropagation();const p=f.currentTarget.dataset.hash;if(p){const m=this.commits.findIndex(g=>g.hash===p);if(m>=0&&m<this.commits.length-1){const g=this.commits[m+1].hash;await this.loadDiff(g,p)}else m===this.commits.length-1&&this.showNotification(`First commit: ${this.commits[m].shortHash}`,"success")}})}),(s=this.container.querySelector('[data-action="push"]'))==null||s.addEventListener("click",async()=>{await this.handlePush()}),(o=this.container.querySelector('[data-action="pull"]'))==null||o.addEventListener("click",async()=>{await this.handlePull()}),(a=this.container.querySelector('[data-action="create-branch"]'))==null||a.addEventListener("click",async()=>{await this.handleCreateBranch()}),this.container.querySelectorAll(".git-branch-action").forEach(u=>{u.addEventListener("click",async f=>{f.stopPropagation();const d=f.currentTarget,p=d.dataset.action,m=d.closest(".git-branch-item"),g=m==null?void 0:m.dataset.branch;if(g)switch(p){case"checkout":case"checkout-remote":await this.handleCheckout(g);break;case"delete":await this.handleDeleteBranch(g);break}})}),(l=this.container.querySelector('[data-action="stage-all"]'))==null||l.addEventListener("click",async()=>{await this.handleStageAll()}),(c=this.container.querySelector('[data-action="unstage-all"]'))==null||c.addEventListener("click",async()=>{await this.handleUnstageAll()}),this.container.querySelectorAll(".git-file-action").forEach(u=>{u.addEventListener("click",async f=>{f.stopPropagation();const d=f.currentTarget,p=d.dataset.action,m=d.closest(".git-file-item"),g=m==null?void 0:m.dataset.path;if(g)switch(p){case"stage":await this.handleStageFile(g);break;case"unstage":await this.handleUnstageFile(g);break;case"discard":await this.handleDiscardFile(g);break}})}),this.container.querySelectorAll(".git-commit-btn").forEach(u=>{u.addEventListener("click",async()=>{const d=u.dataset.action,p=this.container.querySelector(".git-commit-message"),m=p==null?void 0:p.value.trim();if(!m){alert("Please enter a commit message");return}switch(d){case"commit":await this.handleCommit(m);break;case"commit-push":await this.handleCommitAndPush(m);break;case"quick-commit":await this.handleQuickCommit(m,!1);break;case"quick-commit-push":await this.handleQuickCommit(m,!0);break}})}),(h=this.container.querySelector(".git-commit-message"))==null||h.addEventListener("keydown",async u=>{const f=u;if((f.ctrlKey||f.metaKey)&&f.key==="Enter"){const d=u.target,p=d==null?void 0:d.value.trim();p&&await this.handleCommit(p)}})}async handleStageFile(t){try{const r=await Le.stageFiles([t]);this.updateStatus(r.status),this.onStatusChange&&this.onStatusChange(r.status)}catch(r){console.error("Failed to stage file:",r),alert("Failed to stage file: "+r.message)}}async handleUnstageFile(t){try{const r=await Le.unstageFiles([t]);this.updateStatus(r.status),this.onStatusChange&&this.onStatusChange(r.status)}catch(r){console.error("Failed to unstage file:",r),alert("Failed to unstage file: "+r.message)}}async handleDiscardFile(t){if(confirm(`Discard changes to ${t}? This cannot be undone.`))try{const r=await Le.discardChanges([t]);this.updateStatus(r.status),this.onStatusChange&&this.onStatusChange(r.status)}catch(r){console.error("Failed to discard changes:",r),alert("Failed to discard changes: "+r.message)}}async handleStageAll(){try{const t=await Le.stageFiles([],!0);this.updateStatus(t.status),this.onStatusChange&&this.onStatusChange(t.status)}catch(t){console.error("Failed to stage all:",t),alert("Failed to stage all: "+t.message)}}async handleUnstageAll(){try{const t=await Le.unstageFiles([],!0);this.updateStatus(t.status),this.onStatusChange&&this.onStatusChange(t.status)}catch(t){console.error("Failed to unstage all:",t),alert("Failed to unstage all: "+t.message)}}async handleCommit(t){try{const r=await Le.commit(t);this.updateStatus(r.status),this.onStatusChange&&this.onStatusChange(r.status);const n=this.container.querySelector(".git-commit-message");n&&(n.value=""),this.showCommitSuccess(r.commit)}catch(r){console.error("Failed to commit:",r),alert("Failed to commit: "+r.message)}}showCommitSuccess(t){const r=document.createElement("div");r.className="git-commit-success",r.innerHTML=`
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"/>
      </svg>
      <span>Committed ${t.shortHash}</span>
    `,this.container.appendChild(r),setTimeout(()=>r.remove(),3e3)}async handleCommitAndPush(t){try{const r=await Le.commit(t);this.updateStatus(r.status);const n=await Le.push();this.status=n.status,this.render();const i=this.container.querySelector(".git-commit-message");i&&(i.value=""),n.result.success&&this.showNotification(`Committed ${r.commit.shortHash} and pushed`,"success"),this.onStatusChange&&this.onStatusChange(this.status)}catch(r){console.error("Failed to commit and push:",r),this.showNotification(r.message,"error")}}async handleQuickCommit(t,r){var n;try{const i=await Le.quickCommit(t,void 0,r);this.updateStatus(i.status);const s=this.container.querySelector(".git-commit-message");s&&(s.value=""),r&&((n=i.push)!=null&&n.success)?this.showNotification(`Committed ${i.commit.shortHash} and pushed`,"success"):this.showCommitSuccess(i.commit),i.pushError&&this.showNotification(`Commit succeeded but push failed: ${i.pushError}`,"error"),this.onStatusChange&&this.onStatusChange(this.status)}catch(i){console.error("Failed to quick commit:",i),this.showNotification(i.message,"error")}}async handlePush(){if(!(this.isPushing||!this.status)){this.isPushing=!0,this.render();try{const t=await Le.push();this.status=t.status,this.render(),t.result.success&&this.showNotification(t.result.message,"success"),this.onStatusChange&&this.onStatusChange(this.status)}catch(t){console.error("Push failed:",t),this.showNotification(t instanceof Error?t.message:"Push failed","error")}finally{this.isPushing=!1,this.render()}}}async handlePull(){if(!(this.isPulling||!this.status)){this.isPulling=!0,this.render();try{const t=await Le.pull();if(this.status=t.status,this.render(),t.result.success){const r=t.result.newCommits>0?`Pulled ${t.result.newCommits} new commit${t.result.newCommits>1?"s":""}`:t.result.message;this.showNotification(r,"success")}this.onStatusChange&&this.onStatusChange(this.status)}catch(t){console.error("Pull failed:",t),this.showNotification(t instanceof Error?t.message:"Pull failed","error")}finally{this.isPulling=!1,this.render()}}}async handleCreateBranch(){const t=prompt("Enter new branch name:");if(!t||!t.trim())return;const r=t.trim();try{const n=await Le.createBranch(r);this.branches=n.branches,this.render(),this.showNotification(`Created branch '${r}'`,"success")}catch(n){console.error("Create branch failed:",n),this.showNotification(n instanceof Error?n.message:"Failed to create branch","error")}}async handleCheckout(t){try{const r=t.startsWith("origin/"),n=r?t.replace("origin/",""):t,i=await Le.checkout(n,r);this.status=i.status,this.branches=i.branches,this.render(),this.showNotification(`Switched to branch '${n}'`,"success"),this.onStatusChange&&this.onStatusChange(this.status)}catch(r){console.error("Checkout failed:",r),this.showNotification(r instanceof Error?r.message:"Failed to checkout branch","error")}}async handleDeleteBranch(t){if(confirm(`Delete branch '${t}'?`))try{const r=await Le.deleteBranch(t);this.branches=r.branches,this.render(),this.showNotification(`Deleted branch '${t}'`,"success")}catch(r){console.error("Delete branch failed:",r),this.showNotification(r instanceof Error?r.message:"Failed to delete branch","error")}}showNotification(t,r){const n=document.createElement("div");n.className=`git-notification git-notification-${r}`,n.textContent=t,this.container.appendChild(n),setTimeout(()=>n.remove(),3e3)}}class AEt{constructor(){gt(this,"fileTree",null);gt(this,"editor",null);gt(this,"mermaidRenderer",null);gt(this,"gitStatus",null);gt(this,"gitPanel",null);gt(this,"tabs",[]);gt(this,"activeTab",null);gt(this,"editors",new Map);gt(this,"theme","light");gt(this,"markdownPanelOpen",!1);gt(this,"directoryPath","");gt(this,"recents",[]);gt(this,"elements",{sidebar:document.getElementById("sidebar"),fileTree:document.getElementById("file-tree"),tabsContainer:document.getElementById("tabs-container"),editorContainer:document.getElementById("editor-container"),editorWrapper:document.getElementById("editor-wrapper"),editorEl:document.getElementById("editor"),markdownPanel:document.getElementById("markdown-panel"),markdownContent:document.getElementById("markdown-content"),emptyState:document.getElementById("empty-state"),statusText:document.getElementById("status-text"),wordCount:document.getElementById("word-count"),searchInput:document.getElementById("search-input"),themeToggle:document.getElementById("theme-toggle"),newFileBtn:document.getElementById("new-file-btn"),newFileModal:document.getElementById("new-file-modal"),newFileName:document.getElementById("new-file-name"),confirmNewFile:document.getElementById("confirm-new-file"),cancelNewFile:document.getElementById("cancel-new-file"),openFolderBtn:document.getElementById("open-folder-btn"),directoryModal:document.getElementById("directory-modal"),directoryPathInput:document.getElementById("directory-path-input"),directoryList:document.getElementById("directory-list"),confirmDirectory:document.getElementById("confirm-directory"),cancelDirectory:document.getElementById("cancel-directory"),toggleMarkdown:document.getElementById("toggle-markdown"),closeMarkdownPanel:document.getElementById("close-markdown-panel"),copyMarkdown:document.getElementById("copy-markdown"),widthControl:document.getElementById("width-control"),startupModal:document.getElementById("startup-modal"),startupRecents:document.getElementById("startup-recents"),startupBrowse:document.getElementById("startup-browse"),startupContinue:document.getElementById("startup-continue"),themeSelector:document.getElementById("theme-selector"),closeThemeSelector:document.getElementById("close-theme-selector"),gitStatusContainer:document.getElementById("git-status"),gitPanelContainer:document.getElementById("git-panel-container")})}async init(){try{(await Le.getConfig()).theme==="dark"&&this.setTheme("dark")}catch(n){console.error("Failed to load config:",n)}this.fileTree=new pX(this.elements.fileTree,{onFileSelect:n=>this.selectFile(n),onFileOpen:n=>this.openFile(n),onFileDeleted:n=>this.closeTab(n),onHeadingClick:(n,i)=>this.scrollToHeading(n,i)}),await this.fileTree.load(),this.editor=new z3t(this.elements.editorEl,{onLoad:()=>this.setStatus("Loaded"),onSave:()=>this.setStatus("Saved"),onChange:(n,i,s)=>this.handleEditorChange(n,s),onError:n=>this.setStatus(n),onStatus:n=>this.setStatus(n)}),await this.editor.init(),this.mermaidRenderer=new CEt(this.elements.editorEl),this.mermaidRenderer.start(),this.gitStatus=new SEt(this.elements.gitStatusContainer),this.gitStatus.setOnInitRepo(()=>this.handleGitRepoChange()),this.gitStatus.setOnCloneRepo(()=>this.showCloneDialog()),this.gitStatus.setOnTogglePanel(()=>{var n;return(n=this.gitPanel)==null?void 0:n.toggle()}),await this.gitStatus.refresh(),this.gitPanel=new MEt(this.elements.gitPanelContainer),this.gitPanel.setOnStatusChange(n=>{this.gitStatus&&n&&this.gitStatus.update({isRepo:!0,status:n})}),await this.gitPanel.refresh(),Z1.connect(),Z1.on("fileEvent",n=>this.handleFileEvent(n)),Z1.on("connected",()=>this.setStatus("Connected")),Z1.on("disconnected",()=>this.setStatus("Disconnected")),this.setupEventListeners();const r=new URLSearchParams(window.location.search).get("file");r&&this.openFile(r);try{this.recents=await Le.getRecents(),this.recents.length>1&&this.showStartupModal()}catch(n){console.error("Failed to load recents:",n)}this.setStatus("Ready")}setupEventListeners(){var t,r,n;this.elements.searchInput.addEventListener("input",i=>{var o;const s=i.target;(o=this.fileTree)==null||o.setSearchQuery(s.value)}),this.elements.themeToggle.addEventListener("click",()=>{this.toggleThemeSelector()}),this.elements.closeThemeSelector.addEventListener("click",()=>{this.hideThemeSelector()}),this.elements.themeSelector.querySelectorAll(".theme-card").forEach(i=>{i.addEventListener("click",()=>{const s=i.dataset.theme;this.setTheme(s),this.updateThemeCards()})}),document.addEventListener("click",i=>{const s=i.target;!this.elements.themeSelector.classList.contains("hidden")&&!this.elements.themeSelector.contains(s)&&!this.elements.themeToggle.contains(s)&&this.hideThemeSelector()}),this.elements.newFileBtn.addEventListener("click",()=>{this.showNewFileModal()}),this.elements.confirmNewFile.addEventListener("click",()=>{this.createNewFile()}),this.elements.cancelNewFile.addEventListener("click",()=>{this.hideNewFileModal()}),this.elements.newFileName.addEventListener("keydown",i=>{i.key==="Enter"?this.createNewFile():i.key==="Escape"&&this.hideNewFileModal()}),(t=this.elements.newFileModal.querySelector(".modal-backdrop"))==null||t.addEventListener("click",()=>{this.hideNewFileModal()}),this.elements.openFolderBtn.addEventListener("click",()=>{this.showDirectoryModal()}),this.elements.confirmDirectory.addEventListener("click",()=>{this.openDirectory()}),this.elements.cancelDirectory.addEventListener("click",()=>{this.hideDirectoryModal()}),this.elements.directoryPathInput.addEventListener("keydown",i=>{i.key==="Enter"?this.openDirectory():i.key==="Escape"&&this.hideDirectoryModal()}),(r=this.elements.directoryModal.querySelector(".modal-backdrop"))==null||r.addEventListener("click",()=>{this.hideDirectoryModal()}),this.elements.startupBrowse.addEventListener("click",()=>{this.hideStartupModal(),this.showDirectoryModal()}),this.elements.startupContinue.addEventListener("click",()=>{this.hideStartupModal()}),(n=this.elements.startupModal.querySelector(".modal-backdrop"))==null||n.addEventListener("click",()=>{this.hideStartupModal()}),this.elements.toggleMarkdown.addEventListener("click",()=>this.toggleMarkdownPanel()),this.elements.closeMarkdownPanel.addEventListener("click",()=>this.toggleMarkdownPanel(!1)),this.elements.copyMarkdown.addEventListener("click",()=>this.copyMarkdownToClipboard()),this.elements.widthControl.querySelectorAll(".width-btn").forEach(i=>{i.addEventListener("click",()=>{const s=i.dataset.width;this.setEditorWidth(s)})}),this.elements.editorWrapper.addEventListener("click",()=>{this.markdownPanelOpen&&this.toggleMarkdownPanel(!1)}),document.addEventListener("keydown",i=>{var s;(i.metaKey||i.ctrlKey)&&i.key==="s"&&(i.preventDefault(),(s=this.editor)==null||s.save()),(i.metaKey||i.ctrlKey)&&i.key==="w"&&(i.preventDefault(),this.activeTab&&this.closeTab(this.activeTab)),(i.metaKey||i.ctrlKey)&&i.key==="n"&&(i.preventDefault(),this.showNewFileModal()),(i.metaKey||i.ctrlKey)&&i.key==="p"&&(i.preventDefault(),this.elements.searchInput.focus())})}selectFile(t){var r;(r=this.fileTree)==null||r.setActiveFile(t)}async openFile(t){if(this.tabs.find(i=>i.path===t)){this.switchToTab(t);return}const n={path:t,name:t.split("/").pop()||t,dirty:!1};this.tabs.push(n),this.renderTabs(),this.switchToTab(t)}async switchToTab(t){var n,i,s,o,a;this.activeTab&&this.editor&&this.editors.set(this.activeTab,this.editor.getContent()),this.activeTab=t,(n=this.fileTree)==null||n.setActiveFile(t),this.renderTabs(),this.elements.emptyState.classList.add("hidden"),this.elements.editorWrapper.classList.remove("hidden");const r=this.editors.get(t);r!==void 0?(await((i=this.editor)==null?void 0:i.setContent(r)),(s=this.editor)==null||s.setCurrentPath(t)):await((o=this.editor)==null?void 0:o.loadFile(t)),this.updateWordCount(),this.updateOutline(),(a=this.editor)==null||a.focus()}closeTab(t){var i;const r=this.tabs.findIndex(s=>s.path===t);if(r===-1)return;const n=this.tabs[r];if(!(n.dirty&&!confirm(`"${n.name}" has unsaved changes. Close anyway?`))){if(this.tabs.splice(r,1),this.editors.delete(t),this.activeTab===t)if(this.tabs.length>0){const s=Math.min(r,this.tabs.length-1);this.switchToTab(this.tabs[s].path)}else this.activeTab=null,this.elements.editorWrapper.classList.add("hidden"),this.elements.emptyState.classList.remove("hidden"),(i=this.fileTree)==null||i.setActiveFile(null);this.renderTabs()}}renderTabs(){this.elements.tabsContainer.innerHTML=this.tabs.map(t=>`
      <button class="tab ${t.path===this.activeTab?"active":""} ${t.dirty?"dirty":""}"
              data-path="${this.escapeAttr(t.path)}">
        <span class="tab-name">${this.escapeHtml(t.name)}</span>
        <span class="tab-close" data-close="${this.escapeAttr(t.path)}">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </span>
      </button>
    `).join(""),this.elements.tabsContainer.querySelectorAll(".tab").forEach(t=>{t.addEventListener("click",r=>{const i=r.target.closest(".tab-close");i?this.closeTab(i.getAttribute("data-close")):this.switchToTab(t.dataset.path)})})}handleEditorChange(t,r){const n=this.tabs.find(i=>i.path===t);n&&(n.dirty=r,this.renderTabs()),this.updateWordCount(),this.updateOutline(),this.markdownPanelOpen&&this.updateMarkdownView()}handleFileEvent(t){var r;console.log("File event:",t),(r=this.fileTree)==null||r.refresh()}setTheme(t){this.theme=t,document.body.dataset.theme=t,t.startsWith("dark")?document.body.classList.add("dark"):document.body.classList.remove("dark");const r={light:"Light","light-sepia":"Sepia","light-ocean":"Ocean",dark:"Dark","dark-nord":"Nord","dark-monokai":"Monokai"};this.elements.themeToggle.title=`Theme: ${r[t]||t}`}toggleThemeSelector(){this.elements.themeSelector.classList.contains("hidden")?this.showThemeSelector():this.hideThemeSelector()}showThemeSelector(){this.elements.themeSelector.classList.remove("hidden"),this.updateThemeCards()}hideThemeSelector(){this.elements.themeSelector.classList.add("hidden")}updateThemeCards(){this.elements.themeSelector.querySelectorAll(".theme-card").forEach(t=>{const r=t.dataset.theme;t.classList.toggle("active",r===this.theme)})}showNewFileModal(){this.elements.newFileModal.classList.remove("hidden"),this.elements.newFileName.value="",this.elements.newFileName.focus()}hideNewFileModal(){this.elements.newFileModal.classList.add("hidden")}async createNewFile(){var r;let t=this.elements.newFileName.value.trim();if(t){t.toLowerCase().endsWith(".md")||(t+=".md");try{await Le.createFile(t,`# ${t.replace(".md","")}

`),this.hideNewFileModal(),await((r=this.fileTree)==null?void 0:r.refresh()),this.openFile(t)}catch(n){alert("Failed to create file: "+n.message)}}}setStatus(t){this.elements.statusText.textContent=t}updateWordCount(){if(this.editor){const t=this.editor.getWordCount();this.elements.wordCount.textContent=`${t} words`}else this.elements.wordCount.textContent=""}escapeHtml(t){const r=document.createElement("div");return r.textContent=t,r.innerHTML}escapeAttr(t){return t.replace(/"/g,"&quot;")}async showDirectoryModal(){this.elements.directoryModal.classList.remove("hidden");try{this.recents=await Le.getRecents()}catch(t){console.error("Failed to load recents:",t),this.recents=[]}try{const r=(await Le.listDirectories()).parent,n=await Le.listDirectories(r);this.directoryPath=n.current,this.elements.directoryPathInput.value=n.current,this.renderDirectoryList(n.directories,n.parent)}catch(t){console.error("Failed to list directories:",t)}this.elements.directoryPathInput.focus()}hideDirectoryModal(){this.elements.directoryModal.classList.add("hidden")}renderDirectoryList(t,r){let n="";if(this.recents.length>0){n+='<div class="recents-section">',n+='<div class="recents-header">Recent Locations</div>';for(const i of this.recents)n+=`
          <div class="directory-item recent" data-path="${this.escapeAttr(i.path)}" data-recent="true">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
            <div class="recent-info">
              <span class="recent-name">${this.escapeHtml(i.name)}</span>
              <span class="recent-path">${this.escapeHtml(i.path)}</span>
            </div>
          </div>
        `;n+="</div>",n+='<div class="directory-divider"></div>',n+='<div class="browse-header">Browse</div>'}r!==this.directoryPath&&(n+=`
        <div class="directory-item parent" data-path="${this.escapeAttr(r)}">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15 18 9 12 15 6"/>
          </svg>
          <span>..</span>
        </div>
      `);for(const i of t)n+=`
        <div class="directory-item" data-path="${this.escapeAttr(i.path)}">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
          </svg>
          <span>${this.escapeHtml(i.name)}</span>
        </div>
      `;t.length===0&&r===this.directoryPath&&(n+='<div class="directory-empty">No subdirectories</div>'),this.elements.directoryList.innerHTML=n,this.elements.directoryList.querySelectorAll(".directory-item:not([data-recent])").forEach(i=>{i.addEventListener("click",async()=>{const s=i.dataset.path;try{const o=await Le.listDirectories(s);this.directoryPath=o.current,this.elements.directoryPathInput.value=o.current,this.recents=[],this.renderDirectoryList(o.directories,o.parent)}catch(o){console.error("Failed to list directories:",o)}}),i.addEventListener("dblclick",async()=>{const s=i.dataset.path;this.elements.directoryPathInput.value=s,await this.openDirectory()})}),this.elements.directoryList.querySelectorAll(".directory-item[data-recent]").forEach(i=>{i.addEventListener("click",async()=>{const s=i.dataset.path;this.elements.directoryPathInput.value=s,await this.openDirectory()})})}async openDirectory(){var r,n,i;const t=this.elements.directoryPathInput.value.trim();if(t)try{await Le.changeDirectory(t),this.hideDirectoryModal(),this.tabs=[],this.editors.clear(),this.activeTab=null,this.renderTabs(),this.elements.editorWrapper.classList.add("hidden"),this.elements.emptyState.classList.remove("hidden"),this.toggleMarkdownPanel(!1),await((r=this.fileTree)==null?void 0:r.load()),await((n=this.gitStatus)==null?void 0:n.refresh()),await((i=this.gitPanel)==null?void 0:i.refresh()),this.setStatus("Opened: "+t)}catch(s){alert("Failed to open directory: "+s.message)}}setEditorWidth(t){this.elements.editorEl.dataset.width=t,this.elements.widthControl.querySelectorAll(".width-btn").forEach(r=>{r.classList.toggle("active",r.dataset.width===t)})}toggleMarkdownPanel(t){this.markdownPanelOpen=t??!this.markdownPanelOpen,this.elements.markdownPanel.classList.toggle("hidden",!this.markdownPanelOpen),this.elements.toggleMarkdown.classList.toggle("active",this.markdownPanelOpen),this.markdownPanelOpen&&this.updateMarkdownView()}updateMarkdownView(){if(this.editor){const t=this.editor.getContent();this.elements.markdownContent.textContent=t}}async copyMarkdownToClipboard(){if(!this.editor)return;const t=this.editor.getContent();try{await navigator.clipboard.writeText(t),this.setStatus("Copied to clipboard")}catch(r){console.error("Failed to copy:",r),this.setStatus("Failed to copy")}}scrollToHeading(t,r){var n;(n=this.editor)==null||n.scrollToLine(r)}updateOutline(){var t,r;if(this.editor&&this.activeTab){const n=this.editor.getHeadings();(t=this.fileTree)==null||t.updateOutline(n)}else(r=this.fileTree)==null||r.clearOutline()}showStartupModal(){this.elements.startupModal.classList.remove("hidden"),this.renderStartupRecents()}hideStartupModal(){this.elements.startupModal.classList.add("hidden")}async handleGitRepoChange(){var t,r;await((t=this.fileTree)==null?void 0:t.load()),await((r=this.gitPanel)==null?void 0:r.refresh())}showCloneDialog(){_Et.show(async t=>{var r,n,i;try{await Le.changeDirectory(t),await((r=this.fileTree)==null?void 0:r.load()),await((n=this.gitStatus)==null?void 0:n.refresh()),await((i=this.gitPanel)==null?void 0:i.refresh()),this.setStatus("Cloned: "+t)}catch(s){alert("Cloned successfully, but failed to open: "+s.message)}})}renderStartupRecents(){let t="";for(const r of this.recents)t+=`
        <div class="startup-recent-item" data-path="${this.escapeAttr(r.path)}">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
          </svg>
          <div class="startup-recent-info">
            <span class="startup-recent-name">${this.escapeHtml(r.name)}</span>
            <span class="startup-recent-path">${this.escapeHtml(r.path)}</span>
          </div>
        </div>
      `;this.elements.startupRecents.innerHTML=t,this.elements.startupRecents.querySelectorAll(".startup-recent-item").forEach(r=>{r.addEventListener("click",async()=>{const n=r.dataset.path;await this.openStartupDirectory(n)})})}async openStartupDirectory(t){var r,n,i;try{await Le.changeDirectory(t),this.hideStartupModal(),await((r=this.fileTree)==null?void 0:r.load()),await((n=this.gitStatus)==null?void 0:n.refresh()),await((i=this.gitPanel)==null?void 0:i.refresh()),this.setStatus("Opened: "+t)}catch(s){alert("Failed to open directory: "+s.message)}}}document.addEventListener("DOMContentLoaded",()=>{new AEt().init().catch(console.error)});export{kW as $,vm as A,V3t as B,Vkt as C,gT as D,$n as E,dW as F,G8t as G,kSt as H,vD as I,A8t as J,ikt as K,Ld as L,eLt as M,rw as N,Ckt as O,F9 as P,CD as Q,dSt as R,vb as S,U8t as T,N1 as U,Okt as V,P1 as W,Vt as X,oe as Y,F8t as Z,k as _,Nkt as a,Qrt as a$,cSt as a0,VD as a1,qD as a2,fLt as a3,aLt as a4,hLt as a5,cLt as a6,sLt as a7,Fu as a8,J9 as a9,kn as aA,YI as aB,r7 as aC,ns as aD,bQ as aE,De as aF,dr as aG,Lr as aH,$t as aI,ot as aJ,BEt as aK,HEt as aL,WEt as aM,qEt as aN,II as aO,sQ as aP,rJ as aQ,Z6 as aR,f_ as aS,DEt as aT,QEt as aU,Snt as aV,zrt as aW,ER as aX,ps as aY,bs as aZ,$d as a_,uLt as aa,oLt as ab,pLt as ac,dLt as ad,lLt as ae,DTt as af,lY as ag,SLt as ah,L8t as ai,en as aj,Dc as ak,cT as al,BG as am,Au as an,oG as ao,ve as ap,ta as aq,xk as ar,Vrt as as,OR as at,tnt as au,Rrt as av,VEt as aw,it as ax,ZEt as ay,dbt as az,Pkt as b,HI as b$,Cc as b0,zd as b1,_v as b2,ch as b3,zH as b4,Sr as b5,Q as b6,vk as b7,C_t as b8,CLt as b9,G9 as bA,Nl as bB,PD as bC,V6t as bD,bg as bE,Ut as bF,QU as bG,Li as bH,P6t as bI,U9 as bJ,PW as bK,$1 as bL,$W as bM,iLt as bN,q3t as bO,iJ as bP,uJ as bQ,eQ as bR,Q6 as bS,GJ as bT,pQ as bU,Eb as bV,JJ as bW,eZ as bX,Qg as bY,Db as bZ,hJ as b_,TLt as ba,wLt as bb,Kt as bc,kLt as bd,s_t as be,t_t as bf,QTt as bg,aTt as bh,hSt as bi,tLt as bj,Blt as bk,bN as bl,q1 as bm,sTt as bn,iTt as bo,KT as bp,dJ as bq,zI as br,pv as bs,mv as bt,Lb as bu,TX as bv,LI as bw,rs as bx,DI as by,cJ as bz,Ze as c,JZ as c0,ZZ as c1,Nd as c2,Yc as c3,e_ as c4,JX as c5,t7 as c6,WZ as c7,QZ as c8,Fd as c9,kc as ca,u_ as cb,e7 as cc,BI as cd,E3 as ce,RI as cf,gv as cg,gu as ch,X as ci,$e as d,wW as e,Zr as f,$kt as g,hl as h,Ls as i,tG as j,r0 as k,ht as l,lG as m,rLt as n,MLt as o,zkt as p,Hkt as q,_Lt as r,Fkt as s,E8t as t,Gs as u,XTt as v,X8t as w,mLt as x,Rkt as y,nLt as z};
